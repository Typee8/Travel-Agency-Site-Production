/*! For license information please see client.min.js.LICENSE.txt */
(()=>{"use strict";var e={609:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(354),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([e.id,".basket__header--medium {\n  font-weight: var(--font-weight-medium);\n}\n\n.total-price__value {\n  font-weight: var(--font-weight-semi-bold);\n}\n\n.basket__header {\n  font-size: 1.2rem;\n}\n\n.basket__header--main {\n  font-size: 1.6rem;\n}\n\n.basket__header--medium {\n  font-size: 1.3rem;\n}\n\n.item__total-price {\n  font-size: 1.3rem;\n}\n\n.basket__header--mobile,\n.item__prices {\n  font-size: 1rem;\n}\n\n.order__field-input {\n  font-size: 1.2rem;\n}\n\n@media (min-width: 650px) {\n  .basket__header {\n    font-size: 1.3rem;\n  }\n\n  .basket__header--main {\n    font-size: 2rem;\n  }\n\n  .basket__header--medium {\n    font-size: 1.5rem;\n  }\n\n  .item__total-price {\n    font-size: 1.5rem;\n  }\n\n  .item__prices {\n    font-size: 1.2rem;\n  }\n\n  .order__field-input {\n    font-size: 1.2rem;\n  }\n}\n\n@media (min-width: 950px) {\n\n  .basket__header {\n    font-size: 1.3rem;\n  }\n\n  .basket__header--main {\n    font-size: 2.5rem;\n  }\n\n  .basket__header--medium {\n    font-size: 1.5rem;\n  }\n\n  .order__field-input {\n    font-size: 1.3rem;\n  }\n}","",{version:3,sources:["webpack://./src/css/client/basket/basket-fonts.css"],names:[],mappings:"AAAA;EACE,sCAAsC;AACxC;;AAEA;EACE,yCAAyC;AAC3C;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;;EAEE,eAAe;AACjB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE;IACE,iBAAiB;EACnB;;EAEA;IACE,eAAe;EACjB;;EAEA;IACE,iBAAiB;EACnB;;EAEA;IACE,iBAAiB;EACnB;;EAEA;IACE,iBAAiB;EACnB;;EAEA;IACE,iBAAiB;EACnB;AACF;;AAEA;;EAEE;IACE,iBAAiB;EACnB;;EAEA;IACE,iBAAiB;EACnB;;EAEA;IACE,iBAAiB;EACnB;;EAEA;IACE,iBAAiB;EACnB;AACF",sourcesContent:[".basket__header--medium {\n  font-weight: var(--font-weight-medium);\n}\n\n.total-price__value {\n  font-weight: var(--font-weight-semi-bold);\n}\n\n.basket__header {\n  font-size: 1.2rem;\n}\n\n.basket__header--main {\n  font-size: 1.6rem;\n}\n\n.basket__header--medium {\n  font-size: 1.3rem;\n}\n\n.item__total-price {\n  font-size: 1.3rem;\n}\n\n.basket__header--mobile,\n.item__prices {\n  font-size: 1rem;\n}\n\n.order__field-input {\n  font-size: 1.2rem;\n}\n\n@media (min-width: 650px) {\n  .basket__header {\n    font-size: 1.3rem;\n  }\n\n  .basket__header--main {\n    font-size: 2rem;\n  }\n\n  .basket__header--medium {\n    font-size: 1.5rem;\n  }\n\n  .item__total-price {\n    font-size: 1.5rem;\n  }\n\n  .item__prices {\n    font-size: 1.2rem;\n  }\n\n  .order__field-input {\n    font-size: 1.2rem;\n  }\n}\n\n@media (min-width: 950px) {\n\n  .basket__header {\n    font-size: 1.3rem;\n  }\n\n  .basket__header--main {\n    font-size: 2.5rem;\n  }\n\n  .basket__header--medium {\n    font-size: 1.5rem;\n  }\n\n  .order__field-input {\n    font-size: 1.3rem;\n  }\n}"],sourceRoot:""}]);const a=o},420:(e,t,n)=>{n.d(t,{A:()=>u});var i=n(354),r=n.n(i),s=n(314),o=n.n(s),a=n(417),l=n.n(a),c=new URL(n(637),n.b),h=o()(r()),d=l()(c);h.push([e.id,`.basket {\n  position: fixed;\n  z-index: 998;\n  top: 0;\n  left: 0;\n  display: none;\n  align-items: start;\n  gap: 40px;\n  grid-template-areas: "items"\n    "total-price"\n    "order";\n  padding-top: 169px;\n  padding-inline: 20px;\n  padding-bottom: 40px;\n  width: 100vw;\n  height: 100vh;\n  background-color: var(--primary-color-bright);\n  overflow-y: auto;\n}\n\n.basket--open {\n  display: grid;\n}\n\n.basket__items,\n.total-price,\n.basket__order {\n  border-radius: 20px;\n  padding: 30px;\n  background-color: var(--primary-color);\n}\n\n.basket__items,\n.item-list__item {\n  display: grid;\n  gap: 20px;\n  grid-template-columns: 1fr 1fr 0.5fr 0.4fr;\n}\n\n.basket__items {\n  grid-area: items;\n  gap: 30px;\n}\n\n.total-price {\n  grid-area: total-price;\n}\n\n.order {\n  grid-area: order;\n}\n\n.basket__header--main {\n  grid-column: 1 / 5;\n  padding-bottom: 10px;\n  border-bottom: 3px solid var(--primary-color-stripe);\n}\n\n.basket__header--padding-left {\n  padding-left: 20px;\n}\n\n.basket__order>.order__field--submit {\n  text-align: center;\n}\n\n.basket__order>*:not(:last-child) {\n  margin-bottom: 10px;\n}\n\n.order__field-error {\n  color: red;\n}\n\n.order__field-input {\n  margin-top: 10px;\n  border: none;\n  color: white;\n  background-color: var(--primary-color-bright);\n}\n\n.order__field-submit {\n  padding: 20px;\n  margin-top: 30px;\n  width: 200px;\n  border: 4px solid white;\n  background-color: var(--secondary-color);\n}\n\n.order__field-name {\n  display: flex;\n  flex-direction: column;\n  gap: 5px;\n}\n\n.items-list {\n  grid-column: 1 / 5;\n}\n\n.item-list__item {\n  grid-column: 1 / 5;\n  align-items: center;\n  padding: 30px 20px;\n  border: 3px solid var(--primary-color-stripe);\n  border-radius: 20px;\n}\n\n.item__btn-remove {\n  content: url(${d});\n  margin-top: 30px;\n  margin-inline: auto;\n  padding: 10px;\n  border-radius: 100vw;\n  border: 3px solid var(--primary-color-stripe);\n}\n\n.item__prices {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n.basket__header--tablet {\n  display: none;\n}\n\n.basket__header--mobile {\n  padding-bottom: 10px;\n  border-bottom: 3px solid var(--primary-color-stripe);\n}\n\n.basket__header--mobile:not(:first-child) {\n  margin-top: 30px;\n}\n\n.item-list__item {\n  grid-template-columns: 1fr;\n}\n\n.basket__header--medium,\n.item__prices,\n.item__total-price {\n  text-align: center;\n}\n\n@media (max-width: 360px) {\n\n  .basket,\n  .basket__items,\n  .total-price,\n  .basket__order {\n    padding-inline: 10px;\n  }\n}\n\n@media (min-width: 650px) {\n\n  .basket {\n    padding-inline: 40px;\n  }\n}\n\n@media (min-width: 950px) {\n\n  .basket__header--medium,\n  .item__prices,\n  .item__total-price {\n    text-align: unset;\n  }\n\n  .item__btn-remove {\n    margin-top: unset;\n  }\n\n  .basket__header--mobile {\n    display: none;\n  }\n\n  .basket__header--tablet {\n    display: initial;\n  }\n\n  .basket {\n    grid-template-areas: "items items"\n      "total-price order";\n    grid-template-rows: 1fr 2fr;\n    padding-inline: 60px;\n  }\n\n  .item-list__item {\n    justify-items: start;\n    grid-template-columns: 1fr 1fr 0.5fr 0.4fr;\n  }\n\n}\n\n@media (min-width: 1200px) {\n  .basket {\n    grid-template-areas:\n      "items total-price"\n      "items order";\n    grid-template-columns: 1fr 0.5fr;\n    grid-template-rows: max-content;\n  }\n}`,"",{version:3,sources:["webpack://./src/css/client/basket/basket.css"],names:[],mappings:"AAAA;EACE,eAAe;EACf,YAAY;EACZ,MAAM;EACN,OAAO;EACP,aAAa;EACb,kBAAkB;EAClB,SAAS;EACT;;WAES;EACT,kBAAkB;EAClB,oBAAoB;EACpB,oBAAoB;EACpB,YAAY;EACZ,aAAa;EACb,6CAA6C;EAC7C,gBAAgB;AAClB;;AAEA;EACE,aAAa;AACf;;AAEA;;;EAGE,mBAAmB;EACnB,aAAa;EACb,sCAAsC;AACxC;;AAEA;;EAEE,aAAa;EACb,SAAS;EACT,0CAA0C;AAC5C;;AAEA;EACE,gBAAgB;EAChB,SAAS;AACX;;AAEA;EACE,sBAAsB;AACxB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,kBAAkB;EAClB,oBAAoB;EACpB,oDAAoD;AACtD;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,mBAAmB;AACrB;;AAEA;EACE,UAAU;AACZ;;AAEA;EACE,gBAAgB;EAChB,YAAY;EACZ,YAAY;EACZ,6CAA6C;AAC/C;;AAEA;EACE,aAAa;EACb,gBAAgB;EAChB,YAAY;EACZ,uBAAuB;EACvB,wCAAwC;AAC1C;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,QAAQ;AACV;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;EAClB,mBAAmB;EACnB,kBAAkB;EAClB,6CAA6C;EAC7C,mBAAmB;AACrB;;AAEA;EACE,gDAA2C;EAC3C,gBAAgB;EAChB,mBAAmB;EACnB,aAAa;EACb,oBAAoB;EACpB,6CAA6C;AAC/C;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,SAAS;AACX;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,oBAAoB;EACpB,oDAAoD;AACtD;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,0BAA0B;AAC5B;;AAEA;;;EAGE,kBAAkB;AACpB;;AAEA;;EAEE;;;;IAIE,oBAAoB;EACtB;AACF;;AAEA;;EAEE;IACE,oBAAoB;EACtB;AACF;;AAEA;;EAEE;;;IAGE,iBAAiB;EACnB;;EAEA;IACE,iBAAiB;EACnB;;EAEA;IACE,aAAa;EACf;;EAEA;IACE,gBAAgB;EAClB;;EAEA;IACE;yBACqB;IACrB,2BAA2B;IAC3B,oBAAoB;EACtB;;EAEA;IACE,oBAAoB;IACpB,0CAA0C;EAC5C;;AAEF;;AAEA;EACE;IACE;;mBAEe;IACf,gCAAgC;IAChC,+BAA+B;EACjC;AACF",sourcesContent:['.basket {\n  position: fixed;\n  z-index: 998;\n  top: 0;\n  left: 0;\n  display: none;\n  align-items: start;\n  gap: 40px;\n  grid-template-areas: "items"\n    "total-price"\n    "order";\n  padding-top: 169px;\n  padding-inline: 20px;\n  padding-bottom: 40px;\n  width: 100vw;\n  height: 100vh;\n  background-color: var(--primary-color-bright);\n  overflow-y: auto;\n}\n\n.basket--open {\n  display: grid;\n}\n\n.basket__items,\n.total-price,\n.basket__order {\n  border-radius: 20px;\n  padding: 30px;\n  background-color: var(--primary-color);\n}\n\n.basket__items,\n.item-list__item {\n  display: grid;\n  gap: 20px;\n  grid-template-columns: 1fr 1fr 0.5fr 0.4fr;\n}\n\n.basket__items {\n  grid-area: items;\n  gap: 30px;\n}\n\n.total-price {\n  grid-area: total-price;\n}\n\n.order {\n  grid-area: order;\n}\n\n.basket__header--main {\n  grid-column: 1 / 5;\n  padding-bottom: 10px;\n  border-bottom: 3px solid var(--primary-color-stripe);\n}\n\n.basket__header--padding-left {\n  padding-left: 20px;\n}\n\n.basket__order>.order__field--submit {\n  text-align: center;\n}\n\n.basket__order>*:not(:last-child) {\n  margin-bottom: 10px;\n}\n\n.order__field-error {\n  color: red;\n}\n\n.order__field-input {\n  margin-top: 10px;\n  border: none;\n  color: white;\n  background-color: var(--primary-color-bright);\n}\n\n.order__field-submit {\n  padding: 20px;\n  margin-top: 30px;\n  width: 200px;\n  border: 4px solid white;\n  background-color: var(--secondary-color);\n}\n\n.order__field-name {\n  display: flex;\n  flex-direction: column;\n  gap: 5px;\n}\n\n.items-list {\n  grid-column: 1 / 5;\n}\n\n.item-list__item {\n  grid-column: 1 / 5;\n  align-items: center;\n  padding: 30px 20px;\n  border: 3px solid var(--primary-color-stripe);\n  border-radius: 20px;\n}\n\n.item__btn-remove {\n  content: url(../../../assets/deleteBtn.svg);\n  margin-top: 30px;\n  margin-inline: auto;\n  padding: 10px;\n  border-radius: 100vw;\n  border: 3px solid var(--primary-color-stripe);\n}\n\n.item__prices {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n.basket__header--tablet {\n  display: none;\n}\n\n.basket__header--mobile {\n  padding-bottom: 10px;\n  border-bottom: 3px solid var(--primary-color-stripe);\n}\n\n.basket__header--mobile:not(:first-child) {\n  margin-top: 30px;\n}\n\n.item-list__item {\n  grid-template-columns: 1fr;\n}\n\n.basket__header--medium,\n.item__prices,\n.item__total-price {\n  text-align: center;\n}\n\n@media (max-width: 360px) {\n\n  .basket,\n  .basket__items,\n  .total-price,\n  .basket__order {\n    padding-inline: 10px;\n  }\n}\n\n@media (min-width: 650px) {\n\n  .basket {\n    padding-inline: 40px;\n  }\n}\n\n@media (min-width: 950px) {\n\n  .basket__header--medium,\n  .item__prices,\n  .item__total-price {\n    text-align: unset;\n  }\n\n  .item__btn-remove {\n    margin-top: unset;\n  }\n\n  .basket__header--mobile {\n    display: none;\n  }\n\n  .basket__header--tablet {\n    display: initial;\n  }\n\n  .basket {\n    grid-template-areas: "items items"\n      "total-price order";\n    grid-template-rows: 1fr 2fr;\n    padding-inline: 60px;\n  }\n\n  .item-list__item {\n    justify-items: start;\n    grid-template-columns: 1fr 1fr 0.5fr 0.4fr;\n  }\n\n}\n\n@media (min-width: 1200px) {\n  .basket {\n    grid-template-areas:\n      "items total-price"\n      "items order";\n    grid-template-columns: 1fr 0.5fr;\n    grid-template-rows: max-content;\n  }\n}'],sourceRoot:""}]);const u=h},751:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(354),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([e.id,"@media (min-width: 1200px) {\n\n  .navbar {\n    justify-content: space-evenly;\n  }\n\n  .navbar__container {\n    display: flex;\n  }\n\n  .navbar__item {\n    padding: 15px 25px;\n  }\n\n  .navbar__item:hover {\n    cursor: pointer;\n    background-color: #011E3F;\n  }\n\n  .wrapper--main::before {\n    content: '';\n    position: absolute;\n    top: 110px;\n    left: 8vw;\n    right: 8vw;\n    border-bottom: 3px solid var(--primary-color-stripe);\n  }\n\n  .mainpage {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    justify-items: center;\n    gap: 5vw;\n    padding-inline: 5vw;\n    margin-top: 60px;\n    margin-bottom: 7vh;\n  }\n\n  .mainpage__container {\n    justify-self: end;\n  }\n\n  .mainpage__container--img {\n    justify-self: start;\n  }\n\n  .mainpage__img {\n    min-width: 250px;\n    min-height: 400px;\n    max-height: 600px;\n    border-radius: 60px;\n  }\n\n  .header--panel {\n    display: block;\n    margin-bottom: 20px;\n    border-bottom: 3px solid var(--primary-color-stripe);\n  }\n\n  .panel {\n    padding: 0 60px;\n  }\n\n  .panel__container {\n    text-align: initial;\n  }\n\n  .panel__excursions {\n    justify-content: initial;\n    gap: 40px;\n    grid-template-columns: repeat(auto-fit, 330px);\n    padding-inline: unset;\n  }\n\n  .navbar__btn,\n  .header--logo::after,\n  .header--panel::after {\n    display: none;\n  }\n\n  .basket-btn__wrapper {\n    top: 40px;\n    right: calc(10px + 2vw);\n  }\n}","",{version:3,sources:["webpack://./src/css/client/desktop.css"],names:[],mappings:"AAAA;;EAEE;IACE,6BAA6B;EAC/B;;EAEA;IACE,aAAa;EACf;;EAEA;IACE,kBAAkB;EACpB;;EAEA;IACE,eAAe;IACf,yBAAyB;EAC3B;;EAEA;IACE,WAAW;IACX,kBAAkB;IAClB,UAAU;IACV,SAAS;IACT,UAAU;IACV,oDAAoD;EACtD;;EAEA;IACE,aAAa;IACb,8BAA8B;IAC9B,qBAAqB;IACrB,QAAQ;IACR,mBAAmB;IACnB,gBAAgB;IAChB,kBAAkB;EACpB;;EAEA;IACE,iBAAiB;EACnB;;EAEA;IACE,mBAAmB;EACrB;;EAEA;IACE,gBAAgB;IAChB,iBAAiB;IACjB,iBAAiB;IACjB,mBAAmB;EACrB;;EAEA;IACE,cAAc;IACd,mBAAmB;IACnB,oDAAoD;EACtD;;EAEA;IACE,eAAe;EACjB;;EAEA;IACE,mBAAmB;EACrB;;EAEA;IACE,wBAAwB;IACxB,SAAS;IACT,8CAA8C;IAC9C,qBAAqB;EACvB;;EAEA;;;IAGE,aAAa;EACf;;EAEA;IACE,SAAS;IACT,uBAAuB;EACzB;AACF",sourcesContent:["@media (min-width: 1200px) {\n\n  .navbar {\n    justify-content: space-evenly;\n  }\n\n  .navbar__container {\n    display: flex;\n  }\n\n  .navbar__item {\n    padding: 15px 25px;\n  }\n\n  .navbar__item:hover {\n    cursor: pointer;\n    background-color: #011E3F;\n  }\n\n  .wrapper--main::before {\n    content: '';\n    position: absolute;\n    top: 110px;\n    left: 8vw;\n    right: 8vw;\n    border-bottom: 3px solid var(--primary-color-stripe);\n  }\n\n  .mainpage {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    justify-items: center;\n    gap: 5vw;\n    padding-inline: 5vw;\n    margin-top: 60px;\n    margin-bottom: 7vh;\n  }\n\n  .mainpage__container {\n    justify-self: end;\n  }\n\n  .mainpage__container--img {\n    justify-self: start;\n  }\n\n  .mainpage__img {\n    min-width: 250px;\n    min-height: 400px;\n    max-height: 600px;\n    border-radius: 60px;\n  }\n\n  .header--panel {\n    display: block;\n    margin-bottom: 20px;\n    border-bottom: 3px solid var(--primary-color-stripe);\n  }\n\n  .panel {\n    padding: 0 60px;\n  }\n\n  .panel__container {\n    text-align: initial;\n  }\n\n  .panel__excursions {\n    justify-content: initial;\n    gap: 40px;\n    grid-template-columns: repeat(auto-fit, 330px);\n    padding-inline: unset;\n  }\n\n  .navbar__btn,\n  .header--logo::after,\n  .header--panel::after {\n    display: none;\n  }\n\n  .basket-btn__wrapper {\n    top: 40px;\n    right: calc(10px + 2vw);\n  }\n}"],sourceRoot:""}]);const a=o},813:(e,t,n)=>{n.d(t,{A:()=>g});var i=n(354),r=n.n(i),s=n(314),o=n.n(s),a=n(417),l=n.n(a),c=new URL(n(77),n.b),h=new URL(n(990),n.b),d=new URL(n(208),n.b),u=new URL(n(622),n.b),p=o()(r()),A=l()(c),_=l()(h),m=l()(d),f=l()(u);p.push([e.id,`:root {\n  font-size: 16px;\n  --font-weight-normal: 400;\n  --font-weight-medium: 500;\n  --font-weight-semi-bold: 600;\n  --font-weight-bold: 700;\n}\n\n@font-face {\n  font-family: 'Montserrat';\n  src: url(${A});\n  font-weight: 400;\n}\n\n@font-face {\n  font-family: 'Montserrat';\n  src: url(${_});\n  font-weight: 500;\n}\n\n@font-face {\n  font-family: 'Montserrat';\n  src: url(${m});\n  font-weight: 600;\n}\n\n@font-face {\n  font-family: 'Montserrat';\n  src: url(${f});\n  font-weight: 700;\n}\n\n* {\n  font-family: 'Montserrat';\n  font-weight: var(--font-weight-normal);\n  color: white;\n}\n\n.text--navbar {\n  font-weight: var(--font-weight-medium);\n}\n\n.header--logo,\n.header--panel,\n.excursions__price {\n  font-weight: var(--font-weight-semi-bold);\n}\n\n.header--mainpage,\n.header__border {\n  font-weight: var(--font-weight-bold);\n}\n\n.header {\n  font-size: 1.5rem;\n}\n\n.header--mainpage {\n  font-size: 2.3rem;\n}\n\n.header--logo {\n  font-size: 1.2rem;\n}\n\n.text--navbar {\n  font-size: 1rem;\n}\n\n@media (min-width: 650px) {\n  .header {\n    font-size: 1.8rem;\n  }\n\n  .header--mainpage {\n    font-size: 3rem;\n  }\n\n  .header--logo {\n    font-size: 1.5rem;\n  }\n\n  .text--navbar {\n    font-size: 1.2rem;\n  }\n}\n\n@media (min-width: 950px) {\n  .header--mainpage {\n    font-size: 4rem;\n  }\n\n  .mainpage__text {\n    font-size: 1.2rem;\n  }\n}\n\n@media (min-width: 1200px) {\n  .header {\n    font-size: 2rem;\n  }\n\n  .header--mainpage {\n    font-size: 4.4rem;\n  }\n\n  .text--navbar {\n    font-size: 1rem;\n  }\n\n}`,"",{version:3,sources:["webpack://./src/css/client/fonts.css"],names:[],mappings:"AAAA;EACE,eAAe;EACf,yBAAyB;EACzB,yBAAyB;EACzB,4BAA4B;EAC5B,uBAAuB;AACzB;;AAEA;EACE,yBAAyB;EACzB,4CAAuD;EACvD,gBAAgB;AAClB;;AAEA;EACE,yBAAyB;EACzB,4CAAsD;EACtD,gBAAgB;AAClB;;AAEA;EACE,yBAAyB;EACzB,4CAAwD;EACxD,gBAAgB;AAClB;;AAEA;EACE,yBAAyB;EACzB,4CAAoD;EACpD,gBAAgB;AAClB;;AAEA;EACE,yBAAyB;EACzB,sCAAsC;EACtC,YAAY;AACd;;AAEA;EACE,sCAAsC;AACxC;;AAEA;;;EAGE,yCAAyC;AAC3C;;AAEA;;EAEE,oCAAoC;AACtC;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE;IACE,iBAAiB;EACnB;;EAEA;IACE,eAAe;EACjB;;EAEA;IACE,iBAAiB;EACnB;;EAEA;IACE,iBAAiB;EACnB;AACF;;AAEA;EACE;IACE,eAAe;EACjB;;EAEA;IACE,iBAAiB;EACnB;AACF;;AAEA;EACE;IACE,eAAe;EACjB;;EAEA;IACE,iBAAiB;EACnB;;EAEA;IACE,eAAe;EACjB;;AAEF",sourcesContent:[":root {\n  font-size: 16px;\n  --font-weight-normal: 400;\n  --font-weight-medium: 500;\n  --font-weight-semi-bold: 600;\n  --font-weight-bold: 700;\n}\n\n@font-face {\n  font-family: 'Montserrat';\n  src: url(../../fonts/Montserrat/Montserrat-Regular.ttf);\n  font-weight: 400;\n}\n\n@font-face {\n  font-family: 'Montserrat';\n  src: url(../../fonts/Montserrat/Montserrat-Medium.ttf);\n  font-weight: 500;\n}\n\n@font-face {\n  font-family: 'Montserrat';\n  src: url(../../fonts/Montserrat/Montserrat-SemiBold.ttf);\n  font-weight: 600;\n}\n\n@font-face {\n  font-family: 'Montserrat';\n  src: url(../../fonts/Montserrat/Montserrat-Bold.ttf);\n  font-weight: 700;\n}\n\n* {\n  font-family: 'Montserrat';\n  font-weight: var(--font-weight-normal);\n  color: white;\n}\n\n.text--navbar {\n  font-weight: var(--font-weight-medium);\n}\n\n.header--logo,\n.header--panel,\n.excursions__price {\n  font-weight: var(--font-weight-semi-bold);\n}\n\n.header--mainpage,\n.header__border {\n  font-weight: var(--font-weight-bold);\n}\n\n.header {\n  font-size: 1.5rem;\n}\n\n.header--mainpage {\n  font-size: 2.3rem;\n}\n\n.header--logo {\n  font-size: 1.2rem;\n}\n\n.text--navbar {\n  font-size: 1rem;\n}\n\n@media (min-width: 650px) {\n  .header {\n    font-size: 1.8rem;\n  }\n\n  .header--mainpage {\n    font-size: 3rem;\n  }\n\n  .header--logo {\n    font-size: 1.5rem;\n  }\n\n  .text--navbar {\n    font-size: 1.2rem;\n  }\n}\n\n@media (min-width: 950px) {\n  .header--mainpage {\n    font-size: 4rem;\n  }\n\n  .mainpage__text {\n    font-size: 1.2rem;\n  }\n}\n\n@media (min-width: 1200px) {\n  .header {\n    font-size: 2rem;\n  }\n\n  .header--mainpage {\n    font-size: 4.4rem;\n  }\n\n  .text--navbar {\n    font-size: 1rem;\n  }\n\n}"],sourceRoot:""}]);const g=p},446:(e,t,n)=>{n.d(t,{A:()=>u});var i=n(354),r=n.n(i),s=n(314),o=n.n(s),a=n(417),l=n.n(a),c=new URL(n(824),n.b),h=o()(r()),d=l()(c);h.push([e.id,`:root {\n  --primary-color: #517579;\n  --primary-color-bright: #658888;\n  --primary-color-stripe: #7a9e9e;\n  --secondary-color: #011E3F;\n}\n\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nul {\n  list-style: none;\n}\n\n.navbar {\n  position: fixed;\n  z-index: 999;\n  display: flex;\n  padding: 40px 60px;\n  width: 100vw;\n  height: 110px;\n  color: white;\n  background-color: transparent;\n}\n\n.navbar--background-scroll,\n.navbar--background-basket-btn,\n.navbar--background-navbar-btn {\n  background-color: var(--primary-color);\n}\n\n.navbar__item,\n.header--logo {\n  margin: auto 0;\n}\n\n.header--logo {\n  position: relative;\n}\n\n.wrapper--main {\n  min-height: 100vh;\n  padding-top: 130px;\n  background: linear-gradient(135deg, #517579 0%, #899280 100%);\n}\n.mainpage {\n  color: white;\n}\n\n.mainpage__container {\n  text-align: center;\n}\n\n.mainpage__text {\n  padding-inline: 5vw;\n}\n\n.header--mainpage {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n  margin-bottom: 20px;\n}\n\n\n\n.header__border {\n  padding-inline: 10px;\n  border: 5px solid #ECA222;\n  border-radius: 100vw;\n}\n\n.excursions__item ::-webkit-scrollbar {\n  width: 0.5em;\n}\n\n.excursions__item ::-webkit-scrollbar-thumb {\n  border-radius: 100vw;\n  background-color: var(--secondary-color);\n}\n\n.excursions__item ::-webkit-scrollbar-track {\n  margin-block: 0.5em;\n  border-radius: 100vw;\n  background-color: white;\n}\n\n.panel__excursions {\n  display: grid;\n  padding-bottom: 40px;\n}\n\n\n.excursions__item {\n  display: flex;\n  flex-direction: column;\n  padding: 20px 40px;\n  gap: 30px;\n  background: linear-gradient(80deg, #517579 40%, #a9a483 250%);\n}\n\n.excursions__item:nth-child(odd) {\n  background: linear-gradient(130deg, #517579 40%, #a9a483 160%);\n}\n\n.excursions__name {\n  display: inline-block;\n  margin-bottom: 10px;\n  border-bottom: 3px solid var(--primary-color-stripe);\n}\n\n.excursions__description {\n  max-height: 150px;\n  overflow-y: auto;\n  padding-bottom: 10px;\n  border-bottom: 3px solid var(--primary-color-stripe);\n}\n\n.excursions__field-error {\n  color: red;\n}\n\n.excursions__form {\n  margin-top: auto;\n}\n\n.excursions__field {\n  margin: auto 0;\n}\n\n.excursions__field-name {\n  display: grid;\n  justify-content: center;\n  gap: 10px;\n}\n\n.excursions__price-wrapper {\n  grid-column: 1 / 2;\n}\n\n.excursions__field-error {\n  grid-column: 1 / 3;\n  grid-row: 2 / 3\n}\n\n.excursions__field--submit {\n  text-align: center;\n}\n\n.excursions__field-input {\n  border: none;\n  color: white;\n  background-color: var(--primary-color-bright);\n}\n\n.excursions__field-input {\n  grid-column: 2 / 3;\n  justify-self: center;\n  text-align: center;\n}\n\n.excursions__field-input--submit {\n  padding: 20px;\n  margin-top: 30px;\n  border: 4px solid white;\n  background-color: var(--secondary-color);\n}\n\n\n.excursions__form> :first-child {\n  margin-bottom: 10px;\n}\n\n.navbar__toggle {\n  display: none;\n}\n\n.basket-btn {\n  display: none;\n}\n\n.basket-btn__wrapper {\n  position: absolute;\n  top: 37px;\n  right: 25px;\n  z-index: 999;\n}\n\n.basket-btn__icon {\n  content: url(${d});\n  width: 30px;\n  height: 30px;\n}\n\n.basket-btn__quantity {\n  position: absolute;\n  display: none;\n  justify-content: center;\n  align-items: center;\n  width: 30px;\n  height: 30px;\n}\n\n.excursions__item--prototype,\n.item-list__item--prototype {\n  display: none !important;\n}\n`,"",{version:3,sources:["webpack://./src/css/client/global.css"],names:[],mappings:"AAAA;EACE,wBAAwB;EACxB,+BAA+B;EAC/B,+BAA+B;EAC/B,0BAA0B;AAC5B;;AAEA;EACE,SAAS;EACT,UAAU;EACV,sBAAsB;AACxB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,eAAe;EACf,YAAY;EACZ,aAAa;EACb,kBAAkB;EAClB,YAAY;EACZ,aAAa;EACb,YAAY;EACZ,6BAA6B;AAC/B;;AAEA;;;EAGE,sCAAsC;AACxC;;AAEA;;EAEE,cAAc;AAChB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,iBAAiB;EACjB,kBAAkB;EAClB,6DAA6D;AAC/D;AACA;EACE,YAAY;AACd;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,mBAAmB;AACrB;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,mBAAmB;EACnB,SAAS;EACT,mBAAmB;AACrB;;;;AAIA;EACE,oBAAoB;EACpB,yBAAyB;EACzB,oBAAoB;AACtB;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,oBAAoB;EACpB,wCAAwC;AAC1C;;AAEA;EACE,mBAAmB;EACnB,oBAAoB;EACpB,uBAAuB;AACzB;;AAEA;EACE,aAAa;EACb,oBAAoB;AACtB;;;AAGA;EACE,aAAa;EACb,sBAAsB;EACtB,kBAAkB;EAClB,SAAS;EACT,6DAA6D;AAC/D;;AAEA;EACE,8DAA8D;AAChE;;AAEA;EACE,qBAAqB;EACrB,mBAAmB;EACnB,oDAAoD;AACtD;;AAEA;EACE,iBAAiB;EACjB,gBAAgB;EAChB,oBAAoB;EACpB,oDAAoD;AACtD;;AAEA;EACE,UAAU;AACZ;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,aAAa;EACb,uBAAuB;EACvB,SAAS;AACX;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;EAClB;AACF;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,YAAY;EACZ,YAAY;EACZ,6CAA6C;AAC/C;;AAEA;EACE,kBAAkB;EAClB,oBAAoB;EACpB,kBAAkB;AACpB;;AAEA;EACE,aAAa;EACb,gBAAgB;EAChB,uBAAuB;EACvB,wCAAwC;AAC1C;;;AAGA;EACE,mBAAmB;AACrB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,kBAAkB;EAClB,SAAS;EACT,WAAW;EACX,YAAY;AACd;;AAEA;EACE,gDAA0C;EAC1C,WAAW;EACX,YAAY;AACd;;AAEA;EACE,kBAAkB;EAClB,aAAa;EACb,uBAAuB;EACvB,mBAAmB;EACnB,WAAW;EACX,YAAY;AACd;;AAEA;;EAEE,wBAAwB;AAC1B",sourcesContent:[":root {\n  --primary-color: #517579;\n  --primary-color-bright: #658888;\n  --primary-color-stripe: #7a9e9e;\n  --secondary-color: #011E3F;\n}\n\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nul {\n  list-style: none;\n}\n\n.navbar {\n  position: fixed;\n  z-index: 999;\n  display: flex;\n  padding: 40px 60px;\n  width: 100vw;\n  height: 110px;\n  color: white;\n  background-color: transparent;\n}\n\n.navbar--background-scroll,\n.navbar--background-basket-btn,\n.navbar--background-navbar-btn {\n  background-color: var(--primary-color);\n}\n\n.navbar__item,\n.header--logo {\n  margin: auto 0;\n}\n\n.header--logo {\n  position: relative;\n}\n\n.wrapper--main {\n  min-height: 100vh;\n  padding-top: 130px;\n  background: linear-gradient(135deg, #517579 0%, #899280 100%);\n}\n.mainpage {\n  color: white;\n}\n\n.mainpage__container {\n  text-align: center;\n}\n\n.mainpage__text {\n  padding-inline: 5vw;\n}\n\n.header--mainpage {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n  margin-bottom: 20px;\n}\n\n\n\n.header__border {\n  padding-inline: 10px;\n  border: 5px solid #ECA222;\n  border-radius: 100vw;\n}\n\n.excursions__item ::-webkit-scrollbar {\n  width: 0.5em;\n}\n\n.excursions__item ::-webkit-scrollbar-thumb {\n  border-radius: 100vw;\n  background-color: var(--secondary-color);\n}\n\n.excursions__item ::-webkit-scrollbar-track {\n  margin-block: 0.5em;\n  border-radius: 100vw;\n  background-color: white;\n}\n\n.panel__excursions {\n  display: grid;\n  padding-bottom: 40px;\n}\n\n\n.excursions__item {\n  display: flex;\n  flex-direction: column;\n  padding: 20px 40px;\n  gap: 30px;\n  background: linear-gradient(80deg, #517579 40%, #a9a483 250%);\n}\n\n.excursions__item:nth-child(odd) {\n  background: linear-gradient(130deg, #517579 40%, #a9a483 160%);\n}\n\n.excursions__name {\n  display: inline-block;\n  margin-bottom: 10px;\n  border-bottom: 3px solid var(--primary-color-stripe);\n}\n\n.excursions__description {\n  max-height: 150px;\n  overflow-y: auto;\n  padding-bottom: 10px;\n  border-bottom: 3px solid var(--primary-color-stripe);\n}\n\n.excursions__field-error {\n  color: red;\n}\n\n.excursions__form {\n  margin-top: auto;\n}\n\n.excursions__field {\n  margin: auto 0;\n}\n\n.excursions__field-name {\n  display: grid;\n  justify-content: center;\n  gap: 10px;\n}\n\n.excursions__price-wrapper {\n  grid-column: 1 / 2;\n}\n\n.excursions__field-error {\n  grid-column: 1 / 3;\n  grid-row: 2 / 3\n}\n\n.excursions__field--submit {\n  text-align: center;\n}\n\n.excursions__field-input {\n  border: none;\n  color: white;\n  background-color: var(--primary-color-bright);\n}\n\n.excursions__field-input {\n  grid-column: 2 / 3;\n  justify-self: center;\n  text-align: center;\n}\n\n.excursions__field-input--submit {\n  padding: 20px;\n  margin-top: 30px;\n  border: 4px solid white;\n  background-color: var(--secondary-color);\n}\n\n\n.excursions__form> :first-child {\n  margin-bottom: 10px;\n}\n\n.navbar__toggle {\n  display: none;\n}\n\n.basket-btn {\n  display: none;\n}\n\n.basket-btn__wrapper {\n  position: absolute;\n  top: 37px;\n  right: 25px;\n  z-index: 999;\n}\n\n.basket-btn__icon {\n  content: url(../../assets/basket_icon.svg);\n  width: 30px;\n  height: 30px;\n}\n\n.basket-btn__quantity {\n  position: absolute;\n  display: none;\n  justify-content: center;\n  align-items: center;\n  width: 30px;\n  height: 30px;\n}\n\n.excursions__item--prototype,\n.item-list__item--prototype {\n  display: none !important;\n}\n"],sourceRoot:""}]);const u=h},461:(e,t,n)=>{n.d(t,{A:()=>A});var i=n(354),r=n.n(i),s=n(314),o=n.n(s),a=n(417),l=n.n(a),c=new URL(n(241),n.b),h=new URL(n(970),n.b),d=o()(r()),u=l()(c),p=l()(h);d.push([e.id,`.navbar {\n  justify-content: center;\n}\n\n  .navbar__container--mobile {\n    position: absolute;\n    top: 110px;\n    display: none;\n    flex-direction: column;\n    align-items: center;\n    gap: 20px;\n    padding-block: 20px 40px;\n    width: 100vw;\n    border-block: 3px solid var(--primary-color-stripe);\n    background-color: var(--primary-color);\n  }\n\n  .navbar__container--open {\n    display: flex;\n  }\n\n  .navbar__item--mobile {\n    text-align: center;\n    padding-block: 20px 15px;\n    padding-inline: 30px;\n    margin-bottom: 5px;\n    border-radius: 6px;\n    border-bottom: 3px solid var(--primary-color-stripe);\n  }\n\n  .navbar__item--mobile:hover {\n    padding-bottom: 20px;\n    margin-bottom: 0;\n    border-bottom: 3px solid transparent;\n    border-radius: 20px;\n    background-color: var(--secondary-color);\n  }\n\n\n.navbar__btn {\n  position: absolute;\n  top: 37px;\n  left: 10px;\n  content: url(${u});\n  width: 30px;\n  height: 30px;\n}\n\n.navbar__btn--checked {\n  content: url(${p});\n}\n\n.basket-btn__quantity {\n  top: 36px;\n  left: 0px;\n  border-radius: 100vw;\n  background-color: var(--primary-color-bright);\n  border: 3px solid var(--primary-color-stripe);\n}\n\n@media (min-width: 650px) {\n\n  .navbar__btn,\n  .basket-btn__icon {\n    width: 40px;\n    height: 40px;\n  }\n\n  .basket-btn__quantity {\n    top: 11px;\n    left: 5px;\n    border: unset;\n    background-color: unset;\n  }\n}\n\n.panel__container {\n  text-align: center;\n  margin-bottom: 40px;\n}\n\n.header--panel {\n  display: inline-block;\n  position: relative;\n}\n\n.header--panel::after {\n  content: '';\n  position: absolute;\n  top: 35px;\n  left: -20px;\n  right: -20px;\n  border-bottom: 3px solid var(--primary-color-stripe);\n}\n\n.text--mainpage {\n  padding-inline: 20px;\n}\n\n.header--logo::after {\n  content: '';\n  position: absolute;\n  top: 35px;\n  left: -20px;\n  right: -20px;\n  border-bottom: 3px solid var(--primary-color-stripe);\n}\n\n.mainpage {\n  display: flex;\n  flex-direction: column;\n  gap: 30px;\n  margin-top: 20px;\n}\n\n.text--mainpage {\n  padding-inline: 20px;\n}\n\n.panel__excursions {\n  justify-content: center;\n  column-gap: 60px;\n  row-gap: 40px;\n  grid-template-columns: minmax(260px, 360px);\n  padding-inline: unset;\n}\n\n.navbar__btn {\n  left: 10px;\n}\n\n.basket-btn__wrapper {\n  top: 30px;\n  right: 10px;\n}\n\n\n@media (min-width: 360px) {\n  .navbar__btn {\n    left: 25px;\n  }\n\n  .basket-btn__wrapper {\n    right: 25px;\n  }\n\n  .panel__excursions {\n    padding-inline: 10vw;\n  }\n\n}\n\n@media (min-width: 950px) {\n  .panel__excursions {\n    grid-template-columns: 360px 360px;\n    padding-inline: 10vw;\n  }\n}`,"",{version:3,sources:["webpack://./src/css/client/mobile.css"],names:[],mappings:"AAAA;EACE,uBAAuB;AACzB;;EAEE;IACE,kBAAkB;IAClB,UAAU;IACV,aAAa;IACb,sBAAsB;IACtB,mBAAmB;IACnB,SAAS;IACT,wBAAwB;IACxB,YAAY;IACZ,mDAAmD;IACnD,sCAAsC;EACxC;;EAEA;IACE,aAAa;EACf;;EAEA;IACE,kBAAkB;IAClB,wBAAwB;IACxB,oBAAoB;IACpB,kBAAkB;IAClB,kBAAkB;IAClB,oDAAoD;EACtD;;EAEA;IACE,oBAAoB;IACpB,gBAAgB;IAChB,oCAAoC;IACpC,mBAAmB;IACnB,wCAAwC;EAC1C;;;AAGF;EACE,kBAAkB;EAClB,SAAS;EACT,UAAU;EACV,gDAA6C;EAC7C,WAAW;EACX,YAAY;AACd;;AAEA;EACE,gDAAyC;AAC3C;;AAEA;EACE,SAAS;EACT,SAAS;EACT,oBAAoB;EACpB,6CAA6C;EAC7C,6CAA6C;AAC/C;;AAEA;;EAEE;;IAEE,WAAW;IACX,YAAY;EACd;;EAEA;IACE,SAAS;IACT,SAAS;IACT,aAAa;IACb,uBAAuB;EACzB;AACF;;AAEA;EACE,kBAAkB;EAClB,mBAAmB;AACrB;;AAEA;EACE,qBAAqB;EACrB,kBAAkB;AACpB;;AAEA;EACE,WAAW;EACX,kBAAkB;EAClB,SAAS;EACT,WAAW;EACX,YAAY;EACZ,oDAAoD;AACtD;;AAEA;EACE,oBAAoB;AACtB;;AAEA;EACE,WAAW;EACX,kBAAkB;EAClB,SAAS;EACT,WAAW;EACX,YAAY;EACZ,oDAAoD;AACtD;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,SAAS;EACT,gBAAgB;AAClB;;AAEA;EACE,oBAAoB;AACtB;;AAEA;EACE,uBAAuB;EACvB,gBAAgB;EAChB,aAAa;EACb,2CAA2C;EAC3C,qBAAqB;AACvB;;AAEA;EACE,UAAU;AACZ;;AAEA;EACE,SAAS;EACT,WAAW;AACb;;;AAGA;EACE;IACE,UAAU;EACZ;;EAEA;IACE,WAAW;EACb;;EAEA;IACE,oBAAoB;EACtB;;AAEF;;AAEA;EACE;IACE,kCAAkC;IAClC,oBAAoB;EACtB;AACF",sourcesContent:[".navbar {\n  justify-content: center;\n}\n\n  .navbar__container--mobile {\n    position: absolute;\n    top: 110px;\n    display: none;\n    flex-direction: column;\n    align-items: center;\n    gap: 20px;\n    padding-block: 20px 40px;\n    width: 100vw;\n    border-block: 3px solid var(--primary-color-stripe);\n    background-color: var(--primary-color);\n  }\n\n  .navbar__container--open {\n    display: flex;\n  }\n\n  .navbar__item--mobile {\n    text-align: center;\n    padding-block: 20px 15px;\n    padding-inline: 30px;\n    margin-bottom: 5px;\n    border-radius: 6px;\n    border-bottom: 3px solid var(--primary-color-stripe);\n  }\n\n  .navbar__item--mobile:hover {\n    padding-bottom: 20px;\n    margin-bottom: 0;\n    border-bottom: 3px solid transparent;\n    border-radius: 20px;\n    background-color: var(--secondary-color);\n  }\n\n\n.navbar__btn {\n  position: absolute;\n  top: 37px;\n  left: 10px;\n  content: url(../../assets/hamburger_icon.svg);\n  width: 30px;\n  height: 30px;\n}\n\n.navbar__btn--checked {\n  content: url(../../assets/cross_icon.svg);\n}\n\n.basket-btn__quantity {\n  top: 36px;\n  left: 0px;\n  border-radius: 100vw;\n  background-color: var(--primary-color-bright);\n  border: 3px solid var(--primary-color-stripe);\n}\n\n@media (min-width: 650px) {\n\n  .navbar__btn,\n  .basket-btn__icon {\n    width: 40px;\n    height: 40px;\n  }\n\n  .basket-btn__quantity {\n    top: 11px;\n    left: 5px;\n    border: unset;\n    background-color: unset;\n  }\n}\n\n.panel__container {\n  text-align: center;\n  margin-bottom: 40px;\n}\n\n.header--panel {\n  display: inline-block;\n  position: relative;\n}\n\n.header--panel::after {\n  content: '';\n  position: absolute;\n  top: 35px;\n  left: -20px;\n  right: -20px;\n  border-bottom: 3px solid var(--primary-color-stripe);\n}\n\n.text--mainpage {\n  padding-inline: 20px;\n}\n\n.header--logo::after {\n  content: '';\n  position: absolute;\n  top: 35px;\n  left: -20px;\n  right: -20px;\n  border-bottom: 3px solid var(--primary-color-stripe);\n}\n\n.mainpage {\n  display: flex;\n  flex-direction: column;\n  gap: 30px;\n  margin-top: 20px;\n}\n\n.text--mainpage {\n  padding-inline: 20px;\n}\n\n.panel__excursions {\n  justify-content: center;\n  column-gap: 60px;\n  row-gap: 40px;\n  grid-template-columns: minmax(260px, 360px);\n  padding-inline: unset;\n}\n\n.navbar__btn {\n  left: 10px;\n}\n\n.basket-btn__wrapper {\n  top: 30px;\n  right: 10px;\n}\n\n\n@media (min-width: 360px) {\n  .navbar__btn {\n    left: 25px;\n  }\n\n  .basket-btn__wrapper {\n    right: 25px;\n  }\n\n  .panel__excursions {\n    padding-inline: 10vw;\n  }\n\n}\n\n@media (min-width: 950px) {\n  .panel__excursions {\n    grid-template-columns: 360px 360px;\n    padding-inline: 10vw;\n  }\n}"],sourceRoot:""}]);const A=d},790:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(354),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([e.id,'html, body, body div, span, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, abbr, address, cite, code, del, dfn, em, img, ins, kbd, q, samp, small, strong, sub, sup, var, b, i, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, figure, footer, header, menu, nav, section, time, mark, audio, video, details, summary {margin: 0; padding: 0; border: 0; font-size: 100%; font-weight: normal; vertical-align: baseline; background: transparent;}\n\nmain, article, aside, figure, footer, header, nav, section, details, summary {display: block;}\n\nhtml {box-sizing: border-box;}\n\n*, *:before, *:after {box-sizing: inherit;}\n\nimg {max-width: 100%;}\n\nul {list-style: none;} /* we\'ll restore bullets as needed for content */\n\nblockquote, q {quotes: none;}\n\nblockquote:before, blockquote:after, q:before, q:after {content: \'\'; content: none;}\n\na {margin: 0; padding: 0; font-size: 100%; vertical-align: baseline; background: transparent;}\n\ndel {text-decoration: line-through;}\n\nabbr[title], dfn[title] {border-bottom: 1px dotted #000; cursor: help;}\n\ntable {border-collapse: separate; border-spacing: 0; text-align: left;}\nth {font-weight: bold; vertical-align: bottom;}\ntd {font-weight: normal; vertical-align: top;}\ntd img {vertical-align: top;}\n\nhr {display: block; height: 1px; border: 0; border-top: 1px solid #999; margin: 1rem 0; padding: 0;}\n\ninput, select {vertical-align: middle;}\n\npre {white-space: pre-line;}\n\ninput[type="radio"] {vertical-align: text-bottom;}\ninput[type="checkbox"] {vertical-align: bottom;}\n\nsmall {font-size: .8rem;}\n\nstrong {font-weight: bold;}\n\nsub, sup {font-size: .8rem; line-height: 0; position: relative;}\nsup {top: -0.5rem;}\nsub {bottom: -0.25rem;}\n\npre, code, kbd, samp {font-family: monospace, sans-serif;}\n\nlabel, input[type=button], input[type=submit], input[type=file], button {cursor: pointer;}\n\nbutton, input, select, textarea {margin: 0;}\n\nins {background-color: var(--highlight-color); color: #000; text-decoration: none;}\nmark {background-color: var(--highlight-color); color: #000; font-style: italic; font-weight: bold;}\n\nblockquote {padding: 2rem; border-left: 1px solid #333;}\n\n.clearfix:after {content: ""; display: table; clear: both;} /* https://css-tricks.com/snippets/css/clear-fix/ */\n\n/* ———— END THE GENERIC RESETS ———— */\n\n:root {\n\t--font-system: system-ui, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"; /* https://css-tricks.com/snippets/css/system-font-stack */\n\t--text-color: #333;\n\t--featured-color: #03f;\n\t--featured-color-hover: #69f;\n\t--highlight-color: #fcd700;\n}\n\nbody {font-size: 16px; font-family: var(--font-system); color: var(--text-color);}\n\na {color: var(--featured-color);}\na:hover {color: var(--featured-color-hover);}\n\n@media screen and (max-width: 480px) {\n\t\n}\n\n@media print {\n\t\n}',"",{version:3,sources:["webpack://./src/css/reset.css"],names:[],mappings:"AAAA,6YAA6Y,SAAS,EAAE,UAAU,EAAE,SAAS,EAAE,eAAe,EAAE,mBAAmB,EAAE,wBAAwB,EAAE,uBAAuB,CAAC;;AAEvgB,8EAA8E,cAAc,CAAC;;AAE7F,MAAM,sBAAsB,CAAC;;AAE7B,sBAAsB,mBAAmB,CAAC;;AAE1C,KAAK,eAAe,CAAC;;AAErB,IAAI,gBAAgB,CAAC,EAAE,gDAAgD;;AAEvE,eAAe,YAAY,CAAC;;AAE5B,wDAAwD,WAAW,EAAE,aAAa,CAAC;;AAEnF,GAAG,SAAS,EAAE,UAAU,EAAE,eAAe,EAAE,wBAAwB,EAAE,uBAAuB,CAAC;;AAE7F,KAAK,6BAA6B,CAAC;;AAEnC,yBAAyB,8BAA8B,EAAE,YAAY,CAAC;;AAEtE,OAAO,yBAAyB,EAAE,iBAAiB,EAAE,gBAAgB,CAAC;AACtE,IAAI,iBAAiB,EAAE,sBAAsB,CAAC;AAC9C,IAAI,mBAAmB,EAAE,mBAAmB,CAAC;AAC7C,QAAQ,mBAAmB,CAAC;;AAE5B,IAAI,cAAc,EAAE,WAAW,EAAE,SAAS,EAAE,0BAA0B,EAAE,cAAc,EAAE,UAAU,CAAC;;AAEnG,eAAe,sBAAsB,CAAC;;AAEtC,KAAK,qBAAqB,CAAC;;AAE3B,qBAAqB,2BAA2B,CAAC;AACjD,wBAAwB,sBAAsB,CAAC;;AAE/C,OAAO,gBAAgB,CAAC;;AAExB,QAAQ,iBAAiB,CAAC;;AAE1B,UAAU,gBAAgB,EAAE,cAAc,EAAE,kBAAkB,CAAC;AAC/D,KAAK,YAAY,CAAC;AAClB,KAAK,gBAAgB,CAAC;;AAEtB,sBAAsB,kCAAkC,CAAC;;AAEzD,yEAAyE,eAAe,CAAC;;AAEzF,iCAAiC,SAAS,CAAC;;AAE3C,KAAK,wCAAwC,EAAE,WAAW,EAAE,qBAAqB,CAAC;AAClF,MAAM,wCAAwC,EAAE,WAAW,EAAE,kBAAkB,EAAE,iBAAiB,CAAC;;AAEnG,YAAY,aAAa,EAAE,2BAA2B,CAAC;;AAEvD,iBAAiB,WAAW,EAAE,cAAc,EAAE,WAAW,CAAC,EAAE,mDAAmD;;AAE/G,qCAAqC;;AAErC;CACC,oIAAoI,EAAE,0DAA0D;CAChM,kBAAkB;CAClB,sBAAsB;CACtB,4BAA4B;CAC5B,0BAA0B;AAC3B;;AAEA,MAAM,eAAe,EAAE,+BAA+B,EAAE,wBAAwB,CAAC;;AAEjF,GAAG,4BAA4B,CAAC;AAChC,SAAS,kCAAkC,CAAC;;AAE5C;;AAEA;;AAEA;;AAEA",sourcesContent:['html, body, body div, span, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, abbr, address, cite, code, del, dfn, em, img, ins, kbd, q, samp, small, strong, sub, sup, var, b, i, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, figure, footer, header, menu, nav, section, time, mark, audio, video, details, summary {margin: 0; padding: 0; border: 0; font-size: 100%; font-weight: normal; vertical-align: baseline; background: transparent;}\n\nmain, article, aside, figure, footer, header, nav, section, details, summary {display: block;}\n\nhtml {box-sizing: border-box;}\n\n*, *:before, *:after {box-sizing: inherit;}\n\nimg {max-width: 100%;}\n\nul {list-style: none;} /* we\'ll restore bullets as needed for content */\n\nblockquote, q {quotes: none;}\n\nblockquote:before, blockquote:after, q:before, q:after {content: \'\'; content: none;}\n\na {margin: 0; padding: 0; font-size: 100%; vertical-align: baseline; background: transparent;}\n\ndel {text-decoration: line-through;}\n\nabbr[title], dfn[title] {border-bottom: 1px dotted #000; cursor: help;}\n\ntable {border-collapse: separate; border-spacing: 0; text-align: left;}\nth {font-weight: bold; vertical-align: bottom;}\ntd {font-weight: normal; vertical-align: top;}\ntd img {vertical-align: top;}\n\nhr {display: block; height: 1px; border: 0; border-top: 1px solid #999; margin: 1rem 0; padding: 0;}\n\ninput, select {vertical-align: middle;}\n\npre {white-space: pre-line;}\n\ninput[type="radio"] {vertical-align: text-bottom;}\ninput[type="checkbox"] {vertical-align: bottom;}\n\nsmall {font-size: .8rem;}\n\nstrong {font-weight: bold;}\n\nsub, sup {font-size: .8rem; line-height: 0; position: relative;}\nsup {top: -0.5rem;}\nsub {bottom: -0.25rem;}\n\npre, code, kbd, samp {font-family: monospace, sans-serif;}\n\nlabel, input[type=button], input[type=submit], input[type=file], button {cursor: pointer;}\n\nbutton, input, select, textarea {margin: 0;}\n\nins {background-color: var(--highlight-color); color: #000; text-decoration: none;}\nmark {background-color: var(--highlight-color); color: #000; font-style: italic; font-weight: bold;}\n\nblockquote {padding: 2rem; border-left: 1px solid #333;}\n\n.clearfix:after {content: ""; display: table; clear: both;} /* https://css-tricks.com/snippets/css/clear-fix/ */\n\n/* ———— END THE GENERIC RESETS ———— */\n\n:root {\n\t--font-system: system-ui, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"; /* https://css-tricks.com/snippets/css/system-font-stack */\n\t--text-color: #333;\n\t--featured-color: #03f;\n\t--featured-color-hover: #69f;\n\t--highlight-color: #fcd700;\n}\n\nbody {font-size: 16px; font-family: var(--font-system); color: var(--text-color);}\n\na {color: var(--featured-color);}\na:hover {color: var(--featured-color-hover);}\n\n@media screen and (max-width: 480px) {\n\t\n}\n\n@media print {\n\t\n}'],sourceRoot:""}]);const a=o},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",i=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),i&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),i&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,i,r,s){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(i)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var c=0;c<e.length;c++){var h=[].concat(e[c]);i&&o[h[0]]||(void 0!==s&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=s),n&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=n):h[2]=n),r&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=r):h[4]="".concat(r)),t.push(h))}},t}},417:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},354:e=>{e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"==typeof btoa){var i=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),s="/*# ".concat(r," */");return[t].concat([s]).join("\n")}return[t].join("\n")}},72:e=>{var t=[];function n(e){for(var n=-1,i=0;i<t.length;i++)if(t[i].identifier===e){n=i;break}return n}function i(e,i){for(var s={},o=[],a=0;a<e.length;a++){var l=e[a],c=i.base?l[0]+i.base:l[0],h=s[c]||0,d="".concat(c," ").concat(h);s[c]=h+1;var u=n(d),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==u)t[u].references++,t[u].updater(p);else{var A=r(p,i);i.byIndex=a,t.splice(a,0,{identifier:d,updater:A,references:1})}o.push(d)}return o}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var s=i(e=e||[],r=r||{});return function(e){e=e||[];for(var o=0;o<s.length;o++){var a=n(s[o]);t[a].references--}for(var l=i(e,r),c=0;c<s.length;c++){var h=n(s[c]);0===t[h].references&&(t[h].updater(),t.splice(h,1))}s=l}}},659:e=>{var t={};e.exports=function(e,n){var i=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,r&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},824:(e,t,n)=>{e.exports=n.p+"a0d0c97973b816dcc1b2.svg"},970:(e,t,n)=>{e.exports=n.p+"287ba5cd99810a2323d6.svg"},637:(e,t,n)=>{e.exports=n.p+"b83a848878554af35c1f.svg"},241:(e,t,n)=>{e.exports=n.p+"e0a03a53be72ddd29741.svg"},622:(e,t,n)=>{e.exports=n.p+"50f0257aa1e905f4bfaf.ttf"},990:(e,t,n)=>{e.exports=n.p+"b8c6753baa964ccac1ba.ttf"},77:(e,t,n)=>{e.exports=n.p+"24785cc015b27a3e964b.ttf"},208:(e,t,n)=>{e.exports=n.p+"93b37a465fc4ec0d0415.ttf"}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={id:i,exports:{}};return e[i](s,s.exports,n),s.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var r=i.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=i[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.b=document.baseURI||self.location.href,n.nc=void 0,(()=>{var e=n(72),t=n.n(e),i=n(825),r=n.n(i),s=n(659),o=n.n(s),a=n(56),l=n.n(a),c=n(540),h=n.n(c),d=n(113),u=n.n(d),p=n(790),A={};A.styleTagTransform=u(),A.setAttributes=l(),A.insert=o().bind(null,"head"),A.domAPI=r(),A.insertStyleElement=h(),t()(p.A,A),p.A&&p.A.locals&&p.A.locals;var _=n(813),m={};m.styleTagTransform=u(),m.setAttributes=l(),m.insert=o().bind(null,"head"),m.domAPI=r(),m.insertStyleElement=h(),t()(_.A,m),_.A&&_.A.locals&&_.A.locals;var f=n(446),g={};g.styleTagTransform=u(),g.setAttributes=l(),g.insert=o().bind(null,"head"),g.domAPI=r(),g.insertStyleElement=h(),t()(f.A,g),f.A&&f.A.locals&&f.A.locals;var C=n(461),y={};y.styleTagTransform=u(),y.setAttributes=l(),y.insert=o().bind(null,"head"),y.domAPI=r(),y.insertStyleElement=h(),t()(C.A,y),C.A&&C.A.locals&&C.A.locals;var b=n(751),E={};E.styleTagTransform=u(),E.setAttributes=l(),E.insert=o().bind(null,"head"),E.domAPI=r(),E.insertStyleElement=h(),t()(b.A,E),b.A&&b.A.locals&&b.A.locals;var v=n(609),w={};w.styleTagTransform=u(),w.setAttributes=l(),w.insert=o().bind(null,"head"),w.domAPI=r(),w.insertStyleElement=h(),t()(v.A,w),v.A&&v.A.locals&&v.A.locals;var x=n(420),k={};k.styleTagTransform=u(),k.setAttributes=l(),k.insert=o().bind(null,"head"),k.domAPI=r(),k.insertStyleElement=h(),t()(x.A,k),x.A&&x.A.locals&&x.A.locals;const I=function(e,t){if(!e)throw B(t)},B=function(e){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+e)},T=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},S={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let t=0;t<e.length;t+=3){const r=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,l=a?e[t+2]:0,c=r>>2,h=(3&r)<<4|o>>4;let d=(15&o)<<2|l>>6,u=63&l;a||(u=64,s||(d=64)),i.push(n[c],n[h],n[d],n[u])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(T(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let t=0;t<e.length;){const r=n[e.charAt(t++)],s=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const a=t<e.length?n[e.charAt(t)]:64;if(++t,null==r||null==s||null==o||null==a)throw new N;const l=r<<2|s>>4;if(i.push(l),64!==o){const e=s<<4&240|o>>2;if(i.push(e),64!==a){const e=o<<6&192|a;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class N extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const P=function(e){const t=T(e);return S.encodeByteArray(t,!0)},D=function(e){return P(e).replace(/\./g,"")},R=function(e){try{return S.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function O(e){return M(void 0,e)}function M(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=M(e[n],t[n]));return e}const L=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&R(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},q=()=>{var e;return null===(e=L())||void 0===e?void 0:e.config};class F{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function z(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")}class U extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,U.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,W.prototype.create)}}class W{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,r=this.errors[e],s=r?function(e,t){return e.replace(j,((e,n)=>{const i=t[n];return null!=i?String(i):`<${n}?>`}))}(r,n):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new U(i,o,n)}}const j=/\{\$([^}]+)}/g;function H(e){return JSON.parse(e)}function $(e){return JSON.stringify(e)}const Y=function(e){let t={},n={},i={},r="";try{const s=e.split(".");t=H(R(s[0])||""),n=H(R(s[1])||""),r=s[2],i=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:i,signature:r}};function V(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function G(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function K(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Q(e,t,n){const i={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=t.call(n,e[r],r,e));return i}function X(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],s=t[r];if(Z(n)&&Z(s)){if(!X(n,s))return!1}else if(n!==s)return!1}for(const e of i)if(!n.includes(e))return!1;return!0}function Z(e){return null!==e&&"object"==typeof e}class J{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"==typeof e)for(let i=0;i<16;i++)n[i]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let e=16;e<80;e++){const t=n[e-3]^n[e-8]^n[e-14]^n[e-16];n[e]=4294967295&(t<<1|t>>>31)}let i,r,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let e=0;e<80;e++){e<40?e<20?(i=l^o&(a^l),r=1518500249):(i=o^a^l,r=1859775393):e<60?(i=o&a|l&(o|a),r=2400959708):(i=o^a^l,r=3395469782);const t=(s<<5|s>>>27)+i+c+r+n[e]&4294967295;c=l,l=a,a=4294967295&(o<<30|o>>>2),o=s,s=t}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let i=0;const r=this.buf_;let s=this.inbuf_;for(;i<t;){if(0===s)for(;i<=n;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<t;)if(r[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(r),s=0;break}}else for(;i<t;)if(r[s]=e[i],++s,++i,s===this.blockSize){this.compress_(r),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let e=this.blockSize-1;e>=56;e--)this.buf_[e]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let t=0;t<5;t++)for(let i=24;i>=0;i-=8)e[n]=this.chain_[t]>>i&255,++n;return e}}function ee(e,t){return`${e} failed: ${t} argument `}const te=function(e){let t=0;for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);i<128?t++:i<2048?t+=2:i>=55296&&i<=56319?(t+=4,n++):t+=3}return t};function ne(e){return e&&e._delegate?e._delegate:e}class ie{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const re="[DEFAULT]";class se{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new F;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(i)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:re})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=re){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=re){return this.instances.has(e)}getOptions(e=re){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(i);return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e,i===re?void 0:i),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var i;return n||null}normalizeInstanceIdentifier(e=re){return this.component?this.component.multipleInstances?e:re:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class oe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new se(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const ae=[];var le;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(le||(le={}));const ce={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},he=le.INFO,de={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},ue=(e,t,...n)=>{if(t<e.logLevel)return;const i=(new Date).toISOString(),r=de[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[r](`[${i}]  ${e.name}:`,...n)};class pe{constructor(e){this.name=e,this._logLevel=he,this._logHandler=ue,this._userLogHandler=null,ae.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?ce[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}}const Ae=(e,t)=>t.some((t=>e instanceof t));let _e,me;const fe=new WeakMap,ge=new WeakMap,Ce=new WeakMap,ye=new WeakMap,be=new WeakMap;let Ee={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ge.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ce.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return we(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function ve(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(me||(me=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(xe(this),e),we(fe.get(this))}:function(...e){return we(t.apply(xe(this),e))}:function(e,...n){const i=t.call(xe(this),e,...n);return Ce.set(i,e.sort?e.sort():[e]),we(i)}:(e instanceof IDBTransaction&&function(e){if(ge.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",s),e.removeEventListener("abort",s)},r=()=>{t(),i()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",s),e.addEventListener("abort",s)}));ge.set(e,t)}(e),Ae(e,_e||(_e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Ee):e);var t}function we(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",s)},r=()=>{t(we(e.result)),i()},s=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&fe.set(t,e)})).catch((()=>{})),be.set(t,e),t}(e);if(ye.has(e))return ye.get(e);const t=ve(e);return t!==e&&(ye.set(e,t),be.set(t,e)),t}const xe=e=>be.get(e),ke=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],Be=new Map;function Te(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Be.get(t))return Be.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=Ie.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!ke.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,r?"readwrite":"readonly");let o=s.store;return i&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),r&&s.done]))[0]};return Be.set(t,s),s}var Se;Se=Ee,Ee={...Se,get:(e,t,n)=>Te(e,t)||Se.get(e,t,n),has:(e,t)=>!!Te(e,t)||Se.has(e,t)};class Ne{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const Pe="@firebase/app",De="0.10.16",Re=new pe("@firebase/app"),Oe="@firebase/app-compat",Me="@firebase/analytics-compat",Le="@firebase/analytics",qe="@firebase/app-check-compat",Fe="@firebase/app-check",ze="@firebase/auth",Ue="@firebase/auth-compat",We="@firebase/database",je="@firebase/data-connect",He="@firebase/database-compat",$e="@firebase/functions",Ye="@firebase/functions-compat",Ve="@firebase/installations",Ge="@firebase/installations-compat",Ke="@firebase/messaging",Qe="@firebase/messaging-compat",Xe="@firebase/performance",Ze="@firebase/performance-compat",Je="@firebase/remote-config",et="@firebase/remote-config-compat",tt="@firebase/storage",nt="@firebase/storage-compat",it="@firebase/firestore",rt="@firebase/vertexai",st="@firebase/firestore-compat",ot="firebase",at="[DEFAULT]",lt={[Pe]:"fire-core",[Oe]:"fire-core-compat",[Le]:"fire-analytics",[Me]:"fire-analytics-compat",[Fe]:"fire-app-check",[qe]:"fire-app-check-compat",[ze]:"fire-auth",[Ue]:"fire-auth-compat",[We]:"fire-rtdb",[je]:"fire-data-connect",[He]:"fire-rtdb-compat",[$e]:"fire-fn",[Ye]:"fire-fn-compat",[Ve]:"fire-iid",[Ge]:"fire-iid-compat",[Ke]:"fire-fcm",[Qe]:"fire-fcm-compat",[Xe]:"fire-perf",[Ze]:"fire-perf-compat",[Je]:"fire-rc",[et]:"fire-rc-compat",[tt]:"fire-gcs",[nt]:"fire-gcs-compat",[it]:"fire-fst",[st]:"fire-fst-compat",[rt]:"fire-vertex","fire-js":"fire-js",[ot]:"fire-js-all"},ct=new Map,ht=new Map,dt=new Map;function ut(e,t){try{e.container.addComponent(t)}catch(n){Re.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function pt(e){const t=e.name;if(dt.has(t))return Re.debug(`There were multiple attempts to register component ${t}.`),!1;dt.set(t,e);for(const t of ct.values())ut(t,e);for(const t of ht.values())ut(t,e);return!0}const At=new W("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class _t{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ie("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw At.create("app-deleted",{appName:this._name})}}function mt(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const i=Object.assign({name:at,automaticDataCollectionEnabled:!1},t),r=i.name;if("string"!=typeof r||!r)throw At.create("bad-app-name",{appName:String(r)});if(n||(n=q()),!n)throw At.create("no-options");const s=ct.get(r);if(s){if(X(n,s.options)&&X(i,s.config))return s;throw At.create("duplicate-app",{appName:r})}const o=new oe(r);for(const e of dt.values())o.addComponent(e);const a=new _t(n,i,o);return ct.set(r,a),a}function ft(e,t,n){var i;let r=null!==(i=lt[e])&&void 0!==i?i:e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${r}" with version "${t}":`];return s&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Re.warn(e.join(" "))}pt(new ie(`${r}-version`,(()=>({library:r,version:t})),"VERSION"))}const gt="firebase-heartbeat-database",Ct=1,yt="firebase-heartbeat-store";let bt=null;function Et(){return bt||(bt=function(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(e,t),a=we(o);return i&&o.addEventListener("upgradeneeded",(e=>{i(we(o.result),e.oldVersion,e.newVersion,we(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),r&&e.addEventListener("versionchange",(e=>r(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(gt,Ct,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(yt)}catch(e){console.warn(e)}}}).catch((e=>{throw At.create("idb-open",{originalErrorMessage:e.message})}))),bt}async function vt(e,t){try{const n=(await Et()).transaction(yt,"readwrite"),i=n.objectStore(yt);await i.put(t,wt(e)),await n.done}catch(e){if(e instanceof U)Re.warn(e.message);else{const t=At.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});Re.warn(t.message)}}}function wt(e){return`${e.name}!${e.options.appId}`}class xt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new It(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=kt();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some((e=>e.date===i)))return;return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}catch(e){Re.warn(e)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=kt(),{heartbeatsToSend:n,unsentEntries:i}=function(e,t=1024){const n=[];let i=e.slice();for(const r of e){const e=n.find((e=>e.agent===r.agent));if(e){if(e.dates.push(r.date),Bt(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Bt(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=D(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Re.warn(e),""}}}function kt(){return(new Date).toISOString().substring(0,10)}class It{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(e){return!1}}()&&new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Et()).transaction(yt),n=await t.objectStore(yt).get(wt(e));return await t.done,n}catch(e){if(e instanceof U)Re.warn(e.message);else{const t=At.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});Re.warn(t.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return vt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return vt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Bt(e){return D(JSON.stringify({version:2,heartbeats:e})).length}pt(new ie("platform-logger",(e=>new Ne(e)),"PRIVATE")),pt(new ie("heartbeat",(e=>new xt(e)),"PRIVATE")),ft(Pe,De,""),ft(Pe,De,"esm2017"),ft("fire-js",""),ft("firebase","11.0.2","app");const Tt=mt({apiKey:"AIzaSyCGShHKbWgPSCOPVzoL8GvcP287Oyeczq0",authDomain:"travel-agency-javascript.firebaseapp.com",databaseURL:"https://travel-agency-javascript-default-rtdb.europe-west1.firebasedatabase.app/",projectId:"travel-agency-javascript",storageBucket:"travel-agency-javascript.firebasestorage.app",messagingSenderId:"628054712472",appId:"1:628054712472:web:a4a55f95cd8eedf02eb0ed"}),St="@firebase/database",Nt="1.0.10";let Pt="";class Dt{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),$(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:H(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Rt{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return V(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Ot=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Dt(t)}}catch(e){}return new Rt},Mt=Ot("localStorage"),Lt=Ot("sessionStorage"),qt=new pe("@firebase/database"),Ft=function(){let e=1;return function(){return e++}}(),zt=function(e){const t=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);if(r>=55296&&r<=56319){const t=r-55296;i++,I(i<e.length,"Surrogate pair missing trail surrogate."),r=65536+(t<<10)+(e.charCodeAt(i)-56320)}r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):r<65536?(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t}(e),n=new J;n.update(t);const i=n.digest();return S.encodeByteArray(i)},Ut=function(...e){let t="";for(let n=0;n<e.length;n++){const i=e[n];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=Ut.apply(null,i):t+="object"==typeof i?$(i):i,t+=" "}return t};let Wt=null,jt=!0;const Ht=function(...e){if(!0===jt&&(jt=!1,null===Wt&&!0===Lt.get("logging_enabled")&&(t=!0,I(!n||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(qt.logLevel=le.VERBOSE,Wt=qt.log.bind(qt),n&&Lt.set("logging_enabled",!0)):"function"==typeof t?Wt=t:(Wt=null,Lt.remove("logging_enabled")))),Wt){const t=Ut.apply(null,e);Wt(t)}var t,n},$t=function(e){return function(...t){Ht(e,...t)}},Yt=function(...e){const t="FIREBASE INTERNAL ERROR: "+Ut(...e);qt.error(t)},Vt=function(...e){const t=`FIREBASE FATAL ERROR: ${Ut(...e)}`;throw qt.error(t),new Error(t)},Gt=function(...e){const t="FIREBASE WARNING: "+Ut(...e);qt.warn(t)},Kt=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Qt="[MIN_NAME]",Xt="[MAX_NAME]",Zt=function(e,t){if(e===t)return 0;if(e===Qt||t===Xt)return-1;if(t===Qt||e===Xt)return 1;{const n=an(e),i=an(t);return null!==n?null!==i?n-i==0?e.length-t.length:n-i:-1:null!==i?1:e<t?-1:1}},Jt=function(e,t){return e===t?0:e<t?-1:1},en=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+$(t))},tn=function(e){if("object"!=typeof e||null===e)return $(e);const t=[];for(const n in e)t.push(n);t.sort();let n="{";for(let i=0;i<t.length;i++)0!==i&&(n+=","),n+=$(t[i]),n+=":",n+=tn(e[t[i]]);return n+="}",n},nn=function(e,t){const n=e.length;if(n<=t)return[e];const i=[];for(let r=0;r<n;r+=t)r+t>n?i.push(e.substring(r,n)):i.push(e.substring(r,r+t));return i};function rn(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const sn=function(e){I(!Kt(e),"Invalid JSON number");let t,n,i,r,s;0===e?(n=0,i=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(r=Math.min(Math.floor(Math.log(e)/Math.LN2),1023),n=r+1023,i=Math.round(e*Math.pow(2,52-r)-Math.pow(2,52))):(n=0,i=Math.round(e/Math.pow(2,-1074))));const o=[];for(s=52;s;s-=1)o.push(i%2?1:0),i=Math.floor(i/2);for(s=11;s;s-=1)o.push(n%2?1:0),n=Math.floor(n/2);o.push(t?1:0),o.reverse();const a=o.join("");let l="";for(s=0;s<64;s+=8){let e=parseInt(a.substr(s,8),2).toString(16);1===e.length&&(e="0"+e),l+=e}return l.toLowerCase()},on=new RegExp("^-?(0*)\\d{1,10}$"),an=function(e){if(on.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},ln=function(e){try{e()}catch(e){setTimeout((()=>{const t=e.stack||"";throw Gt("Exception was thrown by user callback.",t),e}),Math.floor(0))}},cn=function(e,t){const n=setTimeout(e,t);return"number"==typeof n&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"==typeof n&&n.unref&&n.unref(),n};class hn{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){Gt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class dn{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(Ht("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Gt(e)}}class un{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}un.OWNER="owner";const pn="5",An=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,_n="ac",mn="websocket",fn="long_polling";class gn{constructor(e,t,n,i,r=!1,s="",o=!1,a=!1){this.secure=t,this.namespace=n,this.webSocketOnly=i,this.nodeAdmin=r,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Mt.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Mt.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function Cn(e,t,n){let i;if(I("string"==typeof t,"typeof type must == string"),I("object"==typeof n,"typeof params must == object"),t===mn)i=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==fn)throw new Error("Unknown connection type: "+t);i=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const r=[];return rn(n,((e,t)=>{r.push(e+"="+t)})),i+r.join("&")}class yn{constructor(){this.counters_={}}incrementCounter(e,t=1){V(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return O(this.counters_)}}const bn={},En={};function vn(e){const t=e.toString();return bn[t]||(bn[t]=new yn),bn[t]}class wn{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&ln((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const xn="start";class kn{constructor(e,t,n,i,r,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=$t(e),this.stats_=vn(t),this.urlFn=e=>(this.appCheckToken&&(e[_n]=this.appCheckToken),Cn(t,fn,e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new wn(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if("complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new In(((...e)=>{const[t,n,i,r,s]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,t===xn)this.id=n,this.password=i;else{if("close"!==t)throw new Error("Unrecognized command received: "+t);n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,(()=>{this.onClosed_()}))):this.onClosed_()}}),((...e)=>{const[t,n]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,n)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[xn]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=pn,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[_n]=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&An.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){kn.forceAllow_=!0}static forceDisallow(){kn.forceDisallow_=!0}static isAvailable(){return!(!kn.forceAllow_&&(kn.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=$(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=P(t),i=nn(n,1840);for(let e=0;e<i.length;e++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[e]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=$(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class In{constructor(e,t,n,i){this.onDisconnect=n,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Ft(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=In.createIFrame_();let n="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(n='<script>document.domain="'+document.domain+'";<\/script>');const i="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(e){Ht("frame writing exception"),e.stack&&Ht(e.stack),Ht(e)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ht("No IE domain setting required")}catch(t){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){const e=this.pendingSegs.shift();n=n+"&seg"+i+"="+e.seg+"&ts"+i+"="+e.ts+"&d"+i+"="+e.d,i++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(i),n()}))}addTag(e,t){setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{Ht("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(e){}}),Math.floor(1))}}let Bn=null;"undefined"!=typeof MozWebSocket?Bn=MozWebSocket:"undefined"!=typeof WebSocket&&(Bn=WebSocket);class Tn{constructor(e,t,n,i,r,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=$t(this.connId),this.stats_=vn(t),this.connURL=Tn.connectionURL_(t,s,o,i,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,i,r){const s={};return s.v=pn,"undefined"!=typeof location&&location.hostname&&An.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),i&&(s[_n]=i),r&&(s.p=r),Cn(e,mn,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Mt.set("previous_websocket_failure",!0);try{let e;0,this.mySock=new Bn(this.connURL,[],e)}catch(e){this.log_("Error instantiating WebSocket.");const t=e.message||e.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){Tn.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Bn&&!Tn.forceDisallow_}static previouslyFailed(){return Mt.isInMemoryStorage||!0===Mt.get("previous_websocket_failure")}markConnectionHealthy(){Mt.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=H(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(I(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=$(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=nn(t,16384);n.length>1&&this.sendString_(String(n.length));for(let e=0;e<n.length;e++)this.sendString_(n[e])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Tn.responsesRequiredToBeHealthy=2,Tn.healthyTimeout=3e4;class Sn{static get ALL_TRANSPORTS(){return[kn,Tn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=Tn&&Tn.isAvailable();let n=t&&!Tn.previouslyFailed();if(e.webSocketOnly&&(t||Gt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Tn];else{const e=this.transports_=[];for(const t of Sn.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);Sn.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Sn.globalTransportInitialized_=!1;class Nn{constructor(e,t,n,i,r,s,o,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=i,this.authToken_=r,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=$t("c:"+this.id+":"),this.transportManager_=new Sn(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=cn((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=en("t",e),n=en("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=en("t",e),n=en("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=en("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Yt("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Yt("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),pn!==n&&Gt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),cn((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):cn((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Mt.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Pn{put(e,t,n,i){}merge(e,t,n,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class Dn{constructor(e){this.allowedEvents_=e,this.listeners_={},I(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let e=0;e<n.length;e++)n[e].callback.apply(n[e].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const i=this.getInitialEvent(e);i&&t.apply(n,i)}off(e,t,n){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let e=0;e<i.length;e++)if(i[e].callback===t&&(!n||n===i[e].context))return void i.splice(e,1)}validateEventType_(e){I(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class Rn extends Dn{static getInstance(){return new Rn}constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||z()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}getInitialEvent(e){return I("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class On{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Mn(){return new On("")}function Ln(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function qn(e){return e.pieces_.length-e.pieceNum_}function Fn(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new On(e.pieces_,t)}function zn(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Un(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function Wn(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new On(t,0)}function jn(e,t){const n=[];for(let t=e.pieceNum_;t<e.pieces_.length;t++)n.push(e.pieces_[t]);if(t instanceof On)for(let e=t.pieceNum_;e<t.pieces_.length;e++)n.push(t.pieces_[e]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new On(n,0)}function Hn(e){return e.pieceNum_>=e.pieces_.length}function $n(e,t){const n=Ln(e),i=Ln(t);if(null===n)return t;if(n===i)return $n(Fn(e),Fn(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Yn(e,t){if(qn(e)!==qn(t))return!1;for(let n=e.pieceNum_,i=t.pieceNum_;n<=e.pieces_.length;n++,i++)if(e.pieces_[n]!==t.pieces_[i])return!1;return!0}function Vn(e,t){let n=e.pieceNum_,i=t.pieceNum_;if(qn(e)>qn(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[i])return!1;++n,++i}return!0}class Gn{constructor(e,t){this.errorPrefix_=t,this.parts_=Un(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let e=0;e<this.parts_.length;e++)this.byteLength_+=te(this.parts_[e]);Kn(this)}}function Kn(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Qn(e))}function Qn(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class Xn extends Dn{static getInstance(){return new Xn}constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}getInitialEvent(e){return I("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Zn=1e3;class Jn extends Pn{constructor(e,t,n,i,r,s,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=i,this.onServerInfoUpdate_=r,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=Jn.nextPersistentConnectionId_++,this.log_=$t("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Zn,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Xn.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&Rn.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const i=++this.requestNumber_,r={r:i,a:e,b:t};this.log_($(r)),I(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),n&&(this.requestCBHash_[i]=n)}get(e){this.initConnection_();const t=new F,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),t.promise}listen(e,t,n,i){this.initConnection_();const r=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+r),this.listens.has(s)||this.listens.set(s,new Map),I(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),I(!this.listens.get(s).has(r),"listen() called twice for same path/queryId.");const o={onComplete:i,hashFn:t,query:e,tag:n};this.listens.get(s).set(r,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),i=t._queryIdentifier;this.log_("Listen on "+n+" for "+i);const r={p:n};e.tag&&(r.q=t._queryObject,r.t=e.tag),r.h=e.hashFn(),this.sendRequest("q",r,(r=>{const s=r.d,o=r.s;Jn.warnOnListenWarnings_(s,t),(this.listens.get(n)&&this.listens.get(n).get(i))===e&&(this.log_("listen response",r),"ok"!==o&&this.removeListen_(n,i),e.onComplete&&e.onComplete(o,s))}))}static warnOnListenWarnings_(e,t){if(e&&"object"==typeof e&&V(e,"w")){const n=G(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();Gt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=Y(e).claims;return"object"==typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=Y(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,i=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,i))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+i),I(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,i)&&this.connected_&&this.sendUnlisten_(n,i,e._queryObject,t)}sendUnlisten_(e,t,n,i){this.log_("Unlisten on "+e+" for "+t);const r={p:e};i&&(r.q=n,r.t=i),this.sendRequest("n",r)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,i){const r={p:t,d:n};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,(e=>{i&&setTimeout((()=>{i(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,i){this.putInternal("p",e,t,n,i)}merge(e,t,n,i){this.putInternal("m",e,t,n,i)}putInternal(e,t,n,i,r){this.initConnection_();const s={p:t,d:n};void 0!==r&&(s.h=r),this.outstandingPuts_.push({action:e,request:s,onComplete:i}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),i&&i(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+$(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Yt("Unrecognized action received from server: "+$(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){I(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Zn,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Zn,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Zn),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Jn.nextConnectionId_++,r=this.lastSessionId;let s=!1,o=null;const a=function(){o?o.close():(s=!0,n())},l=function(e){I(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)};this.realtime_={close:a,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);s?Ht("getToken() completed but was canceled"):(Ht("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=l&&l.token,o=new Nn(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{Gt(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),r))}catch(e){this.log_("Failed to get token: "+e),s||(this.repoInfo_.nodeAdmin&&Gt(e),a())}}}interrupt(e){Ht("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ht("Resuming connection for reason: "+e),delete this.interruptReasons_[e],K(this.interruptReasons_)&&(this.reconnectDelay_=Zn,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>tn(e))).join("$"):"default";const i=this.removeListen_(e,n);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,t){const n=new On(e).toString();let i;if(this.listens.has(n)){const e=this.listens.get(n);i=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else i=void 0;return i}onAuthRevoked_(e,t){Ht("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Ht("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+Pt.replace(/\./g,"-")]=1,z()?e["framework.cordova"]=1:"object"==typeof navigator&&"ReactNative"===navigator.product&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Rn.getInstance().currentlyOnline();return K(this.interruptReasons_)&&e}}Jn.nextPersistentConnectionId_=0,Jn.nextConnectionId_=0;class ei{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new ei(e,t)}}class ti{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new ei(Qt,e),i=new ei(Qt,t);return 0!==this.compare(n,i)}minPost(){return ei.MIN}}let ni;class ii extends ti{static get __EMPTY_NODE(){return ni}static set __EMPTY_NODE(e){ni=e}compare(e,t){return Zt(e.name,t.name)}isDefinedOn(e){throw B("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return ei.MIN}maxPost(){return new ei(Xt,ni)}makePost(e,t){return I("string"==typeof e,"KeyIndex indexValue must always be a string."),new ei(e,ni)}toString(){return".key"}}const ri=new ii;class si{constructor(e,t,n,i,r=null){this.isReverse_=i,this.resultGenerator_=r,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,i&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class oi{constructor(e,t,n,i,r){this.key=e,this.value=t,this.color=null!=n?n:oi.RED,this.left=null!=i?i:ai.EMPTY_NODE,this.right=null!=r?r:ai.EMPTY_NODE}copy(e,t,n,i,r){return new oi(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const r=n(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return ai.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,i;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return ai.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,oi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,oi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}oi.RED=!0,oi.BLACK=!1;class ai{constructor(e,t=ai.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ai(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,oi.BLACK,null,null))}remove(e){return new ai(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,oi.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,i=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return i?i.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(i=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new si(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new si(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new si(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new si(this.root_,null,this.comparator_,!0,e)}}function li(e,t){return Zt(e.name,t.name)}function ci(e,t){return Zt(e,t)}let hi;ai.EMPTY_NODE=new class{copy(e,t,n,i,r){return this}insert(e,t,n){return new oi(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const di=function(e){return"number"==typeof e?"number:"+sn(e):"string:"+e},ui=function(e){if(e.isLeafNode()){const t=e.val();I("string"==typeof t||"number"==typeof t||"object"==typeof t&&V(t,".sv"),"Priority must be a string or number.")}else I(e===hi||e.isEmpty(),"priority of unexpected type.");I(e===hi||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let pi,Ai,_i;class mi{static set __childrenNodeConstructor(e){pi=e}static get __childrenNodeConstructor(){return pi}constructor(e,t=mi.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,I(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),ui(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new mi(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:mi.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Hn(e)?this:".priority"===Ln(e)?this.priorityNode_:mi.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:mi.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=Ln(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(I(".priority"!==n||1===qn(e),".priority must be the last token in a path"),this.updateImmediateChild(n,mi.__childrenNodeConstructor.EMPTY_NODE.updateChild(Fn(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+di(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?sn(this.value_):this.value_,this.lazyHash_=zt(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===mi.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof mi.__childrenNodeConstructor?-1:(I(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,i=mi.VALUE_TYPE_ORDER.indexOf(t),r=mi.VALUE_TYPE_ORDER.indexOf(n);return I(i>=0,"Unknown leaf type: "+t),I(r>=0,"Unknown leaf type: "+n),i===r?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:r-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}mi.VALUE_TYPE_ORDER=["object","boolean","number","string"];const fi=new class extends ti{compare(e,t){const n=e.node.getPriority(),i=t.node.getPriority(),r=n.compareTo(i);return 0===r?Zt(e.name,t.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return ei.MIN}maxPost(){return new ei(Xt,new mi("[PRIORITY-POST]",_i))}makePost(e,t){const n=Ai(e);return new ei(t,new mi("[PRIORITY-POST]",n))}toString(){return".priority"}},gi=Math.log(2);class Ci{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/gi,10)),this.current_=this.count-1;const n=(i=this.count,parseInt(Array(i+1).join("1"),2));var i;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const yi=function(e,t,n,i){e.sort(t);const r=function(t,i){const s=i-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new oi(a,o.node,oi.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=r(t,l),h=r(l+1,i);return o=e[l],a=n?n(o):o,new oi(a,o.node,oi.BLACK,c,h)}},s=function(t){let i=null,s=null,o=e.length;const a=function(t,i){const s=o-t,a=o;o-=t;const c=r(s+1,a),h=e[s],d=n?n(h):h;l(new oi(d,h.node,i,null,c))},l=function(e){i?(i.left=e,i=e):(s=e,i=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),i=Math.pow(2,t.count-(e+1));n?a(i,oi.BLACK):(a(i,oi.BLACK),a(i,oi.RED))}return s}(new Ci(e.length));return new ai(i||t,s)};let bi;const Ei={};class vi{static get Default(){return I(Ei&&fi,"ChildrenNode.ts has not been loaded"),bi=bi||new vi({".priority":Ei},{".priority":fi}),bi}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=G(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ai?t:null}hasIndex(e){return V(this.indexSet_,e.toString())}addIndex(e,t){I(e!==ri,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let i=!1;const r=t.getIterator(ei.Wrap);let s,o=r.getNext();for(;o;)i=i||e.isDefinedOn(o.node),n.push(o),o=r.getNext();s=i?yi(n,e.getCompare()):Ei;const a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;const c=Object.assign({},this.indexes_);return c[a]=s,new vi(c,l)}addToIndexes(e,t){const n=Q(this.indexes_,((n,i)=>{const r=G(this.indexSet_,i);if(I(r,"Missing index implementation for "+i),n===Ei){if(r.isDefinedOn(e.node)){const n=[],i=t.getIterator(ei.Wrap);let s=i.getNext();for(;s;)s.name!==e.name&&n.push(s),s=i.getNext();return n.push(e),yi(n,r.getCompare())}return Ei}{const i=t.get(e.name);let r=n;return i&&(r=r.remove(new ei(e.name,i))),r.insert(e,e.node)}}));return new vi(n,this.indexSet_)}removeFromIndexes(e,t){const n=Q(this.indexes_,(n=>{if(n===Ei)return n;{const i=t.get(e.name);return i?n.remove(new ei(e.name,i)):n}}));return new vi(n,this.indexSet_)}}let wi;class xi{static get EMPTY_NODE(){return wi||(wi=new xi(new ai(ci),null,vi.Default))}constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&ui(this.priorityNode_),this.children_.isEmpty()&&I(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||wi}updatePriority(e){return this.children_.isEmpty()?this:new xi(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?wi:t}}getChild(e){const t=Ln(e);return null===t?this:this.getImmediateChild(t).getChild(Fn(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(I(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new ei(e,t);let i,r;t.isEmpty()?(i=this.children_.remove(e),r=this.indexMap_.removeFromIndexes(n,this.children_)):(i=this.children_.insert(e,t),r=this.indexMap_.addToIndexes(n,this.children_));const s=i.isEmpty()?wi:this.priorityNode_;return new xi(i,s,r)}}updateChild(e,t){const n=Ln(e);if(null===n)return t;{I(".priority"!==Ln(e)||1===qn(e),".priority must be the last token in a path");const i=this.getImmediateChild(n).updateChild(Fn(e),t);return this.updateImmediateChild(n,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,i=0,r=!0;if(this.forEachChild(fi,((s,o)=>{t[s]=o.val(e),n++,r&&xi.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):r=!1})),!e&&r&&i<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+di(this.getPriority().val())+":"),this.forEachChild(fi,((t,n)=>{const i=n.hash();""!==i&&(e+=":"+t+":"+i)})),this.lazyHash_=""===e?"":zt(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const i=this.resolveIndex_(n);if(i){const n=i.getPredecessorKey(new ei(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new ei(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new ei(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,ei.Wrap);let i=n.peek();for(;null!=i&&t.compare(i,e)<0;)n.getNext(),i=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,ei.Wrap);let i=n.peek();for(;null!=i&&t.compare(i,e)>0;)n.getNext(),i=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ki?-1:0}withIndex(e){if(e===ri||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new xi(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===ri||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(fi),n=t.getIterator(fi);let i=e.getNext(),r=n.getNext();for(;i&&r;){if(i.name!==r.name||!i.node.equals(r.node))return!1;i=e.getNext(),r=n.getNext()}return null===i&&null===r}return!1}return!1}}resolveIndex_(e){return e===ri?null:this.indexMap_.get(e.toString())}}xi.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const ki=new class extends xi{constructor(){super(new ai(ci),xi.EMPTY_NODE,vi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return xi.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(ei,{MIN:{value:new ei(Qt,xi.EMPTY_NODE)},MAX:{value:new ei(Xt,ki)}}),ii.__EMPTY_NODE=xi.EMPTY_NODE,mi.__childrenNodeConstructor=xi,hi=ki,_i=ki;const Ii=!0;function Bi(e,t=null){if(null===e)return xi.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),I(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new mi(e,Bi(t));if(e instanceof Array||!Ii){let n=xi.EMPTY_NODE;return rn(e,((t,i)=>{if(V(e,t)&&"."!==t.substring(0,1)){const e=Bi(i);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(Bi(t))}{const n=[];let i=!1;if(rn(e,((e,t)=>{if("."!==e.substring(0,1)){const r=Bi(t);r.isEmpty()||(i=i||!r.getPriority().isEmpty(),n.push(new ei(e,r)))}})),0===n.length)return xi.EMPTY_NODE;const r=yi(n,li,(e=>e.name),ci);if(i){const e=yi(n,fi.getCompare());return new xi(r,Bi(t),new vi({".priority":e},{".priority":fi}))}return new xi(r,Bi(t),vi.Default)}}!function(e){Ai=e}(Bi);class Ti extends ti{constructor(e){super(),this.indexPath_=e,I(!Hn(e)&&".priority"!==Ln(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),i=this.extractChild(t.node),r=n.compareTo(i);return 0===r?Zt(e.name,t.name):r}makePost(e,t){const n=Bi(e),i=xi.EMPTY_NODE.updateChild(this.indexPath_,n);return new ei(t,i)}maxPost(){const e=xi.EMPTY_NODE.updateChild(this.indexPath_,ki);return new ei(Xt,e)}toString(){return Un(this.indexPath_,0).join("/")}}const Si=new class extends ti{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?Zt(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return ei.MIN}maxPost(){return ei.MAX}makePost(e,t){const n=Bi(e);return new ei(t,n)}toString(){return".value"}};function Ni(e){return{type:"value",snapshotNode:e}}function Pi(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Di(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Ri(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class Oi{constructor(e){this.index_=e}updateChild(e,t,n,i,r,s){I(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(t);return o.getChild(i).equals(n.getChild(i))&&o.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(Di(t,o)):I(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?s.trackChildChange(Pi(t,n)):s.trackChildChange(Ri(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(fi,((e,i)=>{t.hasChild(e)||n.trackChildChange(Di(e,i))})),t.isLeafNode()||t.forEachChild(fi,((t,i)=>{if(e.hasChild(t)){const r=e.getImmediateChild(t);r.equals(i)||n.trackChildChange(Ri(t,i,r))}else n.trackChildChange(Pi(t,i))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?xi.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Mi{constructor(e){this.indexedFilter_=new Oi(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Mi.getStartPost_(e),this.endPost_=Mi.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,i,r,s){return this.matches(new ei(t,n))||(n=xi.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,i,r,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=xi.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(xi.EMPTY_NODE);const r=this;return t.forEachChild(fi,((e,t)=>{r.matches(new ei(e,t))||(i=i.updateImmediateChild(e,xi.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,i,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Li{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new Mi(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,i,r,s){return this.rangedFilter_.matches(new ei(t,n))||(n=xi.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,i,r,s):this.fullLimitUpdateChild_(e,t,n,r,s)}updateFullNode(e,t,n){let i;if(t.isLeafNode()||t.isEmpty())i=xi.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;i=xi.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;i=i.updateImmediateChild(t.name,t.node),n++}}}else{let e;i=t.withIndex(this.index_),i=i.updatePriority(xi.EMPTY_NODE),e=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:i=i.updateImmediateChild(t.name,xi.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,i,r){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const o=e;I(o.numChildren()===this.limit_,"");const a=new ei(t,n),l=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),c=this.rangedFilter_.matches(a);if(o.hasChild(t)){const e=o.getImmediateChild(t);let h=i.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=h&&(h.name===t||o.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);const d=null==h?1:s(h,a);if(c&&!n.isEmpty()&&d>=0)return null!=r&&r.trackChildChange(Ri(t,n,e)),o.updateImmediateChild(t,n);{null!=r&&r.trackChildChange(Di(t,e));const n=o.updateImmediateChild(t,xi.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(null!=r&&r.trackChildChange(Pi(h.name,h.node)),n.updateImmediateChild(h.name,h.node)):n}}return n.isEmpty()?e:c&&s(l,a)>=0?(null!=r&&(r.trackChildChange(Di(l.name,l.node)),r.trackChildChange(Pi(t,n))),o.updateImmediateChild(t,n).updateImmediateChild(l.name,xi.EMPTY_NODE)):e}}class qi{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=fi}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return I(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return I(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Qt}hasEnd(){return this.endSet_}getIndexEndValue(){return I(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return I(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Xt}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return I(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===fi}copy(){const e=new qi;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Fi(e){const t={};if(e.isDefault())return t;let n;if(e.index_===fi?n="$priority":e.index_===Si?n="$value":e.index_===ri?n="$key":(I(e.index_ instanceof Ti,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=$(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=$(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+$(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=$(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+$(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function zi(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==fi&&(t.i=e.index_.toString()),t}class Ui extends Pn{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(I(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,n,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=i,this.log_=$t("p:rest:"),this.listens_={}}listen(e,t,n,i){const r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);const s=Ui.getListenId_(e,n),o={};this.listens_[s]=o;const a=Fi(e._queryParams);this.restRequest_(r+".json",a,((e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(r,a,!1,n),G(this.listens_,s)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",i(t,null)}}))}unlisten(e,t){const n=Ui.getListenId_(e,t);delete this.listens_[n]}get(e){const t=Fi(e._queryParams),n=e._path.toString(),i=new F;return this.restRequest_(n+".json",t,((e,t)=>{let r=t;404===e&&(r=null,e=null),null===e?(this.onDataUpdate_(n,r,!1,null),i.resolve(r)):i.reject(new Error(r))})),i.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((([i,r])=>{i&&i.accessToken&&(t.auth=i.accessToken),r&&r.token&&(t.ac=r.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+function(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}(t);this.log_("Sending REST request for "+s);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(n&&4===o.readyState){this.log_("REST Response for "+s+" received. status:",o.status,"response:",o.responseText);let e=null;if(o.status>=200&&o.status<300){try{e=H(o.responseText)}catch(e){Gt("Failed to parse JSON response for "+s+": "+o.responseText)}n(null,e)}else 401!==o.status&&404!==o.status&&Gt("Got unsuccessful REST response for "+s+" Status: "+o.status),n(o.status);n=null}},o.open("GET",s,!0),o.send()}))}}class Wi{constructor(){this.rootNode_=xi.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function ji(){return{value:null,children:new Map}}function Hi(e,t,n){if(Hn(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const i=Ln(t);e.children.has(i)||e.children.set(i,ji()),Hi(e.children.get(i),t=Fn(t),n)}}function $i(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,i)=>{$i(i,new On(t.toString()+"/"+e),n)}))}class Yi{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&rn(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class Vi{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Yi(e);const n=1e4+2e4*Math.random();cn(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;rn(e,((e,i)=>{i>0&&V(this.statsToReport_,e)&&(t[e]=i,n=!0)})),n&&this.server_.reportStats(t),cn(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Gi;function Ki(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Gi||(Gi={}));class Qi{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Gi.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Hn(this.path)){if(null!=this.affectedTree.value)return I(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new On(e));return new Qi(Mn(),t,this.revert)}}return I(Ln(this.path)===e,"operationForChild called for unrelated child."),new Qi(Fn(this.path),this.affectedTree,this.revert)}}class Xi{constructor(e,t){this.source=e,this.path=t,this.type=Gi.LISTEN_COMPLETE}operationForChild(e){return Hn(this.path)?new Xi(this.source,Mn()):new Xi(this.source,Fn(this.path))}}class Zi{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Gi.OVERWRITE}operationForChild(e){return Hn(this.path)?new Zi(this.source,Mn(),this.snap.getImmediateChild(e)):new Zi(this.source,Fn(this.path),this.snap)}}class Ji{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Gi.MERGE}operationForChild(e){if(Hn(this.path)){const t=this.children.subtree(new On(e));return t.isEmpty()?null:t.value?new Zi(this.source,Mn(),t.value):new Ji(this.source,Mn(),t)}return I(Ln(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ji(this.source,Fn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class er{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Hn(e))return this.isFullyInitialized()&&!this.filtered_;const t=Ln(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class tr{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function nr(e,t,n,i,r,s){const o=i.filter((e=>e.type===n));o.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw B("Should only compare child_ events.");const i=new ei(t.childName,t.snapshotNode),r=new ei(n.childName,n.snapshotNode);return e.index_.compare(i,r)}(e,t,n))),o.forEach((n=>{const i=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);r.forEach((r=>{r.respondsTo(n.type)&&t.push(r.createEvent(i,e.query_))}))}))}function ir(e,t){return{eventCache:e,serverCache:t}}function rr(e,t,n,i){return ir(new er(t,n,i),e.serverCache)}function sr(e,t,n,i){return ir(e.eventCache,new er(t,n,i))}function or(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function ar(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let lr;class cr{static fromObject(e){let t=new cr(null);return rn(e,((e,n)=>{t=t.set(new On(e),n)})),t}constructor(e,t=(()=>(lr||(lr=new ai(Jt)),lr))()){this.value=e,this.children=t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Mn(),value:this.value};if(Hn(e))return null;{const n=Ln(e),i=this.children.get(n);if(null!==i){const r=i.findRootMostMatchingPathAndValue(Fn(e),t);return null!=r?{path:jn(new On(n),r.path),value:r.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(Hn(e))return this;{const t=Ln(e),n=this.children.get(t);return null!==n?n.subtree(Fn(e)):new cr(null)}}set(e,t){if(Hn(e))return new cr(t,this.children);{const n=Ln(e),i=(this.children.get(n)||new cr(null)).set(Fn(e),t),r=this.children.insert(n,i);return new cr(this.value,r)}}remove(e){if(Hn(e))return this.children.isEmpty()?new cr(null):new cr(null,this.children);{const t=Ln(e),n=this.children.get(t);if(n){const i=n.remove(Fn(e));let r;return r=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&r.isEmpty()?new cr(null):new cr(this.value,r)}return this}}get(e){if(Hn(e))return this.value;{const t=Ln(e),n=this.children.get(t);return n?n.get(Fn(e)):null}}setTree(e,t){if(Hn(e))return t;{const n=Ln(e),i=(this.children.get(n)||new cr(null)).setTree(Fn(e),t);let r;return r=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),new cr(this.value,r)}}fold(e){return this.fold_(Mn(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((i,r)=>{n[i]=r.fold_(jn(e,i),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,Mn(),t)}findOnPath_(e,t,n){const i=!!this.value&&n(t,this.value);if(i)return i;if(Hn(e))return null;{const i=Ln(e),r=this.children.get(i);return r?r.findOnPath_(Fn(e),jn(t,i),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Mn(),t)}foreachOnPath_(e,t,n){if(Hn(e))return this;{this.value&&n(t,this.value);const i=Ln(e),r=this.children.get(i);return r?r.foreachOnPath_(Fn(e),jn(t,i),n):new cr(null)}}foreach(e){this.foreach_(Mn(),e)}foreach_(e,t){this.children.inorderTraversal(((n,i)=>{i.foreach_(jn(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class hr{constructor(e){this.writeTree_=e}static empty(){return new hr(new cr(null))}}function dr(e,t,n){if(Hn(t))return new hr(new cr(n));{const i=e.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let s=i.value;const o=$n(r,t);return s=s.updateChild(o,n),new hr(e.writeTree_.set(r,s))}{const i=new cr(n),r=e.writeTree_.setTree(t,i);return new hr(r)}}}function ur(e,t,n){let i=e;return rn(n,((e,n)=>{i=dr(i,jn(t,e),n)})),i}function pr(e,t){if(Hn(t))return hr.empty();{const n=e.writeTree_.setTree(t,new cr(null));return new hr(n)}}function Ar(e,t){return null!=_r(e,t)}function _r(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild($n(n.path,t)):null}function mr(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(fi,((e,n)=>{t.push(new ei(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new ei(e,n.value))})),t}function fr(e,t){if(Hn(t))return e;{const n=_r(e,t);return new hr(null!=n?new cr(n):e.writeTree_.subtree(t))}}function gr(e){return e.writeTree_.isEmpty()}function Cr(e,t){return yr(Mn(),e.writeTree_,t)}function yr(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let i=null;return t.children.inorderTraversal(((t,r)=>{".priority"===t?(I(null!==r.value,"Priority writes must always be leaf nodes"),i=r.value):n=yr(jn(e,t),r,n)})),n.getChild(e).isEmpty()||null===i||(n=n.updateChild(jn(e,".priority"),i)),n}}function br(e,t){return Pr(t,e)}function Er(e,t){if(e.snap)return Vn(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Vn(jn(e.path,n),t))return!0;return!1}function vr(e){return e.visible}function wr(e,t,n){let i=hr.empty();for(let r=0;r<e.length;++r){const s=e[r];if(t(s)){const e=s.path;let t;if(s.snap)Vn(n,e)?(t=$n(n,e),i=dr(i,t,s.snap)):Vn(e,n)&&(t=$n(e,n),i=dr(i,Mn(),s.snap.getChild(t)));else{if(!s.children)throw B("WriteRecord should have .snap or .children");if(Vn(n,e))t=$n(n,e),i=ur(i,t,s.children);else if(Vn(e,n))if(t=$n(e,n),Hn(t))i=ur(i,Mn(),s.children);else{const e=G(s.children,Ln(t));if(e){const n=e.getChild(Fn(t));i=dr(i,Mn(),n)}}}}}return i}function xr(e,t,n,i,r){if(i||r){const s=fr(e.visibleWrites,t);if(!r&&gr(s))return n;if(r||null!=n||Ar(s,Mn())){const s=function(e){return(e.visible||r)&&(!i||!~i.indexOf(e.writeId))&&(Vn(e.path,t)||Vn(t,e.path))};return Cr(wr(e.allWrites,s,t),n||xi.EMPTY_NODE)}return null}{const i=_r(e.visibleWrites,t);if(null!=i)return i;{const i=fr(e.visibleWrites,t);return gr(i)?n:null!=n||Ar(i,Mn())?Cr(i,n||xi.EMPTY_NODE):null}}}function kr(e,t,n,i){return xr(e.writeTree,e.treePath,t,n,i)}function Ir(e,t){return function(e,t,n){let i=xi.EMPTY_NODE;const r=_r(e.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(fi,((e,t)=>{i=i.updateImmediateChild(e,t)})),i;if(n){const r=fr(e.visibleWrites,t);return n.forEachChild(fi,((e,t)=>{const n=Cr(fr(r,new On(e)),t);i=i.updateImmediateChild(e,n)})),mr(r).forEach((e=>{i=i.updateImmediateChild(e.name,e.node)})),i}return mr(fr(e.visibleWrites,t)).forEach((e=>{i=i.updateImmediateChild(e.name,e.node)})),i}(e.writeTree,e.treePath,t)}function Br(e,t,n,i){return function(e,t,n,i,r){I(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=jn(t,n);if(Ar(e.visibleWrites,s))return null;{const t=fr(e.visibleWrites,s);return gr(t)?r.getChild(n):Cr(t,r.getChild(n))}}(e.writeTree,e.treePath,t,n,i)}function Tr(e,t){return function(e,t){return _r(e.visibleWrites,t)}(e.writeTree,jn(e.treePath,t))}function Sr(e,t,n){return function(e,t,n,i){const r=jn(t,n),s=_r(e.visibleWrites,r);return null!=s?s:i.isCompleteForChild(n)?Cr(fr(e.visibleWrites,r),i.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function Nr(e,t){return Pr(jn(e.treePath,t),e.writeTree)}function Pr(e,t){return{treePath:e,writeTree:t}}class Dr{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;I("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),I(".priority"!==n,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(n);if(i){const r=i.type;if("child_added"===t&&"child_removed"===r)this.changeMap.set(n,Ri(n,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===r)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===r)this.changeMap.set(n,Di(n,i.oldSnap));else if("child_changed"===t&&"child_added"===r)this.changeMap.set(n,Pi(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==r)throw B("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(n,Ri(n,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const Rr=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class Or{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new er(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Sr(this.writes_,e,t)}}getChildAfterChild(e,t,n){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ar(this.viewCache_),r=function(e,t,n,i,r,s){return function(e,t,n,i,r,s,o){let a;const l=fr(e.visibleWrites,t),c=_r(l,Mn());if(null!=c)a=c;else{if(null==n)return[];a=Cr(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let l=n.getNext();for(;l&&e.length<r;)0!==t(l,i)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,i,r,s)}(this.writes_,i,t,1,n,e);return 0===r.length?null:r[0]}}function Mr(e,t,n,i,r,s){const o=t.eventCache;if(null!=Tr(i,n))return t;{let a,l;if(Hn(n))if(I(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=ar(t),r=Ir(i,n instanceof xi?n:xi.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),r,s)}else{const n=kr(i,ar(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const c=Ln(n);if(".priority"===c){I(1===qn(n),"Can't have a priority with additional path components");const r=o.getNode();l=t.serverCache.getNode();const s=Br(i,n,r,l);a=null!=s?e.filter.updatePriority(r,s):o.getNode()}else{const h=Fn(n);let d;if(o.isCompleteForChild(c)){l=t.serverCache.getNode();const e=Br(i,n,o.getNode(),l);d=null!=e?o.getNode().getImmediateChild(c).updateChild(h,e):o.getNode().getImmediateChild(c)}else d=Sr(i,c,t.serverCache);a=null!=d?e.filter.updateChild(o.getNode(),c,d,h,r,s):o.getNode()}}return rr(t,a,o.isFullyInitialized()||Hn(n),e.filter.filtersNodes())}}function Lr(e,t,n,i,r,s,o,a){const l=t.serverCache;let c;const h=o?e.filter:e.filter.getIndexedFilter();if(Hn(n))c=h.updateFullNode(l.getNode(),i,null);else if(h.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,i);c=h.updateFullNode(l.getNode(),e,null)}else{const e=Ln(n);if(!l.isCompleteForPath(n)&&qn(n)>1)return t;const r=Fn(n),s=l.getNode().getImmediateChild(e).updateChild(r,i);c=".priority"===e?h.updatePriority(l.getNode(),s):h.updateChild(l.getNode(),e,s,r,Rr,null)}const d=sr(t,c,l.isFullyInitialized()||Hn(n),h.filtersNodes());return Mr(e,d,n,r,new Or(r,d,s),a)}function qr(e,t,n,i,r,s,o){const a=t.eventCache;let l,c;const h=new Or(r,t,s);if(Hn(n))c=e.filter.updateFullNode(t.eventCache.getNode(),i,o),l=rr(t,c,!0,e.filter.filtersNodes());else{const r=Ln(n);if(".priority"===r)c=e.filter.updatePriority(t.eventCache.getNode(),i),l=rr(t,c,a.isFullyInitialized(),a.isFiltered());else{const s=Fn(n),c=a.getNode().getImmediateChild(r);let d;if(Hn(s))d=i;else{const e=h.getCompleteChild(r);d=null!=e?".priority"===zn(s)&&e.getChild(Wn(s)).isEmpty()?e:e.updateChild(s,i):xi.EMPTY_NODE}l=c.equals(d)?t:rr(t,e.filter.updateChild(a.getNode(),r,d,s,h,o),a.isFullyInitialized(),e.filter.filtersNodes())}}return l}function Fr(e,t){return e.eventCache.isCompleteForChild(t)}function zr(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function Ur(e,t,n,i,r,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=Hn(n)?i:new cr(null).setTree(n,i);const h=t.serverCache.getNode();return l.children.inorderTraversal(((n,i)=>{if(h.hasChild(n)){const l=zr(0,t.serverCache.getNode().getImmediateChild(n),i);c=Lr(e,c,new On(n),l,r,s,o,a)}})),l.children.inorderTraversal(((n,i)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===i.value;if(!h.hasChild(n)&&!l){const l=zr(0,t.serverCache.getNode().getImmediateChild(n),i);c=Lr(e,c,new On(n),l,r,s,o,a)}})),c}class Wr{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,i=new Oi(n.getIndex()),r=(s=n).loadsAllData()?new Oi(s.getIndex()):s.hasLimit()?new Li(s):new Mi(s);var s;this.processor_=function(e){return{filter:e}}(r);const o=t.serverCache,a=t.eventCache,l=i.updateFullNode(xi.EMPTY_NODE,o.getNode(),null),c=r.updateFullNode(xi.EMPTY_NODE,a.getNode(),null),h=new er(l,o.isFullyInitialized(),i.filtersNodes()),d=new er(c,a.isFullyInitialized(),r.filtersNodes());this.viewCache_=ir(d,h),this.eventGenerator_=new tr(this.query_)}get query(){return this.query_}}function jr(e,t){const n=ar(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Hn(t)&&!n.getImmediateChild(Ln(t)).isEmpty())?n.getChild(t):null}function Hr(e){return 0===e.eventRegistrations_.length}function $r(e,t,n){const i=[];if(n){I(null==t,"A cancel should cancel all event registrations.");const r=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,r);t&&i.push(t)}))}if(t){let n=[];for(let i=0;i<e.eventRegistrations_.length;++i){const r=e.eventRegistrations_[i];if(r.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(i+1));break}}else n.push(r)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return i}function Yr(e,t,n,i){t.type===Gi.MERGE&&null!==t.source.queryId&&(I(ar(e.viewCache_),"We should always have a full cache before handling merges"),I(or(e.viewCache_),"Missing event cache, even though we have a server cache"));const r=e.viewCache_,s=function(e,t,n,i,r){const s=new Dr;let o,a;if(n.type===Gi.OVERWRITE){const l=n;l.source.fromUser?o=qr(e,t,l.path,l.snap,i,r,s):(I(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!Hn(l.path),o=Lr(e,t,l.path,l.snap,i,r,a,s))}else if(n.type===Gi.MERGE){const l=n;l.source.fromUser?o=function(e,t,n,i,r,s,o){let a=t;return i.foreach(((i,l)=>{const c=jn(n,i);Fr(t,Ln(c))&&(a=qr(e,a,c,l,r,s,o))})),i.foreach(((i,l)=>{const c=jn(n,i);Fr(t,Ln(c))||(a=qr(e,a,c,l,r,s,o))})),a}(e,t,l.path,l.children,i,r,s):(I(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),o=Ur(e,t,l.path,l.children,i,r,a,s))}else if(n.type===Gi.ACK_USER_WRITE){const a=n;o=a.revert?function(e,t,n,i,r,s){let o;if(null!=Tr(i,n))return t;{const a=new Or(i,t,r),l=t.eventCache.getNode();let c;if(Hn(n)||".priority"===Ln(n)){let n;if(t.serverCache.isFullyInitialized())n=kr(i,ar(t));else{const e=t.serverCache.getNode();I(e instanceof xi,"serverChildren would be complete if leaf node"),n=Ir(i,e)}c=e.filter.updateFullNode(l,n,s)}else{const r=Ln(n);let h=Sr(i,r,t.serverCache);null==h&&t.serverCache.isCompleteForChild(r)&&(h=l.getImmediateChild(r)),c=null!=h?e.filter.updateChild(l,r,h,Fn(n),a,s):t.eventCache.getNode().hasChild(r)?e.filter.updateChild(l,r,xi.EMPTY_NODE,Fn(n),a,s):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=kr(i,ar(t)),o.isLeafNode()&&(c=e.filter.updateFullNode(c,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=Tr(i,Mn()),rr(t,c,o,e.filter.filtersNodes())}}(e,t,a.path,i,r,s):function(e,t,n,i,r,s,o){if(null!=Tr(r,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=i.value){if(Hn(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Lr(e,t,n,l.getNode().getChild(n),r,s,a,o);if(Hn(n)){let i=new cr(null);return l.getNode().forEachChild(ri,((e,t)=>{i=i.set(new On(e),t)})),Ur(e,t,n,i,r,s,a,o)}return t}{let c=new cr(null);return i.foreach(((e,t)=>{const i=jn(n,e);l.isCompleteForPath(i)&&(c=c.set(e,l.getNode().getChild(i)))})),Ur(e,t,n,c,r,s,a,o)}}(e,t,a.path,a.affectedTree,i,r,s)}else{if(n.type!==Gi.LISTEN_COMPLETE)throw B("Unknown operation type: "+n.type);o=function(e,t,n,i,r){const s=t.serverCache;return Mr(e,sr(t,s.getNode(),s.isFullyInitialized()||Hn(n),s.isFiltered()),n,i,Rr,r)}(e,t,n.path,i,s)}const l=s.getChanges();return function(e,t,n){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=or(e);(n.length>0||!e.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&n.push(Ni(or(t)))}}(t,o,l),{viewCache:o,changes:l}}(e.processor_,r,t,n,i);var o,a;return o=e.processor_,a=s.viewCache,I(a.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),I(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),I(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Vr(e,s.changes,s.viewCache.eventCache.getNode(),null)}function Vr(e,t,n,i){const r=i?[i]:e.eventRegistrations_;return function(e,t,n,i){const r=[],s=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),nr(e,r,"child_removed",t,i,n),nr(e,r,"child_added",t,i,n),nr(e,r,"child_moved",s,i,n),nr(e,r,"child_changed",t,i,n),nr(e,r,"value",t,i,n),r}(e.eventGenerator_,t,n,r)}let Gr,Kr;class Qr{constructor(){this.views=new Map}}function Xr(e,t,n,i){const r=t.source.queryId;if(null!==r){const s=e.views.get(r);return I(null!=s,"SyncTree gave us an op for an invalid query."),Yr(s,t,n,i)}{let r=[];for(const s of e.views.values())r=r.concat(Yr(s,t,n,i));return r}}function Zr(e,t,n,i,r){const s=t._queryIdentifier,o=e.views.get(s);if(!o){let e=kr(n,r?i:null),s=!1;e?s=!0:i instanceof xi?(e=Ir(n,i),s=!1):(e=xi.EMPTY_NODE,s=!1);const o=ir(new er(e,s,!1),new er(i,r,!1));return new Wr(t,o)}return o}function Jr(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function es(e,t){let n=null;for(const i of e.views.values())n=n||jr(i,t);return n}function ts(e,t){if(t._queryParams.loadsAllData())return rs(e);{const n=t._queryIdentifier;return e.views.get(n)}}function ns(e,t){return null!=ts(e,t)}function is(e){return null!=rs(e)}function rs(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let ss=1;class os{constructor(e){this.listenProvider_=e,this.syncPointTree_=new cr(null),this.pendingWriteTree_={visibleWrites:hr.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function as(e,t,n,i,r){return function(e,t,n,i,r){I(i>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),e.allWrites.push({path:t,snap:n,writeId:i,visible:r}),r&&(e.visibleWrites=dr(e.visibleWrites,t,n)),e.lastWriteId=i}(e.pendingWriteTree_,t,n,i,r),r?As(e,new Zi({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function ls(e,t,n=!1){const i=function(e,t){for(let n=0;n<e.allWrites.length;n++){const i=e.allWrites[n];if(i.writeId===t)return i}return null}(e.pendingWriteTree_,t);if(function(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));I(n>=0,"removeWrite called with nonexistent writeId.");const i=e.allWrites[n];e.allWrites.splice(n,1);let r=i.visible,s=!1,o=e.allWrites.length-1;for(;r&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=n&&Er(t,i.path)?r=!1:Vn(i.path,t.path)&&(s=!0)),o--}return!!r&&(s?(function(e){e.visibleWrites=wr(e.allWrites,vr,Mn()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0):(i.snap?e.visibleWrites=pr(e.visibleWrites,i.path):rn(i.children,(t=>{e.visibleWrites=pr(e.visibleWrites,jn(i.path,t))})),!0))}(e.pendingWriteTree_,t)){let t=new cr(null);return null!=i.snap?t=t.set(Mn(),!0):rn(i.children,(e=>{t=t.set(new On(e),!0)})),As(e,new Qi(i.path,t,n))}return[]}function cs(e,t,n){return As(e,new Zi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function hs(e,t,n,i,r=!1){const s=t._path,o=e.syncPointTree_.get(s);let a=[];if(o&&("default"===t._queryIdentifier||ns(o,t))){const l=function(e,t,n,i){const r=t._queryIdentifier,s=[];let o=[];const a=is(e);if("default"===r)for(const[t,r]of e.views.entries())o=o.concat($r(r,n,i)),Hr(r)&&(e.views.delete(t),r.query._queryParams.loadsAllData()||s.push(r.query));else{const t=e.views.get(r);t&&(o=o.concat($r(t,n,i)),Hr(t)&&(e.views.delete(r),t.query._queryParams.loadsAllData()||s.push(t.query)))}return a&&!is(e)&&s.push(new(I(Gr,"Reference.ts has not been loaded"),Gr)(t._repo,t._path)),{removed:s,events:o}}(o,t,n,i);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!r){const n=-1!==c.findIndex((e=>e._queryParams.loadsAllData())),r=e.syncPointTree_.findOnPath(s,((e,t)=>is(t)));if(n&&!r){const t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&is(t))return[rs(t)];{let e=[];return t&&(e=Jr(t)),rn(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const i=n[t],r=i.query,s=fs(e,i);e.listenProvider_.startListening(vs(r),gs(e,r),s.hashFn,s.onComplete)}}}if(!r&&c.length>0&&!i)if(n){const n=null;e.listenProvider_.stopListening(vs(t),n)}else c.forEach((t=>{const n=e.queryToTagMap.get(Cs(t));e.listenProvider_.stopListening(vs(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const i=t[n];if(!i._queryParams.loadsAllData()){const t=Cs(i),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return a}function ds(e,t,n,i){const r=ys(e,i);if(null!=r){const i=bs(r),s=i.path,o=i.queryId,a=$n(s,t);return Es(e,s,new Zi(Ki(o),a,n))}return[]}function us(e,t,n,i=!1){const r=t._path;let s=null,o=!1;e.syncPointTree_.foreachOnPath(r,((e,t)=>{const n=$n(e,r);s=s||es(t,n),o=o||is(t)}));let a,l=e.syncPointTree_.get(r);l?(o=o||is(l),s=s||es(l,Mn())):(l=new Qr,e.syncPointTree_=e.syncPointTree_.set(r,l)),null!=s?a=!0:(a=!1,s=xi.EMPTY_NODE,e.syncPointTree_.subtree(r).foreachChild(((e,t)=>{const n=es(t,Mn());n&&(s=s.updateImmediateChild(e,n))})));const c=ns(l,t);if(!c&&!t._queryParams.loadsAllData()){const n=Cs(t);I(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const i=ss++;e.queryToTagMap.set(n,i),e.tagToQueryMap.set(i,n)}let h=function(e,t,n,i,r,s){const o=Zr(e,t,i,r,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){const n=e.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(fi,((e,t)=>{i.push(Pi(e,t))})),n.isFullyInitialized()&&i.push(Ni(n.getNode())),Vr(e,i,n.getNode(),t)}(o,n)}(l,t,n,br(e.pendingWriteTree_,r),s,a);if(!c&&!o&&!i){const n=ts(l,t);h=h.concat(function(e,t,n){const i=t._path,r=gs(e,t),s=fs(e,n),o=e.listenProvider_.startListening(vs(t),r,s.hashFn,s.onComplete),a=e.syncPointTree_.subtree(i);if(r)I(!is(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold(((e,t,n)=>{if(!Hn(e)&&t&&is(t))return[rs(t).query];{let e=[];return t&&(e=e.concat(Jr(t).map((e=>e.query)))),rn(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const i=t[n];e.listenProvider_.stopListening(vs(i),gs(e,i))}}return o}(e,t,n))}return h}function ps(e,t,n){const i=e.pendingWriteTree_,r=e.syncPointTree_.findOnPath(t,((e,n)=>{const i=es(n,$n(e,t));if(i)return i}));return xr(i,t,r,n,!0)}function As(e,t){return _s(t,e.syncPointTree_,null,br(e.pendingWriteTree_,Mn()))}function _s(e,t,n,i){if(Hn(e.path))return ms(e,t,n,i);{const r=t.get(Mn());null==n&&null!=r&&(n=es(r,Mn()));let s=[];const o=Ln(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=Nr(i,o);s=s.concat(_s(a,l,e,t))}return r&&(s=s.concat(Xr(r,e,i,n))),s}}function ms(e,t,n,i){const r=t.get(Mn());null==n&&null!=r&&(n=es(r,Mn()));let s=[];return t.children.inorderTraversal(((t,r)=>{const o=n?n.getImmediateChild(t):null,a=Nr(i,t),l=e.operationForChild(t);l&&(s=s.concat(ms(l,r,o,a)))})),r&&(s=s.concat(Xr(r,e,i,n))),s}function fs(e,t){const n=t.query,i=gs(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||xi.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return i?function(e,t,n){const i=ys(e,n);if(i){const n=bs(i),r=n.path,s=n.queryId,o=$n(r,t);return Es(e,r,new Xi(Ki(s),o))}return[]}(e,n._path,i):function(e,t){return As(e,new Xi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const i=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const i=new Error(e+" at "+t._path.toString()+": "+n);return i.code=e.toUpperCase(),i}(t,n);return hs(e,n,null,i)}}}}function gs(e,t){const n=Cs(t);return e.queryToTagMap.get(n)}function Cs(e){return e._path.toString()+"$"+e._queryIdentifier}function ys(e,t){return e.tagToQueryMap.get(t)}function bs(e){const t=e.indexOf("$");return I(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new On(e.substr(0,t))}}function Es(e,t,n){const i=e.syncPointTree_.get(t);return I(i,"Missing sync point for query tag that we're tracking"),Xr(i,n,br(e.pendingWriteTree_,t),null)}function vs(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(I(Kr,"Reference.ts has not been loaded"),Kr)(e._repo,e._path):e}class ws{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new ws(t)}node(){return this.node_}}class xs{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=jn(this.path_,e);return new xs(this.syncTree_,t)}node(){return ps(this.syncTree_,this.path_)}}const ks=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},Is=function(e,t,n){return e&&"object"==typeof e?(I(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?Bs(e[".sv"],t,n):"object"==typeof e[".sv"]?Ts(e[".sv"],t):void I(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Bs=function(e,t,n){if("timestamp"===e)return n.timestamp;I(!1,"Unexpected server value: "+e)},Ts=function(e,t,n){e.hasOwnProperty("increment")||I(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const i=e.increment;"number"!=typeof i&&I(!1,"Unexpected increment value: "+i);const r=t.node();if(I(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const s=r.getValue();return"number"!=typeof s?i:s+i},Ss=function(e,t,n,i){return Ps(t,new xs(n,e),i)},Ns=function(e,t,n){return Ps(e,new ws(t),n)};function Ps(e,t,n){const i=e.getPriority().val(),r=Is(i,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const i=e,s=Is(i.getValue(),t,n);return s!==i.getValue()||r!==i.getPriority().val()?new mi(s,Bi(r)):e}{const i=e;return s=i,r!==i.getPriority().val()&&(s=s.updatePriority(new mi(r))),i.forEachChild(fi,((e,i)=>{const r=Ps(i,t.getImmediateChild(e),n);r!==i&&(s=s.updateImmediateChild(e,r))})),s}}class Ds{constructor(e="",t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}}function Rs(e,t){let n=t instanceof On?t:new On(t),i=e,r=Ln(n);for(;null!==r;){const e=G(i.node.children,r)||{children:{},childCount:0};i=new Ds(r,i,e),n=Fn(n),r=Ln(n)}return i}function Os(e){return e.node.value}function Ms(e,t){e.node.value=t,Us(e)}function Ls(e){return e.node.childCount>0}function qs(e,t){rn(e.node.children,((n,i)=>{t(new Ds(n,e,i))}))}function Fs(e,t,n,i){n&&!i&&t(e),qs(e,(e=>{Fs(e,t,!0,i)})),n&&i&&t(e)}function zs(e){return new On(null===e.parent?e.name:zs(e.parent)+"/"+e.name)}function Us(e){null!==e.parent&&function(e,t,n){const i=function(e){return void 0===Os(e)&&!Ls(e)}(n),r=V(e.node.children,t);i&&r?(delete e.node.children[t],e.node.childCount--,Us(e)):i||r||(e.node.children[t]=n.node,e.node.childCount++,Us(e))}(e.parent,e.name,e)}const Ws=/[\[\].#$\/\u0000-\u001F\u007F]/,js=/[\[\].#$\u0000-\u001F\u007F]/,Hs=10485760,$s=function(e){return"string"==typeof e&&0!==e.length&&!Ws.test(e)},Ys=function(e){return"string"==typeof e&&0!==e.length&&!js.test(e)},Vs=function(e,t,n,i){i&&void 0===t||Gs(ee(e,"value"),t,n)},Gs=function(e,t,n){const i=n instanceof On?new Gn(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+Qn(i));if("function"==typeof t)throw new Error(e+"contains a function "+Qn(i)+" with contents = "+t.toString());if(Kt(t))throw new Error(e+"contains "+t.toString()+" "+Qn(i));if("string"==typeof t&&t.length>Hs/3&&te(t)>Hs)throw new Error(e+"contains a string greater than "+Hs+" utf8 bytes "+Qn(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let n=!1,r=!1;if(rn(t,((t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(r=!0,!$s(t)))throw new Error(e+" contains an invalid key ("+t+") "+Qn(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=te(t),Kn(e)}(i,t),Gs(e,s,i),function(e){const t=e.parts_.pop();e.byteLength_-=te(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),n&&r)throw new Error(e+' contains ".value" child '+Qn(i)+" in addition to actual children.")}},Ks=function(e,t,n,i){if(!(i&&void 0===n||Ys(n)))throw new Error(ee(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Qs=function(e,t,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Ks(e,t,n,i)},Xs=function(e,t){if(".info"===Ln(t))throw new Error(e+" failed = Can't modify data under /.info/")};class Zs{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Js(e,t){let n=null;for(let i=0;i<t.length;i++){const r=t[i],s=r.getPath();null===n||Yn(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(r)}n&&e.eventLists_.push(n)}function eo(e,t,n){Js(e,n),function(e,t){e.recursionDepth_++;let n=!0;for(let i=0;i<e.eventLists_.length;i++){const r=e.eventLists_[i];r&&(t(r.path)?(to(e.eventLists_[i]),e.eventLists_[i]=null):n=!1)}n&&(e.eventLists_=[]),e.recursionDepth_--}(e,(e=>Vn(e,t)||Vn(t,e)))}function to(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const i=n.getEventRunner();Wt&&Ht("event: "+n.toString()),ln(i)}}}const no=25;class io{constructor(e,t,n,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Zs,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ji(),this.transactionQueueTree_=new Ds,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ro(e,t,n){if(e.stats_=vn(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Ui(e.repoInfo_,((t,n,i,r)=>{ao(e,t,n,i,r)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>lo(e,!0)),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{$(n)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}e.persistentConnection_=new Jn(e.repoInfo_,t,((t,n,i,r)=>{ao(e,t,n,i,r)}),(t=>{lo(e,t)}),(t=>{!function(e,t){rn(t,((t,n)=>{co(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(t,n){const i=t.toString();return En[i]||(En[i]=new Vi(e.stats_,e.server_)),En[i]}(e.repoInfo_),e.infoData_=new Wi,e.infoSyncTree_=new os({startListening:(t,n,i,r)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=cs(e.infoSyncTree_,t._path,o),setTimeout((()=>{r("ok")}),0)),s},stopListening:()=>{}}),co(e,"connected",!1),e.serverSyncTree_=new os({startListening:(t,n,i,r)=>(e.server_.listen(t,i,n,((n,i)=>{const s=r(n,i);eo(e.eventQueue_,t._path,s)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function so(e){const t=e.infoData_.getNode(new On(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function oo(e){return ks({timestamp:so(e)})}function ao(e,t,n,i,r){e.dataUpdateCount++;const s=new On(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(r)if(i){const t=Q(n,(e=>Bi(e)));o=function(e,t,n,i){const r=ys(e,i);if(r){const i=bs(r),s=i.path,o=i.queryId,a=$n(s,t),l=cr.fromObject(n);return Es(e,s,new Ji(Ki(o),a,l))}return[]}(e.serverSyncTree_,s,t,r)}else{const t=Bi(n);o=ds(e.serverSyncTree_,s,t,r)}else if(i){const t=Q(n,(e=>Bi(e)));o=function(e,t,n){const i=cr.fromObject(n);return As(e,new Ji({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(e.serverSyncTree_,s,t)}else{const t=Bi(n);o=cs(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=mo(e,s)),eo(e.eventQueue_,a,o)}function lo(e,t){co(e,"connected",t),!1===t&&function(e){po(e,"onDisconnectEvents");const t=oo(e),n=ji();$i(e.onDisconnect_,Mn(),((i,r)=>{const s=Ss(i,r,e.serverSyncTree_,t);Hi(n,i,s)}));let i=[];$i(n,Mn(),((t,n)=>{i=i.concat(cs(e.serverSyncTree_,t,n));const r=bo(e,t);mo(e,r)})),e.onDisconnect_=ji(),eo(e.eventQueue_,Mn(),i)}(e)}function co(e,t,n){const i=new On("/.info/"+t),r=Bi(n);e.infoData_.updateSnapshot(i,r);const s=cs(e.infoSyncTree_,i,r);eo(e.eventQueue_,i,s)}function ho(e){return e.nextWriteId_++}function uo(e,t,n,i,r){po(e,"set",{path:t.toString(),value:n,priority:i});const s=oo(e),o=Bi(n,i),a=ps(e.serverSyncTree_,t),l=Ns(o,a,s),c=ho(e),h=as(e.serverSyncTree_,t,l,c,!0);Js(e.eventQueue_,h),e.server_.put(t.toString(),o.val(!0),((n,i)=>{const s="ok"===n;s||Gt("set at "+t+" failed: "+n);const o=ls(e.serverSyncTree_,c,!s);eo(e.eventQueue_,t,o),function(e,t,n,i){t&&ln((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let r=e;i&&(r+=": "+i);const s=new Error(r);s.code=e,t(s)}}))}(0,r,n,i)}));const d=bo(e,t);mo(e,d),eo(e.eventQueue_,d,[])}function po(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),Ht(n,...t)}function Ao(e,t,n){return ps(e.serverSyncTree_,t,n)||xi.EMPTY_NODE}function _o(e,t=e.transactionQueueTree_){if(t||yo(e,t),Os(t)){const n=go(e,t);I(n.length>0,"Sending zero length transaction queue"),n.every((e=>0===e.status))&&function(e,t,n){const i=n.map((e=>e.currentWriteId)),r=Ao(e,t,i);let s=r;const o=r.hash();for(let e=0;e<n.length;e++){const i=n[e];I(0===i.status,"tryToSendTransactionQueue_: items in queue should all be run."),i.status=1,i.retryCount++;const r=$n(t,i.path);s=s.updateChild(r,i.currentOutputSnapshotRaw)}const a=s.val(!0),l=t;e.server_.put(l.toString(),a,(i=>{po(e,"transaction put response",{path:l.toString(),status:i});let r=[];if("ok"===i){const i=[];for(let t=0;t<n.length;t++)n[t].status=2,r=r.concat(ls(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&i.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();yo(e,Rs(e.transactionQueueTree_,t)),_o(e,e.transactionQueueTree_),eo(e.eventQueue_,t,r);for(let e=0;e<i.length;e++)ln(i[e])}else{if("datastale"===i)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{Gt("transaction at "+l.toString()+" failed: "+i);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=i}mo(e,t)}}),o)}(e,zs(t),n)}else Ls(t)&&qs(t,(t=>{_o(e,t)}))}function mo(e,t){const n=fo(e,t),i=zs(n);return function(e,t,n){if(0===t.length)return;const i=[];let r=[];const s=t.filter((e=>0===e.status)).map((e=>e.currentWriteId));for(let a=0;a<t.length;a++){const l=t[a],c=$n(n,l.path);let h,d=!1;if(I(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)d=!0,h=l.abortReason,r=r.concat(ls(e.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=no)d=!0,h="maxretry",r=r.concat(ls(e.serverSyncTree_,l.currentWriteId,!0));else{const n=Ao(e,l.path,s);l.currentInputSnapshot=n;const i=t[a].update(n.val());if(void 0!==i){Gs("transaction failed: Data returned ",i,l.path);let t=Bi(i);"object"==typeof i&&null!=i&&V(i,".priority")||(t=t.updatePriority(n.getPriority()));const o=l.currentWriteId,a=oo(e),c=Ns(t,n,a);l.currentOutputSnapshotRaw=t,l.currentOutputSnapshotResolved=c,l.currentWriteId=ho(e),s.splice(s.indexOf(o),1),r=r.concat(as(e.serverSyncTree_,l.path,c,l.currentWriteId,l.applyLocally)),r=r.concat(ls(e.serverSyncTree_,o,!0))}else d=!0,h="nodata",r=r.concat(ls(e.serverSyncTree_,l.currentWriteId,!0))}eo(e.eventQueue_,n,r),r=[],d&&(t[a].status=2,o=t[a].unwatcher,setTimeout(o,Math.floor(0)),t[a].onComplete&&("nodata"===h?i.push((()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot))):i.push((()=>t[a].onComplete(new Error(h),!1,null)))))}var o;yo(e,e.transactionQueueTree_);for(let e=0;e<i.length;e++)ln(i[e]);_o(e,e.transactionQueueTree_)}(e,go(e,n),i),i}function fo(e,t){let n,i=e.transactionQueueTree_;for(n=Ln(t);null!==n&&void 0===Os(i);)i=Rs(i,n),n=Ln(t=Fn(t));return i}function go(e,t){const n=[];return Co(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function Co(e,t,n){const i=Os(t);if(i)for(let e=0;e<i.length;e++)n.push(i[e]);qs(t,(t=>{Co(e,t,n)}))}function yo(e,t){const n=Os(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,Ms(t,n.length>0?n:void 0)}qs(t,(t=>{yo(e,t)}))}function bo(e,t){const n=zs(fo(e,t)),i=Rs(e.transactionQueueTree_,t);return function(e,t,n){let i=e.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,(t=>{Eo(e,t)})),Eo(e,i),Fs(i,(t=>{Eo(e,t)})),n}function Eo(e,t){const n=Os(t);if(n){const i=[];let r=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(I(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(I(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),r=r.concat(ls(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&i.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?Ms(t,void 0):n.length=s+1,eo(e.eventQueue_,zs(t),r);for(let e=0;e<i.length;e++)ln(i[e])}}const vo=function(e,t){const n=wo(e),i=n.namespace;"firebase.com"===n.domain&&Vt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),i&&"undefined"!==i||"localhost"===n.domain||Vt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Gt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const r="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new gn(n.host,n.secure,i,r,t,"",i!==n.subdomain),path:new On(n.pathString)}},wo=function(e){let t="",n="",i="",r="",s="",o=!0,a="https",l=443;if("string"==typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let h=e.indexOf("/");-1===h&&(h=e.length);let d=e.indexOf("?");-1===d&&(d=e.length),t=e.substring(0,Math.min(h,d)),h<d&&(r=function(e){let t="";const n=e.split("/");for(let e=0;e<n.length;e++)if(n[e].length>0){let i=n[e];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(e){}t+="/"+i}return t}(e.substring(h,d)));const u=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const i=n.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Gt(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,d)));c=t.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const p=t.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{const e=t.indexOf(".");i=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=i}"ns"in u&&(s=u.ns)}return{host:t,port:l,domain:n,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}},xo="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ko=function(){let e=0;const t=[];return function(n){const i=n===e;let r;e=n;const s=new Array(8);for(r=7;r>=0;r--)s[r]=xo.charAt(n%64),n=Math.floor(n/64);I(0===n,"Cannot push at time == 0");let o=s.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=xo.charAt(t[r]);return I(20===o.length,"nextPushId: Length should be 20."),o}}();class Io{constructor(e,t,n,i){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+$(this.snapshot.exportVal())}}class Bo{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class To{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return I(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class So{constructor(e,t,n,i){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=i}get key(){return Hn(this._path)?null:zn(this._path)}get ref(){return new No(this._repo,this._path)}get _queryIdentifier(){const e=zi(this._queryParams),t=tn(e);return"{}"===t?"default":t}get _queryObject(){return zi(this._queryParams)}isEqual(e){if(!((e=ne(e))instanceof So))return!1;const t=this._repo===e._repo,n=Yn(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&n&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class No extends So{constructor(e,t){super(e,t,new qi,!1)}get parent(){const e=Wn(this._path);return null===e?null:new No(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Po{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new On(e),n=Ro(this.ref,e);return new Po(this._node.getChild(t),n,fi)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,((t,n)=>e(new Po(n,Ro(this.ref,t),fi))))}hasChild(e){const t=new On(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Do(e,t){return(e=ne(e))._checkNotDeleted("ref"),void 0!==t?Ro(e._root,t):e._root}function Ro(e,t){return null===Ln((e=ne(e))._path)?Qs("child","path",t,!1):Ks("child","path",t,!1),new No(e._repo,jn(e._path,t))}function Oo(e,t){e=ne(e),Xs("set",e._path),Vs("set",t,e._path,!1);const n=new F;return uo(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}function Mo(e){e=ne(e);const t=new To((()=>{})),n=new Lo(t);return function(e,t,n){const i=function(e,t){const n=t._path;let i=null;e.syncPointTree_.foreachOnPath(n,((e,t)=>{const r=$n(e,n);i=i||es(t,r)}));let r=e.syncPointTree_.get(n);r?i=i||es(r,Mn()):(r=new Qr,e.syncPointTree_=e.syncPointTree_.set(n,r));const s=null!=i,o=s?new er(i,!0,!1):null;return or(Zr(r,t,br(e.pendingWriteTree_,t._path),s?o.getNode():xi.EMPTY_NODE,s).viewCache_)}(e.serverSyncTree_,t);return null!=i?Promise.resolve(i):e.server_.get(t).then((i=>{const r=Bi(i).withIndex(t._queryParams.getIndex());let s;if(us(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())s=cs(e.serverSyncTree_,t._path,r);else{const n=gs(e.serverSyncTree_,t);s=ds(e.serverSyncTree_,t._path,r,n)}return eo(e.eventQueue_,t._path,s),hs(e.serverSyncTree_,t,n,null,!0),r}),(n=>(po(e,"get for query "+$(t)+" failed: "+n),Promise.reject(new Error(n)))))}(e._repo,e,n).then((t=>new Po(t,new No(e._repo,e._path),e._queryParams.getIndex())))}class Lo{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new Io("value",this,new Po(e.snapshotNode,new No(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Bo(this,e,t):null}matches(e){return e instanceof Lo&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}!function(e){I(!Gr,"__referenceConstructor has already been defined"),Gr=e}(No),function(e){I(!Kr,"__referenceConstructor has already been defined"),Kr=e}(No);const qo={};function Fo(e,t,n,i,r){let s=i||e.options.databaseURL;void 0===s&&(e.options.projectId||Vt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ht("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o,a,l=vo(s,r),c=l.repoInfo;"undefined"!=typeof process&&process.env&&(a=process.env.FIREBASE_DATABASE_EMULATOR_HOST),a?(o=!0,s=`http://${a}?ns=${c.namespace}`,l=vo(s,r),c=l.repoInfo):o=!l.repoInfo.secure;const h=r&&o?new un(un.OWNER):new dn(e.name,e.options,t);(function(e,t){const n=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!$s(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Ys(e)}(n))throw new Error(ee(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",l),Hn(l.path)||Vt("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function(e,t,n,i){let r=qo[t.name];r||(r={},qo[t.name]=r);let s=r[e.toURLString()];return s&&Vt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new io(e,false,n,i),r[e.toURLString()]=s,s}(c,e,h,new hn(e.name,n));return new zo(d,e)}class zo{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(ro(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new No(this._repo,Mn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(e,t){const n=qo[t];n&&n[e.key]===e||Vt(`Database ${t}(${e.repoInfo_}) has already been deleted.`),function(e){e.persistentConnection_&&e.persistentConnection_.interrupt("repo_interrupt")}(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Vt("Cannot call "+e+" on a deleted database.")}}function Uo(e=function(e=at){const t=ct.get(e);if(!t&&e===at&&q())return mt();if(!t)throw At.create("no-app",{appName:e});return t}(),t){const n=function(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=(e=>{const t=(e=>{var t,n;return null===(n=null===(t=L())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),i]:[t.substring(0,n),i]})("database");e&&function(e,t,n,i={}){(e=ne(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&Vt("Cannot call useEmulator() after instance has already been initialized.");const r=e._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Vt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new un(un.OWNER);else if(i.mockUserToken){const t="string"==typeof i.mockUserToken?i.mockUserToken:function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[D(JSON.stringify({alg:"none",type:"JWT"})),D(JSON.stringify(s)),""].join(".")}(i.mockUserToken,e.app.options.projectId);s=new un(t)}!function(e,t,n,i){e.repoInfo_=new gn(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),i&&(e.authTokenProvider_=i)}(r,t,n,s)}(n,...e)}return n}Jn.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Jn.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},Pt="11.0.2",pt(new ie("database",((e,{instanceIdentifier:t})=>Fo(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t)),"PUBLIC").setMultipleInstances(!0)),ft(St,Nt,void 0),ft(St,Nt,"esm2017");const Wo=[],jo=new class{async fetchData(){const e=Do(Uo(Tt),"/excursions");let t=[];try{const n=(await Mo(e)).val();for(const e in n){const i={id:e,...n[e]};t.push(i)}console.log("Data fetched successfully!")}catch(e){throw new Error(`FETCH - failed, status: ${e}`)}return t}async pushData(e){const t=Do(Uo(Tt),"/excursions");try{await function(e,t){e=ne(e),Xs("push",e._path),Vs("push",t,e._path,!0);const n=so(e._repo),i=ko(n),r=Ro(e,i),s=Ro(e,i);let o;return o=null!=t?Oo(s,t).then((()=>s)):Promise.resolve(s),r.then=o.then.bind(o),r.catch=o.then.bind(o,void 0),r}(t,e),console.log("Data pushed successfully!")}catch(e){throw new Error(`PUSH - failed, status: ${e}`)}}async removeData(e){const t=Do(Uo(Tt),`/excursions/${e}`);try{await function(e){return Xs("remove",e._path),Oo(e,null)}(t)}catch(e){throw new Error(`REMOVE - failed, status: ${e}`)}}async updateData(e,t){const n=Do(Uo(Tt),`/excursions/${e}`);try{await Oo(n,t)}catch(e){throw new Error(`UPDATE - failed, status: ${e}`)}}},Ho=new class{constructor(e){this.basket=e}basketValidation=e=>{const t=e.target.querySelector('input[name = "adults"]').value,n=e.target.querySelector('input[name = "children"]').value,i=this.validateSubmitTickets(e,t,n),r=this.validateBasketSize(e,t,n);return!(!i||r)};validateSubmitTickets(e,t,n){let i=!0;const r=/^([1-9]|[1-9][0-9]|100)$/,s=e.target.querySelector('div[name = "adults"]'),o=e.target.querySelector('div[name = "children"]');return""===t&&""===n&&(s.innerText="Fill up the blank space!",i=!1),t&&!r.test(t)&&(s.innerText="Invalid data!",i=!1),n&&!r.test(n)&&(o.innerText="Invalid data!",i=!1),!!i}validateBasketSize(e,t,n){let i=!1;const r=e.target.parentElement.getAttribute("id");return this.basket.forEach((e=>{if(e.id===r){const r=100;let s=0;const o=[];e.adultsTicketAmount&&o.push(parseInt(e.adultsTicketAmount)),e.childrenTicketAmount&&o.push(parseInt(e.childrenTicketAmount)),t&&o.push(parseInt(t)),n&&o.push(parseInt(n));for(let e=0;e<o.length;e++)s+=o[e];s>r&&(i=!0,alert("The Basket is full!"))}})),i}orderValidation=()=>{if(0===this.basket.length)return alert("There're no items in the basket!"),!1;let e=!0;const{name:t,email:n,orderErrorName:i,orderErrorEmail:r}=this.createPlaceOrderVariables();return this.isClientNameValid(t)?i.innerText="":(i.innerText="Incorrect name.",e=!1),this.isClientEmailValid(n)?r.innerText="":(r.innerText="Incorrect email.",e=!1),!!e};createPlaceOrderVariables=()=>{const e=document.querySelector(".basket__order"),t=e.querySelector('input[name = "name"]'),n=t.value,i=e.querySelector('input[name = "email"]'),r=i.value,s=e.querySelector(".order__field-error--name"),o=e.querySelector(".order__field-error--email");return{basketOrder:e,nameInput:t,name:n,emailInput:i,email:r,orderErrorName:s,orderErrorEmail:o}};isClientNameValid(e){return!!/^[a-zA-ZąćęłńóśźżĄĆĘŁŃÓŚŹŻ\s]+$/.test(e)}isClientEmailValid(e){return!!/^\S+@\S+$/g.test(e)}}(Wo),$o=new class{manageNavbar(){window.addEventListener("DOMContentLoaded",(()=>{this.changeNavbarViews(),this.changeNavbarBackgroundColor(),this.onOffBasket(),this.showHideNavbar()}))}changeNavbarViews(){this.navbarMobileView(),window.addEventListener("resize",(()=>this.navbarMobileView()))}changeNavbarBackgroundColor(){const e=document.querySelector(".navbar"),t=document.querySelector(".basket-btn"),n=document.querySelector(".navbar__toggle");window.addEventListener("scroll",(()=>{window.scrollY>0?e.classList.add("navbar--background-scroll"):e.classList.remove("navbar--background-scroll")})),t.addEventListener("click",(()=>{e.classList.toggle("navbar--background-basket-btn")})),n.addEventListener("click",(()=>{e.classList.toggle("navbar--background-navbar-btn")}))}onOffBasket(){const e=document.querySelector(".basket-btn");e.addEventListener("click",(()=>{const t=document.querySelector(".basket"),n=document.querySelector("body");e.checked?(t.classList.add("basket--open"),n.style.overflow="hidden"):(t.classList.remove("basket--open"),n.style.overflow="initial")}))}showHideNavbar(){const e=document.querySelector(".navbar__toggle"),t=document.querySelector(".navbar__container--mobile"),n=document.querySelector(".navbar__btn");e.addEventListener("click",(()=>{t.classList.toggle("navbar__container--open"),n.classList.toggle("navbar__btn--checked")}))}navbarMobileView(){const e="navbar__container",t="navbar__item";window.innerWidth<1200?(this.changeClassOfElementList(`${t}`,`${t}--mobile`),this.changeClassOfElementList(`${e}`,`${e}--mobile`)):(this.changeClassOfElementList(`${t}--mobile`,`${t}`),this.changeClassOfElementList(`${e}--mobile`,`${e}`))}changeClassOfElementList(e,t){document.querySelectorAll(`.${e}`).forEach((n=>{n.classList.remove(`${e}`),n.classList.add(`${t}`)}))}};async function Yo(e){await async function(e){e.preventDefault();const{basketValidation:t}=Ho;if(!1===t(e))return;!function(){const e=document.querySelector(".panel__excursions");Array.from(e.querySelectorAll(".excursions__field-error")).forEach((e=>{e.innerText=""}))}();const{selectedExcursion:n}=await async function(e){const t=await jo.fetchData(),n=e.target.parentElement.id;return{selectedExcursion:t.find((e=>e.id===n))}}(e),{adultsTicketAmount:i,childrenTicketAmount:r}=function(e){let t=e.target.querySelector('input[name = "adults"]').value,n=e.target.querySelector('input[name = "children"]').value;return t?n?{adultsTicketAmount:t,childrenTicketAmount:n}:{adultsTicketAmount:t}:{childrenTicketAmount:n}}(e);!function(e){return Wo.some((t=>t.id===e.id))}(n)?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";const i={id:e.id,name:e.name,adultsPrice:e.adultsPrice,adultsTicketAmount:t,childrenPrice:e.childrenPrice,childrenTicketAmount:n};Wo.push(i)}(n,i,r):function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";Wo.forEach((i=>{i.id===e.id&&(function(e,t){e.adultsTicketAmount=(parseInt(e.adultsTicketAmount)+parseInt(t)).toString()}(i,t),function(e,t){e.childrenTicketAmount=(parseInt(e.childrenTicketAmount)+parseInt(t)).toString()}(i,n))}))}(n,i,r)}(e),Vo(),function(){const e=document.querySelector(".items-list");(function(e){for(;e.children[1];)e.removeChild(e.children[1])})(e),Wo.forEach((t=>{const{itemListItemTemplate:n,name:i,pricesAdults:r,pricesChildren:s,itemTotalPrice:o}=function(){const e=document.querySelector(".item-list__item--prototype").cloneNode(!0);e.classList.remove("item-list__item--prototype");const t=e.querySelector(".item__name"),n=e.querySelector(".item__prices"),i=n.querySelector(".prices__adults"),r=n.querySelector(".prices__children"),s=e.querySelector(".item__total-price");return{itemListItemTemplate:e,name:t,pricesAdults:i,pricesChildren:r,itemTotalPrice:s}}();n.setAttribute("id",t.id),i.innerText=t.name,function(e,t,n){const{adultsTicketAmount:i,childrenTicketAmount:r}=Qo(e),{adultsTicketText:s,childrenTicketText:o}=function(e){const{adultsTicketAmount:t,childrenTicketAmount:n,adultsPrice:i,childrenPrice:r}=e;return{adultsTicketText:`adults:\n   ${t} x ${i} PLN`,childrenTicketText:`children:\n   ${n} x ${r} PLN`}}(e);i&&r?(t.innerText=s,n.innerText=o):i?(t.innerText=s,n.innerText=""):r&&(n.innerText=o,t.innerText="")}(t,r,s),function(e,t){const{adultsTicketAmount:n,childrenTicketAmount:i,adultsPrice:r,childrenPrice:s}=Qo(e);t.innerText=n*r+i*s+" PLN"}(t,o),e.appendChild(n)}))}(),document.querySelector(".panel__excursions").querySelectorAll("input:not([type = 'submit'])").forEach((e=>{e.value=""})),Ko(),document.querySelector(".items-list").querySelectorAll(".item__btn-remove").forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),function(e){const t=e.target.parentElement,n=t.parentElement,i=Wo.findIndex((e=>t.id===e.id));Wo.splice(i,1),n.removeChild(t),Vo(),Ko()}(e)}))}))}function Vo(){const e=document.querySelector(".basket-btn__quantity");Wo.length>0?e.style.display="flex":e.style.display="none";const t=Wo.length;e.innerText=`${t}`}function Go(){let e=0;return Wo.forEach((t=>{const{adultsTicketAmount:n,childrenTicketAmount:i,adultsPrice:r,childrenPrice:s}=Qo(t);e+=n*r+i*s})),{totalPrice:e}}function Ko(){const{totalPrice:e}=Go();document.querySelector(".total-price__value").innerText=e+" PLN"}function Qo(e){let{adultsTicketAmount:t,childrenTicketAmount:n,adultsPrice:i,childrenPrice:r}=e;return t=parseInt(t),n=parseInt(n),i=parseInt(i),r=parseInt(r),{adultsTicketAmount:t,childrenTicketAmount:n,adultsPrice:i,childrenPrice:r}}async function Xo(e){e.preventDefault();const{orderValidation:t,createPlaceOrderVariables:n}=Ho;if(!1===t())return;const{name:i,email:r}=n(),{totalPrice:s}=Go(),{orderObj:o}=function(e,t,n){return{orderObj:{userName:t,userEmail:n,basket:e}}}(Wo,i,r);alert(`Thank you for placing an order worth ${s} PLN. The order details have been sent to the following email address: ${r}.\n    \n    This is a demo. No personal data was collected.\n    `),location.reload()}console.log("client"),document.addEventListener("DOMContentLoaded",(async function(){$o.manageNavbar(),function(e){const t=document.querySelector(".panel__excursions");e.forEach((e=>{const{excursionTemplate:n,name:i,description:r,adultsPrice:s,childrenPrice:o}=function(){const e=document.querySelector(".excursions__item--prototype").cloneNode(!0);e.classList.remove("excursions__item--prototype");const t=e.querySelector(".excursions__name"),n=e.querySelector(".excursions__description"),i=e.querySelectorAll(".excursions__price"),[r,s]=i;return{excursionTemplate:e,name:t,description:n,adultsPrice:r,childrenPrice:s}}();n.setAttribute("id",e.id),i.innerText=e.name,r.innerText=e.description,s.innerText=e.adultsPrice,o.innerText=e.childrenPrice,t.appendChild(n)}))}(await jo.fetchData()),document.querySelector(".excursions").addEventListener("submit",Yo),document.querySelector(".basket__order").addEventListener("submit",Xo)}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixHQUN0QixNQUFNSCxFQUFrQi9nRSxTQUFTQyxjQUFjLHNCQUUvQ2loRSxFQUFlM3NCLFNBQVM2c0IsSUFDdEIsTUFBTSxrQkFBRTJDLEVBQWlCLEtBQUUxOEQsRUFBSSxZQUFFMjhELEVBQVcsWUFBRXZDLEVBQVcsY0FBRUMsR0FhL0QsV0FDRSxNQUFNcUMsRUFBb0IvakUsU0FDdkJDLGNBQWMsZ0NBQ2RzaUUsV0FBVSxHQUNid0IsRUFBa0JoRSxVQUFVM2dFLE9BQU8sK0JBQ25DLE1BQU1pSSxFQUFPMDhELEVBQWtCOWpFLGNBQWMscUJBQ3ZDK2pFLEVBQWNELEVBQWtCOWpFLGNBQ3BDLDRCQUVJZ2tFLEVBQVFGLEVBQWtCcEQsaUJBQWlCLHVCQUMxQ2MsRUFBYUMsR0FBaUJ1QyxFQUVyQyxNQUFPLENBQUVGLG9CQUFtQjE4RCxPQUFNMjhELGNBQWF2QyxjQUFhQyxnQkFDOUQsQ0F6Qk13QyxHQUVGSCxFQUFrQi9pRSxhQUFhLEtBQU1vZ0UsRUFBVXptRSxJQUMvQzBNLEVBQUsyMkQsVUFBWW9ELEVBQVUvNUQsS0FDM0IyOEQsRUFBWWhHLFVBQVlvRCxFQUFVNEMsWUFDbEN2QyxFQUFZekQsVUFBWW9ELEVBQVVLLFlBQ2xDQyxFQUFjMUQsVUFBWW9ELEVBQVVNLGNBRXBDWCxFQUFnQnRnRSxZQUFZc2pFLEVBQWtCLEdBRWxELENBeEJFSSxPQUQ2QnpILEdBQWNDLGFBR2YzOEQsU0FBU0MsY0FBYyxlQUMvQm9WLGlCQUFpQixTQUFVd3JELElBRTNCN2dFLFNBQVNDLGNBQWMsa0JBQy9Cb1YsaUJBQWlCLFNBQVVvdUQsR0FDekMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXNrLWV4Y3VzaW9ucy1hcGkvLi9zcmMvY3NzL2NsaWVudC9iYXNrZXQvYmFza2V0LWZvbnRzLmNzcyIsIndlYnBhY2s6Ly90YXNrLWV4Y3VzaW9ucy1hcGkvLi9zcmMvY3NzL2NsaWVudC9iYXNrZXQvYmFza2V0LmNzcyIsIndlYnBhY2s6Ly90YXNrLWV4Y3VzaW9ucy1hcGkvLi9zcmMvY3NzL2NsaWVudC9kZXNrdG9wLmNzcyIsIndlYnBhY2s6Ly90YXNrLWV4Y3VzaW9ucy1hcGkvLi9zcmMvY3NzL2NsaWVudC9mb250cy5jc3MiLCJ3ZWJwYWNrOi8vdGFzay1leGN1c2lvbnMtYXBpLy4vc3JjL2Nzcy9jbGllbnQvZ2xvYmFsLmNzcyIsIndlYnBhY2s6Ly90YXNrLWV4Y3VzaW9ucy1hcGkvLi9zcmMvY3NzL2NsaWVudC9tb2JpbGUuY3NzIiwid2VicGFjazovL3Rhc2stZXhjdXNpb25zLWFwaS8uL3NyYy9jc3MvcmVzZXQuY3NzIiwid2VicGFjazovL3Rhc2stZXhjdXNpb25zLWFwaS8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanMiLCJ3ZWJwYWNrOi8vdGFzay1leGN1c2lvbnMtYXBpLy4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2dldFVybC5qcyIsIndlYnBhY2s6Ly90YXNrLWV4Y3VzaW9ucy1hcGkvLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvc291cmNlTWFwcy5qcyIsIndlYnBhY2s6Ly90YXNrLWV4Y3VzaW9ucy1hcGkvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanMiLCJ3ZWJwYWNrOi8vdGFzay1leGN1c2lvbnMtYXBpLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0QnlTZWxlY3Rvci5qcyIsIndlYnBhY2s6Ly90YXNrLWV4Y3VzaW9ucy1hcGkvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vdGFzay1leGN1c2lvbnMtYXBpLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc2V0QXR0cmlidXRlc1dpdGhvdXRBdHRyaWJ1dGVzLmpzIiwid2VicGFjazovL3Rhc2stZXhjdXNpb25zLWFwaS8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlRG9tQVBJLmpzIiwid2VicGFjazovL3Rhc2stZXhjdXNpb25zLWFwaS8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlVGFnVHJhbnNmb3JtLmpzIiwid2VicGFjazovL3Rhc2stZXhjdXNpb25zLWFwaS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly90YXNrLWV4Y3VzaW9ucy1hcGkvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vdGFzay1leGN1c2lvbnMtYXBpL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly90YXNrLWV4Y3VzaW9ucy1hcGkvd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly90YXNrLWV4Y3VzaW9ucy1hcGkvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly90YXNrLWV4Y3VzaW9ucy1hcGkvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vdGFzay1leGN1c2lvbnMtYXBpL3dlYnBhY2svcnVudGltZS9qc29ucCBjaHVuayBsb2FkaW5nIiwid2VicGFjazovL3Rhc2stZXhjdXNpb25zLWFwaS93ZWJwYWNrL3J1bnRpbWUvbm9uY2UiLCJ3ZWJwYWNrOi8vdGFzay1leGN1c2lvbnMtYXBpLy4vc3JjL2Nzcy9yZXNldC5jc3M/MTUyYiIsIndlYnBhY2s6Ly90YXNrLWV4Y3VzaW9ucy1hcGkvLi9zcmMvY3NzL2NsaWVudC9mb250cy5jc3M/OGNlMCIsIndlYnBhY2s6Ly90YXNrLWV4Y3VzaW9ucy1hcGkvLi9zcmMvY3NzL2NsaWVudC9nbG9iYWwuY3NzPzQwMzgiLCJ3ZWJwYWNrOi8vdGFzay1leGN1c2lvbnMtYXBpLy4vc3JjL2Nzcy9jbGllbnQvbW9iaWxlLmNzcz9hOGUwIiwid2VicGFjazovL3Rhc2stZXhjdXNpb25zLWFwaS8uL3NyYy9jc3MvY2xpZW50L2Rlc2t0b3AuY3NzPzA5MzciLCJ3ZWJwYWNrOi8vdGFzay1leGN1c2lvbnMtYXBpLy4vc3JjL2Nzcy9jbGllbnQvYmFza2V0L2Jhc2tldC1mb250cy5jc3M/YzJiNSIsIndlYnBhY2s6Ly90YXNrLWV4Y3VzaW9ucy1hcGkvLi9zcmMvY3NzL2NsaWVudC9iYXNrZXQvYmFza2V0LmNzcz82ZGI5Iiwid2VicGFjazovL3Rhc2stZXhjdXNpb25zLWFwaS8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvdXRpbC9kaXN0L2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vdGFzay1leGN1c2lvbnMtYXBpLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9jb21wb25lbnQvZGlzdC9lc20vaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly90YXNrLWV4Y3VzaW9ucy1hcGkvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2xvZ2dlci9kaXN0L2VzbS9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL3Rhc2stZXhjdXNpb25zLWFwaS8uL25vZGVfbW9kdWxlcy9pZGIvYnVpbGQvd3JhcC1pZGItdmFsdWUuanMiLCJ3ZWJwYWNrOi8vdGFzay1leGN1c2lvbnMtYXBpLy4vbm9kZV9tb2R1bGVzL2lkYi9idWlsZC9pbmRleC5qcyIsIndlYnBhY2s6Ly90YXNrLWV4Y3VzaW9ucy1hcGkvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2FwcC9kaXN0L2VzbS9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL3Rhc2stZXhjdXNpb25zLWFwaS8uL25vZGVfbW9kdWxlcy9maXJlYmFzZS9hcHAvZGlzdC9lc20vaW5kZXguZXNtLmpzIiwid2VicGFjazovL3Rhc2stZXhjdXNpb25zLWFwaS8uL3NyYy9maXJlYmFzZUNvbmZpZy5qcyIsIndlYnBhY2s6Ly90YXNrLWV4Y3VzaW9ucy1hcGkvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2RhdGFiYXNlL2Rpc3QvaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly90YXNrLWV4Y3VzaW9ucy1hcGkvLi9zcmMvanMvRmlyZWJhc2VGZXRjaC5qcyIsIndlYnBhY2s6Ly90YXNrLWV4Y3VzaW9ucy1hcGkvLi9zcmMvanMvY2xpZW50LmpzIiwid2VicGFjazovL3Rhc2stZXhjdXNpb25zLWFwaS8uL3NyYy9qcy9WYWxpZGF0aW9uLmpzIiwid2VicGFjazovL3Rhc2stZXhjdXNpb25zLWFwaS8uL3NyYy9qcy9uYXZiYXJDU1MuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gSW1wb3J0c1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18gZnJvbSBcIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9zb3VyY2VNYXBzLmpzXCI7XG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fIGZyb20gXCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCI7XG52YXIgX19fQ1NTX0xPQURFUl9FWFBPUlRfX18gPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyk7XG4vLyBNb2R1bGVcbl9fX0NTU19MT0FERVJfRVhQT1JUX19fLnB1c2goW21vZHVsZS5pZCwgYC5iYXNrZXRfX2hlYWRlci0tbWVkaXVtIHtcbiAgZm9udC13ZWlnaHQ6IHZhcigtLWZvbnQtd2VpZ2h0LW1lZGl1bSk7XG59XG5cbi50b3RhbC1wcmljZV9fdmFsdWUge1xuICBmb250LXdlaWdodDogdmFyKC0tZm9udC13ZWlnaHQtc2VtaS1ib2xkKTtcbn1cblxuLmJhc2tldF9faGVhZGVyIHtcbiAgZm9udC1zaXplOiAxLjJyZW07XG59XG5cbi5iYXNrZXRfX2hlYWRlci0tbWFpbiB7XG4gIGZvbnQtc2l6ZTogMS42cmVtO1xufVxuXG4uYmFza2V0X19oZWFkZXItLW1lZGl1bSB7XG4gIGZvbnQtc2l6ZTogMS4zcmVtO1xufVxuXG4uaXRlbV9fdG90YWwtcHJpY2Uge1xuICBmb250LXNpemU6IDEuM3JlbTtcbn1cblxuLmJhc2tldF9faGVhZGVyLS1tb2JpbGUsXG4uaXRlbV9fcHJpY2VzIHtcbiAgZm9udC1zaXplOiAxcmVtO1xufVxuXG4ub3JkZXJfX2ZpZWxkLWlucHV0IHtcbiAgZm9udC1zaXplOiAxLjJyZW07XG59XG5cbkBtZWRpYSAobWluLXdpZHRoOiA2NTBweCkge1xuICAuYmFza2V0X19oZWFkZXIge1xuICAgIGZvbnQtc2l6ZTogMS4zcmVtO1xuICB9XG5cbiAgLmJhc2tldF9faGVhZGVyLS1tYWluIHtcbiAgICBmb250LXNpemU6IDJyZW07XG4gIH1cblxuICAuYmFza2V0X19oZWFkZXItLW1lZGl1bSB7XG4gICAgZm9udC1zaXplOiAxLjVyZW07XG4gIH1cblxuICAuaXRlbV9fdG90YWwtcHJpY2Uge1xuICAgIGZvbnQtc2l6ZTogMS41cmVtO1xuICB9XG5cbiAgLml0ZW1fX3ByaWNlcyB7XG4gICAgZm9udC1zaXplOiAxLjJyZW07XG4gIH1cblxuICAub3JkZXJfX2ZpZWxkLWlucHV0IHtcbiAgICBmb250LXNpemU6IDEuMnJlbTtcbiAgfVxufVxuXG5AbWVkaWEgKG1pbi13aWR0aDogOTUwcHgpIHtcblxuICAuYmFza2V0X19oZWFkZXIge1xuICAgIGZvbnQtc2l6ZTogMS4zcmVtO1xuICB9XG5cbiAgLmJhc2tldF9faGVhZGVyLS1tYWluIHtcbiAgICBmb250LXNpemU6IDIuNXJlbTtcbiAgfVxuXG4gIC5iYXNrZXRfX2hlYWRlci0tbWVkaXVtIHtcbiAgICBmb250LXNpemU6IDEuNXJlbTtcbiAgfVxuXG4gIC5vcmRlcl9fZmllbGQtaW5wdXQge1xuICAgIGZvbnQtc2l6ZTogMS4zcmVtO1xuICB9XG59YCwgXCJcIix7XCJ2ZXJzaW9uXCI6MyxcInNvdXJjZXNcIjpbXCJ3ZWJwYWNrOi8vLi9zcmMvY3NzL2NsaWVudC9iYXNrZXQvYmFza2V0LWZvbnRzLmNzc1wiXSxcIm5hbWVzXCI6W10sXCJtYXBwaW5nc1wiOlwiQUFBQTtFQUNFLHNDQUFzQztBQUN4Qzs7QUFFQTtFQUNFLHlDQUF5QztBQUMzQzs7QUFFQTtFQUNFLGlCQUFpQjtBQUNuQjs7QUFFQTtFQUNFLGlCQUFpQjtBQUNuQjs7QUFFQTtFQUNFLGlCQUFpQjtBQUNuQjs7QUFFQTtFQUNFLGlCQUFpQjtBQUNuQjs7QUFFQTs7RUFFRSxlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0U7SUFDRSxpQkFBaUI7RUFDbkI7O0VBRUE7SUFDRSxlQUFlO0VBQ2pCOztFQUVBO0lBQ0UsaUJBQWlCO0VBQ25COztFQUVBO0lBQ0UsaUJBQWlCO0VBQ25COztFQUVBO0lBQ0UsaUJBQWlCO0VBQ25COztFQUVBO0lBQ0UsaUJBQWlCO0VBQ25CO0FBQ0Y7O0FBRUE7O0VBRUU7SUFDRSxpQkFBaUI7RUFDbkI7O0VBRUE7SUFDRSxpQkFBaUI7RUFDbkI7O0VBRUE7SUFDRSxpQkFBaUI7RUFDbkI7O0VBRUE7SUFDRSxpQkFBaUI7RUFDbkI7QUFDRlwiLFwic291cmNlc0NvbnRlbnRcIjpbXCIuYmFza2V0X19oZWFkZXItLW1lZGl1bSB7XFxuICBmb250LXdlaWdodDogdmFyKC0tZm9udC13ZWlnaHQtbWVkaXVtKTtcXG59XFxuXFxuLnRvdGFsLXByaWNlX192YWx1ZSB7XFxuICBmb250LXdlaWdodDogdmFyKC0tZm9udC13ZWlnaHQtc2VtaS1ib2xkKTtcXG59XFxuXFxuLmJhc2tldF9faGVhZGVyIHtcXG4gIGZvbnQtc2l6ZTogMS4ycmVtO1xcbn1cXG5cXG4uYmFza2V0X19oZWFkZXItLW1haW4ge1xcbiAgZm9udC1zaXplOiAxLjZyZW07XFxufVxcblxcbi5iYXNrZXRfX2hlYWRlci0tbWVkaXVtIHtcXG4gIGZvbnQtc2l6ZTogMS4zcmVtO1xcbn1cXG5cXG4uaXRlbV9fdG90YWwtcHJpY2Uge1xcbiAgZm9udC1zaXplOiAxLjNyZW07XFxufVxcblxcbi5iYXNrZXRfX2hlYWRlci0tbW9iaWxlLFxcbi5pdGVtX19wcmljZXMge1xcbiAgZm9udC1zaXplOiAxcmVtO1xcbn1cXG5cXG4ub3JkZXJfX2ZpZWxkLWlucHV0IHtcXG4gIGZvbnQtc2l6ZTogMS4ycmVtO1xcbn1cXG5cXG5AbWVkaWEgKG1pbi13aWR0aDogNjUwcHgpIHtcXG4gIC5iYXNrZXRfX2hlYWRlciB7XFxuICAgIGZvbnQtc2l6ZTogMS4zcmVtO1xcbiAgfVxcblxcbiAgLmJhc2tldF9faGVhZGVyLS1tYWluIHtcXG4gICAgZm9udC1zaXplOiAycmVtO1xcbiAgfVxcblxcbiAgLmJhc2tldF9faGVhZGVyLS1tZWRpdW0ge1xcbiAgICBmb250LXNpemU6IDEuNXJlbTtcXG4gIH1cXG5cXG4gIC5pdGVtX190b3RhbC1wcmljZSB7XFxuICAgIGZvbnQtc2l6ZTogMS41cmVtO1xcbiAgfVxcblxcbiAgLml0ZW1fX3ByaWNlcyB7XFxuICAgIGZvbnQtc2l6ZTogMS4ycmVtO1xcbiAgfVxcblxcbiAgLm9yZGVyX19maWVsZC1pbnB1dCB7XFxuICAgIGZvbnQtc2l6ZTogMS4ycmVtO1xcbiAgfVxcbn1cXG5cXG5AbWVkaWEgKG1pbi13aWR0aDogOTUwcHgpIHtcXG5cXG4gIC5iYXNrZXRfX2hlYWRlciB7XFxuICAgIGZvbnQtc2l6ZTogMS4zcmVtO1xcbiAgfVxcblxcbiAgLmJhc2tldF9faGVhZGVyLS1tYWluIHtcXG4gICAgZm9udC1zaXplOiAyLjVyZW07XFxuICB9XFxuXFxuICAuYmFza2V0X19oZWFkZXItLW1lZGl1bSB7XFxuICAgIGZvbnQtc2l6ZTogMS41cmVtO1xcbiAgfVxcblxcbiAgLm9yZGVyX19maWVsZC1pbnB1dCB7XFxuICAgIGZvbnQtc2l6ZTogMS4zcmVtO1xcbiAgfVxcbn1cIl0sXCJzb3VyY2VSb290XCI6XCJcIn1dKTtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IF9fX0NTU19MT0FERVJfRVhQT1JUX19fO1xuIiwiLy8gSW1wb3J0c1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18gZnJvbSBcIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9zb3VyY2VNYXBzLmpzXCI7XG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fIGZyb20gXCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCI7XG5pbXBvcnQgX19fQ1NTX0xPQURFUl9HRVRfVVJMX0lNUE9SVF9fXyBmcm9tIFwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2dldFVybC5qc1wiO1xudmFyIF9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8wX19fID0gbmV3IFVSTChcIi4uLy4uLy4uL2Fzc2V0cy9kZWxldGVCdG4uc3ZnXCIsIGltcG9ydC5tZXRhLnVybCk7XG52YXIgX19fQ1NTX0xPQURFUl9FWFBPUlRfX18gPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyk7XG52YXIgX19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMF9fXyA9IF9fX0NTU19MT0FERVJfR0VUX1VSTF9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzBfX18pO1xuLy8gTW9kdWxlXG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5wdXNoKFttb2R1bGUuaWQsIGAuYmFza2V0IHtcbiAgcG9zaXRpb246IGZpeGVkO1xuICB6LWluZGV4OiA5OTg7XG4gIHRvcDogMDtcbiAgbGVmdDogMDtcbiAgZGlzcGxheTogbm9uZTtcbiAgYWxpZ24taXRlbXM6IHN0YXJ0O1xuICBnYXA6IDQwcHg7XG4gIGdyaWQtdGVtcGxhdGUtYXJlYXM6IFwiaXRlbXNcIlxuICAgIFwidG90YWwtcHJpY2VcIlxuICAgIFwib3JkZXJcIjtcbiAgcGFkZGluZy10b3A6IDE2OXB4O1xuICBwYWRkaW5nLWlubGluZTogMjBweDtcbiAgcGFkZGluZy1ib3R0b206IDQwcHg7XG4gIHdpZHRoOiAxMDB2dztcbiAgaGVpZ2h0OiAxMDB2aDtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvci1icmlnaHQpO1xuICBvdmVyZmxvdy15OiBhdXRvO1xufVxuXG4uYmFza2V0LS1vcGVuIHtcbiAgZGlzcGxheTogZ3JpZDtcbn1cblxuLmJhc2tldF9faXRlbXMsXG4udG90YWwtcHJpY2UsXG4uYmFza2V0X19vcmRlciB7XG4gIGJvcmRlci1yYWRpdXM6IDIwcHg7XG4gIHBhZGRpbmc6IDMwcHg7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXByaW1hcnktY29sb3IpO1xufVxuXG4uYmFza2V0X19pdGVtcyxcbi5pdGVtLWxpc3RfX2l0ZW0ge1xuICBkaXNwbGF5OiBncmlkO1xuICBnYXA6IDIwcHg7XG4gIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmciAwLjVmciAwLjRmcjtcbn1cblxuLmJhc2tldF9faXRlbXMge1xuICBncmlkLWFyZWE6IGl0ZW1zO1xuICBnYXA6IDMwcHg7XG59XG5cbi50b3RhbC1wcmljZSB7XG4gIGdyaWQtYXJlYTogdG90YWwtcHJpY2U7XG59XG5cbi5vcmRlciB7XG4gIGdyaWQtYXJlYTogb3JkZXI7XG59XG5cbi5iYXNrZXRfX2hlYWRlci0tbWFpbiB7XG4gIGdyaWQtY29sdW1uOiAxIC8gNTtcbiAgcGFkZGluZy1ib3R0b206IDEwcHg7XG4gIGJvcmRlci1ib3R0b206IDNweCBzb2xpZCB2YXIoLS1wcmltYXJ5LWNvbG9yLXN0cmlwZSk7XG59XG5cbi5iYXNrZXRfX2hlYWRlci0tcGFkZGluZy1sZWZ0IHtcbiAgcGFkZGluZy1sZWZ0OiAyMHB4O1xufVxuXG4uYmFza2V0X19vcmRlcj4ub3JkZXJfX2ZpZWxkLS1zdWJtaXQge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG5cbi5iYXNrZXRfX29yZGVyPio6bm90KDpsYXN0LWNoaWxkKSB7XG4gIG1hcmdpbi1ib3R0b206IDEwcHg7XG59XG5cbi5vcmRlcl9fZmllbGQtZXJyb3Ige1xuICBjb2xvcjogcmVkO1xufVxuXG4ub3JkZXJfX2ZpZWxkLWlucHV0IHtcbiAgbWFyZ2luLXRvcDogMTBweDtcbiAgYm9yZGVyOiBub25lO1xuICBjb2xvcjogd2hpdGU7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXByaW1hcnktY29sb3ItYnJpZ2h0KTtcbn1cblxuLm9yZGVyX19maWVsZC1zdWJtaXQge1xuICBwYWRkaW5nOiAyMHB4O1xuICBtYXJnaW4tdG9wOiAzMHB4O1xuICB3aWR0aDogMjAwcHg7XG4gIGJvcmRlcjogNHB4IHNvbGlkIHdoaXRlO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zZWNvbmRhcnktY29sb3IpO1xufVxuXG4ub3JkZXJfX2ZpZWxkLW5hbWUge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBnYXA6IDVweDtcbn1cblxuLml0ZW1zLWxpc3Qge1xuICBncmlkLWNvbHVtbjogMSAvIDU7XG59XG5cbi5pdGVtLWxpc3RfX2l0ZW0ge1xuICBncmlkLWNvbHVtbjogMSAvIDU7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIHBhZGRpbmc6IDMwcHggMjBweDtcbiAgYm9yZGVyOiAzcHggc29saWQgdmFyKC0tcHJpbWFyeS1jb2xvci1zdHJpcGUpO1xuICBib3JkZXItcmFkaXVzOiAyMHB4O1xufVxuXG4uaXRlbV9fYnRuLXJlbW92ZSB7XG4gIGNvbnRlbnQ6IHVybCgke19fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzBfX199KTtcbiAgbWFyZ2luLXRvcDogMzBweDtcbiAgbWFyZ2luLWlubGluZTogYXV0bztcbiAgcGFkZGluZzogMTBweDtcbiAgYm9yZGVyLXJhZGl1czogMTAwdnc7XG4gIGJvcmRlcjogM3B4IHNvbGlkIHZhcigtLXByaW1hcnktY29sb3Itc3RyaXBlKTtcbn1cblxuLml0ZW1fX3ByaWNlcyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGdhcDogMTBweDtcbn1cblxuLmJhc2tldF9faGVhZGVyLS10YWJsZXQge1xuICBkaXNwbGF5OiBub25lO1xufVxuXG4uYmFza2V0X19oZWFkZXItLW1vYmlsZSB7XG4gIHBhZGRpbmctYm90dG9tOiAxMHB4O1xuICBib3JkZXItYm90dG9tOiAzcHggc29saWQgdmFyKC0tcHJpbWFyeS1jb2xvci1zdHJpcGUpO1xufVxuXG4uYmFza2V0X19oZWFkZXItLW1vYmlsZTpub3QoOmZpcnN0LWNoaWxkKSB7XG4gIG1hcmdpbi10b3A6IDMwcHg7XG59XG5cbi5pdGVtLWxpc3RfX2l0ZW0ge1xuICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmcjtcbn1cblxuLmJhc2tldF9faGVhZGVyLS1tZWRpdW0sXG4uaXRlbV9fcHJpY2VzLFxuLml0ZW1fX3RvdGFsLXByaWNlIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG5AbWVkaWEgKG1heC13aWR0aDogMzYwcHgpIHtcblxuICAuYmFza2V0LFxuICAuYmFza2V0X19pdGVtcyxcbiAgLnRvdGFsLXByaWNlLFxuICAuYmFza2V0X19vcmRlciB7XG4gICAgcGFkZGluZy1pbmxpbmU6IDEwcHg7XG4gIH1cbn1cblxuQG1lZGlhIChtaW4td2lkdGg6IDY1MHB4KSB7XG5cbiAgLmJhc2tldCB7XG4gICAgcGFkZGluZy1pbmxpbmU6IDQwcHg7XG4gIH1cbn1cblxuQG1lZGlhIChtaW4td2lkdGg6IDk1MHB4KSB7XG5cbiAgLmJhc2tldF9faGVhZGVyLS1tZWRpdW0sXG4gIC5pdGVtX19wcmljZXMsXG4gIC5pdGVtX190b3RhbC1wcmljZSB7XG4gICAgdGV4dC1hbGlnbjogdW5zZXQ7XG4gIH1cblxuICAuaXRlbV9fYnRuLXJlbW92ZSB7XG4gICAgbWFyZ2luLXRvcDogdW5zZXQ7XG4gIH1cblxuICAuYmFza2V0X19oZWFkZXItLW1vYmlsZSB7XG4gICAgZGlzcGxheTogbm9uZTtcbiAgfVxuXG4gIC5iYXNrZXRfX2hlYWRlci0tdGFibGV0IHtcbiAgICBkaXNwbGF5OiBpbml0aWFsO1xuICB9XG5cbiAgLmJhc2tldCB7XG4gICAgZ3JpZC10ZW1wbGF0ZS1hcmVhczogXCJpdGVtcyBpdGVtc1wiXG4gICAgICBcInRvdGFsLXByaWNlIG9yZGVyXCI7XG4gICAgZ3JpZC10ZW1wbGF0ZS1yb3dzOiAxZnIgMmZyO1xuICAgIHBhZGRpbmctaW5saW5lOiA2MHB4O1xuICB9XG5cbiAgLml0ZW0tbGlzdF9faXRlbSB7XG4gICAganVzdGlmeS1pdGVtczogc3RhcnQ7XG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyIDAuNWZyIDAuNGZyO1xuICB9XG5cbn1cblxuQG1lZGlhIChtaW4td2lkdGg6IDEyMDBweCkge1xuICAuYmFza2V0IHtcbiAgICBncmlkLXRlbXBsYXRlLWFyZWFzOlxuICAgICAgXCJpdGVtcyB0b3RhbC1wcmljZVwiXG4gICAgICBcIml0ZW1zIG9yZGVyXCI7XG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMC41ZnI7XG4gICAgZ3JpZC10ZW1wbGF0ZS1yb3dzOiBtYXgtY29udGVudDtcbiAgfVxufWAsIFwiXCIse1widmVyc2lvblwiOjMsXCJzb3VyY2VzXCI6W1wid2VicGFjazovLy4vc3JjL2Nzcy9jbGllbnQvYmFza2V0L2Jhc2tldC5jc3NcIl0sXCJuYW1lc1wiOltdLFwibWFwcGluZ3NcIjpcIkFBQUE7RUFDRSxlQUFlO0VBQ2YsWUFBWTtFQUNaLE1BQU07RUFDTixPQUFPO0VBQ1AsYUFBYTtFQUNiLGtCQUFrQjtFQUNsQixTQUFTO0VBQ1Q7O1dBRVM7RUFDVCxrQkFBa0I7RUFDbEIsb0JBQW9CO0VBQ3BCLG9CQUFvQjtFQUNwQixZQUFZO0VBQ1osYUFBYTtFQUNiLDZDQUE2QztFQUM3QyxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxhQUFhO0FBQ2Y7O0FBRUE7OztFQUdFLG1CQUFtQjtFQUNuQixhQUFhO0VBQ2Isc0NBQXNDO0FBQ3hDOztBQUVBOztFQUVFLGFBQWE7RUFDYixTQUFTO0VBQ1QsMENBQTBDO0FBQzVDOztBQUVBO0VBQ0UsZ0JBQWdCO0VBQ2hCLFNBQVM7QUFDWDs7QUFFQTtFQUNFLHNCQUFzQjtBQUN4Qjs7QUFFQTtFQUNFLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixvQkFBb0I7RUFDcEIsb0RBQW9EO0FBQ3REOztBQUVBO0VBQ0Usa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0Usa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsVUFBVTtBQUNaOztBQUVBO0VBQ0UsZ0JBQWdCO0VBQ2hCLFlBQVk7RUFDWixZQUFZO0VBQ1osNkNBQTZDO0FBQy9DOztBQUVBO0VBQ0UsYUFBYTtFQUNiLGdCQUFnQjtFQUNoQixZQUFZO0VBQ1osdUJBQXVCO0VBQ3ZCLHdDQUF3QztBQUMxQzs7QUFFQTtFQUNFLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsUUFBUTtBQUNWOztBQUVBO0VBQ0Usa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLG1CQUFtQjtFQUNuQixrQkFBa0I7RUFDbEIsNkNBQTZDO0VBQzdDLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLGdEQUEyQztFQUMzQyxnQkFBZ0I7RUFDaEIsbUJBQW1CO0VBQ25CLGFBQWE7RUFDYixvQkFBb0I7RUFDcEIsNkNBQTZDO0FBQy9DOztBQUVBO0VBQ0UsYUFBYTtFQUNiLHNCQUFzQjtFQUN0QixTQUFTO0FBQ1g7O0FBRUE7RUFDRSxhQUFhO0FBQ2Y7O0FBRUE7RUFDRSxvQkFBb0I7RUFDcEIsb0RBQW9EO0FBQ3REOztBQUVBO0VBQ0UsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UsMEJBQTBCO0FBQzVCOztBQUVBOzs7RUFHRSxrQkFBa0I7QUFDcEI7O0FBRUE7O0VBRUU7Ozs7SUFJRSxvQkFBb0I7RUFDdEI7QUFDRjs7QUFFQTs7RUFFRTtJQUNFLG9CQUFvQjtFQUN0QjtBQUNGOztBQUVBOztFQUVFOzs7SUFHRSxpQkFBaUI7RUFDbkI7O0VBRUE7SUFDRSxpQkFBaUI7RUFDbkI7O0VBRUE7SUFDRSxhQUFhO0VBQ2Y7O0VBRUE7SUFDRSxnQkFBZ0I7RUFDbEI7O0VBRUE7SUFDRTt5QkFDcUI7SUFDckIsMkJBQTJCO0lBQzNCLG9CQUFvQjtFQUN0Qjs7RUFFQTtJQUNFLG9CQUFvQjtJQUNwQiwwQ0FBMEM7RUFDNUM7O0FBRUY7O0FBRUE7RUFDRTtJQUNFOzttQkFFZTtJQUNmLGdDQUFnQztJQUNoQywrQkFBK0I7RUFDakM7QUFDRlwiLFwic291cmNlc0NvbnRlbnRcIjpbXCIuYmFza2V0IHtcXG4gIHBvc2l0aW9uOiBmaXhlZDtcXG4gIHotaW5kZXg6IDk5ODtcXG4gIHRvcDogMDtcXG4gIGxlZnQ6IDA7XFxuICBkaXNwbGF5OiBub25lO1xcbiAgYWxpZ24taXRlbXM6IHN0YXJ0O1xcbiAgZ2FwOiA0MHB4O1xcbiAgZ3JpZC10ZW1wbGF0ZS1hcmVhczogXFxcIml0ZW1zXFxcIlxcbiAgICBcXFwidG90YWwtcHJpY2VcXFwiXFxuICAgIFxcXCJvcmRlclxcXCI7XFxuICBwYWRkaW5nLXRvcDogMTY5cHg7XFxuICBwYWRkaW5nLWlubGluZTogMjBweDtcXG4gIHBhZGRpbmctYm90dG9tOiA0MHB4O1xcbiAgd2lkdGg6IDEwMHZ3O1xcbiAgaGVpZ2h0OiAxMDB2aDtcXG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXByaW1hcnktY29sb3ItYnJpZ2h0KTtcXG4gIG92ZXJmbG93LXk6IGF1dG87XFxufVxcblxcbi5iYXNrZXQtLW9wZW4ge1xcbiAgZGlzcGxheTogZ3JpZDtcXG59XFxuXFxuLmJhc2tldF9faXRlbXMsXFxuLnRvdGFsLXByaWNlLFxcbi5iYXNrZXRfX29yZGVyIHtcXG4gIGJvcmRlci1yYWRpdXM6IDIwcHg7XFxuICBwYWRkaW5nOiAzMHB4O1xcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvcik7XFxufVxcblxcbi5iYXNrZXRfX2l0ZW1zLFxcbi5pdGVtLWxpc3RfX2l0ZW0ge1xcbiAgZGlzcGxheTogZ3JpZDtcXG4gIGdhcDogMjBweDtcXG4gIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmciAwLjVmciAwLjRmcjtcXG59XFxuXFxuLmJhc2tldF9faXRlbXMge1xcbiAgZ3JpZC1hcmVhOiBpdGVtcztcXG4gIGdhcDogMzBweDtcXG59XFxuXFxuLnRvdGFsLXByaWNlIHtcXG4gIGdyaWQtYXJlYTogdG90YWwtcHJpY2U7XFxufVxcblxcbi5vcmRlciB7XFxuICBncmlkLWFyZWE6IG9yZGVyO1xcbn1cXG5cXG4uYmFza2V0X19oZWFkZXItLW1haW4ge1xcbiAgZ3JpZC1jb2x1bW46IDEgLyA1O1xcbiAgcGFkZGluZy1ib3R0b206IDEwcHg7XFxuICBib3JkZXItYm90dG9tOiAzcHggc29saWQgdmFyKC0tcHJpbWFyeS1jb2xvci1zdHJpcGUpO1xcbn1cXG5cXG4uYmFza2V0X19oZWFkZXItLXBhZGRpbmctbGVmdCB7XFxuICBwYWRkaW5nLWxlZnQ6IDIwcHg7XFxufVxcblxcbi5iYXNrZXRfX29yZGVyPi5vcmRlcl9fZmllbGQtLXN1Ym1pdCB7XFxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxufVxcblxcbi5iYXNrZXRfX29yZGVyPio6bm90KDpsYXN0LWNoaWxkKSB7XFxuICBtYXJnaW4tYm90dG9tOiAxMHB4O1xcbn1cXG5cXG4ub3JkZXJfX2ZpZWxkLWVycm9yIHtcXG4gIGNvbG9yOiByZWQ7XFxufVxcblxcbi5vcmRlcl9fZmllbGQtaW5wdXQge1xcbiAgbWFyZ2luLXRvcDogMTBweDtcXG4gIGJvcmRlcjogbm9uZTtcXG4gIGNvbG9yOiB3aGl0ZTtcXG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXByaW1hcnktY29sb3ItYnJpZ2h0KTtcXG59XFxuXFxuLm9yZGVyX19maWVsZC1zdWJtaXQge1xcbiAgcGFkZGluZzogMjBweDtcXG4gIG1hcmdpbi10b3A6IDMwcHg7XFxuICB3aWR0aDogMjAwcHg7XFxuICBib3JkZXI6IDRweCBzb2xpZCB3aGl0ZTtcXG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXNlY29uZGFyeS1jb2xvcik7XFxufVxcblxcbi5vcmRlcl9fZmllbGQtbmFtZSB7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXG4gIGdhcDogNXB4O1xcbn1cXG5cXG4uaXRlbXMtbGlzdCB7XFxuICBncmlkLWNvbHVtbjogMSAvIDU7XFxufVxcblxcbi5pdGVtLWxpc3RfX2l0ZW0ge1xcbiAgZ3JpZC1jb2x1bW46IDEgLyA1O1xcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXG4gIHBhZGRpbmc6IDMwcHggMjBweDtcXG4gIGJvcmRlcjogM3B4IHNvbGlkIHZhcigtLXByaW1hcnktY29sb3Itc3RyaXBlKTtcXG4gIGJvcmRlci1yYWRpdXM6IDIwcHg7XFxufVxcblxcbi5pdGVtX19idG4tcmVtb3ZlIHtcXG4gIGNvbnRlbnQ6IHVybCguLi8uLi8uLi9hc3NldHMvZGVsZXRlQnRuLnN2Zyk7XFxuICBtYXJnaW4tdG9wOiAzMHB4O1xcbiAgbWFyZ2luLWlubGluZTogYXV0bztcXG4gIHBhZGRpbmc6IDEwcHg7XFxuICBib3JkZXItcmFkaXVzOiAxMDB2dztcXG4gIGJvcmRlcjogM3B4IHNvbGlkIHZhcigtLXByaW1hcnktY29sb3Itc3RyaXBlKTtcXG59XFxuXFxuLml0ZW1fX3ByaWNlcyB7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXG4gIGdhcDogMTBweDtcXG59XFxuXFxuLmJhc2tldF9faGVhZGVyLS10YWJsZXQge1xcbiAgZGlzcGxheTogbm9uZTtcXG59XFxuXFxuLmJhc2tldF9faGVhZGVyLS1tb2JpbGUge1xcbiAgcGFkZGluZy1ib3R0b206IDEwcHg7XFxuICBib3JkZXItYm90dG9tOiAzcHggc29saWQgdmFyKC0tcHJpbWFyeS1jb2xvci1zdHJpcGUpO1xcbn1cXG5cXG4uYmFza2V0X19oZWFkZXItLW1vYmlsZTpub3QoOmZpcnN0LWNoaWxkKSB7XFxuICBtYXJnaW4tdG9wOiAzMHB4O1xcbn1cXG5cXG4uaXRlbS1saXN0X19pdGVtIHtcXG4gIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyO1xcbn1cXG5cXG4uYmFza2V0X19oZWFkZXItLW1lZGl1bSxcXG4uaXRlbV9fcHJpY2VzLFxcbi5pdGVtX190b3RhbC1wcmljZSB7XFxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxufVxcblxcbkBtZWRpYSAobWF4LXdpZHRoOiAzNjBweCkge1xcblxcbiAgLmJhc2tldCxcXG4gIC5iYXNrZXRfX2l0ZW1zLFxcbiAgLnRvdGFsLXByaWNlLFxcbiAgLmJhc2tldF9fb3JkZXIge1xcbiAgICBwYWRkaW5nLWlubGluZTogMTBweDtcXG4gIH1cXG59XFxuXFxuQG1lZGlhIChtaW4td2lkdGg6IDY1MHB4KSB7XFxuXFxuICAuYmFza2V0IHtcXG4gICAgcGFkZGluZy1pbmxpbmU6IDQwcHg7XFxuICB9XFxufVxcblxcbkBtZWRpYSAobWluLXdpZHRoOiA5NTBweCkge1xcblxcbiAgLmJhc2tldF9faGVhZGVyLS1tZWRpdW0sXFxuICAuaXRlbV9fcHJpY2VzLFxcbiAgLml0ZW1fX3RvdGFsLXByaWNlIHtcXG4gICAgdGV4dC1hbGlnbjogdW5zZXQ7XFxuICB9XFxuXFxuICAuaXRlbV9fYnRuLXJlbW92ZSB7XFxuICAgIG1hcmdpbi10b3A6IHVuc2V0O1xcbiAgfVxcblxcbiAgLmJhc2tldF9faGVhZGVyLS1tb2JpbGUge1xcbiAgICBkaXNwbGF5OiBub25lO1xcbiAgfVxcblxcbiAgLmJhc2tldF9faGVhZGVyLS10YWJsZXQge1xcbiAgICBkaXNwbGF5OiBpbml0aWFsO1xcbiAgfVxcblxcbiAgLmJhc2tldCB7XFxuICAgIGdyaWQtdGVtcGxhdGUtYXJlYXM6IFxcXCJpdGVtcyBpdGVtc1xcXCJcXG4gICAgICBcXFwidG90YWwtcHJpY2Ugb3JkZXJcXFwiO1xcbiAgICBncmlkLXRlbXBsYXRlLXJvd3M6IDFmciAyZnI7XFxuICAgIHBhZGRpbmctaW5saW5lOiA2MHB4O1xcbiAgfVxcblxcbiAgLml0ZW0tbGlzdF9faXRlbSB7XFxuICAgIGp1c3RpZnktaXRlbXM6IHN0YXJ0O1xcbiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnIgMC41ZnIgMC40ZnI7XFxuICB9XFxuXFxufVxcblxcbkBtZWRpYSAobWluLXdpZHRoOiAxMjAwcHgpIHtcXG4gIC5iYXNrZXQge1xcbiAgICBncmlkLXRlbXBsYXRlLWFyZWFzOlxcbiAgICAgIFxcXCJpdGVtcyB0b3RhbC1wcmljZVxcXCJcXG4gICAgICBcXFwiaXRlbXMgb3JkZXJcXFwiO1xcbiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAwLjVmcjtcXG4gICAgZ3JpZC10ZW1wbGF0ZS1yb3dzOiBtYXgtY29udGVudDtcXG4gIH1cXG59XCJdLFwic291cmNlUm9vdFwiOlwiXCJ9XSk7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBfX19DU1NfTE9BREVSX0VYUE9SVF9fXztcbiIsIi8vIEltcG9ydHNcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fIGZyb20gXCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvc291cmNlTWFwcy5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyBmcm9tIFwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiO1xudmFyIF9fX0NTU19MT0FERVJfRVhQT1JUX19fID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18pO1xuLy8gTW9kdWxlXG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5wdXNoKFttb2R1bGUuaWQsIGBAbWVkaWEgKG1pbi13aWR0aDogMTIwMHB4KSB7XG5cbiAgLm5hdmJhciB7XG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1ldmVubHk7XG4gIH1cblxuICAubmF2YmFyX19jb250YWluZXIge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gIH1cblxuICAubmF2YmFyX19pdGVtIHtcbiAgICBwYWRkaW5nOiAxNXB4IDI1cHg7XG4gIH1cblxuICAubmF2YmFyX19pdGVtOmhvdmVyIHtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzAxMUUzRjtcbiAgfVxuXG4gIC53cmFwcGVyLS1tYWluOjpiZWZvcmUge1xuICAgIGNvbnRlbnQ6ICcnO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDExMHB4O1xuICAgIGxlZnQ6IDh2dztcbiAgICByaWdodDogOHZ3O1xuICAgIGJvcmRlci1ib3R0b206IDNweCBzb2xpZCB2YXIoLS1wcmltYXJ5LWNvbG9yLXN0cmlwZSk7XG4gIH1cblxuICAubWFpbnBhZ2Uge1xuICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyO1xuICAgIGp1c3RpZnktaXRlbXM6IGNlbnRlcjtcbiAgICBnYXA6IDV2dztcbiAgICBwYWRkaW5nLWlubGluZTogNXZ3O1xuICAgIG1hcmdpbi10b3A6IDYwcHg7XG4gICAgbWFyZ2luLWJvdHRvbTogN3ZoO1xuICB9XG5cbiAgLm1haW5wYWdlX19jb250YWluZXIge1xuICAgIGp1c3RpZnktc2VsZjogZW5kO1xuICB9XG5cbiAgLm1haW5wYWdlX19jb250YWluZXItLWltZyB7XG4gICAganVzdGlmeS1zZWxmOiBzdGFydDtcbiAgfVxuXG4gIC5tYWlucGFnZV9faW1nIHtcbiAgICBtaW4td2lkdGg6IDI1MHB4O1xuICAgIG1pbi1oZWlnaHQ6IDQwMHB4O1xuICAgIG1heC1oZWlnaHQ6IDYwMHB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDYwcHg7XG4gIH1cblxuICAuaGVhZGVyLS1wYW5lbCB7XG4gICAgZGlzcGxheTogYmxvY2s7XG4gICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICBib3JkZXItYm90dG9tOiAzcHggc29saWQgdmFyKC0tcHJpbWFyeS1jb2xvci1zdHJpcGUpO1xuICB9XG5cbiAgLnBhbmVsIHtcbiAgICBwYWRkaW5nOiAwIDYwcHg7XG4gIH1cblxuICAucGFuZWxfX2NvbnRhaW5lciB7XG4gICAgdGV4dC1hbGlnbjogaW5pdGlhbDtcbiAgfVxuXG4gIC5wYW5lbF9fZXhjdXJzaW9ucyB7XG4gICAganVzdGlmeS1jb250ZW50OiBpbml0aWFsO1xuICAgIGdhcDogNDBweDtcbiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpdCwgMzMwcHgpO1xuICAgIHBhZGRpbmctaW5saW5lOiB1bnNldDtcbiAgfVxuXG4gIC5uYXZiYXJfX2J0bixcbiAgLmhlYWRlci0tbG9nbzo6YWZ0ZXIsXG4gIC5oZWFkZXItLXBhbmVsOjphZnRlciB7XG4gICAgZGlzcGxheTogbm9uZTtcbiAgfVxuXG4gIC5iYXNrZXQtYnRuX193cmFwcGVyIHtcbiAgICB0b3A6IDQwcHg7XG4gICAgcmlnaHQ6IGNhbGMoMTBweCArIDJ2dyk7XG4gIH1cbn1gLCBcIlwiLHtcInZlcnNpb25cIjozLFwic291cmNlc1wiOltcIndlYnBhY2s6Ly8uL3NyYy9jc3MvY2xpZW50L2Rlc2t0b3AuY3NzXCJdLFwibmFtZXNcIjpbXSxcIm1hcHBpbmdzXCI6XCJBQUFBOztFQUVFO0lBQ0UsNkJBQTZCO0VBQy9COztFQUVBO0lBQ0UsYUFBYTtFQUNmOztFQUVBO0lBQ0Usa0JBQWtCO0VBQ3BCOztFQUVBO0lBQ0UsZUFBZTtJQUNmLHlCQUF5QjtFQUMzQjs7RUFFQTtJQUNFLFdBQVc7SUFDWCxrQkFBa0I7SUFDbEIsVUFBVTtJQUNWLFNBQVM7SUFDVCxVQUFVO0lBQ1Ysb0RBQW9EO0VBQ3REOztFQUVBO0lBQ0UsYUFBYTtJQUNiLDhCQUE4QjtJQUM5QixxQkFBcUI7SUFDckIsUUFBUTtJQUNSLG1CQUFtQjtJQUNuQixnQkFBZ0I7SUFDaEIsa0JBQWtCO0VBQ3BCOztFQUVBO0lBQ0UsaUJBQWlCO0VBQ25COztFQUVBO0lBQ0UsbUJBQW1CO0VBQ3JCOztFQUVBO0lBQ0UsZ0JBQWdCO0lBQ2hCLGlCQUFpQjtJQUNqQixpQkFBaUI7SUFDakIsbUJBQW1CO0VBQ3JCOztFQUVBO0lBQ0UsY0FBYztJQUNkLG1CQUFtQjtJQUNuQixvREFBb0Q7RUFDdEQ7O0VBRUE7SUFDRSxlQUFlO0VBQ2pCOztFQUVBO0lBQ0UsbUJBQW1CO0VBQ3JCOztFQUVBO0lBQ0Usd0JBQXdCO0lBQ3hCLFNBQVM7SUFDVCw4Q0FBOEM7SUFDOUMscUJBQXFCO0VBQ3ZCOztFQUVBOzs7SUFHRSxhQUFhO0VBQ2Y7O0VBRUE7SUFDRSxTQUFTO0lBQ1QsdUJBQXVCO0VBQ3pCO0FBQ0ZcIixcInNvdXJjZXNDb250ZW50XCI6W1wiQG1lZGlhIChtaW4td2lkdGg6IDEyMDBweCkge1xcblxcbiAgLm5hdmJhciB7XFxuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtZXZlbmx5O1xcbiAgfVxcblxcbiAgLm5hdmJhcl9fY29udGFpbmVyIHtcXG4gICAgZGlzcGxheTogZmxleDtcXG4gIH1cXG5cXG4gIC5uYXZiYXJfX2l0ZW0ge1xcbiAgICBwYWRkaW5nOiAxNXB4IDI1cHg7XFxuICB9XFxuXFxuICAubmF2YmFyX19pdGVtOmhvdmVyIHtcXG4gICAgY3Vyc29yOiBwb2ludGVyO1xcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDExRTNGO1xcbiAgfVxcblxcbiAgLndyYXBwZXItLW1haW46OmJlZm9yZSB7XFxuICAgIGNvbnRlbnQ6ICcnO1xcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICAgIHRvcDogMTEwcHg7XFxuICAgIGxlZnQ6IDh2dztcXG4gICAgcmlnaHQ6IDh2dztcXG4gICAgYm9yZGVyLWJvdHRvbTogM3B4IHNvbGlkIHZhcigtLXByaW1hcnktY29sb3Itc3RyaXBlKTtcXG4gIH1cXG5cXG4gIC5tYWlucGFnZSB7XFxuICAgIGRpc3BsYXk6IGdyaWQ7XFxuICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjtcXG4gICAganVzdGlmeS1pdGVtczogY2VudGVyO1xcbiAgICBnYXA6IDV2dztcXG4gICAgcGFkZGluZy1pbmxpbmU6IDV2dztcXG4gICAgbWFyZ2luLXRvcDogNjBweDtcXG4gICAgbWFyZ2luLWJvdHRvbTogN3ZoO1xcbiAgfVxcblxcbiAgLm1haW5wYWdlX19jb250YWluZXIge1xcbiAgICBqdXN0aWZ5LXNlbGY6IGVuZDtcXG4gIH1cXG5cXG4gIC5tYWlucGFnZV9fY29udGFpbmVyLS1pbWcge1xcbiAgICBqdXN0aWZ5LXNlbGY6IHN0YXJ0O1xcbiAgfVxcblxcbiAgLm1haW5wYWdlX19pbWcge1xcbiAgICBtaW4td2lkdGg6IDI1MHB4O1xcbiAgICBtaW4taGVpZ2h0OiA0MDBweDtcXG4gICAgbWF4LWhlaWdodDogNjAwcHg7XFxuICAgIGJvcmRlci1yYWRpdXM6IDYwcHg7XFxuICB9XFxuXFxuICAuaGVhZGVyLS1wYW5lbCB7XFxuICAgIGRpc3BsYXk6IGJsb2NrO1xcbiAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xcbiAgICBib3JkZXItYm90dG9tOiAzcHggc29saWQgdmFyKC0tcHJpbWFyeS1jb2xvci1zdHJpcGUpO1xcbiAgfVxcblxcbiAgLnBhbmVsIHtcXG4gICAgcGFkZGluZzogMCA2MHB4O1xcbiAgfVxcblxcbiAgLnBhbmVsX19jb250YWluZXIge1xcbiAgICB0ZXh0LWFsaWduOiBpbml0aWFsO1xcbiAgfVxcblxcbiAgLnBhbmVsX19leGN1cnNpb25zIHtcXG4gICAganVzdGlmeS1jb250ZW50OiBpbml0aWFsO1xcbiAgICBnYXA6IDQwcHg7XFxuICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZml0LCAzMzBweCk7XFxuICAgIHBhZGRpbmctaW5saW5lOiB1bnNldDtcXG4gIH1cXG5cXG4gIC5uYXZiYXJfX2J0bixcXG4gIC5oZWFkZXItLWxvZ286OmFmdGVyLFxcbiAgLmhlYWRlci0tcGFuZWw6OmFmdGVyIHtcXG4gICAgZGlzcGxheTogbm9uZTtcXG4gIH1cXG5cXG4gIC5iYXNrZXQtYnRuX193cmFwcGVyIHtcXG4gICAgdG9wOiA0MHB4O1xcbiAgICByaWdodDogY2FsYygxMHB4ICsgMnZ3KTtcXG4gIH1cXG59XCJdLFwic291cmNlUm9vdFwiOlwiXCJ9XSk7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBfX19DU1NfTE9BREVSX0VYUE9SVF9fXztcbiIsIi8vIEltcG9ydHNcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fIGZyb20gXCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvc291cmNlTWFwcy5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyBmcm9tIFwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfR0VUX1VSTF9JTVBPUlRfX18gZnJvbSBcIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9nZXRVcmwuanNcIjtcbnZhciBfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMF9fXyA9IG5ldyBVUkwoXCIuLi8uLi9mb250cy9Nb250c2VycmF0L01vbnRzZXJyYXQtUmVndWxhci50dGZcIiwgaW1wb3J0Lm1ldGEudXJsKTtcbnZhciBfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMV9fXyA9IG5ldyBVUkwoXCIuLi8uLi9mb250cy9Nb250c2VycmF0L01vbnRzZXJyYXQtTWVkaXVtLnR0ZlwiLCBpbXBvcnQubWV0YS51cmwpO1xudmFyIF9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8yX19fID0gbmV3IFVSTChcIi4uLy4uL2ZvbnRzL01vbnRzZXJyYXQvTW9udHNlcnJhdC1TZW1pQm9sZC50dGZcIiwgaW1wb3J0Lm1ldGEudXJsKTtcbnZhciBfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfM19fXyA9IG5ldyBVUkwoXCIuLi8uLi9mb250cy9Nb250c2VycmF0L01vbnRzZXJyYXQtQm9sZC50dGZcIiwgaW1wb3J0Lm1ldGEudXJsKTtcbnZhciBfX19DU1NfTE9BREVSX0VYUE9SVF9fXyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fKTtcbnZhciBfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF8wX19fID0gX19fQ1NTX0xPQURFUl9HRVRfVVJMX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMF9fXyk7XG52YXIgX19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMV9fXyA9IF9fX0NTU19MT0FERVJfR0VUX1VSTF9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzFfX18pO1xudmFyIF9fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzJfX18gPSBfX19DU1NfTE9BREVSX0dFVF9VUkxfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8yX19fKTtcbnZhciBfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF8zX19fID0gX19fQ1NTX0xPQURFUl9HRVRfVVJMX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfM19fXyk7XG4vLyBNb2R1bGVcbl9fX0NTU19MT0FERVJfRVhQT1JUX19fLnB1c2goW21vZHVsZS5pZCwgYDpyb290IHtcbiAgZm9udC1zaXplOiAxNnB4O1xuICAtLWZvbnQtd2VpZ2h0LW5vcm1hbDogNDAwO1xuICAtLWZvbnQtd2VpZ2h0LW1lZGl1bTogNTAwO1xuICAtLWZvbnQtd2VpZ2h0LXNlbWktYm9sZDogNjAwO1xuICAtLWZvbnQtd2VpZ2h0LWJvbGQ6IDcwMDtcbn1cblxuQGZvbnQtZmFjZSB7XG4gIGZvbnQtZmFtaWx5OiAnTW9udHNlcnJhdCc7XG4gIHNyYzogdXJsKCR7X19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMF9fX30pO1xuICBmb250LXdlaWdodDogNDAwO1xufVxuXG5AZm9udC1mYWNlIHtcbiAgZm9udC1mYW1pbHk6ICdNb250c2VycmF0JztcbiAgc3JjOiB1cmwoJHtfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF8xX19ffSk7XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG59XG5cbkBmb250LWZhY2Uge1xuICBmb250LWZhbWlseTogJ01vbnRzZXJyYXQnO1xuICBzcmM6IHVybCgke19fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzJfX199KTtcbiAgZm9udC13ZWlnaHQ6IDYwMDtcbn1cblxuQGZvbnQtZmFjZSB7XG4gIGZvbnQtZmFtaWx5OiAnTW9udHNlcnJhdCc7XG4gIHNyYzogdXJsKCR7X19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfM19fX30pO1xuICBmb250LXdlaWdodDogNzAwO1xufVxuXG4qIHtcbiAgZm9udC1mYW1pbHk6ICdNb250c2VycmF0JztcbiAgZm9udC13ZWlnaHQ6IHZhcigtLWZvbnQtd2VpZ2h0LW5vcm1hbCk7XG4gIGNvbG9yOiB3aGl0ZTtcbn1cblxuLnRleHQtLW5hdmJhciB7XG4gIGZvbnQtd2VpZ2h0OiB2YXIoLS1mb250LXdlaWdodC1tZWRpdW0pO1xufVxuXG4uaGVhZGVyLS1sb2dvLFxuLmhlYWRlci0tcGFuZWwsXG4uZXhjdXJzaW9uc19fcHJpY2Uge1xuICBmb250LXdlaWdodDogdmFyKC0tZm9udC13ZWlnaHQtc2VtaS1ib2xkKTtcbn1cblxuLmhlYWRlci0tbWFpbnBhZ2UsXG4uaGVhZGVyX19ib3JkZXIge1xuICBmb250LXdlaWdodDogdmFyKC0tZm9udC13ZWlnaHQtYm9sZCk7XG59XG5cbi5oZWFkZXIge1xuICBmb250LXNpemU6IDEuNXJlbTtcbn1cblxuLmhlYWRlci0tbWFpbnBhZ2Uge1xuICBmb250LXNpemU6IDIuM3JlbTtcbn1cblxuLmhlYWRlci0tbG9nbyB7XG4gIGZvbnQtc2l6ZTogMS4ycmVtO1xufVxuXG4udGV4dC0tbmF2YmFyIHtcbiAgZm9udC1zaXplOiAxcmVtO1xufVxuXG5AbWVkaWEgKG1pbi13aWR0aDogNjUwcHgpIHtcbiAgLmhlYWRlciB7XG4gICAgZm9udC1zaXplOiAxLjhyZW07XG4gIH1cblxuICAuaGVhZGVyLS1tYWlucGFnZSB7XG4gICAgZm9udC1zaXplOiAzcmVtO1xuICB9XG5cbiAgLmhlYWRlci0tbG9nbyB7XG4gICAgZm9udC1zaXplOiAxLjVyZW07XG4gIH1cblxuICAudGV4dC0tbmF2YmFyIHtcbiAgICBmb250LXNpemU6IDEuMnJlbTtcbiAgfVxufVxuXG5AbWVkaWEgKG1pbi13aWR0aDogOTUwcHgpIHtcbiAgLmhlYWRlci0tbWFpbnBhZ2Uge1xuICAgIGZvbnQtc2l6ZTogNHJlbTtcbiAgfVxuXG4gIC5tYWlucGFnZV9fdGV4dCB7XG4gICAgZm9udC1zaXplOiAxLjJyZW07XG4gIH1cbn1cblxuQG1lZGlhIChtaW4td2lkdGg6IDEyMDBweCkge1xuICAuaGVhZGVyIHtcbiAgICBmb250LXNpemU6IDJyZW07XG4gIH1cblxuICAuaGVhZGVyLS1tYWlucGFnZSB7XG4gICAgZm9udC1zaXplOiA0LjRyZW07XG4gIH1cblxuICAudGV4dC0tbmF2YmFyIHtcbiAgICBmb250LXNpemU6IDFyZW07XG4gIH1cblxufWAsIFwiXCIse1widmVyc2lvblwiOjMsXCJzb3VyY2VzXCI6W1wid2VicGFjazovLy4vc3JjL2Nzcy9jbGllbnQvZm9udHMuY3NzXCJdLFwibmFtZXNcIjpbXSxcIm1hcHBpbmdzXCI6XCJBQUFBO0VBQ0UsZUFBZTtFQUNmLHlCQUF5QjtFQUN6Qix5QkFBeUI7RUFDekIsNEJBQTRCO0VBQzVCLHVCQUF1QjtBQUN6Qjs7QUFFQTtFQUNFLHlCQUF5QjtFQUN6Qiw0Q0FBdUQ7RUFDdkQsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UseUJBQXlCO0VBQ3pCLDRDQUFzRDtFQUN0RCxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSx5QkFBeUI7RUFDekIsNENBQXdEO0VBQ3hELGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLHlCQUF5QjtFQUN6Qiw0Q0FBb0Q7RUFDcEQsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UseUJBQXlCO0VBQ3pCLHNDQUFzQztFQUN0QyxZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxzQ0FBc0M7QUFDeEM7O0FBRUE7OztFQUdFLHlDQUF5QztBQUMzQzs7QUFFQTs7RUFFRSxvQ0FBb0M7QUFDdEM7O0FBRUE7RUFDRSxpQkFBaUI7QUFDbkI7O0FBRUE7RUFDRSxpQkFBaUI7QUFDbkI7O0FBRUE7RUFDRSxpQkFBaUI7QUFDbkI7O0FBRUE7RUFDRSxlQUFlO0FBQ2pCOztBQUVBO0VBQ0U7SUFDRSxpQkFBaUI7RUFDbkI7O0VBRUE7SUFDRSxlQUFlO0VBQ2pCOztFQUVBO0lBQ0UsaUJBQWlCO0VBQ25COztFQUVBO0lBQ0UsaUJBQWlCO0VBQ25CO0FBQ0Y7O0FBRUE7RUFDRTtJQUNFLGVBQWU7RUFDakI7O0VBRUE7SUFDRSxpQkFBaUI7RUFDbkI7QUFDRjs7QUFFQTtFQUNFO0lBQ0UsZUFBZTtFQUNqQjs7RUFFQTtJQUNFLGlCQUFpQjtFQUNuQjs7RUFFQTtJQUNFLGVBQWU7RUFDakI7O0FBRUZcIixcInNvdXJjZXNDb250ZW50XCI6W1wiOnJvb3Qge1xcbiAgZm9udC1zaXplOiAxNnB4O1xcbiAgLS1mb250LXdlaWdodC1ub3JtYWw6IDQwMDtcXG4gIC0tZm9udC13ZWlnaHQtbWVkaXVtOiA1MDA7XFxuICAtLWZvbnQtd2VpZ2h0LXNlbWktYm9sZDogNjAwO1xcbiAgLS1mb250LXdlaWdodC1ib2xkOiA3MDA7XFxufVxcblxcbkBmb250LWZhY2Uge1xcbiAgZm9udC1mYW1pbHk6ICdNb250c2VycmF0JztcXG4gIHNyYzogdXJsKC4uLy4uL2ZvbnRzL01vbnRzZXJyYXQvTW9udHNlcnJhdC1SZWd1bGFyLnR0Zik7XFxuICBmb250LXdlaWdodDogNDAwO1xcbn1cXG5cXG5AZm9udC1mYWNlIHtcXG4gIGZvbnQtZmFtaWx5OiAnTW9udHNlcnJhdCc7XFxuICBzcmM6IHVybCguLi8uLi9mb250cy9Nb250c2VycmF0L01vbnRzZXJyYXQtTWVkaXVtLnR0Zik7XFxuICBmb250LXdlaWdodDogNTAwO1xcbn1cXG5cXG5AZm9udC1mYWNlIHtcXG4gIGZvbnQtZmFtaWx5OiAnTW9udHNlcnJhdCc7XFxuICBzcmM6IHVybCguLi8uLi9mb250cy9Nb250c2VycmF0L01vbnRzZXJyYXQtU2VtaUJvbGQudHRmKTtcXG4gIGZvbnQtd2VpZ2h0OiA2MDA7XFxufVxcblxcbkBmb250LWZhY2Uge1xcbiAgZm9udC1mYW1pbHk6ICdNb250c2VycmF0JztcXG4gIHNyYzogdXJsKC4uLy4uL2ZvbnRzL01vbnRzZXJyYXQvTW9udHNlcnJhdC1Cb2xkLnR0Zik7XFxuICBmb250LXdlaWdodDogNzAwO1xcbn1cXG5cXG4qIHtcXG4gIGZvbnQtZmFtaWx5OiAnTW9udHNlcnJhdCc7XFxuICBmb250LXdlaWdodDogdmFyKC0tZm9udC13ZWlnaHQtbm9ybWFsKTtcXG4gIGNvbG9yOiB3aGl0ZTtcXG59XFxuXFxuLnRleHQtLW5hdmJhciB7XFxuICBmb250LXdlaWdodDogdmFyKC0tZm9udC13ZWlnaHQtbWVkaXVtKTtcXG59XFxuXFxuLmhlYWRlci0tbG9nbyxcXG4uaGVhZGVyLS1wYW5lbCxcXG4uZXhjdXJzaW9uc19fcHJpY2Uge1xcbiAgZm9udC13ZWlnaHQ6IHZhcigtLWZvbnQtd2VpZ2h0LXNlbWktYm9sZCk7XFxufVxcblxcbi5oZWFkZXItLW1haW5wYWdlLFxcbi5oZWFkZXJfX2JvcmRlciB7XFxuICBmb250LXdlaWdodDogdmFyKC0tZm9udC13ZWlnaHQtYm9sZCk7XFxufVxcblxcbi5oZWFkZXIge1xcbiAgZm9udC1zaXplOiAxLjVyZW07XFxufVxcblxcbi5oZWFkZXItLW1haW5wYWdlIHtcXG4gIGZvbnQtc2l6ZTogMi4zcmVtO1xcbn1cXG5cXG4uaGVhZGVyLS1sb2dvIHtcXG4gIGZvbnQtc2l6ZTogMS4ycmVtO1xcbn1cXG5cXG4udGV4dC0tbmF2YmFyIHtcXG4gIGZvbnQtc2l6ZTogMXJlbTtcXG59XFxuXFxuQG1lZGlhIChtaW4td2lkdGg6IDY1MHB4KSB7XFxuICAuaGVhZGVyIHtcXG4gICAgZm9udC1zaXplOiAxLjhyZW07XFxuICB9XFxuXFxuICAuaGVhZGVyLS1tYWlucGFnZSB7XFxuICAgIGZvbnQtc2l6ZTogM3JlbTtcXG4gIH1cXG5cXG4gIC5oZWFkZXItLWxvZ28ge1xcbiAgICBmb250LXNpemU6IDEuNXJlbTtcXG4gIH1cXG5cXG4gIC50ZXh0LS1uYXZiYXIge1xcbiAgICBmb250LXNpemU6IDEuMnJlbTtcXG4gIH1cXG59XFxuXFxuQG1lZGlhIChtaW4td2lkdGg6IDk1MHB4KSB7XFxuICAuaGVhZGVyLS1tYWlucGFnZSB7XFxuICAgIGZvbnQtc2l6ZTogNHJlbTtcXG4gIH1cXG5cXG4gIC5tYWlucGFnZV9fdGV4dCB7XFxuICAgIGZvbnQtc2l6ZTogMS4ycmVtO1xcbiAgfVxcbn1cXG5cXG5AbWVkaWEgKG1pbi13aWR0aDogMTIwMHB4KSB7XFxuICAuaGVhZGVyIHtcXG4gICAgZm9udC1zaXplOiAycmVtO1xcbiAgfVxcblxcbiAgLmhlYWRlci0tbWFpbnBhZ2Uge1xcbiAgICBmb250LXNpemU6IDQuNHJlbTtcXG4gIH1cXG5cXG4gIC50ZXh0LS1uYXZiYXIge1xcbiAgICBmb250LXNpemU6IDFyZW07XFxuICB9XFxuXFxufVwiXSxcInNvdXJjZVJvb3RcIjpcIlwifV0pO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgX19fQ1NTX0xPQURFUl9FWFBPUlRfX187XG4iLCIvLyBJbXBvcnRzXG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyBmcm9tIFwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL3NvdXJjZU1hcHMuanNcIjtcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gZnJvbSBcIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIjtcbmltcG9ydCBfX19DU1NfTE9BREVSX0dFVF9VUkxfSU1QT1JUX19fIGZyb20gXCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvZ2V0VXJsLmpzXCI7XG52YXIgX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzBfX18gPSBuZXcgVVJMKFwiLi4vLi4vYXNzZXRzL2Jhc2tldF9pY29uLnN2Z1wiLCBpbXBvcnQubWV0YS51cmwpO1xudmFyIF9fX0NTU19MT0FERVJfRVhQT1JUX19fID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18pO1xudmFyIF9fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzBfX18gPSBfX19DU1NfTE9BREVSX0dFVF9VUkxfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8wX19fKTtcbi8vIE1vZHVsZVxuX19fQ1NTX0xPQURFUl9FWFBPUlRfX18ucHVzaChbbW9kdWxlLmlkLCBgOnJvb3Qge1xuICAtLXByaW1hcnktY29sb3I6ICM1MTc1Nzk7XG4gIC0tcHJpbWFyeS1jb2xvci1icmlnaHQ6ICM2NTg4ODg7XG4gIC0tcHJpbWFyeS1jb2xvci1zdHJpcGU6ICM3YTllOWU7XG4gIC0tc2Vjb25kYXJ5LWNvbG9yOiAjMDExRTNGO1xufVxuXG4qIHtcbiAgbWFyZ2luOiAwO1xuICBwYWRkaW5nOiAwO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xufVxuXG51bCB7XG4gIGxpc3Qtc3R5bGU6IG5vbmU7XG59XG5cbi5uYXZiYXIge1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIHotaW5kZXg6IDk5OTtcbiAgZGlzcGxheTogZmxleDtcbiAgcGFkZGluZzogNDBweCA2MHB4O1xuICB3aWR0aDogMTAwdnc7XG4gIGhlaWdodDogMTEwcHg7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG59XG5cbi5uYXZiYXItLWJhY2tncm91bmQtc2Nyb2xsLFxuLm5hdmJhci0tYmFja2dyb3VuZC1iYXNrZXQtYnRuLFxuLm5hdmJhci0tYmFja2dyb3VuZC1uYXZiYXItYnRuIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvcik7XG59XG5cbi5uYXZiYXJfX2l0ZW0sXG4uaGVhZGVyLS1sb2dvIHtcbiAgbWFyZ2luOiBhdXRvIDA7XG59XG5cbi5oZWFkZXItLWxvZ28ge1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG59XG5cbi53cmFwcGVyLS1tYWluIHtcbiAgbWluLWhlaWdodDogMTAwdmg7XG4gIHBhZGRpbmctdG9wOiAxMzBweDtcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzUxNzU3OSAwJSwgIzg5OTI4MCAxMDAlKTtcbn1cbi5tYWlucGFnZSB7XG4gIGNvbG9yOiB3aGl0ZTtcbn1cblxuLm1haW5wYWdlX19jb250YWluZXIge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG5cbi5tYWlucGFnZV9fdGV4dCB7XG4gIHBhZGRpbmctaW5saW5lOiA1dnc7XG59XG5cbi5oZWFkZXItLW1haW5wYWdlIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZ2FwOiAxMHB4O1xuICBtYXJnaW4tYm90dG9tOiAyMHB4O1xufVxuXG5cblxuLmhlYWRlcl9fYm9yZGVyIHtcbiAgcGFkZGluZy1pbmxpbmU6IDEwcHg7XG4gIGJvcmRlcjogNXB4IHNvbGlkICNFQ0EyMjI7XG4gIGJvcmRlci1yYWRpdXM6IDEwMHZ3O1xufVxuXG4uZXhjdXJzaW9uc19faXRlbSA6Oi13ZWJraXQtc2Nyb2xsYmFyIHtcbiAgd2lkdGg6IDAuNWVtO1xufVxuXG4uZXhjdXJzaW9uc19faXRlbSA6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iIHtcbiAgYm9yZGVyLXJhZGl1czogMTAwdnc7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXNlY29uZGFyeS1jb2xvcik7XG59XG5cbi5leGN1cnNpb25zX19pdGVtIDo6LXdlYmtpdC1zY3JvbGxiYXItdHJhY2sge1xuICBtYXJnaW4tYmxvY2s6IDAuNWVtO1xuICBib3JkZXItcmFkaXVzOiAxMDB2dztcbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG59XG5cbi5wYW5lbF9fZXhjdXJzaW9ucyB7XG4gIGRpc3BsYXk6IGdyaWQ7XG4gIHBhZGRpbmctYm90dG9tOiA0MHB4O1xufVxuXG5cbi5leGN1cnNpb25zX19pdGVtIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgcGFkZGluZzogMjBweCA0MHB4O1xuICBnYXA6IDMwcHg7XG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCg4MGRlZywgIzUxNzU3OSA0MCUsICNhOWE0ODMgMjUwJSk7XG59XG5cbi5leGN1cnNpb25zX19pdGVtOm50aC1jaGlsZChvZGQpIHtcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzMGRlZywgIzUxNzU3OSA0MCUsICNhOWE0ODMgMTYwJSk7XG59XG5cbi5leGN1cnNpb25zX19uYW1lIHtcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICBib3JkZXItYm90dG9tOiAzcHggc29saWQgdmFyKC0tcHJpbWFyeS1jb2xvci1zdHJpcGUpO1xufVxuXG4uZXhjdXJzaW9uc19fZGVzY3JpcHRpb24ge1xuICBtYXgtaGVpZ2h0OiAxNTBweDtcbiAgb3ZlcmZsb3cteTogYXV0bztcbiAgcGFkZGluZy1ib3R0b206IDEwcHg7XG4gIGJvcmRlci1ib3R0b206IDNweCBzb2xpZCB2YXIoLS1wcmltYXJ5LWNvbG9yLXN0cmlwZSk7XG59XG5cbi5leGN1cnNpb25zX19maWVsZC1lcnJvciB7XG4gIGNvbG9yOiByZWQ7XG59XG5cbi5leGN1cnNpb25zX19mb3JtIHtcbiAgbWFyZ2luLXRvcDogYXV0bztcbn1cblxuLmV4Y3Vyc2lvbnNfX2ZpZWxkIHtcbiAgbWFyZ2luOiBhdXRvIDA7XG59XG5cbi5leGN1cnNpb25zX19maWVsZC1uYW1lIHtcbiAgZGlzcGxheTogZ3JpZDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGdhcDogMTBweDtcbn1cblxuLmV4Y3Vyc2lvbnNfX3ByaWNlLXdyYXBwZXIge1xuICBncmlkLWNvbHVtbjogMSAvIDI7XG59XG5cbi5leGN1cnNpb25zX19maWVsZC1lcnJvciB7XG4gIGdyaWQtY29sdW1uOiAxIC8gMztcbiAgZ3JpZC1yb3c6IDIgLyAzXG59XG5cbi5leGN1cnNpb25zX19maWVsZC0tc3VibWl0IHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG4uZXhjdXJzaW9uc19fZmllbGQtaW5wdXQge1xuICBib3JkZXI6IG5vbmU7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvci1icmlnaHQpO1xufVxuXG4uZXhjdXJzaW9uc19fZmllbGQtaW5wdXQge1xuICBncmlkLWNvbHVtbjogMiAvIDM7XG4gIGp1c3RpZnktc2VsZjogY2VudGVyO1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG5cbi5leGN1cnNpb25zX19maWVsZC1pbnB1dC0tc3VibWl0IHtcbiAgcGFkZGluZzogMjBweDtcbiAgbWFyZ2luLXRvcDogMzBweDtcbiAgYm9yZGVyOiA0cHggc29saWQgd2hpdGU7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXNlY29uZGFyeS1jb2xvcik7XG59XG5cblxuLmV4Y3Vyc2lvbnNfX2Zvcm0+IDpmaXJzdC1jaGlsZCB7XG4gIG1hcmdpbi1ib3R0b206IDEwcHg7XG59XG5cbi5uYXZiYXJfX3RvZ2dsZSB7XG4gIGRpc3BsYXk6IG5vbmU7XG59XG5cbi5iYXNrZXQtYnRuIHtcbiAgZGlzcGxheTogbm9uZTtcbn1cblxuLmJhc2tldC1idG5fX3dyYXBwZXIge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMzdweDtcbiAgcmlnaHQ6IDI1cHg7XG4gIHotaW5kZXg6IDk5OTtcbn1cblxuLmJhc2tldC1idG5fX2ljb24ge1xuICBjb250ZW50OiB1cmwoJHtfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF8wX19ffSk7XG4gIHdpZHRoOiAzMHB4O1xuICBoZWlnaHQ6IDMwcHg7XG59XG5cbi5iYXNrZXQtYnRuX19xdWFudGl0eSB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgZGlzcGxheTogbm9uZTtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIHdpZHRoOiAzMHB4O1xuICBoZWlnaHQ6IDMwcHg7XG59XG5cbi5leGN1cnNpb25zX19pdGVtLS1wcm90b3R5cGUsXG4uaXRlbS1saXN0X19pdGVtLS1wcm90b3R5cGUge1xuICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7XG59XG5gLCBcIlwiLHtcInZlcnNpb25cIjozLFwic291cmNlc1wiOltcIndlYnBhY2s6Ly8uL3NyYy9jc3MvY2xpZW50L2dsb2JhbC5jc3NcIl0sXCJuYW1lc1wiOltdLFwibWFwcGluZ3NcIjpcIkFBQUE7RUFDRSx3QkFBd0I7RUFDeEIsK0JBQStCO0VBQy9CLCtCQUErQjtFQUMvQiwwQkFBMEI7QUFDNUI7O0FBRUE7RUFDRSxTQUFTO0VBQ1QsVUFBVTtFQUNWLHNCQUFzQjtBQUN4Qjs7QUFFQTtFQUNFLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLGVBQWU7RUFDZixZQUFZO0VBQ1osYUFBYTtFQUNiLGtCQUFrQjtFQUNsQixZQUFZO0VBQ1osYUFBYTtFQUNiLFlBQVk7RUFDWiw2QkFBNkI7QUFDL0I7O0FBRUE7OztFQUdFLHNDQUFzQztBQUN4Qzs7QUFFQTs7RUFFRSxjQUFjO0FBQ2hCOztBQUVBO0VBQ0Usa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UsaUJBQWlCO0VBQ2pCLGtCQUFrQjtFQUNsQiw2REFBNkQ7QUFDL0Q7QUFDQTtFQUNFLFlBQVk7QUFDZDs7QUFFQTtFQUNFLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsbUJBQW1CO0VBQ25CLFNBQVM7RUFDVCxtQkFBbUI7QUFDckI7Ozs7QUFJQTtFQUNFLG9CQUFvQjtFQUNwQix5QkFBeUI7RUFDekIsb0JBQW9CO0FBQ3RCOztBQUVBO0VBQ0UsWUFBWTtBQUNkOztBQUVBO0VBQ0Usb0JBQW9CO0VBQ3BCLHdDQUF3QztBQUMxQzs7QUFFQTtFQUNFLG1CQUFtQjtFQUNuQixvQkFBb0I7RUFDcEIsdUJBQXVCO0FBQ3pCOztBQUVBO0VBQ0UsYUFBYTtFQUNiLG9CQUFvQjtBQUN0Qjs7O0FBR0E7RUFDRSxhQUFhO0VBQ2Isc0JBQXNCO0VBQ3RCLGtCQUFrQjtFQUNsQixTQUFTO0VBQ1QsNkRBQTZEO0FBQy9EOztBQUVBO0VBQ0UsOERBQThEO0FBQ2hFOztBQUVBO0VBQ0UscUJBQXFCO0VBQ3JCLG1CQUFtQjtFQUNuQixvREFBb0Q7QUFDdEQ7O0FBRUE7RUFDRSxpQkFBaUI7RUFDakIsZ0JBQWdCO0VBQ2hCLG9CQUFvQjtFQUNwQixvREFBb0Q7QUFDdEQ7O0FBRUE7RUFDRSxVQUFVO0FBQ1o7O0FBRUE7RUFDRSxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxjQUFjO0FBQ2hCOztBQUVBO0VBQ0UsYUFBYTtFQUNiLHVCQUF1QjtFQUN2QixTQUFTO0FBQ1g7O0FBRUE7RUFDRSxrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEI7QUFDRjs7QUFFQTtFQUNFLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLFlBQVk7RUFDWixZQUFZO0VBQ1osNkNBQTZDO0FBQy9DOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLG9CQUFvQjtFQUNwQixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsZ0JBQWdCO0VBQ2hCLHVCQUF1QjtFQUN2Qix3Q0FBd0M7QUFDMUM7OztBQUdBO0VBQ0UsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsYUFBYTtBQUNmOztBQUVBO0VBQ0UsYUFBYTtBQUNmOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFNBQVM7RUFDVCxXQUFXO0VBQ1gsWUFBWTtBQUNkOztBQUVBO0VBQ0UsZ0RBQTBDO0VBQzFDLFdBQVc7RUFDWCxZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsYUFBYTtFQUNiLHVCQUF1QjtFQUN2QixtQkFBbUI7RUFDbkIsV0FBVztFQUNYLFlBQVk7QUFDZDs7QUFFQTs7RUFFRSx3QkFBd0I7QUFDMUJcIixcInNvdXJjZXNDb250ZW50XCI6W1wiOnJvb3Qge1xcbiAgLS1wcmltYXJ5LWNvbG9yOiAjNTE3NTc5O1xcbiAgLS1wcmltYXJ5LWNvbG9yLWJyaWdodDogIzY1ODg4ODtcXG4gIC0tcHJpbWFyeS1jb2xvci1zdHJpcGU6ICM3YTllOWU7XFxuICAtLXNlY29uZGFyeS1jb2xvcjogIzAxMUUzRjtcXG59XFxuXFxuKiB7XFxuICBtYXJnaW46IDA7XFxuICBwYWRkaW5nOiAwO1xcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcXG59XFxuXFxudWwge1xcbiAgbGlzdC1zdHlsZTogbm9uZTtcXG59XFxuXFxuLm5hdmJhciB7XFxuICBwb3NpdGlvbjogZml4ZWQ7XFxuICB6LWluZGV4OiA5OTk7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAgcGFkZGluZzogNDBweCA2MHB4O1xcbiAgd2lkdGg6IDEwMHZ3O1xcbiAgaGVpZ2h0OiAxMTBweDtcXG4gIGNvbG9yOiB3aGl0ZTtcXG4gIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xcbn1cXG5cXG4ubmF2YmFyLS1iYWNrZ3JvdW5kLXNjcm9sbCxcXG4ubmF2YmFyLS1iYWNrZ3JvdW5kLWJhc2tldC1idG4sXFxuLm5hdmJhci0tYmFja2dyb3VuZC1uYXZiYXItYnRuIHtcXG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXByaW1hcnktY29sb3IpO1xcbn1cXG5cXG4ubmF2YmFyX19pdGVtLFxcbi5oZWFkZXItLWxvZ28ge1xcbiAgbWFyZ2luOiBhdXRvIDA7XFxufVxcblxcbi5oZWFkZXItLWxvZ28ge1xcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbn1cXG5cXG4ud3JhcHBlci0tbWFpbiB7XFxuICBtaW4taGVpZ2h0OiAxMDB2aDtcXG4gIHBhZGRpbmctdG9wOiAxMzBweDtcXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM1MTc1NzkgMCUsICM4OTkyODAgMTAwJSk7XFxufVxcbi5tYWlucGFnZSB7XFxuICBjb2xvcjogd2hpdGU7XFxufVxcblxcbi5tYWlucGFnZV9fY29udGFpbmVyIHtcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXG59XFxuXFxuLm1haW5wYWdlX190ZXh0IHtcXG4gIHBhZGRpbmctaW5saW5lOiA1dnc7XFxufVxcblxcbi5oZWFkZXItLW1haW5wYWdlIHtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXG4gIGdhcDogMTBweDtcXG4gIG1hcmdpbi1ib3R0b206IDIwcHg7XFxufVxcblxcblxcblxcbi5oZWFkZXJfX2JvcmRlciB7XFxuICBwYWRkaW5nLWlubGluZTogMTBweDtcXG4gIGJvcmRlcjogNXB4IHNvbGlkICNFQ0EyMjI7XFxuICBib3JkZXItcmFkaXVzOiAxMDB2dztcXG59XFxuXFxuLmV4Y3Vyc2lvbnNfX2l0ZW0gOjotd2Via2l0LXNjcm9sbGJhciB7XFxuICB3aWR0aDogMC41ZW07XFxufVxcblxcbi5leGN1cnNpb25zX19pdGVtIDo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWIge1xcbiAgYm9yZGVyLXJhZGl1czogMTAwdnc7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zZWNvbmRhcnktY29sb3IpO1xcbn1cXG5cXG4uZXhjdXJzaW9uc19faXRlbSA6Oi13ZWJraXQtc2Nyb2xsYmFyLXRyYWNrIHtcXG4gIG1hcmdpbi1ibG9jazogMC41ZW07XFxuICBib3JkZXItcmFkaXVzOiAxMDB2dztcXG4gIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xcbn1cXG5cXG4ucGFuZWxfX2V4Y3Vyc2lvbnMge1xcbiAgZGlzcGxheTogZ3JpZDtcXG4gIHBhZGRpbmctYm90dG9tOiA0MHB4O1xcbn1cXG5cXG5cXG4uZXhjdXJzaW9uc19faXRlbSB7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXG4gIHBhZGRpbmc6IDIwcHggNDBweDtcXG4gIGdhcDogMzBweDtcXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCg4MGRlZywgIzUxNzU3OSA0MCUsICNhOWE0ODMgMjUwJSk7XFxufVxcblxcbi5leGN1cnNpb25zX19pdGVtOm50aC1jaGlsZChvZGQpIHtcXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzBkZWcsICM1MTc1NzkgNDAlLCAjYTlhNDgzIDE2MCUpO1xcbn1cXG5cXG4uZXhjdXJzaW9uc19fbmFtZSB7XFxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxuICBtYXJnaW4tYm90dG9tOiAxMHB4O1xcbiAgYm9yZGVyLWJvdHRvbTogM3B4IHNvbGlkIHZhcigtLXByaW1hcnktY29sb3Itc3RyaXBlKTtcXG59XFxuXFxuLmV4Y3Vyc2lvbnNfX2Rlc2NyaXB0aW9uIHtcXG4gIG1heC1oZWlnaHQ6IDE1MHB4O1xcbiAgb3ZlcmZsb3cteTogYXV0bztcXG4gIHBhZGRpbmctYm90dG9tOiAxMHB4O1xcbiAgYm9yZGVyLWJvdHRvbTogM3B4IHNvbGlkIHZhcigtLXByaW1hcnktY29sb3Itc3RyaXBlKTtcXG59XFxuXFxuLmV4Y3Vyc2lvbnNfX2ZpZWxkLWVycm9yIHtcXG4gIGNvbG9yOiByZWQ7XFxufVxcblxcbi5leGN1cnNpb25zX19mb3JtIHtcXG4gIG1hcmdpbi10b3A6IGF1dG87XFxufVxcblxcbi5leGN1cnNpb25zX19maWVsZCB7XFxuICBtYXJnaW46IGF1dG8gMDtcXG59XFxuXFxuLmV4Y3Vyc2lvbnNfX2ZpZWxkLW5hbWUge1xcbiAgZGlzcGxheTogZ3JpZDtcXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xcbiAgZ2FwOiAxMHB4O1xcbn1cXG5cXG4uZXhjdXJzaW9uc19fcHJpY2Utd3JhcHBlciB7XFxuICBncmlkLWNvbHVtbjogMSAvIDI7XFxufVxcblxcbi5leGN1cnNpb25zX19maWVsZC1lcnJvciB7XFxuICBncmlkLWNvbHVtbjogMSAvIDM7XFxuICBncmlkLXJvdzogMiAvIDNcXG59XFxuXFxuLmV4Y3Vyc2lvbnNfX2ZpZWxkLS1zdWJtaXQge1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbn1cXG5cXG4uZXhjdXJzaW9uc19fZmllbGQtaW5wdXQge1xcbiAgYm9yZGVyOiBub25lO1xcbiAgY29sb3I6IHdoaXRlO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvci1icmlnaHQpO1xcbn1cXG5cXG4uZXhjdXJzaW9uc19fZmllbGQtaW5wdXQge1xcbiAgZ3JpZC1jb2x1bW46IDIgLyAzO1xcbiAganVzdGlmeS1zZWxmOiBjZW50ZXI7XFxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxufVxcblxcbi5leGN1cnNpb25zX19maWVsZC1pbnB1dC0tc3VibWl0IHtcXG4gIHBhZGRpbmc6IDIwcHg7XFxuICBtYXJnaW4tdG9wOiAzMHB4O1xcbiAgYm9yZGVyOiA0cHggc29saWQgd2hpdGU7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zZWNvbmRhcnktY29sb3IpO1xcbn1cXG5cXG5cXG4uZXhjdXJzaW9uc19fZm9ybT4gOmZpcnN0LWNoaWxkIHtcXG4gIG1hcmdpbi1ib3R0b206IDEwcHg7XFxufVxcblxcbi5uYXZiYXJfX3RvZ2dsZSB7XFxuICBkaXNwbGF5OiBub25lO1xcbn1cXG5cXG4uYmFza2V0LWJ0biB7XFxuICBkaXNwbGF5OiBub25lO1xcbn1cXG5cXG4uYmFza2V0LWJ0bl9fd3JhcHBlciB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICB0b3A6IDM3cHg7XFxuICByaWdodDogMjVweDtcXG4gIHotaW5kZXg6IDk5OTtcXG59XFxuXFxuLmJhc2tldC1idG5fX2ljb24ge1xcbiAgY29udGVudDogdXJsKC4uLy4uL2Fzc2V0cy9iYXNrZXRfaWNvbi5zdmcpO1xcbiAgd2lkdGg6IDMwcHg7XFxuICBoZWlnaHQ6IDMwcHg7XFxufVxcblxcbi5iYXNrZXQtYnRuX19xdWFudGl0eSB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICBkaXNwbGF5OiBub25lO1xcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xcbiAgd2lkdGg6IDMwcHg7XFxuICBoZWlnaHQ6IDMwcHg7XFxufVxcblxcbi5leGN1cnNpb25zX19pdGVtLS1wcm90b3R5cGUsXFxuLml0ZW0tbGlzdF9faXRlbS0tcHJvdG90eXBlIHtcXG4gIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDtcXG59XFxuXCJdLFwic291cmNlUm9vdFwiOlwiXCJ9XSk7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBfX19DU1NfTE9BREVSX0VYUE9SVF9fXztcbiIsIi8vIEltcG9ydHNcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fIGZyb20gXCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvc291cmNlTWFwcy5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyBmcm9tIFwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfR0VUX1VSTF9JTVBPUlRfX18gZnJvbSBcIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9nZXRVcmwuanNcIjtcbnZhciBfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMF9fXyA9IG5ldyBVUkwoXCIuLi8uLi9hc3NldHMvaGFtYnVyZ2VyX2ljb24uc3ZnXCIsIGltcG9ydC5tZXRhLnVybCk7XG52YXIgX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzFfX18gPSBuZXcgVVJMKFwiLi4vLi4vYXNzZXRzL2Nyb3NzX2ljb24uc3ZnXCIsIGltcG9ydC5tZXRhLnVybCk7XG52YXIgX19fQ1NTX0xPQURFUl9FWFBPUlRfX18gPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyk7XG52YXIgX19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMF9fXyA9IF9fX0NTU19MT0FERVJfR0VUX1VSTF9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzBfX18pO1xudmFyIF9fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzFfX18gPSBfX19DU1NfTE9BREVSX0dFVF9VUkxfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8xX19fKTtcbi8vIE1vZHVsZVxuX19fQ1NTX0xPQURFUl9FWFBPUlRfX18ucHVzaChbbW9kdWxlLmlkLCBgLm5hdmJhciB7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xufVxuXG4gIC5uYXZiYXJfX2NvbnRhaW5lci0tbW9iaWxlIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAxMTBweDtcbiAgICBkaXNwbGF5OiBub25lO1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBnYXA6IDIwcHg7XG4gICAgcGFkZGluZy1ibG9jazogMjBweCA0MHB4O1xuICAgIHdpZHRoOiAxMDB2dztcbiAgICBib3JkZXItYmxvY2s6IDNweCBzb2xpZCB2YXIoLS1wcmltYXJ5LWNvbG9yLXN0cmlwZSk7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvcik7XG4gIH1cblxuICAubmF2YmFyX19jb250YWluZXItLW9wZW4ge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gIH1cblxuICAubmF2YmFyX19pdGVtLS1tb2JpbGUge1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBwYWRkaW5nLWJsb2NrOiAyMHB4IDE1cHg7XG4gICAgcGFkZGluZy1pbmxpbmU6IDMwcHg7XG4gICAgbWFyZ2luLWJvdHRvbTogNXB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICBib3JkZXItYm90dG9tOiAzcHggc29saWQgdmFyKC0tcHJpbWFyeS1jb2xvci1zdHJpcGUpO1xuICB9XG5cbiAgLm5hdmJhcl9faXRlbS0tbW9iaWxlOmhvdmVyIHtcbiAgICBwYWRkaW5nLWJvdHRvbTogMjBweDtcbiAgICBtYXJnaW4tYm90dG9tOiAwO1xuICAgIGJvcmRlci1ib3R0b206IDNweCBzb2xpZCB0cmFuc3BhcmVudDtcbiAgICBib3JkZXItcmFkaXVzOiAyMHB4O1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXNlY29uZGFyeS1jb2xvcik7XG4gIH1cblxuXG4ubmF2YmFyX19idG4ge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMzdweDtcbiAgbGVmdDogMTBweDtcbiAgY29udGVudDogdXJsKCR7X19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMF9fX30pO1xuICB3aWR0aDogMzBweDtcbiAgaGVpZ2h0OiAzMHB4O1xufVxuXG4ubmF2YmFyX19idG4tLWNoZWNrZWQge1xuICBjb250ZW50OiB1cmwoJHtfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF8xX19ffSk7XG59XG5cbi5iYXNrZXQtYnRuX19xdWFudGl0eSB7XG4gIHRvcDogMzZweDtcbiAgbGVmdDogMHB4O1xuICBib3JkZXItcmFkaXVzOiAxMDB2dztcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvci1icmlnaHQpO1xuICBib3JkZXI6IDNweCBzb2xpZCB2YXIoLS1wcmltYXJ5LWNvbG9yLXN0cmlwZSk7XG59XG5cbkBtZWRpYSAobWluLXdpZHRoOiA2NTBweCkge1xuXG4gIC5uYXZiYXJfX2J0bixcbiAgLmJhc2tldC1idG5fX2ljb24ge1xuICAgIHdpZHRoOiA0MHB4O1xuICAgIGhlaWdodDogNDBweDtcbiAgfVxuXG4gIC5iYXNrZXQtYnRuX19xdWFudGl0eSB7XG4gICAgdG9wOiAxMXB4O1xuICAgIGxlZnQ6IDVweDtcbiAgICBib3JkZXI6IHVuc2V0O1xuICAgIGJhY2tncm91bmQtY29sb3I6IHVuc2V0O1xuICB9XG59XG5cbi5wYW5lbF9fY29udGFpbmVyIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBtYXJnaW4tYm90dG9tOiA0MHB4O1xufVxuXG4uaGVhZGVyLS1wYW5lbCB7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuXG4uaGVhZGVyLS1wYW5lbDo6YWZ0ZXIge1xuICBjb250ZW50OiAnJztcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDM1cHg7XG4gIGxlZnQ6IC0yMHB4O1xuICByaWdodDogLTIwcHg7XG4gIGJvcmRlci1ib3R0b206IDNweCBzb2xpZCB2YXIoLS1wcmltYXJ5LWNvbG9yLXN0cmlwZSk7XG59XG5cbi50ZXh0LS1tYWlucGFnZSB7XG4gIHBhZGRpbmctaW5saW5lOiAyMHB4O1xufVxuXG4uaGVhZGVyLS1sb2dvOjphZnRlciB7XG4gIGNvbnRlbnQ6ICcnO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMzVweDtcbiAgbGVmdDogLTIwcHg7XG4gIHJpZ2h0OiAtMjBweDtcbiAgYm9yZGVyLWJvdHRvbTogM3B4IHNvbGlkIHZhcigtLXByaW1hcnktY29sb3Itc3RyaXBlKTtcbn1cblxuLm1haW5wYWdlIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgZ2FwOiAzMHB4O1xuICBtYXJnaW4tdG9wOiAyMHB4O1xufVxuXG4udGV4dC0tbWFpbnBhZ2Uge1xuICBwYWRkaW5nLWlubGluZTogMjBweDtcbn1cblxuLnBhbmVsX19leGN1cnNpb25zIHtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGNvbHVtbi1nYXA6IDYwcHg7XG4gIHJvdy1nYXA6IDQwcHg7XG4gIGdyaWQtdGVtcGxhdGUtY29sdW1uczogbWlubWF4KDI2MHB4LCAzNjBweCk7XG4gIHBhZGRpbmctaW5saW5lOiB1bnNldDtcbn1cblxuLm5hdmJhcl9fYnRuIHtcbiAgbGVmdDogMTBweDtcbn1cblxuLmJhc2tldC1idG5fX3dyYXBwZXIge1xuICB0b3A6IDMwcHg7XG4gIHJpZ2h0OiAxMHB4O1xufVxuXG5cbkBtZWRpYSAobWluLXdpZHRoOiAzNjBweCkge1xuICAubmF2YmFyX19idG4ge1xuICAgIGxlZnQ6IDI1cHg7XG4gIH1cblxuICAuYmFza2V0LWJ0bl9fd3JhcHBlciB7XG4gICAgcmlnaHQ6IDI1cHg7XG4gIH1cblxuICAucGFuZWxfX2V4Y3Vyc2lvbnMge1xuICAgIHBhZGRpbmctaW5saW5lOiAxMHZ3O1xuICB9XG5cbn1cblxuQG1lZGlhIChtaW4td2lkdGg6IDk1MHB4KSB7XG4gIC5wYW5lbF9fZXhjdXJzaW9ucyB7XG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAzNjBweCAzNjBweDtcbiAgICBwYWRkaW5nLWlubGluZTogMTB2dztcbiAgfVxufWAsIFwiXCIse1widmVyc2lvblwiOjMsXCJzb3VyY2VzXCI6W1wid2VicGFjazovLy4vc3JjL2Nzcy9jbGllbnQvbW9iaWxlLmNzc1wiXSxcIm5hbWVzXCI6W10sXCJtYXBwaW5nc1wiOlwiQUFBQTtFQUNFLHVCQUF1QjtBQUN6Qjs7RUFFRTtJQUNFLGtCQUFrQjtJQUNsQixVQUFVO0lBQ1YsYUFBYTtJQUNiLHNCQUFzQjtJQUN0QixtQkFBbUI7SUFDbkIsU0FBUztJQUNULHdCQUF3QjtJQUN4QixZQUFZO0lBQ1osbURBQW1EO0lBQ25ELHNDQUFzQztFQUN4Qzs7RUFFQTtJQUNFLGFBQWE7RUFDZjs7RUFFQTtJQUNFLGtCQUFrQjtJQUNsQix3QkFBd0I7SUFDeEIsb0JBQW9CO0lBQ3BCLGtCQUFrQjtJQUNsQixrQkFBa0I7SUFDbEIsb0RBQW9EO0VBQ3REOztFQUVBO0lBQ0Usb0JBQW9CO0lBQ3BCLGdCQUFnQjtJQUNoQixvQ0FBb0M7SUFDcEMsbUJBQW1CO0lBQ25CLHdDQUF3QztFQUMxQzs7O0FBR0Y7RUFDRSxrQkFBa0I7RUFDbEIsU0FBUztFQUNULFVBQVU7RUFDVixnREFBNkM7RUFDN0MsV0FBVztFQUNYLFlBQVk7QUFDZDs7QUFFQTtFQUNFLGdEQUF5QztBQUMzQzs7QUFFQTtFQUNFLFNBQVM7RUFDVCxTQUFTO0VBQ1Qsb0JBQW9CO0VBQ3BCLDZDQUE2QztFQUM3Qyw2Q0FBNkM7QUFDL0M7O0FBRUE7O0VBRUU7O0lBRUUsV0FBVztJQUNYLFlBQVk7RUFDZDs7RUFFQTtJQUNFLFNBQVM7SUFDVCxTQUFTO0lBQ1QsYUFBYTtJQUNiLHVCQUF1QjtFQUN6QjtBQUNGOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLHFCQUFxQjtFQUNyQixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsa0JBQWtCO0VBQ2xCLFNBQVM7RUFDVCxXQUFXO0VBQ1gsWUFBWTtFQUNaLG9EQUFvRDtBQUN0RDs7QUFFQTtFQUNFLG9CQUFvQjtBQUN0Qjs7QUFFQTtFQUNFLFdBQVc7RUFDWCxrQkFBa0I7RUFDbEIsU0FBUztFQUNULFdBQVc7RUFDWCxZQUFZO0VBQ1osb0RBQW9EO0FBQ3REOztBQUVBO0VBQ0UsYUFBYTtFQUNiLHNCQUFzQjtFQUN0QixTQUFTO0VBQ1QsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0Usb0JBQW9CO0FBQ3RCOztBQUVBO0VBQ0UsdUJBQXVCO0VBQ3ZCLGdCQUFnQjtFQUNoQixhQUFhO0VBQ2IsMkNBQTJDO0VBQzNDLHFCQUFxQjtBQUN2Qjs7QUFFQTtFQUNFLFVBQVU7QUFDWjs7QUFFQTtFQUNFLFNBQVM7RUFDVCxXQUFXO0FBQ2I7OztBQUdBO0VBQ0U7SUFDRSxVQUFVO0VBQ1o7O0VBRUE7SUFDRSxXQUFXO0VBQ2I7O0VBRUE7SUFDRSxvQkFBb0I7RUFDdEI7O0FBRUY7O0FBRUE7RUFDRTtJQUNFLGtDQUFrQztJQUNsQyxvQkFBb0I7RUFDdEI7QUFDRlwiLFwic291cmNlc0NvbnRlbnRcIjpbXCIubmF2YmFyIHtcXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xcbn1cXG5cXG4gIC5uYXZiYXJfX2NvbnRhaW5lci0tbW9iaWxlIHtcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICB0b3A6IDExMHB4O1xcbiAgICBkaXNwbGF5OiBub25lO1xcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xcbiAgICBnYXA6IDIwcHg7XFxuICAgIHBhZGRpbmctYmxvY2s6IDIwcHggNDBweDtcXG4gICAgd2lkdGg6IDEwMHZ3O1xcbiAgICBib3JkZXItYmxvY2s6IDNweCBzb2xpZCB2YXIoLS1wcmltYXJ5LWNvbG9yLXN0cmlwZSk7XFxuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXByaW1hcnktY29sb3IpO1xcbiAgfVxcblxcbiAgLm5hdmJhcl9fY29udGFpbmVyLS1vcGVuIHtcXG4gICAgZGlzcGxheTogZmxleDtcXG4gIH1cXG5cXG4gIC5uYXZiYXJfX2l0ZW0tLW1vYmlsZSB7XFxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gICAgcGFkZGluZy1ibG9jazogMjBweCAxNXB4O1xcbiAgICBwYWRkaW5nLWlubGluZTogMzBweDtcXG4gICAgbWFyZ2luLWJvdHRvbTogNXB4O1xcbiAgICBib3JkZXItcmFkaXVzOiA2cHg7XFxuICAgIGJvcmRlci1ib3R0b206IDNweCBzb2xpZCB2YXIoLS1wcmltYXJ5LWNvbG9yLXN0cmlwZSk7XFxuICB9XFxuXFxuICAubmF2YmFyX19pdGVtLS1tb2JpbGU6aG92ZXIge1xcbiAgICBwYWRkaW5nLWJvdHRvbTogMjBweDtcXG4gICAgbWFyZ2luLWJvdHRvbTogMDtcXG4gICAgYm9yZGVyLWJvdHRvbTogM3B4IHNvbGlkIHRyYW5zcGFyZW50O1xcbiAgICBib3JkZXItcmFkaXVzOiAyMHB4O1xcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zZWNvbmRhcnktY29sb3IpO1xcbiAgfVxcblxcblxcbi5uYXZiYXJfX2J0biB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICB0b3A6IDM3cHg7XFxuICBsZWZ0OiAxMHB4O1xcbiAgY29udGVudDogdXJsKC4uLy4uL2Fzc2V0cy9oYW1idXJnZXJfaWNvbi5zdmcpO1xcbiAgd2lkdGg6IDMwcHg7XFxuICBoZWlnaHQ6IDMwcHg7XFxufVxcblxcbi5uYXZiYXJfX2J0bi0tY2hlY2tlZCB7XFxuICBjb250ZW50OiB1cmwoLi4vLi4vYXNzZXRzL2Nyb3NzX2ljb24uc3ZnKTtcXG59XFxuXFxuLmJhc2tldC1idG5fX3F1YW50aXR5IHtcXG4gIHRvcDogMzZweDtcXG4gIGxlZnQ6IDBweDtcXG4gIGJvcmRlci1yYWRpdXM6IDEwMHZ3O1xcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvci1icmlnaHQpO1xcbiAgYm9yZGVyOiAzcHggc29saWQgdmFyKC0tcHJpbWFyeS1jb2xvci1zdHJpcGUpO1xcbn1cXG5cXG5AbWVkaWEgKG1pbi13aWR0aDogNjUwcHgpIHtcXG5cXG4gIC5uYXZiYXJfX2J0bixcXG4gIC5iYXNrZXQtYnRuX19pY29uIHtcXG4gICAgd2lkdGg6IDQwcHg7XFxuICAgIGhlaWdodDogNDBweDtcXG4gIH1cXG5cXG4gIC5iYXNrZXQtYnRuX19xdWFudGl0eSB7XFxuICAgIHRvcDogMTFweDtcXG4gICAgbGVmdDogNXB4O1xcbiAgICBib3JkZXI6IHVuc2V0O1xcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB1bnNldDtcXG4gIH1cXG59XFxuXFxuLnBhbmVsX19jb250YWluZXIge1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgbWFyZ2luLWJvdHRvbTogNDBweDtcXG59XFxuXFxuLmhlYWRlci0tcGFuZWwge1xcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbn1cXG5cXG4uaGVhZGVyLS1wYW5lbDo6YWZ0ZXIge1xcbiAgY29udGVudDogJyc7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICB0b3A6IDM1cHg7XFxuICBsZWZ0OiAtMjBweDtcXG4gIHJpZ2h0OiAtMjBweDtcXG4gIGJvcmRlci1ib3R0b206IDNweCBzb2xpZCB2YXIoLS1wcmltYXJ5LWNvbG9yLXN0cmlwZSk7XFxufVxcblxcbi50ZXh0LS1tYWlucGFnZSB7XFxuICBwYWRkaW5nLWlubGluZTogMjBweDtcXG59XFxuXFxuLmhlYWRlci0tbG9nbzo6YWZ0ZXIge1xcbiAgY29udGVudDogJyc7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICB0b3A6IDM1cHg7XFxuICBsZWZ0OiAtMjBweDtcXG4gIHJpZ2h0OiAtMjBweDtcXG4gIGJvcmRlci1ib3R0b206IDNweCBzb2xpZCB2YXIoLS1wcmltYXJ5LWNvbG9yLXN0cmlwZSk7XFxufVxcblxcbi5tYWlucGFnZSB7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXG4gIGdhcDogMzBweDtcXG4gIG1hcmdpbi10b3A6IDIwcHg7XFxufVxcblxcbi50ZXh0LS1tYWlucGFnZSB7XFxuICBwYWRkaW5nLWlubGluZTogMjBweDtcXG59XFxuXFxuLnBhbmVsX19leGN1cnNpb25zIHtcXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xcbiAgY29sdW1uLWdhcDogNjBweDtcXG4gIHJvdy1nYXA6IDQwcHg7XFxuICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IG1pbm1heCgyNjBweCwgMzYwcHgpO1xcbiAgcGFkZGluZy1pbmxpbmU6IHVuc2V0O1xcbn1cXG5cXG4ubmF2YmFyX19idG4ge1xcbiAgbGVmdDogMTBweDtcXG59XFxuXFxuLmJhc2tldC1idG5fX3dyYXBwZXIge1xcbiAgdG9wOiAzMHB4O1xcbiAgcmlnaHQ6IDEwcHg7XFxufVxcblxcblxcbkBtZWRpYSAobWluLXdpZHRoOiAzNjBweCkge1xcbiAgLm5hdmJhcl9fYnRuIHtcXG4gICAgbGVmdDogMjVweDtcXG4gIH1cXG5cXG4gIC5iYXNrZXQtYnRuX193cmFwcGVyIHtcXG4gICAgcmlnaHQ6IDI1cHg7XFxuICB9XFxuXFxuICAucGFuZWxfX2V4Y3Vyc2lvbnMge1xcbiAgICBwYWRkaW5nLWlubGluZTogMTB2dztcXG4gIH1cXG5cXG59XFxuXFxuQG1lZGlhIChtaW4td2lkdGg6IDk1MHB4KSB7XFxuICAucGFuZWxfX2V4Y3Vyc2lvbnMge1xcbiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDM2MHB4IDM2MHB4O1xcbiAgICBwYWRkaW5nLWlubGluZTogMTB2dztcXG4gIH1cXG59XCJdLFwic291cmNlUm9vdFwiOlwiXCJ9XSk7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBfX19DU1NfTE9BREVSX0VYUE9SVF9fXztcbiIsIi8vIEltcG9ydHNcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fIGZyb20gXCIuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvc291cmNlTWFwcy5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyBmcm9tIFwiLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiO1xudmFyIF9fX0NTU19MT0FERVJfRVhQT1JUX19fID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18pO1xuLy8gTW9kdWxlXG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5wdXNoKFttb2R1bGUuaWQsIGBodG1sLCBib2R5LCBib2R5IGRpdiwgc3Bhbiwgb2JqZWN0LCBpZnJhbWUsIGgxLCBoMiwgaDMsIGg0LCBoNSwgaDYsIHAsIGJsb2NrcXVvdGUsIHByZSwgYWJiciwgYWRkcmVzcywgY2l0ZSwgY29kZSwgZGVsLCBkZm4sIGVtLCBpbWcsIGlucywga2JkLCBxLCBzYW1wLCBzbWFsbCwgc3Ryb25nLCBzdWIsIHN1cCwgdmFyLCBiLCBpLCBkbCwgZHQsIGRkLCBvbCwgdWwsIGxpLCBmaWVsZHNldCwgZm9ybSwgbGFiZWwsIGxlZ2VuZCwgdGFibGUsIGNhcHRpb24sIHRib2R5LCB0Zm9vdCwgdGhlYWQsIHRyLCB0aCwgdGQsIGFydGljbGUsIGFzaWRlLCBmaWd1cmUsIGZvb3RlciwgaGVhZGVyLCBtZW51LCBuYXYsIHNlY3Rpb24sIHRpbWUsIG1hcmssIGF1ZGlvLCB2aWRlbywgZGV0YWlscywgc3VtbWFyeSB7bWFyZ2luOiAwOyBwYWRkaW5nOiAwOyBib3JkZXI6IDA7IGZvbnQtc2l6ZTogMTAwJTsgZm9udC13ZWlnaHQ6IG5vcm1hbDsgdmVydGljYWwtYWxpZ246IGJhc2VsaW5lOyBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDt9XG5cbm1haW4sIGFydGljbGUsIGFzaWRlLCBmaWd1cmUsIGZvb3RlciwgaGVhZGVyLCBuYXYsIHNlY3Rpb24sIGRldGFpbHMsIHN1bW1hcnkge2Rpc3BsYXk6IGJsb2NrO31cblxuaHRtbCB7Ym94LXNpemluZzogYm9yZGVyLWJveDt9XG5cbiosICo6YmVmb3JlLCAqOmFmdGVyIHtib3gtc2l6aW5nOiBpbmhlcml0O31cblxuaW1nIHttYXgtd2lkdGg6IDEwMCU7fVxuXG51bCB7bGlzdC1zdHlsZTogbm9uZTt9IC8qIHdlJ2xsIHJlc3RvcmUgYnVsbGV0cyBhcyBuZWVkZWQgZm9yIGNvbnRlbnQgKi9cblxuYmxvY2txdW90ZSwgcSB7cXVvdGVzOiBub25lO31cblxuYmxvY2txdW90ZTpiZWZvcmUsIGJsb2NrcXVvdGU6YWZ0ZXIsIHE6YmVmb3JlLCBxOmFmdGVyIHtjb250ZW50OiAnJzsgY29udGVudDogbm9uZTt9XG5cbmEge21hcmdpbjogMDsgcGFkZGluZzogMDsgZm9udC1zaXplOiAxMDAlOyB2ZXJ0aWNhbC1hbGlnbjogYmFzZWxpbmU7IGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O31cblxuZGVsIHt0ZXh0LWRlY29yYXRpb246IGxpbmUtdGhyb3VnaDt9XG5cbmFiYnJbdGl0bGVdLCBkZm5bdGl0bGVdIHtib3JkZXItYm90dG9tOiAxcHggZG90dGVkICMwMDA7IGN1cnNvcjogaGVscDt9XG5cbnRhYmxlIHtib3JkZXItY29sbGFwc2U6IHNlcGFyYXRlOyBib3JkZXItc3BhY2luZzogMDsgdGV4dC1hbGlnbjogbGVmdDt9XG50aCB7Zm9udC13ZWlnaHQ6IGJvbGQ7IHZlcnRpY2FsLWFsaWduOiBib3R0b207fVxudGQge2ZvbnQtd2VpZ2h0OiBub3JtYWw7IHZlcnRpY2FsLWFsaWduOiB0b3A7fVxudGQgaW1nIHt2ZXJ0aWNhbC1hbGlnbjogdG9wO31cblxuaHIge2Rpc3BsYXk6IGJsb2NrOyBoZWlnaHQ6IDFweDsgYm9yZGVyOiAwOyBib3JkZXItdG9wOiAxcHggc29saWQgIzk5OTsgbWFyZ2luOiAxcmVtIDA7IHBhZGRpbmc6IDA7fVxuXG5pbnB1dCwgc2VsZWN0IHt2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO31cblxucHJlIHt3aGl0ZS1zcGFjZTogcHJlLWxpbmU7fVxuXG5pbnB1dFt0eXBlPVwicmFkaW9cIl0ge3ZlcnRpY2FsLWFsaWduOiB0ZXh0LWJvdHRvbTt9XG5pbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0ge3ZlcnRpY2FsLWFsaWduOiBib3R0b207fVxuXG5zbWFsbCB7Zm9udC1zaXplOiAuOHJlbTt9XG5cbnN0cm9uZyB7Zm9udC13ZWlnaHQ6IGJvbGQ7fVxuXG5zdWIsIHN1cCB7Zm9udC1zaXplOiAuOHJlbTsgbGluZS1oZWlnaHQ6IDA7IHBvc2l0aW9uOiByZWxhdGl2ZTt9XG5zdXAge3RvcDogLTAuNXJlbTt9XG5zdWIge2JvdHRvbTogLTAuMjVyZW07fVxuXG5wcmUsIGNvZGUsIGtiZCwgc2FtcCB7Zm9udC1mYW1pbHk6IG1vbm9zcGFjZSwgc2Fucy1zZXJpZjt9XG5cbmxhYmVsLCBpbnB1dFt0eXBlPWJ1dHRvbl0sIGlucHV0W3R5cGU9c3VibWl0XSwgaW5wdXRbdHlwZT1maWxlXSwgYnV0dG9uIHtjdXJzb3I6IHBvaW50ZXI7fVxuXG5idXR0b24sIGlucHV0LCBzZWxlY3QsIHRleHRhcmVhIHttYXJnaW46IDA7fVxuXG5pbnMge2JhY2tncm91bmQtY29sb3I6IHZhcigtLWhpZ2hsaWdodC1jb2xvcik7IGNvbG9yOiAjMDAwOyB0ZXh0LWRlY29yYXRpb246IG5vbmU7fVxubWFyayB7YmFja2dyb3VuZC1jb2xvcjogdmFyKC0taGlnaGxpZ2h0LWNvbG9yKTsgY29sb3I6ICMwMDA7IGZvbnQtc3R5bGU6IGl0YWxpYzsgZm9udC13ZWlnaHQ6IGJvbGQ7fVxuXG5ibG9ja3F1b3RlIHtwYWRkaW5nOiAycmVtOyBib3JkZXItbGVmdDogMXB4IHNvbGlkICMzMzM7fVxuXG4uY2xlYXJmaXg6YWZ0ZXIge2NvbnRlbnQ6IFwiXCI7IGRpc3BsYXk6IHRhYmxlOyBjbGVhcjogYm90aDt9IC8qIGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vc25pcHBldHMvY3NzL2NsZWFyLWZpeC8gKi9cblxuLyog4oCU4oCU4oCU4oCUIEVORCBUSEUgR0VORVJJQyBSRVNFVFMg4oCU4oCU4oCU4oCUICovXG5cbjpyb290IHtcblx0LS1mb250LXN5c3RlbTogc3lzdGVtLXVpLCBcIlNlZ29lIFVJXCIsIFJvYm90bywgSGVsdmV0aWNhLCBBcmlhbCwgc2Fucy1zZXJpZiwgXCJBcHBsZSBDb2xvciBFbW9qaVwiLCBcIlNlZ29lIFVJIEVtb2ppXCIsIFwiU2Vnb2UgVUkgU3ltYm9sXCI7IC8qIGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vc25pcHBldHMvY3NzL3N5c3RlbS1mb250LXN0YWNrICovXG5cdC0tdGV4dC1jb2xvcjogIzMzMztcblx0LS1mZWF0dXJlZC1jb2xvcjogIzAzZjtcblx0LS1mZWF0dXJlZC1jb2xvci1ob3ZlcjogIzY5Zjtcblx0LS1oaWdobGlnaHQtY29sb3I6ICNmY2Q3MDA7XG59XG5cbmJvZHkge2ZvbnQtc2l6ZTogMTZweDsgZm9udC1mYW1pbHk6IHZhcigtLWZvbnQtc3lzdGVtKTsgY29sb3I6IHZhcigtLXRleHQtY29sb3IpO31cblxuYSB7Y29sb3I6IHZhcigtLWZlYXR1cmVkLWNvbG9yKTt9XG5hOmhvdmVyIHtjb2xvcjogdmFyKC0tZmVhdHVyZWQtY29sb3ItaG92ZXIpO31cblxuQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogNDgwcHgpIHtcblx0XG59XG5cbkBtZWRpYSBwcmludCB7XG5cdFxufWAsIFwiXCIse1widmVyc2lvblwiOjMsXCJzb3VyY2VzXCI6W1wid2VicGFjazovLy4vc3JjL2Nzcy9yZXNldC5jc3NcIl0sXCJuYW1lc1wiOltdLFwibWFwcGluZ3NcIjpcIkFBQUEsNllBQTZZLFNBQVMsRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUFFLGVBQWUsRUFBRSxtQkFBbUIsRUFBRSx3QkFBd0IsRUFBRSx1QkFBdUIsQ0FBQzs7QUFFdmdCLDhFQUE4RSxjQUFjLENBQUM7O0FBRTdGLE1BQU0sc0JBQXNCLENBQUM7O0FBRTdCLHNCQUFzQixtQkFBbUIsQ0FBQzs7QUFFMUMsS0FBSyxlQUFlLENBQUM7O0FBRXJCLElBQUksZ0JBQWdCLENBQUMsRUFBRSxnREFBZ0Q7O0FBRXZFLGVBQWUsWUFBWSxDQUFDOztBQUU1Qix3REFBd0QsV0FBVyxFQUFFLGFBQWEsQ0FBQzs7QUFFbkYsR0FBRyxTQUFTLEVBQUUsVUFBVSxFQUFFLGVBQWUsRUFBRSx3QkFBd0IsRUFBRSx1QkFBdUIsQ0FBQzs7QUFFN0YsS0FBSyw2QkFBNkIsQ0FBQzs7QUFFbkMseUJBQXlCLDhCQUE4QixFQUFFLFlBQVksQ0FBQzs7QUFFdEUsT0FBTyx5QkFBeUIsRUFBRSxpQkFBaUIsRUFBRSxnQkFBZ0IsQ0FBQztBQUN0RSxJQUFJLGlCQUFpQixFQUFFLHNCQUFzQixDQUFDO0FBQzlDLElBQUksbUJBQW1CLEVBQUUsbUJBQW1CLENBQUM7QUFDN0MsUUFBUSxtQkFBbUIsQ0FBQzs7QUFFNUIsSUFBSSxjQUFjLEVBQUUsV0FBVyxFQUFFLFNBQVMsRUFBRSwwQkFBMEIsRUFBRSxjQUFjLEVBQUUsVUFBVSxDQUFDOztBQUVuRyxlQUFlLHNCQUFzQixDQUFDOztBQUV0QyxLQUFLLHFCQUFxQixDQUFDOztBQUUzQixxQkFBcUIsMkJBQTJCLENBQUM7QUFDakQsd0JBQXdCLHNCQUFzQixDQUFDOztBQUUvQyxPQUFPLGdCQUFnQixDQUFDOztBQUV4QixRQUFRLGlCQUFpQixDQUFDOztBQUUxQixVQUFVLGdCQUFnQixFQUFFLGNBQWMsRUFBRSxrQkFBa0IsQ0FBQztBQUMvRCxLQUFLLFlBQVksQ0FBQztBQUNsQixLQUFLLGdCQUFnQixDQUFDOztBQUV0QixzQkFBc0Isa0NBQWtDLENBQUM7O0FBRXpELHlFQUF5RSxlQUFlLENBQUM7O0FBRXpGLGlDQUFpQyxTQUFTLENBQUM7O0FBRTNDLEtBQUssd0NBQXdDLEVBQUUsV0FBVyxFQUFFLHFCQUFxQixDQUFDO0FBQ2xGLE1BQU0sd0NBQXdDLEVBQUUsV0FBVyxFQUFFLGtCQUFrQixFQUFFLGlCQUFpQixDQUFDOztBQUVuRyxZQUFZLGFBQWEsRUFBRSwyQkFBMkIsQ0FBQzs7QUFFdkQsaUJBQWlCLFdBQVcsRUFBRSxjQUFjLEVBQUUsV0FBVyxDQUFDLEVBQUUsbURBQW1EOztBQUUvRyxxQ0FBcUM7O0FBRXJDO0NBQ0Msb0lBQW9JLEVBQUUsMERBQTBEO0NBQ2hNLGtCQUFrQjtDQUNsQixzQkFBc0I7Q0FDdEIsNEJBQTRCO0NBQzVCLDBCQUEwQjtBQUMzQjs7QUFFQSxNQUFNLGVBQWUsRUFBRSwrQkFBK0IsRUFBRSx3QkFBd0IsQ0FBQzs7QUFFakYsR0FBRyw0QkFBNEIsQ0FBQztBQUNoQyxTQUFTLGtDQUFrQyxDQUFDOztBQUU1Qzs7QUFFQTs7QUFFQTs7QUFFQVwiLFwic291cmNlc0NvbnRlbnRcIjpbXCJodG1sLCBib2R5LCBib2R5IGRpdiwgc3Bhbiwgb2JqZWN0LCBpZnJhbWUsIGgxLCBoMiwgaDMsIGg0LCBoNSwgaDYsIHAsIGJsb2NrcXVvdGUsIHByZSwgYWJiciwgYWRkcmVzcywgY2l0ZSwgY29kZSwgZGVsLCBkZm4sIGVtLCBpbWcsIGlucywga2JkLCBxLCBzYW1wLCBzbWFsbCwgc3Ryb25nLCBzdWIsIHN1cCwgdmFyLCBiLCBpLCBkbCwgZHQsIGRkLCBvbCwgdWwsIGxpLCBmaWVsZHNldCwgZm9ybSwgbGFiZWwsIGxlZ2VuZCwgdGFibGUsIGNhcHRpb24sIHRib2R5LCB0Zm9vdCwgdGhlYWQsIHRyLCB0aCwgdGQsIGFydGljbGUsIGFzaWRlLCBmaWd1cmUsIGZvb3RlciwgaGVhZGVyLCBtZW51LCBuYXYsIHNlY3Rpb24sIHRpbWUsIG1hcmssIGF1ZGlvLCB2aWRlbywgZGV0YWlscywgc3VtbWFyeSB7bWFyZ2luOiAwOyBwYWRkaW5nOiAwOyBib3JkZXI6IDA7IGZvbnQtc2l6ZTogMTAwJTsgZm9udC13ZWlnaHQ6IG5vcm1hbDsgdmVydGljYWwtYWxpZ246IGJhc2VsaW5lOyBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDt9XFxuXFxubWFpbiwgYXJ0aWNsZSwgYXNpZGUsIGZpZ3VyZSwgZm9vdGVyLCBoZWFkZXIsIG5hdiwgc2VjdGlvbiwgZGV0YWlscywgc3VtbWFyeSB7ZGlzcGxheTogYmxvY2s7fVxcblxcbmh0bWwge2JveC1zaXppbmc6IGJvcmRlci1ib3g7fVxcblxcbiosICo6YmVmb3JlLCAqOmFmdGVyIHtib3gtc2l6aW5nOiBpbmhlcml0O31cXG5cXG5pbWcge21heC13aWR0aDogMTAwJTt9XFxuXFxudWwge2xpc3Qtc3R5bGU6IG5vbmU7fSAvKiB3ZSdsbCByZXN0b3JlIGJ1bGxldHMgYXMgbmVlZGVkIGZvciBjb250ZW50ICovXFxuXFxuYmxvY2txdW90ZSwgcSB7cXVvdGVzOiBub25lO31cXG5cXG5ibG9ja3F1b3RlOmJlZm9yZSwgYmxvY2txdW90ZTphZnRlciwgcTpiZWZvcmUsIHE6YWZ0ZXIge2NvbnRlbnQ6ICcnOyBjb250ZW50OiBub25lO31cXG5cXG5hIHttYXJnaW46IDA7IHBhZGRpbmc6IDA7IGZvbnQtc2l6ZTogMTAwJTsgdmVydGljYWwtYWxpZ246IGJhc2VsaW5lOyBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDt9XFxuXFxuZGVsIHt0ZXh0LWRlY29yYXRpb246IGxpbmUtdGhyb3VnaDt9XFxuXFxuYWJiclt0aXRsZV0sIGRmblt0aXRsZV0ge2JvcmRlci1ib3R0b206IDFweCBkb3R0ZWQgIzAwMDsgY3Vyc29yOiBoZWxwO31cXG5cXG50YWJsZSB7Ym9yZGVyLWNvbGxhcHNlOiBzZXBhcmF0ZTsgYm9yZGVyLXNwYWNpbmc6IDA7IHRleHQtYWxpZ246IGxlZnQ7fVxcbnRoIHtmb250LXdlaWdodDogYm9sZDsgdmVydGljYWwtYWxpZ246IGJvdHRvbTt9XFxudGQge2ZvbnQtd2VpZ2h0OiBub3JtYWw7IHZlcnRpY2FsLWFsaWduOiB0b3A7fVxcbnRkIGltZyB7dmVydGljYWwtYWxpZ246IHRvcDt9XFxuXFxuaHIge2Rpc3BsYXk6IGJsb2NrOyBoZWlnaHQ6IDFweDsgYm9yZGVyOiAwOyBib3JkZXItdG9wOiAxcHggc29saWQgIzk5OTsgbWFyZ2luOiAxcmVtIDA7IHBhZGRpbmc6IDA7fVxcblxcbmlucHV0LCBzZWxlY3Qge3ZlcnRpY2FsLWFsaWduOiBtaWRkbGU7fVxcblxcbnByZSB7d2hpdGUtc3BhY2U6IHByZS1saW5lO31cXG5cXG5pbnB1dFt0eXBlPVxcXCJyYWRpb1xcXCJdIHt2ZXJ0aWNhbC1hbGlnbjogdGV4dC1ib3R0b207fVxcbmlucHV0W3R5cGU9XFxcImNoZWNrYm94XFxcIl0ge3ZlcnRpY2FsLWFsaWduOiBib3R0b207fVxcblxcbnNtYWxsIHtmb250LXNpemU6IC44cmVtO31cXG5cXG5zdHJvbmcge2ZvbnQtd2VpZ2h0OiBib2xkO31cXG5cXG5zdWIsIHN1cCB7Zm9udC1zaXplOiAuOHJlbTsgbGluZS1oZWlnaHQ6IDA7IHBvc2l0aW9uOiByZWxhdGl2ZTt9XFxuc3VwIHt0b3A6IC0wLjVyZW07fVxcbnN1YiB7Ym90dG9tOiAtMC4yNXJlbTt9XFxuXFxucHJlLCBjb2RlLCBrYmQsIHNhbXAge2ZvbnQtZmFtaWx5OiBtb25vc3BhY2UsIHNhbnMtc2VyaWY7fVxcblxcbmxhYmVsLCBpbnB1dFt0eXBlPWJ1dHRvbl0sIGlucHV0W3R5cGU9c3VibWl0XSwgaW5wdXRbdHlwZT1maWxlXSwgYnV0dG9uIHtjdXJzb3I6IHBvaW50ZXI7fVxcblxcbmJ1dHRvbiwgaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEge21hcmdpbjogMDt9XFxuXFxuaW5zIHtiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1oaWdobGlnaHQtY29sb3IpOyBjb2xvcjogIzAwMDsgdGV4dC1kZWNvcmF0aW9uOiBub25lO31cXG5tYXJrIHtiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1oaWdobGlnaHQtY29sb3IpOyBjb2xvcjogIzAwMDsgZm9udC1zdHlsZTogaXRhbGljOyBmb250LXdlaWdodDogYm9sZDt9XFxuXFxuYmxvY2txdW90ZSB7cGFkZGluZzogMnJlbTsgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAjMzMzO31cXG5cXG4uY2xlYXJmaXg6YWZ0ZXIge2NvbnRlbnQ6IFxcXCJcXFwiOyBkaXNwbGF5OiB0YWJsZTsgY2xlYXI6IGJvdGg7fSAvKiBodHRwczovL2Nzcy10cmlja3MuY29tL3NuaXBwZXRzL2Nzcy9jbGVhci1maXgvICovXFxuXFxuLyog4oCU4oCU4oCU4oCUIEVORCBUSEUgR0VORVJJQyBSRVNFVFMg4oCU4oCU4oCU4oCUICovXFxuXFxuOnJvb3Qge1xcblxcdC0tZm9udC1zeXN0ZW06IHN5c3RlbS11aSwgXFxcIlNlZ29lIFVJXFxcIiwgUm9ib3RvLCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmLCBcXFwiQXBwbGUgQ29sb3IgRW1vamlcXFwiLCBcXFwiU2Vnb2UgVUkgRW1vamlcXFwiLCBcXFwiU2Vnb2UgVUkgU3ltYm9sXFxcIjsgLyogaHR0cHM6Ly9jc3MtdHJpY2tzLmNvbS9zbmlwcGV0cy9jc3Mvc3lzdGVtLWZvbnQtc3RhY2sgKi9cXG5cXHQtLXRleHQtY29sb3I6ICMzMzM7XFxuXFx0LS1mZWF0dXJlZC1jb2xvcjogIzAzZjtcXG5cXHQtLWZlYXR1cmVkLWNvbG9yLWhvdmVyOiAjNjlmO1xcblxcdC0taGlnaGxpZ2h0LWNvbG9yOiAjZmNkNzAwO1xcbn1cXG5cXG5ib2R5IHtmb250LXNpemU6IDE2cHg7IGZvbnQtZmFtaWx5OiB2YXIoLS1mb250LXN5c3RlbSk7IGNvbG9yOiB2YXIoLS10ZXh0LWNvbG9yKTt9XFxuXFxuYSB7Y29sb3I6IHZhcigtLWZlYXR1cmVkLWNvbG9yKTt9XFxuYTpob3ZlciB7Y29sb3I6IHZhcigtLWZlYXR1cmVkLWNvbG9yLWhvdmVyKTt9XFxuXFxuQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogNDgwcHgpIHtcXG5cXHRcXG59XFxuXFxuQG1lZGlhIHByaW50IHtcXG5cXHRcXG59XCJdLFwic291cmNlUm9vdFwiOlwiXCJ9XSk7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBfX19DU1NfTE9BREVSX0VYUE9SVF9fXztcbiIsIlwidXNlIHN0cmljdFwiO1xuXG4vKlxuICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuICBBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY3NzV2l0aE1hcHBpbmdUb1N0cmluZykge1xuICB2YXIgbGlzdCA9IFtdO1xuXG4gIC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcbiAgbGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgdmFyIGNvbnRlbnQgPSBcIlwiO1xuICAgICAgdmFyIG5lZWRMYXllciA9IHR5cGVvZiBpdGVtWzVdICE9PSBcInVuZGVmaW5lZFwiO1xuICAgICAgaWYgKGl0ZW1bNF0pIHtcbiAgICAgICAgY29udGVudCArPSBcIkBzdXBwb3J0cyAoXCIuY29uY2F0KGl0ZW1bNF0sIFwiKSB7XCIpO1xuICAgICAgfVxuICAgICAgaWYgKGl0ZW1bMl0pIHtcbiAgICAgICAgY29udGVudCArPSBcIkBtZWRpYSBcIi5jb25jYXQoaXRlbVsyXSwgXCIge1wiKTtcbiAgICAgIH1cbiAgICAgIGlmIChuZWVkTGF5ZXIpIHtcbiAgICAgICAgY29udGVudCArPSBcIkBsYXllclwiLmNvbmNhdChpdGVtWzVdLmxlbmd0aCA+IDAgPyBcIiBcIi5jb25jYXQoaXRlbVs1XSkgOiBcIlwiLCBcIiB7XCIpO1xuICAgICAgfVxuICAgICAgY29udGVudCArPSBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0pO1xuICAgICAgaWYgKG5lZWRMYXllcikge1xuICAgICAgICBjb250ZW50ICs9IFwifVwiO1xuICAgICAgfVxuICAgICAgaWYgKGl0ZW1bMl0pIHtcbiAgICAgICAgY29udGVudCArPSBcIn1cIjtcbiAgICAgIH1cbiAgICAgIGlmIChpdGVtWzRdKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJ9XCI7XG4gICAgICB9XG4gICAgICByZXR1cm4gY29udGVudDtcbiAgICB9KS5qb2luKFwiXCIpO1xuICB9O1xuXG4gIC8vIGltcG9ydCBhIGxpc3Qgb2YgbW9kdWxlcyBpbnRvIHRoZSBsaXN0XG4gIGxpc3QuaSA9IGZ1bmN0aW9uIGkobW9kdWxlcywgbWVkaWEsIGRlZHVwZSwgc3VwcG9ydHMsIGxheWVyKSB7XG4gICAgaWYgKHR5cGVvZiBtb2R1bGVzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCB1bmRlZmluZWRdXTtcbiAgICB9XG4gICAgdmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcbiAgICBpZiAoZGVkdXBlKSB7XG4gICAgICBmb3IgKHZhciBrID0gMDsgayA8IHRoaXMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgdmFyIGlkID0gdGhpc1trXVswXTtcbiAgICAgICAgaWYgKGlkICE9IG51bGwpIHtcbiAgICAgICAgICBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2lkXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZm9yICh2YXIgX2sgPSAwOyBfayA8IG1vZHVsZXMubGVuZ3RoOyBfaysrKSB7XG4gICAgICB2YXIgaXRlbSA9IFtdLmNvbmNhdChtb2R1bGVzW19rXSk7XG4gICAgICBpZiAoZGVkdXBlICYmIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaXRlbVswXV0pIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGxheWVyICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgaXRlbVs1XSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIGl0ZW1bNV0gPSBsYXllcjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtWzFdID0gXCJAbGF5ZXJcIi5jb25jYXQoaXRlbVs1XS5sZW5ndGggPiAwID8gXCIgXCIuY29uY2F0KGl0ZW1bNV0pIDogXCJcIiwgXCIge1wiKS5jb25jYXQoaXRlbVsxXSwgXCJ9XCIpO1xuICAgICAgICAgIGl0ZW1bNV0gPSBsYXllcjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKG1lZGlhKSB7XG4gICAgICAgIGlmICghaXRlbVsyXSkge1xuICAgICAgICAgIGl0ZW1bMl0gPSBtZWRpYTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtWzFdID0gXCJAbWVkaWEgXCIuY29uY2F0KGl0ZW1bMl0sIFwiIHtcIikuY29uY2F0KGl0ZW1bMV0sIFwifVwiKTtcbiAgICAgICAgICBpdGVtWzJdID0gbWVkaWE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChzdXBwb3J0cykge1xuICAgICAgICBpZiAoIWl0ZW1bNF0pIHtcbiAgICAgICAgICBpdGVtWzRdID0gXCJcIi5jb25jYXQoc3VwcG9ydHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1bMV0gPSBcIkBzdXBwb3J0cyAoXCIuY29uY2F0KGl0ZW1bNF0sIFwiKSB7XCIpLmNvbmNhdChpdGVtWzFdLCBcIn1cIik7XG4gICAgICAgICAgaXRlbVs0XSA9IHN1cHBvcnRzO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsaXN0LnB1c2goaXRlbSk7XG4gICAgfVxuICB9O1xuICByZXR1cm4gbGlzdDtcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHVybCwgb3B0aW9ucykge1xuICBpZiAoIW9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0ge307XG4gIH1cbiAgaWYgKCF1cmwpIHtcbiAgICByZXR1cm4gdXJsO1xuICB9XG4gIHVybCA9IFN0cmluZyh1cmwuX19lc01vZHVsZSA/IHVybC5kZWZhdWx0IDogdXJsKTtcblxuICAvLyBJZiB1cmwgaXMgYWxyZWFkeSB3cmFwcGVkIGluIHF1b3RlcywgcmVtb3ZlIHRoZW1cbiAgaWYgKC9eWydcIl0uKlsnXCJdJC8udGVzdCh1cmwpKSB7XG4gICAgdXJsID0gdXJsLnNsaWNlKDEsIC0xKTtcbiAgfVxuICBpZiAob3B0aW9ucy5oYXNoKSB7XG4gICAgdXJsICs9IG9wdGlvbnMuaGFzaDtcbiAgfVxuXG4gIC8vIFNob3VsZCB1cmwgYmUgd3JhcHBlZD9cbiAgLy8gU2VlIGh0dHBzOi8vZHJhZnRzLmNzc3dnLm9yZy9jc3MtdmFsdWVzLTMvI3VybHNcbiAgaWYgKC9bXCInKCkgXFx0XFxuXXwoJTIwKS8udGVzdCh1cmwpIHx8IG9wdGlvbnMubmVlZFF1b3Rlcykge1xuICAgIHJldHVybiBcIlxcXCJcIi5jb25jYXQodXJsLnJlcGxhY2UoL1wiL2csICdcXFxcXCInKS5yZXBsYWNlKC9cXG4vZywgXCJcXFxcblwiKSwgXCJcXFwiXCIpO1xuICB9XG4gIHJldHVybiB1cmw7XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gIHZhciBjb250ZW50ID0gaXRlbVsxXTtcbiAgdmFyIGNzc01hcHBpbmcgPSBpdGVtWzNdO1xuICBpZiAoIWNzc01hcHBpbmcpIHtcbiAgICByZXR1cm4gY29udGVudDtcbiAgfVxuICBpZiAodHlwZW9mIGJ0b2EgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHZhciBiYXNlNjQgPSBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShjc3NNYXBwaW5nKSkpKTtcbiAgICB2YXIgZGF0YSA9IFwic291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsXCIuY29uY2F0KGJhc2U2NCk7XG4gICAgdmFyIHNvdXJjZU1hcHBpbmcgPSBcIi8qIyBcIi5jb25jYXQoZGF0YSwgXCIgKi9cIik7XG4gICAgcmV0dXJuIFtjb250ZW50XS5jb25jYXQoW3NvdXJjZU1hcHBpbmddKS5qb2luKFwiXFxuXCIpO1xuICB9XG4gIHJldHVybiBbY29udGVudF0uam9pbihcIlxcblwiKTtcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBzdHlsZXNJbkRPTSA9IFtdO1xuZnVuY3Rpb24gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcikge1xuICB2YXIgcmVzdWx0ID0gLTE7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzSW5ET00ubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoc3R5bGVzSW5ET01baV0uaWRlbnRpZmllciA9PT0gaWRlbnRpZmllcikge1xuICAgICAgcmVzdWx0ID0gaTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpIHtcbiAgdmFyIGlkQ291bnRNYXAgPSB7fTtcbiAgdmFyIGlkZW50aWZpZXJzID0gW107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gbGlzdFtpXTtcbiAgICB2YXIgaWQgPSBvcHRpb25zLmJhc2UgPyBpdGVtWzBdICsgb3B0aW9ucy5iYXNlIDogaXRlbVswXTtcbiAgICB2YXIgY291bnQgPSBpZENvdW50TWFwW2lkXSB8fCAwO1xuICAgIHZhciBpZGVudGlmaWVyID0gXCJcIi5jb25jYXQoaWQsIFwiIFwiKS5jb25jYXQoY291bnQpO1xuICAgIGlkQ291bnRNYXBbaWRdID0gY291bnQgKyAxO1xuICAgIHZhciBpbmRleEJ5SWRlbnRpZmllciA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgIHZhciBvYmogPSB7XG4gICAgICBjc3M6IGl0ZW1bMV0sXG4gICAgICBtZWRpYTogaXRlbVsyXSxcbiAgICAgIHNvdXJjZU1hcDogaXRlbVszXSxcbiAgICAgIHN1cHBvcnRzOiBpdGVtWzRdLFxuICAgICAgbGF5ZXI6IGl0ZW1bNV1cbiAgICB9O1xuICAgIGlmIChpbmRleEJ5SWRlbnRpZmllciAhPT0gLTEpIHtcbiAgICAgIHN0eWxlc0luRE9NW2luZGV4QnlJZGVudGlmaWVyXS5yZWZlcmVuY2VzKys7XG4gICAgICBzdHlsZXNJbkRPTVtpbmRleEJ5SWRlbnRpZmllcl0udXBkYXRlcihvYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgdXBkYXRlciA9IGFkZEVsZW1lbnRTdHlsZShvYmosIG9wdGlvbnMpO1xuICAgICAgb3B0aW9ucy5ieUluZGV4ID0gaTtcbiAgICAgIHN0eWxlc0luRE9NLnNwbGljZShpLCAwLCB7XG4gICAgICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXIsXG4gICAgICAgIHVwZGF0ZXI6IHVwZGF0ZXIsXG4gICAgICAgIHJlZmVyZW5jZXM6IDFcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZGVudGlmaWVycy5wdXNoKGlkZW50aWZpZXIpO1xuICB9XG4gIHJldHVybiBpZGVudGlmaWVycztcbn1cbmZ1bmN0aW9uIGFkZEVsZW1lbnRTdHlsZShvYmosIG9wdGlvbnMpIHtcbiAgdmFyIGFwaSA9IG9wdGlvbnMuZG9tQVBJKG9wdGlvbnMpO1xuICBhcGkudXBkYXRlKG9iaik7XG4gIHZhciB1cGRhdGVyID0gZnVuY3Rpb24gdXBkYXRlcihuZXdPYmopIHtcbiAgICBpZiAobmV3T2JqKSB7XG4gICAgICBpZiAobmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJiBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJiBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwICYmIG5ld09iai5zdXBwb3J0cyA9PT0gb2JqLnN1cHBvcnRzICYmIG5ld09iai5sYXllciA9PT0gb2JqLmxheWVyKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGFwaS51cGRhdGUob2JqID0gbmV3T2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXBpLnJlbW92ZSgpO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIHVwZGF0ZXI7XG59XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChsaXN0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBsaXN0ID0gbGlzdCB8fCBbXTtcbiAgdmFyIGxhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZShuZXdMaXN0KSB7XG4gICAgbmV3TGlzdCA9IG5ld0xpc3QgfHwgW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW2ldO1xuICAgICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgICBzdHlsZXNJbkRPTVtpbmRleF0ucmVmZXJlbmNlcy0tO1xuICAgIH1cbiAgICB2YXIgbmV3TGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKG5ld0xpc3QsIG9wdGlvbnMpO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgX2lkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbX2ldO1xuICAgICAgdmFyIF9pbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKF9pZGVudGlmaWVyKTtcbiAgICAgIGlmIChzdHlsZXNJbkRPTVtfaW5kZXhdLnJlZmVyZW5jZXMgPT09IDApIHtcbiAgICAgICAgc3R5bGVzSW5ET01bX2luZGV4XS51cGRhdGVyKCk7XG4gICAgICAgIHN0eWxlc0luRE9NLnNwbGljZShfaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH1cbiAgICBsYXN0SWRlbnRpZmllcnMgPSBuZXdMYXN0SWRlbnRpZmllcnM7XG4gIH07XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgbWVtbyA9IHt9O1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIGdldFRhcmdldCh0YXJnZXQpIHtcbiAgaWYgKHR5cGVvZiBtZW1vW3RhcmdldF0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB2YXIgc3R5bGVUYXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCk7XG5cbiAgICAvLyBTcGVjaWFsIGNhc2UgdG8gcmV0dXJuIGhlYWQgb2YgaWZyYW1lIGluc3RlYWQgb2YgaWZyYW1lIGl0c2VsZlxuICAgIGlmICh3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQgJiYgc3R5bGVUYXJnZXQgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFRoaXMgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYWNjZXNzIHRvIGlmcmFtZSBpcyBibG9ja2VkXG4gICAgICAgIC8vIGR1ZSB0byBjcm9zcy1vcmlnaW4gcmVzdHJpY3Rpb25zXG4gICAgICAgIHN0eWxlVGFyZ2V0ID0gc3R5bGVUYXJnZXQuY29udGVudERvY3VtZW50LmhlYWQ7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBuZXh0XG4gICAgICAgIHN0eWxlVGFyZ2V0ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gICAgbWVtb1t0YXJnZXRdID0gc3R5bGVUYXJnZXQ7XG4gIH1cbiAgcmV0dXJuIG1lbW9bdGFyZ2V0XTtcbn1cblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBpbnNlcnRCeVNlbGVjdG9yKGluc2VydCwgc3R5bGUpIHtcbiAgdmFyIHRhcmdldCA9IGdldFRhcmdldChpbnNlcnQpO1xuICBpZiAoIXRhcmdldCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkbid0IGZpbmQgYSBzdHlsZSB0YXJnZXQuIFRoaXMgcHJvYmFibHkgbWVhbnMgdGhhdCB0aGUgdmFsdWUgZm9yIHRoZSAnaW5zZXJ0JyBwYXJhbWV0ZXIgaXMgaW52YWxpZC5cIik7XG4gIH1cbiAgdGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcbn1cbm1vZHVsZS5leHBvcnRzID0gaW5zZXJ0QnlTZWxlY3RvcjsiLCJcInVzZSBzdHJpY3RcIjtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykge1xuICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgb3B0aW9ucy5zZXRBdHRyaWJ1dGVzKGVsZW1lbnQsIG9wdGlvbnMuYXR0cmlidXRlcyk7XG4gIG9wdGlvbnMuaW5zZXJ0KGVsZW1lbnQsIG9wdGlvbnMub3B0aW9ucyk7XG4gIHJldHVybiBlbGVtZW50O1xufVxubW9kdWxlLmV4cG9ydHMgPSBpbnNlcnRTdHlsZUVsZW1lbnQ7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gc2V0QXR0cmlidXRlc1dpdGhvdXRBdHRyaWJ1dGVzKHN0eWxlRWxlbWVudCkge1xuICB2YXIgbm9uY2UgPSB0eXBlb2YgX193ZWJwYWNrX25vbmNlX18gIT09IFwidW5kZWZpbmVkXCIgPyBfX3dlYnBhY2tfbm9uY2VfXyA6IG51bGw7XG4gIGlmIChub25jZSkge1xuICAgIHN0eWxlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJub25jZVwiLCBub25jZSk7XG4gIH1cbn1cbm1vZHVsZS5leHBvcnRzID0gc2V0QXR0cmlidXRlc1dpdGhvdXRBdHRyaWJ1dGVzOyIsIlwidXNlIHN0cmljdFwiO1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIGFwcGx5KHN0eWxlRWxlbWVudCwgb3B0aW9ucywgb2JqKSB7XG4gIHZhciBjc3MgPSBcIlwiO1xuICBpZiAob2JqLnN1cHBvcnRzKSB7XG4gICAgY3NzICs9IFwiQHN1cHBvcnRzIChcIi5jb25jYXQob2JqLnN1cHBvcnRzLCBcIikge1wiKTtcbiAgfVxuICBpZiAob2JqLm1lZGlhKSB7XG4gICAgY3NzICs9IFwiQG1lZGlhIFwiLmNvbmNhdChvYmoubWVkaWEsIFwiIHtcIik7XG4gIH1cbiAgdmFyIG5lZWRMYXllciA9IHR5cGVvZiBvYmoubGF5ZXIgIT09IFwidW5kZWZpbmVkXCI7XG4gIGlmIChuZWVkTGF5ZXIpIHtcbiAgICBjc3MgKz0gXCJAbGF5ZXJcIi5jb25jYXQob2JqLmxheWVyLmxlbmd0aCA+IDAgPyBcIiBcIi5jb25jYXQob2JqLmxheWVyKSA6IFwiXCIsIFwiIHtcIik7XG4gIH1cbiAgY3NzICs9IG9iai5jc3M7XG4gIGlmIChuZWVkTGF5ZXIpIHtcbiAgICBjc3MgKz0gXCJ9XCI7XG4gIH1cbiAgaWYgKG9iai5tZWRpYSkge1xuICAgIGNzcyArPSBcIn1cIjtcbiAgfVxuICBpZiAob2JqLnN1cHBvcnRzKSB7XG4gICAgY3NzICs9IFwifVwiO1xuICB9XG4gIHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuICBpZiAoc291cmNlTWFwICYmIHR5cGVvZiBidG9hICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgY3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIi5jb25jYXQoYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSwgXCIgKi9cIik7XG4gIH1cblxuICAvLyBGb3Igb2xkIElFXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cbiAgb3B0aW9ucy5zdHlsZVRhZ1RyYW5zZm9ybShjc3MsIHN0eWxlRWxlbWVudCwgb3B0aW9ucy5vcHRpb25zKTtcbn1cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZUVsZW1lbnQpIHtcbiAgLy8gaXN0YW5idWwgaWdub3JlIGlmXG4gIGlmIChzdHlsZUVsZW1lbnQucGFyZW50Tm9kZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBzdHlsZUVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQpO1xufVxuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIGRvbUFQSShvcHRpb25zKSB7XG4gIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoKSB7fSxcbiAgICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge31cbiAgICB9O1xuICB9XG4gIHZhciBzdHlsZUVsZW1lbnQgPSBvcHRpb25zLmluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKTtcbiAgcmV0dXJuIHtcbiAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShvYmopIHtcbiAgICAgIGFwcGx5KHN0eWxlRWxlbWVudCwgb3B0aW9ucywgb2JqKTtcbiAgICB9LFxuICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgICAgcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCk7XG4gICAgfVxuICB9O1xufVxubW9kdWxlLmV4cG9ydHMgPSBkb21BUEk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gc3R5bGVUYWdUcmFuc2Zvcm0oY3NzLCBzdHlsZUVsZW1lbnQpIHtcbiAgaWYgKHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcbiAgfSBlbHNlIHtcbiAgICB3aGlsZSAoc3R5bGVFbGVtZW50LmZpcnN0Q2hpbGQpIHtcbiAgICAgIHN0eWxlRWxlbWVudC5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gICAgfVxuICAgIHN0eWxlRWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcbiAgfVxufVxubW9kdWxlLmV4cG9ydHMgPSBzdHlsZVRhZ1RyYW5zZm9ybTsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdGlkOiBtb2R1bGVJZCxcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbl9fd2VicGFja19yZXF1aXJlX18ubSA9IF9fd2VicGFja19tb2R1bGVzX187XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwidmFyIHNjcmlwdFVybDtcbmlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLmcuaW1wb3J0U2NyaXB0cykgc2NyaXB0VXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmxvY2F0aW9uICsgXCJcIjtcbnZhciBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5kb2N1bWVudDtcbmlmICghc2NyaXB0VXJsICYmIGRvY3VtZW50KSB7XG5cdGlmIChkb2N1bWVudC5jdXJyZW50U2NyaXB0KVxuXHRcdHNjcmlwdFVybCA9IGRvY3VtZW50LmN1cnJlbnRTY3JpcHQuc3JjO1xuXHRpZiAoIXNjcmlwdFVybCkge1xuXHRcdHZhciBzY3JpcHRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIik7XG5cdFx0aWYoc2NyaXB0cy5sZW5ndGgpIHtcblx0XHRcdHZhciBpID0gc2NyaXB0cy5sZW5ndGggLSAxO1xuXHRcdFx0d2hpbGUgKGkgPiAtMSAmJiAoIXNjcmlwdFVybCB8fCAhL15odHRwKHM/KTovLnRlc3Qoc2NyaXB0VXJsKSkpIHNjcmlwdFVybCA9IHNjcmlwdHNbaS0tXS5zcmM7XG5cdFx0fVxuXHR9XG59XG4vLyBXaGVuIHN1cHBvcnRpbmcgYnJvd3NlcnMgd2hlcmUgYW4gYXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCB5b3UgbXVzdCBzcGVjaWZ5IGFuIG91dHB1dC5wdWJsaWNQYXRoIG1hbnVhbGx5IHZpYSBjb25maWd1cmF0aW9uXG4vLyBvciBwYXNzIGFuIGVtcHR5IHN0cmluZyAoXCJcIikgYW5kIHNldCB0aGUgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gdmFyaWFibGUgZnJvbSB5b3VyIGNvZGUgdG8gdXNlIHlvdXIgb3duIGxvZ2ljLlxuaWYgKCFzY3JpcHRVcmwpIHRocm93IG5ldyBFcnJvcihcIkF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyXCIpO1xuc2NyaXB0VXJsID0gc2NyaXB0VXJsLnJlcGxhY2UoLyMuKiQvLCBcIlwiKS5yZXBsYWNlKC9cXD8uKiQvLCBcIlwiKS5yZXBsYWNlKC9cXC9bXlxcL10rJC8sIFwiL1wiKTtcbl9fd2VicGFja19yZXF1aXJlX18ucCA9IHNjcmlwdFVybDsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmIgPSBkb2N1bWVudC5iYXNlVVJJIHx8IHNlbGYubG9jYXRpb24uaHJlZjtcblxuLy8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3Ncbi8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuLy8gW3Jlc29sdmUsIHJlamVjdCwgUHJvbWlzZV0gPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG52YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuXHQ4MTg6IDBcbn07XG5cbi8vIG5vIGNodW5rIG9uIGRlbWFuZCBsb2FkaW5nXG5cbi8vIG5vIHByZWZldGNoaW5nXG5cbi8vIG5vIHByZWxvYWRlZFxuXG4vLyBubyBITVJcblxuLy8gbm8gSE1SIG1hbmlmZXN0XG5cbi8vIG5vIG9uIGNodW5rcyBsb2FkZWRcblxuLy8gbm8ganNvbnAgZnVuY3Rpb24iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm5jID0gdW5kZWZpbmVkOyIsIlxuICAgICAgaW1wb3J0IEFQSSBmcm9tIFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiO1xuICAgICAgaW1wb3J0IGRvbUFQSSBmcm9tIFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlRG9tQVBJLmpzXCI7XG4gICAgICBpbXBvcnQgaW5zZXJ0Rm4gZnJvbSBcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRCeVNlbGVjdG9yLmpzXCI7XG4gICAgICBpbXBvcnQgc2V0QXR0cmlidXRlcyBmcm9tIFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3NldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlcy5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydFN0eWxlRWxlbWVudCBmcm9tIFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydFN0eWxlRWxlbWVudC5qc1wiO1xuICAgICAgaW1wb3J0IHN0eWxlVGFnVHJhbnNmb3JtRm4gZnJvbSBcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZVRhZ1RyYW5zZm9ybS5qc1wiO1xuICAgICAgaW1wb3J0IGNvbnRlbnQsICogYXMgbmFtZWRFeHBvcnQgZnJvbSBcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9yZXNldC5jc3NcIjtcbiAgICAgIFxuICAgICAgXG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuc3R5bGVUYWdUcmFuc2Zvcm0gPSBzdHlsZVRhZ1RyYW5zZm9ybUZuO1xub3B0aW9ucy5zZXRBdHRyaWJ1dGVzID0gc2V0QXR0cmlidXRlcztcblxuICAgICAgb3B0aW9ucy5pbnNlcnQgPSBpbnNlcnRGbi5iaW5kKG51bGwsIFwiaGVhZFwiKTtcbiAgICBcbm9wdGlvbnMuZG9tQVBJID0gZG9tQVBJO1xub3B0aW9ucy5pbnNlcnRTdHlsZUVsZW1lbnQgPSBpbnNlcnRTdHlsZUVsZW1lbnQ7XG5cbnZhciB1cGRhdGUgPSBBUEkoY29udGVudCwgb3B0aW9ucyk7XG5cblxuXG5leHBvcnQgKiBmcm9tIFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL3Jlc2V0LmNzc1wiO1xuICAgICAgIGV4cG9ydCBkZWZhdWx0IGNvbnRlbnQgJiYgY29udGVudC5sb2NhbHMgPyBjb250ZW50LmxvY2FscyA6IHVuZGVmaW5lZDtcbiIsIlxuICAgICAgaW1wb3J0IEFQSSBmcm9tIFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiO1xuICAgICAgaW1wb3J0IGRvbUFQSSBmcm9tIFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlRG9tQVBJLmpzXCI7XG4gICAgICBpbXBvcnQgaW5zZXJ0Rm4gZnJvbSBcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRCeVNlbGVjdG9yLmpzXCI7XG4gICAgICBpbXBvcnQgc2V0QXR0cmlidXRlcyBmcm9tIFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3NldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlcy5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydFN0eWxlRWxlbWVudCBmcm9tIFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydFN0eWxlRWxlbWVudC5qc1wiO1xuICAgICAgaW1wb3J0IHN0eWxlVGFnVHJhbnNmb3JtRm4gZnJvbSBcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZVRhZ1RyYW5zZm9ybS5qc1wiO1xuICAgICAgaW1wb3J0IGNvbnRlbnQsICogYXMgbmFtZWRFeHBvcnQgZnJvbSBcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9mb250cy5jc3NcIjtcbiAgICAgIFxuICAgICAgXG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuc3R5bGVUYWdUcmFuc2Zvcm0gPSBzdHlsZVRhZ1RyYW5zZm9ybUZuO1xub3B0aW9ucy5zZXRBdHRyaWJ1dGVzID0gc2V0QXR0cmlidXRlcztcblxuICAgICAgb3B0aW9ucy5pbnNlcnQgPSBpbnNlcnRGbi5iaW5kKG51bGwsIFwiaGVhZFwiKTtcbiAgICBcbm9wdGlvbnMuZG9tQVBJID0gZG9tQVBJO1xub3B0aW9ucy5pbnNlcnRTdHlsZUVsZW1lbnQgPSBpbnNlcnRTdHlsZUVsZW1lbnQ7XG5cbnZhciB1cGRhdGUgPSBBUEkoY29udGVudCwgb3B0aW9ucyk7XG5cblxuXG5leHBvcnQgKiBmcm9tIFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL2ZvbnRzLmNzc1wiO1xuICAgICAgIGV4cG9ydCBkZWZhdWx0IGNvbnRlbnQgJiYgY29udGVudC5sb2NhbHMgPyBjb250ZW50LmxvY2FscyA6IHVuZGVmaW5lZDtcbiIsIlxuICAgICAgaW1wb3J0IEFQSSBmcm9tIFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiO1xuICAgICAgaW1wb3J0IGRvbUFQSSBmcm9tIFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlRG9tQVBJLmpzXCI7XG4gICAgICBpbXBvcnQgaW5zZXJ0Rm4gZnJvbSBcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRCeVNlbGVjdG9yLmpzXCI7XG4gICAgICBpbXBvcnQgc2V0QXR0cmlidXRlcyBmcm9tIFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3NldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlcy5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydFN0eWxlRWxlbWVudCBmcm9tIFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydFN0eWxlRWxlbWVudC5qc1wiO1xuICAgICAgaW1wb3J0IHN0eWxlVGFnVHJhbnNmb3JtRm4gZnJvbSBcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZVRhZ1RyYW5zZm9ybS5qc1wiO1xuICAgICAgaW1wb3J0IGNvbnRlbnQsICogYXMgbmFtZWRFeHBvcnQgZnJvbSBcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9nbG9iYWwuY3NzXCI7XG4gICAgICBcbiAgICAgIFxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLnN0eWxlVGFnVHJhbnNmb3JtID0gc3R5bGVUYWdUcmFuc2Zvcm1Gbjtcbm9wdGlvbnMuc2V0QXR0cmlidXRlcyA9IHNldEF0dHJpYnV0ZXM7XG5cbiAgICAgIG9wdGlvbnMuaW5zZXJ0ID0gaW5zZXJ0Rm4uYmluZChudWxsLCBcImhlYWRcIik7XG4gICAgXG5vcHRpb25zLmRvbUFQSSA9IGRvbUFQSTtcbm9wdGlvbnMuaW5zZXJ0U3R5bGVFbGVtZW50ID0gaW5zZXJ0U3R5bGVFbGVtZW50O1xuXG52YXIgdXBkYXRlID0gQVBJKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cblxuZXhwb3J0ICogZnJvbSBcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9nbG9iYWwuY3NzXCI7XG4gICAgICAgZXhwb3J0IGRlZmF1bHQgY29udGVudCAmJiBjb250ZW50LmxvY2FscyA/IGNvbnRlbnQubG9jYWxzIDogdW5kZWZpbmVkO1xuIiwiXG4gICAgICBpbXBvcnQgQVBJIGZyb20gXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzXCI7XG4gICAgICBpbXBvcnQgZG9tQVBJIGZyb20gXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVEb21BUEkuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRGbiBmcm9tIFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydEJ5U2VsZWN0b3IuanNcIjtcbiAgICAgIGltcG9ydCBzZXRBdHRyaWJ1dGVzIGZyb20gXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc2V0QXR0cmlidXRlc1dpdGhvdXRBdHRyaWJ1dGVzLmpzXCI7XG4gICAgICBpbXBvcnQgaW5zZXJ0U3R5bGVFbGVtZW50IGZyb20gXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0U3R5bGVFbGVtZW50LmpzXCI7XG4gICAgICBpbXBvcnQgc3R5bGVUYWdUcmFuc2Zvcm1GbiBmcm9tIFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlVGFnVHJhbnNmb3JtLmpzXCI7XG4gICAgICBpbXBvcnQgY29udGVudCwgKiBhcyBuYW1lZEV4cG9ydCBmcm9tIFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL21vYmlsZS5jc3NcIjtcbiAgICAgIFxuICAgICAgXG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuc3R5bGVUYWdUcmFuc2Zvcm0gPSBzdHlsZVRhZ1RyYW5zZm9ybUZuO1xub3B0aW9ucy5zZXRBdHRyaWJ1dGVzID0gc2V0QXR0cmlidXRlcztcblxuICAgICAgb3B0aW9ucy5pbnNlcnQgPSBpbnNlcnRGbi5iaW5kKG51bGwsIFwiaGVhZFwiKTtcbiAgICBcbm9wdGlvbnMuZG9tQVBJID0gZG9tQVBJO1xub3B0aW9ucy5pbnNlcnRTdHlsZUVsZW1lbnQgPSBpbnNlcnRTdHlsZUVsZW1lbnQ7XG5cbnZhciB1cGRhdGUgPSBBUEkoY29udGVudCwgb3B0aW9ucyk7XG5cblxuXG5leHBvcnQgKiBmcm9tIFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL21vYmlsZS5jc3NcIjtcbiAgICAgICBleHBvcnQgZGVmYXVsdCBjb250ZW50ICYmIGNvbnRlbnQubG9jYWxzID8gY29udGVudC5sb2NhbHMgOiB1bmRlZmluZWQ7XG4iLCJcbiAgICAgIGltcG9ydCBBUEkgZnJvbSBcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIjtcbiAgICAgIGltcG9ydCBkb21BUEkgZnJvbSBcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZURvbUFQSS5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydEZuIGZyb20gXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0QnlTZWxlY3Rvci5qc1wiO1xuICAgICAgaW1wb3J0IHNldEF0dHJpYnV0ZXMgZnJvbSBcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRTdHlsZUVsZW1lbnQgZnJvbSBcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanNcIjtcbiAgICAgIGltcG9ydCBzdHlsZVRhZ1RyYW5zZm9ybUZuIGZyb20gXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanNcIjtcbiAgICAgIGltcG9ydCBjb250ZW50LCAqIGFzIG5hbWVkRXhwb3J0IGZyb20gXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vZGVza3RvcC5jc3NcIjtcbiAgICAgIFxuICAgICAgXG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuc3R5bGVUYWdUcmFuc2Zvcm0gPSBzdHlsZVRhZ1RyYW5zZm9ybUZuO1xub3B0aW9ucy5zZXRBdHRyaWJ1dGVzID0gc2V0QXR0cmlidXRlcztcblxuICAgICAgb3B0aW9ucy5pbnNlcnQgPSBpbnNlcnRGbi5iaW5kKG51bGwsIFwiaGVhZFwiKTtcbiAgICBcbm9wdGlvbnMuZG9tQVBJID0gZG9tQVBJO1xub3B0aW9ucy5pbnNlcnRTdHlsZUVsZW1lbnQgPSBpbnNlcnRTdHlsZUVsZW1lbnQ7XG5cbnZhciB1cGRhdGUgPSBBUEkoY29udGVudCwgb3B0aW9ucyk7XG5cblxuXG5leHBvcnQgKiBmcm9tIFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL2Rlc2t0b3AuY3NzXCI7XG4gICAgICAgZXhwb3J0IGRlZmF1bHQgY29udGVudCAmJiBjb250ZW50LmxvY2FscyA/IGNvbnRlbnQubG9jYWxzIDogdW5kZWZpbmVkO1xuIiwiXG4gICAgICBpbXBvcnQgQVBJIGZyb20gXCIhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzXCI7XG4gICAgICBpbXBvcnQgZG9tQVBJIGZyb20gXCIhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVEb21BUEkuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRGbiBmcm9tIFwiIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydEJ5U2VsZWN0b3IuanNcIjtcbiAgICAgIGltcG9ydCBzZXRBdHRyaWJ1dGVzIGZyb20gXCIhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc2V0QXR0cmlidXRlc1dpdGhvdXRBdHRyaWJ1dGVzLmpzXCI7XG4gICAgICBpbXBvcnQgaW5zZXJ0U3R5bGVFbGVtZW50IGZyb20gXCIhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0U3R5bGVFbGVtZW50LmpzXCI7XG4gICAgICBpbXBvcnQgc3R5bGVUYWdUcmFuc2Zvcm1GbiBmcm9tIFwiIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlVGFnVHJhbnNmb3JtLmpzXCI7XG4gICAgICBpbXBvcnQgY29udGVudCwgKiBhcyBuYW1lZEV4cG9ydCBmcm9tIFwiISEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL2Jhc2tldC1mb250cy5jc3NcIjtcbiAgICAgIFxuICAgICAgXG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuc3R5bGVUYWdUcmFuc2Zvcm0gPSBzdHlsZVRhZ1RyYW5zZm9ybUZuO1xub3B0aW9ucy5zZXRBdHRyaWJ1dGVzID0gc2V0QXR0cmlidXRlcztcblxuICAgICAgb3B0aW9ucy5pbnNlcnQgPSBpbnNlcnRGbi5iaW5kKG51bGwsIFwiaGVhZFwiKTtcbiAgICBcbm9wdGlvbnMuZG9tQVBJID0gZG9tQVBJO1xub3B0aW9ucy5pbnNlcnRTdHlsZUVsZW1lbnQgPSBpbnNlcnRTdHlsZUVsZW1lbnQ7XG5cbnZhciB1cGRhdGUgPSBBUEkoY29udGVudCwgb3B0aW9ucyk7XG5cblxuXG5leHBvcnQgKiBmcm9tIFwiISEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL2Jhc2tldC1mb250cy5jc3NcIjtcbiAgICAgICBleHBvcnQgZGVmYXVsdCBjb250ZW50ICYmIGNvbnRlbnQubG9jYWxzID8gY29udGVudC5sb2NhbHMgOiB1bmRlZmluZWQ7XG4iLCJcbiAgICAgIGltcG9ydCBBUEkgZnJvbSBcIiEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIjtcbiAgICAgIGltcG9ydCBkb21BUEkgZnJvbSBcIiEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZURvbUFQSS5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydEZuIGZyb20gXCIhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0QnlTZWxlY3Rvci5qc1wiO1xuICAgICAgaW1wb3J0IHNldEF0dHJpYnV0ZXMgZnJvbSBcIiEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRTdHlsZUVsZW1lbnQgZnJvbSBcIiEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanNcIjtcbiAgICAgIGltcG9ydCBzdHlsZVRhZ1RyYW5zZm9ybUZuIGZyb20gXCIhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanNcIjtcbiAgICAgIGltcG9ydCBjb250ZW50LCAqIGFzIG5hbWVkRXhwb3J0IGZyb20gXCIhIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vYmFza2V0LmNzc1wiO1xuICAgICAgXG4gICAgICBcblxudmFyIG9wdGlvbnMgPSB7fTtcblxub3B0aW9ucy5zdHlsZVRhZ1RyYW5zZm9ybSA9IHN0eWxlVGFnVHJhbnNmb3JtRm47XG5vcHRpb25zLnNldEF0dHJpYnV0ZXMgPSBzZXRBdHRyaWJ1dGVzO1xuXG4gICAgICBvcHRpb25zLmluc2VydCA9IGluc2VydEZuLmJpbmQobnVsbCwgXCJoZWFkXCIpO1xuICAgIFxub3B0aW9ucy5kb21BUEkgPSBkb21BUEk7XG5vcHRpb25zLmluc2VydFN0eWxlRWxlbWVudCA9IGluc2VydFN0eWxlRWxlbWVudDtcblxudmFyIHVwZGF0ZSA9IEFQSShjb250ZW50LCBvcHRpb25zKTtcblxuXG5cbmV4cG9ydCAqIGZyb20gXCIhIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vYmFza2V0LmNzc1wiO1xuICAgICAgIGV4cG9ydCBkZWZhdWx0IGNvbnRlbnQgJiYgY29udGVudC5sb2NhbHMgPyBjb250ZW50LmxvY2FscyA6IHVuZGVmaW5lZDtcbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEBmaWxlb3ZlcnZpZXcgRmlyZWJhc2UgY29uc3RhbnRzLiAgU29tZSBvZiB0aGVzZSAoQGRlZmluZXMpIGNhbiBiZSBvdmVycmlkZGVuIGF0IGNvbXBpbGUtdGltZS5cbiAqL1xuY29uc3QgQ09OU1RBTlRTID0ge1xuICAgIC8qKlxuICAgICAqIEBkZWZpbmUge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBpcyB0aGUgY2xpZW50IE5vZGUuanMgU0RLLlxuICAgICAqL1xuICAgIE5PREVfQ0xJRU5UOiBmYWxzZSxcbiAgICAvKipcbiAgICAgKiBAZGVmaW5lIHtib29sZWFufSBXaGV0aGVyIHRoaXMgaXMgdGhlIEFkbWluIE5vZGUuanMgU0RLLlxuICAgICAqL1xuICAgIE5PREVfQURNSU46IGZhbHNlLFxuICAgIC8qKlxuICAgICAqIEZpcmViYXNlIFNESyBWZXJzaW9uXG4gICAgICovXG4gICAgU0RLX1ZFUlNJT046ICcke0pTQ09SRV9WRVJTSU9OfSdcbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRocm93cyBhbiBlcnJvciBpZiB0aGUgcHJvdmlkZWQgYXNzZXJ0aW9uIGlzIGZhbHN5XG4gKi9cbmNvbnN0IGFzc2VydCA9IGZ1bmN0aW9uIChhc3NlcnRpb24sIG1lc3NhZ2UpIHtcbiAgICBpZiAoIWFzc2VydGlvbikge1xuICAgICAgICB0aHJvdyBhc3NlcnRpb25FcnJvcihtZXNzYWdlKTtcbiAgICB9XG59O1xuLyoqXG4gKiBSZXR1cm5zIGFuIEVycm9yIG9iamVjdCBzdWl0YWJsZSBmb3IgdGhyb3dpbmcuXG4gKi9cbmNvbnN0IGFzc2VydGlvbkVycm9yID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICByZXR1cm4gbmV3IEVycm9yKCdGaXJlYmFzZSBEYXRhYmFzZSAoJyArXG4gICAgICAgIENPTlNUQU5UUy5TREtfVkVSU0lPTiArXG4gICAgICAgICcpIElOVEVSTkFMIEFTU0VSVCBGQUlMRUQ6ICcgK1xuICAgICAgICBtZXNzYWdlKTtcbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jb25zdCBzdHJpbmdUb0J5dGVBcnJheSQxID0gZnVuY3Rpb24gKHN0cikge1xuICAgIC8vIFRPRE8odXNlcik6IFVzZSBuYXRpdmUgaW1wbGVtZW50YXRpb25zIGlmL3doZW4gYXZhaWxhYmxlXG4gICAgY29uc3Qgb3V0ID0gW107XG4gICAgbGV0IHAgPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIGlmIChjIDwgMTI4KSB7XG4gICAgICAgICAgICBvdXRbcCsrXSA9IGM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYyA8IDIwNDgpIHtcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gNikgfCAxOTI7XG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKChjICYgMHhmYzAwKSA9PT0gMHhkODAwICYmXG4gICAgICAgICAgICBpICsgMSA8IHN0ci5sZW5ndGggJiZcbiAgICAgICAgICAgIChzdHIuY2hhckNvZGVBdChpICsgMSkgJiAweGZjMDApID09PSAweGRjMDApIHtcbiAgICAgICAgICAgIC8vIFN1cnJvZ2F0ZSBQYWlyXG4gICAgICAgICAgICBjID0gMHgxMDAwMCArICgoYyAmIDB4MDNmZikgPDwgMTApICsgKHN0ci5jaGFyQ29kZUF0KCsraSkgJiAweDAzZmYpO1xuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxOCkgfCAyNDA7XG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiAxMikgJiA2MykgfCAxMjg7XG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDEyKSB8IDIyNDtcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb3V0O1xufTtcbi8qKlxuICogVHVybnMgYW4gYXJyYXkgb2YgbnVtYmVycyBpbnRvIHRoZSBzdHJpbmcgZ2l2ZW4gYnkgdGhlIGNvbmNhdGVuYXRpb24gb2YgdGhlXG4gKiBjaGFyYWN0ZXJzIHRvIHdoaWNoIHRoZSBudW1iZXJzIGNvcnJlc3BvbmQuXG4gKiBAcGFyYW0gYnl0ZXMgQXJyYXkgb2YgbnVtYmVycyByZXByZXNlbnRpbmcgY2hhcmFjdGVycy5cbiAqIEByZXR1cm4gU3RyaW5naWZpY2F0aW9uIG9mIHRoZSBhcnJheS5cbiAqL1xuY29uc3QgYnl0ZUFycmF5VG9TdHJpbmcgPSBmdW5jdGlvbiAoYnl0ZXMpIHtcbiAgICAvLyBUT0RPKHVzZXIpOiBVc2UgbmF0aXZlIGltcGxlbWVudGF0aW9ucyBpZi93aGVuIGF2YWlsYWJsZVxuICAgIGNvbnN0IG91dCA9IFtdO1xuICAgIGxldCBwb3MgPSAwLCBjID0gMDtcbiAgICB3aGlsZSAocG9zIDwgYnl0ZXMubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGMxID0gYnl0ZXNbcG9zKytdO1xuICAgICAgICBpZiAoYzEgPCAxMjgpIHtcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZShjMSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYzEgPiAxOTEgJiYgYzEgPCAyMjQpIHtcbiAgICAgICAgICAgIGNvbnN0IGMyID0gYnl0ZXNbcG9zKytdO1xuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgoYzEgJiAzMSkgPDwgNikgfCAoYzIgJiA2MykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGMxID4gMjM5ICYmIGMxIDwgMzY1KSB7XG4gICAgICAgICAgICAvLyBTdXJyb2dhdGUgUGFpclxuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XG4gICAgICAgICAgICBjb25zdCBjMyA9IGJ5dGVzW3BvcysrXTtcbiAgICAgICAgICAgIGNvbnN0IGM0ID0gYnl0ZXNbcG9zKytdO1xuICAgICAgICAgICAgY29uc3QgdSA9ICgoKGMxICYgNykgPDwgMTgpIHwgKChjMiAmIDYzKSA8PCAxMikgfCAoKGMzICYgNjMpIDw8IDYpIHwgKGM0ICYgNjMpKSAtXG4gICAgICAgICAgICAgICAgMHgxMDAwMDtcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgweGQ4MDAgKyAodSA+PiAxMCkpO1xuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ZGMwMCArICh1ICYgMTAyMykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XG4gICAgICAgICAgICBjb25zdCBjMyA9IGJ5dGVzW3BvcysrXTtcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgoKGMxICYgMTUpIDw8IDEyKSB8ICgoYzIgJiA2MykgPDwgNikgfCAoYzMgJiA2MykpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvdXQuam9pbignJyk7XG59O1xuLy8gV2UgZGVmaW5lIGl0IGFzIGFuIG9iamVjdCBsaXRlcmFsIGluc3RlYWQgb2YgYSBjbGFzcyBiZWNhdXNlIGEgY2xhc3MgY29tcGlsZWQgZG93biB0byBlczUgY2FuJ3Rcbi8vIGJlIHRyZWVzaGFrZWQuIGh0dHBzOi8vZ2l0aHViLmNvbS9yb2xsdXAvcm9sbHVwL2lzc3Vlcy8xNjkxXG4vLyBTdGF0aWMgbG9va3VwIG1hcHMsIGxhemlseSBwb3B1bGF0ZWQgYnkgaW5pdF8oKVxuLy8gVE9ETyhkbGFyb2NxdWUpOiBEZWZpbmUgdGhpcyBhcyBhIGNsYXNzLCBzaW5jZSB3ZSBubyBsb25nZXIgdGFyZ2V0IEVTNS5cbmNvbnN0IGJhc2U2NCA9IHtcbiAgICAvKipcbiAgICAgKiBNYXBzIGJ5dGVzIHRvIGNoYXJhY3RlcnMuXG4gICAgICovXG4gICAgYnl0ZVRvQ2hhck1hcF86IG51bGwsXG4gICAgLyoqXG4gICAgICogTWFwcyBjaGFyYWN0ZXJzIHRvIGJ5dGVzLlxuICAgICAqL1xuICAgIGNoYXJUb0J5dGVNYXBfOiBudWxsLFxuICAgIC8qKlxuICAgICAqIE1hcHMgYnl0ZXMgdG8gd2Vic2FmZSBjaGFyYWN0ZXJzLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgYnl0ZVRvQ2hhck1hcFdlYlNhZmVfOiBudWxsLFxuICAgIC8qKlxuICAgICAqIE1hcHMgd2Vic2FmZSBjaGFyYWN0ZXJzIHRvIGJ5dGVzLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgY2hhclRvQnl0ZU1hcFdlYlNhZmVfOiBudWxsLFxuICAgIC8qKlxuICAgICAqIE91ciBkZWZhdWx0IGFscGhhYmV0LCBzaGFyZWQgYmV0d2VlblxuICAgICAqIEVOQ09ERURfVkFMUyBhbmQgRU5DT0RFRF9WQUxTX1dFQlNBRkVcbiAgICAgKi9cbiAgICBFTkNPREVEX1ZBTFNfQkFTRTogJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaJyArICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eicgKyAnMDEyMzQ1Njc4OScsXG4gICAgLyoqXG4gICAgICogT3VyIGRlZmF1bHQgYWxwaGFiZXQuIFZhbHVlIDY0ICg9KSBpcyBzcGVjaWFsOyBpdCBtZWFucyBcIm5vdGhpbmcuXCJcbiAgICAgKi9cbiAgICBnZXQgRU5DT0RFRF9WQUxTKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRSArICcrLz0nO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogT3VyIHdlYnNhZmUgYWxwaGFiZXQuXG4gICAgICovXG4gICAgZ2V0IEVOQ09ERURfVkFMU19XRUJTQUZFKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRSArICctXy4nO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGlzIGJyb3dzZXIgc3VwcG9ydHMgdGhlIGF0b2IgYW5kIGJ0b2EgZnVuY3Rpb25zLiBUaGlzIGV4dGVuc2lvblxuICAgICAqIHN0YXJ0ZWQgYXQgTW96aWxsYSBidXQgaXMgbm93IGltcGxlbWVudGVkIGJ5IG1hbnkgYnJvd3NlcnMuIFdlIHVzZSB0aGVcbiAgICAgKiBBU1NVTUVfKiB2YXJpYWJsZXMgdG8gYXZvaWQgcHVsbGluZyBpbiB0aGUgZnVsbCB1c2VyYWdlbnQgZGV0ZWN0aW9uIGxpYnJhcnlcbiAgICAgKiBidXQgc3RpbGwgYWxsb3dpbmcgdGhlIHN0YW5kYXJkIHBlci1icm93c2VyIGNvbXBpbGF0aW9ucy5cbiAgICAgKlxuICAgICAqL1xuICAgIEhBU19OQVRJVkVfU1VQUE9SVDogdHlwZW9mIGF0b2IgPT09ICdmdW5jdGlvbicsXG4gICAgLyoqXG4gICAgICogQmFzZTY0LWVuY29kZSBhbiBhcnJheSBvZiBieXRlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbnB1dCBBbiBhcnJheSBvZiBieXRlcyAobnVtYmVycyB3aXRoXG4gICAgICogICAgIHZhbHVlIGluIFswLCAyNTVdKSB0byBlbmNvZGUuXG4gICAgICogQHBhcmFtIHdlYlNhZmUgQm9vbGVhbiBpbmRpY2F0aW5nIHdlIHNob3VsZCB1c2UgdGhlXG4gICAgICogICAgIGFsdGVybmF0aXZlIGFscGhhYmV0LlxuICAgICAqIEByZXR1cm4gVGhlIGJhc2U2NCBlbmNvZGVkIHN0cmluZy5cbiAgICAgKi9cbiAgICBlbmNvZGVCeXRlQXJyYXkoaW5wdXQsIHdlYlNhZmUpIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGlucHV0KSkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ2VuY29kZUJ5dGVBcnJheSB0YWtlcyBhbiBhcnJheSBhcyBhIHBhcmFtZXRlcicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW5pdF8oKTtcbiAgICAgICAgY29uc3QgYnl0ZVRvQ2hhck1hcCA9IHdlYlNhZmVcbiAgICAgICAgICAgID8gdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9cbiAgICAgICAgICAgIDogdGhpcy5ieXRlVG9DaGFyTWFwXztcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOyBpICs9IDMpIHtcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUxID0gaW5wdXRbaV07XG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTIgPSBpICsgMSA8IGlucHV0Lmxlbmd0aDtcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUyID0gaGF2ZUJ5dGUyID8gaW5wdXRbaSArIDFdIDogMDtcbiAgICAgICAgICAgIGNvbnN0IGhhdmVCeXRlMyA9IGkgKyAyIDwgaW5wdXQubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgYnl0ZTMgPSBoYXZlQnl0ZTMgPyBpbnB1dFtpICsgMl0gOiAwO1xuICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTEgPSBieXRlMSA+PiAyO1xuICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTIgPSAoKGJ5dGUxICYgMHgwMykgPDwgNCkgfCAoYnl0ZTIgPj4gNCk7XG4gICAgICAgICAgICBsZXQgb3V0Qnl0ZTMgPSAoKGJ5dGUyICYgMHgwZikgPDwgMikgfCAoYnl0ZTMgPj4gNik7XG4gICAgICAgICAgICBsZXQgb3V0Qnl0ZTQgPSBieXRlMyAmIDB4M2Y7XG4gICAgICAgICAgICBpZiAoIWhhdmVCeXRlMykge1xuICAgICAgICAgICAgICAgIG91dEJ5dGU0ID0gNjQ7XG4gICAgICAgICAgICAgICAgaWYgKCFoYXZlQnl0ZTIpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0Qnl0ZTMgPSA2NDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvdXRwdXQucHVzaChieXRlVG9DaGFyTWFwW291dEJ5dGUxXSwgYnl0ZVRvQ2hhck1hcFtvdXRCeXRlMl0sIGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTNdLCBieXRlVG9DaGFyTWFwW291dEJ5dGU0XSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dHB1dC5qb2luKCcnKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEJhc2U2NC1lbmNvZGUgYSBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaW5wdXQgQSBzdHJpbmcgdG8gZW5jb2RlLlxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIElmIHRydWUsIHdlIHNob3VsZCB1c2UgdGhlXG4gICAgICogICAgIGFsdGVybmF0aXZlIGFscGhhYmV0LlxuICAgICAqIEByZXR1cm4gVGhlIGJhc2U2NCBlbmNvZGVkIHN0cmluZy5cbiAgICAgKi9cbiAgICBlbmNvZGVTdHJpbmcoaW5wdXQsIHdlYlNhZmUpIHtcbiAgICAgICAgLy8gU2hvcnRjdXQgZm9yIE1vemlsbGEgYnJvd3NlcnMgdGhhdCBpbXBsZW1lbnRcbiAgICAgICAgLy8gYSBuYXRpdmUgYmFzZTY0IGVuY29kZXIgaW4gdGhlIGZvcm0gb2YgXCJidG9hL2F0b2JcIlxuICAgICAgICBpZiAodGhpcy5IQVNfTkFUSVZFX1NVUFBPUlQgJiYgIXdlYlNhZmUpIHtcbiAgICAgICAgICAgIHJldHVybiBidG9hKGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVCeXRlQXJyYXkoc3RyaW5nVG9CeXRlQXJyYXkkMShpbnB1dCksIHdlYlNhZmUpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQmFzZTY0LWRlY29kZSBhIHN0cmluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbnB1dCB0byBkZWNvZGUuXG4gICAgICogQHBhcmFtIHdlYlNhZmUgVHJ1ZSBpZiB3ZSBzaG91bGQgdXNlIHRoZVxuICAgICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cbiAgICAgKiBAcmV0dXJuIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIGRlY29kZWQgdmFsdWUuXG4gICAgICovXG4gICAgZGVjb2RlU3RyaW5nKGlucHV0LCB3ZWJTYWZlKSB7XG4gICAgICAgIC8vIFNob3J0Y3V0IGZvciBNb3ppbGxhIGJyb3dzZXJzIHRoYXQgaW1wbGVtZW50XG4gICAgICAgIC8vIGEgbmF0aXZlIGJhc2U2NCBlbmNvZGVyIGluIHRoZSBmb3JtIG9mIFwiYnRvYS9hdG9iXCJcbiAgICAgICAgaWYgKHRoaXMuSEFTX05BVElWRV9TVVBQT1JUICYmICF3ZWJTYWZlKSB7XG4gICAgICAgICAgICByZXR1cm4gYXRvYihpbnB1dCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJ5dGVBcnJheVRvU3RyaW5nKHRoaXMuZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkoaW5wdXQsIHdlYlNhZmUpKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEJhc2U2NC1kZWNvZGUgYSBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBJbiBiYXNlLTY0IGRlY29kaW5nLCBncm91cHMgb2YgZm91ciBjaGFyYWN0ZXJzIGFyZSBjb252ZXJ0ZWQgaW50byB0aHJlZVxuICAgICAqIGJ5dGVzLiAgSWYgdGhlIGVuY29kZXIgZGlkIG5vdCBhcHBseSBwYWRkaW5nLCB0aGUgaW5wdXQgbGVuZ3RoIG1heSBub3RcbiAgICAgKiBiZSBhIG11bHRpcGxlIG9mIDQuXG4gICAgICpcbiAgICAgKiBJbiB0aGlzIGNhc2UsIHRoZSBsYXN0IGdyb3VwIHdpbGwgaGF2ZSBmZXdlciB0aGFuIDQgY2hhcmFjdGVycywgYW5kXG4gICAgICogcGFkZGluZyB3aWxsIGJlIGluZmVycmVkLiAgSWYgdGhlIGdyb3VwIGhhcyBvbmUgb3IgdHdvIGNoYXJhY3RlcnMsIGl0IGRlY29kZXNcbiAgICAgKiB0byBvbmUgYnl0ZS4gIElmIHRoZSBncm91cCBoYXMgdGhyZWUgY2hhcmFjdGVycywgaXQgZGVjb2RlcyB0byB0d28gYnl0ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaW5wdXQgSW5wdXQgdG8gZGVjb2RlLlxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIFRydWUgaWYgd2Ugc2hvdWxkIHVzZSB0aGUgd2ViLXNhZmUgYWxwaGFiZXQuXG4gICAgICogQHJldHVybiBieXRlcyByZXByZXNlbnRpbmcgdGhlIGRlY29kZWQgdmFsdWUuXG4gICAgICovXG4gICAgZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkoaW5wdXQsIHdlYlNhZmUpIHtcbiAgICAgICAgdGhpcy5pbml0XygpO1xuICAgICAgICBjb25zdCBjaGFyVG9CeXRlTWFwID0gd2ViU2FmZVxuICAgICAgICAgICAgPyB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlX1xuICAgICAgICAgICAgOiB0aGlzLmNoYXJUb0J5dGVNYXBfO1xuICAgICAgICBjb25zdCBvdXRwdXQgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7KSB7XG4gICAgICAgICAgICBjb25zdCBieXRlMSA9IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkrKyldO1xuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUyID0gaSA8IGlucHV0Lmxlbmd0aDtcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUyID0gaGF2ZUJ5dGUyID8gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSldIDogMDtcbiAgICAgICAgICAgICsraTtcbiAgICAgICAgICAgIGNvbnN0IGhhdmVCeXRlMyA9IGkgPCBpbnB1dC5sZW5ndGg7XG4gICAgICAgICAgICBjb25zdCBieXRlMyA9IGhhdmVCeXRlMyA/IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkpXSA6IDY0O1xuICAgICAgICAgICAgKytpO1xuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGU0ID0gaSA8IGlucHV0Lmxlbmd0aDtcbiAgICAgICAgICAgIGNvbnN0IGJ5dGU0ID0gaGF2ZUJ5dGU0ID8gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSldIDogNjQ7XG4gICAgICAgICAgICArK2k7XG4gICAgICAgICAgICBpZiAoYnl0ZTEgPT0gbnVsbCB8fCBieXRlMiA9PSBudWxsIHx8IGJ5dGUzID09IG51bGwgfHwgYnl0ZTQgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBEZWNvZGVCYXNlNjRTdHJpbmdFcnJvcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTEgPSAoYnl0ZTEgPDwgMikgfCAoYnl0ZTIgPj4gNCk7XG4gICAgICAgICAgICBvdXRwdXQucHVzaChvdXRCeXRlMSk7XG4gICAgICAgICAgICBpZiAoYnl0ZTMgIT09IDY0KSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTIgPSAoKGJ5dGUyIDw8IDQpICYgMHhmMCkgfCAoYnl0ZTMgPj4gMik7XG4gICAgICAgICAgICAgICAgb3V0cHV0LnB1c2gob3V0Qnl0ZTIpO1xuICAgICAgICAgICAgICAgIGlmIChieXRlNCAhPT0gNjQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTMgPSAoKGJ5dGUzIDw8IDYpICYgMHhjMCkgfCBieXRlNDtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnB1c2gob3V0Qnl0ZTMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogTGF6eSBzdGF0aWMgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb24uIENhbGxlZCBiZWZvcmVcbiAgICAgKiBhY2Nlc3NpbmcgYW55IG9mIHRoZSBzdGF0aWMgbWFwIHZhcmlhYmxlcy5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIGluaXRfKCkge1xuICAgICAgICBpZiAoIXRoaXMuYnl0ZVRvQ2hhck1hcF8pIHtcbiAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcF8gPSB7fTtcbiAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcF8gPSB7fTtcbiAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfID0ge307XG4gICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlXyA9IHt9O1xuICAgICAgICAgICAgLy8gV2Ugd2FudCBxdWljayBtYXBwaW5ncyBiYWNrIGFuZCBmb3J0aCwgc28gd2UgcHJlY29tcHV0ZSB0d28gbWFwcy5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5FTkNPREVEX1ZBTFMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBfW2ldID0gdGhpcy5FTkNPREVEX1ZBTFMuY2hhckF0KGkpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcF9bdGhpcy5ieXRlVG9DaGFyTWFwX1tpXV0gPSBpO1xuICAgICAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfW2ldID0gdGhpcy5FTkNPREVEX1ZBTFNfV0VCU0FGRS5jaGFyQXQoaSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9bdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9baV1dID0gaTtcbiAgICAgICAgICAgICAgICAvLyBCZSBmb3JnaXZpbmcgd2hlbiBkZWNvZGluZyBhbmQgY29ycmVjdGx5IGRlY29kZSBib3RoIGVuY29kaW5ncy5cbiAgICAgICAgICAgICAgICBpZiAoaSA+PSB0aGlzLkVOQ09ERURfVkFMU19CQVNFLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBfW3RoaXMuRU5DT0RFRF9WQUxTX1dFQlNBRkUuY2hhckF0KGkpXSA9IGk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfW3RoaXMuRU5DT0RFRF9WQUxTLmNoYXJBdChpKV0gPSBpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn07XG4vKipcbiAqIEFuIGVycm9yIGVuY291bnRlcmVkIHdoaWxlIGRlY29kaW5nIGJhc2U2NCBzdHJpbmcuXG4gKi9cbmNsYXNzIERlY29kZUJhc2U2NFN0cmluZ0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLm5hbWUgPSAnRGVjb2RlQmFzZTY0U3RyaW5nRXJyb3InO1xuICAgIH1cbn1cbi8qKlxuICogVVJMLXNhZmUgYmFzZTY0IGVuY29kaW5nXG4gKi9cbmNvbnN0IGJhc2U2NEVuY29kZSA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICBjb25zdCB1dGY4Qnl0ZXMgPSBzdHJpbmdUb0J5dGVBcnJheSQxKHN0cik7XG4gICAgcmV0dXJuIGJhc2U2NC5lbmNvZGVCeXRlQXJyYXkodXRmOEJ5dGVzLCB0cnVlKTtcbn07XG4vKipcbiAqIFVSTC1zYWZlIGJhc2U2NCBlbmNvZGluZyAod2l0aG91dCBcIi5cIiBwYWRkaW5nIGluIHRoZSBlbmQpLlxuICogZS5nLiBVc2VkIGluIEpTT04gV2ViIFRva2VuIChKV1QpIHBhcnRzLlxuICovXG5jb25zdCBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAvLyBVc2UgYmFzZTY0dXJsIGVuY29kaW5nIGFuZCByZW1vdmUgcGFkZGluZyBpbiB0aGUgZW5kIChkb3QgY2hhcmFjdGVycykuXG4gICAgcmV0dXJuIGJhc2U2NEVuY29kZShzdHIpLnJlcGxhY2UoL1xcLi9nLCAnJyk7XG59O1xuLyoqXG4gKiBVUkwtc2FmZSBiYXNlNjQgZGVjb2RpbmdcbiAqXG4gKiBOT1RFOiBETyBOT1QgdXNlIHRoZSBnbG9iYWwgYXRvYigpIGZ1bmN0aW9uIC0gaXQgZG9lcyBOT1Qgc3VwcG9ydCB0aGVcbiAqIGJhc2U2NFVybCB2YXJpYW50IGVuY29kaW5nLlxuICpcbiAqIEBwYXJhbSBzdHIgVG8gYmUgZGVjb2RlZFxuICogQHJldHVybiBEZWNvZGVkIHJlc3VsdCwgaWYgcG9zc2libGVcbiAqL1xuY29uc3QgYmFzZTY0RGVjb2RlID0gZnVuY3Rpb24gKHN0cikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBiYXNlNjQuZGVjb2RlU3RyaW5nKHN0ciwgdHJ1ZSk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ2Jhc2U2NERlY29kZSBmYWlsZWQ6ICcsIGUpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIERvIGEgZGVlcC1jb3B5IG9mIGJhc2ljIEphdmFTY3JpcHQgT2JqZWN0cyBvciBBcnJheXMuXG4gKi9cbmZ1bmN0aW9uIGRlZXBDb3B5KHZhbHVlKSB7XG4gICAgcmV0dXJuIGRlZXBFeHRlbmQodW5kZWZpbmVkLCB2YWx1ZSk7XG59XG4vKipcbiAqIENvcHkgcHJvcGVydGllcyBmcm9tIHNvdXJjZSB0byB0YXJnZXQgKHJlY3Vyc2l2ZWx5IGFsbG93cyBleHRlbnNpb25cbiAqIG9mIE9iamVjdHMgYW5kIEFycmF5cykuICBTY2FsYXIgdmFsdWVzIGluIHRoZSB0YXJnZXQgYXJlIG92ZXItd3JpdHRlbi5cbiAqIElmIHRhcmdldCBpcyB1bmRlZmluZWQsIGFuIG9iamVjdCBvZiB0aGUgYXBwcm9wcmlhdGUgdHlwZSB3aWxsIGJlIGNyZWF0ZWRcbiAqIChhbmQgcmV0dXJuZWQpLlxuICpcbiAqIFdlIHJlY3Vyc2l2ZWx5IGNvcHkgYWxsIGNoaWxkIHByb3BlcnRpZXMgb2YgcGxhaW4gT2JqZWN0cyBpbiB0aGUgc291cmNlLSBzb1xuICogdGhhdCBuYW1lc3BhY2UtIGxpa2UgZGljdGlvbmFyaWVzIGFyZSBtZXJnZWQuXG4gKlxuICogTm90ZSB0aGF0IHRoZSB0YXJnZXQgY2FuIGJlIGEgZnVuY3Rpb24sIGluIHdoaWNoIGNhc2UgdGhlIHByb3BlcnRpZXMgaW5cbiAqIHRoZSBzb3VyY2UgT2JqZWN0IGFyZSBjb3BpZWQgb250byBpdCBhcyBzdGF0aWMgcHJvcGVydGllcyBvZiB0aGUgRnVuY3Rpb24uXG4gKlxuICogTm90ZTogd2UgZG9uJ3QgbWVyZ2UgX19wcm90b19fIHRvIHByZXZlbnQgcHJvdG90eXBlIHBvbGx1dGlvblxuICovXG5mdW5jdGlvbiBkZWVwRXh0ZW5kKHRhcmdldCwgc291cmNlKSB7XG4gICAgaWYgKCEoc291cmNlIGluc3RhbmNlb2YgT2JqZWN0KSkge1xuICAgICAgICByZXR1cm4gc291cmNlO1xuICAgIH1cbiAgICBzd2l0Y2ggKHNvdXJjZS5jb25zdHJ1Y3Rvcikge1xuICAgICAgICBjYXNlIERhdGU6XG4gICAgICAgICAgICAvLyBUcmVhdCBEYXRlcyBsaWtlIHNjYWxhcnM7IGlmIHRoZSB0YXJnZXQgZGF0ZSBvYmplY3QgaGFkIGFueSBjaGlsZFxuICAgICAgICAgICAgLy8gcHJvcGVydGllcyAtIHRoZXkgd2lsbCBiZSBsb3N0IVxuICAgICAgICAgICAgY29uc3QgZGF0ZVZhbHVlID0gc291cmNlO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGVWYWx1ZS5nZXRUaW1lKCkpO1xuICAgICAgICBjYXNlIE9iamVjdDpcbiAgICAgICAgICAgIGlmICh0YXJnZXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRhcmdldCA9IHt9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgQXJyYXk6XG4gICAgICAgICAgICAvLyBBbHdheXMgY29weSB0aGUgYXJyYXkgc291cmNlIGFuZCBvdmVyd3JpdGUgdGhlIHRhcmdldC5cbiAgICAgICAgICAgIHRhcmdldCA9IFtdO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAvLyBOb3QgYSBwbGFpbiBPYmplY3QgLSB0cmVhdCBpdCBhcyBhIHNjYWxhci5cbiAgICAgICAgICAgIHJldHVybiBzb3VyY2U7XG4gICAgfVxuICAgIGZvciAoY29uc3QgcHJvcCBpbiBzb3VyY2UpIHtcbiAgICAgICAgLy8gdXNlIGlzVmFsaWRLZXkgdG8gZ3VhcmQgYWdhaW5zdCBwcm90b3R5cGUgcG9sbHV0aW9uLiBTZWUgaHR0cHM6Ly9zbnlrLmlvL3Z1bG4vU05ZSy1KUy1MT0RBU0gtNDUwMjAyXG4gICAgICAgIGlmICghc291cmNlLmhhc093blByb3BlcnR5KHByb3ApIHx8ICFpc1ZhbGlkS2V5KHByb3ApKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB0YXJnZXRbcHJvcF0gPSBkZWVwRXh0ZW5kKHRhcmdldFtwcm9wXSwgc291cmNlW3Byb3BdKTtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcbn1cbmZ1bmN0aW9uIGlzVmFsaWRLZXkoa2V5KSB7XG4gICAgcmV0dXJuIGtleSAhPT0gJ19fcHJvdG9fXyc7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFBvbHlmaWxsIGZvciBgZ2xvYmFsVGhpc2Agb2JqZWN0LlxuICogQHJldHVybnMgdGhlIGBnbG9iYWxUaGlzYCBvYmplY3QgZm9yIHRoZSBnaXZlbiBlbnZpcm9ubWVudC5cbiAqIEBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gZ2V0R2xvYmFsKCkge1xuICAgIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gd2luZG93O1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIGdsb2JhbDtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKCdVbmFibGUgdG8gbG9jYXRlIGdsb2JhbCBvYmplY3QuJyk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jb25zdCBnZXREZWZhdWx0c0Zyb21HbG9iYWwgPSAoKSA9PiBnZXRHbG9iYWwoKS5fX0ZJUkVCQVNFX0RFRkFVTFRTX187XG4vKipcbiAqIEF0dGVtcHQgdG8gcmVhZCBkZWZhdWx0cyBmcm9tIGEgSlNPTiBzdHJpbmcgcHJvdmlkZWQgdG9cbiAqIHByb2Nlc3MoLillbnYoLilfX0ZJUkVCQVNFX0RFRkFVTFRTX18gb3IgYSBKU09OIGZpbGUgd2hvc2UgcGF0aCBpcyBpblxuICogcHJvY2VzcyguKWVudiguKV9fRklSRUJBU0VfREVGQVVMVFNfUEFUSF9fXG4gKiBUaGUgZG90cyBhcmUgaW4gcGFyZW5zIGJlY2F1c2UgY2VydGFpbiBjb21waWxlcnMgKFZpdGU/KSBjYW5ub3RcbiAqIGhhbmRsZSBzZWVpbmcgdGhhdCB2YXJpYWJsZSBpbiBjb21tZW50cy5cbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtanMtc2RrL2lzc3Vlcy82ODM4XG4gKi9cbmNvbnN0IGdldERlZmF1bHRzRnJvbUVudlZhcmlhYmxlID0gKCkgPT4ge1xuICAgIGlmICh0eXBlb2YgcHJvY2VzcyA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIHByb2Nlc3MuZW52ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGRlZmF1bHRzSnNvblN0cmluZyA9IHByb2Nlc3MuZW52Ll9fRklSRUJBU0VfREVGQVVMVFNfXztcbiAgICBpZiAoZGVmYXVsdHNKc29uU3RyaW5nKSB7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGRlZmF1bHRzSnNvblN0cmluZyk7XG4gICAgfVxufTtcbmNvbnN0IGdldERlZmF1bHRzRnJvbUNvb2tpZSA9ICgpID0+IHtcbiAgICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBtYXRjaDtcbiAgICB0cnkge1xuICAgICAgICBtYXRjaCA9IGRvY3VtZW50LmNvb2tpZS5tYXRjaCgvX19GSVJFQkFTRV9ERUZBVUxUU19fPShbXjtdKykvKTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gU29tZSBlbnZpcm9ubWVudHMgc3VjaCBhcyBBbmd1bGFyIFVuaXZlcnNhbCBTU1IgaGF2ZSBhXG4gICAgICAgIC8vIGBkb2N1bWVudGAgb2JqZWN0IGJ1dCBlcnJvciBvbiBhY2Nlc3NpbmcgYGRvY3VtZW50LmNvb2tpZWAuXG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZGVjb2RlZCA9IG1hdGNoICYmIGJhc2U2NERlY29kZShtYXRjaFsxXSk7XG4gICAgcmV0dXJuIGRlY29kZWQgJiYgSlNPTi5wYXJzZShkZWNvZGVkKTtcbn07XG4vKipcbiAqIEdldCB0aGUgX19GSVJFQkFTRV9ERUZBVUxUU19fIG9iamVjdC4gSXQgY2hlY2tzIGluIG9yZGVyOlxuICogKDEpIGlmIHN1Y2ggYW4gb2JqZWN0IGV4aXN0cyBhcyBhIHByb3BlcnR5IG9mIGBnbG9iYWxUaGlzYFxuICogKDIpIGlmIHN1Y2ggYW4gb2JqZWN0IHdhcyBwcm92aWRlZCBvbiBhIHNoZWxsIGVudmlyb25tZW50IHZhcmlhYmxlXG4gKiAoMykgaWYgc3VjaCBhbiBvYmplY3QgZXhpc3RzIGluIGEgY29va2llXG4gKiBAcHVibGljXG4gKi9cbmNvbnN0IGdldERlZmF1bHRzID0gKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiAoZ2V0RGVmYXVsdHNGcm9tR2xvYmFsKCkgfHxcbiAgICAgICAgICAgIGdldERlZmF1bHRzRnJvbUVudlZhcmlhYmxlKCkgfHxcbiAgICAgICAgICAgIGdldERlZmF1bHRzRnJvbUNvb2tpZSgpKTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhdGNoLWFsbCBmb3IgYmVpbmcgdW5hYmxlIHRvIGdldCBfX0ZJUkVCQVNFX0RFRkFVTFRTX18gZHVlXG4gICAgICAgICAqIHRvIGFueSBlbnZpcm9ubWVudCBjYXNlIHdlIGhhdmUgbm90IGFjY291bnRlZCBmb3IuIExvZyB0b1xuICAgICAgICAgKiBpbmZvIGluc3RlYWQgb2Ygc3dhbGxvd2luZyBzbyB3ZSBjYW4gZmluZCB0aGVzZSB1bmtub3duIGNhc2VzXG4gICAgICAgICAqIGFuZCBhZGQgcGF0aHMgZm9yIHRoZW0gaWYgbmVlZGVkLlxuICAgICAgICAgKi9cbiAgICAgICAgY29uc29sZS5pbmZvKGBVbmFibGUgdG8gZ2V0IF9fRklSRUJBU0VfREVGQVVMVFNfXyBkdWUgdG86ICR7ZX1gKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbn07XG4vKipcbiAqIFJldHVybnMgZW11bGF0b3IgaG9zdCBzdG9yZWQgaW4gdGhlIF9fRklSRUJBU0VfREVGQVVMVFNfXyBvYmplY3RcbiAqIGZvciB0aGUgZ2l2ZW4gcHJvZHVjdC5cbiAqIEByZXR1cm5zIGEgVVJMIGhvc3QgZm9ybWF0dGVkIGxpa2UgYDEyNy4wLjAuMTo5OTk5YCBvciBgWzo6MV06NDAwMGAgaWYgYXZhaWxhYmxlXG4gKiBAcHVibGljXG4gKi9cbmNvbnN0IGdldERlZmF1bHRFbXVsYXRvckhvc3QgPSAocHJvZHVjdE5hbWUpID0+IHsgdmFyIF9hLCBfYjsgcmV0dXJuIChfYiA9IChfYSA9IGdldERlZmF1bHRzKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5lbXVsYXRvckhvc3RzKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2JbcHJvZHVjdE5hbWVdOyB9O1xuLyoqXG4gKiBSZXR1cm5zIGVtdWxhdG9yIGhvc3RuYW1lIGFuZCBwb3J0IHN0b3JlZCBpbiB0aGUgX19GSVJFQkFTRV9ERUZBVUxUU19fIG9iamVjdFxuICogZm9yIHRoZSBnaXZlbiBwcm9kdWN0LlxuICogQHJldHVybnMgYSBwYWlyIG9mIGhvc3RuYW1lIGFuZCBwb3J0IGxpa2UgYFtcIjo6MVwiLCA0MDAwXWAgaWYgYXZhaWxhYmxlXG4gKiBAcHVibGljXG4gKi9cbmNvbnN0IGdldERlZmF1bHRFbXVsYXRvckhvc3RuYW1lQW5kUG9ydCA9IChwcm9kdWN0TmFtZSkgPT4ge1xuICAgIGNvbnN0IGhvc3QgPSBnZXREZWZhdWx0RW11bGF0b3JIb3N0KHByb2R1Y3ROYW1lKTtcbiAgICBpZiAoIWhvc3QpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3Qgc2VwYXJhdG9ySW5kZXggPSBob3N0Lmxhc3RJbmRleE9mKCc6Jyk7IC8vIEZpbmRpbmcgdGhlIGxhc3Qgc2luY2UgSVB2NiBhZGRyIGFsc28gaGFzIGNvbG9ucy5cbiAgICBpZiAoc2VwYXJhdG9ySW5kZXggPD0gMCB8fCBzZXBhcmF0b3JJbmRleCArIDEgPT09IGhvc3QubGVuZ3RoKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBob3N0ICR7aG9zdH0gd2l0aCBubyBzZXBhcmF0ZSBob3N0bmFtZSBhbmQgcG9ydCFgKTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtZ2xvYmFsc1xuICAgIGNvbnN0IHBvcnQgPSBwYXJzZUludChob3N0LnN1YnN0cmluZyhzZXBhcmF0b3JJbmRleCArIDEpLCAxMCk7XG4gICAgaWYgKGhvc3RbMF0gPT09ICdbJykge1xuICAgICAgICAvLyBCcmFja2V0LXF1b3RlZCBgW2lwdjZhZGRyXTpwb3J0YCA9PiByZXR1cm4gXCJpcHY2YWRkclwiICh3aXRob3V0IGJyYWNrZXRzKS5cbiAgICAgICAgcmV0dXJuIFtob3N0LnN1YnN0cmluZygxLCBzZXBhcmF0b3JJbmRleCAtIDEpLCBwb3J0XTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbaG9zdC5zdWJzdHJpbmcoMCwgc2VwYXJhdG9ySW5kZXgpLCBwb3J0XTtcbiAgICB9XG59O1xuLyoqXG4gKiBSZXR1cm5zIEZpcmViYXNlIGFwcCBjb25maWcgc3RvcmVkIGluIHRoZSBfX0ZJUkVCQVNFX0RFRkFVTFRTX18gb2JqZWN0LlxuICogQHB1YmxpY1xuICovXG5jb25zdCBnZXREZWZhdWx0QXBwQ29uZmlnID0gKCkgPT4geyB2YXIgX2E7IHJldHVybiAoX2EgPSBnZXREZWZhdWx0cygpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY29uZmlnOyB9O1xuLyoqXG4gKiBSZXR1cm5zIGFuIGV4cGVyaW1lbnRhbCBzZXR0aW5nIG9uIHRoZSBfX0ZJUkVCQVNFX0RFRkFVTFRTX18gb2JqZWN0IChwcm9wZXJ0aWVzXG4gKiBwcmVmaXhlZCBieSBcIl9cIilcbiAqIEBwdWJsaWNcbiAqL1xuY29uc3QgZ2V0RXhwZXJpbWVudGFsU2V0dGluZyA9IChuYW1lKSA9PiB7IHZhciBfYTsgcmV0dXJuIChfYSA9IGdldERlZmF1bHRzKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYVtgXyR7bmFtZX1gXTsgfTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNsYXNzIERlZmVycmVkIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5yZWplY3QgPSAoKSA9PiB7IH07XG4gICAgICAgIHRoaXMucmVzb2x2ZSA9ICgpID0+IHsgfTtcbiAgICAgICAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgICAgIHRoaXMucmVqZWN0ID0gcmVqZWN0O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogT3VyIEFQSSBpbnRlcm5hbHMgYXJlIG5vdCBwcm9taXNpZmllZCBhbmQgY2Fubm90IGJlY2F1c2Ugb3VyIGNhbGxiYWNrIEFQSXMgaGF2ZSBzdWJ0bGUgZXhwZWN0YXRpb25zIGFyb3VuZFxuICAgICAqIGludm9raW5nIHByb21pc2VzIGlubGluZSwgd2hpY2ggUHJvbWlzZXMgYXJlIGZvcmJpZGRlbiB0byBkby4gVGhpcyBtZXRob2QgYWNjZXB0cyBhbiBvcHRpb25hbCBub2RlLXN0eWxlIGNhbGxiYWNrXG4gICAgICogYW5kIHJldHVybnMgYSBub2RlLXN0eWxlIGNhbGxiYWNrIHdoaWNoIHdpbGwgcmVzb2x2ZSBvciByZWplY3QgdGhlIERlZmVycmVkJ3MgcHJvbWlzZS5cbiAgICAgKi9cbiAgICB3cmFwQ2FsbGJhY2soY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIChlcnJvciwgdmFsdWUpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHRoaXMucmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucmVzb2x2ZSh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgLy8gQXR0YWNoaW5nIG5vb3AgaGFuZGxlciBqdXN0IGluIGNhc2UgZGV2ZWxvcGVyIHdhc24ndCBleHBlY3RpbmdcbiAgICAgICAgICAgICAgICAvLyBwcm9taXNlc1xuICAgICAgICAgICAgICAgIHRoaXMucHJvbWlzZS5jYXRjaCgoKSA9PiB7IH0pO1xuICAgICAgICAgICAgICAgIC8vIFNvbWUgb2Ygb3VyIGNhbGxiYWNrcyBkb24ndCBleHBlY3QgYSB2YWx1ZSBhbmQgb3VyIG93biB0ZXN0c1xuICAgICAgICAgICAgICAgIC8vIGFzc2VydCB0aGF0IHRoZSBwYXJhbWV0ZXIgbGVuZ3RoIGlzIDFcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2subGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZU1vY2tVc2VyVG9rZW4odG9rZW4sIHByb2plY3RJZCkge1xuICAgIGlmICh0b2tlbi51aWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgXCJ1aWRcIiBmaWVsZCBpcyBubyBsb25nZXIgc3VwcG9ydGVkIGJ5IG1vY2tVc2VyVG9rZW4uIFBsZWFzZSB1c2UgXCJzdWJcIiBpbnN0ZWFkIGZvciBGaXJlYmFzZSBBdXRoIFVzZXIgSUQuJyk7XG4gICAgfVxuICAgIC8vIFVuc2VjdXJlZCBKV1RzIHVzZSBcIm5vbmVcIiBhcyB0aGUgYWxnb3JpdGhtLlxuICAgIGNvbnN0IGhlYWRlciA9IHtcbiAgICAgICAgYWxnOiAnbm9uZScsXG4gICAgICAgIHR5cGU6ICdKV1QnXG4gICAgfTtcbiAgICBjb25zdCBwcm9qZWN0ID0gcHJvamVjdElkIHx8ICdkZW1vLXByb2plY3QnO1xuICAgIGNvbnN0IGlhdCA9IHRva2VuLmlhdCB8fCAwO1xuICAgIGNvbnN0IHN1YiA9IHRva2VuLnN1YiB8fCB0b2tlbi51c2VyX2lkO1xuICAgIGlmICghc3ViKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIm1vY2tVc2VyVG9rZW4gbXVzdCBjb250YWluICdzdWInIG9yICd1c2VyX2lkJyBmaWVsZCFcIik7XG4gICAgfVxuICAgIGNvbnN0IHBheWxvYWQgPSBPYmplY3QuYXNzaWduKHsgXG4gICAgICAgIC8vIFNldCBhbGwgcmVxdWlyZWQgZmllbGRzIHRvIGRlY2VudCBkZWZhdWx0c1xuICAgICAgICBpc3M6IGBodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vJHtwcm9qZWN0fWAsIGF1ZDogcHJvamVjdCwgaWF0LCBleHA6IGlhdCArIDM2MDAsIGF1dGhfdGltZTogaWF0LCBzdWIsIHVzZXJfaWQ6IHN1YiwgZmlyZWJhc2U6IHtcbiAgICAgICAgICAgIHNpZ25faW5fcHJvdmlkZXI6ICdjdXN0b20nLFxuICAgICAgICAgICAgaWRlbnRpdGllczoge31cbiAgICAgICAgfSB9LCB0b2tlbik7XG4gICAgLy8gVW5zZWN1cmVkIEpXVHMgdXNlIHRoZSBlbXB0eSBzdHJpbmcgYXMgYSBzaWduYXR1cmUuXG4gICAgY29uc3Qgc2lnbmF0dXJlID0gJyc7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcoSlNPTi5zdHJpbmdpZnkoaGVhZGVyKSksXG4gICAgICAgIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nKEpTT04uc3RyaW5naWZ5KHBheWxvYWQpKSxcbiAgICAgICAgc2lnbmF0dXJlXG4gICAgXS5qb2luKCcuJyk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJldHVybnMgbmF2aWdhdG9yLnVzZXJBZ2VudCBzdHJpbmcgb3IgJycgaWYgaXQncyBub3QgZGVmaW5lZC5cbiAqIEByZXR1cm4gdXNlciBhZ2VudCBzdHJpbmdcbiAqL1xuZnVuY3Rpb24gZ2V0VUEoKSB7XG4gICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIHR5cGVvZiBuYXZpZ2F0b3JbJ3VzZXJBZ2VudCddID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gbmF2aWdhdG9yWyd1c2VyQWdlbnQnXTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG59XG4vKipcbiAqIERldGVjdCBDb3Jkb3ZhIC8gUGhvbmVHYXAgLyBJb25pYyBmcmFtZXdvcmtzIG9uIGEgbW9iaWxlIGRldmljZS5cbiAqXG4gKiBEZWxpYmVyYXRlbHkgZG9lcyBub3QgcmVseSBvbiBjaGVja2luZyBgZmlsZTovL2AgVVJMcyAoYXMgdGhpcyBmYWlscyBQaG9uZUdhcFxuICogaW4gdGhlIFJpcHBsZSBlbXVsYXRvcikgbm9yIENvcmRvdmEgYG9uRGV2aWNlUmVhZHlgLCB3aGljaCB3b3VsZCBub3JtYWxseVxuICogd2FpdCBmb3IgYSBjYWxsYmFjay5cbiAqL1xuZnVuY3Rpb24gaXNNb2JpbGVDb3Jkb3ZhKCkge1xuICAgIHJldHVybiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgLy8gQHRzLWlnbm9yZSBTZXR0aW5nIHVwIGFuIGJyb2FkbHkgYXBwbGljYWJsZSBpbmRleCBzaWduYXR1cmUgZm9yIFdpbmRvd1xuICAgICAgICAvLyBqdXN0IHRvIGRlYWwgd2l0aCB0aGlzIGNhc2Ugd291bGQgcHJvYmFibHkgYmUgYSBiYWQgaWRlYS5cbiAgICAgICAgISEod2luZG93Wydjb3Jkb3ZhJ10gfHwgd2luZG93WydwaG9uZWdhcCddIHx8IHdpbmRvd1snUGhvbmVHYXAnXSkgJiZcbiAgICAgICAgL2lvc3xpcGhvbmV8aXBvZHxpcGFkfGFuZHJvaWR8YmxhY2tiZXJyeXxpZW1vYmlsZS9pLnRlc3QoZ2V0VUEoKSkpO1xufVxuLyoqXG4gKiBEZXRlY3QgTm9kZS5qcy5cbiAqXG4gKiBAcmV0dXJuIHRydWUgaWYgTm9kZS5qcyBlbnZpcm9ubWVudCBpcyBkZXRlY3RlZCBvciBzcGVjaWZpZWQuXG4gKi9cbi8vIE5vZGUgZGV0ZWN0aW9uIGxvZ2ljIGZyb206IGh0dHBzOi8vZ2l0aHViLmNvbS9pbGlha2FuL2RldGVjdC1ub2RlL1xuZnVuY3Rpb24gaXNOb2RlKCkge1xuICAgIHZhciBfYTtcbiAgICBjb25zdCBmb3JjZUVudmlyb25tZW50ID0gKF9hID0gZ2V0RGVmYXVsdHMoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZvcmNlRW52aXJvbm1lbnQ7XG4gICAgaWYgKGZvcmNlRW52aXJvbm1lbnQgPT09ICdub2RlJykge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZm9yY2VFbnZpcm9ubWVudCA9PT0gJ2Jyb3dzZXInKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZ2xvYmFsLnByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXScpO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuLyoqXG4gKiBEZXRlY3QgQnJvd3NlciBFbnZpcm9ubWVudC5cbiAqIE5vdGU6IFRoaXMgd2lsbCByZXR1cm4gdHJ1ZSBmb3IgY2VydGFpbiB0ZXN0IGZyYW1ld29ya3MgdGhhdCBhcmUgaW5jb21wbGV0ZWx5XG4gKiBtaW1pY2tpbmcgYSBicm93c2VyLCBhbmQgc2hvdWxkIG5vdCBsZWFkIHRvIGFzc3VtaW5nIGFsbCBicm93c2VyIEFQSXMgYXJlXG4gKiBhdmFpbGFibGUuXG4gKi9cbmZ1bmN0aW9uIGlzQnJvd3NlcigpIHtcbiAgICByZXR1cm4gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgfHwgaXNXZWJXb3JrZXIoKTtcbn1cbi8qKlxuICogRGV0ZWN0IFdlYiBXb3JrZXIgY29udGV4dC5cbiAqL1xuZnVuY3Rpb24gaXNXZWJXb3JrZXIoKSB7XG4gICAgcmV0dXJuICh0eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICBzZWxmIGluc3RhbmNlb2YgV29ya2VyR2xvYmFsU2NvcGUpO1xufVxuLyoqXG4gKiBEZXRlY3QgQ2xvdWRmbGFyZSBXb3JrZXIgY29udGV4dC5cbiAqL1xuZnVuY3Rpb24gaXNDbG91ZGZsYXJlV29ya2VyKCkge1xuICAgIHJldHVybiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgbmF2aWdhdG9yLnVzZXJBZ2VudCA9PT0gJ0Nsb3VkZmxhcmUtV29ya2VycycpO1xufVxuZnVuY3Rpb24gaXNCcm93c2VyRXh0ZW5zaW9uKCkge1xuICAgIGNvbnN0IHJ1bnRpbWUgPSB0eXBlb2YgY2hyb21lID09PSAnb2JqZWN0J1xuICAgICAgICA/IGNocm9tZS5ydW50aW1lXG4gICAgICAgIDogdHlwZW9mIGJyb3dzZXIgPT09ICdvYmplY3QnXG4gICAgICAgICAgICA/IGJyb3dzZXIucnVudGltZVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHR5cGVvZiBydW50aW1lID09PSAnb2JqZWN0JyAmJiBydW50aW1lLmlkICE9PSB1bmRlZmluZWQ7XG59XG4vKipcbiAqIERldGVjdCBSZWFjdCBOYXRpdmUuXG4gKlxuICogQHJldHVybiB0cnVlIGlmIFJlYWN0TmF0aXZlIGVudmlyb25tZW50IGlzIGRldGVjdGVkLlxuICovXG5mdW5jdGlvbiBpc1JlYWN0TmF0aXZlKCkge1xuICAgIHJldHVybiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ29iamVjdCcgJiYgbmF2aWdhdG9yWydwcm9kdWN0J10gPT09ICdSZWFjdE5hdGl2ZScpO1xufVxuLyoqIERldGVjdHMgRWxlY3Ryb24gYXBwcy4gKi9cbmZ1bmN0aW9uIGlzRWxlY3Ryb24oKSB7XG4gICAgcmV0dXJuIGdldFVBKCkuaW5kZXhPZignRWxlY3Ryb24vJykgPj0gMDtcbn1cbi8qKiBEZXRlY3RzIEludGVybmV0IEV4cGxvcmVyLiAqL1xuZnVuY3Rpb24gaXNJRSgpIHtcbiAgICBjb25zdCB1YSA9IGdldFVBKCk7XG4gICAgcmV0dXJuIHVhLmluZGV4T2YoJ01TSUUgJykgPj0gMCB8fCB1YS5pbmRleE9mKCdUcmlkZW50LycpID49IDA7XG59XG4vKiogRGV0ZWN0cyBVbml2ZXJzYWwgV2luZG93cyBQbGF0Zm9ybSBhcHBzLiAqL1xuZnVuY3Rpb24gaXNVV1AoKSB7XG4gICAgcmV0dXJuIGdldFVBKCkuaW5kZXhPZignTVNBcHBIb3N0LycpID49IDA7XG59XG4vKipcbiAqIERldGVjdCB3aGV0aGVyIHRoZSBjdXJyZW50IFNESyBidWlsZCBpcyB0aGUgTm9kZSB2ZXJzaW9uLlxuICpcbiAqIEByZXR1cm4gdHJ1ZSBpZiBpdCdzIHRoZSBOb2RlIFNESyBidWlsZC5cbiAqL1xuZnVuY3Rpb24gaXNOb2RlU2RrKCkge1xuICAgIHJldHVybiBDT05TVEFOVFMuTk9ERV9DTElFTlQgPT09IHRydWUgfHwgQ09OU1RBTlRTLk5PREVfQURNSU4gPT09IHRydWU7XG59XG4vKiogUmV0dXJucyB0cnVlIGlmIHdlIGFyZSBydW5uaW5nIGluIFNhZmFyaS4gKi9cbmZ1bmN0aW9uIGlzU2FmYXJpKCkge1xuICAgIHJldHVybiAoIWlzTm9kZSgpICYmXG4gICAgICAgICEhbmF2aWdhdG9yLnVzZXJBZ2VudCAmJlxuICAgICAgICBuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdTYWZhcmknKSAmJlxuICAgICAgICAhbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcygnQ2hyb21lJykpO1xufVxuLyoqXG4gKiBUaGlzIG1ldGhvZCBjaGVja3MgaWYgaW5kZXhlZERCIGlzIHN1cHBvcnRlZCBieSBjdXJyZW50IGJyb3dzZXIvc2VydmljZSB3b3JrZXIgY29udGV4dFxuICogQHJldHVybiB0cnVlIGlmIGluZGV4ZWREQiBpcyBzdXBwb3J0ZWQgYnkgY3VycmVudCBicm93c2VyL3NlcnZpY2Ugd29ya2VyIGNvbnRleHRcbiAqL1xuZnVuY3Rpb24gaXNJbmRleGVkREJBdmFpbGFibGUoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBpbmRleGVkREIgPT09ICdvYmplY3QnO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuLyoqXG4gKiBUaGlzIG1ldGhvZCB2YWxpZGF0ZXMgYnJvd3Nlci9zdyBjb250ZXh0IGZvciBpbmRleGVkREIgYnkgb3BlbmluZyBhIGR1bW15IGluZGV4ZWREQiBkYXRhYmFzZSBhbmQgcmVqZWN0XG4gKiBpZiBlcnJvcnMgb2NjdXIgZHVyaW5nIHRoZSBkYXRhYmFzZSBvcGVuIG9wZXJhdGlvbi5cbiAqXG4gKiBAdGhyb3dzIGV4Y2VwdGlvbiBpZiBjdXJyZW50IGJyb3dzZXIvc3cgY29udGV4dCBjYW4ndCBydW4gaWRiLm9wZW4gKGV4OiBTYWZhcmkgaWZyYW1lLCBGaXJlZm94XG4gKiBwcml2YXRlIGJyb3dzaW5nKVxuICovXG5mdW5jdGlvbiB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlKCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsZXQgcHJlRXhpc3QgPSB0cnVlO1xuICAgICAgICAgICAgY29uc3QgREJfQ0hFQ0tfTkFNRSA9ICd2YWxpZGF0ZS1icm93c2VyLWNvbnRleHQtZm9yLWluZGV4ZWRkYi1hbmFseXRpY3MtbW9kdWxlJztcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSBzZWxmLmluZGV4ZWREQi5vcGVuKERCX0NIRUNLX05BTUUpO1xuICAgICAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVxdWVzdC5yZXN1bHQuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAvLyBkZWxldGUgZGF0YWJhc2Ugb25seSB3aGVuIGl0IGRvZXNuJ3QgcHJlLWV4aXN0XG4gICAgICAgICAgICAgICAgaWYgKCFwcmVFeGlzdCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmluZGV4ZWREQi5kZWxldGVEYXRhYmFzZShEQl9DSEVDS19OQU1FKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXF1ZXN0Lm9udXBncmFkZW5lZWRlZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBwcmVFeGlzdCA9IGZhbHNlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJlcXVlc3Qub25lcnJvciA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgcmVqZWN0KCgoX2EgPSByZXF1ZXN0LmVycm9yKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubWVzc2FnZSkgfHwgJycpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbi8qKlxuICpcbiAqIFRoaXMgbWV0aG9kIGNoZWNrcyB3aGV0aGVyIGNvb2tpZSBpcyBlbmFibGVkIHdpdGhpbiBjdXJyZW50IGJyb3dzZXJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBjb29raWUgaXMgZW5hYmxlZCB3aXRoaW4gY3VycmVudCBicm93c2VyXG4gKi9cbmZ1bmN0aW9uIGFyZUNvb2tpZXNFbmFibGVkKCkge1xuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yID09PSAndW5kZWZpbmVkJyB8fCAhbmF2aWdhdG9yLmNvb2tpZUVuYWJsZWQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQGZpbGVvdmVydmlldyBTdGFuZGFyZGl6ZWQgRmlyZWJhc2UgRXJyb3IuXG4gKlxuICogVXNhZ2U6XG4gKlxuICogICAvLyBUeXBlU2NyaXB0IHN0cmluZyBsaXRlcmFscyBmb3IgdHlwZS1zYWZlIGNvZGVzXG4gKiAgIHR5cGUgRXJyID1cbiAqICAgICAndW5rbm93bicgfFxuICogICAgICdvYmplY3Qtbm90LWZvdW5kJ1xuICogICAgIDtcbiAqXG4gKiAgIC8vIENsb3N1cmUgZW51bSBmb3IgdHlwZS1zYWZlIGVycm9yIGNvZGVzXG4gKiAgIC8vIGF0LWVudW0ge3N0cmluZ31cbiAqICAgdmFyIEVyciA9IHtcbiAqICAgICBVTktOT1dOOiAndW5rbm93bicsXG4gKiAgICAgT0JKRUNUX05PVF9GT1VORDogJ29iamVjdC1ub3QtZm91bmQnLFxuICogICB9XG4gKlxuICogICBsZXQgZXJyb3JzOiBNYXA8RXJyLCBzdHJpbmc+ID0ge1xuICogICAgICdnZW5lcmljLWVycm9yJzogXCJVbmtub3duIGVycm9yXCIsXG4gKiAgICAgJ2ZpbGUtbm90LWZvdW5kJzogXCJDb3VsZCBub3QgZmluZCBmaWxlOiB7JGZpbGV9XCIsXG4gKiAgIH07XG4gKlxuICogICAvLyBUeXBlLXNhZmUgZnVuY3Rpb24gLSBtdXN0IHBhc3MgYSB2YWxpZCBlcnJvciBjb2RlIGFzIHBhcmFtLlxuICogICBsZXQgZXJyb3IgPSBuZXcgRXJyb3JGYWN0b3J5PEVycj4oJ3NlcnZpY2UnLCAnU2VydmljZScsIGVycm9ycyk7XG4gKlxuICogICAuLi5cbiAqICAgdGhyb3cgZXJyb3IuY3JlYXRlKEVyci5HRU5FUklDKTtcbiAqICAgLi4uXG4gKiAgIHRocm93IGVycm9yLmNyZWF0ZShFcnIuRklMRV9OT1RfRk9VTkQsIHsnZmlsZSc6IGZpbGVOYW1lfSk7XG4gKiAgIC4uLlxuICogICAvLyBTZXJ2aWNlOiBDb3VsZCBub3QgZmlsZSBmaWxlOiBmb28udHh0IChzZXJ2aWNlL2ZpbGUtbm90LWZvdW5kKS5cbiAqXG4gKiAgIGNhdGNoIChlKSB7XG4gKiAgICAgYXNzZXJ0KGUubWVzc2FnZSA9PT0gXCJDb3VsZCBub3QgZmluZCBmaWxlOiBmb28udHh0LlwiKTtcbiAqICAgICBpZiAoKGUgYXMgRmlyZWJhc2VFcnJvcik/LmNvZGUgPT09ICdzZXJ2aWNlL2ZpbGUtbm90LWZvdW5kJykge1xuICogICAgICAgY29uc29sZS5sb2coXCJDb3VsZCBub3QgcmVhZCBmaWxlOiBcIiArIGVbJ2ZpbGUnXSk7XG4gKiAgICAgfVxuICogICB9XG4gKi9cbmNvbnN0IEVSUk9SX05BTUUgPSAnRmlyZWJhc2VFcnJvcic7XG4vLyBCYXNlZCBvbiBjb2RlIGZyb206XG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9FcnJvciNDdXN0b21fRXJyb3JfVHlwZXNcbmNsYXNzIEZpcmViYXNlRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSBlcnJvciBjb2RlIGZvciB0aGlzIGVycm9yLiAqL1xuICAgIGNvZGUsIG1lc3NhZ2UsIFxuICAgIC8qKiBDdXN0b20gZGF0YSBmb3IgdGhpcyBlcnJvci4gKi9cbiAgICBjdXN0b21EYXRhKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLmNvZGUgPSBjb2RlO1xuICAgICAgICB0aGlzLmN1c3RvbURhdGEgPSBjdXN0b21EYXRhO1xuICAgICAgICAvKiogVGhlIGN1c3RvbSBuYW1lIGZvciBhbGwgRmlyZWJhc2VFcnJvcnMuICovXG4gICAgICAgIHRoaXMubmFtZSA9IEVSUk9SX05BTUU7XG4gICAgICAgIC8vIEZpeCBGb3IgRVM1XG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9NaWNyb3NvZnQvVHlwZVNjcmlwdC13aWtpL2Jsb2IvbWFzdGVyL0JyZWFraW5nLUNoYW5nZXMubWQjZXh0ZW5kaW5nLWJ1aWx0LWlucy1saWtlLWVycm9yLWFycmF5LWFuZC1tYXAtbWF5LW5vLWxvbmdlci13b3JrXG4gICAgICAgIC8vIFRPRE8oZGxhcm9jcXVlKTogUmVwbGFjZSB0aGlzIHdpdGggYG5ldy50YXJnZXRgOiBodHRwczovL3d3dy50eXBlc2NyaXB0bGFuZy5vcmcvZG9jcy9oYW5kYm9vay9yZWxlYXNlLW5vdGVzL3R5cGVzY3JpcHQtMi0yLmh0bWwjc3VwcG9ydC1mb3ItbmV3dGFyZ2V0XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgIHdoaWNoIHdlIGNhbiBub3cgdXNlIHNpbmNlIHdlIG5vIGxvbmdlciB0YXJnZXQgRVM1LlxuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgRmlyZWJhc2VFcnJvci5wcm90b3R5cGUpO1xuICAgICAgICAvLyBNYWludGFpbnMgcHJvcGVyIHN0YWNrIHRyYWNlIGZvciB3aGVyZSBvdXIgZXJyb3Igd2FzIHRocm93bi5cbiAgICAgICAgLy8gT25seSBhdmFpbGFibGUgb24gVjguXG4gICAgICAgIGlmIChFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkge1xuICAgICAgICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgRXJyb3JGYWN0b3J5LnByb3RvdHlwZS5jcmVhdGUpO1xuICAgICAgICB9XG4gICAgfVxufVxuY2xhc3MgRXJyb3JGYWN0b3J5IHtcbiAgICBjb25zdHJ1Y3RvcihzZXJ2aWNlLCBzZXJ2aWNlTmFtZSwgZXJyb3JzKSB7XG4gICAgICAgIHRoaXMuc2VydmljZSA9IHNlcnZpY2U7XG4gICAgICAgIHRoaXMuc2VydmljZU5hbWUgPSBzZXJ2aWNlTmFtZTtcbiAgICAgICAgdGhpcy5lcnJvcnMgPSBlcnJvcnM7XG4gICAgfVxuICAgIGNyZWF0ZShjb2RlLCAuLi5kYXRhKSB7XG4gICAgICAgIGNvbnN0IGN1c3RvbURhdGEgPSBkYXRhWzBdIHx8IHt9O1xuICAgICAgICBjb25zdCBmdWxsQ29kZSA9IGAke3RoaXMuc2VydmljZX0vJHtjb2RlfWA7XG4gICAgICAgIGNvbnN0IHRlbXBsYXRlID0gdGhpcy5lcnJvcnNbY29kZV07XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0ZW1wbGF0ZSA/IHJlcGxhY2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgY3VzdG9tRGF0YSkgOiAnRXJyb3InO1xuICAgICAgICAvLyBTZXJ2aWNlIE5hbWU6IEVycm9yIG1lc3NhZ2UgKHNlcnZpY2UvY29kZSkuXG4gICAgICAgIGNvbnN0IGZ1bGxNZXNzYWdlID0gYCR7dGhpcy5zZXJ2aWNlTmFtZX06ICR7bWVzc2FnZX0gKCR7ZnVsbENvZGV9KS5gO1xuICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBGaXJlYmFzZUVycm9yKGZ1bGxDb2RlLCBmdWxsTWVzc2FnZSwgY3VzdG9tRGF0YSk7XG4gICAgICAgIHJldHVybiBlcnJvcjtcbiAgICB9XG59XG5mdW5jdGlvbiByZXBsYWNlVGVtcGxhdGUodGVtcGxhdGUsIGRhdGEpIHtcbiAgICByZXR1cm4gdGVtcGxhdGUucmVwbGFjZShQQVRURVJOLCAoXywga2V5KSA9PiB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gZGF0YVtrZXldO1xuICAgICAgICByZXR1cm4gdmFsdWUgIT0gbnVsbCA/IFN0cmluZyh2YWx1ZSkgOiBgPCR7a2V5fT8+YDtcbiAgICB9KTtcbn1cbmNvbnN0IFBBVFRFUk4gPSAvXFx7XFwkKFtefV0rKX0vZztcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRXZhbHVhdGVzIGEgSlNPTiBzdHJpbmcgaW50byBhIGphdmFzY3JpcHQgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgQSBzdHJpbmcgY29udGFpbmluZyBKU09OLlxuICogQHJldHVybiB7Kn0gVGhlIGphdmFzY3JpcHQgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc3BlY2lmaWVkIEpTT04uXG4gKi9cbmZ1bmN0aW9uIGpzb25FdmFsKHN0cikge1xuICAgIHJldHVybiBKU09OLnBhcnNlKHN0cik7XG59XG4vKipcbiAqIFJldHVybnMgSlNPTiByZXByZXNlbnRpbmcgYSBqYXZhc2NyaXB0IG9iamVjdC5cbiAqIEBwYXJhbSB7Kn0gZGF0YSBKYXZhU2NyaXB0IG9iamVjdCB0byBiZSBzdHJpbmdpZmllZC5cbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIEpTT04gY29udGVudHMgb2YgdGhlIG9iamVjdC5cbiAqL1xuZnVuY3Rpb24gc3RyaW5naWZ5KGRhdGEpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBpbnRvIGNvbnN0aXR1ZW50IHBhcnRzLlxuICpcbiAqIE5vdGVzOlxuICogLSBNYXkgcmV0dXJuIHdpdGggaW52YWxpZCAvIGluY29tcGxldGUgY2xhaW1zIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cbiAqL1xuY29uc3QgZGVjb2RlID0gZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgbGV0IGhlYWRlciA9IHt9LCBjbGFpbXMgPSB7fSwgZGF0YSA9IHt9LCBzaWduYXR1cmUgPSAnJztcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBwYXJ0cyA9IHRva2VuLnNwbGl0KCcuJyk7XG4gICAgICAgIGhlYWRlciA9IGpzb25FdmFsKGJhc2U2NERlY29kZShwYXJ0c1swXSkgfHwgJycpO1xuICAgICAgICBjbGFpbXMgPSBqc29uRXZhbChiYXNlNjREZWNvZGUocGFydHNbMV0pIHx8ICcnKTtcbiAgICAgICAgc2lnbmF0dXJlID0gcGFydHNbMl07XG4gICAgICAgIGRhdGEgPSBjbGFpbXNbJ2QnXSB8fCB7fTtcbiAgICAgICAgZGVsZXRlIGNsYWltc1snZCddO1xuICAgIH1cbiAgICBjYXRjaCAoZSkgeyB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaGVhZGVyLFxuICAgICAgICBjbGFpbXMsXG4gICAgICAgIGRhdGEsXG4gICAgICAgIHNpZ25hdHVyZVxuICAgIH07XG59O1xuLyoqXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gYW5kIGNoZWNrcyB0aGUgdmFsaWRpdHkgb2YgaXRzIHRpbWUtYmFzZWQgY2xhaW1zLiBXaWxsIHJldHVybiB0cnVlIGlmIHRoZVxuICogdG9rZW4gaXMgd2l0aGluIHRoZSB0aW1lIHdpbmRvdyBhdXRob3JpemVkIGJ5IHRoZSAnbmJmJyAobm90LWJlZm9yZSkgYW5kICdpYXQnIChpc3N1ZWQtYXQpIGNsYWltcy5cbiAqXG4gKiBOb3RlczpcbiAqIC0gTWF5IHJldHVybiBhIGZhbHNlIG5lZ2F0aXZlIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cbiAqL1xuY29uc3QgaXNWYWxpZFRpbWVzdGFtcCA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgIGNvbnN0IGNsYWltcyA9IGRlY29kZSh0b2tlbikuY2xhaW1zO1xuICAgIGNvbnN0IG5vdyA9IE1hdGguZmxvb3IobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKTtcbiAgICBsZXQgdmFsaWRTaW5jZSA9IDAsIHZhbGlkVW50aWwgPSAwO1xuICAgIGlmICh0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0Jykge1xuICAgICAgICBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCduYmYnKSkge1xuICAgICAgICAgICAgdmFsaWRTaW5jZSA9IGNsYWltc1snbmJmJ107XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKSkge1xuICAgICAgICAgICAgdmFsaWRTaW5jZSA9IGNsYWltc1snaWF0J107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnZXhwJykpIHtcbiAgICAgICAgICAgIHZhbGlkVW50aWwgPSBjbGFpbXNbJ2V4cCddO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gdG9rZW4gd2lsbCBleHBpcmUgYWZ0ZXIgMjRoIGJ5IGRlZmF1bHRcbiAgICAgICAgICAgIHZhbGlkVW50aWwgPSB2YWxpZFNpbmNlICsgODY0MDA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuICghIW5vdyAmJlxuICAgICAgICAhIXZhbGlkU2luY2UgJiZcbiAgICAgICAgISF2YWxpZFVudGlsICYmXG4gICAgICAgIG5vdyA+PSB2YWxpZFNpbmNlICYmXG4gICAgICAgIG5vdyA8PSB2YWxpZFVudGlsKTtcbn07XG4vKipcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgcmV0dXJucyBpdHMgaXNzdWVkIGF0IHRpbWUgaWYgdmFsaWQsIG51bGwgb3RoZXJ3aXNlLlxuICpcbiAqIE5vdGVzOlxuICogLSBNYXkgcmV0dXJuIG51bGwgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxuICovXG5jb25zdCBpc3N1ZWRBdFRpbWUgPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICBjb25zdCBjbGFpbXMgPSBkZWNvZGUodG9rZW4pLmNsYWltcztcbiAgICBpZiAodHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcgJiYgY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKSkge1xuICAgICAgICByZXR1cm4gY2xhaW1zWydpYXQnXTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59O1xuLyoqXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gYW5kIGNoZWNrcyB0aGUgdmFsaWRpdHkgb2YgaXRzIGZvcm1hdC4gRXhwZWN0cyBhIHZhbGlkIGlzc3VlZC1hdCB0aW1lLlxuICpcbiAqIE5vdGVzOlxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxuICovXG5jb25zdCBpc1ZhbGlkRm9ybWF0ID0gZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgY29uc3QgZGVjb2RlZCA9IGRlY29kZSh0b2tlbiksIGNsYWltcyA9IGRlY29kZWQuY2xhaW1zO1xuICAgIHJldHVybiAhIWNsYWltcyAmJiB0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0JyAmJiBjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2lhdCcpO1xufTtcbi8qKlxuICogQXR0ZW1wdHMgdG8gcGVlciBpbnRvIGFuIGF1dGggdG9rZW4gYW5kIGRldGVybWluZSBpZiBpdCdzIGFuIGFkbWluIGF1dGggdG9rZW4gYnkgbG9va2luZyBhdCB0aGUgY2xhaW1zIHBvcnRpb24uXG4gKlxuICogTm90ZXM6XG4gKiAtIE1heSByZXR1cm4gYSBmYWxzZSBuZWdhdGl2ZSBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXG4gKi9cbmNvbnN0IGlzQWRtaW4gPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICBjb25zdCBjbGFpbXMgPSBkZWNvZGUodG9rZW4pLmNsYWltcztcbiAgICByZXR1cm4gdHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcgJiYgY2xhaW1zWydhZG1pbiddID09PSB0cnVlO1xufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmZ1bmN0aW9uIGNvbnRhaW5zKG9iaiwga2V5KSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XG59XG5mdW5jdGlvbiBzYWZlR2V0KG9iaiwga2V5KSB7XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcbiAgICAgICAgcmV0dXJuIG9ialtrZXldO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG59XG5mdW5jdGlvbiBpc0VtcHR5KG9iaikge1xuICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gbWFwKG9iaiwgZm4sIGNvbnRleHRPYmopIHtcbiAgICBjb25zdCByZXMgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcbiAgICAgICAgICAgIHJlc1trZXldID0gZm4uY2FsbChjb250ZXh0T2JqLCBvYmpba2V5XSwga2V5LCBvYmopO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG4vKipcbiAqIERlZXAgZXF1YWwgdHdvIG9iamVjdHMuIFN1cHBvcnQgQXJyYXlzIGFuZCBPYmplY3RzLlxuICovXG5mdW5jdGlvbiBkZWVwRXF1YWwoYSwgYikge1xuICAgIGlmIChhID09PSBiKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjb25zdCBhS2V5cyA9IE9iamVjdC5rZXlzKGEpO1xuICAgIGNvbnN0IGJLZXlzID0gT2JqZWN0LmtleXMoYik7XG4gICAgZm9yIChjb25zdCBrIG9mIGFLZXlzKSB7XG4gICAgICAgIGlmICghYktleXMuaW5jbHVkZXMoaykpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhUHJvcCA9IGFba107XG4gICAgICAgIGNvbnN0IGJQcm9wID0gYltrXTtcbiAgICAgICAgaWYgKGlzT2JqZWN0KGFQcm9wKSAmJiBpc09iamVjdChiUHJvcCkpIHtcbiAgICAgICAgICAgIGlmICghZGVlcEVxdWFsKGFQcm9wLCBiUHJvcCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYVByb3AgIT09IGJQcm9wKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBrIG9mIGJLZXlzKSB7XG4gICAgICAgIGlmICghYUtleXMuaW5jbHVkZXMoaykpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmZ1bmN0aW9uIGlzT2JqZWN0KHRoaW5nKSB7XG4gICAgcmV0dXJuIHRoaW5nICE9PSBudWxsICYmIHR5cGVvZiB0aGluZyA9PT0gJ29iamVjdCc7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlamVjdHMgaWYgdGhlIGdpdmVuIHByb21pc2UgZG9lc24ndCByZXNvbHZlIGluIHRpbWVJbk1TIG1pbGxpc2Vjb25kcy5cbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBwcm9taXNlV2l0aFRpbWVvdXQocHJvbWlzZSwgdGltZUluTVMgPSAyMDAwKSB7XG4gICAgY29uc3QgZGVmZXJyZWRQcm9taXNlID0gbmV3IERlZmVycmVkKCk7XG4gICAgc2V0VGltZW91dCgoKSA9PiBkZWZlcnJlZFByb21pc2UucmVqZWN0KCd0aW1lb3V0IScpLCB0aW1lSW5NUyk7XG4gICAgcHJvbWlzZS50aGVuKGRlZmVycmVkUHJvbWlzZS5yZXNvbHZlLCBkZWZlcnJlZFByb21pc2UucmVqZWN0KTtcbiAgICByZXR1cm4gZGVmZXJyZWRQcm9taXNlLnByb21pc2U7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJldHVybnMgYSBxdWVyeXN0cmluZy1mb3JtYXR0ZWQgc3RyaW5nIChlLmcuICZhcmc9dmFsJmFyZzI9dmFsMikgZnJvbSBhXG4gKiBwYXJhbXMgb2JqZWN0IChlLmcuIHthcmc6ICd2YWwnLCBhcmcyOiAndmFsMid9KVxuICogTm90ZTogWW91IG11c3QgcHJlcGVuZCBpdCB3aXRoID8gd2hlbiBhZGRpbmcgaXQgdG8gYSBVUkwuXG4gKi9cbmZ1bmN0aW9uIHF1ZXJ5c3RyaW5nKHF1ZXJ5c3RyaW5nUGFyYW1zKSB7XG4gICAgY29uc3QgcGFyYW1zID0gW107XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocXVlcnlzdHJpbmdQYXJhbXMpKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgdmFsdWUuZm9yRWFjaChhcnJheVZhbCA9PiB7XG4gICAgICAgICAgICAgICAgcGFyYW1zLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQoYXJyYXlWYWwpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGFyYW1zLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcGFyYW1zLmxlbmd0aCA/ICcmJyArIHBhcmFtcy5qb2luKCcmJykgOiAnJztcbn1cbi8qKlxuICogRGVjb2RlcyBhIHF1ZXJ5c3RyaW5nIChlLmcuID9hcmc9dmFsJmFyZzI9dmFsMikgaW50byBhIHBhcmFtcyBvYmplY3RcbiAqIChlLmcuIHthcmc6ICd2YWwnLCBhcmcyOiAndmFsMid9KVxuICovXG5mdW5jdGlvbiBxdWVyeXN0cmluZ0RlY29kZShxdWVyeXN0cmluZykge1xuICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgIGNvbnN0IHRva2VucyA9IHF1ZXJ5c3RyaW5nLnJlcGxhY2UoL15cXD8vLCAnJykuc3BsaXQoJyYnKTtcbiAgICB0b2tlbnMuZm9yRWFjaCh0b2tlbiA9PiB7XG4gICAgICAgIGlmICh0b2tlbikge1xuICAgICAgICAgICAgY29uc3QgW2tleSwgdmFsdWVdID0gdG9rZW4uc3BsaXQoJz0nKTtcbiAgICAgICAgICAgIG9ialtkZWNvZGVVUklDb21wb25lbnQoa2V5KV0gPSBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIG9iajtcbn1cbi8qKlxuICogRXh0cmFjdCB0aGUgcXVlcnkgc3RyaW5nIHBhcnQgb2YgYSBVUkwsIGluY2x1ZGluZyB0aGUgbGVhZGluZyBxdWVzdGlvbiBtYXJrIChpZiBwcmVzZW50KS5cbiAqL1xuZnVuY3Rpb24gZXh0cmFjdFF1ZXJ5c3RyaW5nKHVybCkge1xuICAgIGNvbnN0IHF1ZXJ5U3RhcnQgPSB1cmwuaW5kZXhPZignPycpO1xuICAgIGlmICghcXVlcnlTdGFydCkge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxuICAgIGNvbnN0IGZyYWdtZW50U3RhcnQgPSB1cmwuaW5kZXhPZignIycsIHF1ZXJ5U3RhcnQpO1xuICAgIHJldHVybiB1cmwuc3Vic3RyaW5nKHF1ZXJ5U3RhcnQsIGZyYWdtZW50U3RhcnQgPiAwID8gZnJhZ21lbnRTdGFydCA6IHVuZGVmaW5lZCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEBmaWxlb3ZlcnZpZXcgU0hBLTEgY3J5cHRvZ3JhcGhpYyBoYXNoLlxuICogVmFyaWFibGUgbmFtZXMgZm9sbG93IHRoZSBub3RhdGlvbiBpbiBGSVBTIFBVQiAxODAtMzpcbiAqIGh0dHA6Ly9jc3JjLm5pc3QuZ292L3B1YmxpY2F0aW9ucy9maXBzL2ZpcHMxODAtMy9maXBzMTgwLTNfZmluYWwucGRmLlxuICpcbiAqIFVzYWdlOlxuICogICB2YXIgc2hhMSA9IG5ldyBzaGExKCk7XG4gKiAgIHNoYTEudXBkYXRlKGJ5dGVzKTtcbiAqICAgdmFyIGhhc2ggPSBzaGExLmRpZ2VzdCgpO1xuICpcbiAqIFBlcmZvcm1hbmNlOlxuICogICBDaHJvbWUgMjM6ICAgfjQwMCBNYml0L3NcbiAqICAgRmlyZWZveCAxNjogIH4yNTAgTWJpdC9zXG4gKlxuICovXG4vKipcbiAqIFNIQS0xIGNyeXB0b2dyYXBoaWMgaGFzaCBjb25zdHJ1Y3Rvci5cbiAqXG4gKiBUaGUgcHJvcGVydGllcyBkZWNsYXJlZCBoZXJlIGFyZSBkaXNjdXNzZWQgaW4gdGhlIGFib3ZlIGFsZ29yaXRobSBkb2N1bWVudC5cbiAqIEBjb25zdHJ1Y3RvclxuICogQGZpbmFsXG4gKiBAc3RydWN0XG4gKi9cbmNsYXNzIFNoYTEge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogSG9sZHMgdGhlIHByZXZpb3VzIHZhbHVlcyBvZiBhY2N1bXVsYXRlZCB2YXJpYWJsZXMgYS1lIGluIHRoZSBjb21wcmVzc19cbiAgICAgICAgICogZnVuY3Rpb24uXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNoYWluXyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQSBidWZmZXIgaG9sZGluZyB0aGUgcGFydGlhbGx5IGNvbXB1dGVkIGhhc2ggcmVzdWx0LlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5idWZfID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbiBhcnJheSBvZiA4MCBieXRlcywgZWFjaCBhIHBhcnQgb2YgdGhlIG1lc3NhZ2UgdG8gYmUgaGFzaGVkLiAgUmVmZXJyZWQgdG9cbiAgICAgICAgICogYXMgdGhlIG1lc3NhZ2Ugc2NoZWR1bGUgaW4gdGhlIGRvY3MuXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLldfID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb250YWlucyBkYXRhIG5lZWRlZCB0byBwYWQgbWVzc2FnZXMgbGVzcyB0aGFuIDY0IGJ5dGVzLlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wYWRfID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pbmJ1Zl8gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudG90YWxfID0gMDtcbiAgICAgICAgdGhpcy5ibG9ja1NpemUgPSA1MTIgLyA4O1xuICAgICAgICB0aGlzLnBhZF9bMF0gPSAxMjg7XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5ibG9ja1NpemU7ICsraSkge1xuICAgICAgICAgICAgdGhpcy5wYWRfW2ldID0gMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgfVxuICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLmNoYWluX1swXSA9IDB4Njc0NTIzMDE7XG4gICAgICAgIHRoaXMuY2hhaW5fWzFdID0gMHhlZmNkYWI4OTtcbiAgICAgICAgdGhpcy5jaGFpbl9bMl0gPSAweDk4YmFkY2ZlO1xuICAgICAgICB0aGlzLmNoYWluX1szXSA9IDB4MTAzMjU0NzY7XG4gICAgICAgIHRoaXMuY2hhaW5fWzRdID0gMHhjM2QyZTFmMDtcbiAgICAgICAgdGhpcy5pbmJ1Zl8gPSAwO1xuICAgICAgICB0aGlzLnRvdGFsXyA9IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludGVybmFsIGNvbXByZXNzIGhlbHBlciBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0gYnVmIEJsb2NrIHRvIGNvbXByZXNzLlxuICAgICAqIEBwYXJhbSBvZmZzZXQgT2Zmc2V0IG9mIHRoZSBibG9jayBpbiB0aGUgYnVmZmVyLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgY29tcHJlc3NfKGJ1Ziwgb2Zmc2V0KSB7XG4gICAgICAgIGlmICghb2Zmc2V0KSB7XG4gICAgICAgICAgICBvZmZzZXQgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IFcgPSB0aGlzLldfO1xuICAgICAgICAvLyBnZXQgMTYgYmlnIGVuZGlhbiB3b3Jkc1xuICAgICAgICBpZiAodHlwZW9mIGJ1ZiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7IGkrKykge1xuICAgICAgICAgICAgICAgIC8vIFRPRE8odXNlcik6IFtidWcgODE0MDEyMl0gUmVjZW50IHZlcnNpb25zIG9mIFNhZmFyaSBmb3IgTWFjIE9TIGFuZCBpT1NcbiAgICAgICAgICAgICAgICAvLyBoYXZlIGEgYnVnIHRoYXQgdHVybnMgdGhlIHBvc3QtaW5jcmVtZW50ICsrIG9wZXJhdG9yIGludG8gcHJlLWluY3JlbWVudFxuICAgICAgICAgICAgICAgIC8vIGR1cmluZyBKSVQgY29tcGlsYXRpb24uICBXZSBoYXZlIGNvZGUgdGhhdCBkZXBlbmRzIGhlYXZpbHkgb24gU0hBLTEgZm9yXG4gICAgICAgICAgICAgICAgLy8gY29ycmVjdG5lc3MgYW5kIHdoaWNoIGlzIGFmZmVjdGVkIGJ5IHRoaXMgYnVnLCBzbyBJJ3ZlIHJlbW92ZWQgYWxsIHVzZXNcbiAgICAgICAgICAgICAgICAvLyBvZiBwb3N0LWluY3JlbWVudCArKyBpbiB3aGljaCB0aGUgcmVzdWx0IHZhbHVlIGlzIHVzZWQuICBXZSBjYW4gcmV2ZXJ0XG4gICAgICAgICAgICAgICAgLy8gdGhpcyBjaGFuZ2Ugb25jZSB0aGUgU2FmYXJpIGJ1Z1xuICAgICAgICAgICAgICAgIC8vIChodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTA5MDM2KSBoYXMgYmVlbiBmaXhlZCBhbmRcbiAgICAgICAgICAgICAgICAvLyBtb3N0IGNsaWVudHMgaGF2ZSBiZWVuIHVwZGF0ZWQuXG4gICAgICAgICAgICAgICAgV1tpXSA9XG4gICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQpIDw8IDI0KSB8XG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmLmNoYXJDb2RlQXQob2Zmc2V0ICsgMSkgPDwgMTYpIHxcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQgKyAyKSA8PCA4KSB8XG4gICAgICAgICAgICAgICAgICAgICAgICBidWYuY2hhckNvZGVBdChvZmZzZXQgKyAzKTtcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gNDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7IGkrKykge1xuICAgICAgICAgICAgICAgIFdbaV0gPVxuICAgICAgICAgICAgICAgICAgICAoYnVmW29mZnNldF0gPDwgMjQpIHxcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0ICsgMl0gPDwgOCkgfFxuICAgICAgICAgICAgICAgICAgICAgICAgYnVmW29mZnNldCArIDNdO1xuICAgICAgICAgICAgICAgIG9mZnNldCArPSA0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGV4cGFuZCB0byA4MCB3b3Jkc1xuICAgICAgICBmb3IgKGxldCBpID0gMTY7IGkgPCA4MDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gV1tpIC0gM10gXiBXW2kgLSA4XSBeIFdbaSAtIDE0XSBeIFdbaSAtIDE2XTtcbiAgICAgICAgICAgIFdbaV0gPSAoKHQgPDwgMSkgfCAodCA+Pj4gMzEpKSAmIDB4ZmZmZmZmZmY7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGEgPSB0aGlzLmNoYWluX1swXTtcbiAgICAgICAgbGV0IGIgPSB0aGlzLmNoYWluX1sxXTtcbiAgICAgICAgbGV0IGMgPSB0aGlzLmNoYWluX1syXTtcbiAgICAgICAgbGV0IGQgPSB0aGlzLmNoYWluX1szXTtcbiAgICAgICAgbGV0IGUgPSB0aGlzLmNoYWluX1s0XTtcbiAgICAgICAgbGV0IGYsIGs7XG4gICAgICAgIC8vIFRPRE8odXNlcik6IFRyeSB0byB1bnJvbGwgdGhpcyBsb29wIHRvIHNwZWVkIHVwIHRoZSBjb21wdXRhdGlvbi5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA4MDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoaSA8IDQwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGkgPCAyMCkge1xuICAgICAgICAgICAgICAgICAgICBmID0gZCBeIChiICYgKGMgXiBkKSk7XG4gICAgICAgICAgICAgICAgICAgIGsgPSAweDVhODI3OTk5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZiA9IGIgXiBjIF4gZDtcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4NmVkOWViYTE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGkgPCA2MCkge1xuICAgICAgICAgICAgICAgICAgICBmID0gKGIgJiBjKSB8IChkICYgKGIgfCBjKSk7XG4gICAgICAgICAgICAgICAgICAgIGsgPSAweDhmMWJiY2RjO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZiA9IGIgXiBjIF4gZDtcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4Y2E2MmMxZDY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdCA9ICgoKGEgPDwgNSkgfCAoYSA+Pj4gMjcpKSArIGYgKyBlICsgayArIFdbaV0pICYgMHhmZmZmZmZmZjtcbiAgICAgICAgICAgIGUgPSBkO1xuICAgICAgICAgICAgZCA9IGM7XG4gICAgICAgICAgICBjID0gKChiIDw8IDMwKSB8IChiID4+PiAyKSkgJiAweGZmZmZmZmZmO1xuICAgICAgICAgICAgYiA9IGE7XG4gICAgICAgICAgICBhID0gdDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNoYWluX1swXSA9ICh0aGlzLmNoYWluX1swXSArIGEpICYgMHhmZmZmZmZmZjtcbiAgICAgICAgdGhpcy5jaGFpbl9bMV0gPSAodGhpcy5jaGFpbl9bMV0gKyBiKSAmIDB4ZmZmZmZmZmY7XG4gICAgICAgIHRoaXMuY2hhaW5fWzJdID0gKHRoaXMuY2hhaW5fWzJdICsgYykgJiAweGZmZmZmZmZmO1xuICAgICAgICB0aGlzLmNoYWluX1szXSA9ICh0aGlzLmNoYWluX1szXSArIGQpICYgMHhmZmZmZmZmZjtcbiAgICAgICAgdGhpcy5jaGFpbl9bNF0gPSAodGhpcy5jaGFpbl9bNF0gKyBlKSAmIDB4ZmZmZmZmZmY7XG4gICAgfVxuICAgIHVwZGF0ZShieXRlcywgbGVuZ3RoKSB7XG4gICAgICAgIC8vIFRPRE8oam9obmxlbnopOiB0aWdodGVuIHRoZSBmdW5jdGlvbiBzaWduYXR1cmUgYW5kIHJlbW92ZSB0aGlzIGNoZWNrXG4gICAgICAgIGlmIChieXRlcyA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsZW5ndGggPSBieXRlcy5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGVuZ3RoTWludXNCbG9jayA9IGxlbmd0aCAtIHRoaXMuYmxvY2tTaXplO1xuICAgICAgICBsZXQgbiA9IDA7XG4gICAgICAgIC8vIFVzaW5nIGxvY2FsIGluc3RlYWQgb2YgbWVtYmVyIHZhcmlhYmxlcyBnaXZlcyB+NSUgc3BlZWR1cCBvbiBGaXJlZm94IDE2LlxuICAgICAgICBjb25zdCBidWYgPSB0aGlzLmJ1Zl87XG4gICAgICAgIGxldCBpbmJ1ZiA9IHRoaXMuaW5idWZfO1xuICAgICAgICAvLyBUaGUgb3V0ZXIgd2hpbGUgbG9vcCBzaG91bGQgZXhlY3V0ZSBhdCBtb3N0IHR3aWNlLlxuICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBoYXZlIG5vIGRhdGEgaW4gdGhlIGJsb2NrIHRvIHRvcCB1cCwgd2UgY2FuIGRpcmVjdGx5IHByb2Nlc3MgdGhlXG4gICAgICAgICAgICAvLyBpbnB1dCBidWZmZXIgKGFzc3VtaW5nIGl0IGNvbnRhaW5zIHN1ZmZpY2llbnQgZGF0YSkuIFRoaXMgZ2l2ZXMgfjI1JVxuICAgICAgICAgICAgLy8gc3BlZWR1cCBvbiBDaHJvbWUgMjMgYW5kIH4xNSUgc3BlZWR1cCBvbiBGaXJlZm94IDE2LCBidXQgcmVxdWlyZXMgdGhhdFxuICAgICAgICAgICAgLy8gdGhlIGRhdGEgaXMgcHJvdmlkZWQgaW4gbGFyZ2UgY2h1bmtzIChvciBpbiBtdWx0aXBsZXMgb2YgNjQgYnl0ZXMpLlxuICAgICAgICAgICAgaWYgKGluYnVmID09PSAwKSB7XG4gICAgICAgICAgICAgICAgd2hpbGUgKG4gPD0gbGVuZ3RoTWludXNCbG9jaykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXByZXNzXyhieXRlcywgbik7XG4gICAgICAgICAgICAgICAgICAgIG4gKz0gdGhpcy5ibG9ja1NpemU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBieXRlcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBidWZbaW5idWZdID0gYnl0ZXMuY2hhckNvZGVBdChuKTtcbiAgICAgICAgICAgICAgICAgICAgKytpbmJ1ZjtcbiAgICAgICAgICAgICAgICAgICAgKytuO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5idWYgPT09IHRoaXMuYmxvY2tTaXplKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXByZXNzXyhidWYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5idWYgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSnVtcCB0byB0aGUgb3V0ZXIgbG9vcCBzbyB3ZSB1c2UgdGhlIGZ1bGwtYmxvY2sgb3B0aW1pemF0aW9uLlxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBidWZbaW5idWZdID0gYnl0ZXNbbl07XG4gICAgICAgICAgICAgICAgICAgICsraW5idWY7XG4gICAgICAgICAgICAgICAgICAgICsrbjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluYnVmID09PSB0aGlzLmJsb2NrU2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcmVzc18oYnVmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluYnVmID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEp1bXAgdG8gdGhlIG91dGVyIGxvb3Agc28gd2UgdXNlIHRoZSBmdWxsLWJsb2NrIG9wdGltaXphdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW5idWZfID0gaW5idWY7XG4gICAgICAgIHRoaXMudG90YWxfICs9IGxlbmd0aDtcbiAgICB9XG4gICAgLyoqIEBvdmVycmlkZSAqL1xuICAgIGRpZ2VzdCgpIHtcbiAgICAgICAgY29uc3QgZGlnZXN0ID0gW107XG4gICAgICAgIGxldCB0b3RhbEJpdHMgPSB0aGlzLnRvdGFsXyAqIDg7XG4gICAgICAgIC8vIEFkZCBwYWQgMHg4MCAweDAwKi5cbiAgICAgICAgaWYgKHRoaXMuaW5idWZfIDwgNTYpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKHRoaXMucGFkXywgNTYgLSB0aGlzLmluYnVmXyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSh0aGlzLnBhZF8sIHRoaXMuYmxvY2tTaXplIC0gKHRoaXMuaW5idWZfIC0gNTYpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBBZGQgIyBiaXRzLlxuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5ibG9ja1NpemUgLSAxOyBpID49IDU2OyBpLS0pIHtcbiAgICAgICAgICAgIHRoaXMuYnVmX1tpXSA9IHRvdGFsQml0cyAmIDI1NTtcbiAgICAgICAgICAgIHRvdGFsQml0cyAvPSAyNTY7IC8vIERvbid0IHVzZSBiaXQtc2hpZnRpbmcgaGVyZSFcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbXByZXNzXyh0aGlzLmJ1Zl8pO1xuICAgICAgICBsZXQgbiA9IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMjQ7IGogPj0gMDsgaiAtPSA4KSB7XG4gICAgICAgICAgICAgICAgZGlnZXN0W25dID0gKHRoaXMuY2hhaW5fW2ldID4+IGopICYgMjU1O1xuICAgICAgICAgICAgICAgICsrbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGlnZXN0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gbWFrZSBhIFN1YnNjcmliZSBmdW5jdGlvbiAoanVzdCBsaWtlIFByb21pc2UgaGVscHMgbWFrZSBhXG4gKiBUaGVuYWJsZSkuXG4gKlxuICogQHBhcmFtIGV4ZWN1dG9yIEZ1bmN0aW9uIHdoaWNoIGNhbiBtYWtlIGNhbGxzIHRvIGEgc2luZ2xlIE9ic2VydmVyXG4gKiAgICAgYXMgYSBwcm94eS5cbiAqIEBwYXJhbSBvbk5vT2JzZXJ2ZXJzIENhbGxiYWNrIHdoZW4gY291bnQgb2YgT2JzZXJ2ZXJzIGdvZXMgdG8gemVyby5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlU3Vic2NyaWJlKGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKSB7XG4gICAgY29uc3QgcHJveHkgPSBuZXcgT2JzZXJ2ZXJQcm94eShleGVjdXRvciwgb25Ob09ic2VydmVycyk7XG4gICAgcmV0dXJuIHByb3h5LnN1YnNjcmliZS5iaW5kKHByb3h5KTtcbn1cbi8qKlxuICogSW1wbGVtZW50IGZhbi1vdXQgZm9yIGFueSBudW1iZXIgb2YgT2JzZXJ2ZXJzIGF0dGFjaGVkIHZpYSBhIHN1YnNjcmliZVxuICogZnVuY3Rpb24uXG4gKi9cbmNsYXNzIE9ic2VydmVyUHJveHkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBleGVjdXRvciBGdW5jdGlvbiB3aGljaCBjYW4gbWFrZSBjYWxscyB0byBhIHNpbmdsZSBPYnNlcnZlclxuICAgICAqICAgICBhcyBhIHByb3h5LlxuICAgICAqIEBwYXJhbSBvbk5vT2JzZXJ2ZXJzIENhbGxiYWNrIHdoZW4gY291bnQgb2YgT2JzZXJ2ZXJzIGdvZXMgdG8gemVyby5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihleGVjdXRvciwgb25Ob09ic2VydmVycykge1xuICAgICAgICB0aGlzLm9ic2VydmVycyA9IFtdO1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlcyA9IFtdO1xuICAgICAgICB0aGlzLm9ic2VydmVyQ291bnQgPSAwO1xuICAgICAgICAvLyBNaWNyby10YXNrIHNjaGVkdWxpbmcgYnkgY2FsbGluZyB0YXNrLnRoZW4oKS5cbiAgICAgICAgdGhpcy50YXNrID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIHRoaXMuZmluYWxpemVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMub25Ob09ic2VydmVycyA9IG9uTm9PYnNlcnZlcnM7XG4gICAgICAgIC8vIENhbGwgdGhlIGV4ZWN1dG9yIGFzeW5jaHJvbm91c2x5IHNvIHN1YnNjcmliZXJzIHRoYXQgYXJlIGNhbGxlZFxuICAgICAgICAvLyBzeW5jaHJvbm91c2x5IGFmdGVyIHRoZSBjcmVhdGlvbiBvZiB0aGUgc3Vic2NyaWJlIGZ1bmN0aW9uXG4gICAgICAgIC8vIGNhbiBzdGlsbCByZWNlaXZlIHRoZSB2ZXJ5IGZpcnN0IHZhbHVlIGdlbmVyYXRlZCBpbiB0aGUgZXhlY3V0b3IuXG4gICAgICAgIHRoaXMudGFza1xuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgZXhlY3V0b3IodGhpcyk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmVycm9yKGUpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgbmV4dCh2YWx1ZSkge1xuICAgICAgICB0aGlzLmZvckVhY2hPYnNlcnZlcigob2JzZXJ2ZXIpID0+IHtcbiAgICAgICAgICAgIG9ic2VydmVyLm5leHQodmFsdWUpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZXJyb3IoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5mb3JFYWNoT2JzZXJ2ZXIoKG9ic2VydmVyKSA9PiB7XG4gICAgICAgICAgICBvYnNlcnZlci5lcnJvcihlcnJvcik7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNsb3NlKGVycm9yKTtcbiAgICB9XG4gICAgY29tcGxldGUoKSB7XG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKChvYnNlcnZlcikgPT4ge1xuICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3Vic2NyaWJlIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gYWRkIGFuIE9ic2VydmVyIHRvIHRoZSBmYW4tb3V0IGxpc3QuXG4gICAgICpcbiAgICAgKiAtIFdlIHJlcXVpcmUgdGhhdCBubyBldmVudCBpcyBzZW50IHRvIGEgc3Vic2NyaWJlciBzeW5jaHJvbm91c2x5IHRvIHRoZWlyXG4gICAgICogICBjYWxsIHRvIHN1YnNjcmliZSgpLlxuICAgICAqL1xuICAgIHN1YnNjcmliZShuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKSB7XG4gICAgICAgIGxldCBvYnNlcnZlcjtcbiAgICAgICAgaWYgKG5leHRPck9ic2VydmVyID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIGVycm9yID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIGNvbXBsZXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBPYnNlcnZlci4nKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBBc3NlbWJsZSBhbiBPYnNlcnZlciBvYmplY3Qgd2hlbiBwYXNzZWQgYXMgY2FsbGJhY2sgZnVuY3Rpb25zLlxuICAgICAgICBpZiAoaW1wbGVtZW50c0FueU1ldGhvZHMobmV4dE9yT2JzZXJ2ZXIsIFtcbiAgICAgICAgICAgICduZXh0JyxcbiAgICAgICAgICAgICdlcnJvcicsXG4gICAgICAgICAgICAnY29tcGxldGUnXG4gICAgICAgIF0pKSB7XG4gICAgICAgICAgICBvYnNlcnZlciA9IG5leHRPck9ic2VydmVyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JzZXJ2ZXIgPSB7XG4gICAgICAgICAgICAgICAgbmV4dDogbmV4dE9yT2JzZXJ2ZXIsXG4gICAgICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgICAgICAgY29tcGxldGVcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9ic2VydmVyLm5leHQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dCA9IG5vb3A7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9ic2VydmVyLmVycm9yID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yID0gbm9vcDtcbiAgICAgICAgfVxuICAgICAgICBpZiAob2JzZXJ2ZXIuY29tcGxldGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUgPSBub29wO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHVuc3ViID0gdGhpcy51bnN1YnNjcmliZU9uZS5iaW5kKHRoaXMsIHRoaXMub2JzZXJ2ZXJzLmxlbmd0aCk7XG4gICAgICAgIC8vIEF0dGVtcHQgdG8gc3Vic2NyaWJlIHRvIGEgdGVybWluYXRlZCBPYnNlcnZhYmxlIC0gd2VcbiAgICAgICAgLy8ganVzdCByZXNwb25kIHRvIHRoZSBPYnNlcnZlciB3aXRoIHRoZSBmaW5hbCBlcnJvciBvciBjb21wbGV0ZVxuICAgICAgICAvLyBldmVudC5cbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICAgICAgICB0aGlzLnRhc2sudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZmluYWxFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IodGhpcy5maW5hbEVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbm90aGluZ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9ic2VydmVycy5wdXNoKG9ic2VydmVyKTtcbiAgICAgICAgcmV0dXJuIHVuc3ViO1xuICAgIH1cbiAgICAvLyBVbnN1YnNjcmliZSBpcyBzeW5jaHJvbm91cyAtIHdlIGd1YXJhbnRlZSB0aGF0IG5vIGV2ZW50cyBhcmUgc2VudCB0b1xuICAgIC8vIGFueSB1bnN1YnNjcmliZWQgT2JzZXJ2ZXIuXG4gICAgdW5zdWJzY3JpYmVPbmUoaSkge1xuICAgICAgICBpZiAodGhpcy5vYnNlcnZlcnMgPT09IHVuZGVmaW5lZCB8fCB0aGlzLm9ic2VydmVyc1tpXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZGVsZXRlIHRoaXMub2JzZXJ2ZXJzW2ldO1xuICAgICAgICB0aGlzLm9ic2VydmVyQ291bnQgLT0gMTtcbiAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZXJDb3VudCA9PT0gMCAmJiB0aGlzLm9uTm9PYnNlcnZlcnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5vbk5vT2JzZXJ2ZXJzKHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvckVhY2hPYnNlcnZlcihmbikge1xuICAgICAgICBpZiAodGhpcy5maW5hbGl6ZWQpIHtcbiAgICAgICAgICAgIC8vIEFscmVhZHkgY2xvc2VkIGJ5IHByZXZpb3VzIGV2ZW50Li4uLmp1c3QgZWF0IHRoZSBhZGRpdGlvbmFsIHZhbHVlcy5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBTaW5jZSBzZW5kT25lIGNhbGxzIGFzeW5jaHJvbm91c2x5IC0gdGhlcmUgaXMgbm8gY2hhbmNlIHRoYXRcbiAgICAgICAgLy8gdGhpcy5vYnNlcnZlcnMgd2lsbCBiZWNvbWUgdW5kZWZpbmVkLlxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMub2JzZXJ2ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRPbmUoaSwgZm4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIENhbGwgdGhlIE9ic2VydmVyIHZpYSBvbmUgb2YgaXQncyBjYWxsYmFjayBmdW5jdGlvbi4gV2UgYXJlIGNhcmVmdWwgdG9cbiAgICAvLyBjb25maXJtIHRoYXQgdGhlIG9ic2VydmUgaGFzIG5vdCBiZWVuIHVuc3Vic2NyaWJlZCBzaW5jZSB0aGlzIGFzeW5jaHJvbm91c1xuICAgIC8vIGZ1bmN0aW9uIGhhZCBiZWVuIHF1ZXVlZC5cbiAgICBzZW5kT25lKGksIGZuKSB7XG4gICAgICAgIC8vIEV4ZWN1dGUgdGhlIGNhbGxiYWNrIGFzeW5jaHJvbm91c2x5XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICAgICAgdGhpcy50YXNrLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZXJzICE9PSB1bmRlZmluZWQgJiYgdGhpcy5vYnNlcnZlcnNbaV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGZuKHRoaXMub2JzZXJ2ZXJzW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWdub3JlIGV4Y2VwdGlvbnMgcmFpc2VkIGluIE9ic2VydmVycyBvciBtaXNzaW5nIG1ldGhvZHMgb2YgYW5cbiAgICAgICAgICAgICAgICAgICAgLy8gT2JzZXJ2ZXIuXG4gICAgICAgICAgICAgICAgICAgIC8vIExvZyBlcnJvciB0byBjb25zb2xlLiBiLzMxNDA0ODA2XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYgY29uc29sZS5lcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNsb3NlKGVycikge1xuICAgICAgICBpZiAodGhpcy5maW5hbGl6ZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZpbmFsaXplZCA9IHRydWU7XG4gICAgICAgIGlmIChlcnIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5maW5hbEVycm9yID0gZXJyO1xuICAgICAgICB9XG4gICAgICAgIC8vIFByb3h5IGlzIG5vIGxvbmdlciBuZWVkZWQgLSBnYXJiYWdlIGNvbGxlY3QgcmVmZXJlbmNlc1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICAgIHRoaXMudGFzay50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5vbk5vT2JzZXJ2ZXJzID0gdW5kZWZpbmVkO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4vKiogVHVybiBzeW5jaHJvbm91cyBmdW5jdGlvbiBpbnRvIG9uZSBjYWxsZWQgYXN5bmNocm9ub3VzbHkuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xuZnVuY3Rpb24gYXN5bmMoZm4sIG9uRXJyb3IpIHtcbiAgICByZXR1cm4gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKHRydWUpXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBmbiguLi5hcmdzKTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIGlmIChvbkVycm9yKSB7XG4gICAgICAgICAgICAgICAgb25FcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG59XG4vKipcbiAqIFJldHVybiB0cnVlIGlmIHRoZSBvYmplY3QgcGFzc2VkIGluIGltcGxlbWVudHMgYW55IG9mIHRoZSBuYW1lZCBtZXRob2RzLlxuICovXG5mdW5jdGlvbiBpbXBsZW1lbnRzQW55TWV0aG9kcyhvYmosIG1ldGhvZHMpIHtcbiAgICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcgfHwgb2JqID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBtZXRob2Qgb2YgbWV0aG9kcykge1xuICAgICAgICBpZiAobWV0aG9kIGluIG9iaiAmJiB0eXBlb2Ygb2JqW21ldGhvZF0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIG5vb3AoKSB7XG4gICAgLy8gZG8gbm90aGluZ1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDaGVjayB0byBtYWtlIHN1cmUgdGhlIGFwcHJvcHJpYXRlIG51bWJlciBvZiBhcmd1bWVudHMgYXJlIHByb3ZpZGVkIGZvciBhIHB1YmxpYyBmdW5jdGlvbi5cbiAqIFRocm93cyBhbiBlcnJvciBpZiBpdCBmYWlscy5cbiAqXG4gKiBAcGFyYW0gZm5OYW1lIFRoZSBmdW5jdGlvbiBuYW1lXG4gKiBAcGFyYW0gbWluQ291bnQgVGhlIG1pbmltdW0gbnVtYmVyIG9mIGFyZ3VtZW50cyB0byBhbGxvdyBmb3IgdGhlIGZ1bmN0aW9uIGNhbGxcbiAqIEBwYXJhbSBtYXhDb3VudCBUaGUgbWF4aW11bSBudW1iZXIgb2YgYXJndW1lbnQgdG8gYWxsb3cgZm9yIHRoZSBmdW5jdGlvbiBjYWxsXG4gKiBAcGFyYW0gYXJnQ291bnQgVGhlIGFjdHVhbCBudW1iZXIgb2YgYXJndW1lbnRzIHByb3ZpZGVkLlxuICovXG5jb25zdCB2YWxpZGF0ZUFyZ0NvdW50ID0gZnVuY3Rpb24gKGZuTmFtZSwgbWluQ291bnQsIG1heENvdW50LCBhcmdDb3VudCkge1xuICAgIGxldCBhcmdFcnJvcjtcbiAgICBpZiAoYXJnQ291bnQgPCBtaW5Db3VudCkge1xuICAgICAgICBhcmdFcnJvciA9ICdhdCBsZWFzdCAnICsgbWluQ291bnQ7XG4gICAgfVxuICAgIGVsc2UgaWYgKGFyZ0NvdW50ID4gbWF4Q291bnQpIHtcbiAgICAgICAgYXJnRXJyb3IgPSBtYXhDb3VudCA9PT0gMCA/ICdub25lJyA6ICdubyBtb3JlIHRoYW4gJyArIG1heENvdW50O1xuICAgIH1cbiAgICBpZiAoYXJnRXJyb3IpIHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSBmbk5hbWUgK1xuICAgICAgICAgICAgJyBmYWlsZWQ6IFdhcyBjYWxsZWQgd2l0aCAnICtcbiAgICAgICAgICAgIGFyZ0NvdW50ICtcbiAgICAgICAgICAgIChhcmdDb3VudCA9PT0gMSA/ICcgYXJndW1lbnQuJyA6ICcgYXJndW1lbnRzLicpICtcbiAgICAgICAgICAgICcgRXhwZWN0cyAnICtcbiAgICAgICAgICAgIGFyZ0Vycm9yICtcbiAgICAgICAgICAgICcuJztcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICB9XG59O1xuLyoqXG4gKiBHZW5lcmF0ZXMgYSBzdHJpbmcgdG8gcHJlZml4IGFuIGVycm9yIG1lc3NhZ2UgYWJvdXQgZmFpbGVkIGFyZ3VtZW50IHZhbGlkYXRpb25cbiAqXG4gKiBAcGFyYW0gZm5OYW1lIFRoZSBmdW5jdGlvbiBuYW1lXG4gKiBAcGFyYW0gYXJnTmFtZSBUaGUgbmFtZSBvZiB0aGUgYXJndW1lbnRcbiAqIEByZXR1cm4gVGhlIHByZWZpeCB0byBhZGQgdG8gdGhlIGVycm9yIHRocm93biBmb3IgdmFsaWRhdGlvbi5cbiAqL1xuZnVuY3Rpb24gZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmdOYW1lKSB7XG4gICAgcmV0dXJuIGAke2ZuTmFtZX0gZmFpbGVkOiAke2FyZ05hbWV9IGFyZ3VtZW50IGA7XG59XG4vKipcbiAqIEBwYXJhbSBmbk5hbWVcbiAqIEBwYXJhbSBhcmd1bWVudE51bWJlclxuICogQHBhcmFtIG5hbWVzcGFjZVxuICogQHBhcmFtIG9wdGlvbmFsXG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlTmFtZXNwYWNlKGZuTmFtZSwgbmFtZXNwYWNlLCBvcHRpb25hbCkge1xuICAgIGlmIChvcHRpb25hbCAmJiAhbmFtZXNwYWNlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBuYW1lc3BhY2UgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIC8vVE9ETzogSSBzaG91bGQgZG8gbW9yZSB2YWxpZGF0aW9uIGhlcmUuIFdlIG9ubHkgYWxsb3cgY2VydGFpbiBjaGFycyBpbiBuYW1lc3BhY2VzLlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCAnbmFtZXNwYWNlJykgKyAnbXVzdCBiZSBhIHZhbGlkIGZpcmViYXNlIG5hbWVzcGFjZS4nKTtcbiAgICB9XG59XG5mdW5jdGlvbiB2YWxpZGF0ZUNhbGxiYWNrKGZuTmFtZSwgYXJndW1lbnROYW1lLCBcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXR5cGVzXG5jYWxsYmFjaywgb3B0aW9uYWwpIHtcbiAgICBpZiAob3B0aW9uYWwgJiYgIWNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmd1bWVudE5hbWUpICsgJ211c3QgYmUgYSB2YWxpZCBmdW5jdGlvbi4nKTtcbiAgICB9XG59XG5mdW5jdGlvbiB2YWxpZGF0ZUNvbnRleHRPYmplY3QoZm5OYW1lLCBhcmd1bWVudE5hbWUsIGNvbnRleHQsIG9wdGlvbmFsKSB7XG4gICAgaWYgKG9wdGlvbmFsICYmICFjb250ZXh0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBjb250ZXh0ICE9PSAnb2JqZWN0JyB8fCBjb250ZXh0ID09PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsIGFyZ3VtZW50TmFtZSkgKyAnbXVzdCBiZSBhIHZhbGlkIGNvbnRleHQgb2JqZWN0LicpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIENvZGUgb3JpZ2luYWxseSBjYW1lIGZyb20gZ29vZy5jcnlwdC5zdHJpbmdUb1V0ZjhCeXRlQXJyYXksIGJ1dCBmb3Igc29tZSByZWFzb24gdGhleVxuLy8gYXV0b21hdGljYWxseSByZXBsYWNlZCAnXFxyXFxuJyB3aXRoICdcXG4nLCBhbmQgdGhleSBkaWRuJ3QgaGFuZGxlIHN1cnJvZ2F0ZSBwYWlycyxcbi8vIHNvIGl0J3MgYmVlbiBtb2RpZmllZC5cbi8vIE5vdGUgdGhhdCBub3QgYWxsIFVuaWNvZGUgY2hhcmFjdGVycyBhcHBlYXIgYXMgc2luZ2xlIGNoYXJhY3RlcnMgaW4gSmF2YVNjcmlwdCBzdHJpbmdzLlxuLy8gZnJvbUNoYXJDb2RlIHJldHVybnMgdGhlIFVURi0xNiBlbmNvZGluZyBvZiBhIGNoYXJhY3RlciAtIHNvIHNvbWUgVW5pY29kZSBjaGFyYWN0ZXJzXG4vLyB1c2UgMiBjaGFyYWN0ZXJzIGluIEphdmFTY3JpcHQuICBBbGwgNC1ieXRlIFVURi04IGNoYXJhY3RlcnMgYmVnaW4gd2l0aCBhIGZpcnN0XG4vLyBjaGFyYWN0ZXIgaW4gdGhlIHJhbmdlIDB4RDgwMCAtIDB4REJGRiAodGhlIGZpcnN0IGNoYXJhY3RlciBvZiBhIHNvLWNhbGxlZCBzdXJyb2dhdGVcbi8vIHBhaXIpLlxuLy8gU2VlIGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi81LjEvI3NlYy0xNS4xLjNcbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHN0clxuICogQHJldHVybiB7QXJyYXl9XG4gKi9cbmNvbnN0IHN0cmluZ1RvQnl0ZUFycmF5ID0gZnVuY3Rpb24gKHN0cikge1xuICAgIGNvbnN0IG91dCA9IFtdO1xuICAgIGxldCBwID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgICAgICAvLyBJcyB0aGlzIHRoZSBsZWFkIHN1cnJvZ2F0ZSBpbiBhIHN1cnJvZ2F0ZSBwYWlyP1xuICAgICAgICBpZiAoYyA+PSAweGQ4MDAgJiYgYyA8PSAweGRiZmYpIHtcbiAgICAgICAgICAgIGNvbnN0IGhpZ2ggPSBjIC0gMHhkODAwOyAvLyB0aGUgaGlnaCAxMCBiaXRzLlxuICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgYXNzZXJ0KGkgPCBzdHIubGVuZ3RoLCAnU3Vycm9nYXRlIHBhaXIgbWlzc2luZyB0cmFpbCBzdXJyb2dhdGUuJyk7XG4gICAgICAgICAgICBjb25zdCBsb3cgPSBzdHIuY2hhckNvZGVBdChpKSAtIDB4ZGMwMDsgLy8gdGhlIGxvdyAxMCBiaXRzLlxuICAgICAgICAgICAgYyA9IDB4MTAwMDAgKyAoaGlnaCA8PCAxMCkgKyBsb3c7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGMgPCAxMjgpIHtcbiAgICAgICAgICAgIG91dFtwKytdID0gYztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjIDwgMjA0OCkge1xuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiA2KSB8IDE5MjtcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYyA8IDY1NTM2KSB7XG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDEyKSB8IDIyNDtcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTgpIHwgMjQwO1xuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gMTIpICYgNjMpIHwgMTI4O1xuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvdXQ7XG59O1xuLyoqXG4gKiBDYWxjdWxhdGUgbGVuZ3RoIHdpdGhvdXQgYWN0dWFsbHkgY29udmVydGluZzsgdXNlZnVsIGZvciBkb2luZyBjaGVhcGVyIHZhbGlkYXRpb24uXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cbmNvbnN0IHN0cmluZ0xlbmd0aCA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICBsZXQgcCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgICAgICBpZiAoYyA8IDEyOCkge1xuICAgICAgICAgICAgcCsrO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KSB7XG4gICAgICAgICAgICBwICs9IDI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYyA+PSAweGQ4MDAgJiYgYyA8PSAweGRiZmYpIHtcbiAgICAgICAgICAgIC8vIExlYWQgc3Vycm9nYXRlIG9mIGEgc3Vycm9nYXRlIHBhaXIuICBUaGUgcGFpciB0b2dldGhlciB3aWxsIHRha2UgNCBieXRlcyB0byByZXByZXNlbnQuXG4gICAgICAgICAgICBwICs9IDQ7XG4gICAgICAgICAgICBpKys7IC8vIHNraXAgdHJhaWwgc3Vycm9nYXRlLlxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcCArPSAzO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwO1xufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQ29waWVkIGZyb20gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzIxMTc1MjNcbiAqIEdlbmVyYXRlcyBhIG5ldyB1dWlkLlxuICogQHB1YmxpY1xuICovXG5jb25zdCB1dWlkdjQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgYyA9PiB7XG4gICAgICAgIGNvbnN0IHIgPSAoTWF0aC5yYW5kb20oKSAqIDE2KSB8IDAsIHYgPSBjID09PSAneCcgPyByIDogKHIgJiAweDMpIHwgMHg4O1xuICAgICAgICByZXR1cm4gdi50b1N0cmluZygxNik7XG4gICAgfSk7XG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgYW1vdW50IG9mIG1pbGxpc2Vjb25kcyB0byBleHBvbmVudGlhbGx5IGluY3JlYXNlLlxuICovXG5jb25zdCBERUZBVUxUX0lOVEVSVkFMX01JTExJUyA9IDEwMDA7XG4vKipcbiAqIFRoZSBmYWN0b3IgdG8gYmFja29mZiBieS5cbiAqIFNob3VsZCBiZSBhIG51bWJlciBncmVhdGVyIHRoYW4gMS5cbiAqL1xuY29uc3QgREVGQVVMVF9CQUNLT0ZGX0ZBQ1RPUiA9IDI7XG4vKipcbiAqIFRoZSBtYXhpbXVtIG1pbGxpc2Vjb25kcyB0byBpbmNyZWFzZSB0by5cbiAqXG4gKiA8cD5WaXNpYmxlIGZvciB0ZXN0aW5nXG4gKi9cbmNvbnN0IE1BWF9WQUxVRV9NSUxMSVMgPSA0ICogNjAgKiA2MCAqIDEwMDA7IC8vIEZvdXIgaG91cnMsIGxpa2UgaU9TIGFuZCBBbmRyb2lkLlxuLyoqXG4gKiBUaGUgcGVyY2VudGFnZSBvZiBiYWNrb2ZmIHRpbWUgdG8gcmFuZG9taXplIGJ5LlxuICogU2VlXG4gKiBodHRwOi8vZ28vc2FmZS1jbGllbnQtYmVoYXZpb3Ijc3RlcC0xLWRldGVybWluZS10aGUtYXBwcm9wcmlhdGUtcmV0cnktaW50ZXJ2YWwtdG8taGFuZGxlLXNwaWtlLXRyYWZmaWNcbiAqIGZvciBjb250ZXh0LlxuICpcbiAqIDxwPlZpc2libGUgZm9yIHRlc3RpbmdcbiAqL1xuY29uc3QgUkFORE9NX0ZBQ1RPUiA9IDAuNTtcbi8qKlxuICogQmFzZWQgb24gdGhlIGJhY2tvZmYgbWV0aG9kIGZyb21cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvY2xvc3VyZS1saWJyYXJ5L2Jsb2IvbWFzdGVyL2Nsb3N1cmUvZ29vZy9tYXRoL2V4cG9uZW50aWFsYmFja29mZi5qcy5cbiAqIEV4dHJhY3RlZCBoZXJlIHNvIHdlIGRvbid0IG5lZWQgdG8gcGFzcyBtZXRhZGF0YSBhbmQgYSBzdGF0ZWZ1bCBFeHBvbmVudGlhbEJhY2tvZmYgb2JqZWN0IGFyb3VuZC5cbiAqL1xuZnVuY3Rpb24gY2FsY3VsYXRlQmFja29mZk1pbGxpcyhiYWNrb2ZmQ291bnQsIGludGVydmFsTWlsbGlzID0gREVGQVVMVF9JTlRFUlZBTF9NSUxMSVMsIGJhY2tvZmZGYWN0b3IgPSBERUZBVUxUX0JBQ0tPRkZfRkFDVE9SKSB7XG4gICAgLy8gQ2FsY3VsYXRlcyBhbiBleHBvbmVudGlhbGx5IGluY3JlYXNpbmcgdmFsdWUuXG4gICAgLy8gRGV2aWF0aW9uOiBjYWxjdWxhdGVzIHZhbHVlIGZyb20gY291bnQgYW5kIGEgY29uc3RhbnQgaW50ZXJ2YWwsIHNvIHdlIG9ubHkgbmVlZCB0byBzYXZlIHZhbHVlXG4gICAgLy8gYW5kIGNvdW50IHRvIHJlc3RvcmUgc3RhdGUuXG4gICAgY29uc3QgY3VyckJhc2VWYWx1ZSA9IGludGVydmFsTWlsbGlzICogTWF0aC5wb3coYmFja29mZkZhY3RvciwgYmFja29mZkNvdW50KTtcbiAgICAvLyBBIHJhbmRvbSBcImZ1enpcIiB0byBhdm9pZCB3YXZlcyBvZiByZXRyaWVzLlxuICAgIC8vIERldmlhdGlvbjogcmFuZG9tRmFjdG9yIGlzIHJlcXVpcmVkLlxuICAgIGNvbnN0IHJhbmRvbVdhaXQgPSBNYXRoLnJvdW5kKFxuICAgIC8vIEEgZnJhY3Rpb24gb2YgdGhlIGJhY2tvZmYgdmFsdWUgdG8gYWRkL3N1YnRyYWN0LlxuICAgIC8vIERldmlhdGlvbjogY2hhbmdlcyBtdWx0aXBsaWNhdGlvbiBvcmRlciB0byBpbXByb3ZlIHJlYWRhYmlsaXR5LlxuICAgIFJBTkRPTV9GQUNUT1IgKlxuICAgICAgICBjdXJyQmFzZVZhbHVlICpcbiAgICAgICAgLy8gQSByYW5kb20gZmxvYXQgKHJvdW5kZWQgdG8gaW50IGJ5IE1hdGgucm91bmQgYWJvdmUpIGluIHRoZSByYW5nZSBbLTEsIDFdLiBEZXRlcm1pbmVzXG4gICAgICAgIC8vIGlmIHdlIGFkZCBvciBzdWJ0cmFjdC5cbiAgICAgICAgKE1hdGgucmFuZG9tKCkgLSAwLjUpICpcbiAgICAgICAgMik7XG4gICAgLy8gTGltaXRzIGJhY2tvZmYgdG8gbWF4IHRvIGF2b2lkIGVmZmVjdGl2ZWx5IHBlcm1hbmVudCBiYWNrb2ZmLlxuICAgIHJldHVybiBNYXRoLm1pbihNQVhfVkFMVUVfTUlMTElTLCBjdXJyQmFzZVZhbHVlICsgcmFuZG9tV2FpdCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFByb3ZpZGUgRW5nbGlzaCBvcmRpbmFsIGxldHRlcnMgYWZ0ZXIgYSBudW1iZXJcbiAqL1xuZnVuY3Rpb24gb3JkaW5hbChpKSB7XG4gICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoaSkpIHtcbiAgICAgICAgcmV0dXJuIGAke2l9YDtcbiAgICB9XG4gICAgcmV0dXJuIGkgKyBpbmRpY2F0b3IoaSk7XG59XG5mdW5jdGlvbiBpbmRpY2F0b3IoaSkge1xuICAgIGkgPSBNYXRoLmFicyhpKTtcbiAgICBjb25zdCBjZW50ID0gaSAlIDEwMDtcbiAgICBpZiAoY2VudCA+PSAxMCAmJiBjZW50IDw9IDIwKSB7XG4gICAgICAgIHJldHVybiAndGgnO1xuICAgIH1cbiAgICBjb25zdCBkZWMgPSBpICUgMTA7XG4gICAgaWYgKGRlYyA9PT0gMSkge1xuICAgICAgICByZXR1cm4gJ3N0JztcbiAgICB9XG4gICAgaWYgKGRlYyA9PT0gMikge1xuICAgICAgICByZXR1cm4gJ25kJztcbiAgICB9XG4gICAgaWYgKGRlYyA9PT0gMykge1xuICAgICAgICByZXR1cm4gJ3JkJztcbiAgICB9XG4gICAgcmV0dXJuICd0aCc7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5mdW5jdGlvbiBnZXRNb2R1bGFySW5zdGFuY2Uoc2VydmljZSkge1xuICAgIGlmIChzZXJ2aWNlICYmIHNlcnZpY2UuX2RlbGVnYXRlKSB7XG4gICAgICAgIHJldHVybiBzZXJ2aWNlLl9kZWxlZ2F0ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBzZXJ2aWNlO1xuICAgIH1cbn1cblxuZXhwb3J0IHsgQ09OU1RBTlRTLCBEZWNvZGVCYXNlNjRTdHJpbmdFcnJvciwgRGVmZXJyZWQsIEVycm9yRmFjdG9yeSwgRmlyZWJhc2VFcnJvciwgTUFYX1ZBTFVFX01JTExJUywgUkFORE9NX0ZBQ1RPUiwgU2hhMSwgYXJlQ29va2llc0VuYWJsZWQsIGFzc2VydCwgYXNzZXJ0aW9uRXJyb3IsIGFzeW5jLCBiYXNlNjQsIGJhc2U2NERlY29kZSwgYmFzZTY0RW5jb2RlLCBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZywgY2FsY3VsYXRlQmFja29mZk1pbGxpcywgY29udGFpbnMsIGNyZWF0ZU1vY2tVc2VyVG9rZW4sIGNyZWF0ZVN1YnNjcmliZSwgZGVjb2RlLCBkZWVwQ29weSwgZGVlcEVxdWFsLCBkZWVwRXh0ZW5kLCBlcnJvclByZWZpeCwgZXh0cmFjdFF1ZXJ5c3RyaW5nLCBnZXREZWZhdWx0QXBwQ29uZmlnLCBnZXREZWZhdWx0RW11bGF0b3JIb3N0LCBnZXREZWZhdWx0RW11bGF0b3JIb3N0bmFtZUFuZFBvcnQsIGdldERlZmF1bHRzLCBnZXRFeHBlcmltZW50YWxTZXR0aW5nLCBnZXRHbG9iYWwsIGdldE1vZHVsYXJJbnN0YW5jZSwgZ2V0VUEsIGlzQWRtaW4sIGlzQnJvd3NlciwgaXNCcm93c2VyRXh0ZW5zaW9uLCBpc0Nsb3VkZmxhcmVXb3JrZXIsIGlzRWxlY3Ryb24sIGlzRW1wdHksIGlzSUUsIGlzSW5kZXhlZERCQXZhaWxhYmxlLCBpc01vYmlsZUNvcmRvdmEsIGlzTm9kZSwgaXNOb2RlU2RrLCBpc1JlYWN0TmF0aXZlLCBpc1NhZmFyaSwgaXNVV1AsIGlzVmFsaWRGb3JtYXQsIGlzVmFsaWRUaW1lc3RhbXAsIGlzV2ViV29ya2VyLCBpc3N1ZWRBdFRpbWUsIGpzb25FdmFsLCBtYXAsIG9yZGluYWwsIHByb21pc2VXaXRoVGltZW91dCwgcXVlcnlzdHJpbmcsIHF1ZXJ5c3RyaW5nRGVjb2RlLCBzYWZlR2V0LCBzdHJpbmdMZW5ndGgsIHN0cmluZ1RvQnl0ZUFycmF5LCBzdHJpbmdpZnksIHV1aWR2NCwgdmFsaWRhdGVBcmdDb3VudCwgdmFsaWRhdGVDYWxsYmFjaywgdmFsaWRhdGVDb250ZXh0T2JqZWN0LCB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlLCB2YWxpZGF0ZU5hbWVzcGFjZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsImltcG9ydCB7IERlZmVycmVkIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuXG4vKipcbiAqIENvbXBvbmVudCBmb3Igc2VydmljZSBuYW1lIFQsIGUuZy4gYGF1dGhgLCBgYXV0aC1pbnRlcm5hbGBcbiAqL1xuY2xhc3MgQ29tcG9uZW50IHtcbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBwdWJsaWMgc2VydmljZSBuYW1lLCBlLmcuIGFwcCwgYXV0aCwgZmlyZXN0b3JlLCBkYXRhYmFzZVxuICAgICAqIEBwYXJhbSBpbnN0YW5jZUZhY3RvcnkgU2VydmljZSBmYWN0b3J5IHJlc3BvbnNpYmxlIGZvciBjcmVhdGluZyB0aGUgcHVibGljIGludGVyZmFjZVxuICAgICAqIEBwYXJhbSB0eXBlIHdoZXRoZXIgdGhlIHNlcnZpY2UgcHJvdmlkZWQgYnkgdGhlIGNvbXBvbmVudCBpcyBwdWJsaWMgb3IgcHJpdmF0ZVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGluc3RhbmNlRmFjdG9yeSwgdHlwZSkge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmluc3RhbmNlRmFjdG9yeSA9IGluc3RhbmNlRmFjdG9yeTtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogUHJvcGVydGllcyB0byBiZSBhZGRlZCB0byB0aGUgc2VydmljZSBuYW1lc3BhY2VcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2VydmljZVByb3BzID0ge307XG4gICAgICAgIHRoaXMuaW5zdGFudGlhdGlvbk1vZGUgPSBcIkxBWllcIiAvKiBJbnN0YW50aWF0aW9uTW9kZS5MQVpZICovO1xuICAgICAgICB0aGlzLm9uSW5zdGFuY2VDcmVhdGVkID0gbnVsbDtcbiAgICB9XG4gICAgc2V0SW5zdGFudGlhdGlvbk1vZGUobW9kZSkge1xuICAgICAgICB0aGlzLmluc3RhbnRpYXRpb25Nb2RlID0gbW9kZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHNldE11bHRpcGxlSW5zdGFuY2VzKG11bHRpcGxlSW5zdGFuY2VzKSB7XG4gICAgICAgIHRoaXMubXVsdGlwbGVJbnN0YW5jZXMgPSBtdWx0aXBsZUluc3RhbmNlcztcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHNldFNlcnZpY2VQcm9wcyhwcm9wcykge1xuICAgICAgICB0aGlzLnNlcnZpY2VQcm9wcyA9IHByb3BzO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgc2V0SW5zdGFuY2VDcmVhdGVkQ2FsbGJhY2soY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5vbkluc3RhbmNlQ3JlYXRlZCA9IGNhbGxiYWNrO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jb25zdCBERUZBVUxUX0VOVFJZX05BTUUgPSAnW0RFRkFVTFRdJztcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUHJvdmlkZXIgZm9yIGluc3RhbmNlIGZvciBzZXJ2aWNlIG5hbWUgVCwgZS5nLiAnYXV0aCcsICdhdXRoLWludGVybmFsJ1xuICogTmFtZVNlcnZpY2VNYXBwaW5nW1RdIGlzIGFuIGFsaWFzIGZvciB0aGUgdHlwZSBvZiB0aGUgaW5zdGFuY2VcbiAqL1xuY2xhc3MgUHJvdmlkZXIge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGNvbnRhaW5lcikge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgICAgdGhpcy5jb21wb25lbnQgPSBudWxsO1xuICAgICAgICB0aGlzLmluc3RhbmNlcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZCA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNPcHRpb25zID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLm9uSW5pdENhbGxiYWNrcyA9IG5ldyBNYXAoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGlkZW50aWZpZXIgQSBwcm92aWRlciBjYW4gcHJvdmlkZSBtdWx0aXBsZSBpbnN0YW5jZXMgb2YgYSBzZXJ2aWNlXG4gICAgICogaWYgdGhpcy5jb21wb25lbnQubXVsdGlwbGVJbnN0YW5jZXMgaXMgdHJ1ZS5cbiAgICAgKi9cbiAgICBnZXQoaWRlbnRpZmllcikge1xuICAgICAgICAvLyBpZiBtdWx0aXBsZUluc3RhbmNlcyBpcyBub3Qgc3VwcG9ydGVkLCB1c2UgdGhlIGRlZmF1bHQgbmFtZVxuICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgICAgICBpZiAoIXRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuaGFzKG5vcm1hbGl6ZWRJZGVudGlmaWVyKSkge1xuICAgICAgICAgICAgY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuc2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyLCBkZWZlcnJlZCk7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkKG5vcm1hbGl6ZWRJZGVudGlmaWVyKSB8fFxuICAgICAgICAgICAgICAgIHRoaXMuc2hvdWxkQXV0b0luaXRpYWxpemUoKSkge1xuICAgICAgICAgICAgICAgIC8vIGluaXRpYWxpemUgdGhlIHNlcnZpY2UgaWYgaXQgY2FuIGJlIGF1dG8taW5pdGlhbGl6ZWRcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIGluc3RhbmNlIGZhY3RvcnkgdGhyb3dzIGFuIGV4Y2VwdGlvbiBkdXJpbmcgZ2V0KCksIGl0IHNob3VsZCBub3QgY2F1c2VcbiAgICAgICAgICAgICAgICAgICAgLy8gYSBmYXRhbCBlcnJvci4gV2UganVzdCByZXR1cm4gdGhlIHVucmVzb2x2ZWQgcHJvbWlzZSBpbiB0aGlzIGNhc2UuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmdldChub3JtYWxpemVkSWRlbnRpZmllcikucHJvbWlzZTtcbiAgICB9XG4gICAgZ2V0SW1tZWRpYXRlKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICAvLyBpZiBtdWx0aXBsZUluc3RhbmNlcyBpcyBub3Qgc3VwcG9ydGVkLCB1c2UgdGhlIGRlZmF1bHQgbmFtZVxuICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5pZGVudGlmaWVyKTtcbiAgICAgICAgY29uc3Qgb3B0aW9uYWwgPSAoX2EgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMub3B0aW9uYWwpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkKG5vcm1hbGl6ZWRJZGVudGlmaWVyKSB8fFxuICAgICAgICAgICAgdGhpcy5zaG91bGRBdXRvSW5pdGlhbGl6ZSgpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25hbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gSW4gY2FzZSBhIGNvbXBvbmVudCBpcyBub3QgaW5pdGlhbGl6ZWQgYW5kIHNob3VsZC9jYW5ub3QgYmUgYXV0by1pbml0aWFsaXplZCBhdCB0aGUgbW9tZW50LCByZXR1cm4gbnVsbCBpZiB0aGUgb3B0aW9uYWwgZmxhZyBpcyBzZXQsIG9yIHRocm93XG4gICAgICAgICAgICBpZiAob3B0aW9uYWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKGBTZXJ2aWNlICR7dGhpcy5uYW1lfSBpcyBub3QgYXZhaWxhYmxlYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0Q29tcG9uZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQ7XG4gICAgfVxuICAgIHNldENvbXBvbmVudChjb21wb25lbnQpIHtcbiAgICAgICAgaWYgKGNvbXBvbmVudC5uYW1lICE9PSB0aGlzLm5hbWUpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKGBNaXNtYXRjaGluZyBDb21wb25lbnQgJHtjb21wb25lbnQubmFtZX0gZm9yIFByb3ZpZGVyICR7dGhpcy5uYW1lfS5gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jb21wb25lbnQpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKGBDb21wb25lbnQgZm9yICR7dGhpcy5uYW1lfSBoYXMgYWxyZWFkeSBiZWVuIHByb3ZpZGVkYCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb21wb25lbnQgPSBjb21wb25lbnQ7XG4gICAgICAgIC8vIHJldHVybiBlYXJseSB3aXRob3V0IGF0dGVtcHRpbmcgdG8gaW5pdGlhbGl6ZSB0aGUgY29tcG9uZW50IGlmIHRoZSBjb21wb25lbnQgcmVxdWlyZXMgZXhwbGljaXQgaW5pdGlhbGl6YXRpb24gKGNhbGxpbmcgYFByb3ZpZGVyLmluaXRpYWxpemUoKWApXG4gICAgICAgIGlmICghdGhpcy5zaG91bGRBdXRvSW5pdGlhbGl6ZSgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gaWYgdGhlIHNlcnZpY2UgaXMgZWFnZXIsIGluaXRpYWxpemUgdGhlIGRlZmF1bHQgaW5zdGFuY2VcbiAgICAgICAgaWYgKGlzQ29tcG9uZW50RWFnZXIoY29tcG9uZW50KSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2UoeyBpbnN0YW5jZUlkZW50aWZpZXI6IERFRkFVTFRfRU5UUllfTkFNRSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSBmb3IgYW4gZWFnZXIgQ29tcG9uZW50IHRocm93cyBhbiBleGNlcHRpb24gZHVyaW5nIHRoZSBlYWdlclxuICAgICAgICAgICAgICAgIC8vIGluaXRpYWxpemF0aW9uLCBpdCBzaG91bGQgbm90IGNhdXNlIGEgZmF0YWwgZXJyb3IuXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogSW52ZXN0aWdhdGUgaWYgd2UgbmVlZCB0byBtYWtlIGl0IGNvbmZpZ3VyYWJsZSwgYmVjYXVzZSBzb21lIGNvbXBvbmVudCBtYXkgd2FudCB0byBjYXVzZVxuICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IgaW4gdGhpcyBjYXNlP1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIENyZWF0ZSBzZXJ2aWNlIGluc3RhbmNlcyBmb3IgdGhlIHBlbmRpbmcgcHJvbWlzZXMgYW5kIHJlc29sdmUgdGhlbVxuICAgICAgICAvLyBOT1RFOiBpZiB0aGlzLm11bHRpcGxlSW5zdGFuY2VzIGlzIGZhbHNlLCBvbmx5IHRoZSBkZWZhdWx0IGluc3RhbmNlIHdpbGwgYmUgY3JlYXRlZFxuICAgICAgICAvLyBhbmQgYWxsIHByb21pc2VzIHdpdGggcmVzb2x2ZSB3aXRoIGl0IHJlZ2FyZGxlc3Mgb2YgdGhlIGlkZW50aWZpZXIuXG4gICAgICAgIGZvciAoY29uc3QgW2luc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2VEZWZlcnJlZF0gb2YgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaW5zdGFuY2VJZGVudGlmaWVyKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gYGdldE9ySW5pdGlhbGl6ZVNlcnZpY2UoKWAgc2hvdWxkIGFsd2F5cyByZXR1cm4gYSB2YWxpZCBpbnN0YW5jZSBzaW5jZSBhIGNvbXBvbmVudCBpcyBndWFyYW50ZWVkLiB1c2UgISB0byBtYWtlIHR5cGVzY3JpcHQgaGFwcHkuXG4gICAgICAgICAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaW5zdGFuY2VEZWZlcnJlZC5yZXNvbHZlKGluc3RhbmNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSB0aHJvd3MgYW4gZXhjZXB0aW9uLCBpdCBzaG91bGQgbm90IGNhdXNlXG4gICAgICAgICAgICAgICAgLy8gYSBmYXRhbCBlcnJvci4gV2UganVzdCBsZWF2ZSB0aGUgcHJvbWlzZSB1bnJlc29sdmVkLlxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNsZWFySW5zdGFuY2UoaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xuICAgICAgICB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmRlbGV0ZShpZGVudGlmaWVyKTtcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNPcHRpb25zLmRlbGV0ZShpZGVudGlmaWVyKTtcbiAgICAgICAgdGhpcy5pbnN0YW5jZXMuZGVsZXRlKGlkZW50aWZpZXIpO1xuICAgIH1cbiAgICAvLyBhcHAuZGVsZXRlKCkgd2lsbCBjYWxsIHRoaXMgbWV0aG9kIG9uIGV2ZXJ5IHByb3ZpZGVyIHRvIGRlbGV0ZSB0aGUgc2VydmljZXNcbiAgICAvLyBUT0RPOiBzaG91bGQgd2UgbWFyayB0aGUgcHJvdmlkZXIgYXMgZGVsZXRlZD9cbiAgICBhc3luYyBkZWxldGUoKSB7XG4gICAgICAgIGNvbnN0IHNlcnZpY2VzID0gQXJyYXkuZnJvbSh0aGlzLmluc3RhbmNlcy52YWx1ZXMoKSk7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgIC4uLnNlcnZpY2VzXG4gICAgICAgICAgICAgICAgLmZpbHRlcihzZXJ2aWNlID0+ICdJTlRFUk5BTCcgaW4gc2VydmljZSkgLy8gbGVnYWN5IHNlcnZpY2VzXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICAubWFwKHNlcnZpY2UgPT4gc2VydmljZS5JTlRFUk5BTC5kZWxldGUoKSksXG4gICAgICAgICAgICAuLi5zZXJ2aWNlc1xuICAgICAgICAgICAgICAgIC5maWx0ZXIoc2VydmljZSA9PiAnX2RlbGV0ZScgaW4gc2VydmljZSkgLy8gbW9kdWxhcml6ZWQgc2VydmljZXNcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgIC5tYXAoc2VydmljZSA9PiBzZXJ2aWNlLl9kZWxldGUoKSlcbiAgICAgICAgXSk7XG4gICAgfVxuICAgIGlzQ29tcG9uZW50U2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQgIT0gbnVsbDtcbiAgICB9XG4gICAgaXNJbml0aWFsaXplZChpZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlcy5oYXMoaWRlbnRpZmllcik7XG4gICAgfVxuICAgIGdldE9wdGlvbnMoaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZXNPcHRpb25zLmdldChpZGVudGlmaWVyKSB8fCB7fTtcbiAgICB9XG4gICAgaW5pdGlhbGl6ZShvcHRzID0ge30pIHtcbiAgICAgICAgY29uc3QgeyBvcHRpb25zID0ge30gfSA9IG9wdHM7XG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIob3B0cy5pbnN0YW5jZUlkZW50aWZpZXIpO1xuICAgICAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkKG5vcm1hbGl6ZWRJZGVudGlmaWVyKSkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYCR7dGhpcy5uYW1lfSgke25vcm1hbGl6ZWRJZGVudGlmaWVyfSkgaGFzIGFscmVhZHkgYmVlbiBpbml0aWFsaXplZGApO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5pc0NvbXBvbmVudFNldCgpKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgQ29tcG9uZW50ICR7dGhpcy5uYW1lfSBoYXMgbm90IGJlZW4gcmVnaXN0ZXJlZCB5ZXRgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XG4gICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyLFxuICAgICAgICAgICAgb3B0aW9uc1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gcmVzb2x2ZSBhbnkgcGVuZGluZyBwcm9taXNlIHdhaXRpbmcgZm9yIHRoZSBzZXJ2aWNlIGluc3RhbmNlXG4gICAgICAgIGZvciAoY29uc3QgW2luc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2VEZWZlcnJlZF0gb2YgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWREZWZlcnJlZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpbnN0YW5jZUlkZW50aWZpZXIpO1xuICAgICAgICAgICAgaWYgKG5vcm1hbGl6ZWRJZGVudGlmaWVyID09PSBub3JtYWxpemVkRGVmZXJyZWRJZGVudGlmaWVyKSB7XG4gICAgICAgICAgICAgICAgaW5zdGFuY2VEZWZlcnJlZC5yZXNvbHZlKGluc3RhbmNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5zdGFuY2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIC0gYSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgaW52b2tlZCAgYWZ0ZXIgdGhlIHByb3ZpZGVyIGhhcyBiZWVuIGluaXRpYWxpemVkIGJ5IGNhbGxpbmcgcHJvdmlkZXIuaW5pdGlhbGl6ZSgpLlxuICAgICAqIFRoZSBmdW5jdGlvbiBpcyBpbnZva2VkIFNZTkNIUk9OT1VTTFksIHNvIGl0IHNob3VsZCBub3QgZXhlY3V0ZSBhbnkgbG9uZ3J1bm5pbmcgdGFza3MgaW4gb3JkZXIgdG8gbm90IGJsb2NrIHRoZSBwcm9ncmFtLlxuICAgICAqXG4gICAgICogQHBhcmFtIGlkZW50aWZpZXIgQW4gb3B0aW9uYWwgaW5zdGFuY2UgaWRlbnRpZmllclxuICAgICAqIEByZXR1cm5zIGEgZnVuY3Rpb24gdG8gdW5yZWdpc3RlciB0aGUgY2FsbGJhY2tcbiAgICAgKi9cbiAgICBvbkluaXQoY2FsbGJhY2ssIGlkZW50aWZpZXIpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgICAgICBjb25zdCBleGlzdGluZ0NhbGxiYWNrcyA9IChfYSA9IHRoaXMub25Jbml0Q2FsbGJhY2tzLmdldChub3JtYWxpemVkSWRlbnRpZmllcikpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IG5ldyBTZXQoKTtcbiAgICAgICAgZXhpc3RpbmdDYWxsYmFja3MuYWRkKGNhbGxiYWNrKTtcbiAgICAgICAgdGhpcy5vbkluaXRDYWxsYmFja3Muc2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyLCBleGlzdGluZ0NhbGxiYWNrcyk7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nSW5zdGFuY2UgPSB0aGlzLmluc3RhbmNlcy5nZXQobm9ybWFsaXplZElkZW50aWZpZXIpO1xuICAgICAgICBpZiAoZXhpc3RpbmdJbnN0YW5jZSkge1xuICAgICAgICAgICAgY2FsbGJhY2soZXhpc3RpbmdJbnN0YW5jZSwgbm9ybWFsaXplZElkZW50aWZpZXIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBleGlzdGluZ0NhbGxiYWNrcy5kZWxldGUoY2FsbGJhY2spO1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnZva2Ugb25Jbml0IGNhbGxiYWNrcyBzeW5jaHJvbm91c2x5XG4gICAgICogQHBhcmFtIGluc3RhbmNlIHRoZSBzZXJ2aWNlIGluc3RhbmNlYFxuICAgICAqL1xuICAgIGludm9rZU9uSW5pdENhbGxiYWNrcyhpbnN0YW5jZSwgaWRlbnRpZmllcikge1xuICAgICAgICBjb25zdCBjYWxsYmFja3MgPSB0aGlzLm9uSW5pdENhbGxiYWNrcy5nZXQoaWRlbnRpZmllcik7XG4gICAgICAgIGlmICghY2FsbGJhY2tzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBjYWxsYmFjayBvZiBjYWxsYmFja3MpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soaW5zdGFuY2UsIGlkZW50aWZpZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKF9hKSB7XG4gICAgICAgICAgICAgICAgLy8gaWdub3JlIGVycm9ycyBpbiB0aGUgb25Jbml0IGNhbGxiYWNrXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0T3JJbml0aWFsaXplU2VydmljZSh7IGluc3RhbmNlSWRlbnRpZmllciwgb3B0aW9ucyA9IHt9IH0pIHtcbiAgICAgICAgbGV0IGluc3RhbmNlID0gdGhpcy5pbnN0YW5jZXMuZ2V0KGluc3RhbmNlSWRlbnRpZmllcik7XG4gICAgICAgIGlmICghaW5zdGFuY2UgJiYgdGhpcy5jb21wb25lbnQpIHtcbiAgICAgICAgICAgIGluc3RhbmNlID0gdGhpcy5jb21wb25lbnQuaW5zdGFuY2VGYWN0b3J5KHRoaXMuY29udGFpbmVyLCB7XG4gICAgICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVJZGVudGlmaWVyRm9yRmFjdG9yeShpbnN0YW5jZUlkZW50aWZpZXIpLFxuICAgICAgICAgICAgICAgIG9wdGlvbnNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXMuc2V0KGluc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2UpO1xuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXNPcHRpb25zLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIG9wdGlvbnMpO1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBJbnZva2Ugb25Jbml0IGxpc3RlbmVycy5cbiAgICAgICAgICAgICAqIE5vdGUgdGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQgaXMgZGlmZmVyZW50LCB3aGljaCBpcyB1c2VkIGJ5IHRoZSBjb21wb25lbnQgY3JlYXRvcixcbiAgICAgICAgICAgICAqIHdoaWxlIG9uSW5pdCBsaXN0ZW5lcnMgYXJlIHJlZ2lzdGVyZWQgYnkgY29uc3VtZXJzIG9mIHRoZSBwcm92aWRlci5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdGhpcy5pbnZva2VPbkluaXRDYWxsYmFja3MoaW5zdGFuY2UsIGluc3RhbmNlSWRlbnRpZmllcik7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIE9yZGVyIGlzIGltcG9ydGFudFxuICAgICAgICAgICAgICogb25JbnN0YW5jZUNyZWF0ZWQoKSBzaG91bGQgYmUgY2FsbGVkIGFmdGVyIHRoaXMuaW5zdGFuY2VzLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlKTsgd2hpY2hcbiAgICAgICAgICAgICAqIG1ha2VzIGBpc0luaXRpYWxpemVkKClgIHJldHVybiB0cnVlLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBpZiAodGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5vbkluc3RhbmNlQ3JlYXRlZCh0aGlzLmNvbnRhaW5lciwgaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChfYSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBpZ25vcmUgZXJyb3JzIGluIHRoZSBvbkluc3RhbmNlQ3JlYXRlZENhbGxiYWNrXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbnN0YW5jZSB8fCBudWxsO1xuICAgIH1cbiAgICBub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xuICAgICAgICBpZiAodGhpcy5jb21wb25lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudC5tdWx0aXBsZUluc3RhbmNlcyA/IGlkZW50aWZpZXIgOiBERUZBVUxUX0VOVFJZX05BTUU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gaWRlbnRpZmllcjsgLy8gYXNzdW1lIG11bHRpcGxlIGluc3RhbmNlcyBhcmUgc3VwcG9ydGVkIGJlZm9yZSB0aGUgY29tcG9uZW50IGlzIHByb3ZpZGVkLlxuICAgICAgICB9XG4gICAgfVxuICAgIHNob3VsZEF1dG9Jbml0aWFsaXplKCkge1xuICAgICAgICByZXR1cm4gKCEhdGhpcy5jb21wb25lbnQgJiZcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50Lmluc3RhbnRpYXRpb25Nb2RlICE9PSBcIkVYUExJQ0lUXCIgLyogSW5zdGFudGlhdGlvbk1vZGUuRVhQTElDSVQgKi8pO1xuICAgIH1cbn1cbi8vIHVuZGVmaW5lZCBzaG91bGQgYmUgcGFzc2VkIHRvIHRoZSBzZXJ2aWNlIGZhY3RvcnkgZm9yIHRoZSBkZWZhdWx0IGluc3RhbmNlXG5mdW5jdGlvbiBub3JtYWxpemVJZGVudGlmaWVyRm9yRmFjdG9yeShpZGVudGlmaWVyKSB7XG4gICAgcmV0dXJuIGlkZW50aWZpZXIgPT09IERFRkFVTFRfRU5UUllfTkFNRSA/IHVuZGVmaW5lZCA6IGlkZW50aWZpZXI7XG59XG5mdW5jdGlvbiBpc0NvbXBvbmVudEVhZ2VyKGNvbXBvbmVudCkge1xuICAgIHJldHVybiBjb21wb25lbnQuaW5zdGFudGlhdGlvbk1vZGUgPT09IFwiRUFHRVJcIiAvKiBJbnN0YW50aWF0aW9uTW9kZS5FQUdFUiAqLztcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQ29tcG9uZW50Q29udGFpbmVyIHRoYXQgcHJvdmlkZXMgUHJvdmlkZXJzIGZvciBzZXJ2aWNlIG5hbWUgVCwgZS5nLiBgYXV0aGAsIGBhdXRoLWludGVybmFsYFxuICovXG5jbGFzcyBDb21wb25lbnRDb250YWluZXIge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5wcm92aWRlcnMgPSBuZXcgTWFwKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbXBvbmVudCBDb21wb25lbnQgYmVpbmcgYWRkZWRcbiAgICAgKiBAcGFyYW0gb3ZlcndyaXRlIFdoZW4gYSBjb21wb25lbnQgd2l0aCB0aGUgc2FtZSBuYW1lIGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCxcbiAgICAgKiBpZiBvdmVyd3JpdGUgaXMgdHJ1ZTogb3ZlcndyaXRlIHRoZSBleGlzdGluZyBjb21wb25lbnQgd2l0aCB0aGUgbmV3IGNvbXBvbmVudCBhbmQgY3JlYXRlIGEgbmV3XG4gICAgICogcHJvdmlkZXIgd2l0aCB0aGUgbmV3IGNvbXBvbmVudC4gSXQgY2FuIGJlIHVzZWZ1bCBpbiB0ZXN0cyB3aGVyZSB5b3Ugd2FudCB0byB1c2UgZGlmZmVyZW50IG1vY2tzXG4gICAgICogZm9yIGRpZmZlcmVudCB0ZXN0cy5cbiAgICAgKiBpZiBvdmVyd3JpdGUgaXMgZmFsc2U6IHRocm93IGFuIGV4Y2VwdGlvblxuICAgICAqL1xuICAgIGFkZENvbXBvbmVudChjb21wb25lbnQpIHtcbiAgICAgICAgY29uc3QgcHJvdmlkZXIgPSB0aGlzLmdldFByb3ZpZGVyKGNvbXBvbmVudC5uYW1lKTtcbiAgICAgICAgaWYgKHByb3ZpZGVyLmlzQ29tcG9uZW50U2V0KCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ29tcG9uZW50ICR7Y29tcG9uZW50Lm5hbWV9IGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCB3aXRoICR7dGhpcy5uYW1lfWApO1xuICAgICAgICB9XG4gICAgICAgIHByb3ZpZGVyLnNldENvbXBvbmVudChjb21wb25lbnQpO1xuICAgIH1cbiAgICBhZGRPck92ZXJ3cml0ZUNvbXBvbmVudChjb21wb25lbnQpIHtcbiAgICAgICAgY29uc3QgcHJvdmlkZXIgPSB0aGlzLmdldFByb3ZpZGVyKGNvbXBvbmVudC5uYW1lKTtcbiAgICAgICAgaWYgKHByb3ZpZGVyLmlzQ29tcG9uZW50U2V0KCkpIHtcbiAgICAgICAgICAgIC8vIGRlbGV0ZSB0aGUgZXhpc3RpbmcgcHJvdmlkZXIgZnJvbSB0aGUgY29udGFpbmVyLCBzbyB3ZSBjYW4gcmVnaXN0ZXIgdGhlIG5ldyBjb21wb25lbnRcbiAgICAgICAgICAgIHRoaXMucHJvdmlkZXJzLmRlbGV0ZShjb21wb25lbnQubmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hZGRDb21wb25lbnQoY29tcG9uZW50KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogZ2V0UHJvdmlkZXIgcHJvdmlkZXMgYSB0eXBlIHNhZmUgaW50ZXJmYWNlIHdoZXJlIGl0IGNhbiBvbmx5IGJlIGNhbGxlZCB3aXRoIGEgZmllbGQgbmFtZVxuICAgICAqIHByZXNlbnQgaW4gTmFtZVNlcnZpY2VNYXBwaW5nIGludGVyZmFjZS5cbiAgICAgKlxuICAgICAqIEZpcmViYXNlIFNES3MgcHJvdmlkaW5nIHNlcnZpY2VzIHNob3VsZCBleHRlbmQgTmFtZVNlcnZpY2VNYXBwaW5nIGludGVyZmFjZSB0byByZWdpc3RlclxuICAgICAqIHRoZW1zZWx2ZXMuXG4gICAgICovXG4gICAgZ2V0UHJvdmlkZXIobmFtZSkge1xuICAgICAgICBpZiAodGhpcy5wcm92aWRlcnMuaGFzKG5hbWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm92aWRlcnMuZ2V0KG5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNyZWF0ZSBhIFByb3ZpZGVyIGZvciBhIHNlcnZpY2UgdGhhdCBoYXNuJ3QgcmVnaXN0ZXJlZCB3aXRoIEZpcmViYXNlXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gbmV3IFByb3ZpZGVyKG5hbWUsIHRoaXMpO1xuICAgICAgICB0aGlzLnByb3ZpZGVycy5zZXQobmFtZSwgcHJvdmlkZXIpO1xuICAgICAgICByZXR1cm4gcHJvdmlkZXI7XG4gICAgfVxuICAgIGdldFByb3ZpZGVycygpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5wcm92aWRlcnMudmFsdWVzKCkpO1xuICAgIH1cbn1cblxuZXhwb3J0IHsgQ29tcG9uZW50LCBDb21wb25lbnRDb250YWluZXIsIFByb3ZpZGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBjb250YWluZXIgZm9yIGFsbCBvZiB0aGUgTG9nZ2VyIGluc3RhbmNlc1xuICovXG5jb25zdCBpbnN0YW5jZXMgPSBbXTtcbi8qKlxuICogVGhlIEpTIFNESyBzdXBwb3J0cyA1IGxvZyBsZXZlbHMgYW5kIGFsc28gYWxsb3dzIGEgdXNlciB0aGUgYWJpbGl0eSB0b1xuICogc2lsZW5jZSB0aGUgbG9ncyBhbHRvZ2V0aGVyLlxuICpcbiAqIFRoZSBvcmRlciBpcyBhIGZvbGxvd3M6XG4gKiBERUJVRyA8IFZFUkJPU0UgPCBJTkZPIDwgV0FSTiA8IEVSUk9SXG4gKlxuICogQWxsIG9mIHRoZSBsb2cgdHlwZXMgYWJvdmUgdGhlIGN1cnJlbnQgbG9nIGxldmVsIHdpbGwgYmUgY2FwdHVyZWQgKGkuZS4gaWZcbiAqIHlvdSBzZXQgdGhlIGxvZyBsZXZlbCB0byBgSU5GT2AsIGVycm9ycyB3aWxsIHN0aWxsIGJlIGxvZ2dlZCwgYnV0IGBERUJVR2AgYW5kXG4gKiBgVkVSQk9TRWAgbG9ncyB3aWxsIG5vdClcbiAqL1xudmFyIExvZ0xldmVsO1xuKGZ1bmN0aW9uIChMb2dMZXZlbCkge1xuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiREVCVUdcIl0gPSAwXSA9IFwiREVCVUdcIjtcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIlZFUkJPU0VcIl0gPSAxXSA9IFwiVkVSQk9TRVwiO1xuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiSU5GT1wiXSA9IDJdID0gXCJJTkZPXCI7XG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJXQVJOXCJdID0gM10gPSBcIldBUk5cIjtcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIkVSUk9SXCJdID0gNF0gPSBcIkVSUk9SXCI7XG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJTSUxFTlRcIl0gPSA1XSA9IFwiU0lMRU5UXCI7XG59KShMb2dMZXZlbCB8fCAoTG9nTGV2ZWwgPSB7fSkpO1xuY29uc3QgbGV2ZWxTdHJpbmdUb0VudW0gPSB7XG4gICAgJ2RlYnVnJzogTG9nTGV2ZWwuREVCVUcsXG4gICAgJ3ZlcmJvc2UnOiBMb2dMZXZlbC5WRVJCT1NFLFxuICAgICdpbmZvJzogTG9nTGV2ZWwuSU5GTyxcbiAgICAnd2Fybic6IExvZ0xldmVsLldBUk4sXG4gICAgJ2Vycm9yJzogTG9nTGV2ZWwuRVJST1IsXG4gICAgJ3NpbGVudCc6IExvZ0xldmVsLlNJTEVOVFxufTtcbi8qKlxuICogVGhlIGRlZmF1bHQgbG9nIGxldmVsXG4gKi9cbmNvbnN0IGRlZmF1bHRMb2dMZXZlbCA9IExvZ0xldmVsLklORk87XG4vKipcbiAqIEJ5IGRlZmF1bHQsIGBjb25zb2xlLmRlYnVnYCBpcyBub3QgZGlzcGxheWVkIGluIHRoZSBkZXZlbG9wZXIgY29uc29sZSAoaW5cbiAqIGNocm9tZSkuIFRvIGF2b2lkIGZvcmNpbmcgdXNlcnMgdG8gaGF2ZSB0byBvcHQtaW4gdG8gdGhlc2UgbG9ncyB0d2ljZVxuICogKGkuZS4gb25jZSBmb3IgZmlyZWJhc2UsIGFuZCBvbmNlIGluIHRoZSBjb25zb2xlKSwgd2UgYXJlIHNlbmRpbmcgYERFQlVHYFxuICogbG9ncyB0byB0aGUgYGNvbnNvbGUubG9nYCBmdW5jdGlvbi5cbiAqL1xuY29uc3QgQ29uc29sZU1ldGhvZCA9IHtcbiAgICBbTG9nTGV2ZWwuREVCVUddOiAnbG9nJyxcbiAgICBbTG9nTGV2ZWwuVkVSQk9TRV06ICdsb2cnLFxuICAgIFtMb2dMZXZlbC5JTkZPXTogJ2luZm8nLFxuICAgIFtMb2dMZXZlbC5XQVJOXTogJ3dhcm4nLFxuICAgIFtMb2dMZXZlbC5FUlJPUl06ICdlcnJvcidcbn07XG4vKipcbiAqIFRoZSBkZWZhdWx0IGxvZyBoYW5kbGVyIHdpbGwgZm9yd2FyZCBERUJVRywgVkVSQk9TRSwgSU5GTywgV0FSTiwgYW5kIEVSUk9SXG4gKiBtZXNzYWdlcyBvbiB0byB0aGVpciBjb3JyZXNwb25kaW5nIGNvbnNvbGUgY291bnRlcnBhcnRzIChpZiB0aGUgbG9nIG1ldGhvZFxuICogaXMgc3VwcG9ydGVkIGJ5IHRoZSBjdXJyZW50IGxvZyBsZXZlbClcbiAqL1xuY29uc3QgZGVmYXVsdExvZ0hhbmRsZXIgPSAoaW5zdGFuY2UsIGxvZ1R5cGUsIC4uLmFyZ3MpID0+IHtcbiAgICBpZiAobG9nVHlwZSA8IGluc3RhbmNlLmxvZ0xldmVsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgIGNvbnN0IG1ldGhvZCA9IENvbnNvbGVNZXRob2RbbG9nVHlwZV07XG4gICAgaWYgKG1ldGhvZCkge1xuICAgICAgICBjb25zb2xlW21ldGhvZF0oYFske25vd31dICAke2luc3RhbmNlLm5hbWV9OmAsIC4uLmFyZ3MpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBdHRlbXB0ZWQgdG8gbG9nIGEgbWVzc2FnZSB3aXRoIGFuIGludmFsaWQgbG9nVHlwZSAodmFsdWU6ICR7bG9nVHlwZX0pYCk7XG4gICAgfVxufTtcbmNsYXNzIExvZ2dlciB7XG4gICAgLyoqXG4gICAgICogR2l2ZXMgeW91IGFuIGluc3RhbmNlIG9mIGEgTG9nZ2VyIHRvIGNhcHR1cmUgbWVzc2FnZXMgYWNjb3JkaW5nIHRvXG4gICAgICogRmlyZWJhc2UncyBsb2dnaW5nIHNjaGVtZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIHRoYXQgdGhlIGxvZ3Mgd2lsbCBiZSBhc3NvY2lhdGVkIHdpdGhcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihuYW1lKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbG9nIGxldmVsIG9mIHRoZSBnaXZlbiBMb2dnZXIgaW5zdGFuY2UuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9sb2dMZXZlbCA9IGRlZmF1bHRMb2dMZXZlbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBtYWluIChpbnRlcm5hbCkgbG9nIGhhbmRsZXIgZm9yIHRoZSBMb2dnZXIgaW5zdGFuY2UuXG4gICAgICAgICAqIENhbiBiZSBzZXQgdG8gYSBuZXcgZnVuY3Rpb24gaW4gaW50ZXJuYWwgcGFja2FnZSBjb2RlIGJ1dCBub3QgYnkgdXNlci5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIgPSBkZWZhdWx0TG9nSGFuZGxlcjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBvcHRpb25hbCwgYWRkaXRpb25hbCwgdXNlci1kZWZpbmVkIGxvZyBoYW5kbGVyIGZvciB0aGUgTG9nZ2VyIGluc3RhbmNlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQ2FwdHVyZSB0aGUgY3VycmVudCBpbnN0YW5jZSBmb3IgbGF0ZXIgdXNlXG4gICAgICAgICAqL1xuICAgICAgICBpbnN0YW5jZXMucHVzaCh0aGlzKTtcbiAgICB9XG4gICAgZ2V0IGxvZ0xldmVsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbG9nTGV2ZWw7XG4gICAgfVxuICAgIHNldCBsb2dMZXZlbCh2YWwpIHtcbiAgICAgICAgaWYgKCEodmFsIGluIExvZ0xldmVsKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCB2YWx1ZSBcIiR7dmFsfVwiIGFzc2lnbmVkIHRvIFxcYGxvZ0xldmVsXFxgYCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSB2YWw7XG4gICAgfVxuICAgIC8vIFdvcmthcm91bmQgZm9yIHNldHRlci9nZXR0ZXIgaGF2aW5nIHRvIGJlIHRoZSBzYW1lIHR5cGUuXG4gICAgc2V0TG9nTGV2ZWwodmFsKSB7XG4gICAgICAgIHRoaXMuX2xvZ0xldmVsID0gdHlwZW9mIHZhbCA9PT0gJ3N0cmluZycgPyBsZXZlbFN0cmluZ1RvRW51bVt2YWxdIDogdmFsO1xuICAgIH1cbiAgICBnZXQgbG9nSGFuZGxlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvZ0hhbmRsZXI7XG4gICAgfVxuICAgIHNldCBsb2dIYW5kbGVyKHZhbCkge1xuICAgICAgICBpZiAodHlwZW9mIHZhbCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgYXNzaWduZWQgdG8gYGxvZ0hhbmRsZXJgIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIgPSB2YWw7XG4gICAgfVxuICAgIGdldCB1c2VyTG9nSGFuZGxlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJMb2dIYW5kbGVyO1xuICAgIH1cbiAgICBzZXQgdXNlckxvZ0hhbmRsZXIodmFsKSB7XG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyID0gdmFsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgZnVuY3Rpb25zIGJlbG93IGFyZSBhbGwgYmFzZWQgb24gdGhlIGBjb25zb2xlYCBpbnRlcmZhY2VcbiAgICAgKi9cbiAgICBkZWJ1ZyguLi5hcmdzKSB7XG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLkRFQlVHLCAuLi5hcmdzKTtcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5ERUJVRywgLi4uYXJncyk7XG4gICAgfVxuICAgIGxvZyguLi5hcmdzKSB7XG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmXG4gICAgICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5WRVJCT1NFLCAuLi5hcmdzKTtcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5WRVJCT1NFLCAuLi5hcmdzKTtcbiAgICB9XG4gICAgaW5mbyguLi5hcmdzKSB7XG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLklORk8sIC4uLmFyZ3MpO1xuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLklORk8sIC4uLmFyZ3MpO1xuICAgIH1cbiAgICB3YXJuKC4uLmFyZ3MpIHtcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuV0FSTiwgLi4uYXJncyk7XG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuV0FSTiwgLi4uYXJncyk7XG4gICAgfVxuICAgIGVycm9yKC4uLmFyZ3MpIHtcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuRVJST1IsIC4uLmFyZ3MpO1xuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLkVSUk9SLCAuLi5hcmdzKTtcbiAgICB9XG59XG5mdW5jdGlvbiBzZXRMb2dMZXZlbChsZXZlbCkge1xuICAgIGluc3RhbmNlcy5mb3JFYWNoKGluc3QgPT4ge1xuICAgICAgICBpbnN0LnNldExvZ0xldmVsKGxldmVsKTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIHNldFVzZXJMb2dIYW5kbGVyKGxvZ0NhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgZm9yIChjb25zdCBpbnN0YW5jZSBvZiBpbnN0YW5jZXMpIHtcbiAgICAgICAgbGV0IGN1c3RvbUxvZ0xldmVsID0gbnVsbDtcbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5sZXZlbCkge1xuICAgICAgICAgICAgY3VzdG9tTG9nTGV2ZWwgPSBsZXZlbFN0cmluZ1RvRW51bVtvcHRpb25zLmxldmVsXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobG9nQ2FsbGJhY2sgPT09IG51bGwpIHtcbiAgICAgICAgICAgIGluc3RhbmNlLnVzZXJMb2dIYW5kbGVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGluc3RhbmNlLnVzZXJMb2dIYW5kbGVyID0gKGluc3RhbmNlLCBsZXZlbCwgLi4uYXJncykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhcmdzXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoYXJnID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZyA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgYXJnID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgYXJnID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgYXJnID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcmcudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChhcmcgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZy5tZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoYXJnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChpZ25vcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGFyZyA9PiBhcmcpXG4gICAgICAgICAgICAgICAgICAgIC5qb2luKCcgJyk7XG4gICAgICAgICAgICAgICAgaWYgKGxldmVsID49IChjdXN0b21Mb2dMZXZlbCAhPT0gbnVsbCAmJiBjdXN0b21Mb2dMZXZlbCAhPT0gdm9pZCAwID8gY3VzdG9tTG9nTGV2ZWwgOiBpbnN0YW5jZS5sb2dMZXZlbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nQ2FsbGJhY2soe1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWw6IExvZ0xldmVsW2xldmVsXS50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBpbnN0YW5jZS5uYW1lXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCB7IExvZ0xldmVsLCBMb2dnZXIsIHNldExvZ0xldmVsLCBzZXRVc2VyTG9nSGFuZGxlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsImNvbnN0IGluc3RhbmNlT2ZBbnkgPSAob2JqZWN0LCBjb25zdHJ1Y3RvcnMpID0+IGNvbnN0cnVjdG9ycy5zb21lKChjKSA9PiBvYmplY3QgaW5zdGFuY2VvZiBjKTtcblxubGV0IGlkYlByb3h5YWJsZVR5cGVzO1xubGV0IGN1cnNvckFkdmFuY2VNZXRob2RzO1xuLy8gVGhpcyBpcyBhIGZ1bmN0aW9uIHRvIHByZXZlbnQgaXQgdGhyb3dpbmcgdXAgaW4gbm9kZSBlbnZpcm9ubWVudHMuXG5mdW5jdGlvbiBnZXRJZGJQcm94eWFibGVUeXBlcygpIHtcbiAgICByZXR1cm4gKGlkYlByb3h5YWJsZVR5cGVzIHx8XG4gICAgICAgIChpZGJQcm94eWFibGVUeXBlcyA9IFtcbiAgICAgICAgICAgIElEQkRhdGFiYXNlLFxuICAgICAgICAgICAgSURCT2JqZWN0U3RvcmUsXG4gICAgICAgICAgICBJREJJbmRleCxcbiAgICAgICAgICAgIElEQkN1cnNvcixcbiAgICAgICAgICAgIElEQlRyYW5zYWN0aW9uLFxuICAgICAgICBdKSk7XG59XG4vLyBUaGlzIGlzIGEgZnVuY3Rpb24gdG8gcHJldmVudCBpdCB0aHJvd2luZyB1cCBpbiBub2RlIGVudmlyb25tZW50cy5cbmZ1bmN0aW9uIGdldEN1cnNvckFkdmFuY2VNZXRob2RzKCkge1xuICAgIHJldHVybiAoY3Vyc29yQWR2YW5jZU1ldGhvZHMgfHxcbiAgICAgICAgKGN1cnNvckFkdmFuY2VNZXRob2RzID0gW1xuICAgICAgICAgICAgSURCQ3Vyc29yLnByb3RvdHlwZS5hZHZhbmNlLFxuICAgICAgICAgICAgSURCQ3Vyc29yLnByb3RvdHlwZS5jb250aW51ZSxcbiAgICAgICAgICAgIElEQkN1cnNvci5wcm90b3R5cGUuY29udGludWVQcmltYXJ5S2V5LFxuICAgICAgICBdKSk7XG59XG5jb25zdCBjdXJzb3JSZXF1ZXN0TWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHRyYW5zYWN0aW9uRG9uZU1hcCA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCB0cmFuc2FjdGlvblN0b3JlTmFtZXNNYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgdHJhbnNmb3JtQ2FjaGUgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgcmV2ZXJzZVRyYW5zZm9ybUNhY2hlID0gbmV3IFdlYWtNYXAoKTtcbmZ1bmN0aW9uIHByb21pc2lmeVJlcXVlc3QocmVxdWVzdCkge1xuICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IHVubGlzdGVuID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVxdWVzdC5yZW1vdmVFdmVudExpc3RlbmVyKCdzdWNjZXNzJywgc3VjY2Vzcyk7XG4gICAgICAgICAgICByZXF1ZXN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBzdWNjZXNzID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVzb2x2ZSh3cmFwKHJlcXVlc3QucmVzdWx0KSk7XG4gICAgICAgICAgICB1bmxpc3RlbigpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBlcnJvciA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlamVjdChyZXF1ZXN0LmVycm9yKTtcbiAgICAgICAgICAgIHVubGlzdGVuKCk7XG4gICAgICAgIH07XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignc3VjY2VzcycsIHN1Y2Nlc3MpO1xuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZXJyb3IpO1xuICAgIH0pO1xuICAgIHByb21pc2VcbiAgICAgICAgLnRoZW4oKHZhbHVlKSA9PiB7XG4gICAgICAgIC8vIFNpbmNlIGN1cnNvcmluZyByZXVzZXMgdGhlIElEQlJlcXVlc3QgKCpzaWdoKiksIHdlIGNhY2hlIGl0IGZvciBsYXRlciByZXRyaWV2YWxcbiAgICAgICAgLy8gKHNlZSB3cmFwRnVuY3Rpb24pLlxuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBJREJDdXJzb3IpIHtcbiAgICAgICAgICAgIGN1cnNvclJlcXVlc3RNYXAuc2V0KHZhbHVlLCByZXF1ZXN0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDYXRjaGluZyB0byBhdm9pZCBcIlVuY2F1Z2h0IFByb21pc2UgZXhjZXB0aW9uc1wiXG4gICAgfSlcbiAgICAgICAgLmNhdGNoKCgpID0+IHsgfSk7XG4gICAgLy8gVGhpcyBtYXBwaW5nIGV4aXN0cyBpbiByZXZlcnNlVHJhbnNmb3JtQ2FjaGUgYnV0IGRvZXNuJ3QgZG9lc24ndCBleGlzdCBpbiB0cmFuc2Zvcm1DYWNoZS4gVGhpc1xuICAgIC8vIGlzIGJlY2F1c2Ugd2UgY3JlYXRlIG1hbnkgcHJvbWlzZXMgZnJvbSBhIHNpbmdsZSBJREJSZXF1ZXN0LlxuICAgIHJldmVyc2VUcmFuc2Zvcm1DYWNoZS5zZXQocHJvbWlzZSwgcmVxdWVzdCk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5mdW5jdGlvbiBjYWNoZURvbmVQcm9taXNlRm9yVHJhbnNhY3Rpb24odHgpIHtcbiAgICAvLyBFYXJseSBiYWlsIGlmIHdlJ3ZlIGFscmVhZHkgY3JlYXRlZCBhIGRvbmUgcHJvbWlzZSBmb3IgdGhpcyB0cmFuc2FjdGlvbi5cbiAgICBpZiAodHJhbnNhY3Rpb25Eb25lTWFwLmhhcyh0eCkpXG4gICAgICAgIHJldHVybjtcbiAgICBjb25zdCBkb25lID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCB1bmxpc3RlbiA9ICgpID0+IHtcbiAgICAgICAgICAgIHR4LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NvbXBsZXRlJywgY29tcGxldGUpO1xuICAgICAgICAgICAgdHgucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvcik7XG4gICAgICAgICAgICB0eC5yZW1vdmVFdmVudExpc3RlbmVyKCdhYm9ydCcsIGVycm9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgY29tcGxldGUgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB1bmxpc3RlbigpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBlcnJvciA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlamVjdCh0eC5lcnJvciB8fCBuZXcgRE9NRXhjZXB0aW9uKCdBYm9ydEVycm9yJywgJ0Fib3J0RXJyb3InKSk7XG4gICAgICAgICAgICB1bmxpc3RlbigpO1xuICAgICAgICB9O1xuICAgICAgICB0eC5hZGRFdmVudExpc3RlbmVyKCdjb21wbGV0ZScsIGNvbXBsZXRlKTtcbiAgICAgICAgdHguYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvcik7XG4gICAgICAgIHR4LmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgZXJyb3IpO1xuICAgIH0pO1xuICAgIC8vIENhY2hlIGl0IGZvciBsYXRlciByZXRyaWV2YWwuXG4gICAgdHJhbnNhY3Rpb25Eb25lTWFwLnNldCh0eCwgZG9uZSk7XG59XG5sZXQgaWRiUHJveHlUcmFwcyA9IHtcbiAgICBnZXQodGFyZ2V0LCBwcm9wLCByZWNlaXZlcikge1xuICAgICAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgSURCVHJhbnNhY3Rpb24pIHtcbiAgICAgICAgICAgIC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIHRyYW5zYWN0aW9uLmRvbmUuXG4gICAgICAgICAgICBpZiAocHJvcCA9PT0gJ2RvbmUnKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2FjdGlvbkRvbmVNYXAuZ2V0KHRhcmdldCk7XG4gICAgICAgICAgICAvLyBQb2x5ZmlsbCBmb3Igb2JqZWN0U3RvcmVOYW1lcyBiZWNhdXNlIG9mIEVkZ2UuXG4gICAgICAgICAgICBpZiAocHJvcCA9PT0gJ29iamVjdFN0b3JlTmFtZXMnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldC5vYmplY3RTdG9yZU5hbWVzIHx8IHRyYW5zYWN0aW9uU3RvcmVOYW1lc01hcC5nZXQodGFyZ2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE1ha2UgdHguc3RvcmUgcmV0dXJuIHRoZSBvbmx5IHN0b3JlIGluIHRoZSB0cmFuc2FjdGlvbiwgb3IgdW5kZWZpbmVkIGlmIHRoZXJlIGFyZSBtYW55LlxuICAgICAgICAgICAgaWYgKHByb3AgPT09ICdzdG9yZScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVjZWl2ZXIub2JqZWN0U3RvcmVOYW1lc1sxXVxuICAgICAgICAgICAgICAgICAgICA/IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICA6IHJlY2VpdmVyLm9iamVjdFN0b3JlKHJlY2VpdmVyLm9iamVjdFN0b3JlTmFtZXNbMF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEVsc2UgdHJhbnNmb3JtIHdoYXRldmVyIHdlIGdldCBiYWNrLlxuICAgICAgICByZXR1cm4gd3JhcCh0YXJnZXRbcHJvcF0pO1xuICAgIH0sXG4gICAgc2V0KHRhcmdldCwgcHJvcCwgdmFsdWUpIHtcbiAgICAgICAgdGFyZ2V0W3Byb3BdID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgaGFzKHRhcmdldCwgcHJvcCkge1xuICAgICAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgSURCVHJhbnNhY3Rpb24gJiZcbiAgICAgICAgICAgIChwcm9wID09PSAnZG9uZScgfHwgcHJvcCA9PT0gJ3N0b3JlJykpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwcm9wIGluIHRhcmdldDtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIHJlcGxhY2VUcmFwcyhjYWxsYmFjaykge1xuICAgIGlkYlByb3h5VHJhcHMgPSBjYWxsYmFjayhpZGJQcm94eVRyYXBzKTtcbn1cbmZ1bmN0aW9uIHdyYXBGdW5jdGlvbihmdW5jKSB7XG4gICAgLy8gRHVlIHRvIGV4cGVjdGVkIG9iamVjdCBlcXVhbGl0eSAod2hpY2ggaXMgZW5mb3JjZWQgYnkgdGhlIGNhY2hpbmcgaW4gYHdyYXBgKSwgd2VcbiAgICAvLyBvbmx5IGNyZWF0ZSBvbmUgbmV3IGZ1bmMgcGVyIGZ1bmMuXG4gICAgLy8gRWRnZSBkb2Vzbid0IHN1cHBvcnQgb2JqZWN0U3RvcmVOYW1lcyAoYm9vbyksIHNvIHdlIHBvbHlmaWxsIGl0IGhlcmUuXG4gICAgaWYgKGZ1bmMgPT09IElEQkRhdGFiYXNlLnByb3RvdHlwZS50cmFuc2FjdGlvbiAmJlxuICAgICAgICAhKCdvYmplY3RTdG9yZU5hbWVzJyBpbiBJREJUcmFuc2FjdGlvbi5wcm90b3R5cGUpKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoc3RvcmVOYW1lcywgLi4uYXJncykge1xuICAgICAgICAgICAgY29uc3QgdHggPSBmdW5jLmNhbGwodW53cmFwKHRoaXMpLCBzdG9yZU5hbWVzLCAuLi5hcmdzKTtcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uU3RvcmVOYW1lc01hcC5zZXQodHgsIHN0b3JlTmFtZXMuc29ydCA/IHN0b3JlTmFtZXMuc29ydCgpIDogW3N0b3JlTmFtZXNdKTtcbiAgICAgICAgICAgIHJldHVybiB3cmFwKHR4KTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLy8gQ3Vyc29yIG1ldGhvZHMgYXJlIHNwZWNpYWwsIGFzIHRoZSBiZWhhdmlvdXIgaXMgYSBsaXR0bGUgbW9yZSBkaWZmZXJlbnQgdG8gc3RhbmRhcmQgSURCLiBJblxuICAgIC8vIElEQiwgeW91IGFkdmFuY2UgdGhlIGN1cnNvciBhbmQgd2FpdCBmb3IgYSBuZXcgJ3N1Y2Nlc3MnIG9uIHRoZSBJREJSZXF1ZXN0IHRoYXQgZ2F2ZSB5b3UgdGhlXG4gICAgLy8gY3Vyc29yLiBJdCdzIGtpbmRhIGxpa2UgYSBwcm9taXNlIHRoYXQgY2FuIHJlc29sdmUgd2l0aCBtYW55IHZhbHVlcy4gVGhhdCBkb2Vzbid0IG1ha2Ugc2Vuc2VcbiAgICAvLyB3aXRoIHJlYWwgcHJvbWlzZXMsIHNvIGVhY2ggYWR2YW5jZSBtZXRob2RzIHJldHVybnMgYSBuZXcgcHJvbWlzZSBmb3IgdGhlIGN1cnNvciBvYmplY3QsIG9yXG4gICAgLy8gdW5kZWZpbmVkIGlmIHRoZSBlbmQgb2YgdGhlIGN1cnNvciBoYXMgYmVlbiByZWFjaGVkLlxuICAgIGlmIChnZXRDdXJzb3JBZHZhbmNlTWV0aG9kcygpLmluY2x1ZGVzKGZ1bmMpKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICAgICAgLy8gQ2FsbGluZyB0aGUgb3JpZ2luYWwgZnVuY3Rpb24gd2l0aCB0aGUgcHJveHkgYXMgJ3RoaXMnIGNhdXNlcyBJTExFR0FMIElOVk9DQVRJT04sIHNvIHdlIHVzZVxuICAgICAgICAgICAgLy8gdGhlIG9yaWdpbmFsIG9iamVjdC5cbiAgICAgICAgICAgIGZ1bmMuYXBwbHkodW53cmFwKHRoaXMpLCBhcmdzKTtcbiAgICAgICAgICAgIHJldHVybiB3cmFwKGN1cnNvclJlcXVlc3RNYXAuZ2V0KHRoaXMpKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgIC8vIENhbGxpbmcgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uIHdpdGggdGhlIHByb3h5IGFzICd0aGlzJyBjYXVzZXMgSUxMRUdBTCBJTlZPQ0FUSU9OLCBzbyB3ZSB1c2VcbiAgICAgICAgLy8gdGhlIG9yaWdpbmFsIG9iamVjdC5cbiAgICAgICAgcmV0dXJuIHdyYXAoZnVuYy5hcHBseSh1bndyYXAodGhpcyksIGFyZ3MpKTtcbiAgICB9O1xufVxuZnVuY3Rpb24gdHJhbnNmb3JtQ2FjaGFibGVWYWx1ZSh2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpXG4gICAgICAgIHJldHVybiB3cmFwRnVuY3Rpb24odmFsdWUpO1xuICAgIC8vIFRoaXMgZG9lc24ndCByZXR1cm4sIGl0IGp1c3QgY3JlYXRlcyBhICdkb25lJyBwcm9taXNlIGZvciB0aGUgdHJhbnNhY3Rpb24sXG4gICAgLy8gd2hpY2ggaXMgbGF0ZXIgcmV0dXJuZWQgZm9yIHRyYW5zYWN0aW9uLmRvbmUgKHNlZSBpZGJPYmplY3RIYW5kbGVyKS5cbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBJREJUcmFuc2FjdGlvbilcbiAgICAgICAgY2FjaGVEb25lUHJvbWlzZUZvclRyYW5zYWN0aW9uKHZhbHVlKTtcbiAgICBpZiAoaW5zdGFuY2VPZkFueSh2YWx1ZSwgZ2V0SWRiUHJveHlhYmxlVHlwZXMoKSkpXG4gICAgICAgIHJldHVybiBuZXcgUHJveHkodmFsdWUsIGlkYlByb3h5VHJhcHMpO1xuICAgIC8vIFJldHVybiB0aGUgc2FtZSB2YWx1ZSBiYWNrIGlmIHdlJ3JlIG5vdCBnb2luZyB0byB0cmFuc2Zvcm0gaXQuXG4gICAgcmV0dXJuIHZhbHVlO1xufVxuZnVuY3Rpb24gd3JhcCh2YWx1ZSkge1xuICAgIC8vIFdlIHNvbWV0aW1lcyBnZW5lcmF0ZSBtdWx0aXBsZSBwcm9taXNlcyBmcm9tIGEgc2luZ2xlIElEQlJlcXVlc3QgKGVnIHdoZW4gY3Vyc29yaW5nKSwgYmVjYXVzZVxuICAgIC8vIElEQiBpcyB3ZWlyZCBhbmQgYSBzaW5nbGUgSURCUmVxdWVzdCBjYW4geWllbGQgbWFueSByZXNwb25zZXMsIHNvIHRoZXNlIGNhbid0IGJlIGNhY2hlZC5cbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBJREJSZXF1ZXN0KVxuICAgICAgICByZXR1cm4gcHJvbWlzaWZ5UmVxdWVzdCh2YWx1ZSk7XG4gICAgLy8gSWYgd2UndmUgYWxyZWFkeSB0cmFuc2Zvcm1lZCB0aGlzIHZhbHVlIGJlZm9yZSwgcmV1c2UgdGhlIHRyYW5zZm9ybWVkIHZhbHVlLlxuICAgIC8vIFRoaXMgaXMgZmFzdGVyLCBidXQgaXQgYWxzbyBwcm92aWRlcyBvYmplY3QgZXF1YWxpdHkuXG4gICAgaWYgKHRyYW5zZm9ybUNhY2hlLmhhcyh2YWx1ZSkpXG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm1DYWNoZS5nZXQodmFsdWUpO1xuICAgIGNvbnN0IG5ld1ZhbHVlID0gdHJhbnNmb3JtQ2FjaGFibGVWYWx1ZSh2YWx1ZSk7XG4gICAgLy8gTm90IGFsbCB0eXBlcyBhcmUgdHJhbnNmb3JtZWQuXG4gICAgLy8gVGhlc2UgbWF5IGJlIHByaW1pdGl2ZSB0eXBlcywgc28gdGhleSBjYW4ndCBiZSBXZWFrTWFwIGtleXMuXG4gICAgaWYgKG5ld1ZhbHVlICE9PSB2YWx1ZSkge1xuICAgICAgICB0cmFuc2Zvcm1DYWNoZS5zZXQodmFsdWUsIG5ld1ZhbHVlKTtcbiAgICAgICAgcmV2ZXJzZVRyYW5zZm9ybUNhY2hlLnNldChuZXdWYWx1ZSwgdmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3VmFsdWU7XG59XG5jb25zdCB1bndyYXAgPSAodmFsdWUpID0+IHJldmVyc2VUcmFuc2Zvcm1DYWNoZS5nZXQodmFsdWUpO1xuXG5leHBvcnQgeyByZXZlcnNlVHJhbnNmb3JtQ2FjaGUgYXMgYSwgaW5zdGFuY2VPZkFueSBhcyBpLCByZXBsYWNlVHJhcHMgYXMgciwgdW53cmFwIGFzIHUsIHdyYXAgYXMgdyB9O1xuIiwiaW1wb3J0IHsgdyBhcyB3cmFwLCByIGFzIHJlcGxhY2VUcmFwcyB9IGZyb20gJy4vd3JhcC1pZGItdmFsdWUuanMnO1xuZXhwb3J0IHsgdSBhcyB1bndyYXAsIHcgYXMgd3JhcCB9IGZyb20gJy4vd3JhcC1pZGItdmFsdWUuanMnO1xuXG4vKipcbiAqIE9wZW4gYSBkYXRhYmFzZS5cbiAqXG4gKiBAcGFyYW0gbmFtZSBOYW1lIG9mIHRoZSBkYXRhYmFzZS5cbiAqIEBwYXJhbSB2ZXJzaW9uIFNjaGVtYSB2ZXJzaW9uLlxuICogQHBhcmFtIGNhbGxiYWNrcyBBZGRpdGlvbmFsIGNhbGxiYWNrcy5cbiAqL1xuZnVuY3Rpb24gb3BlbkRCKG5hbWUsIHZlcnNpb24sIHsgYmxvY2tlZCwgdXBncmFkZSwgYmxvY2tpbmcsIHRlcm1pbmF0ZWQgfSA9IHt9KSB7XG4gICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKG5hbWUsIHZlcnNpb24pO1xuICAgIGNvbnN0IG9wZW5Qcm9taXNlID0gd3JhcChyZXF1ZXN0KTtcbiAgICBpZiAodXBncmFkZSkge1xuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3VwZ3JhZGVuZWVkZWQnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHVwZ3JhZGUod3JhcChyZXF1ZXN0LnJlc3VsdCksIGV2ZW50Lm9sZFZlcnNpb24sIGV2ZW50Lm5ld1ZlcnNpb24sIHdyYXAocmVxdWVzdC50cmFuc2FjdGlvbiksIGV2ZW50KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChibG9ja2VkKSB7XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignYmxvY2tlZCcsIChldmVudCkgPT4gYmxvY2tlZChcbiAgICAgICAgLy8gQ2FzdGluZyBkdWUgdG8gaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0LURPTS1saWItZ2VuZXJhdG9yL3B1bGwvMTQwNVxuICAgICAgICBldmVudC5vbGRWZXJzaW9uLCBldmVudC5uZXdWZXJzaW9uLCBldmVudCkpO1xuICAgIH1cbiAgICBvcGVuUHJvbWlzZVxuICAgICAgICAudGhlbigoZGIpID0+IHtcbiAgICAgICAgaWYgKHRlcm1pbmF0ZWQpXG4gICAgICAgICAgICBkYi5hZGRFdmVudExpc3RlbmVyKCdjbG9zZScsICgpID0+IHRlcm1pbmF0ZWQoKSk7XG4gICAgICAgIGlmIChibG9ja2luZykge1xuICAgICAgICAgICAgZGIuYWRkRXZlbnRMaXN0ZW5lcigndmVyc2lvbmNoYW5nZScsIChldmVudCkgPT4gYmxvY2tpbmcoZXZlbnQub2xkVmVyc2lvbiwgZXZlbnQubmV3VmVyc2lvbiwgZXZlbnQpKTtcbiAgICAgICAgfVxuICAgIH0pXG4gICAgICAgIC5jYXRjaCgoKSA9PiB7IH0pO1xuICAgIHJldHVybiBvcGVuUHJvbWlzZTtcbn1cbi8qKlxuICogRGVsZXRlIGEgZGF0YWJhc2UuXG4gKlxuICogQHBhcmFtIG5hbWUgTmFtZSBvZiB0aGUgZGF0YWJhc2UuXG4gKi9cbmZ1bmN0aW9uIGRlbGV0ZURCKG5hbWUsIHsgYmxvY2tlZCB9ID0ge30pIHtcbiAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKG5hbWUpO1xuICAgIGlmIChibG9ja2VkKSB7XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignYmxvY2tlZCcsIChldmVudCkgPT4gYmxvY2tlZChcbiAgICAgICAgLy8gQ2FzdGluZyBkdWUgdG8gaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0LURPTS1saWItZ2VuZXJhdG9yL3B1bGwvMTQwNVxuICAgICAgICBldmVudC5vbGRWZXJzaW9uLCBldmVudCkpO1xuICAgIH1cbiAgICByZXR1cm4gd3JhcChyZXF1ZXN0KS50aGVuKCgpID0+IHVuZGVmaW5lZCk7XG59XG5cbmNvbnN0IHJlYWRNZXRob2RzID0gWydnZXQnLCAnZ2V0S2V5JywgJ2dldEFsbCcsICdnZXRBbGxLZXlzJywgJ2NvdW50J107XG5jb25zdCB3cml0ZU1ldGhvZHMgPSBbJ3B1dCcsICdhZGQnLCAnZGVsZXRlJywgJ2NsZWFyJ107XG5jb25zdCBjYWNoZWRNZXRob2RzID0gbmV3IE1hcCgpO1xuZnVuY3Rpb24gZ2V0TWV0aG9kKHRhcmdldCwgcHJvcCkge1xuICAgIGlmICghKHRhcmdldCBpbnN0YW5jZW9mIElEQkRhdGFiYXNlICYmXG4gICAgICAgICEocHJvcCBpbiB0YXJnZXQpICYmXG4gICAgICAgIHR5cGVvZiBwcm9wID09PSAnc3RyaW5nJykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoY2FjaGVkTWV0aG9kcy5nZXQocHJvcCkpXG4gICAgICAgIHJldHVybiBjYWNoZWRNZXRob2RzLmdldChwcm9wKTtcbiAgICBjb25zdCB0YXJnZXRGdW5jTmFtZSA9IHByb3AucmVwbGFjZSgvRnJvbUluZGV4JC8sICcnKTtcbiAgICBjb25zdCB1c2VJbmRleCA9IHByb3AgIT09IHRhcmdldEZ1bmNOYW1lO1xuICAgIGNvbnN0IGlzV3JpdGUgPSB3cml0ZU1ldGhvZHMuaW5jbHVkZXModGFyZ2V0RnVuY05hbWUpO1xuICAgIGlmIChcbiAgICAvLyBCYWlsIGlmIHRoZSB0YXJnZXQgZG9lc24ndCBleGlzdCBvbiB0aGUgdGFyZ2V0LiBFZywgZ2V0QWxsIGlzbid0IGluIEVkZ2UuXG4gICAgISh0YXJnZXRGdW5jTmFtZSBpbiAodXNlSW5kZXggPyBJREJJbmRleCA6IElEQk9iamVjdFN0b3JlKS5wcm90b3R5cGUpIHx8XG4gICAgICAgICEoaXNXcml0ZSB8fCByZWFkTWV0aG9kcy5pbmNsdWRlcyh0YXJnZXRGdW5jTmFtZSkpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbWV0aG9kID0gYXN5bmMgZnVuY3Rpb24gKHN0b3JlTmFtZSwgLi4uYXJncykge1xuICAgICAgICAvLyBpc1dyaXRlID8gJ3JlYWR3cml0ZScgOiB1bmRlZmluZWQgZ3ppcHBzIGJldHRlciwgYnV0IGZhaWxzIGluIEVkZ2UgOihcbiAgICAgICAgY29uc3QgdHggPSB0aGlzLnRyYW5zYWN0aW9uKHN0b3JlTmFtZSwgaXNXcml0ZSA/ICdyZWFkd3JpdGUnIDogJ3JlYWRvbmx5Jyk7XG4gICAgICAgIGxldCB0YXJnZXQgPSB0eC5zdG9yZTtcbiAgICAgICAgaWYgKHVzZUluZGV4KVxuICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0LmluZGV4KGFyZ3Muc2hpZnQoKSk7XG4gICAgICAgIC8vIE11c3QgcmVqZWN0IGlmIG9wIHJlamVjdHMuXG4gICAgICAgIC8vIElmIGl0J3MgYSB3cml0ZSBvcGVyYXRpb24sIG11c3QgcmVqZWN0IGlmIHR4LmRvbmUgcmVqZWN0cy5cbiAgICAgICAgLy8gTXVzdCByZWplY3Qgd2l0aCBvcCByZWplY3Rpb24gZmlyc3QuXG4gICAgICAgIC8vIE11c3QgcmVzb2x2ZSB3aXRoIG9wIHZhbHVlLlxuICAgICAgICAvLyBNdXN0IGhhbmRsZSBib3RoIHByb21pc2VzIChubyB1bmhhbmRsZWQgcmVqZWN0aW9ucylcbiAgICAgICAgcmV0dXJuIChhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICB0YXJnZXRbdGFyZ2V0RnVuY05hbWVdKC4uLmFyZ3MpLFxuICAgICAgICAgICAgaXNXcml0ZSAmJiB0eC5kb25lLFxuICAgICAgICBdKSlbMF07XG4gICAgfTtcbiAgICBjYWNoZWRNZXRob2RzLnNldChwcm9wLCBtZXRob2QpO1xuICAgIHJldHVybiBtZXRob2Q7XG59XG5yZXBsYWNlVHJhcHMoKG9sZFRyYXBzKSA9PiAoe1xuICAgIC4uLm9sZFRyYXBzLFxuICAgIGdldDogKHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpID0+IGdldE1ldGhvZCh0YXJnZXQsIHByb3ApIHx8IG9sZFRyYXBzLmdldCh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSxcbiAgICBoYXM6ICh0YXJnZXQsIHByb3ApID0+ICEhZ2V0TWV0aG9kKHRhcmdldCwgcHJvcCkgfHwgb2xkVHJhcHMuaGFzKHRhcmdldCwgcHJvcCksXG59KSk7XG5cbmV4cG9ydCB7IGRlbGV0ZURCLCBvcGVuREIgfTtcbiIsImltcG9ydCB7IENvbXBvbmVudCwgQ29tcG9uZW50Q29udGFpbmVyIH0gZnJvbSAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5pbXBvcnQgeyBMb2dnZXIsIHNldFVzZXJMb2dIYW5kbGVyLCBzZXRMb2dMZXZlbCBhcyBzZXRMb2dMZXZlbCQxIH0gZnJvbSAnQGZpcmViYXNlL2xvZ2dlcic7XG5pbXBvcnQgeyBFcnJvckZhY3RvcnksIGdldERlZmF1bHRBcHBDb25maWcsIGRlZXBFcXVhbCwgaXNCcm93c2VyLCBpc1dlYldvcmtlciwgRmlyZWJhc2VFcnJvciwgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcsIGlzSW5kZXhlZERCQXZhaWxhYmxlLCB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuZXhwb3J0IHsgRmlyZWJhc2VFcnJvciB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IG9wZW5EQiB9IGZyb20gJ2lkYic7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jbGFzcyBQbGF0Zm9ybUxvZ2dlclNlcnZpY2VJbXBsIHtcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXIpIHtcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgfVxuICAgIC8vIEluIGluaXRpYWwgaW1wbGVtZW50YXRpb24sIHRoaXMgd2lsbCBiZSBjYWxsZWQgYnkgaW5zdGFsbGF0aW9ucyBvblxuICAgIC8vIGF1dGggdG9rZW4gcmVmcmVzaCwgYW5kIGluc3RhbGxhdGlvbnMgd2lsbCBzZW5kIHRoaXMgc3RyaW5nLlxuICAgIGdldFBsYXRmb3JtSW5mb1N0cmluZygpIHtcbiAgICAgICAgY29uc3QgcHJvdmlkZXJzID0gdGhpcy5jb250YWluZXIuZ2V0UHJvdmlkZXJzKCk7XG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBwcm92aWRlcnMgYW5kIGdldCBsaWJyYXJ5L3ZlcnNpb24gcGFpcnMgZnJvbSBhbnkgdGhhdCBhcmVcbiAgICAgICAgLy8gdmVyc2lvbiBjb21wb25lbnRzLlxuICAgICAgICByZXR1cm4gcHJvdmlkZXJzXG4gICAgICAgICAgICAubWFwKHByb3ZpZGVyID0+IHtcbiAgICAgICAgICAgIGlmIChpc1ZlcnNpb25TZXJ2aWNlUHJvdmlkZXIocHJvdmlkZXIpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VydmljZSA9IHByb3ZpZGVyLmdldEltbWVkaWF0ZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBgJHtzZXJ2aWNlLmxpYnJhcnl9LyR7c2VydmljZS52ZXJzaW9ufWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5maWx0ZXIobG9nU3RyaW5nID0+IGxvZ1N0cmluZylcbiAgICAgICAgICAgIC5qb2luKCcgJyk7XG4gICAgfVxufVxuLyoqXG4gKlxuICogQHBhcmFtIHByb3ZpZGVyIGNoZWNrIGlmIHRoaXMgcHJvdmlkZXIgcHJvdmlkZXMgYSBWZXJzaW9uU2VydmljZVxuICpcbiAqIE5PVEU6IFVzaW5nIFByb3ZpZGVyPCdhcHAtdmVyc2lvbic+IGlzIGEgaGFjayB0byBpbmRpY2F0ZSB0aGF0IHRoZSBwcm92aWRlclxuICogcHJvdmlkZXMgVmVyc2lvblNlcnZpY2UuIFRoZSBwcm92aWRlciBpcyBub3QgbmVjZXNzYXJpbHkgYSAnYXBwLXZlcnNpb24nXG4gKiBwcm92aWRlci5cbiAqL1xuZnVuY3Rpb24gaXNWZXJzaW9uU2VydmljZVByb3ZpZGVyKHByb3ZpZGVyKSB7XG4gICAgY29uc3QgY29tcG9uZW50ID0gcHJvdmlkZXIuZ2V0Q29tcG9uZW50KCk7XG4gICAgcmV0dXJuIChjb21wb25lbnQgPT09IG51bGwgfHwgY29tcG9uZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb21wb25lbnQudHlwZSkgPT09IFwiVkVSU0lPTlwiIC8qIENvbXBvbmVudFR5cGUuVkVSU0lPTiAqLztcbn1cblxuY29uc3QgbmFtZSRxID0gXCJAZmlyZWJhc2UvYXBwXCI7XG5jb25zdCB2ZXJzaW9uJDEgPSBcIjAuMTAuMTZcIjtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNvbnN0IGxvZ2dlciA9IG5ldyBMb2dnZXIoJ0BmaXJlYmFzZS9hcHAnKTtcblxuY29uc3QgbmFtZSRwID0gXCJAZmlyZWJhc2UvYXBwLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJG8gPSBcIkBmaXJlYmFzZS9hbmFseXRpY3MtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkbiA9IFwiQGZpcmViYXNlL2FuYWx5dGljc1wiO1xuXG5jb25zdCBuYW1lJG0gPSBcIkBmaXJlYmFzZS9hcHAtY2hlY2stY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkbCA9IFwiQGZpcmViYXNlL2FwcC1jaGVja1wiO1xuXG5jb25zdCBuYW1lJGsgPSBcIkBmaXJlYmFzZS9hdXRoXCI7XG5cbmNvbnN0IG5hbWUkaiA9IFwiQGZpcmViYXNlL2F1dGgtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkaSA9IFwiQGZpcmViYXNlL2RhdGFiYXNlXCI7XG5cbmNvbnN0IG5hbWUkaCA9IFwiQGZpcmViYXNlL2RhdGEtY29ubmVjdFwiO1xuXG5jb25zdCBuYW1lJGcgPSBcIkBmaXJlYmFzZS9kYXRhYmFzZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRmID0gXCJAZmlyZWJhc2UvZnVuY3Rpb25zXCI7XG5cbmNvbnN0IG5hbWUkZSA9IFwiQGZpcmViYXNlL2Z1bmN0aW9ucy1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRkID0gXCJAZmlyZWJhc2UvaW5zdGFsbGF0aW9uc1wiO1xuXG5jb25zdCBuYW1lJGMgPSBcIkBmaXJlYmFzZS9pbnN0YWxsYXRpb25zLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGIgPSBcIkBmaXJlYmFzZS9tZXNzYWdpbmdcIjtcblxuY29uc3QgbmFtZSRhID0gXCJAZmlyZWJhc2UvbWVzc2FnaW5nLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDkgPSBcIkBmaXJlYmFzZS9wZXJmb3JtYW5jZVwiO1xuXG5jb25zdCBuYW1lJDggPSBcIkBmaXJlYmFzZS9wZXJmb3JtYW5jZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSQ3ID0gXCJAZmlyZWJhc2UvcmVtb3RlLWNvbmZpZ1wiO1xuXG5jb25zdCBuYW1lJDYgPSBcIkBmaXJlYmFzZS9yZW1vdGUtY29uZmlnLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDUgPSBcIkBmaXJlYmFzZS9zdG9yYWdlXCI7XG5cbmNvbnN0IG5hbWUkNCA9IFwiQGZpcmViYXNlL3N0b3JhZ2UtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkMyA9IFwiQGZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuXG5jb25zdCBuYW1lJDIgPSBcIkBmaXJlYmFzZS92ZXJ0ZXhhaVwiO1xuXG5jb25zdCBuYW1lJDEgPSBcIkBmaXJlYmFzZS9maXJlc3RvcmUtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUgPSBcImZpcmViYXNlXCI7XG5jb25zdCB2ZXJzaW9uID0gXCIxMS4wLjJcIjtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVGhlIGRlZmF1bHQgYXBwIG5hbWVcbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuY29uc3QgREVGQVVMVF9FTlRSWV9OQU1FID0gJ1tERUZBVUxUXSc7XG5jb25zdCBQTEFURk9STV9MT0dfU1RSSU5HID0ge1xuICAgIFtuYW1lJHFdOiAnZmlyZS1jb3JlJyxcbiAgICBbbmFtZSRwXTogJ2ZpcmUtY29yZS1jb21wYXQnLFxuICAgIFtuYW1lJG5dOiAnZmlyZS1hbmFseXRpY3MnLFxuICAgIFtuYW1lJG9dOiAnZmlyZS1hbmFseXRpY3MtY29tcGF0JyxcbiAgICBbbmFtZSRsXTogJ2ZpcmUtYXBwLWNoZWNrJyxcbiAgICBbbmFtZSRtXTogJ2ZpcmUtYXBwLWNoZWNrLWNvbXBhdCcsXG4gICAgW25hbWUka106ICdmaXJlLWF1dGgnLFxuICAgIFtuYW1lJGpdOiAnZmlyZS1hdXRoLWNvbXBhdCcsXG4gICAgW25hbWUkaV06ICdmaXJlLXJ0ZGInLFxuICAgIFtuYW1lJGhdOiAnZmlyZS1kYXRhLWNvbm5lY3QnLFxuICAgIFtuYW1lJGddOiAnZmlyZS1ydGRiLWNvbXBhdCcsXG4gICAgW25hbWUkZl06ICdmaXJlLWZuJyxcbiAgICBbbmFtZSRlXTogJ2ZpcmUtZm4tY29tcGF0JyxcbiAgICBbbmFtZSRkXTogJ2ZpcmUtaWlkJyxcbiAgICBbbmFtZSRjXTogJ2ZpcmUtaWlkLWNvbXBhdCcsXG4gICAgW25hbWUkYl06ICdmaXJlLWZjbScsXG4gICAgW25hbWUkYV06ICdmaXJlLWZjbS1jb21wYXQnLFxuICAgIFtuYW1lJDldOiAnZmlyZS1wZXJmJyxcbiAgICBbbmFtZSQ4XTogJ2ZpcmUtcGVyZi1jb21wYXQnLFxuICAgIFtuYW1lJDddOiAnZmlyZS1yYycsXG4gICAgW25hbWUkNl06ICdmaXJlLXJjLWNvbXBhdCcsXG4gICAgW25hbWUkNV06ICdmaXJlLWdjcycsXG4gICAgW25hbWUkNF06ICdmaXJlLWdjcy1jb21wYXQnLFxuICAgIFtuYW1lJDNdOiAnZmlyZS1mc3QnLFxuICAgIFtuYW1lJDFdOiAnZmlyZS1mc3QtY29tcGF0JyxcbiAgICBbbmFtZSQyXTogJ2ZpcmUtdmVydGV4JyxcbiAgICAnZmlyZS1qcyc6ICdmaXJlLWpzJywgLy8gUGxhdGZvcm0gaWRlbnRpZmllciBmb3IgSlMgU0RLLlxuICAgIFtuYW1lXTogJ2ZpcmUtanMtYWxsJ1xufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmNvbnN0IF9hcHBzID0gbmV3IE1hcCgpO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuY29uc3QgX3NlcnZlckFwcHMgPSBuZXcgTWFwKCk7XG4vKipcbiAqIFJlZ2lzdGVyZWQgY29tcG9uZW50cy5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmNvbnN0IF9jb21wb25lbnRzID0gbmV3IE1hcCgpO1xuLyoqXG4gKiBAcGFyYW0gY29tcG9uZW50IC0gdGhlIGNvbXBvbmVudCBiZWluZyBhZGRlZCB0byB0aGlzIGFwcCdzIGNvbnRhaW5lclxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBfYWRkQ29tcG9uZW50KGFwcCwgY29tcG9uZW50KSB7XG4gICAgdHJ5IHtcbiAgICAgICAgYXBwLmNvbnRhaW5lci5hZGRDb21wb25lbnQoY29tcG9uZW50KTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBDb21wb25lbnQgJHtjb21wb25lbnQubmFtZX0gZmFpbGVkIHRvIHJlZ2lzdGVyIHdpdGggRmlyZWJhc2VBcHAgJHthcHAubmFtZX1gLCBlKTtcbiAgICB9XG59XG4vKipcbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gX2FkZE9yT3ZlcndyaXRlQ29tcG9uZW50KGFwcCwgY29tcG9uZW50KSB7XG4gICAgYXBwLmNvbnRhaW5lci5hZGRPck92ZXJ3cml0ZUNvbXBvbmVudChjb21wb25lbnQpO1xufVxuLyoqXG4gKlxuICogQHBhcmFtIGNvbXBvbmVudCAtIHRoZSBjb21wb25lbnQgdG8gcmVnaXN0ZXJcbiAqIEByZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSBjb21wb25lbnQgaXMgcmVnaXN0ZXJlZCBzdWNjZXNzZnVsbHlcbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gX3JlZ2lzdGVyQ29tcG9uZW50KGNvbXBvbmVudCkge1xuICAgIGNvbnN0IGNvbXBvbmVudE5hbWUgPSBjb21wb25lbnQubmFtZTtcbiAgICBpZiAoX2NvbXBvbmVudHMuaGFzKGNvbXBvbmVudE5hbWUpKSB7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgVGhlcmUgd2VyZSBtdWx0aXBsZSBhdHRlbXB0cyB0byByZWdpc3RlciBjb21wb25lbnQgJHtjb21wb25lbnROYW1lfS5gKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBfY29tcG9uZW50cy5zZXQoY29tcG9uZW50TmFtZSwgY29tcG9uZW50KTtcbiAgICAvLyBhZGQgdGhlIGNvbXBvbmVudCB0byBleGlzdGluZyBhcHAgaW5zdGFuY2VzXG4gICAgZm9yIChjb25zdCBhcHAgb2YgX2FwcHMudmFsdWVzKCkpIHtcbiAgICAgICAgX2FkZENvbXBvbmVudChhcHAsIGNvbXBvbmVudCk7XG4gICAgfVxuICAgIGZvciAoY29uc3Qgc2VydmVyQXBwIG9mIF9zZXJ2ZXJBcHBzLnZhbHVlcygpKSB7XG4gICAgICAgIF9hZGRDb21wb25lbnQoc2VydmVyQXBwLCBjb21wb25lbnQpO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuICpcbiAqIEBwYXJhbSBhcHAgLSBGaXJlYmFzZUFwcCBpbnN0YW5jZVxuICogQHBhcmFtIG5hbWUgLSBzZXJ2aWNlIG5hbWVcbiAqXG4gKiBAcmV0dXJucyB0aGUgcHJvdmlkZXIgZm9yIHRoZSBzZXJ2aWNlIHdpdGggdGhlIG1hdGNoaW5nIG5hbWVcbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gX2dldFByb3ZpZGVyKGFwcCwgbmFtZSkge1xuICAgIGNvbnN0IGhlYXJ0YmVhdENvbnRyb2xsZXIgPSBhcHAuY29udGFpbmVyXG4gICAgICAgIC5nZXRQcm92aWRlcignaGVhcnRiZWF0JylcbiAgICAgICAgLmdldEltbWVkaWF0ZSh7IG9wdGlvbmFsOiB0cnVlIH0pO1xuICAgIGlmIChoZWFydGJlYXRDb250cm9sbGVyKSB7XG4gICAgICAgIHZvaWQgaGVhcnRiZWF0Q29udHJvbGxlci50cmlnZ2VySGVhcnRiZWF0KCk7XG4gICAgfVxuICAgIHJldHVybiBhcHAuY29udGFpbmVyLmdldFByb3ZpZGVyKG5hbWUpO1xufVxuLyoqXG4gKlxuICogQHBhcmFtIGFwcCAtIEZpcmViYXNlQXBwIGluc3RhbmNlXG4gKiBAcGFyYW0gbmFtZSAtIHNlcnZpY2UgbmFtZVxuICogQHBhcmFtIGluc3RhbmNlSWRlbnRpZmllciAtIHNlcnZpY2UgaW5zdGFuY2UgaWRlbnRpZmllciBpbiBjYXNlIHRoZSBzZXJ2aWNlIHN1cHBvcnRzIG11bHRpcGxlIGluc3RhbmNlc1xuICpcbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBfcmVtb3ZlU2VydmljZUluc3RhbmNlKGFwcCwgbmFtZSwgaW5zdGFuY2VJZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XG4gICAgX2dldFByb3ZpZGVyKGFwcCwgbmFtZSkuY2xlYXJJbnN0YW5jZShpbnN0YW5jZUlkZW50aWZpZXIpO1xufVxuLyoqXG4gKlxuICogQHBhcmFtIG9iaiAtIGFuIG9iamVjdCBvZiB0eXBlIEZpcmViYXNlQXBwIG9yIEZpcmViYXNlT3B0aW9ucy5cbiAqXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBwcm92aWRlIG9iamVjdCBpcyBvZiB0eXBlIEZpcmViYXNlQXBwLlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBfaXNGaXJlYmFzZUFwcChvYmopIHtcbiAgICByZXR1cm4gb2JqLm9wdGlvbnMgIT09IHVuZGVmaW5lZDtcbn1cbi8qKlxuICpcbiAqIEBwYXJhbSBvYmogLSBhbiBvYmplY3Qgb2YgdHlwZSBGaXJlYmFzZUFwcC5cbiAqXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBwcm92aWRlZCBvYmplY3QgaXMgb2YgdHlwZSBGaXJlYmFzZVNlcnZlckFwcEltcGwuXG4gKlxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIF9pc0ZpcmViYXNlU2VydmVyQXBwKG9iaikge1xuICAgIHJldHVybiBvYmouc2V0dGluZ3MgIT09IHVuZGVmaW5lZDtcbn1cbi8qKlxuICogVGVzdCBvbmx5XG4gKlxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIF9jbGVhckNvbXBvbmVudHMoKSB7XG4gICAgX2NvbXBvbmVudHMuY2xlYXIoKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNvbnN0IEVSUk9SUyA9IHtcbiAgICBbXCJuby1hcHBcIiAvKiBBcHBFcnJvci5OT19BUFAgKi9dOiBcIk5vIEZpcmViYXNlIEFwcCAneyRhcHBOYW1lfScgaGFzIGJlZW4gY3JlYXRlZCAtIFwiICtcbiAgICAgICAgJ2NhbGwgaW5pdGlhbGl6ZUFwcCgpIGZpcnN0JyxcbiAgICBbXCJiYWQtYXBwLW5hbWVcIiAvKiBBcHBFcnJvci5CQURfQVBQX05BTUUgKi9dOiBcIklsbGVnYWwgQXBwIG5hbWU6ICd7JGFwcE5hbWV9J1wiLFxuICAgIFtcImR1cGxpY2F0ZS1hcHBcIiAvKiBBcHBFcnJvci5EVVBMSUNBVEVfQVBQICovXTogXCJGaXJlYmFzZSBBcHAgbmFtZWQgJ3skYXBwTmFtZX0nIGFscmVhZHkgZXhpc3RzIHdpdGggZGlmZmVyZW50IG9wdGlvbnMgb3IgY29uZmlnXCIsXG4gICAgW1wiYXBwLWRlbGV0ZWRcIiAvKiBBcHBFcnJvci5BUFBfREVMRVRFRCAqL106IFwiRmlyZWJhc2UgQXBwIG5hbWVkICd7JGFwcE5hbWV9JyBhbHJlYWR5IGRlbGV0ZWRcIixcbiAgICBbXCJzZXJ2ZXItYXBwLWRlbGV0ZWRcIiAvKiBBcHBFcnJvci5TRVJWRVJfQVBQX0RFTEVURUQgKi9dOiAnRmlyZWJhc2UgU2VydmVyIEFwcCBoYXMgYmVlbiBkZWxldGVkJyxcbiAgICBbXCJuby1vcHRpb25zXCIgLyogQXBwRXJyb3IuTk9fT1BUSU9OUyAqL106ICdOZWVkIHRvIHByb3ZpZGUgb3B0aW9ucywgd2hlbiBub3QgYmVpbmcgZGVwbG95ZWQgdG8gaG9zdGluZyB2aWEgc291cmNlLicsXG4gICAgW1wiaW52YWxpZC1hcHAtYXJndW1lbnRcIiAvKiBBcHBFcnJvci5JTlZBTElEX0FQUF9BUkdVTUVOVCAqL106ICdmaXJlYmFzZS57JGFwcE5hbWV9KCkgdGFrZXMgZWl0aGVyIG5vIGFyZ3VtZW50IG9yIGEgJyArXG4gICAgICAgICdGaXJlYmFzZSBBcHAgaW5zdGFuY2UuJyxcbiAgICBbXCJpbnZhbGlkLWxvZy1hcmd1bWVudFwiIC8qIEFwcEVycm9yLklOVkFMSURfTE9HX0FSR1VNRU5UICovXTogJ0ZpcnN0IGFyZ3VtZW50IHRvIGBvbkxvZ2AgbXVzdCBiZSBudWxsIG9yIGEgZnVuY3Rpb24uJyxcbiAgICBbXCJpZGItb3BlblwiIC8qIEFwcEVycm9yLklEQl9PUEVOICovXTogJ0Vycm9yIHRocm93biB3aGVuIG9wZW5pbmcgSW5kZXhlZERCLiBPcmlnaW5hbCBlcnJvcjogeyRvcmlnaW5hbEVycm9yTWVzc2FnZX0uJyxcbiAgICBbXCJpZGItZ2V0XCIgLyogQXBwRXJyb3IuSURCX0dFVCAqL106ICdFcnJvciB0aHJvd24gd2hlbiByZWFkaW5nIGZyb20gSW5kZXhlZERCLiBPcmlnaW5hbCBlcnJvcjogeyRvcmlnaW5hbEVycm9yTWVzc2FnZX0uJyxcbiAgICBbXCJpZGItc2V0XCIgLyogQXBwRXJyb3IuSURCX1dSSVRFICovXTogJ0Vycm9yIHRocm93biB3aGVuIHdyaXRpbmcgdG8gSW5kZXhlZERCLiBPcmlnaW5hbCBlcnJvcjogeyRvcmlnaW5hbEVycm9yTWVzc2FnZX0uJyxcbiAgICBbXCJpZGItZGVsZXRlXCIgLyogQXBwRXJyb3IuSURCX0RFTEVURSAqL106ICdFcnJvciB0aHJvd24gd2hlbiBkZWxldGluZyBmcm9tIEluZGV4ZWREQi4gT3JpZ2luYWwgZXJyb3I6IHskb3JpZ2luYWxFcnJvck1lc3NhZ2V9LicsXG4gICAgW1wiZmluYWxpemF0aW9uLXJlZ2lzdHJ5LW5vdC1zdXBwb3J0ZWRcIiAvKiBBcHBFcnJvci5GSU5BTElaQVRJT05fUkVHSVNUUllfTk9UX1NVUFBPUlRFRCAqL106ICdGaXJlYmFzZVNlcnZlckFwcCBkZWxldGVPbkRlcmVmIGZpZWxkIGRlZmluZWQgYnV0IHRoZSBKUyBydW50aW1lIGRvZXMgbm90IHN1cHBvcnQgRmluYWxpemF0aW9uUmVnaXN0cnkuJyxcbiAgICBbXCJpbnZhbGlkLXNlcnZlci1hcHAtZW52aXJvbm1lbnRcIiAvKiBBcHBFcnJvci5JTlZBTElEX1NFUlZFUl9BUFBfRU5WSVJPTk1FTlQgKi9dOiAnRmlyZWJhc2VTZXJ2ZXJBcHAgaXMgbm90IGZvciB1c2UgaW4gYnJvd3NlciBlbnZpcm9ubWVudHMuJ1xufTtcbmNvbnN0IEVSUk9SX0ZBQ1RPUlkgPSBuZXcgRXJyb3JGYWN0b3J5KCdhcHAnLCAnRmlyZWJhc2UnLCBFUlJPUlMpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY2xhc3MgRmlyZWJhc2VBcHBJbXBsIHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zLCBjb25maWcsIGNvbnRhaW5lcikge1xuICAgICAgICB0aGlzLl9pc0RlbGV0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLl9jb25maWcgPSBPYmplY3QuYXNzaWduKHt9LCBjb25maWcpO1xuICAgICAgICB0aGlzLl9uYW1lID0gY29uZmlnLm5hbWU7XG4gICAgICAgIHRoaXMuX2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCA9XG4gICAgICAgICAgICBjb25maWcuYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkO1xuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFkZENvbXBvbmVudChuZXcgQ29tcG9uZW50KCdhcHAnLCAoKSA9PiB0aGlzLCBcIlBVQkxJQ1wiIC8qIENvbXBvbmVudFR5cGUuUFVCTElDICovKSk7XG4gICAgfVxuICAgIGdldCBhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQoKSB7XG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZDtcbiAgICB9XG4gICAgc2V0IGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCh2YWwpIHtcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xuICAgICAgICB0aGlzLl9hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQgPSB2YWw7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9uYW1lO1xuICAgIH1cbiAgICBnZXQgb3B0aW9ucygpIHtcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5fb3B0aW9ucztcbiAgICB9XG4gICAgZ2V0IGNvbmZpZygpIHtcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5fY29uZmlnO1xuICAgIH1cbiAgICBnZXQgY29udGFpbmVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29udGFpbmVyO1xuICAgIH1cbiAgICBnZXQgaXNEZWxldGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNEZWxldGVkO1xuICAgIH1cbiAgICBzZXQgaXNEZWxldGVkKHZhbCkge1xuICAgICAgICB0aGlzLl9pc0RlbGV0ZWQgPSB2YWw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gd2lsbCB0aHJvdyBhbiBFcnJvciBpZiB0aGUgQXBwIGhhcyBhbHJlYWR5IGJlZW4gZGVsZXRlZCAtXG4gICAgICogdXNlIGJlZm9yZSBwZXJmb3JtaW5nIEFQSSBhY3Rpb25zIG9uIHRoZSBBcHAuXG4gICAgICovXG4gICAgY2hlY2tEZXN0cm95ZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRGVsZXRlZCkge1xuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJhcHAtZGVsZXRlZFwiIC8qIEFwcEVycm9yLkFQUF9ERUxFVEVEICovLCB7IGFwcE5hbWU6IHRoaXMuX25hbWUgfSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jbGFzcyBGaXJlYmFzZVNlcnZlckFwcEltcGwgZXh0ZW5kcyBGaXJlYmFzZUFwcEltcGwge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMsIHNlcnZlckNvbmZpZywgbmFtZSwgY29udGFpbmVyKSB7XG4gICAgICAgIC8vIEJ1aWxkIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVycyBmb3IgdGhlIEZpcmViYXNlQXBwSW1wbCBiYXNlIGNsYXNzLlxuICAgICAgICBjb25zdCBhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQgPSBzZXJ2ZXJDb25maWcuYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gc2VydmVyQ29uZmlnLmF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZFxuICAgICAgICAgICAgOiBmYWxzZTtcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBGaXJlYmFzZUFwcFNldHRpbmdzIG9iamVjdCBmb3IgdGhlIEZpcmViYXNlQXBwSW1wIGNvbnN0cnVjdG9yLlxuICAgICAgICBjb25zdCBjb25maWcgPSB7XG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkXG4gICAgICAgIH07XG4gICAgICAgIGlmIChvcHRpb25zLmFwaUtleSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyBDb25zdHJ1Y3QgdGhlIHBhcmVudCBGaXJlYmFzZUFwcEltcCBvYmplY3QuXG4gICAgICAgICAgICBzdXBlcihvcHRpb25zLCBjb25maWcsIGNvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBhcHBJbXBsID0gb3B0aW9ucztcbiAgICAgICAgICAgIHN1cGVyKGFwcEltcGwub3B0aW9ucywgY29uZmlnLCBjb250YWluZXIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIE5vdyBjb25zdHJ1Y3QgdGhlIGRhdGEgZm9yIHRoZSBGaXJlYmFzZVNlcnZlckFwcEltcGwuXG4gICAgICAgIHRoaXMuX3NlcnZlckNvbmZpZyA9IE9iamVjdC5hc3NpZ24oeyBhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQgfSwgc2VydmVyQ29uZmlnKTtcbiAgICAgICAgdGhpcy5fZmluYWxpemF0aW9uUmVnaXN0cnkgPSBudWxsO1xuICAgICAgICBpZiAodHlwZW9mIEZpbmFsaXphdGlvblJlZ2lzdHJ5ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhpcy5fZmluYWxpemF0aW9uUmVnaXN0cnkgPSBuZXcgRmluYWxpemF0aW9uUmVnaXN0cnkoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXV0b21hdGljQ2xlYW51cCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcmVmQ291bnQgPSAwO1xuICAgICAgICB0aGlzLmluY1JlZkNvdW50KHRoaXMuX3NlcnZlckNvbmZpZy5yZWxlYXNlT25EZXJlZik7XG4gICAgICAgIC8vIERvIG5vdCByZXRhaW4gYSBoYXJkIHJlZmVyZW5jZSB0byB0aGUgZHJlZiBvYmplY3QsIG90aGVyd2lzZSB0aGUgRmluYWxpemF0aW9uUmVnaXN0cnlcbiAgICAgICAgLy8gd2lsbCBuZXZlciB0cmlnZ2VyLlxuICAgICAgICB0aGlzLl9zZXJ2ZXJDb25maWcucmVsZWFzZU9uRGVyZWYgPSB1bmRlZmluZWQ7XG4gICAgICAgIHNlcnZlckNvbmZpZy5yZWxlYXNlT25EZXJlZiA9IHVuZGVmaW5lZDtcbiAgICAgICAgcmVnaXN0ZXJWZXJzaW9uKG5hbWUkcSwgdmVyc2lvbiQxLCAnc2VydmVyYXBwJyk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgZ2V0IHJlZkNvdW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmQ291bnQ7XG4gICAgfVxuICAgIC8vIEluY3JlbWVudCB0aGUgcmVmZXJlbmNlIGNvdW50IG9mIHRoaXMgc2VydmVyIGFwcC4gSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkLCByZWdpc3RlciBpdFxuICAgIC8vIHdpdGggdGhlIGZpbmFsaXphdGlvbiByZWdpc3RyeS5cbiAgICBpbmNSZWZDb3VudChvYmopIHtcbiAgICAgICAgaWYgKHRoaXMuaXNEZWxldGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcmVmQ291bnQrKztcbiAgICAgICAgaWYgKG9iaiAhPT0gdW5kZWZpbmVkICYmIHRoaXMuX2ZpbmFsaXphdGlvblJlZ2lzdHJ5ICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLl9maW5hbGl6YXRpb25SZWdpc3RyeS5yZWdpc3RlcihvYmosIHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIERlY3JlbWVudCB0aGUgcmVmZXJlbmNlIGNvdW50LlxuICAgIGRlY1JlZkNvdW50KCkge1xuICAgICAgICBpZiAodGhpcy5pc0RlbGV0ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAtLXRoaXMuX3JlZkNvdW50O1xuICAgIH1cbiAgICAvLyBJbnZva2VkIGJ5IHRoZSBGaW5hbGl6YXRpb25SZWdpc3RyeSBjYWxsYmFjayB0byBub3RlIHRoYXQgdGhpcyBhcHAgc2hvdWxkIGdvIHRocm91Z2ggaXRzXG4gICAgLy8gcmVmZXJlbmNlIGNvdW50cyBhbmQgZGVsZXRlIGl0c2VsZiBpZiBubyByZWZlcmVuY2UgY291bnQgcmVtYWluLiBUaGUgY29vcmRpbmF0aW5nIGxvZ2ljIHRoYXRcbiAgICAvLyBoYW5kbGVzIHRoaXMgaXMgaW4gZGVsZXRlQXBwKC4uLikuXG4gICAgYXV0b21hdGljQ2xlYW51cCgpIHtcbiAgICAgICAgdm9pZCBkZWxldGVBcHAodGhpcyk7XG4gICAgfVxuICAgIGdldCBzZXR0aW5ncygpIHtcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VydmVyQ29uZmlnO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHdpbGwgdGhyb3cgYW4gRXJyb3IgaWYgdGhlIEFwcCBoYXMgYWxyZWFkeSBiZWVuIGRlbGV0ZWQgLVxuICAgICAqIHVzZSBiZWZvcmUgcGVyZm9ybWluZyBBUEkgYWN0aW9ucyBvbiB0aGUgQXBwLlxuICAgICAqL1xuICAgIGNoZWNrRGVzdHJveWVkKCkge1xuICAgICAgICBpZiAodGhpcy5pc0RlbGV0ZWQpIHtcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwic2VydmVyLWFwcC1kZWxldGVkXCIgLyogQXBwRXJyb3IuU0VSVkVSX0FQUF9ERUxFVEVEICovKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVGhlIGN1cnJlbnQgU0RLIHZlcnNpb24uXG4gKlxuICogQHB1YmxpY1xuICovXG5jb25zdCBTREtfVkVSU0lPTiA9IHZlcnNpb247XG5mdW5jdGlvbiBpbml0aWFsaXplQXBwKF9vcHRpb25zLCByYXdDb25maWcgPSB7fSkge1xuICAgIGxldCBvcHRpb25zID0gX29wdGlvbnM7XG4gICAgaWYgKHR5cGVvZiByYXdDb25maWcgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSByYXdDb25maWc7XG4gICAgICAgIHJhd0NvbmZpZyA9IHsgbmFtZSB9O1xuICAgIH1cbiAgICBjb25zdCBjb25maWcgPSBPYmplY3QuYXNzaWduKHsgbmFtZTogREVGQVVMVF9FTlRSWV9OQU1FLCBhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQ6IGZhbHNlIH0sIHJhd0NvbmZpZyk7XG4gICAgY29uc3QgbmFtZSA9IGNvbmZpZy5uYW1lO1xuICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycgfHwgIW5hbWUpIHtcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJiYWQtYXBwLW5hbWVcIiAvKiBBcHBFcnJvci5CQURfQVBQX05BTUUgKi8sIHtcbiAgICAgICAgICAgIGFwcE5hbWU6IFN0cmluZyhuYW1lKVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IGdldERlZmF1bHRBcHBDb25maWcoKSk7XG4gICAgaWYgKCFvcHRpb25zKSB7XG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibm8tb3B0aW9uc1wiIC8qIEFwcEVycm9yLk5PX09QVElPTlMgKi8pO1xuICAgIH1cbiAgICBjb25zdCBleGlzdGluZ0FwcCA9IF9hcHBzLmdldChuYW1lKTtcbiAgICBpZiAoZXhpc3RpbmdBcHApIHtcbiAgICAgICAgLy8gcmV0dXJuIHRoZSBleGlzdGluZyBhcHAgaWYgb3B0aW9ucyBhbmQgY29uZmlnIGRlZXAgZXF1YWwgdGhlIG9uZXMgaW4gdGhlIGV4aXN0aW5nIGFwcC5cbiAgICAgICAgaWYgKGRlZXBFcXVhbChvcHRpb25zLCBleGlzdGluZ0FwcC5vcHRpb25zKSAmJlxuICAgICAgICAgICAgZGVlcEVxdWFsKGNvbmZpZywgZXhpc3RpbmdBcHAuY29uZmlnKSkge1xuICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nQXBwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJkdXBsaWNhdGUtYXBwXCIgLyogQXBwRXJyb3IuRFVQTElDQVRFX0FQUCAqLywgeyBhcHBOYW1lOiBuYW1lIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGNvbnRhaW5lciA9IG5ldyBDb21wb25lbnRDb250YWluZXIobmFtZSk7XG4gICAgZm9yIChjb25zdCBjb21wb25lbnQgb2YgX2NvbXBvbmVudHMudmFsdWVzKCkpIHtcbiAgICAgICAgY29udGFpbmVyLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xuICAgIH1cbiAgICBjb25zdCBuZXdBcHAgPSBuZXcgRmlyZWJhc2VBcHBJbXBsKG9wdGlvbnMsIGNvbmZpZywgY29udGFpbmVyKTtcbiAgICBfYXBwcy5zZXQobmFtZSwgbmV3QXBwKTtcbiAgICByZXR1cm4gbmV3QXBwO1xufVxuZnVuY3Rpb24gaW5pdGlhbGl6ZVNlcnZlckFwcChfb3B0aW9ucywgX3NlcnZlckFwcENvbmZpZykge1xuICAgIGlmIChpc0Jyb3dzZXIoKSAmJiAhaXNXZWJXb3JrZXIoKSkge1xuICAgICAgICAvLyBGaXJlYmFzZVNlcnZlckFwcCBpc24ndCBkZXNpZ25lZCB0byBiZSBydW4gaW4gYnJvd3NlcnMuXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaW52YWxpZC1zZXJ2ZXItYXBwLWVudmlyb25tZW50XCIgLyogQXBwRXJyb3IuSU5WQUxJRF9TRVJWRVJfQVBQX0VOVklST05NRU5UICovKTtcbiAgICB9XG4gICAgaWYgKF9zZXJ2ZXJBcHBDb25maWcuYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgX3NlcnZlckFwcENvbmZpZy5hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgbGV0IGFwcE9wdGlvbnM7XG4gICAgaWYgKF9pc0ZpcmViYXNlQXBwKF9vcHRpb25zKSkge1xuICAgICAgICBhcHBPcHRpb25zID0gX29wdGlvbnMub3B0aW9ucztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGFwcE9wdGlvbnMgPSBfb3B0aW9ucztcbiAgICB9XG4gICAgLy8gQnVpbGQgYW4gYXBwIG5hbWUgYmFzZWQgb24gYSBoYXNoIG9mIHRoZSBjb25maWd1cmF0aW9uIG9wdGlvbnMuXG4gICAgY29uc3QgbmFtZU9iaiA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgX3NlcnZlckFwcENvbmZpZyksIGFwcE9wdGlvbnMpO1xuICAgIC8vIEhvd2V2ZXIsIERvIG5vdCBtYW5nbGUgdGhlIG5hbWUgYmFzZWQgb24gcmVsZWFzZU9uRGVyZWYsIHNpbmNlIGl0IHdpbGwgdmFyeSBiZXR3ZWVuIHRoZVxuICAgIC8vIGNvbnN0cnVjdGlvbiBvZiBGaXJlYmFzZVNlcnZlckFwcCBpbnN0YW5jZXMuIEZvciBleGFtcGxlLCBpZiB0aGUgb2JqZWN0IGlzIHRoZSByZXF1ZXN0IGhlYWRlcnMuXG4gICAgaWYgKG5hbWVPYmoucmVsZWFzZU9uRGVyZWYgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBkZWxldGUgbmFtZU9iai5yZWxlYXNlT25EZXJlZjtcbiAgICB9XG4gICAgY29uc3QgaGFzaENvZGUgPSAocykgPT4ge1xuICAgICAgICByZXR1cm4gWy4uLnNdLnJlZHVjZSgoaGFzaCwgYykgPT4gKE1hdGguaW11bCgzMSwgaGFzaCkgKyBjLmNoYXJDb2RlQXQoMCkpIHwgMCwgMCk7XG4gICAgfTtcbiAgICBpZiAoX3NlcnZlckFwcENvbmZpZy5yZWxlYXNlT25EZXJlZiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmICh0eXBlb2YgRmluYWxpemF0aW9uUmVnaXN0cnkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImZpbmFsaXphdGlvbi1yZWdpc3RyeS1ub3Qtc3VwcG9ydGVkXCIgLyogQXBwRXJyb3IuRklOQUxJWkFUSU9OX1JFR0lTVFJZX05PVF9TVVBQT1JURUQgKi8sIHt9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBuYW1lU3RyaW5nID0gJycgKyBoYXNoQ29kZShKU09OLnN0cmluZ2lmeShuYW1lT2JqKSk7XG4gICAgY29uc3QgZXhpc3RpbmdBcHAgPSBfc2VydmVyQXBwcy5nZXQobmFtZVN0cmluZyk7XG4gICAgaWYgKGV4aXN0aW5nQXBwKSB7XG4gICAgICAgIGV4aXN0aW5nQXBwLmluY1JlZkNvdW50KF9zZXJ2ZXJBcHBDb25maWcucmVsZWFzZU9uRGVyZWYpO1xuICAgICAgICByZXR1cm4gZXhpc3RpbmdBcHA7XG4gICAgfVxuICAgIGNvbnN0IGNvbnRhaW5lciA9IG5ldyBDb21wb25lbnRDb250YWluZXIobmFtZVN0cmluZyk7XG4gICAgZm9yIChjb25zdCBjb21wb25lbnQgb2YgX2NvbXBvbmVudHMudmFsdWVzKCkpIHtcbiAgICAgICAgY29udGFpbmVyLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xuICAgIH1cbiAgICBjb25zdCBuZXdBcHAgPSBuZXcgRmlyZWJhc2VTZXJ2ZXJBcHBJbXBsKGFwcE9wdGlvbnMsIF9zZXJ2ZXJBcHBDb25maWcsIG5hbWVTdHJpbmcsIGNvbnRhaW5lcik7XG4gICAgX3NlcnZlckFwcHMuc2V0KG5hbWVTdHJpbmcsIG5ld0FwcCk7XG4gICAgcmV0dXJuIG5ld0FwcDtcbn1cbi8qKlxuICogUmV0cmlldmVzIGEge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IGluc3RhbmNlLlxuICpcbiAqIFdoZW4gY2FsbGVkIHdpdGggbm8gYXJndW1lbnRzLCB0aGUgZGVmYXVsdCBhcHAgaXMgcmV0dXJuZWQuIFdoZW4gYW4gYXBwIG5hbWVcbiAqIGlzIHByb3ZpZGVkLCB0aGUgYXBwIGNvcnJlc3BvbmRpbmcgdG8gdGhhdCBuYW1lIGlzIHJldHVybmVkLlxuICpcbiAqIEFuIGV4Y2VwdGlvbiBpcyB0aHJvd24gaWYgdGhlIGFwcCBiZWluZyByZXRyaWV2ZWQgaGFzIG5vdCB5ZXQgYmVlblxuICogaW5pdGlhbGl6ZWQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYGphdmFzY3JpcHRcbiAqIC8vIFJldHVybiB0aGUgZGVmYXVsdCBhcHBcbiAqIGNvbnN0IGFwcCA9IGdldEFwcCgpO1xuICogYGBgXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYGphdmFzY3JpcHRcbiAqIC8vIFJldHVybiBhIG5hbWVkIGFwcFxuICogY29uc3Qgb3RoZXJBcHAgPSBnZXRBcHAoXCJvdGhlckFwcFwiKTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBuYW1lIC0gT3B0aW9uYWwgbmFtZSBvZiB0aGUgYXBwIHRvIHJldHVybi4gSWYgbm8gbmFtZSBpc1xuICogICBwcm92aWRlZCwgdGhlIGRlZmF1bHQgaXMgYFwiW0RFRkFVTFRdXCJgLlxuICpcbiAqIEByZXR1cm5zIFRoZSBhcHAgY29ycmVzcG9uZGluZyB0byB0aGUgcHJvdmlkZWQgYXBwIG5hbWUuXG4gKiAgIElmIG5vIGFwcCBuYW1lIGlzIHByb3ZpZGVkLCB0aGUgZGVmYXVsdCBhcHAgaXMgcmV0dXJuZWQuXG4gKlxuICogQHB1YmxpY1xuICovXG5mdW5jdGlvbiBnZXRBcHAobmFtZSA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xuICAgIGNvbnN0IGFwcCA9IF9hcHBzLmdldChuYW1lKTtcbiAgICBpZiAoIWFwcCAmJiBuYW1lID09PSBERUZBVUxUX0VOVFJZX05BTUUgJiYgZ2V0RGVmYXVsdEFwcENvbmZpZygpKSB7XG4gICAgICAgIHJldHVybiBpbml0aWFsaXplQXBwKCk7XG4gICAgfVxuICAgIGlmICghYXBwKSB7XG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibm8tYXBwXCIgLyogQXBwRXJyb3IuTk9fQVBQICovLCB7IGFwcE5hbWU6IG5hbWUgfSk7XG4gICAgfVxuICAgIHJldHVybiBhcHA7XG59XG4vKipcbiAqIEEgKHJlYWQtb25seSkgYXJyYXkgb2YgYWxsIGluaXRpYWxpemVkIGFwcHMuXG4gKiBAcHVibGljXG4gKi9cbmZ1bmN0aW9uIGdldEFwcHMoKSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20oX2FwcHMudmFsdWVzKCkpO1xufVxuLyoqXG4gKiBSZW5kZXJzIHRoaXMgYXBwIHVudXNhYmxlIGFuZCBmcmVlcyB0aGUgcmVzb3VyY2VzIG9mIGFsbCBhc3NvY2lhdGVkXG4gKiBzZXJ2aWNlcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgamF2YXNjcmlwdFxuICogZGVsZXRlQXBwKGFwcClcbiAqICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gKiAgICAgY29uc29sZS5sb2coXCJBcHAgZGVsZXRlZCBzdWNjZXNzZnVsbHlcIik7XG4gKiAgIH0pXG4gKiAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuICogICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgZGVsZXRpbmcgYXBwOlwiLCBlcnJvcik7XG4gKiAgIH0pO1xuICogYGBgXG4gKlxuICogQHB1YmxpY1xuICovXG5hc3luYyBmdW5jdGlvbiBkZWxldGVBcHAoYXBwKSB7XG4gICAgbGV0IGNsZWFudXBQcm92aWRlcnMgPSBmYWxzZTtcbiAgICBjb25zdCBuYW1lID0gYXBwLm5hbWU7XG4gICAgaWYgKF9hcHBzLmhhcyhuYW1lKSkge1xuICAgICAgICBjbGVhbnVwUHJvdmlkZXJzID0gdHJ1ZTtcbiAgICAgICAgX2FwcHMuZGVsZXRlKG5hbWUpO1xuICAgIH1cbiAgICBlbHNlIGlmIChfc2VydmVyQXBwcy5oYXMobmFtZSkpIHtcbiAgICAgICAgY29uc3QgZmlyZWJhc2VTZXJ2ZXJBcHAgPSBhcHA7XG4gICAgICAgIGlmIChmaXJlYmFzZVNlcnZlckFwcC5kZWNSZWZDb3VudCgpIDw9IDApIHtcbiAgICAgICAgICAgIF9zZXJ2ZXJBcHBzLmRlbGV0ZShuYW1lKTtcbiAgICAgICAgICAgIGNsZWFudXBQcm92aWRlcnMgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChjbGVhbnVwUHJvdmlkZXJzKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGFwcC5jb250YWluZXJcbiAgICAgICAgICAgIC5nZXRQcm92aWRlcnMoKVxuICAgICAgICAgICAgLm1hcChwcm92aWRlciA9PiBwcm92aWRlci5kZWxldGUoKSkpO1xuICAgICAgICBhcHAuaXNEZWxldGVkID0gdHJ1ZTtcbiAgICB9XG59XG4vKipcbiAqIFJlZ2lzdGVycyBhIGxpYnJhcnkncyBuYW1lIGFuZCB2ZXJzaW9uIGZvciBwbGF0Zm9ybSBsb2dnaW5nIHB1cnBvc2VzLlxuICogQHBhcmFtIGxpYnJhcnkgLSBOYW1lIG9mIDFwIG9yIDNwIGxpYnJhcnkgKGUuZy4gZmlyZXN0b3JlLCBhbmd1bGFyZmlyZSlcbiAqIEBwYXJhbSB2ZXJzaW9uIC0gQ3VycmVudCB2ZXJzaW9uIG9mIHRoYXQgbGlicmFyeS5cbiAqIEBwYXJhbSB2YXJpYW50IC0gQnVuZGxlIHZhcmlhbnQsIGUuZy4sIG5vZGUsIHJuLCBldGMuXG4gKlxuICogQHB1YmxpY1xuICovXG5mdW5jdGlvbiByZWdpc3RlclZlcnNpb24obGlicmFyeUtleU9yTmFtZSwgdmVyc2lvbiwgdmFyaWFudCkge1xuICAgIHZhciBfYTtcbiAgICAvLyBUT0RPOiBXZSBjYW4gdXNlIHRoaXMgY2hlY2sgdG8gd2hpdGVsaXN0IHN0cmluZ3Mgd2hlbi9pZiB3ZSBzZXQgdXBcbiAgICAvLyBhIGdvb2Qgd2hpdGVsaXN0IHN5c3RlbS5cbiAgICBsZXQgbGlicmFyeSA9IChfYSA9IFBMQVRGT1JNX0xPR19TVFJJTkdbbGlicmFyeUtleU9yTmFtZV0pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGxpYnJhcnlLZXlPck5hbWU7XG4gICAgaWYgKHZhcmlhbnQpIHtcbiAgICAgICAgbGlicmFyeSArPSBgLSR7dmFyaWFudH1gO1xuICAgIH1cbiAgICBjb25zdCBsaWJyYXJ5TWlzbWF0Y2ggPSBsaWJyYXJ5Lm1hdGNoKC9cXHN8XFwvLyk7XG4gICAgY29uc3QgdmVyc2lvbk1pc21hdGNoID0gdmVyc2lvbi5tYXRjaCgvXFxzfFxcLy8pO1xuICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2ggfHwgdmVyc2lvbk1pc21hdGNoKSB7XG4gICAgICAgIGNvbnN0IHdhcm5pbmcgPSBbXG4gICAgICAgICAgICBgVW5hYmxlIHRvIHJlZ2lzdGVyIGxpYnJhcnkgXCIke2xpYnJhcnl9XCIgd2l0aCB2ZXJzaW9uIFwiJHt2ZXJzaW9ufVwiOmBcbiAgICAgICAgXTtcbiAgICAgICAgaWYgKGxpYnJhcnlNaXNtYXRjaCkge1xuICAgICAgICAgICAgd2FybmluZy5wdXNoKGBsaWJyYXJ5IG5hbWUgXCIke2xpYnJhcnl9XCIgY29udGFpbnMgaWxsZWdhbCBjaGFyYWN0ZXJzICh3aGl0ZXNwYWNlIG9yIFwiL1wiKWApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2ggJiYgdmVyc2lvbk1pc21hdGNoKSB7XG4gICAgICAgICAgICB3YXJuaW5nLnB1c2goJ2FuZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2ZXJzaW9uTWlzbWF0Y2gpIHtcbiAgICAgICAgICAgIHdhcm5pbmcucHVzaChgdmVyc2lvbiBuYW1lIFwiJHt2ZXJzaW9ufVwiIGNvbnRhaW5zIGlsbGVnYWwgY2hhcmFjdGVycyAod2hpdGVzcGFjZSBvciBcIi9cIilgKTtcbiAgICAgICAgfVxuICAgICAgICBsb2dnZXIud2Fybih3YXJuaW5nLmpvaW4oJyAnKSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoYCR7bGlicmFyeX0tdmVyc2lvbmAsICgpID0+ICh7IGxpYnJhcnksIHZlcnNpb24gfSksIFwiVkVSU0lPTlwiIC8qIENvbXBvbmVudFR5cGUuVkVSU0lPTiAqLykpO1xufVxuLyoqXG4gKiBTZXRzIGxvZyBoYW5kbGVyIGZvciBhbGwgRmlyZWJhc2UgU0RLcy5cbiAqIEBwYXJhbSBsb2dDYWxsYmFjayAtIEFuIG9wdGlvbmFsIGN1c3RvbSBsb2cgaGFuZGxlciB0aGF0IGV4ZWN1dGVzIHVzZXIgY29kZSB3aGVuZXZlclxuICogdGhlIEZpcmViYXNlIFNESyBtYWtlcyBhIGxvZ2dpbmcgY2FsbC5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmZ1bmN0aW9uIG9uTG9nKGxvZ0NhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgaWYgKGxvZ0NhbGxiYWNrICE9PSBudWxsICYmIHR5cGVvZiBsb2dDYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImludmFsaWQtbG9nLWFyZ3VtZW50XCIgLyogQXBwRXJyb3IuSU5WQUxJRF9MT0dfQVJHVU1FTlQgKi8pO1xuICAgIH1cbiAgICBzZXRVc2VyTG9nSGFuZGxlcihsb2dDYWxsYmFjaywgb3B0aW9ucyk7XG59XG4vKipcbiAqIFNldHMgbG9nIGxldmVsIGZvciBhbGwgRmlyZWJhc2UgU0RLcy5cbiAqXG4gKiBBbGwgb2YgdGhlIGxvZyB0eXBlcyBhYm92ZSB0aGUgY3VycmVudCBsb2cgbGV2ZWwgYXJlIGNhcHR1cmVkIChpLmUuIGlmXG4gKiB5b3Ugc2V0IHRoZSBsb2cgbGV2ZWwgdG8gYGluZm9gLCBlcnJvcnMgYXJlIGxvZ2dlZCwgYnV0IGBkZWJ1Z2AgYW5kXG4gKiBgdmVyYm9zZWAgbG9ncyBhcmUgbm90KS5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmZ1bmN0aW9uIHNldExvZ0xldmVsKGxvZ0xldmVsKSB7XG4gICAgc2V0TG9nTGV2ZWwkMShsb2dMZXZlbCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jb25zdCBEQl9OQU1FID0gJ2ZpcmViYXNlLWhlYXJ0YmVhdC1kYXRhYmFzZSc7XG5jb25zdCBEQl9WRVJTSU9OID0gMTtcbmNvbnN0IFNUT1JFX05BTUUgPSAnZmlyZWJhc2UtaGVhcnRiZWF0LXN0b3JlJztcbmxldCBkYlByb21pc2UgPSBudWxsO1xuZnVuY3Rpb24gZ2V0RGJQcm9taXNlKCkge1xuICAgIGlmICghZGJQcm9taXNlKSB7XG4gICAgICAgIGRiUHJvbWlzZSA9IG9wZW5EQihEQl9OQU1FLCBEQl9WRVJTSU9OLCB7XG4gICAgICAgICAgICB1cGdyYWRlOiAoZGIsIG9sZFZlcnNpb24pID0+IHtcbiAgICAgICAgICAgICAgICAvLyBXZSBkb24ndCB1c2UgJ2JyZWFrJyBpbiB0aGlzIHN3aXRjaCBzdGF0ZW1lbnQsIHRoZSBmYWxsLXRocm91Z2hcbiAgICAgICAgICAgICAgICAvLyBiZWhhdmlvciBpcyB3aGF0IHdlIHdhbnQsIGJlY2F1c2UgaWYgdGhlcmUgYXJlIG11bHRpcGxlIHZlcnNpb25zIGJldHdlZW5cbiAgICAgICAgICAgICAgICAvLyB0aGUgb2xkIHZlcnNpb24gYW5kIHRoZSBjdXJyZW50IHZlcnNpb24sIHdlIHdhbnQgQUxMIHRoZSBtaWdyYXRpb25zXG4gICAgICAgICAgICAgICAgLy8gdGhhdCBjb3JyZXNwb25kIHRvIHRob3NlIHZlcnNpb25zIHRvIHJ1biwgbm90IG9ubHkgdGhlIGxhc3Qgb25lLlxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZWZhdWx0LWNhc2VcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG9sZFZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYi5jcmVhdGVPYmplY3RTdG9yZShTVE9SRV9OQU1FKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2FmYXJpL2lPUyBicm93c2VycyB0aHJvdyBvY2Nhc2lvbmFsIGV4Y2VwdGlvbnMgb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkYi5jcmVhdGVPYmplY3RTdG9yZSgpIHRoYXQgbWF5IGJlIGEgYnVnLiBBdm9pZCBibG9ja2luZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSByZXN0IG9mIHRoZSBhcHAgZnVuY3Rpb25hbGl0eS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KS5jYXRjaChlID0+IHtcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaWRiLW9wZW5cIiAvKiBBcHBFcnJvci5JREJfT1BFTiAqLywge1xuICAgICAgICAgICAgICAgIG9yaWdpbmFsRXJyb3JNZXNzYWdlOiBlLm1lc3NhZ2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGRiUHJvbWlzZTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHJlYWRIZWFydGJlYXRzRnJvbUluZGV4ZWREQihhcHApIHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBkYiA9IGF3YWl0IGdldERiUHJvbWlzZSgpO1xuICAgICAgICBjb25zdCB0eCA9IGRiLnRyYW5zYWN0aW9uKFNUT1JFX05BTUUpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0eC5vYmplY3RTdG9yZShTVE9SRV9OQU1FKS5nZXQoY29tcHV0ZUtleShhcHApKTtcbiAgICAgICAgLy8gV2UgYWxyZWFkeSBoYXZlIHRoZSB2YWx1ZSBidXQgdHguZG9uZSBjYW4gdGhyb3csXG4gICAgICAgIC8vIHNvIHdlIG5lZWQgdG8gYXdhaXQgaXQgaGVyZSB0byBjYXRjaCBlcnJvcnNcbiAgICAgICAgYXdhaXQgdHguZG9uZTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBGaXJlYmFzZUVycm9yKSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybihlLm1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgaWRiR2V0RXJyb3IgPSBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImlkYi1nZXRcIiAvKiBBcHBFcnJvci5JREJfR0VUICovLCB7XG4gICAgICAgICAgICAgICAgb3JpZ2luYWxFcnJvck1lc3NhZ2U6IGUgPT09IG51bGwgfHwgZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZS5tZXNzYWdlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGlkYkdldEVycm9yLm1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgfVxufVxuYXN5bmMgZnVuY3Rpb24gd3JpdGVIZWFydGJlYXRzVG9JbmRleGVkREIoYXBwLCBoZWFydGJlYXRPYmplY3QpIHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBkYiA9IGF3YWl0IGdldERiUHJvbWlzZSgpO1xuICAgICAgICBjb25zdCB0eCA9IGRiLnRyYW5zYWN0aW9uKFNUT1JFX05BTUUsICdyZWFkd3JpdGUnKTtcbiAgICAgICAgY29uc3Qgb2JqZWN0U3RvcmUgPSB0eC5vYmplY3RTdG9yZShTVE9SRV9OQU1FKTtcbiAgICAgICAgYXdhaXQgb2JqZWN0U3RvcmUucHV0KGhlYXJ0YmVhdE9iamVjdCwgY29tcHV0ZUtleShhcHApKTtcbiAgICAgICAgYXdhaXQgdHguZG9uZTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBGaXJlYmFzZUVycm9yKSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybihlLm1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgaWRiR2V0RXJyb3IgPSBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImlkYi1zZXRcIiAvKiBBcHBFcnJvci5JREJfV1JJVEUgKi8sIHtcbiAgICAgICAgICAgICAgICBvcmlnaW5hbEVycm9yTWVzc2FnZTogZSA9PT0gbnVsbCB8fCBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlLm1lc3NhZ2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oaWRiR2V0RXJyb3IubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBjb21wdXRlS2V5KGFwcCkge1xuICAgIHJldHVybiBgJHthcHAubmFtZX0hJHthcHAub3B0aW9ucy5hcHBJZH1gO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgTUFYX0hFQURFUl9CWVRFUyA9IDEwMjQ7XG4vLyAzMCBkYXlzXG5jb25zdCBTVE9SRURfSEVBUlRCRUFUX1JFVEVOVElPTl9NQVhfTUlMTElTID0gMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwO1xuY2xhc3MgSGVhcnRiZWF0U2VydmljZUltcGwge1xuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lcikge1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluLW1lbW9yeSBjYWNoZSBmb3IgaGVhcnRiZWF0cywgdXNlZCBieSBnZXRIZWFydGJlYXRzSGVhZGVyKCkgdG8gZ2VuZXJhdGVcbiAgICAgICAgICogdGhlIGhlYWRlciBzdHJpbmcuXG4gICAgICAgICAqIFN0b3JlcyBvbmUgcmVjb3JkIHBlciBkYXRlLiBUaGlzIHdpbGwgYmUgY29uc29saWRhdGVkIGludG8gdGhlIHN0YW5kYXJkXG4gICAgICAgICAqIGZvcm1hdCBvZiBvbmUgcmVjb3JkIHBlciB1c2VyIGFnZW50IHN0cmluZyBiZWZvcmUgYmVpbmcgc2VudCBhcyBhIGhlYWRlci5cbiAgICAgICAgICogUG9wdWxhdGVkIGZyb20gaW5kZXhlZERCIHdoZW4gdGhlIGNvbnRyb2xsZXIgaXMgaW5zdGFudGlhdGVkIGFuZCBzaG91bGRcbiAgICAgICAgICogYmUga2VwdCBpbiBzeW5jIHdpdGggaW5kZXhlZERCLlxuICAgICAgICAgKiBMZWF2ZSBwdWJsaWMgZm9yIGVhc2llciB0ZXN0aW5nLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlID0gbnVsbDtcbiAgICAgICAgY29uc3QgYXBwID0gdGhpcy5jb250YWluZXIuZ2V0UHJvdmlkZXIoJ2FwcCcpLmdldEltbWVkaWF0ZSgpO1xuICAgICAgICB0aGlzLl9zdG9yYWdlID0gbmV3IEhlYXJ0YmVhdFN0b3JhZ2VJbXBsKGFwcCk7XG4gICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZVByb21pc2UgPSB0aGlzLl9zdG9yYWdlLnJlYWQoKS50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPSByZXN1bHQ7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHRvIHJlcG9ydCBhIGhlYXJ0YmVhdC4gVGhlIGZ1bmN0aW9uIHdpbGwgZ2VuZXJhdGVcbiAgICAgKiBhIEhlYXJ0YmVhdHNCeVVzZXJBZ2VudCBvYmplY3QsIHVwZGF0ZSBoZWFydGJlYXRzQ2FjaGUsIGFuZCBwZXJzaXN0IGl0XG4gICAgICogdG8gSW5kZXhlZERCLlxuICAgICAqIE5vdGUgdGhhdCB3ZSBvbmx5IHN0b3JlIG9uZSBoZWFydGJlYXQgcGVyIGRheS4gU28gaWYgYSBoZWFydGJlYXQgZm9yIHRvZGF5IGlzXG4gICAgICogYWxyZWFkeSBsb2dnZWQsIHN1YnNlcXVlbnQgY2FsbHMgdG8gdGhpcyBmdW5jdGlvbiBpbiB0aGUgc2FtZSBkYXkgd2lsbCBiZSBpZ25vcmVkLlxuICAgICAqL1xuICAgIGFzeW5jIHRyaWdnZXJIZWFydGJlYXQoKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBwbGF0Zm9ybUxvZ2dlciA9IHRoaXMuY29udGFpbmVyXG4gICAgICAgICAgICAgICAgLmdldFByb3ZpZGVyKCdwbGF0Zm9ybS1sb2dnZXInKVxuICAgICAgICAgICAgICAgIC5nZXRJbW1lZGlhdGUoKTtcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIFwiRmlyZWJhc2UgdXNlciBhZ2VudFwiIHN0cmluZyBmcm9tIHRoZSBwbGF0Zm9ybSBsb2dnZXJcbiAgICAgICAgICAgIC8vIHNlcnZpY2UsIG5vdCB0aGUgYnJvd3NlciB1c2VyIGFnZW50LlxuICAgICAgICAgICAgY29uc3QgYWdlbnQgPSBwbGF0Zm9ybUxvZ2dlci5nZXRQbGF0Zm9ybUluZm9TdHJpbmcoKTtcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBnZXRVVENEYXRlU3RyaW5nKCk7XG4gICAgICAgICAgICBpZiAoKChfYSA9IHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmhlYXJ0YmVhdHMpID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPSBhd2FpdCB0aGlzLl9oZWFydGJlYXRzQ2FjaGVQcm9taXNlO1xuICAgICAgICAgICAgICAgIC8vIElmIHdlIGZhaWxlZCB0byBjb25zdHJ1Y3QgYSBoZWFydGJlYXRzIGNhY2hlLCB0aGVuIHJldHVybiBpbW1lZGlhdGVseS5cbiAgICAgICAgICAgICAgICBpZiAoKChfYiA9IHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmhlYXJ0YmVhdHMpID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIERvIG5vdCBzdG9yZSBhIGhlYXJ0YmVhdCBpZiBvbmUgaXMgYWxyZWFkeSBzdG9yZWQgZm9yIHRoaXMgZGF5XG4gICAgICAgICAgICAvLyBvciBpZiBhIGhlYWRlciBoYXMgYWxyZWFkeSBiZWVuIHNlbnQgdG9kYXkuXG4gICAgICAgICAgICBpZiAodGhpcy5faGVhcnRiZWF0c0NhY2hlLmxhc3RTZW50SGVhcnRiZWF0RGF0ZSA9PT0gZGF0ZSB8fFxuICAgICAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzLnNvbWUoc2luZ2xlRGF0ZUhlYXJ0YmVhdCA9PiBzaW5nbGVEYXRlSGVhcnRiZWF0LmRhdGUgPT09IGRhdGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlcmUgaXMgbm8gZW50cnkgZm9yIHRoaXMgZGF0ZS4gQ3JlYXRlIG9uZS5cbiAgICAgICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cy5wdXNoKHsgZGF0ZSwgYWdlbnQgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBSZW1vdmUgZW50cmllcyBvbGRlciB0aGFuIDMwIGRheXMuXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cyA9XG4gICAgICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMuZmlsdGVyKHNpbmdsZURhdGVIZWFydGJlYXQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBoYlRpbWVzdGFtcCA9IG5ldyBEYXRlKHNpbmdsZURhdGVIZWFydGJlYXQuZGF0ZSkudmFsdWVPZigpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm93IC0gaGJUaW1lc3RhbXAgPD0gU1RPUkVEX0hFQVJUQkVBVF9SRVRFTlRJT05fTUFYX01JTExJUztcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdG9yYWdlLm92ZXJ3cml0ZSh0aGlzLl9oZWFydGJlYXRzQ2FjaGUpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybihlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgYmFzZTY0IGVuY29kZWQgc3RyaW5nIHdoaWNoIGNhbiBiZSBhdHRhY2hlZCB0byB0aGUgaGVhcnRiZWF0LXNwZWNpZmljIGhlYWRlciBkaXJlY3RseS5cbiAgICAgKiBJdCBhbHNvIGNsZWFycyBhbGwgaGVhcnRiZWF0cyBmcm9tIG1lbW9yeSBhcyB3ZWxsIGFzIGluIEluZGV4ZWREQi5cbiAgICAgKlxuICAgICAqIE5PVEU6IENvbnN1bWluZyBwcm9kdWN0IFNES3Mgc2hvdWxkIG5vdCBzZW5kIHRoZSBoZWFkZXIgaWYgdGhpcyBtZXRob2RcbiAgICAgKiByZXR1cm5zIGFuIGVtcHR5IHN0cmluZy5cbiAgICAgKi9cbiAgICBhc3luYyBnZXRIZWFydGJlYXRzSGVhZGVyKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAodGhpcy5faGVhcnRiZWF0c0NhY2hlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5faGVhcnRiZWF0c0NhY2hlUHJvbWlzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIElmIGl0J3Mgc3RpbGwgbnVsbCBvciB0aGUgYXJyYXkgaXMgZW1wdHksIHRoZXJlIGlzIG5vIGRhdGEgdG8gc2VuZC5cbiAgICAgICAgICAgIGlmICgoKF9hID0gdGhpcy5faGVhcnRiZWF0c0NhY2hlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaGVhcnRiZWF0cykgPT0gbnVsbCB8fFxuICAgICAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBnZXRVVENEYXRlU3RyaW5nKCk7XG4gICAgICAgICAgICAvLyBFeHRyYWN0IGFzIG1hbnkgaGVhcnRiZWF0cyBmcm9tIHRoZSBjYWNoZSBhcyB3aWxsIGZpdCB1bmRlciB0aGUgc2l6ZSBsaW1pdC5cbiAgICAgICAgICAgIGNvbnN0IHsgaGVhcnRiZWF0c1RvU2VuZCwgdW5zZW50RW50cmllcyB9ID0gZXh0cmFjdEhlYXJ0YmVhdHNGb3JIZWFkZXIodGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMpO1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyU3RyaW5nID0gYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcoSlNPTi5zdHJpbmdpZnkoeyB2ZXJzaW9uOiAyLCBoZWFydGJlYXRzOiBoZWFydGJlYXRzVG9TZW5kIH0pKTtcbiAgICAgICAgICAgIC8vIFN0b3JlIGxhc3Qgc2VudCBkYXRlIHRvIHByZXZlbnQgYW5vdGhlciBiZWluZyBsb2dnZWQvc2VudCBmb3IgdGhlIHNhbWUgZGF5LlxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmxhc3RTZW50SGVhcnRiZWF0RGF0ZSA9IGRhdGU7XG4gICAgICAgICAgICBpZiAodW5zZW50RW50cmllcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgLy8gU3RvcmUgYW55IHVuc2VudCBlbnRyaWVzIGlmIHRoZXkgZXhpc3QuXG4gICAgICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMgPSB1bnNlbnRFbnRyaWVzO1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgc2VlbXMgbW9yZSBsaWtlbHkgdGhhbiBlbXB0eWluZyB0aGUgYXJyYXkgKGJlbG93KSB0byBsZWFkIHRvIHNvbWUgb2RkIHN0YXRlXG4gICAgICAgICAgICAgICAgLy8gc2luY2UgdGhlIGNhY2hlIGlzbid0IGVtcHR5IGFuZCB0aGlzIHdpbGwgYmUgY2FsbGVkIGFnYWluIG9uIHRoZSBuZXh0IHJlcXVlc3QsXG4gICAgICAgICAgICAgICAgLy8gYW5kIGlzIHByb2JhYmx5IHNhZmVzdCBpZiB3ZSBhd2FpdCBpdC5cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLl9zdG9yYWdlLm92ZXJ3cml0ZSh0aGlzLl9oZWFydGJlYXRzQ2FjaGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMgPSBbXTtcbiAgICAgICAgICAgICAgICAvLyBEbyBub3Qgd2FpdCBmb3IgdGhpcywgdG8gcmVkdWNlIGxhdGVuY3kuXG4gICAgICAgICAgICAgICAgdm9pZCB0aGlzLl9zdG9yYWdlLm92ZXJ3cml0ZSh0aGlzLl9oZWFydGJlYXRzQ2FjaGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGhlYWRlclN0cmluZztcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oZSk7XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBnZXRVVENEYXRlU3RyaW5nKCkge1xuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICAvLyBSZXR1cm5zIGRhdGUgZm9ybWF0ICdZWVlZLU1NLUREJ1xuICAgIHJldHVybiB0b2RheS50b0lTT1N0cmluZygpLnN1YnN0cmluZygwLCAxMCk7XG59XG5mdW5jdGlvbiBleHRyYWN0SGVhcnRiZWF0c0ZvckhlYWRlcihoZWFydGJlYXRzQ2FjaGUsIG1heFNpemUgPSBNQVhfSEVBREVSX0JZVEVTKSB7XG4gICAgLy8gSGVhcnRiZWF0cyBncm91cGVkIGJ5IHVzZXIgYWdlbnQgaW4gdGhlIHN0YW5kYXJkIGZvcm1hdCB0byBiZSBzZW50IGluXG4gICAgLy8gdGhlIGhlYWRlci5cbiAgICBjb25zdCBoZWFydGJlYXRzVG9TZW5kID0gW107XG4gICAgLy8gU2luZ2xlIGRhdGUgZm9ybWF0IGhlYXJ0YmVhdHMgdGhhdCBhcmUgbm90IHNlbnQuXG4gICAgbGV0IHVuc2VudEVudHJpZXMgPSBoZWFydGJlYXRzQ2FjaGUuc2xpY2UoKTtcbiAgICBmb3IgKGNvbnN0IHNpbmdsZURhdGVIZWFydGJlYXQgb2YgaGVhcnRiZWF0c0NhY2hlKSB7XG4gICAgICAgIC8vIExvb2sgZm9yIGFuIGV4aXN0aW5nIGVudHJ5IHdpdGggdGhlIHNhbWUgdXNlciBhZ2VudC5cbiAgICAgICAgY29uc3QgaGVhcnRiZWF0RW50cnkgPSBoZWFydGJlYXRzVG9TZW5kLmZpbmQoaGIgPT4gaGIuYWdlbnQgPT09IHNpbmdsZURhdGVIZWFydGJlYXQuYWdlbnQpO1xuICAgICAgICBpZiAoIWhlYXJ0YmVhdEVudHJ5KSB7XG4gICAgICAgICAgICAvLyBJZiBubyBlbnRyeSBmb3IgdGhpcyB1c2VyIGFnZW50IGV4aXN0cywgY3JlYXRlIG9uZS5cbiAgICAgICAgICAgIGhlYXJ0YmVhdHNUb1NlbmQucHVzaCh7XG4gICAgICAgICAgICAgICAgYWdlbnQ6IHNpbmdsZURhdGVIZWFydGJlYXQuYWdlbnQsXG4gICAgICAgICAgICAgICAgZGF0ZXM6IFtzaW5nbGVEYXRlSGVhcnRiZWF0LmRhdGVdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChjb3VudEJ5dGVzKGhlYXJ0YmVhdHNUb1NlbmQpID4gbWF4U2l6ZSkge1xuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBoZWFkZXIgd291bGQgZXhjZWVkIG1heCBzaXplLCByZW1vdmUgdGhlIGFkZGVkIGhlYXJ0YmVhdFxuICAgICAgICAgICAgICAgIC8vIGVudHJ5IGFuZCBzdG9wIGFkZGluZyB0byB0aGUgaGVhZGVyLlxuICAgICAgICAgICAgICAgIGhlYXJ0YmVhdHNUb1NlbmQucG9wKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBoZWFydGJlYXRFbnRyeS5kYXRlcy5wdXNoKHNpbmdsZURhdGVIZWFydGJlYXQuZGF0ZSk7XG4gICAgICAgICAgICAvLyBJZiB0aGUgaGVhZGVyIHdvdWxkIGV4Y2VlZCBtYXggc2l6ZSwgcmVtb3ZlIHRoZSBhZGRlZCBkYXRlXG4gICAgICAgICAgICAvLyBhbmQgc3RvcCBhZGRpbmcgdG8gdGhlIGhlYWRlci5cbiAgICAgICAgICAgIGlmIChjb3VudEJ5dGVzKGhlYXJ0YmVhdHNUb1NlbmQpID4gbWF4U2l6ZSkge1xuICAgICAgICAgICAgICAgIGhlYXJ0YmVhdEVudHJ5LmRhdGVzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFBvcCB1bnNlbnQgZW50cnkgZnJvbSBxdWV1ZS4gKFNraXBwZWQgaWYgYWRkaW5nIHRoZSBlbnRyeSBleGNlZWRlZFxuICAgICAgICAvLyBxdW90YSBhbmQgdGhlIGxvb3AgYnJlYWtzIGVhcmx5LilcbiAgICAgICAgdW5zZW50RW50cmllcyA9IHVuc2VudEVudHJpZXMuc2xpY2UoMSk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGhlYXJ0YmVhdHNUb1NlbmQsXG4gICAgICAgIHVuc2VudEVudHJpZXNcbiAgICB9O1xufVxuY2xhc3MgSGVhcnRiZWF0U3RvcmFnZUltcGwge1xuICAgIGNvbnN0cnVjdG9yKGFwcCkge1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAgICAgdGhpcy5fY2FuVXNlSW5kZXhlZERCUHJvbWlzZSA9IHRoaXMucnVuSW5kZXhlZERCRW52aXJvbm1lbnRDaGVjaygpO1xuICAgIH1cbiAgICBhc3luYyBydW5JbmRleGVkREJFbnZpcm9ubWVudENoZWNrKCkge1xuICAgICAgICBpZiAoIWlzSW5kZXhlZERCQXZhaWxhYmxlKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlKClcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB0cnVlKVxuICAgICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiBmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZCBhbGwgaGVhcnRiZWF0cy5cbiAgICAgKi9cbiAgICBhc3luYyByZWFkKCkge1xuICAgICAgICBjb25zdCBjYW5Vc2VJbmRleGVkREIgPSBhd2FpdCB0aGlzLl9jYW5Vc2VJbmRleGVkREJQcm9taXNlO1xuICAgICAgICBpZiAoIWNhblVzZUluZGV4ZWREQikge1xuICAgICAgICAgICAgcmV0dXJuIHsgaGVhcnRiZWF0czogW10gfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGlkYkhlYXJ0YmVhdE9iamVjdCA9IGF3YWl0IHJlYWRIZWFydGJlYXRzRnJvbUluZGV4ZWREQih0aGlzLmFwcCk7XG4gICAgICAgICAgICBpZiAoaWRiSGVhcnRiZWF0T2JqZWN0ID09PSBudWxsIHx8IGlkYkhlYXJ0YmVhdE9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogaWRiSGVhcnRiZWF0T2JqZWN0LmhlYXJ0YmVhdHMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaWRiSGVhcnRiZWF0T2JqZWN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgaGVhcnRiZWF0czogW10gfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBvdmVyd3JpdGUgdGhlIHN0b3JhZ2Ugd2l0aCB0aGUgcHJvdmlkZWQgaGVhcnRiZWF0c1xuICAgIGFzeW5jIG92ZXJ3cml0ZShoZWFydGJlYXRzT2JqZWN0KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgY2FuVXNlSW5kZXhlZERCID0gYXdhaXQgdGhpcy5fY2FuVXNlSW5kZXhlZERCUHJvbWlzZTtcbiAgICAgICAgaWYgKCFjYW5Vc2VJbmRleGVkREIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nSGVhcnRiZWF0c09iamVjdCA9IGF3YWl0IHRoaXMucmVhZCgpO1xuICAgICAgICAgICAgcmV0dXJuIHdyaXRlSGVhcnRiZWF0c1RvSW5kZXhlZERCKHRoaXMuYXBwLCB7XG4gICAgICAgICAgICAgICAgbGFzdFNlbnRIZWFydGJlYXREYXRlOiAoX2EgPSBoZWFydGJlYXRzT2JqZWN0Lmxhc3RTZW50SGVhcnRiZWF0RGF0ZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0Lmxhc3RTZW50SGVhcnRiZWF0RGF0ZSxcbiAgICAgICAgICAgICAgICBoZWFydGJlYXRzOiBoZWFydGJlYXRzT2JqZWN0LmhlYXJ0YmVhdHNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGFkZCBoZWFydGJlYXRzXG4gICAgYXN5bmMgYWRkKGhlYXJ0YmVhdHNPYmplY3QpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCBjYW5Vc2VJbmRleGVkREIgPSBhd2FpdCB0aGlzLl9jYW5Vc2VJbmRleGVkREJQcm9taXNlO1xuICAgICAgICBpZiAoIWNhblVzZUluZGV4ZWREQikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0ID0gYXdhaXQgdGhpcy5yZWFkKCk7XG4gICAgICAgICAgICByZXR1cm4gd3JpdGVIZWFydGJlYXRzVG9JbmRleGVkREIodGhpcy5hcHAsIHtcbiAgICAgICAgICAgICAgICBsYXN0U2VudEhlYXJ0YmVhdERhdGU6IChfYSA9IGhlYXJ0YmVhdHNPYmplY3QubGFzdFNlbnRIZWFydGJlYXREYXRlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBleGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QubGFzdFNlbnRIZWFydGJlYXREYXRlLFxuICAgICAgICAgICAgICAgIGhlYXJ0YmVhdHM6IFtcbiAgICAgICAgICAgICAgICAgICAgLi4uZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0LmhlYXJ0YmVhdHMsXG4gICAgICAgICAgICAgICAgICAgIC4uLmhlYXJ0YmVhdHNPYmplY3QuaGVhcnRiZWF0c1xuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBDYWxjdWxhdGUgYnl0ZXMgb2YgYSBIZWFydGJlYXRzQnlVc2VyQWdlbnQgYXJyYXkgYWZ0ZXIgYmVpbmcgd3JhcHBlZFxuICogaW4gYSBwbGF0Zm9ybSBsb2dnaW5nIGhlYWRlciBKU09OIG9iamVjdCwgc3RyaW5naWZpZWQsIGFuZCBjb252ZXJ0ZWRcbiAqIHRvIGJhc2UgNjQuXG4gKi9cbmZ1bmN0aW9uIGNvdW50Qnl0ZXMoaGVhcnRiZWF0c0NhY2hlKSB7XG4gICAgLy8gYmFzZTY0IGhhcyBhIHJlc3RyaWN0ZWQgc2V0IG9mIGNoYXJhY3RlcnMsIGFsbCBvZiB3aGljaCBzaG91bGQgYmUgMSBieXRlLlxuICAgIHJldHVybiBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhcbiAgICAvLyBoZWFydGJlYXRzQ2FjaGUgd3JhcHBlciBwcm9wZXJ0aWVzXG4gICAgSlNPTi5zdHJpbmdpZnkoeyB2ZXJzaW9uOiAyLCBoZWFydGJlYXRzOiBoZWFydGJlYXRzQ2FjaGUgfSkpLmxlbmd0aDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmZ1bmN0aW9uIHJlZ2lzdGVyQ29yZUNvbXBvbmVudHModmFyaWFudCkge1xuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KCdwbGF0Zm9ybS1sb2dnZXInLCBjb250YWluZXIgPT4gbmV3IFBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwoY29udGFpbmVyKSwgXCJQUklWQVRFXCIgLyogQ29tcG9uZW50VHlwZS5QUklWQVRFICovKSk7XG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoJ2hlYXJ0YmVhdCcsIGNvbnRhaW5lciA9PiBuZXcgSGVhcnRiZWF0U2VydmljZUltcGwoY29udGFpbmVyKSwgXCJQUklWQVRFXCIgLyogQ29tcG9uZW50VHlwZS5QUklWQVRFICovKSk7XG4gICAgLy8gUmVnaXN0ZXIgYGFwcGAgcGFja2FnZS5cbiAgICByZWdpc3RlclZlcnNpb24obmFtZSRxLCB2ZXJzaW9uJDEsIHZhcmlhbnQpO1xuICAgIC8vIEJVSUxEX1RBUkdFVCB3aWxsIGJlIHJlcGxhY2VkIGJ5IHZhbHVlcyBsaWtlIGVzbTIwMTcsIGNqczIwMTcsIGV0YyBkdXJpbmcgdGhlIGNvbXBpbGF0aW9uXG4gICAgcmVnaXN0ZXJWZXJzaW9uKG5hbWUkcSwgdmVyc2lvbiQxLCAnZXNtMjAxNycpO1xuICAgIC8vIFJlZ2lzdGVyIHBsYXRmb3JtIFNESyBpZGVudGlmaWVyIChubyB2ZXJzaW9uKS5cbiAgICByZWdpc3RlclZlcnNpb24oJ2ZpcmUtanMnLCAnJyk7XG59XG5cbi8qKlxuICogRmlyZWJhc2UgQXBwXG4gKlxuICogQHJlbWFya3MgVGhpcyBwYWNrYWdlIGNvb3JkaW5hdGVzIHRoZSBjb21tdW5pY2F0aW9uIGJldHdlZW4gdGhlIGRpZmZlcmVudCBGaXJlYmFzZSBjb21wb25lbnRzXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqL1xucmVnaXN0ZXJDb3JlQ29tcG9uZW50cygnJyk7XG5cbmV4cG9ydCB7IFNES19WRVJTSU9OLCBERUZBVUxUX0VOVFJZX05BTUUgYXMgX0RFRkFVTFRfRU5UUllfTkFNRSwgX2FkZENvbXBvbmVudCwgX2FkZE9yT3ZlcndyaXRlQ29tcG9uZW50LCBfYXBwcywgX2NsZWFyQ29tcG9uZW50cywgX2NvbXBvbmVudHMsIF9nZXRQcm92aWRlciwgX2lzRmlyZWJhc2VBcHAsIF9pc0ZpcmViYXNlU2VydmVyQXBwLCBfcmVnaXN0ZXJDb21wb25lbnQsIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UsIF9zZXJ2ZXJBcHBzLCBkZWxldGVBcHAsIGdldEFwcCwgZ2V0QXBwcywgaW5pdGlhbGl6ZUFwcCwgaW5pdGlhbGl6ZVNlcnZlckFwcCwgb25Mb2csIHJlZ2lzdGVyVmVyc2lvbiwgc2V0TG9nTGV2ZWwgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJpbXBvcnQgeyByZWdpc3RlclZlcnNpb24gfSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmV4cG9ydCAqIGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuXG52YXIgbmFtZSA9IFwiZmlyZWJhc2VcIjtcbnZhciB2ZXJzaW9uID0gXCIxMS4wLjJcIjtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbnJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uLCAnYXBwJyk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20uanMubWFwXG4iLCJpbXBvcnQgeyBpbml0aWFsaXplQXBwIH0gZnJvbSBcImZpcmViYXNlL2FwcFwiO1xuXG5jb25zdCBmaXJlYmFzZUNvbmZpZyA9IHtcbiAgYXBpS2V5OiBcIkFJemFTeUNHU2hIS2JXZ1BTQ09QVnpvTDhHdmNQMjg3T3llY3pxMFwiLFxuICBhdXRoRG9tYWluOiBcInRyYXZlbC1hZ2VuY3ktamF2YXNjcmlwdC5maXJlYmFzZWFwcC5jb21cIixcbiAgZGF0YWJhc2VVUkw6XG4gICAgXCJodHRwczovL3RyYXZlbC1hZ2VuY3ktamF2YXNjcmlwdC1kZWZhdWx0LXJ0ZGIuZXVyb3BlLXdlc3QxLmZpcmViYXNlZGF0YWJhc2UuYXBwL1wiLFxuICBwcm9qZWN0SWQ6IFwidHJhdmVsLWFnZW5jeS1qYXZhc2NyaXB0XCIsXG4gIHN0b3JhZ2VCdWNrZXQ6IFwidHJhdmVsLWFnZW5jeS1qYXZhc2NyaXB0LmZpcmViYXNlc3RvcmFnZS5hcHBcIixcbiAgbWVzc2FnaW5nU2VuZGVySWQ6IFwiNjI4MDU0NzEyNDcyXCIsXG4gIGFwcElkOiBcIjE6NjI4MDU0NzEyNDcyOndlYjphNGE1NWY5NWNkOGVlZGYwMmViMGVkXCIsXG59O1xuXG5jb25zdCBhcHAgPSBpbml0aWFsaXplQXBwKGZpcmViYXNlQ29uZmlnKTtcblxuZXhwb3J0IGRlZmF1bHQgYXBwO1xuIiwiaW1wb3J0IHsgX2dldFByb3ZpZGVyLCBnZXRBcHAsIFNES19WRVJTSU9OIGFzIFNES19WRVJTSU9OJDEsIF9yZWdpc3RlckNvbXBvbmVudCwgcmVnaXN0ZXJWZXJzaW9uIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBDb21wb25lbnQsIENvbXBvbmVudENvbnRhaW5lciwgUHJvdmlkZXIgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcbmltcG9ydCB7IHN0cmluZ2lmeSwganNvbkV2YWwsIGNvbnRhaW5zLCBhc3NlcnQsIGlzTm9kZVNkaywgc3RyaW5nVG9CeXRlQXJyYXksIFNoYTEsIGJhc2U2NCwgZGVlcENvcHksIGJhc2U2NEVuY29kZSwgaXNNb2JpbGVDb3Jkb3ZhLCBzdHJpbmdMZW5ndGgsIERlZmVycmVkLCBzYWZlR2V0LCBpc0FkbWluLCBpc1ZhbGlkRm9ybWF0LCBpc0VtcHR5LCBpc1JlYWN0TmF0aXZlLCBhc3NlcnRpb25FcnJvciwgbWFwLCBxdWVyeXN0cmluZywgZXJyb3JQcmVmaXgsIGdldE1vZHVsYXJJbnN0YW5jZSwgZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdG5hbWVBbmRQb3J0LCBjcmVhdGVNb2NrVXNlclRva2VuIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgTG9nZ2VyLCBMb2dMZXZlbCB9IGZyb20gJ0BmaXJlYmFzZS9sb2dnZXInO1xuXG5jb25zdCBuYW1lID0gXCJAZmlyZWJhc2UvZGF0YWJhc2VcIjtcbmNvbnN0IHZlcnNpb24gPSBcIjEuMC4xMFwiO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFRoZSBzZW12ZXIgKHd3dy5zZW12ZXIub3JnKSB2ZXJzaW9uIG9mIHRoZSBTREsuICovXG5sZXQgU0RLX1ZFUlNJT04gPSAnJztcbi8qKlxuICogU0RLX1ZFUlNJT04gc2hvdWxkIGJlIHNldCBiZWZvcmUgYW55IGRhdGFiYXNlIGluc3RhbmNlIGlzIGNyZWF0ZWRcbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBzZXRTREtWZXJzaW9uKHZlcnNpb24pIHtcbiAgICBTREtfVkVSU0lPTiA9IHZlcnNpb247XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFdyYXBzIGEgRE9NIFN0b3JhZ2Ugb2JqZWN0IGFuZDpcbiAqIC0gYXV0b21hdGljYWxseSBlbmNvZGUgb2JqZWN0cyBhcyBKU09OIHN0cmluZ3MgYmVmb3JlIHN0b3JpbmcgdGhlbSB0byBhbGxvdyB1cyB0byBzdG9yZSBhcmJpdHJhcnkgdHlwZXMuXG4gKiAtIHByZWZpeGVzIG5hbWVzIHdpdGggXCJmaXJlYmFzZTpcIiB0byBhdm9pZCBjb2xsaXNpb25zIHdpdGggYXBwIGRhdGEuXG4gKlxuICogV2UgYXV0b21hdGljYWxseSAoc2VlIHN0b3JhZ2UuanMpIGNyZWF0ZSB0d28gc3VjaCB3cmFwcGVycywgb25lIGZvciBzZXNzaW9uU3RvcmFnZSxcbiAqIGFuZCBvbmUgZm9yIGxvY2FsU3RvcmFnZS5cbiAqXG4gKi9cbmNsYXNzIERPTVN0b3JhZ2VXcmFwcGVyIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gZG9tU3RvcmFnZV8gLSBUaGUgdW5kZXJseWluZyBzdG9yYWdlIG9iamVjdCAoZS5nLiBsb2NhbFN0b3JhZ2Ugb3Igc2Vzc2lvblN0b3JhZ2UpXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZG9tU3RvcmFnZV8pIHtcbiAgICAgICAgdGhpcy5kb21TdG9yYWdlXyA9IGRvbVN0b3JhZ2VfO1xuICAgICAgICAvLyBVc2UgYSBwcmVmaXggdG8gYXZvaWQgY29sbGlzaW9ucyB3aXRoIG90aGVyIHN0dWZmIHNhdmVkIGJ5IHRoZSBhcHAuXG4gICAgICAgIHRoaXMucHJlZml4XyA9ICdmaXJlYmFzZTonO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ga2V5IC0gVGhlIGtleSB0byBzYXZlIHRoZSB2YWx1ZSB1bmRlclxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSBiZWluZyBzdG9yZWQsIG9yIG51bGwgdG8gcmVtb3ZlIHRoZSBrZXkuXG4gICAgICovXG4gICAgc2V0KGtleSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuZG9tU3RvcmFnZV8ucmVtb3ZlSXRlbSh0aGlzLnByZWZpeGVkTmFtZV8oa2V5KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRvbVN0b3JhZ2VfLnNldEl0ZW0odGhpcy5wcmVmaXhlZE5hbWVfKGtleSksIHN0cmluZ2lmeSh2YWx1ZSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIFRoZSB2YWx1ZSB0aGF0IHdhcyBzdG9yZWQgdW5kZXIgdGhpcyBrZXksIG9yIG51bGxcbiAgICAgKi9cbiAgICBnZXQoa2V5KSB7XG4gICAgICAgIGNvbnN0IHN0b3JlZFZhbCA9IHRoaXMuZG9tU3RvcmFnZV8uZ2V0SXRlbSh0aGlzLnByZWZpeGVkTmFtZV8oa2V5KSk7XG4gICAgICAgIGlmIChzdG9yZWRWYWwgPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ganNvbkV2YWwoc3RvcmVkVmFsKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW1vdmUoa2V5KSB7XG4gICAgICAgIHRoaXMuZG9tU3RvcmFnZV8ucmVtb3ZlSXRlbSh0aGlzLnByZWZpeGVkTmFtZV8oa2V5KSk7XG4gICAgfVxuICAgIHByZWZpeGVkTmFtZV8obmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcmVmaXhfICsgbmFtZTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvbVN0b3JhZ2VfLnRvU3RyaW5nKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbi1tZW1vcnkgc3RvcmFnZSBpbXBsZW1lbnRhdGlvbiB0aGF0IG1hdGNoZXMgdGhlIEFQSSBvZiBET01TdG9yYWdlV3JhcHBlclxuICogKFRPRE86IGNyZWF0ZSBpbnRlcmZhY2UgZm9yIGJvdGggdG8gaW1wbGVtZW50KS5cbiAqL1xuY2xhc3MgTWVtb3J5U3RvcmFnZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuY2FjaGVfID0ge307XG4gICAgICAgIHRoaXMuaXNJbk1lbW9yeVN0b3JhZ2UgPSB0cnVlO1xuICAgIH1cbiAgICBzZXQoa2V5LCB2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuY2FjaGVfW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNhY2hlX1trZXldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0KGtleSkge1xuICAgICAgICBpZiAoY29udGFpbnModGhpcy5jYWNoZV8sIGtleSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhY2hlX1trZXldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZW1vdmUoa2V5KSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmNhY2hlX1trZXldO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSGVscGVyIHRvIGNyZWF0ZSBhIERPTVN0b3JhZ2VXcmFwcGVyIG9yIGVsc2UgZmFsbCBiYWNrIHRvIE1lbW9yeVN0b3JhZ2UuXG4gKiBUT0RPOiBPbmNlIE1lbW9yeVN0b3JhZ2UgYW5kIERPTVN0b3JhZ2VXcmFwcGVyIGhhdmUgYSBzaGFyZWQgaW50ZXJmYWNlIHRoaXMgbWV0aG9kIGFubm90YXRpb24gc2hvdWxkIGNoYW5nZVxuICogdG8gcmVmbGVjdCB0aGlzIHR5cGVcbiAqXG4gKiBAcGFyYW0gZG9tU3RvcmFnZU5hbWUgLSBOYW1lIG9mIHRoZSB1bmRlcmx5aW5nIHN0b3JhZ2Ugb2JqZWN0XG4gKiAgIChlLmcuICdsb2NhbFN0b3JhZ2UnIG9yICdzZXNzaW9uU3RvcmFnZScpLlxuICogQHJldHVybnMgVHVybmluZyBvZmYgdHlwZSBpbmZvcm1hdGlvbiB1bnRpbCBhIGNvbW1vbiBpbnRlcmZhY2UgaXMgZGVmaW5lZC5cbiAqL1xuY29uc3QgY3JlYXRlU3RvcmFnZWZvciA9IGZ1bmN0aW9uIChkb21TdG9yYWdlTmFtZSkge1xuICAgIHRyeSB7XG4gICAgICAgIC8vIE5PVEU6IGp1c3QgYWNjZXNzaW5nIFwibG9jYWxTdG9yYWdlXCIgb3IgXCJ3aW5kb3dbJ2xvY2FsU3RvcmFnZSddXCIgbWF5IHRocm93IGEgc2VjdXJpdHkgZXhjZXB0aW9uLFxuICAgICAgICAvLyBzbyBpdCBtdXN0IGJlIGluc2lkZSB0aGUgdHJ5L2NhdGNoLlxuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICAgIHR5cGVvZiB3aW5kb3dbZG9tU3RvcmFnZU5hbWVdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgLy8gTmVlZCB0byB0ZXN0IGNhY2hlLiBKdXN0IGJlY2F1c2UgaXQncyBoZXJlIGRvZXNuJ3QgbWVhbiBpdCB3b3Jrc1xuICAgICAgICAgICAgY29uc3QgZG9tU3RvcmFnZSA9IHdpbmRvd1tkb21TdG9yYWdlTmFtZV07XG4gICAgICAgICAgICBkb21TdG9yYWdlLnNldEl0ZW0oJ2ZpcmViYXNlOnNlbnRpbmVsJywgJ2NhY2hlJyk7XG4gICAgICAgICAgICBkb21TdG9yYWdlLnJlbW92ZUl0ZW0oJ2ZpcmViYXNlOnNlbnRpbmVsJyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IERPTVN0b3JhZ2VXcmFwcGVyKGRvbVN0b3JhZ2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlKSB7IH1cbiAgICAvLyBGYWlsZWQgdG8gY3JlYXRlIHdyYXBwZXIuICBKdXN0IHJldHVybiBpbi1tZW1vcnkgc3RvcmFnZS5cbiAgICAvLyBUT0RPOiBsb2c/XG4gICAgcmV0dXJuIG5ldyBNZW1vcnlTdG9yYWdlKCk7XG59O1xuLyoqIEEgc3RvcmFnZSBvYmplY3QgdGhhdCBsYXN0cyBhY3Jvc3Mgc2Vzc2lvbnMgKi9cbmNvbnN0IFBlcnNpc3RlbnRTdG9yYWdlID0gY3JlYXRlU3RvcmFnZWZvcignbG9jYWxTdG9yYWdlJyk7XG4vKiogQSBzdG9yYWdlIG9iamVjdCB0aGF0IG9ubHkgbGFzdHMgb25lIHNlc3Npb24gKi9cbmNvbnN0IFNlc3Npb25TdG9yYWdlID0gY3JlYXRlU3RvcmFnZWZvcignc2Vzc2lvblN0b3JhZ2UnKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNvbnN0IGxvZ0NsaWVudCA9IG5ldyBMb2dnZXIoJ0BmaXJlYmFzZS9kYXRhYmFzZScpO1xuLyoqXG4gKiBSZXR1cm5zIGEgbG9jYWxseS11bmlxdWUgSUQgKGdlbmVyYXRlZCBieSBqdXN0IGluY3JlbWVudGluZyB1cCBmcm9tIDAgZWFjaCB0aW1lIGl0cyBjYWxsZWQpLlxuICovXG5jb25zdCBMVUlER2VuZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBsZXQgaWQgPSAxO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBpZCsrO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBTaGExIGhhc2ggb2YgdGhlIGlucHV0IHN0cmluZ1xuICogQHBhcmFtIHN0ciAtIFRoZSBzdHJpbmcgdG8gaGFzaFxuICogQHJldHVybnMgeyFzdHJpbmd9IFRoZSByZXN1bHRpbmcgaGFzaFxuICovXG5jb25zdCBzaGExID0gZnVuY3Rpb24gKHN0cikge1xuICAgIGNvbnN0IHV0ZjhCeXRlcyA9IHN0cmluZ1RvQnl0ZUFycmF5KHN0cik7XG4gICAgY29uc3Qgc2hhMSA9IG5ldyBTaGExKCk7XG4gICAgc2hhMS51cGRhdGUodXRmOEJ5dGVzKTtcbiAgICBjb25zdCBzaGExQnl0ZXMgPSBzaGExLmRpZ2VzdCgpO1xuICAgIHJldHVybiBiYXNlNjQuZW5jb2RlQnl0ZUFycmF5KHNoYTFCeXRlcyk7XG59O1xuY29uc3QgYnVpbGRMb2dNZXNzYWdlXyA9IGZ1bmN0aW9uICguLi52YXJBcmdzKSB7XG4gICAgbGV0IG1lc3NhZ2UgPSAnJztcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhckFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgYXJnID0gdmFyQXJnc1tpXTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJnKSB8fFxuICAgICAgICAgICAgKGFyZyAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnICYmXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICB0eXBlb2YgYXJnLmxlbmd0aCA9PT0gJ251bWJlcicpKSB7XG4gICAgICAgICAgICBtZXNzYWdlICs9IGJ1aWxkTG9nTWVzc2FnZV8uYXBwbHkobnVsbCwgYXJnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgYXJnID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgbWVzc2FnZSArPSBzdHJpbmdpZnkoYXJnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgKz0gYXJnO1xuICAgICAgICB9XG4gICAgICAgIG1lc3NhZ2UgKz0gJyAnO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbn07XG4vKipcbiAqIFVzZSB0aGlzIGZvciBhbGwgZGVidWcgbWVzc2FnZXMgaW4gRmlyZWJhc2UuXG4gKi9cbmxldCBsb2dnZXIgPSBudWxsO1xuLyoqXG4gKiBGbGFnIHRvIGNoZWNrIGZvciBsb2cgYXZhaWxhYmlsaXR5IG9uIGZpcnN0IGxvZyBtZXNzYWdlXG4gKi9cbmxldCBmaXJzdExvZ18gPSB0cnVlO1xuLyoqXG4gKiBUaGUgaW1wbGVtZW50YXRpb24gb2YgRmlyZWJhc2UuZW5hYmxlTG9nZ2luZyAoZGVmaW5lZCBoZXJlIHRvIGJyZWFrIGRlcGVuZGVuY2llcylcbiAqIEBwYXJhbSBsb2dnZXJfIC0gQSBmbGFnIHRvIHR1cm4gb24gbG9nZ2luZywgb3IgYSBjdXN0b20gbG9nZ2VyXG4gKiBAcGFyYW0gcGVyc2lzdGVudCAtIFdoZXRoZXIgb3Igbm90IHRvIHBlcnNpc3QgbG9nZ2luZyBzZXR0aW5ncyBhY3Jvc3MgcmVmcmVzaGVzXG4gKi9cbmNvbnN0IGVuYWJsZUxvZ2dpbmckMSA9IGZ1bmN0aW9uIChsb2dnZXJfLCBwZXJzaXN0ZW50KSB7XG4gICAgYXNzZXJ0KCFwZXJzaXN0ZW50IHx8IGxvZ2dlcl8gPT09IHRydWUgfHwgbG9nZ2VyXyA9PT0gZmFsc2UsIFwiQ2FuJ3QgdHVybiBvbiBjdXN0b20gbG9nZ2VycyBwZXJzaXN0ZW50bHkuXCIpO1xuICAgIGlmIChsb2dnZXJfID09PSB0cnVlKSB7XG4gICAgICAgIGxvZ0NsaWVudC5sb2dMZXZlbCA9IExvZ0xldmVsLlZFUkJPU0U7XG4gICAgICAgIGxvZ2dlciA9IGxvZ0NsaWVudC5sb2cuYmluZChsb2dDbGllbnQpO1xuICAgICAgICBpZiAocGVyc2lzdGVudCkge1xuICAgICAgICAgICAgU2Vzc2lvblN0b3JhZ2Uuc2V0KCdsb2dnaW5nX2VuYWJsZWQnLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgbG9nZ2VyXyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBsb2dnZXIgPSBsb2dnZXJfO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbG9nZ2VyID0gbnVsbDtcbiAgICAgICAgU2Vzc2lvblN0b3JhZ2UucmVtb3ZlKCdsb2dnaW5nX2VuYWJsZWQnKTtcbiAgICB9XG59O1xuY29uc3QgbG9nID0gZnVuY3Rpb24gKC4uLnZhckFyZ3MpIHtcbiAgICBpZiAoZmlyc3RMb2dfID09PSB0cnVlKSB7XG4gICAgICAgIGZpcnN0TG9nXyA9IGZhbHNlO1xuICAgICAgICBpZiAobG9nZ2VyID09PSBudWxsICYmIFNlc3Npb25TdG9yYWdlLmdldCgnbG9nZ2luZ19lbmFibGVkJykgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGVuYWJsZUxvZ2dpbmckMSh0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAobG9nZ2VyKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBidWlsZExvZ01lc3NhZ2VfLmFwcGx5KG51bGwsIHZhckFyZ3MpO1xuICAgICAgICBsb2dnZXIobWVzc2FnZSk7XG4gICAgfVxufTtcbmNvbnN0IGxvZ1dyYXBwZXIgPSBmdW5jdGlvbiAocHJlZml4KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICguLi52YXJBcmdzKSB7XG4gICAgICAgIGxvZyhwcmVmaXgsIC4uLnZhckFyZ3MpO1xuICAgIH07XG59O1xuY29uc3QgZXJyb3IgPSBmdW5jdGlvbiAoLi4udmFyQXJncykge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSAnRklSRUJBU0UgSU5URVJOQUwgRVJST1I6ICcgKyBidWlsZExvZ01lc3NhZ2VfKC4uLnZhckFyZ3MpO1xuICAgIGxvZ0NsaWVudC5lcnJvcihtZXNzYWdlKTtcbn07XG5jb25zdCBmYXRhbCA9IGZ1bmN0aW9uICguLi52YXJBcmdzKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGBGSVJFQkFTRSBGQVRBTCBFUlJPUjogJHtidWlsZExvZ01lc3NhZ2VfKC4uLnZhckFyZ3MpfWA7XG4gICAgbG9nQ2xpZW50LmVycm9yKG1lc3NhZ2UpO1xuICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbn07XG5jb25zdCB3YXJuID0gZnVuY3Rpb24gKC4uLnZhckFyZ3MpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gJ0ZJUkVCQVNFIFdBUk5JTkc6ICcgKyBidWlsZExvZ01lc3NhZ2VfKC4uLnZhckFyZ3MpO1xuICAgIGxvZ0NsaWVudC53YXJuKG1lc3NhZ2UpO1xufTtcbi8qKlxuICogTG9ncyBhIHdhcm5pbmcgaWYgdGhlIGNvbnRhaW5pbmcgcGFnZSB1c2VzIGh0dHBzLiBDYWxsZWQgd2hlbiBhIGNhbGwgdG8gbmV3IEZpcmViYXNlXG4gKiBkb2VzIG5vdCB1c2UgaHR0cHMuXG4gKi9cbmNvbnN0IHdhcm5JZlBhZ2VJc1NlY3VyZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAvLyBCZSB2ZXJ5IGNhcmVmdWwgYWNjZXNzaW5nIGJyb3dzZXIgZ2xvYmFscy4gV2hvIGtub3dzIHdoYXQgbWF5IG9yIG1heSBub3QgZXhpc3QuXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbiAmJlxuICAgICAgICB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgJiZcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLnByb3RvY29sLmluZGV4T2YoJ2h0dHBzOicpICE9PSAtMSkge1xuICAgICAgICB3YXJuKCdJbnNlY3VyZSBGaXJlYmFzZSBhY2Nlc3MgZnJvbSBhIHNlY3VyZSBwYWdlLiAnICtcbiAgICAgICAgICAgICdQbGVhc2UgdXNlIGh0dHBzIGluIGNhbGxzIHRvIG5ldyBGaXJlYmFzZSgpLicpO1xuICAgIH1cbn07XG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBkYXRhIGlzIE5hTiwgb3IgKy8tIEluZmluaXR5LlxuICovXG5jb25zdCBpc0ludmFsaWRKU09OTnVtYmVyID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICByZXR1cm4gKHR5cGVvZiBkYXRhID09PSAnbnVtYmVyJyAmJlxuICAgICAgICAoZGF0YSAhPT0gZGF0YSB8fCAvLyBOYU5cbiAgICAgICAgICAgIGRhdGEgPT09IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSB8fFxuICAgICAgICAgICAgZGF0YSA9PT0gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZKSk7XG59O1xuY29uc3QgZXhlY3V0ZVdoZW5ET01SZWFkeSA9IGZ1bmN0aW9uIChmbikge1xuICAgIGlmIChpc05vZGVTZGsoKSB8fCBkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnKSB7XG4gICAgICAgIGZuKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBNb2RlbGVkIGFmdGVyIGpRdWVyeS4gVHJ5IERPTUNvbnRlbnRMb2FkZWQgYW5kIG9ucmVhZHlzdGF0ZWNoYW5nZSAod2hpY2hcbiAgICAgICAgLy8gZmlyZSBiZWZvcmUgb25sb2FkKSwgYnV0IGZhbGwgYmFjayB0byBvbmxvYWQuXG4gICAgICAgIGxldCBjYWxsZWQgPSBmYWxzZTtcbiAgICAgICAgY29uc3Qgd3JhcHBlZEZuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5ib2R5KSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCh3cmFwcGVkRm4sIE1hdGguZmxvb3IoMTApKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWNhbGxlZCkge1xuICAgICAgICAgICAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgZm4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCB3cmFwcGVkRm4sIGZhbHNlKTtcbiAgICAgICAgICAgIC8vIGZhbGxiYWNrIHRvIG9ubG9hZC5cbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgd3JhcHBlZEZuLCBmYWxzZSk7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRvY3VtZW50LmF0dGFjaEV2ZW50KSB7XG4gICAgICAgICAgICAvLyBJRS5cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICBkb2N1bWVudC5hdHRhY2hFdmVudCgnb25yZWFkeXN0YXRlY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnKSB7XG4gICAgICAgICAgICAgICAgICAgIHdyYXBwZWRGbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gZmFsbGJhY2sgdG8gb25sb2FkLlxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgIHdpbmRvdy5hdHRhY2hFdmVudCgnb25sb2FkJywgd3JhcHBlZEZuKTtcbiAgICAgICAgICAgIC8vIGpRdWVyeSBoYXMgYW4gZXh0cmEgaGFjayBmb3IgSUUgdGhhdCB3ZSBjb3VsZCBlbXBsb3kgKGJhc2VkIG9uXG4gICAgICAgICAgICAvLyBodHRwOi8vamF2YXNjcmlwdC5ud2JveC5jb20vSUVDb250ZW50TG9hZGVkLykgQnV0IGl0IGxvb2tzIHJlYWxseSBvbGQuXG4gICAgICAgICAgICAvLyBJJ20gaG9waW5nIHdlIGRvbid0IG5lZWQgaXQuXG4gICAgICAgIH1cbiAgICB9XG59O1xuLyoqXG4gKiBNaW5pbXVtIGtleSBuYW1lLiBJbnZhbGlkIGZvciBhY3R1YWwgZGF0YSwgdXNlZCBhcyBhIG1hcmtlciB0byBzb3J0IGJlZm9yZSBhbnkgdmFsaWQgbmFtZXNcbiAqL1xuY29uc3QgTUlOX05BTUUgPSAnW01JTl9OQU1FXSc7XG4vKipcbiAqIE1heGltdW0ga2V5IG5hbWUuIEludmFsaWQgZm9yIGFjdHVhbCBkYXRhLCB1c2VkIGFzIGEgbWFya2VyIHRvIHNvcnQgYWJvdmUgYW55IHZhbGlkIG5hbWVzXG4gKi9cbmNvbnN0IE1BWF9OQU1FID0gJ1tNQVhfTkFNRV0nO1xuLyoqXG4gKiBDb21wYXJlcyB2YWxpZCBGaXJlYmFzZSBrZXkgbmFtZXMsIHBsdXMgbWluIGFuZCBtYXggbmFtZVxuICovXG5jb25zdCBuYW1lQ29tcGFyZSA9IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgaWYgKGEgPT09IGIpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGVsc2UgaWYgKGEgPT09IE1JTl9OQU1FIHx8IGIgPT09IE1BWF9OQU1FKSB7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gICAgZWxzZSBpZiAoYiA9PT0gTUlOX05BTUUgfHwgYSA9PT0gTUFYX05BTUUpIHtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBhQXNJbnQgPSB0cnlQYXJzZUludChhKSwgYkFzSW50ID0gdHJ5UGFyc2VJbnQoYik7XG4gICAgICAgIGlmIChhQXNJbnQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChiQXNJbnQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYUFzSW50IC0gYkFzSW50ID09PSAwID8gYS5sZW5ndGggLSBiLmxlbmd0aCA6IGFBc0ludCAtIGJBc0ludDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChiQXNJbnQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGEgPCBiID8gLTEgOiAxO1xuICAgICAgICB9XG4gICAgfVxufTtcbi8qKlxuICogQHJldHVybnMgeyFudW1iZXJ9IGNvbXBhcmlzb24gcmVzdWx0LlxuICovXG5jb25zdCBzdHJpbmdDb21wYXJlID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICBpZiAoYSA9PT0gYikge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgZWxzZSBpZiAoYSA8IGIpIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgfVxufTtcbmNvbnN0IHJlcXVpcmVLZXkgPSBmdW5jdGlvbiAoa2V5LCBvYmopIHtcbiAgICBpZiAob2JqICYmIGtleSBpbiBvYmopIHtcbiAgICAgICAgcmV0dXJuIG9ialtrZXldO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkIGtleSAoJyArIGtleSArICcpIGluIG9iamVjdDogJyArIHN0cmluZ2lmeShvYmopKTtcbiAgICB9XG59O1xuY29uc3QgT2JqZWN0VG9VbmlxdWVLZXkgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnIHx8IG9iaiA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gc3RyaW5naWZ5KG9iaik7XG4gICAgfVxuICAgIGNvbnN0IGtleXMgPSBbXTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZ3VhcmQtZm9yLWluXG4gICAgZm9yIChjb25zdCBrIGluIG9iaikge1xuICAgICAgICBrZXlzLnB1c2goayk7XG4gICAgfVxuICAgIC8vIEV4cG9ydCBhcyBqc29uLCBidXQgd2l0aCB0aGUga2V5cyBzb3J0ZWQuXG4gICAga2V5cy5zb3J0KCk7XG4gICAgbGV0IGtleSA9ICd7JztcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGkgIT09IDApIHtcbiAgICAgICAgICAgIGtleSArPSAnLCc7XG4gICAgICAgIH1cbiAgICAgICAga2V5ICs9IHN0cmluZ2lmeShrZXlzW2ldKTtcbiAgICAgICAga2V5ICs9ICc6JztcbiAgICAgICAga2V5ICs9IE9iamVjdFRvVW5pcXVlS2V5KG9ialtrZXlzW2ldXSk7XG4gICAgfVxuICAgIGtleSArPSAnfSc7XG4gICAgcmV0dXJuIGtleTtcbn07XG4vKipcbiAqIFNwbGl0cyBhIHN0cmluZyBpbnRvIGEgbnVtYmVyIG9mIHNtYWxsZXIgc2VnbWVudHMgb2YgbWF4aW11bSBzaXplXG4gKiBAcGFyYW0gc3RyIC0gVGhlIHN0cmluZ1xuICogQHBhcmFtIHNlZ3NpemUgLSBUaGUgbWF4aW11bSBudW1iZXIgb2YgY2hhcnMgaW4gdGhlIHN0cmluZy5cbiAqIEByZXR1cm5zIFRoZSBzdHJpbmcsIHNwbGl0IGludG8gYXBwcm9wcmlhdGVseS1zaXplZCBjaHVua3NcbiAqL1xuY29uc3Qgc3BsaXRTdHJpbmdCeVNpemUgPSBmdW5jdGlvbiAoc3RyLCBzZWdzaXplKSB7XG4gICAgY29uc3QgbGVuID0gc3RyLmxlbmd0aDtcbiAgICBpZiAobGVuIDw9IHNlZ3NpemUpIHtcbiAgICAgICAgcmV0dXJuIFtzdHJdO1xuICAgIH1cbiAgICBjb25zdCBkYXRhU2VncyA9IFtdO1xuICAgIGZvciAobGV0IGMgPSAwOyBjIDwgbGVuOyBjICs9IHNlZ3NpemUpIHtcbiAgICAgICAgaWYgKGMgKyBzZWdzaXplID4gbGVuKSB7XG4gICAgICAgICAgICBkYXRhU2Vncy5wdXNoKHN0ci5zdWJzdHJpbmcoYywgbGVuKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkYXRhU2Vncy5wdXNoKHN0ci5zdWJzdHJpbmcoYywgYyArIHNlZ3NpemUpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGF0YVNlZ3M7XG59O1xuLyoqXG4gKiBBcHBseSBhIGZ1bmN0aW9uIHRvIGVhY2ggKGtleSwgdmFsdWUpIHBhaXIgaW4gYW4gb2JqZWN0IG9yXG4gKiBhcHBseSBhIGZ1bmN0aW9uIHRvIGVhY2ggKGluZGV4LCB2YWx1ZSkgcGFpciBpbiBhbiBhcnJheVxuICogQHBhcmFtIG9iaiAtIFRoZSBvYmplY3Qgb3IgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyXG4gKiBAcGFyYW0gZm4gLSBUaGUgZnVuY3Rpb24gdG8gYXBwbHlcbiAqL1xuZnVuY3Rpb24gZWFjaChvYmosIGZuKSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XG4gICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgZm4oa2V5LCBvYmpba2V5XSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIEJvcnJvd2VkIGZyb20gaHR0cDovL2hnLnNlY29uZGxpZmUuY29tL2xsc2Qvc3JjL3RpcC9qcy90eXBlZGFycmF5LmpzIChNSVQgTGljZW5zZSlcbiAqIEkgbWFkZSBvbmUgbW9kaWZpY2F0aW9uIGF0IHRoZSBlbmQgYW5kIHJlbW92ZWQgdGhlIE5hTiAvIEluZmluaXR5XG4gKiBoYW5kbGluZyAoc2luY2UgaXQgc2VlbWVkIGJyb2tlbiBbY2F1c2VkIGFuIG92ZXJmbG93XSBhbmQgd2UgZG9uJ3QgbmVlZCBpdCkuICBTZWUgTUpMIGNvbW1lbnRzLlxuICogQHBhcmFtIHYgLSBBIGRvdWJsZVxuICpcbiAqL1xuY29uc3QgZG91YmxlVG9JRUVFNzU0U3RyaW5nID0gZnVuY3Rpb24gKHYpIHtcbiAgICBhc3NlcnQoIWlzSW52YWxpZEpTT05OdW1iZXIodiksICdJbnZhbGlkIEpTT04gbnVtYmVyJyk7IC8vIE1KTFxuICAgIGNvbnN0IGViaXRzID0gMTEsIGZiaXRzID0gNTI7XG4gICAgY29uc3QgYmlhcyA9ICgxIDw8IChlYml0cyAtIDEpKSAtIDE7XG4gICAgbGV0IHMsIGUsIGYsIGxuLCBpO1xuICAgIC8vIENvbXB1dGUgc2lnbiwgZXhwb25lbnQsIGZyYWN0aW9uXG4gICAgLy8gU2tpcCBOYU4gLyBJbmZpbml0eSBoYW5kbGluZyAtLU1KTC5cbiAgICBpZiAodiA9PT0gMCkge1xuICAgICAgICBlID0gMDtcbiAgICAgICAgZiA9IDA7XG4gICAgICAgIHMgPSAxIC8gdiA9PT0gLUluZmluaXR5ID8gMSA6IDA7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBzID0gdiA8IDA7XG4gICAgICAgIHYgPSBNYXRoLmFicyh2KTtcbiAgICAgICAgaWYgKHYgPj0gTWF0aC5wb3coMiwgMSAtIGJpYXMpKSB7XG4gICAgICAgICAgICAvLyBOb3JtYWxpemVkXG4gICAgICAgICAgICBsbiA9IE1hdGgubWluKE1hdGguZmxvb3IoTWF0aC5sb2codikgLyBNYXRoLkxOMiksIGJpYXMpO1xuICAgICAgICAgICAgZSA9IGxuICsgYmlhcztcbiAgICAgICAgICAgIGYgPSBNYXRoLnJvdW5kKHYgKiBNYXRoLnBvdygyLCBmYml0cyAtIGxuKSAtIE1hdGgucG93KDIsIGZiaXRzKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBEZW5vcm1hbGl6ZWRcbiAgICAgICAgICAgIGUgPSAwO1xuICAgICAgICAgICAgZiA9IE1hdGgucm91bmQodiAvIE1hdGgucG93KDIsIDEgLSBiaWFzIC0gZmJpdHMpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBQYWNrIHNpZ24sIGV4cG9uZW50LCBmcmFjdGlvblxuICAgIGNvbnN0IGJpdHMgPSBbXTtcbiAgICBmb3IgKGkgPSBmYml0czsgaTsgaSAtPSAxKSB7XG4gICAgICAgIGJpdHMucHVzaChmICUgMiA/IDEgOiAwKTtcbiAgICAgICAgZiA9IE1hdGguZmxvb3IoZiAvIDIpO1xuICAgIH1cbiAgICBmb3IgKGkgPSBlYml0czsgaTsgaSAtPSAxKSB7XG4gICAgICAgIGJpdHMucHVzaChlICUgMiA/IDEgOiAwKTtcbiAgICAgICAgZSA9IE1hdGguZmxvb3IoZSAvIDIpO1xuICAgIH1cbiAgICBiaXRzLnB1c2gocyA/IDEgOiAwKTtcbiAgICBiaXRzLnJldmVyc2UoKTtcbiAgICBjb25zdCBzdHIgPSBiaXRzLmpvaW4oJycpO1xuICAgIC8vIFJldHVybiB0aGUgZGF0YSBhcyBhIGhleCBzdHJpbmcuIC0tTUpMXG4gICAgbGV0IGhleEJ5dGVTdHJpbmcgPSAnJztcbiAgICBmb3IgKGkgPSAwOyBpIDwgNjQ7IGkgKz0gOCkge1xuICAgICAgICBsZXQgaGV4Qnl0ZSA9IHBhcnNlSW50KHN0ci5zdWJzdHIoaSwgOCksIDIpLnRvU3RyaW5nKDE2KTtcbiAgICAgICAgaWYgKGhleEJ5dGUubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBoZXhCeXRlID0gJzAnICsgaGV4Qnl0ZTtcbiAgICAgICAgfVxuICAgICAgICBoZXhCeXRlU3RyaW5nID0gaGV4Qnl0ZVN0cmluZyArIGhleEJ5dGU7XG4gICAgfVxuICAgIHJldHVybiBoZXhCeXRlU3RyaW5nLnRvTG93ZXJDYXNlKCk7XG59O1xuLyoqXG4gKiBVc2VkIHRvIGRldGVjdCBpZiB3ZSdyZSBpbiBhIENocm9tZSBjb250ZW50IHNjcmlwdCAod2hpY2ggZXhlY3V0ZXMgaW4gYW5cbiAqIGlzb2xhdGVkIGVudmlyb25tZW50IHdoZXJlIGxvbmctcG9sbGluZyBkb2Vzbid0IHdvcmspLlxuICovXG5jb25zdCBpc0Nocm9tZUV4dGVuc2lvbkNvbnRlbnRTY3JpcHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICEhKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnICYmXG4gICAgICAgIHdpbmRvd1snY2hyb21lJ10gJiZcbiAgICAgICAgd2luZG93WydjaHJvbWUnXVsnZXh0ZW5zaW9uJ10gJiZcbiAgICAgICAgIS9eY2hyb21lLy50ZXN0KHdpbmRvdy5sb2NhdGlvbi5ocmVmKSk7XG59O1xuLyoqXG4gKiBVc2VkIHRvIGRldGVjdCBpZiB3ZSdyZSBpbiBhIFdpbmRvd3MgOCBTdG9yZSBhcHAuXG4gKi9cbmNvbnN0IGlzV2luZG93c1N0b3JlQXBwID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIENoZWNrIGZvciB0aGUgcHJlc2VuY2Ugb2YgYSBjb3VwbGUgV2luUlQgZ2xvYmFsc1xuICAgIHJldHVybiB0eXBlb2YgV2luZG93cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIFdpbmRvd3MuVUkgPT09ICdvYmplY3QnO1xufTtcbi8qKlxuICogQ29udmVydHMgYSBzZXJ2ZXIgZXJyb3IgY29kZSB0byBhIEphdmFTY3JpcHQgRXJyb3JcbiAqL1xuZnVuY3Rpb24gZXJyb3JGb3JTZXJ2ZXJDb2RlKGNvZGUsIHF1ZXJ5KSB7XG4gICAgbGV0IHJlYXNvbiA9ICdVbmtub3duIEVycm9yJztcbiAgICBpZiAoY29kZSA9PT0gJ3Rvb19iaWcnKSB7XG4gICAgICAgIHJlYXNvbiA9XG4gICAgICAgICAgICAnVGhlIGRhdGEgcmVxdWVzdGVkIGV4Y2VlZHMgdGhlIG1heGltdW0gc2l6ZSAnICtcbiAgICAgICAgICAgICAgICAndGhhdCBjYW4gYmUgYWNjZXNzZWQgd2l0aCBhIHNpbmdsZSByZXF1ZXN0Lic7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvZGUgPT09ICdwZXJtaXNzaW9uX2RlbmllZCcpIHtcbiAgICAgICAgcmVhc29uID0gXCJDbGllbnQgZG9lc24ndCBoYXZlIHBlcm1pc3Npb24gdG8gYWNjZXNzIHRoZSBkZXNpcmVkIGRhdGEuXCI7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvZGUgPT09ICd1bmF2YWlsYWJsZScpIHtcbiAgICAgICAgcmVhc29uID0gJ1RoZSBzZXJ2aWNlIGlzIHVuYXZhaWxhYmxlJztcbiAgICB9XG4gICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoY29kZSArICcgYXQgJyArIHF1ZXJ5Ll9wYXRoLnRvU3RyaW5nKCkgKyAnOiAnICsgcmVhc29uKTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGVycm9yLmNvZGUgPSBjb2RlLnRvVXBwZXJDYXNlKCk7XG4gICAgcmV0dXJuIGVycm9yO1xufVxuLyoqXG4gKiBVc2VkIHRvIHRlc3QgZm9yIGludGVnZXItbG9va2luZyBzdHJpbmdzXG4gKi9cbmNvbnN0IElOVEVHRVJfUkVHRVhQXyA9IG5ldyBSZWdFeHAoJ14tPygwKilcXFxcZHsxLDEwfSQnKTtcbi8qKlxuICogRm9yIHVzZSBpbiBrZXlzLCB0aGUgbWluaW11bSBwb3NzaWJsZSAzMi1iaXQgaW50ZWdlci5cbiAqL1xuY29uc3QgSU5URUdFUl8zMl9NSU4gPSAtMjE0NzQ4MzY0ODtcbi8qKlxuICogRm9yIHVzZSBpbiBrZXlzLCB0aGUgbWF4aW11bSBwb3NzaWJsZSAzMi1iaXQgaW50ZWdlci5cbiAqL1xuY29uc3QgSU5URUdFUl8zMl9NQVggPSAyMTQ3NDgzNjQ3O1xuLyoqXG4gKiBJZiB0aGUgc3RyaW5nIGNvbnRhaW5zIGEgMzItYml0IGludGVnZXIsIHJldHVybiBpdC4gIEVsc2UgcmV0dXJuIG51bGwuXG4gKi9cbmNvbnN0IHRyeVBhcnNlSW50ID0gZnVuY3Rpb24gKHN0cikge1xuICAgIGlmIChJTlRFR0VSX1JFR0VYUF8udGVzdChzdHIpKSB7XG4gICAgICAgIGNvbnN0IGludFZhbCA9IE51bWJlcihzdHIpO1xuICAgICAgICBpZiAoaW50VmFsID49IElOVEVHRVJfMzJfTUlOICYmIGludFZhbCA8PSBJTlRFR0VSXzMyX01BWCkge1xuICAgICAgICAgICAgcmV0dXJuIGludFZhbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn07XG4vKipcbiAqIEhlbHBlciB0byBydW4gc29tZSBjb2RlIGJ1dCBjYXRjaCBhbnkgZXhjZXB0aW9ucyBhbmQgcmUtdGhyb3cgdGhlbSBsYXRlci5cbiAqIFVzZWZ1bCBmb3IgcHJldmVudGluZyB1c2VyIGNhbGxiYWNrcyBmcm9tIGJyZWFraW5nIGludGVybmFsIGNvZGUuXG4gKlxuICogUmUtdGhyb3dpbmcgdGhlIGV4Y2VwdGlvbiBmcm9tIGEgc2V0VGltZW91dCBpcyBhIGxpdHRsZSBldmlsLCBidXQgaXQncyB2ZXJ5XG4gKiBjb252ZW5pZW50ICh3ZSBkb24ndCBoYXZlIHRvIHRyeSB0byBmaWd1cmUgb3V0IHdoZW4gaXMgYSBzYWZlIHBvaW50IHRvXG4gKiByZS10aHJvdyBpdCksIGFuZCB0aGUgYmVoYXZpb3Igc2VlbXMgcmVhc29uYWJsZTpcbiAqXG4gKiAqIElmIHlvdSBhcmVuJ3QgcGF1c2luZyBvbiBleGNlcHRpb25zLCB5b3UgZ2V0IGFuIGVycm9yIGluIHRoZSBjb25zb2xlIHdpdGhcbiAqICAgdGhlIGNvcnJlY3Qgc3RhY2sgdHJhY2UuXG4gKiAqIElmIHlvdSdyZSBwYXVzaW5nIG9uIGFsbCBleGNlcHRpb25zLCB0aGUgZGVidWdnZXIgd2lsbCBwYXVzZSBvbiB5b3VyXG4gKiAgIGV4Y2VwdGlvbiBhbmQgdGhlbiBhZ2FpbiB3aGVuIHdlIHJldGhyb3cgaXQuXG4gKiAqIElmIHlvdSdyZSBvbmx5IHBhdXNpbmcgb24gdW5jYXVnaHQgZXhjZXB0aW9ucywgdGhlIGRlYnVnZ2VyIHdpbGwgb25seSBwYXVzZVxuICogICBvbiB1cyByZS10aHJvd2luZyBpdC5cbiAqXG4gKiBAcGFyYW0gZm4gLSBUaGUgY29kZSB0byBndWFyZC5cbiAqL1xuY29uc3QgZXhjZXB0aW9uR3VhcmQgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICB0cnkge1xuICAgICAgICBmbigpO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICAvLyBSZS10aHJvdyBleGNlcHRpb24gd2hlbiBpdCdzIHNhZmUuXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgLy8gSXQgdXNlZCB0byBiZSB0aGF0IFwidGhyb3cgZVwiIHdvdWxkIHJlc3VsdCBpbiBhIGdvb2QgY29uc29sZSBlcnJvciB3aXRoXG4gICAgICAgICAgICAvLyByZWxldmFudCBjb250ZXh0LCBidXQgYXMgb2YgQ2hyb21lIDM5LCB5b3UganVzdCBnZXQgdGhlIGZpcmViYXNlLmpzXG4gICAgICAgICAgICAvLyBmaWxlL2xpbmUgbnVtYmVyIHdoZXJlIHdlIHJlLXRocm93IGl0LCB3aGljaCBpcyB1c2VsZXNzLiBTbyB3ZSBsb2dcbiAgICAgICAgICAgIC8vIGUuc3RhY2sgZXhwbGljaXRseS5cbiAgICAgICAgICAgIGNvbnN0IHN0YWNrID0gZS5zdGFjayB8fCAnJztcbiAgICAgICAgICAgIHdhcm4oJ0V4Y2VwdGlvbiB3YXMgdGhyb3duIGJ5IHVzZXIgY2FsbGJhY2suJywgc3RhY2spO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfSwgTWF0aC5mbG9vcigwKSk7XG4gICAgfVxufTtcbi8qKlxuICogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaWYgd2UgdGhpbmsgd2UncmUgY3VycmVudGx5IGJlaW5nIGNyYXdsZWQuXG4gKi9cbmNvbnN0IGJlaW5nQ3Jhd2xlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCB1c2VyQWdlbnQgPSAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgd2luZG93WyduYXZpZ2F0b3InXSAmJlxuICAgICAgICB3aW5kb3dbJ25hdmlnYXRvciddWyd1c2VyQWdlbnQnXSkgfHxcbiAgICAgICAgJyc7XG4gICAgLy8gRm9yIG5vdyB3ZSB3aGl0ZWxpc3QgdGhlIG1vc3QgcG9wdWxhciBjcmF3bGVycy4gIFdlIHNob3VsZCByZWZpbmUgdGhpcyB0byBiZSB0aGUgc2V0IG9mIGNyYXdsZXJzIHdlXG4gICAgLy8gYmVsaWV2ZSB0byBzdXBwb3J0IEphdmFTY3JpcHQvQUpBWCByZW5kZXJpbmcuXG4gICAgLy8gTk9URTogR29vZ2xlIFdlYm1hc3RlciBUb29scyBkb2Vzbid0IHJlYWxseSBiZWxvbmcsIGJ1dCB0aGVpciBcIlRoaXMgaXMgaG93IGEgdmlzaXRvciB0byB5b3VyIHdlYnNpdGVcbiAgICAvLyB3b3VsZCBoYXZlIHNlZW4gdGhlIHBhZ2VcIiBpcyBmbGFreSBpZiB3ZSBkb24ndCB0cmVhdCBpdCBhcyBhIGNyYXdsZXIuXG4gICAgcmV0dXJuICh1c2VyQWdlbnQuc2VhcmNoKC9nb29nbGVib3R8Z29vZ2xlIHdlYm1hc3RlciB0b29sc3xiaW5nYm90fHlhaG9vISBzbHVycHxiYWlkdXNwaWRlcnx5YW5kZXhib3R8ZHVja2R1Y2tib3QvaSkgPj0gMCk7XG59O1xuLyoqXG4gKiBTYW1lIGFzIHNldFRpbWVvdXQoKSBleGNlcHQgb24gTm9kZS5KUyBpdCB3aWxsIC9ub3QvIHByZXZlbnQgdGhlIHByb2Nlc3MgZnJvbSBleGl0aW5nLlxuICpcbiAqIEl0IGlzIHJlbW92ZWQgd2l0aCBjbGVhclRpbWVvdXQoKSBhcyBub3JtYWwuXG4gKlxuICogQHBhcmFtIGZuIC0gRnVuY3Rpb24gdG8gcnVuLlxuICogQHBhcmFtIHRpbWUgLSBNaWxsaXNlY29uZHMgdG8gd2FpdCBiZWZvcmUgcnVubmluZy5cbiAqIEByZXR1cm5zIFRoZSBzZXRUaW1lb3V0KCkgcmV0dXJuIHZhbHVlLlxuICovXG5jb25zdCBzZXRUaW1lb3V0Tm9uQmxvY2tpbmcgPSBmdW5jdGlvbiAoZm4sIHRpbWUpIHtcbiAgICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dChmbiwgdGltZSk7XG4gICAgLy8gTm90ZTogYXQgdGhlIHRpbWUgb2YgdGhpcyBjb21tZW50LCB1bnJlZlRpbWVyIGlzIHVuZGVyIHRoZSB1bnN0YWJsZSBzZXQgb2YgQVBJcy4gUnVuIHdpdGggLS11bnN0YWJsZSB0byBlbmFibGUgdGhlIEFQSS5cbiAgICBpZiAodHlwZW9mIHRpbWVvdXQgPT09ICdudW1iZXInICYmXG4gICAgICAgIC8vIEB0cy1pZ25vcmUgSXMgb25seSBkZWZpbmVkIGluIERlbm8gZW52aXJvbm1lbnRzLlxuICAgICAgICB0eXBlb2YgRGVubyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgLy8gQHRzLWlnbm9yZSBEZW5vIGFuZCB1bnJlZlRpbWVyIGFyZSBvbmx5IGRlZmluZWQgaW4gRGVubyBlbnZpcm9ubWVudHMuXG4gICAgICAgIERlbm9bJ3VucmVmVGltZXInXSkge1xuICAgICAgICAvLyBAdHMtaWdub3JlIERlbm8gYW5kIHVucmVmVGltZXIgYXJlIG9ubHkgZGVmaW5lZCBpbiBEZW5vIGVudmlyb25tZW50cy5cbiAgICAgICAgRGVuby51bnJlZlRpbWVyKHRpbWVvdXQpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgdGltZW91dCA9PT0gJ29iamVjdCcgJiYgdGltZW91dFsndW5yZWYnXSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB0aW1lb3V0Wyd1bnJlZiddKCk7XG4gICAgfVxuICAgIHJldHVybiB0aW1lb3V0O1xufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQWJzdHJhY3Rpb24gYXJvdW5kIEFwcENoZWNrJ3MgdG9rZW4gZmV0Y2hpbmcgY2FwYWJpbGl0aWVzLlxuICovXG5jbGFzcyBBcHBDaGVja1Rva2VuUHJvdmlkZXIge1xuICAgIGNvbnN0cnVjdG9yKGFwcE5hbWVfLCBhcHBDaGVja1Byb3ZpZGVyKSB7XG4gICAgICAgIHRoaXMuYXBwTmFtZV8gPSBhcHBOYW1lXztcbiAgICAgICAgdGhpcy5hcHBDaGVja1Byb3ZpZGVyID0gYXBwQ2hlY2tQcm92aWRlcjtcbiAgICAgICAgdGhpcy5hcHBDaGVjayA9IGFwcENoZWNrUHJvdmlkZXIgPT09IG51bGwgfHwgYXBwQ2hlY2tQcm92aWRlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogYXBwQ2hlY2tQcm92aWRlci5nZXRJbW1lZGlhdGUoeyBvcHRpb25hbDogdHJ1ZSB9KTtcbiAgICAgICAgaWYgKCF0aGlzLmFwcENoZWNrKSB7XG4gICAgICAgICAgICBhcHBDaGVja1Byb3ZpZGVyID09PSBudWxsIHx8IGFwcENoZWNrUHJvdmlkZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFwcENoZWNrUHJvdmlkZXIuZ2V0KCkudGhlbihhcHBDaGVjayA9PiAodGhpcy5hcHBDaGVjayA9IGFwcENoZWNrKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0VG9rZW4oZm9yY2VSZWZyZXNoKSB7XG4gICAgICAgIGlmICghdGhpcy5hcHBDaGVjaykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBTdXBwb3J0IGRlbGF5ZWQgaW5pdGlhbGl6YXRpb24gb2YgRmlyZWJhc2VBcHBDaGVjay4gVGhpcyBhbGxvd3Mgb3VyXG4gICAgICAgICAgICAgICAgLy8gY3VzdG9tZXJzIHRvIGluaXRpYWxpemUgdGhlIFJUREIgU0RLIGJlZm9yZSBpbml0aWFsaXppbmcgRmlyZWJhc2VcbiAgICAgICAgICAgICAgICAvLyBBcHBDaGVjayBhbmQgZW5zdXJlcyB0aGF0IGFsbCByZXF1ZXN0cyBhcmUgYXV0aGVudGljYXRlZCBpZiBhIHRva2VuXG4gICAgICAgICAgICAgICAgLy8gYmVjb21lcyBhdmFpbGFibGUgYmVmb3JlIHRoZSB0aW1lb3V0IGJlbG93IGV4cGlyZXMuXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFwcENoZWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFRva2VuKGZvcmNlUmVmcmVzaCkudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwQ2hlY2suZ2V0VG9rZW4oZm9yY2VSZWZyZXNoKTtcbiAgICB9XG4gICAgYWRkVG9rZW5DaGFuZ2VMaXN0ZW5lcihsaXN0ZW5lcikge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIChfYSA9IHRoaXMuYXBwQ2hlY2tQcm92aWRlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmdldCgpLnRoZW4oYXBwQ2hlY2sgPT4gYXBwQ2hlY2suYWRkVG9rZW5MaXN0ZW5lcihsaXN0ZW5lcikpO1xuICAgIH1cbiAgICBub3RpZnlGb3JJbnZhbGlkVG9rZW4oKSB7XG4gICAgICAgIHdhcm4oYFByb3ZpZGVkIEFwcENoZWNrIGNyZWRlbnRpYWxzIGZvciB0aGUgYXBwIG5hbWVkIFwiJHt0aGlzLmFwcE5hbWVffVwiIGAgK1xuICAgICAgICAgICAgJ2FyZSBpbnZhbGlkLiBUaGlzIHVzdWFsbHkgaW5kaWNhdGVzIHlvdXIgYXBwIHdhcyBub3QgaW5pdGlhbGl6ZWQgY29ycmVjdGx5LicpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQWJzdHJhY3Rpb24gYXJvdW5kIEZpcmViYXNlQXBwJ3MgdG9rZW4gZmV0Y2hpbmcgY2FwYWJpbGl0aWVzLlxuICovXG5jbGFzcyBGaXJlYmFzZUF1dGhUb2tlblByb3ZpZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihhcHBOYW1lXywgZmlyZWJhc2VPcHRpb25zXywgYXV0aFByb3ZpZGVyXykge1xuICAgICAgICB0aGlzLmFwcE5hbWVfID0gYXBwTmFtZV87XG4gICAgICAgIHRoaXMuZmlyZWJhc2VPcHRpb25zXyA9IGZpcmViYXNlT3B0aW9uc187XG4gICAgICAgIHRoaXMuYXV0aFByb3ZpZGVyXyA9IGF1dGhQcm92aWRlcl87XG4gICAgICAgIHRoaXMuYXV0aF8gPSBudWxsO1xuICAgICAgICB0aGlzLmF1dGhfID0gYXV0aFByb3ZpZGVyXy5nZXRJbW1lZGlhdGUoeyBvcHRpb25hbDogdHJ1ZSB9KTtcbiAgICAgICAgaWYgKCF0aGlzLmF1dGhfKSB7XG4gICAgICAgICAgICBhdXRoUHJvdmlkZXJfLm9uSW5pdChhdXRoID0+ICh0aGlzLmF1dGhfID0gYXV0aCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldFRva2VuKGZvcmNlUmVmcmVzaCkge1xuICAgICAgICBpZiAoIXRoaXMuYXV0aF8pIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gU3VwcG9ydCBkZWxheWVkIGluaXRpYWxpemF0aW9uIG9mIEZpcmViYXNlQXV0aC4gVGhpcyBhbGxvd3Mgb3VyXG4gICAgICAgICAgICAgICAgLy8gY3VzdG9tZXJzIHRvIGluaXRpYWxpemUgdGhlIFJUREIgU0RLIGJlZm9yZSBpbml0aWFsaXppbmcgRmlyZWJhc2VcbiAgICAgICAgICAgICAgICAvLyBBdXRoIGFuZCBlbnN1cmVzIHRoYXQgYWxsIHJlcXVlc3RzIGFyZSBhdXRoZW50aWNhdGVkIGlmIGEgdG9rZW5cbiAgICAgICAgICAgICAgICAvLyBiZWNvbWVzIGF2YWlsYWJsZSBiZWZvcmUgdGhlIHRpbWVvdXQgYmVsb3cgZXhwaXJlcy5cbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYXV0aF8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0VG9rZW4oZm9yY2VSZWZyZXNoKS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKG51bGwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5hdXRoXy5nZXRUb2tlbihmb3JjZVJlZnJlc2gpLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAgIC8vIFRPRE86IE5lZWQgdG8gZmlndXJlIG91dCBhbGwgdGhlIGNhc2VzIHRoaXMgaXMgcmFpc2VkIGFuZCB3aGV0aGVyXG4gICAgICAgICAgICAvLyB0aGlzIG1ha2VzIHNlbnNlLlxuICAgICAgICAgICAgaWYgKGVycm9yICYmIGVycm9yLmNvZGUgPT09ICdhdXRoL3Rva2VuLW5vdC1pbml0aWFsaXplZCcpIHtcbiAgICAgICAgICAgICAgICBsb2coJ0dvdCBhdXRoL3Rva2VuLW5vdC1pbml0aWFsaXplZCBlcnJvci4gIFRyZWF0aW5nIGFzIG51bGwgdG9rZW4uJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYWRkVG9rZW5DaGFuZ2VMaXN0ZW5lcihsaXN0ZW5lcikge1xuICAgICAgICAvLyBUT0RPOiBXZSBtaWdodCB3YW50IHRvIHdyYXAgdGhlIGxpc3RlbmVyIGFuZCBjYWxsIGl0IHdpdGggbm8gYXJncyB0b1xuICAgICAgICAvLyBhdm9pZCBhIGxlYWt5IGFic3RyYWN0aW9uLCBidXQgdGhhdCBtYWtlcyByZW1vdmluZyB0aGUgbGlzdGVuZXIgaGFyZGVyLlxuICAgICAgICBpZiAodGhpcy5hdXRoXykge1xuICAgICAgICAgICAgdGhpcy5hdXRoXy5hZGRBdXRoVG9rZW5MaXN0ZW5lcihsaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmF1dGhQcm92aWRlcl9cbiAgICAgICAgICAgICAgICAuZ2V0KClcbiAgICAgICAgICAgICAgICAudGhlbihhdXRoID0+IGF1dGguYWRkQXV0aFRva2VuTGlzdGVuZXIobGlzdGVuZXIpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW1vdmVUb2tlbkNoYW5nZUxpc3RlbmVyKGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuYXV0aFByb3ZpZGVyX1xuICAgICAgICAgICAgLmdldCgpXG4gICAgICAgICAgICAudGhlbihhdXRoID0+IGF1dGgucmVtb3ZlQXV0aFRva2VuTGlzdGVuZXIobGlzdGVuZXIpKTtcbiAgICB9XG4gICAgbm90aWZ5Rm9ySW52YWxpZFRva2VuKCkge1xuICAgICAgICBsZXQgZXJyb3JNZXNzYWdlID0gJ1Byb3ZpZGVkIGF1dGhlbnRpY2F0aW9uIGNyZWRlbnRpYWxzIGZvciB0aGUgYXBwIG5hbWVkIFwiJyArXG4gICAgICAgICAgICB0aGlzLmFwcE5hbWVfICtcbiAgICAgICAgICAgICdcIiBhcmUgaW52YWxpZC4gVGhpcyB1c3VhbGx5IGluZGljYXRlcyB5b3VyIGFwcCB3YXMgbm90ICcgK1xuICAgICAgICAgICAgJ2luaXRpYWxpemVkIGNvcnJlY3RseS4gJztcbiAgICAgICAgaWYgKCdjcmVkZW50aWFsJyBpbiB0aGlzLmZpcmViYXNlT3B0aW9uc18pIHtcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZSArPVxuICAgICAgICAgICAgICAgICdNYWtlIHN1cmUgdGhlIFwiY3JlZGVudGlhbFwiIHByb3BlcnR5IHByb3ZpZGVkIHRvIGluaXRpYWxpemVBcHAoKSAnICtcbiAgICAgICAgICAgICAgICAgICAgJ2lzIGF1dGhvcml6ZWQgdG8gYWNjZXNzIHRoZSBzcGVjaWZpZWQgXCJkYXRhYmFzZVVSTFwiIGFuZCBpcyBmcm9tIHRoZSBjb3JyZWN0ICcgK1xuICAgICAgICAgICAgICAgICAgICAncHJvamVjdC4nO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCdzZXJ2aWNlQWNjb3VudCcgaW4gdGhpcy5maXJlYmFzZU9wdGlvbnNfKSB7XG4gICAgICAgICAgICBlcnJvck1lc3NhZ2UgKz1cbiAgICAgICAgICAgICAgICAnTWFrZSBzdXJlIHRoZSBcInNlcnZpY2VBY2NvdW50XCIgcHJvcGVydHkgcHJvdmlkZWQgdG8gaW5pdGlhbGl6ZUFwcCgpICcgK1xuICAgICAgICAgICAgICAgICAgICAnaXMgYXV0aG9yaXplZCB0byBhY2Nlc3MgdGhlIHNwZWNpZmllZCBcImRhdGFiYXNlVVJMXCIgYW5kIGlzIGZyb20gdGhlIGNvcnJlY3QgJyArXG4gICAgICAgICAgICAgICAgICAgICdwcm9qZWN0Lic7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlcnJvck1lc3NhZ2UgKz1cbiAgICAgICAgICAgICAgICAnTWFrZSBzdXJlIHRoZSBcImFwaUtleVwiIGFuZCBcImRhdGFiYXNlVVJMXCIgcHJvcGVydGllcyBwcm92aWRlZCB0byAnICtcbiAgICAgICAgICAgICAgICAgICAgJ2luaXRpYWxpemVBcHAoKSBtYXRjaCB0aGUgdmFsdWVzIHByb3ZpZGVkIGZvciB5b3VyIGFwcCBhdCAnICtcbiAgICAgICAgICAgICAgICAgICAgJ2h0dHBzOi8vY29uc29sZS5maXJlYmFzZS5nb29nbGUuY29tLy4nO1xuICAgICAgICB9XG4gICAgICAgIHdhcm4oZXJyb3JNZXNzYWdlKTtcbiAgICB9XG59XG4vKiBBdXRoVG9rZW5Qcm92aWRlciB0aGF0IHN1cHBsaWVzIGEgY29uc3RhbnQgdG9rZW4uIFVzZWQgYnkgQWRtaW4gU0RLIG9yIG1vY2tVc2VyVG9rZW4gd2l0aCBlbXVsYXRvcnMuICovXG5jbGFzcyBFbXVsYXRvclRva2VuUHJvdmlkZXIge1xuICAgIGNvbnN0cnVjdG9yKGFjY2Vzc1Rva2VuKSB7XG4gICAgICAgIHRoaXMuYWNjZXNzVG9rZW4gPSBhY2Nlc3NUb2tlbjtcbiAgICB9XG4gICAgZ2V0VG9rZW4oZm9yY2VSZWZyZXNoKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgYWNjZXNzVG9rZW46IHRoaXMuYWNjZXNzVG9rZW5cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFkZFRva2VuQ2hhbmdlTGlzdGVuZXIobGlzdGVuZXIpIHtcbiAgICAgICAgLy8gSW52b2tlIHRoZSBsaXN0ZW5lciBpbW1lZGlhdGVseSB0byBtYXRjaCB0aGUgYmVoYXZpb3IgaW4gRmlyZWJhc2UgQXV0aFxuICAgICAgICAvLyAoc2VlIHBhY2thZ2VzL2F1dGgvc3JjL2F1dGguanMjTDE4MDcpXG4gICAgICAgIGxpc3RlbmVyKHRoaXMuYWNjZXNzVG9rZW4pO1xuICAgIH1cbiAgICByZW1vdmVUb2tlbkNoYW5nZUxpc3RlbmVyKGxpc3RlbmVyKSB7IH1cbiAgICBub3RpZnlGb3JJbnZhbGlkVG9rZW4oKSB7IH1cbn1cbi8qKiBBIHN0cmluZyB0aGF0IGlzIHRyZWF0ZWQgYXMgYW4gYWRtaW4gYWNjZXNzIHRva2VuIGJ5IHRoZSBSVERCIGVtdWxhdG9yLiBVc2VkIGJ5IEFkbWluIFNESy4gKi9cbkVtdWxhdG9yVG9rZW5Qcm92aWRlci5PV05FUiA9ICdvd25lcic7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jb25zdCBQUk9UT0NPTF9WRVJTSU9OID0gJzUnO1xuY29uc3QgVkVSU0lPTl9QQVJBTSA9ICd2JztcbmNvbnN0IFRSQU5TUE9SVF9TRVNTSU9OX1BBUkFNID0gJ3MnO1xuY29uc3QgUkVGRVJFUl9QQVJBTSA9ICdyJztcbmNvbnN0IEZPUkdFX1JFRiA9ICdmJztcbi8vIE1hdGNoZXMgY29uc29sZS5maXJlYmFzZS5nb29nbGUuY29tLCBmaXJlYmFzZS1jb25zb2xlLSouY29ycC5nb29nbGUuY29tIGFuZFxuLy8gZmlyZWJhc2UuY29ycC5nb29nbGUuY29tXG5jb25zdCBGT1JHRV9ET01BSU5fUkUgPSAvKGNvbnNvbGVcXC5maXJlYmFzZXxmaXJlYmFzZS1jb25zb2xlLVxcdytcXC5jb3JwfGZpcmViYXNlXFwuY29ycClcXC5nb29nbGVcXC5jb20vO1xuY29uc3QgTEFTVF9TRVNTSU9OX1BBUkFNID0gJ2xzJztcbmNvbnN0IEFQUExJQ0FUSU9OX0lEX1BBUkFNID0gJ3AnO1xuY29uc3QgQVBQX0NIRUNLX1RPS0VOX1BBUkFNID0gJ2FjJztcbmNvbnN0IFdFQlNPQ0tFVCA9ICd3ZWJzb2NrZXQnO1xuY29uc3QgTE9OR19QT0xMSU5HID0gJ2xvbmdfcG9sbGluZyc7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgY2xhc3MgdGhhdCBob2xkcyBtZXRhZGF0YSBhYm91dCBhIFJlcG8gb2JqZWN0XG4gKi9cbmNsYXNzIFJlcG9JbmZvIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gaG9zdCAtIEhvc3RuYW1lIHBvcnRpb24gb2YgdGhlIHVybCBmb3IgdGhlIHJlcG9cbiAgICAgKiBAcGFyYW0gc2VjdXJlIC0gV2hldGhlciBvciBub3QgdGhpcyByZXBvIGlzIGFjY2Vzc2VkIG92ZXIgc3NsXG4gICAgICogQHBhcmFtIG5hbWVzcGFjZSAtIFRoZSBuYW1lc3BhY2UgcmVwcmVzZW50ZWQgYnkgdGhlIHJlcG9cbiAgICAgKiBAcGFyYW0gd2ViU29ja2V0T25seSAtIFdoZXRoZXIgdG8gcHJlZmVyIHdlYnNvY2tldHMgb3ZlciBhbGwgb3RoZXIgdHJhbnNwb3J0cyAodXNlZCBieSBOZXN0KS5cbiAgICAgKiBAcGFyYW0gbm9kZUFkbWluIC0gV2hldGhlciB0aGlzIGluc3RhbmNlIHVzZXMgQWRtaW4gU0RLIGNyZWRlbnRpYWxzXG4gICAgICogQHBhcmFtIHBlcnNpc3RlbmNlS2V5IC0gT3ZlcnJpZGUgdGhlIGRlZmF1bHQgc2Vzc2lvbiBwZXJzaXN0ZW5jZSBzdG9yYWdlIGtleVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGhvc3QsIHNlY3VyZSwgbmFtZXNwYWNlLCB3ZWJTb2NrZXRPbmx5LCBub2RlQWRtaW4gPSBmYWxzZSwgcGVyc2lzdGVuY2VLZXkgPSAnJywgaW5jbHVkZU5hbWVzcGFjZUluUXVlcnlQYXJhbXMgPSBmYWxzZSwgaXNVc2luZ0VtdWxhdG9yID0gZmFsc2UpIHtcbiAgICAgICAgdGhpcy5zZWN1cmUgPSBzZWN1cmU7XG4gICAgICAgIHRoaXMubmFtZXNwYWNlID0gbmFtZXNwYWNlO1xuICAgICAgICB0aGlzLndlYlNvY2tldE9ubHkgPSB3ZWJTb2NrZXRPbmx5O1xuICAgICAgICB0aGlzLm5vZGVBZG1pbiA9IG5vZGVBZG1pbjtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZUtleSA9IHBlcnNpc3RlbmNlS2V5O1xuICAgICAgICB0aGlzLmluY2x1ZGVOYW1lc3BhY2VJblF1ZXJ5UGFyYW1zID0gaW5jbHVkZU5hbWVzcGFjZUluUXVlcnlQYXJhbXM7XG4gICAgICAgIHRoaXMuaXNVc2luZ0VtdWxhdG9yID0gaXNVc2luZ0VtdWxhdG9yO1xuICAgICAgICB0aGlzLl9ob3N0ID0gaG9zdC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB0aGlzLl9kb21haW4gPSB0aGlzLl9ob3N0LnN1YnN0cih0aGlzLl9ob3N0LmluZGV4T2YoJy4nKSArIDEpO1xuICAgICAgICB0aGlzLmludGVybmFsSG9zdCA9XG4gICAgICAgICAgICBQZXJzaXN0ZW50U3RvcmFnZS5nZXQoJ2hvc3Q6JyArIGhvc3QpIHx8IHRoaXMuX2hvc3Q7XG4gICAgfVxuICAgIGlzQ2FjaGVhYmxlSG9zdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJuYWxIb3N0LnN1YnN0cigwLCAyKSA9PT0gJ3MtJztcbiAgICB9XG4gICAgaXNDdXN0b21Ib3N0KCkge1xuICAgICAgICByZXR1cm4gKHRoaXMuX2RvbWFpbiAhPT0gJ2ZpcmViYXNlaW8uY29tJyAmJlxuICAgICAgICAgICAgdGhpcy5fZG9tYWluICE9PSAnZmlyZWJhc2Vpby1kZW1vLmNvbScpO1xuICAgIH1cbiAgICBnZXQgaG9zdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hvc3Q7XG4gICAgfVxuICAgIHNldCBob3N0KG5ld0hvc3QpIHtcbiAgICAgICAgaWYgKG5ld0hvc3QgIT09IHRoaXMuaW50ZXJuYWxIb3N0KSB7XG4gICAgICAgICAgICB0aGlzLmludGVybmFsSG9zdCA9IG5ld0hvc3Q7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NhY2hlYWJsZUhvc3QoKSkge1xuICAgICAgICAgICAgICAgIFBlcnNpc3RlbnRTdG9yYWdlLnNldCgnaG9zdDonICsgdGhpcy5faG9zdCwgdGhpcy5pbnRlcm5hbEhvc3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBsZXQgc3RyID0gdGhpcy50b1VSTFN0cmluZygpO1xuICAgICAgICBpZiAodGhpcy5wZXJzaXN0ZW5jZUtleSkge1xuICAgICAgICAgICAgc3RyICs9ICc8JyArIHRoaXMucGVyc2lzdGVuY2VLZXkgKyAnPic7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG4gICAgdG9VUkxTdHJpbmcoKSB7XG4gICAgICAgIGNvbnN0IHByb3RvY29sID0gdGhpcy5zZWN1cmUgPyAnaHR0cHM6Ly8nIDogJ2h0dHA6Ly8nO1xuICAgICAgICBjb25zdCBxdWVyeSA9IHRoaXMuaW5jbHVkZU5hbWVzcGFjZUluUXVlcnlQYXJhbXNcbiAgICAgICAgICAgID8gYD9ucz0ke3RoaXMubmFtZXNwYWNlfWBcbiAgICAgICAgICAgIDogJyc7XG4gICAgICAgIHJldHVybiBgJHtwcm90b2NvbH0ke3RoaXMuaG9zdH0vJHtxdWVyeX1gO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHJlcG9JbmZvTmVlZHNRdWVyeVBhcmFtKHJlcG9JbmZvKSB7XG4gICAgcmV0dXJuIChyZXBvSW5mby5ob3N0ICE9PSByZXBvSW5mby5pbnRlcm5hbEhvc3QgfHxcbiAgICAgICAgcmVwb0luZm8uaXNDdXN0b21Ib3N0KCkgfHxcbiAgICAgICAgcmVwb0luZm8uaW5jbHVkZU5hbWVzcGFjZUluUXVlcnlQYXJhbXMpO1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSB3ZWJzb2NrZXQgVVJMIGZvciB0aGlzIHJlcG9cbiAqIEBwYXJhbSByZXBvSW5mbyAtIFJlcG9JbmZvIG9iamVjdFxuICogQHBhcmFtIHR5cGUgLSBvZiBjb25uZWN0aW9uXG4gKiBAcGFyYW0gcGFyYW1zIC0gbGlzdFxuICogQHJldHVybnMgVGhlIFVSTCBmb3IgdGhpcyByZXBvXG4gKi9cbmZ1bmN0aW9uIHJlcG9JbmZvQ29ubmVjdGlvblVSTChyZXBvSW5mbywgdHlwZSwgcGFyYW1zKSB7XG4gICAgYXNzZXJ0KHR5cGVvZiB0eXBlID09PSAnc3RyaW5nJywgJ3R5cGVvZiB0eXBlIG11c3QgPT0gc3RyaW5nJyk7XG4gICAgYXNzZXJ0KHR5cGVvZiBwYXJhbXMgPT09ICdvYmplY3QnLCAndHlwZW9mIHBhcmFtcyBtdXN0ID09IG9iamVjdCcpO1xuICAgIGxldCBjb25uVVJMO1xuICAgIGlmICh0eXBlID09PSBXRUJTT0NLRVQpIHtcbiAgICAgICAgY29ublVSTCA9XG4gICAgICAgICAgICAocmVwb0luZm8uc2VjdXJlID8gJ3dzczovLycgOiAnd3M6Ly8nKSArIHJlcG9JbmZvLmludGVybmFsSG9zdCArICcvLndzPyc7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgPT09IExPTkdfUE9MTElORykge1xuICAgICAgICBjb25uVVJMID1cbiAgICAgICAgICAgIChyZXBvSW5mby5zZWN1cmUgPyAnaHR0cHM6Ly8nIDogJ2h0dHA6Ly8nKSArXG4gICAgICAgICAgICAgICAgcmVwb0luZm8uaW50ZXJuYWxIb3N0ICtcbiAgICAgICAgICAgICAgICAnLy5scD8nO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIGNvbm5lY3Rpb24gdHlwZTogJyArIHR5cGUpO1xuICAgIH1cbiAgICBpZiAocmVwb0luZm9OZWVkc1F1ZXJ5UGFyYW0ocmVwb0luZm8pKSB7XG4gICAgICAgIHBhcmFtc1snbnMnXSA9IHJlcG9JbmZvLm5hbWVzcGFjZTtcbiAgICB9XG4gICAgY29uc3QgcGFpcnMgPSBbXTtcbiAgICBlYWNoKHBhcmFtcywgKGtleSwgdmFsdWUpID0+IHtcbiAgICAgICAgcGFpcnMucHVzaChrZXkgKyAnPScgKyB2YWx1ZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGNvbm5VUkwgKyBwYWlycy5qb2luKCcmJyk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRyYWNrcyBhIGNvbGxlY3Rpb24gb2Ygc3RhdHMuXG4gKi9cbmNsYXNzIFN0YXRzQ29sbGVjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuY291bnRlcnNfID0ge307XG4gICAgfVxuICAgIGluY3JlbWVudENvdW50ZXIobmFtZSwgYW1vdW50ID0gMSkge1xuICAgICAgICBpZiAoIWNvbnRhaW5zKHRoaXMuY291bnRlcnNfLCBuYW1lKSkge1xuICAgICAgICAgICAgdGhpcy5jb3VudGVyc19bbmFtZV0gPSAwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY291bnRlcnNfW25hbWVdICs9IGFtb3VudDtcbiAgICB9XG4gICAgZ2V0KCkge1xuICAgICAgICByZXR1cm4gZGVlcENvcHkodGhpcy5jb3VudGVyc18pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNvbnN0IGNvbGxlY3Rpb25zID0ge307XG5jb25zdCByZXBvcnRlcnMgPSB7fTtcbmZ1bmN0aW9uIHN0YXRzTWFuYWdlckdldENvbGxlY3Rpb24ocmVwb0luZm8pIHtcbiAgICBjb25zdCBoYXNoU3RyaW5nID0gcmVwb0luZm8udG9TdHJpbmcoKTtcbiAgICBpZiAoIWNvbGxlY3Rpb25zW2hhc2hTdHJpbmddKSB7XG4gICAgICAgIGNvbGxlY3Rpb25zW2hhc2hTdHJpbmddID0gbmV3IFN0YXRzQ29sbGVjdGlvbigpO1xuICAgIH1cbiAgICByZXR1cm4gY29sbGVjdGlvbnNbaGFzaFN0cmluZ107XG59XG5mdW5jdGlvbiBzdGF0c01hbmFnZXJHZXRPckNyZWF0ZVJlcG9ydGVyKHJlcG9JbmZvLCBjcmVhdG9yRnVuY3Rpb24pIHtcbiAgICBjb25zdCBoYXNoU3RyaW5nID0gcmVwb0luZm8udG9TdHJpbmcoKTtcbiAgICBpZiAoIXJlcG9ydGVyc1toYXNoU3RyaW5nXSkge1xuICAgICAgICByZXBvcnRlcnNbaGFzaFN0cmluZ10gPSBjcmVhdG9yRnVuY3Rpb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcG9ydGVyc1toYXNoU3RyaW5nXTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVGhpcyBjbGFzcyBlbnN1cmVzIHRoZSBwYWNrZXRzIGZyb20gdGhlIHNlcnZlciBhcnJpdmUgaW4gb3JkZXJcbiAqIFRoaXMgY2xhc3MgdGFrZXMgZGF0YSBmcm9tIHRoZSBzZXJ2ZXIgYW5kIGVuc3VyZXMgaXQgZ2V0cyBwYXNzZWQgaW50byB0aGUgY2FsbGJhY2tzIGluIG9yZGVyLlxuICovXG5jbGFzcyBQYWNrZXRSZWNlaXZlciB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIG9uTWVzc2FnZV9cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihvbk1lc3NhZ2VfKSB7XG4gICAgICAgIHRoaXMub25NZXNzYWdlXyA9IG9uTWVzc2FnZV87XG4gICAgICAgIHRoaXMucGVuZGluZ1Jlc3BvbnNlcyA9IFtdO1xuICAgICAgICB0aGlzLmN1cnJlbnRSZXNwb25zZU51bSA9IDA7XG4gICAgICAgIHRoaXMuY2xvc2VBZnRlclJlc3BvbnNlID0gLTE7XG4gICAgICAgIHRoaXMub25DbG9zZSA9IG51bGw7XG4gICAgfVxuICAgIGNsb3NlQWZ0ZXIocmVzcG9uc2VOdW0sIGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuY2xvc2VBZnRlclJlc3BvbnNlID0gcmVzcG9uc2VOdW07XG4gICAgICAgIHRoaXMub25DbG9zZSA9IGNhbGxiYWNrO1xuICAgICAgICBpZiAodGhpcy5jbG9zZUFmdGVyUmVzcG9uc2UgPCB0aGlzLmN1cnJlbnRSZXNwb25zZU51bSkge1xuICAgICAgICAgICAgdGhpcy5vbkNsb3NlKCk7XG4gICAgICAgICAgICB0aGlzLm9uQ2xvc2UgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVhY2ggbWVzc2FnZSBmcm9tIHRoZSBzZXJ2ZXIgY29tZXMgd2l0aCBhIHJlc3BvbnNlIG51bWJlciwgYW5kIGFuIGFycmF5IG9mIGRhdGEuIFRoZSByZXNwb25zZU51bWJlclxuICAgICAqIGFsbG93cyB1cyB0byBlbnN1cmUgdGhhdCB3ZSBwcm9jZXNzIHRoZW0gaW4gdGhlIHJpZ2h0IG9yZGVyLCBzaW5jZSB3ZSBjYW4ndCBiZSBndWFyYW50ZWVkIHRoYXQgYWxsXG4gICAgICogYnJvd3NlcnMgd2lsbCByZXNwb25kIGluIHRoZSBzYW1lIG9yZGVyIGFzIHRoZSByZXF1ZXN0cyB3ZSBzZW50XG4gICAgICovXG4gICAgaGFuZGxlUmVzcG9uc2UocmVxdWVzdE51bSwgZGF0YSkge1xuICAgICAgICB0aGlzLnBlbmRpbmdSZXNwb25zZXNbcmVxdWVzdE51bV0gPSBkYXRhO1xuICAgICAgICB3aGlsZSAodGhpcy5wZW5kaW5nUmVzcG9uc2VzW3RoaXMuY3VycmVudFJlc3BvbnNlTnVtXSkge1xuICAgICAgICAgICAgY29uc3QgdG9Qcm9jZXNzID0gdGhpcy5wZW5kaW5nUmVzcG9uc2VzW3RoaXMuY3VycmVudFJlc3BvbnNlTnVtXTtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnBlbmRpbmdSZXNwb25zZXNbdGhpcy5jdXJyZW50UmVzcG9uc2VOdW1dO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b1Byb2Nlc3MubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICBpZiAodG9Qcm9jZXNzW2ldKSB7XG4gICAgICAgICAgICAgICAgICAgIGV4Y2VwdGlvbkd1YXJkKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25NZXNzYWdlXyh0b1Byb2Nlc3NbaV0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50UmVzcG9uc2VOdW0gPT09IHRoaXMuY2xvc2VBZnRlclJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub25DbG9zZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQ2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkNsb3NlID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRSZXNwb25zZU51bSsrO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gVVJMIHF1ZXJ5IHBhcmFtZXRlcnMgYXNzb2NpYXRlZCB3aXRoIGxvbmdwb2xsaW5nXG5jb25zdCBGSVJFQkFTRV9MT05HUE9MTF9TVEFSVF9QQVJBTSA9ICdzdGFydCc7XG5jb25zdCBGSVJFQkFTRV9MT05HUE9MTF9DTE9TRV9DT01NQU5EID0gJ2Nsb3NlJztcbmNvbnN0IEZJUkVCQVNFX0xPTkdQT0xMX0NPTU1BTkRfQ0JfTkFNRSA9ICdwTFBDb21tYW5kJztcbmNvbnN0IEZJUkVCQVNFX0xPTkdQT0xMX0RBVEFfQ0JfTkFNRSA9ICdwUlRMUENCJztcbmNvbnN0IEZJUkVCQVNFX0xPTkdQT0xMX0lEX1BBUkFNID0gJ2lkJztcbmNvbnN0IEZJUkVCQVNFX0xPTkdQT0xMX1BXX1BBUkFNID0gJ3B3JztcbmNvbnN0IEZJUkVCQVNFX0xPTkdQT0xMX1NFUklBTF9QQVJBTSA9ICdzZXInO1xuY29uc3QgRklSRUJBU0VfTE9OR1BPTExfQ0FMTEJBQ0tfSURfUEFSQU0gPSAnY2InO1xuY29uc3QgRklSRUJBU0VfTE9OR1BPTExfU0VHTUVOVF9OVU1fUEFSQU0gPSAnc2VnJztcbmNvbnN0IEZJUkVCQVNFX0xPTkdQT0xMX1NFR01FTlRTX0lOX1BBQ0tFVCA9ICd0cyc7XG5jb25zdCBGSVJFQkFTRV9MT05HUE9MTF9EQVRBX1BBUkFNID0gJ2QnO1xuY29uc3QgRklSRUJBU0VfTE9OR1BPTExfRElTQ09OTl9GUkFNRV9SRVFVRVNUX1BBUkFNID0gJ2RmcmFtZSc7XG4vL0RhdGEgc2l6ZSBjb25zdGFudHMuXG4vL1RPRE86IFBlcmY6IHRoZSBtYXhpbXVtIGxlbmd0aCBhY3R1YWxseSBkaWZmZXJzIGZyb20gYnJvd3NlciB0byBicm93c2VyLlxuLy8gV2Ugc2hvdWxkIGNoZWNrIHdoYXQgYnJvd3NlciB3ZSdyZSBvbiBhbmQgc2V0IGFjY29yZGluZ2x5LlxuY29uc3QgTUFYX1VSTF9EQVRBX1NJWkUgPSAxODcwO1xuY29uc3QgU0VHX0hFQURFUl9TSVpFID0gMzA7IC8vaWU6ICZzZWc9ODI5OTIzNCZ0cz05ODIzODkxMjMmZD1cbmNvbnN0IE1BWF9QQVlMT0FEX1NJWkUgPSBNQVhfVVJMX0RBVEFfU0laRSAtIFNFR19IRUFERVJfU0laRTtcbi8qKlxuICogS2VlcGFsaXZlIHBlcmlvZFxuICogc2VuZCBhIGZyZXNoIHJlcXVlc3QgYXQgbWluaW11bSBldmVyeSAyNSBzZWNvbmRzLiBPcGVyYSBoYXMgYSBtYXhpbXVtIHJlcXVlc3RcbiAqIGxlbmd0aCBvZiAzMCBzZWNvbmRzIHRoYXQgd2UgY2FuJ3QgZXhjZWVkLlxuICovXG5jb25zdCBLRUVQQUxJVkVfUkVRVUVTVF9JTlRFUlZBTCA9IDI1MDAwO1xuLyoqXG4gKiBIb3cgbG9uZyB0byB3YWl0IGJlZm9yZSBhYm9ydGluZyBhIGxvbmctcG9sbGluZyBjb25uZWN0aW9uIGF0dGVtcHQuXG4gKi9cbmNvbnN0IExQX0NPTk5FQ1RfVElNRU9VVCA9IDMwMDAwO1xuLyoqXG4gKiBUaGlzIGNsYXNzIG1hbmFnZXMgYSBzaW5nbGUgbG9uZy1wb2xsaW5nIGNvbm5lY3Rpb24uXG4gKi9cbmNsYXNzIEJyb3dzZXJQb2xsQ29ubmVjdGlvbiB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGNvbm5JZCBBbiBpZGVudGlmaWVyIGZvciB0aGlzIGNvbm5lY3Rpb24sIHVzZWQgZm9yIGxvZ2dpbmdcbiAgICAgKiBAcGFyYW0gcmVwb0luZm8gVGhlIGluZm8gZm9yIHRoZSBlbmRwb2ludCB0byBzZW5kIGRhdGEgdG8uXG4gICAgICogQHBhcmFtIGFwcGxpY2F0aW9uSWQgVGhlIEZpcmViYXNlIEFwcCBJRCBmb3IgdGhpcyBwcm9qZWN0LlxuICAgICAqIEBwYXJhbSBhcHBDaGVja1Rva2VuIFRoZSBBcHBDaGVjayB0b2tlbiBmb3IgdGhpcyBjbGllbnQuXG4gICAgICogQHBhcmFtIGF1dGhUb2tlbiBUaGUgQXV0aFRva2VuIHRvIHVzZSBmb3IgdGhpcyBjb25uZWN0aW9uLlxuICAgICAqIEBwYXJhbSB0cmFuc3BvcnRTZXNzaW9uSWQgT3B0aW9uYWwgdHJhbnNwb3J0U2Vzc2lvbmlkIGlmIHdlIGFyZVxuICAgICAqIHJlY29ubmVjdGluZyBmb3IgYW4gZXhpc3RpbmcgdHJhbnNwb3J0IHNlc3Npb25cbiAgICAgKiBAcGFyYW0gbGFzdFNlc3Npb25JZCBPcHRpb25hbCBsYXN0U2Vzc2lvbklkIGlmIHRoZSBQZXJzaXN0ZW50Q29ubmVjdGlvbiBoYXNcbiAgICAgKiBhbHJlYWR5IGNyZWF0ZWQgYSBjb25uZWN0aW9uIHByZXZpb3VzbHlcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihjb25uSWQsIHJlcG9JbmZvLCBhcHBsaWNhdGlvbklkLCBhcHBDaGVja1Rva2VuLCBhdXRoVG9rZW4sIHRyYW5zcG9ydFNlc3Npb25JZCwgbGFzdFNlc3Npb25JZCkge1xuICAgICAgICB0aGlzLmNvbm5JZCA9IGNvbm5JZDtcbiAgICAgICAgdGhpcy5yZXBvSW5mbyA9IHJlcG9JbmZvO1xuICAgICAgICB0aGlzLmFwcGxpY2F0aW9uSWQgPSBhcHBsaWNhdGlvbklkO1xuICAgICAgICB0aGlzLmFwcENoZWNrVG9rZW4gPSBhcHBDaGVja1Rva2VuO1xuICAgICAgICB0aGlzLmF1dGhUb2tlbiA9IGF1dGhUb2tlbjtcbiAgICAgICAgdGhpcy50cmFuc3BvcnRTZXNzaW9uSWQgPSB0cmFuc3BvcnRTZXNzaW9uSWQ7XG4gICAgICAgIHRoaXMubGFzdFNlc3Npb25JZCA9IGxhc3RTZXNzaW9uSWQ7XG4gICAgICAgIHRoaXMuYnl0ZXNTZW50ID0gMDtcbiAgICAgICAgdGhpcy5ieXRlc1JlY2VpdmVkID0gMDtcbiAgICAgICAgdGhpcy5ldmVyQ29ubmVjdGVkXyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmxvZ18gPSBsb2dXcmFwcGVyKGNvbm5JZCk7XG4gICAgICAgIHRoaXMuc3RhdHNfID0gc3RhdHNNYW5hZ2VyR2V0Q29sbGVjdGlvbihyZXBvSW5mbyk7XG4gICAgICAgIHRoaXMudXJsRm4gPSAocGFyYW1zKSA9PiB7XG4gICAgICAgICAgICAvLyBBbHdheXMgYWRkIHRoZSB0b2tlbiBpZiB3ZSBoYXZlIG9uZS5cbiAgICAgICAgICAgIGlmICh0aGlzLmFwcENoZWNrVG9rZW4pIHtcbiAgICAgICAgICAgICAgICBwYXJhbXNbQVBQX0NIRUNLX1RPS0VOX1BBUkFNXSA9IHRoaXMuYXBwQ2hlY2tUb2tlbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXBvSW5mb0Nvbm5lY3Rpb25VUkwocmVwb0luZm8sIExPTkdfUE9MTElORywgcGFyYW1zKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIG9uTWVzc2FnZSAtIENhbGxiYWNrIHdoZW4gbWVzc2FnZXMgYXJyaXZlXG4gICAgICogQHBhcmFtIG9uRGlzY29ubmVjdCAtIENhbGxiYWNrIHdpdGggY29ubmVjdGlvbiBsb3N0LlxuICAgICAqL1xuICAgIG9wZW4ob25NZXNzYWdlLCBvbkRpc2Nvbm5lY3QpIHtcbiAgICAgICAgdGhpcy5jdXJTZWdtZW50TnVtID0gMDtcbiAgICAgICAgdGhpcy5vbkRpc2Nvbm5lY3RfID0gb25EaXNjb25uZWN0O1xuICAgICAgICB0aGlzLm15UGFja2V0T3JkZXJlciA9IG5ldyBQYWNrZXRSZWNlaXZlcihvbk1lc3NhZ2UpO1xuICAgICAgICB0aGlzLmlzQ2xvc2VkXyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmNvbm5lY3RUaW1lb3V0VGltZXJfID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmxvZ18oJ1RpbWVkIG91dCB0cnlpbmcgdG8gY29ubmVjdC4nKTtcbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBjbGVhciB0aGUgaG9zdCBjYWNoZVxuICAgICAgICAgICAgdGhpcy5vbkNsb3NlZF8oKTtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdFRpbWVvdXRUaW1lcl8gPSBudWxsO1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgfSwgTWF0aC5mbG9vcihMUF9DT05ORUNUX1RJTUVPVVQpKTtcbiAgICAgICAgLy8gRW5zdXJlIHdlIGRlbGF5IHRoZSBjcmVhdGlvbiBvZiB0aGUgaWZyYW1lIHVudGlsIHRoZSBET00gaXMgbG9hZGVkLlxuICAgICAgICBleGVjdXRlV2hlbkRPTVJlYWR5KCgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ2xvc2VkXykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vU2V0IHVwIGEgY2FsbGJhY2sgdGhhdCBnZXRzIHRyaWdnZXJlZCBvbmNlIGEgY29ubmVjdGlvbiBpcyBzZXQgdXAuXG4gICAgICAgICAgICB0aGlzLnNjcmlwdFRhZ0hvbGRlciA9IG5ldyBGaXJlYmFzZUlGcmFtZVNjcmlwdEhvbGRlcigoLi4uYXJncykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IFtjb21tYW5kLCBhcmcxLCBhcmcyLCBhcmczLCBhcmc0XSA9IGFyZ3M7XG4gICAgICAgICAgICAgICAgdGhpcy5pbmNyZW1lbnRJbmNvbWluZ0J5dGVzXyhhcmdzKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc2NyaXB0VGFnSG9sZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gd2UgY2xvc2VkIHRoZSBjb25uZWN0aW9uLlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jb25uZWN0VGltZW91dFRpbWVyXykge1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5jb25uZWN0VGltZW91dFRpbWVyXyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29ubmVjdFRpbWVvdXRUaW1lcl8gPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmV2ZXJDb25uZWN0ZWRfID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAoY29tbWFuZCA9PT0gRklSRUJBU0VfTE9OR1BPTExfU1RBUlRfUEFSQU0pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pZCA9IGFyZzE7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFzc3dvcmQgPSBhcmcyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjb21tYW5kID09PSBGSVJFQkFTRV9MT05HUE9MTF9DTE9TRV9DT01NQU5EKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIERvbid0IGNsZWFyIHRoZSBob3N0IGNhY2hlLiBXZSBnb3QgYSByZXNwb25zZSBmcm9tIHRoZSBzZXJ2ZXIsIHNvIHdlIGtub3cgaXQncyByZWFjaGFibGVcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZzEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIGFyZW4ndCBleHBlY3RpbmcgYW55IG1vcmUgZGF0YSAob3RoZXIgdGhhbiB3aGF0IHRoZSBzZXJ2ZXIncyBhbHJlYWR5IGluIHRoZSBwcm9jZXNzIG9mIHNlbmRpbmcgdXNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRocm91Z2ggb3VyIGFscmVhZHkgb3BlbiBwb2xscyksIHNvIGRvbid0IHNlbmQgYW55IG1vcmUuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcmlwdFRhZ0hvbGRlci5zZW5kTmV3UG9sbHMgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFyZzEgaW4gdGhpcyBjYXNlIGlzIHRoZSBsYXN0IHJlc3BvbnNlIG51bWJlciBzZW50IGJ5IHRoZSBzZXJ2ZXIuIFdlIHNob3VsZCB0cnkgdG8gcmVjZWl2ZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWxsIG9mIHRoZSByZXNwb25zZXMgdXAgdG8gdGhpcyBvbmUgYmVmb3JlIGNsb3NpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubXlQYWNrZXRPcmRlcmVyLmNsb3NlQWZ0ZXIoYXJnMSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25DbG9zZWRfKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25DbG9zZWRfKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5yZWNvZ25pemVkIGNvbW1hbmQgcmVjZWl2ZWQ6ICcgKyBjb21tYW5kKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAoLi4uYXJncykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IFtwTiwgZGF0YV0gPSBhcmdzO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5jcmVtZW50SW5jb21pbmdCeXRlc18oYXJncyk7XG4gICAgICAgICAgICAgICAgdGhpcy5teVBhY2tldE9yZGVyZXIuaGFuZGxlUmVzcG9uc2UocE4sIGRhdGEpO1xuICAgICAgICAgICAgfSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMub25DbG9zZWRfKCk7XG4gICAgICAgICAgICB9LCB0aGlzLnVybEZuKTtcbiAgICAgICAgICAgIC8vU2VuZCB0aGUgaW5pdGlhbCByZXF1ZXN0IHRvIGNvbm5lY3QuIFRoZSBzZXJpYWwgbnVtYmVyIGlzIHNpbXBseSB0byBrZWVwIHRoZSBicm93c2VyIGZyb20gcHVsbGluZyBwcmV2aW91cyByZXN1bHRzXG4gICAgICAgICAgICAvL2Zyb20gY2FjaGUuXG4gICAgICAgICAgICBjb25zdCB1cmxQYXJhbXMgPSB7fTtcbiAgICAgICAgICAgIHVybFBhcmFtc1tGSVJFQkFTRV9MT05HUE9MTF9TVEFSVF9QQVJBTV0gPSAndCc7XG4gICAgICAgICAgICB1cmxQYXJhbXNbRklSRUJBU0VfTE9OR1BPTExfU0VSSUFMX1BBUkFNXSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwMDAwMCk7XG4gICAgICAgICAgICBpZiAodGhpcy5zY3JpcHRUYWdIb2xkZXIudW5pcXVlQ2FsbGJhY2tJZGVudGlmaWVyKSB7XG4gICAgICAgICAgICAgICAgdXJsUGFyYW1zW0ZJUkVCQVNFX0xPTkdQT0xMX0NBTExCQUNLX0lEX1BBUkFNXSA9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2NyaXB0VGFnSG9sZGVyLnVuaXF1ZUNhbGxiYWNrSWRlbnRpZmllcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVybFBhcmFtc1tWRVJTSU9OX1BBUkFNXSA9IFBST1RPQ09MX1ZFUlNJT047XG4gICAgICAgICAgICBpZiAodGhpcy50cmFuc3BvcnRTZXNzaW9uSWQpIHtcbiAgICAgICAgICAgICAgICB1cmxQYXJhbXNbVFJBTlNQT1JUX1NFU1NJT05fUEFSQU1dID0gdGhpcy50cmFuc3BvcnRTZXNzaW9uSWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5sYXN0U2Vzc2lvbklkKSB7XG4gICAgICAgICAgICAgICAgdXJsUGFyYW1zW0xBU1RfU0VTU0lPTl9QQVJBTV0gPSB0aGlzLmxhc3RTZXNzaW9uSWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hcHBsaWNhdGlvbklkKSB7XG4gICAgICAgICAgICAgICAgdXJsUGFyYW1zW0FQUExJQ0FUSU9OX0lEX1BBUkFNXSA9IHRoaXMuYXBwbGljYXRpb25JZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmFwcENoZWNrVG9rZW4pIHtcbiAgICAgICAgICAgICAgICB1cmxQYXJhbXNbQVBQX0NIRUNLX1RPS0VOX1BBUkFNXSA9IHRoaXMuYXBwQ2hlY2tUb2tlbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgbG9jYXRpb24gIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgICAgICAgbG9jYXRpb24uaG9zdG5hbWUgJiZcbiAgICAgICAgICAgICAgICBGT1JHRV9ET01BSU5fUkUudGVzdChsb2NhdGlvbi5ob3N0bmFtZSkpIHtcbiAgICAgICAgICAgICAgICB1cmxQYXJhbXNbUkVGRVJFUl9QQVJBTV0gPSBGT1JHRV9SRUY7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBjb25uZWN0VVJMID0gdGhpcy51cmxGbih1cmxQYXJhbXMpO1xuICAgICAgICAgICAgdGhpcy5sb2dfKCdDb25uZWN0aW5nIHZpYSBsb25nLXBvbGwgdG8gJyArIGNvbm5lY3RVUkwpO1xuICAgICAgICAgICAgdGhpcy5zY3JpcHRUYWdIb2xkZXIuYWRkVGFnKGNvbm5lY3RVUkwsICgpID0+IHtcbiAgICAgICAgICAgICAgICAvKiBkbyBub3RoaW5nICovXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGwgdGhpcyB3aGVuIGEgaGFuZHNoYWtlIGhhcyBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5IGFuZCB3ZSB3YW50IHRvIGNvbnNpZGVyIHRoZSBjb25uZWN0aW9uIGVzdGFibGlzaGVkXG4gICAgICovXG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMuc2NyaXB0VGFnSG9sZGVyLnN0YXJ0TG9uZ1BvbGwodGhpcy5pZCwgdGhpcy5wYXNzd29yZCk7XG4gICAgICAgIHRoaXMuYWRkRGlzY29ubmVjdFBpbmdGcmFtZSh0aGlzLmlkLCB0aGlzLnBhc3N3b3JkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9yY2VzIGxvbmcgcG9sbGluZyB0byBiZSBjb25zaWRlcmVkIGFzIGEgcG90ZW50aWFsIHRyYW5zcG9ydFxuICAgICAqL1xuICAgIHN0YXRpYyBmb3JjZUFsbG93KCkge1xuICAgICAgICBCcm93c2VyUG9sbENvbm5lY3Rpb24uZm9yY2VBbGxvd18gPSB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3JjZXMgbG9uZ3BvbGxpbmcgdG8gbm90IGJlIGNvbnNpZGVyZWQgYXMgYSBwb3RlbnRpYWwgdHJhbnNwb3J0XG4gICAgICovXG4gICAgc3RhdGljIGZvcmNlRGlzYWxsb3coKSB7XG4gICAgICAgIEJyb3dzZXJQb2xsQ29ubmVjdGlvbi5mb3JjZURpc2FsbG93XyA9IHRydWU7XG4gICAgfVxuICAgIC8vIFN0YXRpYyBtZXRob2QsIHVzZSBzdHJpbmcgbGl0ZXJhbCBzbyBpdCBjYW4gYmUgYWNjZXNzZWQgaW4gYSBnZW5lcmljIHdheVxuICAgIHN0YXRpYyBpc0F2YWlsYWJsZSgpIHtcbiAgICAgICAgaWYgKGlzTm9kZVNkaygpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoQnJvd3NlclBvbGxDb25uZWN0aW9uLmZvcmNlQWxsb3dfKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIE5PVEU6IEluIFJlYWN0LU5hdGl2ZSB0aGVyZSdzIG5vcm1hbGx5IG5vICdkb2N1bWVudCcsIGJ1dCBpZiB5b3UgZGVidWcgYSBSZWFjdC1OYXRpdmUgYXBwIGluXG4gICAgICAgICAgICAvLyB0aGUgQ2hyb21lIGRlYnVnZ2VyLCAnZG9jdW1lbnQnIGlzIGRlZmluZWQsIGJ1dCBkb2N1bWVudC5jcmVhdGVFbGVtZW50IGlzIG51bGwgKDIwMTUvMDYvMDgpLlxuICAgICAgICAgICAgcmV0dXJuICghQnJvd3NlclBvbGxDb25uZWN0aW9uLmZvcmNlRGlzYWxsb3dfICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgICFpc0Nocm9tZUV4dGVuc2lvbkNvbnRlbnRTY3JpcHQoKSAmJlxuICAgICAgICAgICAgICAgICFpc1dpbmRvd3NTdG9yZUFwcCgpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBOby1vcCBmb3IgcG9sbGluZ1xuICAgICAqL1xuICAgIG1hcmtDb25uZWN0aW9uSGVhbHRoeSgpIHsgfVxuICAgIC8qKlxuICAgICAqIFN0b3BzIHBvbGxpbmcgYW5kIGNsZWFucyB1cCB0aGUgaWZyYW1lXG4gICAgICovXG4gICAgc2h1dGRvd25fKCkge1xuICAgICAgICB0aGlzLmlzQ2xvc2VkXyA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLnNjcmlwdFRhZ0hvbGRlcikge1xuICAgICAgICAgICAgdGhpcy5zY3JpcHRUYWdIb2xkZXIuY2xvc2UoKTtcbiAgICAgICAgICAgIHRoaXMuc2NyaXB0VGFnSG9sZGVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICAvL3JlbW92ZSB0aGUgZGlzY29ubmVjdCBmcmFtZSwgd2hpY2ggd2lsbCB0cmlnZ2VyIGFuIFhIUiBjYWxsIHRvIHRoZSBzZXJ2ZXIgdG8gdGVsbCBpdCB3ZSdyZSBsZWF2aW5nLlxuICAgICAgICBpZiAodGhpcy5teURpc2Nvbm5GcmFtZSkge1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0aGlzLm15RGlzY29ubkZyYW1lKTtcbiAgICAgICAgICAgIHRoaXMubXlEaXNjb25uRnJhbWUgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNvbm5lY3RUaW1lb3V0VGltZXJfKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5jb25uZWN0VGltZW91dFRpbWVyXyk7XG4gICAgICAgICAgICB0aGlzLmNvbm5lY3RUaW1lb3V0VGltZXJfID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgd2hlbiB0aGlzIHRyYW5zcG9ydCBpcyBjbG9zZWRcbiAgICAgKi9cbiAgICBvbkNsb3NlZF8oKSB7XG4gICAgICAgIGlmICghdGhpcy5pc0Nsb3NlZF8pIHtcbiAgICAgICAgICAgIHRoaXMubG9nXygnTG9uZ3BvbGwgaXMgY2xvc2luZyBpdHNlbGYnKTtcbiAgICAgICAgICAgIHRoaXMuc2h1dGRvd25fKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5vbkRpc2Nvbm5lY3RfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkRpc2Nvbm5lY3RfKHRoaXMuZXZlckNvbm5lY3RlZF8pO1xuICAgICAgICAgICAgICAgIHRoaXMub25EaXNjb25uZWN0XyA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRXh0ZXJuYWwtZmFjaW5nIGNsb3NlIGhhbmRsZXIuIFJlYWxUaW1lIGhhcyByZXF1ZXN0ZWQgd2Ugc2h1dCBkb3duLiBLaWxsIG91ciBjb25uZWN0aW9uIGFuZCB0ZWxsIHRoZSBzZXJ2ZXJcbiAgICAgKiB0aGF0IHdlJ3ZlIGxlZnQuXG4gICAgICovXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc0Nsb3NlZF8pIHtcbiAgICAgICAgICAgIHRoaXMubG9nXygnTG9uZ3BvbGwgaXMgYmVpbmcgY2xvc2VkLicpO1xuICAgICAgICAgICAgdGhpcy5zaHV0ZG93bl8oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIHRoZSBKU09OIG9iamVjdCBkb3duIHRvIHRoZSBzZXJ2ZXIuIEl0IHdpbGwgbmVlZCB0byBiZSBzdHJpbmdpZmllZCwgYmFzZTY0IGVuY29kZWQsIGFuZCB0aGVuXG4gICAgICogYnJva2VuIGludG8gY2h1bmtzIChzaW5jZSBVUkxzIGhhdmUgYSBzbWFsbCBtYXhpbXVtIGxlbmd0aCkuXG4gICAgICogQHBhcmFtIGRhdGEgLSBUaGUgSlNPTiBkYXRhIHRvIHRyYW5zbWl0LlxuICAgICAqL1xuICAgIHNlbmQoZGF0YSkge1xuICAgICAgICBjb25zdCBkYXRhU3RyID0gc3RyaW5naWZ5KGRhdGEpO1xuICAgICAgICB0aGlzLmJ5dGVzU2VudCArPSBkYXRhU3RyLmxlbmd0aDtcbiAgICAgICAgdGhpcy5zdGF0c18uaW5jcmVtZW50Q291bnRlcignYnl0ZXNfc2VudCcsIGRhdGFTdHIubGVuZ3RoKTtcbiAgICAgICAgLy9maXJzdCwgbGV0cyBnZXQgdGhlIGJhc2U2NC1lbmNvZGVkIGRhdGFcbiAgICAgICAgY29uc3QgYmFzZTY0ZGF0YSA9IGJhc2U2NEVuY29kZShkYXRhU3RyKTtcbiAgICAgICAgLy9XZSBjYW4gb25seSBmaXQgYSBjZXJ0YWluIGFtb3VudCBpbiBlYWNoIFVSTCwgc28gd2UgbmVlZCB0byBzcGxpdCB0aGlzIHJlcXVlc3RcbiAgICAgICAgLy91cCBpbnRvIG11bHRpcGxlIHBpZWNlcyBpZiBpdCBkb2Vzbid0IGZpdCBpbiBvbmUgcmVxdWVzdC5cbiAgICAgICAgY29uc3QgZGF0YVNlZ3MgPSBzcGxpdFN0cmluZ0J5U2l6ZShiYXNlNjRkYXRhLCBNQVhfUEFZTE9BRF9TSVpFKTtcbiAgICAgICAgLy9FbnF1ZXVlIGVhY2ggc2VnbWVudCBmb3IgdHJhbnNtaXNzaW9uLiBXZSBhc3NpZ24gZWFjaCBjaHVuayBhIHNlcXVlbnRpYWwgSUQgYW5kIGEgdG90YWwgbnVtYmVyXG4gICAgICAgIC8vb2Ygc2VnbWVudHMgc28gdGhhdCB3ZSBjYW4gcmVhc3NlbWJsZSB0aGUgcGFja2V0IG9uIHRoZSBzZXJ2ZXIuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YVNlZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuc2NyaXB0VGFnSG9sZGVyLmVucXVldWVTZWdtZW50KHRoaXMuY3VyU2VnbWVudE51bSwgZGF0YVNlZ3MubGVuZ3RoLCBkYXRhU2Vnc1tpXSk7XG4gICAgICAgICAgICB0aGlzLmN1clNlZ21lbnROdW0rKztcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIGlzIGhvdyB3ZSBub3RpZnkgdGhlIHNlcnZlciB0aGF0IHdlJ3JlIGxlYXZpbmcuXG4gICAgICogV2UgYXJlbid0IGFibGUgdG8gc2VuZCByZXF1ZXN0cyB3aXRoIERIVE1MIG9uIGEgd2luZG93IGNsb3NlIGV2ZW50LCBidXQgd2UgY2FuXG4gICAgICogdHJpZ2dlciBYSFIgcmVxdWVzdHMgaW4gc29tZSBicm93c2VycyAoZXZlcnl0aGluZyBidXQgT3BlcmEgYmFzaWNhbGx5KS5cbiAgICAgKi9cbiAgICBhZGREaXNjb25uZWN0UGluZ0ZyYW1lKGlkLCBwdykge1xuICAgICAgICBpZiAoaXNOb2RlU2RrKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm15RGlzY29ubkZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7XG4gICAgICAgIGNvbnN0IHVybFBhcmFtcyA9IHt9O1xuICAgICAgICB1cmxQYXJhbXNbRklSRUJBU0VfTE9OR1BPTExfRElTQ09OTl9GUkFNRV9SRVFVRVNUX1BBUkFNXSA9ICd0JztcbiAgICAgICAgdXJsUGFyYW1zW0ZJUkVCQVNFX0xPTkdQT0xMX0lEX1BBUkFNXSA9IGlkO1xuICAgICAgICB1cmxQYXJhbXNbRklSRUJBU0VfTE9OR1BPTExfUFdfUEFSQU1dID0gcHc7XG4gICAgICAgIHRoaXMubXlEaXNjb25uRnJhbWUuc3JjID0gdGhpcy51cmxGbih1cmxQYXJhbXMpO1xuICAgICAgICB0aGlzLm15RGlzY29ubkZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5teURpc2Nvbm5GcmFtZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVzZWQgdG8gdHJhY2sgdGhlIGJ5dGVzIHJlY2VpdmVkIGJ5IHRoaXMgY2xpZW50XG4gICAgICovXG4gICAgaW5jcmVtZW50SW5jb21pbmdCeXRlc18oYXJncykge1xuICAgICAgICAvLyBUT0RPOiBUaGlzIGlzIGFuIGFubm95aW5nIHBlcmYgaGl0IGp1c3QgdG8gdHJhY2sgdGhlIG51bWJlciBvZiBpbmNvbWluZyBieXRlcy4gIE1heWJlIGl0IHNob3VsZCBiZSBvcHQtaW4uXG4gICAgICAgIGNvbnN0IGJ5dGVzUmVjZWl2ZWQgPSBzdHJpbmdpZnkoYXJncykubGVuZ3RoO1xuICAgICAgICB0aGlzLmJ5dGVzUmVjZWl2ZWQgKz0gYnl0ZXNSZWNlaXZlZDtcbiAgICAgICAgdGhpcy5zdGF0c18uaW5jcmVtZW50Q291bnRlcignYnl0ZXNfcmVjZWl2ZWQnLCBieXRlc1JlY2VpdmVkKTtcbiAgICB9XG59XG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gKiBBIHdyYXBwZXIgYXJvdW5kIGFuIGlmcmFtZSB0aGF0IGlzIHVzZWQgYXMgYSBsb25nLXBvbGxpbmcgc2NyaXB0IGhvbGRlci5cbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5jbGFzcyBGaXJlYmFzZUlGcmFtZVNjcmlwdEhvbGRlciB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGNvbW1hbmRDQiAtIFRoZSBjYWxsYmFjayB0byBiZSBjYWxsZWQgd2hlbiBjb250cm9sIGNvbW1hbmRzIGFyZSByZWNlaXZlZCBmcm9tIHRoZSBzZXJ2ZXIuXG4gICAgICogQHBhcmFtIG9uTWVzc2FnZUNCIC0gVGhlIGNhbGxiYWNrIHRvIGJlIHRyaWdnZXJlZCB3aGVuIHJlc3BvbnNlcyBhcnJpdmUgZnJvbSB0aGUgc2VydmVyLlxuICAgICAqIEBwYXJhbSBvbkRpc2Nvbm5lY3QgLSBUaGUgY2FsbGJhY2sgdG8gYmUgdHJpZ2dlcmVkIHdoZW4gdGhpcyB0YWcgaG9sZGVyIGlzIGNsb3NlZFxuICAgICAqIEBwYXJhbSB1cmxGbiAtIEEgZnVuY3Rpb24gdGhhdCBwcm92aWRlcyB0aGUgVVJMIG9mIHRoZSBlbmRwb2ludCB0byBzZW5kIGRhdGEgdG8uXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoY29tbWFuZENCLCBvbk1lc3NhZ2VDQiwgb25EaXNjb25uZWN0LCB1cmxGbikge1xuICAgICAgICB0aGlzLm9uRGlzY29ubmVjdCA9IG9uRGlzY29ubmVjdDtcbiAgICAgICAgdGhpcy51cmxGbiA9IHVybEZuO1xuICAgICAgICAvL1dlIG1haW50YWluIGEgY291bnQgb2YgYWxsIG9mIHRoZSBvdXRzdGFuZGluZyByZXF1ZXN0cywgYmVjYXVzZSBpZiB3ZSBoYXZlIHRvbyBtYW55IGFjdGl2ZSBhdCBvbmNlIGl0IGNhbiBjYXVzZVxuICAgICAgICAvL3Byb2JsZW1zIGluIHNvbWUgYnJvd3NlcnMuXG4gICAgICAgIHRoaXMub3V0c3RhbmRpbmdSZXF1ZXN0cyA9IG5ldyBTZXQoKTtcbiAgICAgICAgLy9BIHF1ZXVlIG9mIHRoZSBwZW5kaW5nIHNlZ21lbnRzIHdhaXRpbmcgZm9yIHRyYW5zbWlzc2lvbiB0byB0aGUgc2VydmVyLlxuICAgICAgICB0aGlzLnBlbmRpbmdTZWdzID0gW107XG4gICAgICAgIC8vQSBzZXJpYWwgbnVtYmVyLiBXZSB1c2UgdGhpcyBmb3IgdHdvIHRoaW5nczpcbiAgICAgICAgLy8gMSkgQSB3YXkgdG8gZW5zdXJlIHRoZSBicm93c2VyIGRvZXNuJ3QgY2FjaGUgcmVzcG9uc2VzIHRvIHBvbGxzXG4gICAgICAgIC8vIDIpIEEgd2F5IHRvIG1ha2UgdGhlIHNlcnZlciBhd2FyZSB3aGVuIGxvbmctcG9sbHMgYXJyaXZlIGluIGEgZGlmZmVyZW50IG9yZGVyIHRoYW4gd2Ugc3RhcnRlZCB0aGVtLiBUaGVcbiAgICAgICAgLy8gICAgc2VydmVyIG5lZWRzIHRvIHJlbGVhc2UgYm90aCBwb2xscyBpbiB0aGlzIGNhc2Ugb3IgaXQgd2lsbCBjYXVzZSBwcm9ibGVtcyBpbiBPcGVyYSBzaW5jZSBPcGVyYSBjYW4gb25seSBleGVjdXRlXG4gICAgICAgIC8vICAgIEpTT05QIGNvZGUgaW4gdGhlIG9yZGVyIGl0IHdhcyBhZGRlZCB0byB0aGUgaWZyYW1lLlxuICAgICAgICB0aGlzLmN1cnJlbnRTZXJpYWwgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMDAwMDApO1xuICAgICAgICAvLyBUaGlzIGdldHMgc2V0IHRvIGZhbHNlIHdoZW4gd2UncmUgXCJjbG9zaW5nIGRvd25cIiB0aGUgY29ubmVjdGlvbiAoZS5nLiB3ZSdyZSBzd2l0Y2hpbmcgdHJhbnNwb3J0cyBidXQgdGhlcmUncyBzdGlsbFxuICAgICAgICAvLyBpbmNvbWluZyBkYXRhIGZyb20gdGhlIHNlcnZlciB0aGF0IHdlJ3JlIHdhaXRpbmcgZm9yKS5cbiAgICAgICAgdGhpcy5zZW5kTmV3UG9sbHMgPSB0cnVlO1xuICAgICAgICBpZiAoIWlzTm9kZVNkaygpKSB7XG4gICAgICAgICAgICAvL0VhY2ggc2NyaXB0IGhvbGRlciByZWdpc3RlcnMgYSBjb3VwbGUgb2YgdW5pcXVlbHkgbmFtZWQgY2FsbGJhY2tzIHdpdGggdGhlIHdpbmRvdy4gVGhlc2UgYXJlIGNhbGxlZCBmcm9tIHRoZVxuICAgICAgICAgICAgLy9pZnJhbWVzIHdoZXJlIHdlIHB1dCB0aGUgbG9uZy1wb2xsaW5nIHNjcmlwdCB0YWdzLiBXZSBoYXZlIHR3byBjYWxsYmFja3M6XG4gICAgICAgICAgICAvLyAgIDEpIENvbW1hbmQgQ2FsbGJhY2sgLSBUcmlnZ2VyZWQgZm9yIGNvbnRyb2wgaXNzdWVzLCBsaWtlIHN0YXJ0aW5nIGEgY29ubmVjdGlvbi5cbiAgICAgICAgICAgIC8vICAgMikgTWVzc2FnZSBDYWxsYmFjayAtIFRyaWdnZXJlZCB3aGVuIG5ldyBkYXRhIGFycml2ZXMuXG4gICAgICAgICAgICB0aGlzLnVuaXF1ZUNhbGxiYWNrSWRlbnRpZmllciA9IExVSURHZW5lcmF0b3IoKTtcbiAgICAgICAgICAgIHdpbmRvd1tGSVJFQkFTRV9MT05HUE9MTF9DT01NQU5EX0NCX05BTUUgKyB0aGlzLnVuaXF1ZUNhbGxiYWNrSWRlbnRpZmllcl0gPSBjb21tYW5kQ0I7XG4gICAgICAgICAgICB3aW5kb3dbRklSRUJBU0VfTE9OR1BPTExfREFUQV9DQl9OQU1FICsgdGhpcy51bmlxdWVDYWxsYmFja0lkZW50aWZpZXJdID1cbiAgICAgICAgICAgICAgICBvbk1lc3NhZ2VDQjtcbiAgICAgICAgICAgIC8vQ3JlYXRlIGFuIGlmcmFtZSBmb3IgdXMgdG8gYWRkIHNjcmlwdCB0YWdzIHRvLlxuICAgICAgICAgICAgdGhpcy5teUlGcmFtZSA9IEZpcmViYXNlSUZyYW1lU2NyaXB0SG9sZGVyLmNyZWF0ZUlGcmFtZV8oKTtcbiAgICAgICAgICAgIC8vIFNldCB0aGUgaWZyYW1lJ3MgY29udGVudHMuXG4gICAgICAgICAgICBsZXQgc2NyaXB0ID0gJyc7XG4gICAgICAgICAgICAvLyBpZiB3ZSBzZXQgYSBqYXZhc2NyaXB0IHVybCwgaXQncyBJRSBhbmQgd2UgbmVlZCB0byBzZXQgdGhlIGRvY3VtZW50IGRvbWFpbi4gVGhlIGphdmFzY3JpcHQgdXJsIGlzIHN1ZmZpY2llbnRcbiAgICAgICAgICAgIC8vIGZvciBpZTksIGJ1dCBpZTggbmVlZHMgdG8gZG8gaXQgYWdhaW4gaW4gdGhlIGRvY3VtZW50IGl0c2VsZi5cbiAgICAgICAgICAgIGlmICh0aGlzLm15SUZyYW1lLnNyYyAmJlxuICAgICAgICAgICAgICAgIHRoaXMubXlJRnJhbWUuc3JjLnN1YnN0cigwLCAnamF2YXNjcmlwdDonLmxlbmd0aCkgPT09ICdqYXZhc2NyaXB0OicpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50RG9tYWluID0gZG9jdW1lbnQuZG9tYWluO1xuICAgICAgICAgICAgICAgIHNjcmlwdCA9ICc8c2NyaXB0PmRvY3VtZW50LmRvbWFpbj1cIicgKyBjdXJyZW50RG9tYWluICsgJ1wiOzwvc2NyaXB0Pic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBpZnJhbWVDb250ZW50cyA9ICc8aHRtbD48Ym9keT4nICsgc2NyaXB0ICsgJzwvYm9keT48L2h0bWw+JztcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5teUlGcmFtZS5kb2Mub3BlbigpO1xuICAgICAgICAgICAgICAgIHRoaXMubXlJRnJhbWUuZG9jLndyaXRlKGlmcmFtZUNvbnRlbnRzKTtcbiAgICAgICAgICAgICAgICB0aGlzLm15SUZyYW1lLmRvYy5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBsb2coJ2ZyYW1lIHdyaXRpbmcgZXhjZXB0aW9uJyk7XG4gICAgICAgICAgICAgICAgaWYgKGUuc3RhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nKGUuc3RhY2spO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsb2coZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNvbW1hbmRDQiA9IGNvbW1hbmRDQjtcbiAgICAgICAgICAgIHRoaXMub25NZXNzYWdlQ0IgPSBvbk1lc3NhZ2VDQjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBFYWNoIGJyb3dzZXIgaGFzIGl0cyBvd24gZnVubnkgd2F5IHRvIGhhbmRsZSBpZnJhbWVzLiBIZXJlIHdlIG11c2ggdGhlbSBhbGwgdG9nZXRoZXIgaW50byBvbmUgb2JqZWN0IHRoYXQgSSBjYW5cbiAgICAgKiBhY3R1YWxseSB1c2UuXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZUlGcmFtZV8oKSB7XG4gICAgICAgIGNvbnN0IGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuICAgICAgICBpZnJhbWUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgLy8gVGhpcyBpcyBuZWNlc3NhcnkgaW4gb3JkZXIgdG8gaW5pdGlhbGl6ZSB0aGUgZG9jdW1lbnQgaW5zaWRlIHRoZSBpZnJhbWVcbiAgICAgICAgaWYgKGRvY3VtZW50LmJvZHkpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgZG9jdW1lbnQuZG9tYWluIGhhcyBiZWVuIG1vZGlmaWVkIGluIElFLCB0aGlzIHdpbGwgdGhyb3cgYW4gZXJyb3IsIGFuZCB3ZSBuZWVkIHRvIHNldCB0aGVcbiAgICAgICAgICAgICAgICAvLyBkb21haW4gb2YgdGhlIGlmcmFtZSdzIGRvY3VtZW50IG1hbnVhbGx5LiBXZSBjYW4gZG8gdGhpcyB2aWEgYSBqYXZhc2NyaXB0OiB1cmwgYXMgdGhlIHNyYyBhdHRyaWJ1dGVcbiAgICAgICAgICAgICAgICAvLyBBbHNvIG5vdGUgdGhhdCB3ZSBtdXN0IGRvIHRoaXMgKmFmdGVyKiB0aGUgaWZyYW1lIGhhcyBiZWVuIGFwcGVuZGVkIHRvIHRoZSBwYWdlLiBPdGhlcndpc2UgaXQgZG9lc24ndCB3b3JrLlxuICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBpZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudDtcbiAgICAgICAgICAgICAgICBpZiAoIWEpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXBvbG9naWVzIGZvciB0aGUgbG9nLXNwYW0sIEkgbmVlZCB0byBkbyBzb21ldGhpbmcgdG8ga2VlcCBjbG9zdXJlIGZyb20gb3B0aW1pemluZyBvdXQgdGhlIGFzc2lnbm1lbnQgYWJvdmUuXG4gICAgICAgICAgICAgICAgICAgIGxvZygnTm8gSUUgZG9tYWluIHNldHRpbmcgcmVxdWlyZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRvbWFpbiA9IGRvY3VtZW50LmRvbWFpbjtcbiAgICAgICAgICAgICAgICBpZnJhbWUuc3JjID1cbiAgICAgICAgICAgICAgICAgICAgXCJqYXZhc2NyaXB0OnZvaWQoKGZ1bmN0aW9uKCl7ZG9jdW1lbnQub3BlbigpO2RvY3VtZW50LmRvbWFpbj0nXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgZG9tYWluICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiJztkb2N1bWVudC5jbG9zZSgpO30pKCkpXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBMb25nUG9sbENvbm5lY3Rpb24gYXR0ZW1wdHMgdG8gZGVsYXkgaW5pdGlhbGl6YXRpb24gdW50aWwgdGhlIGRvY3VtZW50IGlzIHJlYWR5LCBzbyBob3BlZnVsbHkgdGhpc1xuICAgICAgICAgICAgLy8gbmV2ZXIgZ2V0cyBoaXQuXG4gICAgICAgICAgICB0aHJvdyAnRG9jdW1lbnQgYm9keSBoYXMgbm90IGluaXRpYWxpemVkLiBXYWl0IHRvIGluaXRpYWxpemUgRmlyZWJhc2UgdW50aWwgYWZ0ZXIgdGhlIGRvY3VtZW50IGlzIHJlYWR5Lic7XG4gICAgICAgIH1cbiAgICAgICAgLy8gR2V0IHRoZSBkb2N1bWVudCBvZiB0aGUgaWZyYW1lIGluIGEgYnJvd3Nlci1zcGVjaWZpYyB3YXkuXG4gICAgICAgIGlmIChpZnJhbWUuY29udGVudERvY3VtZW50KSB7XG4gICAgICAgICAgICBpZnJhbWUuZG9jID0gaWZyYW1lLmNvbnRlbnREb2N1bWVudDsgLy8gRmlyZWZveCwgT3BlcmEsIFNhZmFyaVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlmcmFtZS5jb250ZW50V2luZG93KSB7XG4gICAgICAgICAgICBpZnJhbWUuZG9jID0gaWZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ7IC8vIEludGVybmV0IEV4cGxvcmVyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlmcmFtZS5kb2N1bWVudCkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgIGlmcmFtZS5kb2MgPSBpZnJhbWUuZG9jdW1lbnQ7IC8vb3RoZXJzP1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpZnJhbWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbmNlbCBhbGwgb3V0c3RhbmRpbmcgcXVlcmllcyBhbmQgcmVtb3ZlIHRoZSBmcmFtZS5cbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgLy9NYXJrIHRoaXMgaWZyYW1lIGFzIGRlYWQsIHNvIG5vIG5ldyByZXF1ZXN0cyBhcmUgc2VudC5cbiAgICAgICAgdGhpcy5hbGl2ZSA9IGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5teUlGcmFtZSkge1xuICAgICAgICAgICAgLy9XZSBoYXZlIHRvIGFjdHVhbGx5IHJlbW92ZSBhbGwgb2YgdGhlIGh0bWwgaW5zaWRlIHRoaXMgaWZyYW1lIGJlZm9yZSByZW1vdmluZyBpdCBmcm9tIHRoZVxuICAgICAgICAgICAgLy93aW5kb3csIG9yIElFIHdpbGwgY29udGludWUgbG9hZGluZyBhbmQgZXhlY3V0aW5nIHRoZSBzY3JpcHQgdGFncyB3ZSd2ZSBhbHJlYWR5IGFkZGVkLCB3aGljaFxuICAgICAgICAgICAgLy9jYW4gbGVhZCB0byBzb21lIGVycm9ycyBiZWluZyB0aHJvd24uIFNldHRpbmcgdGV4dENvbnRlbnQgc2VlbXMgdG8gYmUgdGhlIHNhZmVzdCB3YXkgdG8gZG8gdGhpcy5cbiAgICAgICAgICAgIHRoaXMubXlJRnJhbWUuZG9jLmJvZHkudGV4dENvbnRlbnQgPSAnJztcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm15SUZyYW1lICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGhpcy5teUlGcmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubXlJRnJhbWUgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIE1hdGguZmxvb3IoMCkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFByb3RlY3QgZnJvbSBiZWluZyBjYWxsZWQgcmVjdXJzaXZlbHkuXG4gICAgICAgIGNvbnN0IG9uRGlzY29ubmVjdCA9IHRoaXMub25EaXNjb25uZWN0O1xuICAgICAgICBpZiAob25EaXNjb25uZWN0KSB7XG4gICAgICAgICAgICB0aGlzLm9uRGlzY29ubmVjdCA9IG51bGw7XG4gICAgICAgICAgICBvbkRpc2Nvbm5lY3QoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBBY3R1YWxseSBzdGFydCB0aGUgbG9uZy1wb2xsaW5nIHNlc3Npb24gYnkgYWRkaW5nIHRoZSBmaXJzdCBzY3JpcHQgdGFnKHMpIHRvIHRoZSBpZnJhbWUuXG4gICAgICogQHBhcmFtIGlkIC0gVGhlIElEIG9mIHRoaXMgY29ubmVjdGlvblxuICAgICAqIEBwYXJhbSBwdyAtIFRoZSBwYXNzd29yZCBmb3IgdGhpcyBjb25uZWN0aW9uXG4gICAgICovXG4gICAgc3RhcnRMb25nUG9sbChpZCwgcHcpIHtcbiAgICAgICAgdGhpcy5teUlEID0gaWQ7XG4gICAgICAgIHRoaXMubXlQVyA9IHB3O1xuICAgICAgICB0aGlzLmFsaXZlID0gdHJ1ZTtcbiAgICAgICAgLy9zZW5kIHRoZSBpbml0aWFsIHJlcXVlc3QuIElmIHRoZXJlIGFyZSByZXF1ZXN0cyBxdWV1ZWQsIG1ha2Ugc3VyZSB0aGF0IHdlIHRyYW5zbWl0IGFzIG1hbnkgYXMgd2UgYXJlIGN1cnJlbnRseSBhYmxlIHRvLlxuICAgICAgICB3aGlsZSAodGhpcy5uZXdSZXF1ZXN0XygpKSB7IH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBpcyBjYWxsZWQgYW55IHRpbWUgc29tZW9uZSBtaWdodCB3YW50IGEgc2NyaXB0IHRhZyB0byBiZSBhZGRlZC4gSXQgYWRkcyBhIHNjcmlwdCB0YWcgd2hlbiB0aGVyZSBhcmVuJ3RcbiAgICAgKiB0b28gbWFueSBvdXRzdGFuZGluZyByZXF1ZXN0cyBhbmQgd2UgYXJlIHN0aWxsIGFsaXZlLlxuICAgICAqXG4gICAgICogSWYgdGhlcmUgYXJlIG91dHN0YW5kaW5nIHBhY2tldCBzZWdtZW50cyB0byBzZW5kLCBpdCBzZW5kcyBvbmUuIElmIHRoZXJlIGFyZW4ndCwgaXQgc2VuZHMgYSBsb25nLXBvbGwgYW55d2F5cyBpZlxuICAgICAqIG5lZWRlZC5cbiAgICAgKi9cbiAgICBuZXdSZXF1ZXN0XygpIHtcbiAgICAgICAgLy8gV2Uga2VlcCBvbmUgb3V0c3RhbmRpbmcgcmVxdWVzdCBvcGVuIGFsbCB0aGUgdGltZSB0byByZWNlaXZlIGRhdGEsIGJ1dCBpZiB3ZSBuZWVkIHRvIHNlbmQgZGF0YVxuICAgICAgICAvLyAocGVuZGluZ1NlZ3MubGVuZ3RoID4gMCkgdGhlbiB3ZSBjcmVhdGUgYSBuZXcgcmVxdWVzdCB0byBzZW5kIHRoZSBkYXRhLiAgVGhlIHNlcnZlciB3aWxsIGF1dG9tYXRpY2FsbHlcbiAgICAgICAgLy8gY2xvc2UgdGhlIG9sZCByZXF1ZXN0LlxuICAgICAgICBpZiAodGhpcy5hbGl2ZSAmJlxuICAgICAgICAgICAgdGhpcy5zZW5kTmV3UG9sbHMgJiZcbiAgICAgICAgICAgIHRoaXMub3V0c3RhbmRpbmdSZXF1ZXN0cy5zaXplIDwgKHRoaXMucGVuZGluZ1NlZ3MubGVuZ3RoID4gMCA/IDIgOiAxKSkge1xuICAgICAgICAgICAgLy9jb25zdHJ1Y3Qgb3VyIHVybFxuICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VyaWFsKys7XG4gICAgICAgICAgICBjb25zdCB1cmxQYXJhbXMgPSB7fTtcbiAgICAgICAgICAgIHVybFBhcmFtc1tGSVJFQkFTRV9MT05HUE9MTF9JRF9QQVJBTV0gPSB0aGlzLm15SUQ7XG4gICAgICAgICAgICB1cmxQYXJhbXNbRklSRUJBU0VfTE9OR1BPTExfUFdfUEFSQU1dID0gdGhpcy5teVBXO1xuICAgICAgICAgICAgdXJsUGFyYW1zW0ZJUkVCQVNFX0xPTkdQT0xMX1NFUklBTF9QQVJBTV0gPSB0aGlzLmN1cnJlbnRTZXJpYWw7XG4gICAgICAgICAgICBsZXQgdGhlVVJMID0gdGhpcy51cmxGbih1cmxQYXJhbXMpO1xuICAgICAgICAgICAgLy9Ob3cgYWRkIGFzIG11Y2ggZGF0YSBhcyB3ZSBjYW4uXG4gICAgICAgICAgICBsZXQgY3VyRGF0YVN0cmluZyA9ICcnO1xuICAgICAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICAgICAgd2hpbGUgKHRoaXMucGVuZGluZ1NlZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIC8vZmlyc3QsIGxldHMgc2VlIGlmIHRoZSBuZXh0IHNlZ21lbnQgd2lsbCBmaXQuXG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dFNlZyA9IHRoaXMucGVuZGluZ1NlZ3NbMF07XG4gICAgICAgICAgICAgICAgaWYgKG5leHRTZWcuZC5sZW5ndGggK1xuICAgICAgICAgICAgICAgICAgICBTRUdfSEVBREVSX1NJWkUgK1xuICAgICAgICAgICAgICAgICAgICBjdXJEYXRhU3RyaW5nLmxlbmd0aCA8PVxuICAgICAgICAgICAgICAgICAgICBNQVhfVVJMX0RBVEFfU0laRSkge1xuICAgICAgICAgICAgICAgICAgICAvL2dyZWF0LCB0aGUgc2VnbWVudCB3aWxsIGZpdC4gTGV0cyBhcHBlbmQgaXQuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRoZVNlZyA9IHRoaXMucGVuZGluZ1NlZ3Muc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgY3VyRGF0YVN0cmluZyA9XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJEYXRhU3RyaW5nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZJUkVCQVNFX0xPTkdQT0xMX1NFR01FTlRfTlVNX1BBUkFNICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPScgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZVNlZy5zZWcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICcmJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRklSRUJBU0VfTE9OR1BPTExfU0VHTUVOVFNfSU5fUEFDS0VUICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPScgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZVNlZy50cyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJyYnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBGSVJFQkFTRV9MT05HUE9MTF9EQVRBX1BBUkFNICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPScgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZVNlZy5kO1xuICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGVVUkwgPSB0aGVVUkwgKyBjdXJEYXRhU3RyaW5nO1xuICAgICAgICAgICAgdGhpcy5hZGRMb25nUG9sbFRhZ18odGhlVVJMLCB0aGlzLmN1cnJlbnRTZXJpYWwpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUXVldWUgYSBwYWNrZXQgZm9yIHRyYW5zbWlzc2lvbiB0byB0aGUgc2VydmVyLlxuICAgICAqIEBwYXJhbSBzZWdudW0gLSBBIHNlcXVlbnRpYWwgaWQgZm9yIHRoaXMgcGFja2V0IHNlZ21lbnQgdXNlZCBmb3IgcmVhc3NlbWJseVxuICAgICAqIEBwYXJhbSB0b3RhbHNlZ3MgLSBUaGUgdG90YWwgbnVtYmVyIG9mIHNlZ21lbnRzIGluIHRoaXMgcGFja2V0XG4gICAgICogQHBhcmFtIGRhdGEgLSBUaGUgZGF0YSBmb3IgdGhpcyBzZWdtZW50LlxuICAgICAqL1xuICAgIGVucXVldWVTZWdtZW50KHNlZ251bSwgdG90YWxzZWdzLCBkYXRhKSB7XG4gICAgICAgIC8vYWRkIHRoaXMgdG8gdGhlIHF1ZXVlIG9mIHNlZ21lbnRzIHRvIHNlbmQuXG4gICAgICAgIHRoaXMucGVuZGluZ1NlZ3MucHVzaCh7IHNlZzogc2VnbnVtLCB0czogdG90YWxzZWdzLCBkOiBkYXRhIH0pO1xuICAgICAgICAvL3NlbmQgdGhlIGRhdGEgaW1tZWRpYXRlbHkgaWYgdGhlcmUgaXNuJ3QgYWxyZWFkeSBkYXRhIGJlaW5nIHRyYW5zbWl0dGVkLCB1bmxlc3NcbiAgICAgICAgLy9zdGFydExvbmdQb2xsIGhhc24ndCBiZWVuIGNhbGxlZCB5ZXQuXG4gICAgICAgIGlmICh0aGlzLmFsaXZlKSB7XG4gICAgICAgICAgICB0aGlzLm5ld1JlcXVlc3RfKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIGEgc2NyaXB0IHRhZyBmb3IgYSByZWd1bGFyIGxvbmctcG9sbCByZXF1ZXN0LlxuICAgICAqIEBwYXJhbSB1cmwgLSBUaGUgVVJMIG9mIHRoZSBzY3JpcHQgdGFnLlxuICAgICAqIEBwYXJhbSBzZXJpYWwgLSBUaGUgc2VyaWFsIG51bWJlciBvZiB0aGUgcmVxdWVzdC5cbiAgICAgKi9cbiAgICBhZGRMb25nUG9sbFRhZ18odXJsLCBzZXJpYWwpIHtcbiAgICAgICAgLy9yZW1lbWJlciB0aGF0IHdlIHNlbnQgdGhpcyByZXF1ZXN0LlxuICAgICAgICB0aGlzLm91dHN0YW5kaW5nUmVxdWVzdHMuYWRkKHNlcmlhbCk7XG4gICAgICAgIGNvbnN0IGRvTmV3UmVxdWVzdCA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMub3V0c3RhbmRpbmdSZXF1ZXN0cy5kZWxldGUoc2VyaWFsKTtcbiAgICAgICAgICAgIHRoaXMubmV3UmVxdWVzdF8oKTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gSWYgdGhpcyByZXF1ZXN0IGRvZXNuJ3QgcmV0dXJuIG9uIGl0cyBvd24gYWNjb3JkIChieSB0aGUgc2VydmVyIHNlbmRpbmcgdXMgc29tZSBkYXRhKSwgd2UnbGxcbiAgICAgICAgLy8gY3JlYXRlIGEgbmV3IG9uZSBhZnRlciB0aGUgS0VFUEFMSVZFIGludGVydmFsIHRvIG1ha2Ugc3VyZSB3ZSBhbHdheXMga2VlcCBhIGZyZXNoIHJlcXVlc3Qgb3Blbi5cbiAgICAgICAgY29uc3Qga2VlcGFsaXZlVGltZW91dCA9IHNldFRpbWVvdXQoZG9OZXdSZXF1ZXN0LCBNYXRoLmZsb29yKEtFRVBBTElWRV9SRVFVRVNUX0lOVEVSVkFMKSk7XG4gICAgICAgIGNvbnN0IHJlYWR5U3RhdGVDQiA9ICgpID0+IHtcbiAgICAgICAgICAgIC8vIFJlcXVlc3QgY29tcGxldGVkLiAgQ2FuY2VsIHRoZSBrZWVwYWxpdmUuXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoa2VlcGFsaXZlVGltZW91dCk7XG4gICAgICAgICAgICAvLyBUcmlnZ2VyIGEgbmV3IHJlcXVlc3Qgc28gd2UgY2FuIGNvbnRpbnVlIHJlY2VpdmluZyBkYXRhLlxuICAgICAgICAgICAgZG9OZXdSZXF1ZXN0KCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuYWRkVGFnKHVybCwgcmVhZHlTdGF0ZUNCKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIGFuIGFyYml0cmFyeSBzY3JpcHQgdGFnIHRvIHRoZSBpZnJhbWUuXG4gICAgICogQHBhcmFtIHVybCAtIFRoZSBVUkwgZm9yIHRoZSBzY3JpcHQgdGFnIHNvdXJjZS5cbiAgICAgKiBAcGFyYW0gbG9hZENCIC0gQSBjYWxsYmFjayB0byBiZSB0cmlnZ2VyZWQgb25jZSB0aGUgc2NyaXB0IGhhcyBsb2FkZWQuXG4gICAgICovXG4gICAgYWRkVGFnKHVybCwgbG9hZENCKSB7XG4gICAgICAgIGlmIChpc05vZGVTZGsoKSkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgIHRoaXMuZG9Ob2RlTG9uZ1BvbGwodXJsLCBsb2FkQ0IpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgd2UncmUgYWxyZWFkeSBjbG9zZWQsIGRvbid0IGFkZCB0aGlzIHBvbGxcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNlbmROZXdQb2xscykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1NjcmlwdCA9IHRoaXMubXlJRnJhbWUuZG9jLmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgICAgICAgICAgICAgICAgICBuZXdTY3JpcHQudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnO1xuICAgICAgICAgICAgICAgICAgICBuZXdTY3JpcHQuYXN5bmMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBuZXdTY3JpcHQuc3JjID0gdXJsO1xuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgICAgICBuZXdTY3JpcHQub25sb2FkID0gbmV3U2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByc3RhdGUgPSBuZXdTY3JpcHQucmVhZHlTdGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJzdGF0ZSB8fCByc3RhdGUgPT09ICdsb2FkZWQnIHx8IHJzdGF0ZSA9PT0gJ2NvbXBsZXRlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTY3JpcHQub25sb2FkID0gbmV3U2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdTY3JpcHQucGFyZW50Tm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U2NyaXB0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobmV3U2NyaXB0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkQ0IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBuZXdTY3JpcHQub25lcnJvciA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZygnTG9uZy1wb2xsIHNjcmlwdCBmYWlsZWQgdG8gbG9hZDogJyArIHVybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbmROZXdQb2xscyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm15SUZyYW1lLmRvYy5ib2R5LmFwcGVuZENoaWxkKG5ld1NjcmlwdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IHdlIHNob3VsZCBtYWtlIHRoaXMgZXJyb3IgdmlzaWJsZSBzb21laG93XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgTWF0aC5mbG9vcigxKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jb25zdCBXRUJTT0NLRVRfTUFYX0ZSQU1FX1NJWkUgPSAxNjM4NDtcbmNvbnN0IFdFQlNPQ0tFVF9LRUVQQUxJVkVfSU5URVJWQUwgPSA0NTAwMDtcbmxldCBXZWJTb2NrZXRJbXBsID0gbnVsbDtcbmlmICh0eXBlb2YgTW96V2ViU29ja2V0ICE9PSAndW5kZWZpbmVkJykge1xuICAgIFdlYlNvY2tldEltcGwgPSBNb3pXZWJTb2NrZXQ7XG59XG5lbHNlIGlmICh0eXBlb2YgV2ViU29ja2V0ICE9PSAndW5kZWZpbmVkJykge1xuICAgIFdlYlNvY2tldEltcGwgPSBXZWJTb2NrZXQ7XG59XG4vKipcbiAqIENyZWF0ZSBhIG5ldyB3ZWJzb2NrZXQgY29ubmVjdGlvbiB3aXRoIHRoZSBnaXZlbiBjYWxsYmFja3MuXG4gKi9cbmNsYXNzIFdlYlNvY2tldENvbm5lY3Rpb24ge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBjb25uSWQgaWRlbnRpZmllciBmb3IgdGhpcyB0cmFuc3BvcnRcbiAgICAgKiBAcGFyYW0gcmVwb0luZm8gVGhlIGluZm8gZm9yIHRoZSB3ZWJzb2NrZXQgZW5kcG9pbnQuXG4gICAgICogQHBhcmFtIGFwcGxpY2F0aW9uSWQgVGhlIEZpcmViYXNlIEFwcCBJRCBmb3IgdGhpcyBwcm9qZWN0LlxuICAgICAqIEBwYXJhbSBhcHBDaGVja1Rva2VuIFRoZSBBcHAgQ2hlY2sgVG9rZW4gZm9yIHRoaXMgY2xpZW50LlxuICAgICAqIEBwYXJhbSBhdXRoVG9rZW4gVGhlIEF1dGggVG9rZW4gZm9yIHRoaXMgY2xpZW50LlxuICAgICAqIEBwYXJhbSB0cmFuc3BvcnRTZXNzaW9uSWQgT3B0aW9uYWwgdHJhbnNwb3J0U2Vzc2lvbklkIGlmIHRoaXMgaXMgY29ubmVjdGluZ1xuICAgICAqIHRvIGFuIGV4aXN0aW5nIHRyYW5zcG9ydCBzZXNzaW9uXG4gICAgICogQHBhcmFtIGxhc3RTZXNzaW9uSWQgT3B0aW9uYWwgbGFzdFNlc3Npb25JZCBpZiB0aGVyZSB3YXMgYSBwcmV2aW91c1xuICAgICAqIGNvbm5lY3Rpb25cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihjb25uSWQsIHJlcG9JbmZvLCBhcHBsaWNhdGlvbklkLCBhcHBDaGVja1Rva2VuLCBhdXRoVG9rZW4sIHRyYW5zcG9ydFNlc3Npb25JZCwgbGFzdFNlc3Npb25JZCkge1xuICAgICAgICB0aGlzLmNvbm5JZCA9IGNvbm5JZDtcbiAgICAgICAgdGhpcy5hcHBsaWNhdGlvbklkID0gYXBwbGljYXRpb25JZDtcbiAgICAgICAgdGhpcy5hcHBDaGVja1Rva2VuID0gYXBwQ2hlY2tUb2tlbjtcbiAgICAgICAgdGhpcy5hdXRoVG9rZW4gPSBhdXRoVG9rZW47XG4gICAgICAgIHRoaXMua2VlcGFsaXZlVGltZXIgPSBudWxsO1xuICAgICAgICB0aGlzLmZyYW1lcyA9IG51bGw7XG4gICAgICAgIHRoaXMudG90YWxGcmFtZXMgPSAwO1xuICAgICAgICB0aGlzLmJ5dGVzU2VudCA9IDA7XG4gICAgICAgIHRoaXMuYnl0ZXNSZWNlaXZlZCA9IDA7XG4gICAgICAgIHRoaXMubG9nXyA9IGxvZ1dyYXBwZXIodGhpcy5jb25uSWQpO1xuICAgICAgICB0aGlzLnN0YXRzXyA9IHN0YXRzTWFuYWdlckdldENvbGxlY3Rpb24ocmVwb0luZm8pO1xuICAgICAgICB0aGlzLmNvbm5VUkwgPSBXZWJTb2NrZXRDb25uZWN0aW9uLmNvbm5lY3Rpb25VUkxfKHJlcG9JbmZvLCB0cmFuc3BvcnRTZXNzaW9uSWQsIGxhc3RTZXNzaW9uSWQsIGFwcENoZWNrVG9rZW4sIGFwcGxpY2F0aW9uSWQpO1xuICAgICAgICB0aGlzLm5vZGVBZG1pbiA9IHJlcG9JbmZvLm5vZGVBZG1pbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHJlcG9JbmZvIC0gVGhlIGluZm8gZm9yIHRoZSB3ZWJzb2NrZXQgZW5kcG9pbnQuXG4gICAgICogQHBhcmFtIHRyYW5zcG9ydFNlc3Npb25JZCAtIE9wdGlvbmFsIHRyYW5zcG9ydFNlc3Npb25JZCBpZiB0aGlzIGlzIGNvbm5lY3RpbmcgdG8gYW4gZXhpc3RpbmcgdHJhbnNwb3J0XG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb25cbiAgICAgKiBAcGFyYW0gbGFzdFNlc3Npb25JZCAtIE9wdGlvbmFsIGxhc3RTZXNzaW9uSWQgaWYgdGhlcmUgd2FzIGEgcHJldmlvdXMgY29ubmVjdGlvblxuICAgICAqIEByZXR1cm5zIGNvbm5lY3Rpb24gdXJsXG4gICAgICovXG4gICAgc3RhdGljIGNvbm5lY3Rpb25VUkxfKHJlcG9JbmZvLCB0cmFuc3BvcnRTZXNzaW9uSWQsIGxhc3RTZXNzaW9uSWQsIGFwcENoZWNrVG9rZW4sIGFwcGxpY2F0aW9uSWQpIHtcbiAgICAgICAgY29uc3QgdXJsUGFyYW1zID0ge307XG4gICAgICAgIHVybFBhcmFtc1tWRVJTSU9OX1BBUkFNXSA9IFBST1RPQ09MX1ZFUlNJT047XG4gICAgICAgIGlmICghaXNOb2RlU2RrKCkgJiZcbiAgICAgICAgICAgIHR5cGVvZiBsb2NhdGlvbiAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICAgIGxvY2F0aW9uLmhvc3RuYW1lICYmXG4gICAgICAgICAgICBGT1JHRV9ET01BSU5fUkUudGVzdChsb2NhdGlvbi5ob3N0bmFtZSkpIHtcbiAgICAgICAgICAgIHVybFBhcmFtc1tSRUZFUkVSX1BBUkFNXSA9IEZPUkdFX1JFRjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJhbnNwb3J0U2Vzc2lvbklkKSB7XG4gICAgICAgICAgICB1cmxQYXJhbXNbVFJBTlNQT1JUX1NFU1NJT05fUEFSQU1dID0gdHJhbnNwb3J0U2Vzc2lvbklkO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsYXN0U2Vzc2lvbklkKSB7XG4gICAgICAgICAgICB1cmxQYXJhbXNbTEFTVF9TRVNTSU9OX1BBUkFNXSA9IGxhc3RTZXNzaW9uSWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFwcENoZWNrVG9rZW4pIHtcbiAgICAgICAgICAgIHVybFBhcmFtc1tBUFBfQ0hFQ0tfVE9LRU5fUEFSQU1dID0gYXBwQ2hlY2tUb2tlbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXBwbGljYXRpb25JZCkge1xuICAgICAgICAgICAgdXJsUGFyYW1zW0FQUExJQ0FUSU9OX0lEX1BBUkFNXSA9IGFwcGxpY2F0aW9uSWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcG9JbmZvQ29ubmVjdGlvblVSTChyZXBvSW5mbywgV0VCU09DS0VULCB1cmxQYXJhbXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gb25NZXNzYWdlIC0gQ2FsbGJhY2sgd2hlbiBtZXNzYWdlcyBhcnJpdmVcbiAgICAgKiBAcGFyYW0gb25EaXNjb25uZWN0IC0gQ2FsbGJhY2sgd2l0aCBjb25uZWN0aW9uIGxvc3QuXG4gICAgICovXG4gICAgb3Blbihvbk1lc3NhZ2UsIG9uRGlzY29ubmVjdCkge1xuICAgICAgICB0aGlzLm9uRGlzY29ubmVjdCA9IG9uRGlzY29ubmVjdDtcbiAgICAgICAgdGhpcy5vbk1lc3NhZ2UgPSBvbk1lc3NhZ2U7XG4gICAgICAgIHRoaXMubG9nXygnV2Vic29ja2V0IGNvbm5lY3RpbmcgdG8gJyArIHRoaXMuY29ublVSTCk7XG4gICAgICAgIHRoaXMuZXZlckNvbm5lY3RlZF8gPSBmYWxzZTtcbiAgICAgICAgLy8gQXNzdW1lIGZhaWx1cmUgdW50aWwgcHJvdmVuIG90aGVyd2lzZS5cbiAgICAgICAgUGVyc2lzdGVudFN0b3JhZ2Uuc2V0KCdwcmV2aW91c193ZWJzb2NrZXRfZmFpbHVyZScsIHRydWUpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbGV0IG9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoaXNOb2RlU2RrKCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZXZpY2UgPSB0aGlzLm5vZGVBZG1pbiA/ICdBZG1pbk5vZGUnIDogJ05vZGUnO1xuICAgICAgICAgICAgICAgIC8vIFVBIEZvcm1hdDogRmlyZWJhc2UvPHdpcmVfcHJvdG9jb2w+LzxzZGtfdmVyc2lvbj4vPHBsYXRmb3JtPi88ZGV2aWNlPlxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdVc2VyLUFnZW50JzogYEZpcmViYXNlLyR7UFJPVE9DT0xfVkVSU0lPTn0vJHtTREtfVkVSU0lPTn0vJHtwcm9jZXNzLnBsYXRmb3JtfS8ke2RldmljZX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ1gtRmlyZWJhc2UtR01QSUQnOiB0aGlzLmFwcGxpY2F0aW9uSWQgfHwgJydcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLy8gSWYgdXNpbmcgTm9kZSB3aXRoIGFkbWluIGNyZWRzLCBBcHBDaGVjay1yZWxhdGVkIGNoZWNrcyBhcmUgdW5uZWNlc3NhcnkuXG4gICAgICAgICAgICAgICAgLy8gTm90ZSB0aGF0IHdlIHNlbmQgdGhlIGNyZWRlbnRpYWxzIGhlcmUgZXZlbiBpZiB0aGV5IGFyZW4ndCBhZG1pbiBjcmVkZW50aWFscywgd2hpY2ggaXNcbiAgICAgICAgICAgICAgICAvLyBub3QgYSBwcm9ibGVtLlxuICAgICAgICAgICAgICAgIC8vIE5vdGUgdGhhdCB0aGlzIGhlYWRlciBpcyBqdXN0IHVzZWQgdG8gYnlwYXNzIGFwcGNoZWNrLCBhbmQgdGhlIHRva2VuIHNob3VsZCBzdGlsbCBiZSBzZW50XG4gICAgICAgICAgICAgICAgLy8gdGhyb3VnaCB0aGUgd2Vic29ja2V0IGNvbm5lY3Rpb24gb25jZSBpdCBpcyBlc3RhYmxpc2hlZC5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hdXRoVG9rZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5oZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSBgQmVhcmVyICR7dGhpcy5hdXRoVG9rZW59YDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYXBwQ2hlY2tUb2tlbikge1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmhlYWRlcnNbJ1gtRmlyZWJhc2UtQXBwQ2hlY2snXSA9IHRoaXMuYXBwQ2hlY2tUb2tlbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gUGx1bWIgYXBwcm9wcmlhdGUgaHR0cF9wcm94eSBlbnZpcm9ubWVudCB2YXJpYWJsZSBpbnRvIGZheWUtd2Vic29ja2V0IGlmIGl0IGV4aXN0cy5cbiAgICAgICAgICAgICAgICBjb25zdCBlbnYgPSBwcm9jZXNzWydlbnYnXTtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm94eSA9IHRoaXMuY29ublVSTC5pbmRleE9mKCd3c3M6Ly8nKSA9PT0gMFxuICAgICAgICAgICAgICAgICAgICA/IGVudlsnSFRUUFNfUFJPWFknXSB8fCBlbnZbJ2h0dHBzX3Byb3h5J11cbiAgICAgICAgICAgICAgICAgICAgOiBlbnZbJ0hUVFBfUFJPWFknXSB8fCBlbnZbJ2h0dHBfcHJveHknXTtcbiAgICAgICAgICAgICAgICBpZiAocHJveHkpIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uc1sncHJveHknXSA9IHsgb3JpZ2luOiBwcm94eSB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubXlTb2NrID0gbmV3IFdlYlNvY2tldEltcGwodGhpcy5jb25uVVJMLCBbXSwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRoaXMubG9nXygnRXJyb3IgaW5zdGFudGlhdGluZyBXZWJTb2NrZXQuJyk7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IGUubWVzc2FnZSB8fCBlLmRhdGE7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ18oZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vbkNsb3NlZF8oKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm15U29jay5vbm9wZW4gPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmxvZ18oJ1dlYnNvY2tldCBjb25uZWN0ZWQuJyk7XG4gICAgICAgICAgICB0aGlzLmV2ZXJDb25uZWN0ZWRfID0gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5teVNvY2sub25jbG9zZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubG9nXygnV2Vic29ja2V0IGNvbm5lY3Rpb24gd2FzIGRpc2Nvbm5lY3RlZC4nKTtcbiAgICAgICAgICAgIHRoaXMubXlTb2NrID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMub25DbG9zZWRfKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMubXlTb2NrLm9ubWVzc2FnZSA9IG0gPT4ge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVJbmNvbWluZ0ZyYW1lKG0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm15U29jay5vbmVycm9yID0gZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmxvZ18oJ1dlYlNvY2tldCBlcnJvci4gIENsb3NpbmcgY29ubmVjdGlvbi4nKTtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IGUubWVzc2FnZSB8fCBlLmRhdGE7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ18oZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vbkNsb3NlZF8oKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTm8tb3AgZm9yIHdlYnNvY2tldHMsIHdlIGRvbid0IG5lZWQgdG8gZG8gYW55dGhpbmcgb25jZSB0aGUgY29ubmVjdGlvbiBpcyBjb25maXJtZWQgYXMgb3BlblxuICAgICAqL1xuICAgIHN0YXJ0KCkgeyB9XG4gICAgc3RhdGljIGZvcmNlRGlzYWxsb3coKSB7XG4gICAgICAgIFdlYlNvY2tldENvbm5lY3Rpb24uZm9yY2VEaXNhbGxvd18gPSB0cnVlO1xuICAgIH1cbiAgICBzdGF0aWMgaXNBdmFpbGFibGUoKSB7XG4gICAgICAgIGxldCBpc09sZEFuZHJvaWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIG5hdmlnYXRvci51c2VyQWdlbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IG9sZEFuZHJvaWRSZWdleCA9IC9BbmRyb2lkIChbMC05XXswLH1cXC5bMC05XXswLH0pLztcbiAgICAgICAgICAgIGNvbnN0IG9sZEFuZHJvaWRNYXRjaCA9IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2gob2xkQW5kcm9pZFJlZ2V4KTtcbiAgICAgICAgICAgIGlmIChvbGRBbmRyb2lkTWF0Y2ggJiYgb2xkQW5kcm9pZE1hdGNoLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICBpZiAocGFyc2VGbG9hdChvbGRBbmRyb2lkTWF0Y2hbMV0pIDwgNC40KSB7XG4gICAgICAgICAgICAgICAgICAgIGlzT2xkQW5kcm9pZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoIWlzT2xkQW5kcm9pZCAmJlxuICAgICAgICAgICAgV2ViU29ja2V0SW1wbCAhPT0gbnVsbCAmJlxuICAgICAgICAgICAgIVdlYlNvY2tldENvbm5lY3Rpb24uZm9yY2VEaXNhbGxvd18pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgd2UgcHJldmlvdXNseSBmYWlsZWQgdG8gY29ubmVjdCB3aXRoIHRoaXMgdHJhbnNwb3J0LlxuICAgICAqL1xuICAgIHN0YXRpYyBwcmV2aW91c2x5RmFpbGVkKCkge1xuICAgICAgICAvLyBJZiBvdXIgcGVyc2lzdGVudCBzdG9yYWdlIGlzIGFjdHVhbGx5IG9ubHkgaW4tbWVtb3J5IHN0b3JhZ2UsXG4gICAgICAgIC8vIHdlIGRlZmF1bHQgdG8gYXNzdW1pbmcgdGhhdCBpdCBwcmV2aW91c2x5IGZhaWxlZCB0byBiZSBzYWZlLlxuICAgICAgICByZXR1cm4gKFBlcnNpc3RlbnRTdG9yYWdlLmlzSW5NZW1vcnlTdG9yYWdlIHx8XG4gICAgICAgICAgICBQZXJzaXN0ZW50U3RvcmFnZS5nZXQoJ3ByZXZpb3VzX3dlYnNvY2tldF9mYWlsdXJlJykgPT09IHRydWUpO1xuICAgIH1cbiAgICBtYXJrQ29ubmVjdGlvbkhlYWx0aHkoKSB7XG4gICAgICAgIFBlcnNpc3RlbnRTdG9yYWdlLnJlbW92ZSgncHJldmlvdXNfd2Vic29ja2V0X2ZhaWx1cmUnKTtcbiAgICB9XG4gICAgYXBwZW5kRnJhbWVfKGRhdGEpIHtcbiAgICAgICAgdGhpcy5mcmFtZXMucHVzaChkYXRhKTtcbiAgICAgICAgaWYgKHRoaXMuZnJhbWVzLmxlbmd0aCA9PT0gdGhpcy50b3RhbEZyYW1lcykge1xuICAgICAgICAgICAgY29uc3QgZnVsbE1lc3MgPSB0aGlzLmZyYW1lcy5qb2luKCcnKTtcbiAgICAgICAgICAgIHRoaXMuZnJhbWVzID0gbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IGpzb25NZXNzID0ganNvbkV2YWwoZnVsbE1lc3MpO1xuICAgICAgICAgICAgLy9oYW5kbGUgdGhlIG1lc3NhZ2VcbiAgICAgICAgICAgIHRoaXMub25NZXNzYWdlKGpzb25NZXNzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gZnJhbWVDb3VudCAtIFRoZSBudW1iZXIgb2YgZnJhbWVzIHdlIGFyZSBleHBlY3RpbmcgZnJvbSB0aGUgc2VydmVyXG4gICAgICovXG4gICAgaGFuZGxlTmV3RnJhbWVDb3VudF8oZnJhbWVDb3VudCkge1xuICAgICAgICB0aGlzLnRvdGFsRnJhbWVzID0gZnJhbWVDb3VudDtcbiAgICAgICAgdGhpcy5mcmFtZXMgPSBbXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXR0ZW1wdHMgdG8gcGFyc2UgYSBmcmFtZSBjb3VudCBvdXQgb2Ygc29tZSB0ZXh0LiBJZiBpdCBjYW4ndCwgYXNzdW1lcyBhIHZhbHVlIG9mIDFcbiAgICAgKiBAcmV0dXJucyBBbnkgcmVtYWluaW5nIGRhdGEgdG8gYmUgcHJvY2Vzcywgb3IgbnVsbCBpZiB0aGVyZSBpcyBub25lXG4gICAgICovXG4gICAgZXh0cmFjdEZyYW1lQ291bnRfKGRhdGEpIHtcbiAgICAgICAgYXNzZXJ0KHRoaXMuZnJhbWVzID09PSBudWxsLCAnV2UgYWxyZWFkeSBoYXZlIGEgZnJhbWUgYnVmZmVyJyk7XG4gICAgICAgIC8vIFRPRE86IFRoZSBzZXJ2ZXIgaXMgb25seSBzdXBwb3NlZCB0byBzZW5kIHVwIHRvIDk5OTkgZnJhbWVzIChpLmUuIGxlbmd0aCA8PSA0KSwgYnV0IHRoYXQgaXNuJ3QgYmVpbmcgZW5mb3JjZWRcbiAgICAgICAgLy8gY3VycmVudGx5LiAgU28gYWxsb3dpbmcgbGFyZ2VyIGZyYW1lIGNvdW50cyAobGVuZ3RoIDw9IDYpLiAgU2VlIGh0dHBzOi8vYXBwLmFzYW5hLmNvbS8wL3NlYXJjaC84Njg4NTk4OTk4MzgwLzgyMzc2MDgwNDI1MDhcbiAgICAgICAgaWYgKGRhdGEubGVuZ3RoIDw9IDYpIHtcbiAgICAgICAgICAgIGNvbnN0IGZyYW1lQ291bnQgPSBOdW1iZXIoZGF0YSk7XG4gICAgICAgICAgICBpZiAoIWlzTmFOKGZyYW1lQ291bnQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVOZXdGcmFtZUNvdW50XyhmcmFtZUNvdW50KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhhbmRsZU5ld0ZyYW1lQ291bnRfKDEpO1xuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJvY2VzcyBhIHdlYnNvY2tldCBmcmFtZSB0aGF0IGhhcyBhcnJpdmVkIGZyb20gdGhlIHNlcnZlci5cbiAgICAgKiBAcGFyYW0gbWVzcyAtIFRoZSBmcmFtZSBkYXRhXG4gICAgICovXG4gICAgaGFuZGxlSW5jb21pbmdGcmFtZShtZXNzKSB7XG4gICAgICAgIGlmICh0aGlzLm15U29jayA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuOyAvLyBDaHJvbWUgYXBwYXJlbnRseSBkZWxpdmVycyBpbmNvbWluZyBwYWNrZXRzIGV2ZW4gYWZ0ZXIgd2UgLmNsb3NlKCkgdGhlIGNvbm5lY3Rpb24gc29tZXRpbWVzLlxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRhdGEgPSBtZXNzWydkYXRhJ107XG4gICAgICAgIHRoaXMuYnl0ZXNSZWNlaXZlZCArPSBkYXRhLmxlbmd0aDtcbiAgICAgICAgdGhpcy5zdGF0c18uaW5jcmVtZW50Q291bnRlcignYnl0ZXNfcmVjZWl2ZWQnLCBkYXRhLmxlbmd0aCk7XG4gICAgICAgIHRoaXMucmVzZXRLZWVwQWxpdmUoKTtcbiAgICAgICAgaWYgKHRoaXMuZnJhbWVzICE9PSBudWxsKSB7XG4gICAgICAgICAgICAvLyB3ZSdyZSBidWZmZXJpbmdcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kRnJhbWVfKGRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gdHJ5IHRvIHBhcnNlIG91dCBhIGZyYW1lIGNvdW50LCBvdGhlcndpc2UsIGFzc3VtZSAxIGFuZCBwcm9jZXNzIGl0XG4gICAgICAgICAgICBjb25zdCByZW1haW5pbmdEYXRhID0gdGhpcy5leHRyYWN0RnJhbWVDb3VudF8oZGF0YSk7XG4gICAgICAgICAgICBpZiAocmVtYWluaW5nRGF0YSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kRnJhbWVfKHJlbWFpbmluZ0RhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYSBtZXNzYWdlIHRvIHRoZSBzZXJ2ZXJcbiAgICAgKiBAcGFyYW0gZGF0YSAtIFRoZSBKU09OIG9iamVjdCB0byB0cmFuc21pdFxuICAgICAqL1xuICAgIHNlbmQoZGF0YSkge1xuICAgICAgICB0aGlzLnJlc2V0S2VlcEFsaXZlKCk7XG4gICAgICAgIGNvbnN0IGRhdGFTdHIgPSBzdHJpbmdpZnkoZGF0YSk7XG4gICAgICAgIHRoaXMuYnl0ZXNTZW50ICs9IGRhdGFTdHIubGVuZ3RoO1xuICAgICAgICB0aGlzLnN0YXRzXy5pbmNyZW1lbnRDb3VudGVyKCdieXRlc19zZW50JywgZGF0YVN0ci5sZW5ndGgpO1xuICAgICAgICAvL1dlIGNhbiBvbmx5IGZpdCBhIGNlcnRhaW4gYW1vdW50IGluIGVhY2ggd2Vic29ja2V0IGZyYW1lLCBzbyB3ZSBuZWVkIHRvIHNwbGl0IHRoaXMgcmVxdWVzdFxuICAgICAgICAvL3VwIGludG8gbXVsdGlwbGUgcGllY2VzIGlmIGl0IGRvZXNuJ3QgZml0IGluIG9uZSByZXF1ZXN0LlxuICAgICAgICBjb25zdCBkYXRhU2VncyA9IHNwbGl0U3RyaW5nQnlTaXplKGRhdGFTdHIsIFdFQlNPQ0tFVF9NQVhfRlJBTUVfU0laRSk7XG4gICAgICAgIC8vU2VuZCB0aGUgbGVuZ3RoIGhlYWRlclxuICAgICAgICBpZiAoZGF0YVNlZ3MubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgdGhpcy5zZW5kU3RyaW5nXyhTdHJpbmcoZGF0YVNlZ3MubGVuZ3RoKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy9TZW5kIHRoZSBhY3R1YWwgZGF0YSBpbiBzZWdtZW50cy5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhU2Vncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5zZW5kU3RyaW5nXyhkYXRhU2Vnc1tpXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2h1dGRvd25fKCkge1xuICAgICAgICB0aGlzLmlzQ2xvc2VkXyA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLmtlZXBhbGl2ZVRpbWVyKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMua2VlcGFsaXZlVGltZXIpO1xuICAgICAgICAgICAgdGhpcy5rZWVwYWxpdmVUaW1lciA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubXlTb2NrKSB7XG4gICAgICAgICAgICB0aGlzLm15U29jay5jbG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5teVNvY2sgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uQ2xvc2VkXygpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzQ2xvc2VkXykge1xuICAgICAgICAgICAgdGhpcy5sb2dfKCdXZWJTb2NrZXQgaXMgY2xvc2luZyBpdHNlbGYnKTtcbiAgICAgICAgICAgIHRoaXMuc2h1dGRvd25fKCk7XG4gICAgICAgICAgICAvLyBzaW5jZSB0aGlzIGlzIGFuIGludGVybmFsIGNsb3NlLCB0cmlnZ2VyIHRoZSBjbG9zZSBsaXN0ZW5lclxuICAgICAgICAgICAgaWYgKHRoaXMub25EaXNjb25uZWN0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkRpc2Nvbm5lY3QodGhpcy5ldmVyQ29ubmVjdGVkXyk7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkRpc2Nvbm5lY3QgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV4dGVybmFsLWZhY2luZyBjbG9zZSBoYW5kbGVyLlxuICAgICAqIENsb3NlIHRoZSB3ZWJzb2NrZXQgYW5kIGtpbGwgdGhlIGNvbm5lY3Rpb24uXG4gICAgICovXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc0Nsb3NlZF8pIHtcbiAgICAgICAgICAgIHRoaXMubG9nXygnV2ViU29ja2V0IGlzIGJlaW5nIGNsb3NlZCcpO1xuICAgICAgICAgICAgdGhpcy5zaHV0ZG93bl8oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBLaWxsIHRoZSBjdXJyZW50IGtlZXBhbGl2ZSB0aW1lciBhbmQgc3RhcnQgYSBuZXcgb25lLCB0byBlbnN1cmUgdGhhdCBpdCBhbHdheXMgZmlyZXMgTiBzZWNvbmRzIGFmdGVyXG4gICAgICogdGhlIGxhc3QgYWN0aXZpdHkuXG4gICAgICovXG4gICAgcmVzZXRLZWVwQWxpdmUoKSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5rZWVwYWxpdmVUaW1lcik7XG4gICAgICAgIHRoaXMua2VlcGFsaXZlVGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICAvL0lmIHRoZXJlIGhhcyBiZWVuIG5vIHdlYnNvY2tldCBhY3Rpdml0eSBmb3IgYSB3aGlsZSwgc2VuZCBhIG5vLW9wXG4gICAgICAgICAgICBpZiAodGhpcy5teVNvY2spIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbmRTdHJpbmdfKCcwJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlc2V0S2VlcEFsaXZlKCk7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB9LCBNYXRoLmZsb29yKFdFQlNPQ0tFVF9LRUVQQUxJVkVfSU5URVJWQUwpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhIHN0cmluZyBvdmVyIHRoZSB3ZWJzb2NrZXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3RyIC0gU3RyaW5nIHRvIHNlbmQuXG4gICAgICovXG4gICAgc2VuZFN0cmluZ18oc3RyKSB7XG4gICAgICAgIC8vIEZpcmVmb3ggc2VlbXMgdG8gc29tZXRpbWVzIHRocm93IGV4Y2VwdGlvbnMgKE5TX0VSUk9SX1VORVhQRUNURUQpIGZyb20gd2Vic29ja2V0IC5zZW5kKClcbiAgICAgICAgLy8gY2FsbHMgZm9yIHNvbWUgdW5rbm93biByZWFzb24uICBXZSB0cmVhdCB0aGVzZSBhcyBhbiBlcnJvciBhbmQgZGlzY29ubmVjdC5cbiAgICAgICAgLy8gU2VlIGh0dHBzOi8vYXBwLmFzYW5hLmNvbS8wLzU4OTI2MTExNDAyMjkyLzY4MDIxMzQwMjUwNDEwXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLm15U29jay5zZW5kKHN0cik7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRoaXMubG9nXygnRXhjZXB0aW9uIHRocm93biBmcm9tIFdlYlNvY2tldC5zZW5kKCk6JywgZS5tZXNzYWdlIHx8IGUuZGF0YSwgJ0Nsb3NpbmcgY29ubmVjdGlvbi4nKTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQodGhpcy5vbkNsb3NlZF8uYmluZCh0aGlzKSwgMCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIE51bWJlciBvZiByZXNwb25zZSBiZWZvcmUgd2UgY29uc2lkZXIgdGhlIGNvbm5lY3Rpb24gXCJoZWFsdGh5LlwiXG4gKi9cbldlYlNvY2tldENvbm5lY3Rpb24ucmVzcG9uc2VzUmVxdWlyZWRUb0JlSGVhbHRoeSA9IDI7XG4vKipcbiAqIFRpbWUgdG8gd2FpdCBmb3IgdGhlIGNvbm5lY3Rpb24gdGUgYmVjb21lIGhlYWx0aHkgYmVmb3JlIGdpdmluZyB1cC5cbiAqL1xuV2ViU29ja2V0Q29ubmVjdGlvbi5oZWFsdGh5VGltZW91dCA9IDMwMDAwO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDdXJyZW50bHkgc2ltcGxpc3RpYywgdGhpcyBjbGFzcyBtYW5hZ2VzIHdoYXQgdHJhbnNwb3J0IGEgQ29ubmVjdGlvbiBzaG91bGQgdXNlIGF0IHZhcmlvdXMgc3RhZ2VzIG9mIGl0c1xuICogbGlmZWN5Y2xlLlxuICpcbiAqIEl0IHN0YXJ0cyB3aXRoIGxvbmdwb2xsaW5nIGluIGEgYnJvd3NlciwgYW5kIGh0dHBwb2xsaW5nIG9uIG5vZGUuIEl0IHRoZW4gdXBncmFkZXMgdG8gd2Vic29ja2V0cyBpZlxuICogdGhleSBhcmUgYXZhaWxhYmxlLlxuICovXG5jbGFzcyBUcmFuc3BvcnRNYW5hZ2VyIHtcbiAgICBzdGF0aWMgZ2V0IEFMTF9UUkFOU1BPUlRTKCkge1xuICAgICAgICByZXR1cm4gW0Jyb3dzZXJQb2xsQ29ubmVjdGlvbiwgV2ViU29ja2V0Q29ubmVjdGlvbl07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciB0cmFuc3BvcnQgaGFzIGJlZW4gc2VsZWN0ZWQgdG8gZW5zdXJlIFdlYlNvY2tldENvbm5lY3Rpb24gb3IgQnJvd3NlclBvbGxDb25uZWN0aW9uIGFyZSBub3QgY2FsbGVkIGFmdGVyXG4gICAgICogVHJhbnNwb3J0TWFuYWdlciBoYXMgYWxyZWFkeSBzZXQgdXAgdHJhbnNwb3J0c19cbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0IElTX1RSQU5TUE9SVF9JTklUSUFMSVpFRCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2xvYmFsVHJhbnNwb3J0SW5pdGlhbGl6ZWRfO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gcmVwb0luZm8gLSBNZXRhZGF0YSBhcm91bmQgdGhlIG5hbWVzcGFjZSB3ZSdyZSBjb25uZWN0aW5nIHRvXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocmVwb0luZm8pIHtcbiAgICAgICAgdGhpcy5pbml0VHJhbnNwb3J0c18ocmVwb0luZm8pO1xuICAgIH1cbiAgICBpbml0VHJhbnNwb3J0c18ocmVwb0luZm8pIHtcbiAgICAgICAgY29uc3QgaXNXZWJTb2NrZXRzQXZhaWxhYmxlID0gV2ViU29ja2V0Q29ubmVjdGlvbiAmJiBXZWJTb2NrZXRDb25uZWN0aW9uWydpc0F2YWlsYWJsZSddKCk7XG4gICAgICAgIGxldCBpc1NraXBQb2xsQ29ubmVjdGlvbiA9IGlzV2ViU29ja2V0c0F2YWlsYWJsZSAmJiAhV2ViU29ja2V0Q29ubmVjdGlvbi5wcmV2aW91c2x5RmFpbGVkKCk7XG4gICAgICAgIGlmIChyZXBvSW5mby53ZWJTb2NrZXRPbmx5KSB7XG4gICAgICAgICAgICBpZiAoIWlzV2ViU29ja2V0c0F2YWlsYWJsZSkge1xuICAgICAgICAgICAgICAgIHdhcm4oXCJ3c3M6Ly8gVVJMIHVzZWQsIGJ1dCBicm93c2VyIGlzbid0IGtub3duIHRvIHN1cHBvcnQgd2Vic29ja2V0cy4gIFRyeWluZyBhbnl3YXkuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXNTa2lwUG9sbENvbm5lY3Rpb24gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1NraXBQb2xsQ29ubmVjdGlvbikge1xuICAgICAgICAgICAgdGhpcy50cmFuc3BvcnRzXyA9IFtXZWJTb2NrZXRDb25uZWN0aW9uXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHRyYW5zcG9ydHMgPSAodGhpcy50cmFuc3BvcnRzXyA9IFtdKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdHJhbnNwb3J0IG9mIFRyYW5zcG9ydE1hbmFnZXIuQUxMX1RSQU5TUE9SVFMpIHtcbiAgICAgICAgICAgICAgICBpZiAodHJhbnNwb3J0ICYmIHRyYW5zcG9ydFsnaXNBdmFpbGFibGUnXSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zcG9ydHMucHVzaCh0cmFuc3BvcnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFRyYW5zcG9ydE1hbmFnZXIuZ2xvYmFsVHJhbnNwb3J0SW5pdGlhbGl6ZWRfID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBUaGUgY29uc3RydWN0b3IgZm9yIHRoZSBpbml0aWFsIHRyYW5zcG9ydCB0byB1c2VcbiAgICAgKi9cbiAgICBpbml0aWFsVHJhbnNwb3J0KCkge1xuICAgICAgICBpZiAodGhpcy50cmFuc3BvcnRzXy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50cmFuc3BvcnRzX1swXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdHJhbnNwb3J0cyBhdmFpbGFibGUnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBUaGUgY29uc3RydWN0b3IgZm9yIHRoZSBuZXh0IHRyYW5zcG9ydCwgb3IgbnVsbFxuICAgICAqL1xuICAgIHVwZ3JhZGVUcmFuc3BvcnQoKSB7XG4gICAgICAgIGlmICh0aGlzLnRyYW5zcG9ydHNfLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRyYW5zcG9ydHNfWzFdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyBLZWVwcyB0cmFjayBvZiB3aGV0aGVyIHRoZSBUcmFuc3BvcnRNYW5hZ2VyIGhhcyBhbHJlYWR5IGNob3NlbiBhIHRyYW5zcG9ydCB0byB1c2VcblRyYW5zcG9ydE1hbmFnZXIuZ2xvYmFsVHJhbnNwb3J0SW5pdGlhbGl6ZWRfID0gZmFsc2U7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBBYm9ydCB1cGdyYWRlIGF0dGVtcHQgaWYgaXQgdGFrZXMgbG9uZ2VyIHRoYW4gNjBzLlxuY29uc3QgVVBHUkFERV9USU1FT1VUID0gNjAwMDA7XG4vLyBGb3Igc29tZSB0cmFuc3BvcnRzIChXZWJTb2NrZXRzKSwgd2UgbmVlZCB0byBcInZhbGlkYXRlXCIgdGhlIHRyYW5zcG9ydCBieSBleGNoYW5naW5nIGEgZmV3IHJlcXVlc3RzIGFuZCByZXNwb25zZXMuXG4vLyBJZiB3ZSBoYXZlbid0IHNlbnQgZW5vdWdoIHJlcXVlc3RzIHdpdGhpbiA1cywgd2UnbGwgc3RhcnQgc2VuZGluZyBub29wIHBpbmcgcmVxdWVzdHMuXG5jb25zdCBERUxBWV9CRUZPUkVfU0VORElOR19FWFRSQV9SRVFVRVNUUyA9IDUwMDA7XG4vLyBJZiB0aGUgaW5pdGlhbCBkYXRhIHNlbnQgdHJpZ2dlcnMgYSBsb3Qgb2YgYmFuZHdpZHRoIChpLmUuIGl0J3MgYSBsYXJnZSBwdXQgb3IgYSBsaXN0ZW4gZm9yIGEgbGFyZ2UgYW1vdW50IG9mIGRhdGEpXG4vLyB0aGVuIHdlIG1heSBub3QgYmUgYWJsZSB0byBleGNoYW5nZSBvdXIgcGluZy9wb25nIHJlcXVlc3RzIHdpdGhpbiB0aGUgaGVhbHRoeSB0aW1lb3V0LiAgU28gaWYgd2UgcmVhY2ggdGhlIHRpbWVvdXRcbi8vIGJ1dCB3ZSd2ZSBzZW50L3JlY2VpdmVkIGVub3VnaCBieXRlcywgd2UgZG9uJ3QgY2FuY2VsIHRoZSBjb25uZWN0aW9uLlxuY29uc3QgQllURVNfU0VOVF9IRUFMVEhZX09WRVJSSURFID0gMTAgKiAxMDI0O1xuY29uc3QgQllURVNfUkVDRUlWRURfSEVBTFRIWV9PVkVSUklERSA9IDEwMCAqIDEwMjQ7XG5jb25zdCBNRVNTQUdFX1RZUEUgPSAndCc7XG5jb25zdCBNRVNTQUdFX0RBVEEgPSAnZCc7XG5jb25zdCBDT05UUk9MX1NIVVRET1dOID0gJ3MnO1xuY29uc3QgQ09OVFJPTF9SRVNFVCA9ICdyJztcbmNvbnN0IENPTlRST0xfRVJST1IgPSAnZSc7XG5jb25zdCBDT05UUk9MX1BPTkcgPSAnbyc7XG5jb25zdCBTV0lUQ0hfQUNLID0gJ2EnO1xuY29uc3QgRU5EX1RSQU5TTUlTU0lPTiA9ICduJztcbmNvbnN0IFBJTkcgPSAncCc7XG5jb25zdCBTRVJWRVJfSEVMTE8gPSAnaCc7XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgcmVhbC10aW1lIGNvbm5lY3Rpb24gdG8gdGhlIHNlcnZlciB1c2luZyB3aGljaGV2ZXIgbWV0aG9kIHdvcmtzXG4gKiBiZXN0IGluIHRoZSBjdXJyZW50IGJyb3dzZXIuXG4gKi9cbmNsYXNzIENvbm5lY3Rpb24ge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBpZCAtIGFuIGlkIGZvciB0aGlzIGNvbm5lY3Rpb25cbiAgICAgKiBAcGFyYW0gcmVwb0luZm9fIC0gdGhlIGluZm8gZm9yIHRoZSBlbmRwb2ludCB0byBjb25uZWN0IHRvXG4gICAgICogQHBhcmFtIGFwcGxpY2F0aW9uSWRfIC0gdGhlIEZpcmViYXNlIEFwcCBJRCBmb3IgdGhpcyBwcm9qZWN0XG4gICAgICogQHBhcmFtIGFwcENoZWNrVG9rZW5fIC0gVGhlIEFwcCBDaGVjayBUb2tlbiBmb3IgdGhpcyBkZXZpY2UuXG4gICAgICogQHBhcmFtIGF1dGhUb2tlbl8gLSBUaGUgYXV0aCB0b2tlbiBmb3IgdGhpcyBzZXNzaW9uLlxuICAgICAqIEBwYXJhbSBvbk1lc3NhZ2VfIC0gdGhlIGNhbGxiYWNrIHRvIGJlIHRyaWdnZXJlZCB3aGVuIGEgc2VydmVyLXB1c2ggbWVzc2FnZSBhcnJpdmVzXG4gICAgICogQHBhcmFtIG9uUmVhZHlfIC0gdGhlIGNhbGxiYWNrIHRvIGJlIHRyaWdnZXJlZCB3aGVuIHRoaXMgY29ubmVjdGlvbiBpcyByZWFkeSB0byBzZW5kIG1lc3NhZ2VzLlxuICAgICAqIEBwYXJhbSBvbkRpc2Nvbm5lY3RfIC0gdGhlIGNhbGxiYWNrIHRvIGJlIHRyaWdnZXJlZCB3aGVuIGEgY29ubmVjdGlvbiB3YXMgbG9zdFxuICAgICAqIEBwYXJhbSBvbktpbGxfIC0gdGhlIGNhbGxiYWNrIHRvIGJlIHRyaWdnZXJlZCB3aGVuIHRoaXMgY29ubmVjdGlvbiBoYXMgcGVybWFuZW50bHkgc2h1dCBkb3duLlxuICAgICAqIEBwYXJhbSBsYXN0U2Vzc2lvbklkIC0gbGFzdCBzZXNzaW9uIGlkIGluIHBlcnNpc3RlbnQgY29ubmVjdGlvbi4gaXMgdXNlZCB0byBjbGVhbiB1cCBvbGQgc2Vzc2lvbiBpbiByZWFsLXRpbWUgc2VydmVyXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoaWQsIHJlcG9JbmZvXywgYXBwbGljYXRpb25JZF8sIGFwcENoZWNrVG9rZW5fLCBhdXRoVG9rZW5fLCBvbk1lc3NhZ2VfLCBvblJlYWR5Xywgb25EaXNjb25uZWN0Xywgb25LaWxsXywgbGFzdFNlc3Npb25JZCkge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMucmVwb0luZm9fID0gcmVwb0luZm9fO1xuICAgICAgICB0aGlzLmFwcGxpY2F0aW9uSWRfID0gYXBwbGljYXRpb25JZF87XG4gICAgICAgIHRoaXMuYXBwQ2hlY2tUb2tlbl8gPSBhcHBDaGVja1Rva2VuXztcbiAgICAgICAgdGhpcy5hdXRoVG9rZW5fID0gYXV0aFRva2VuXztcbiAgICAgICAgdGhpcy5vbk1lc3NhZ2VfID0gb25NZXNzYWdlXztcbiAgICAgICAgdGhpcy5vblJlYWR5XyA9IG9uUmVhZHlfO1xuICAgICAgICB0aGlzLm9uRGlzY29ubmVjdF8gPSBvbkRpc2Nvbm5lY3RfO1xuICAgICAgICB0aGlzLm9uS2lsbF8gPSBvbktpbGxfO1xuICAgICAgICB0aGlzLmxhc3RTZXNzaW9uSWQgPSBsYXN0U2Vzc2lvbklkO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb25Db3VudCA9IDA7XG4gICAgICAgIHRoaXMucGVuZGluZ0RhdGFNZXNzYWdlcyA9IFtdO1xuICAgICAgICB0aGlzLnN0YXRlXyA9IDAgLyogUmVhbHRpbWVTdGF0ZS5DT05ORUNUSU5HICovO1xuICAgICAgICB0aGlzLmxvZ18gPSBsb2dXcmFwcGVyKCdjOicgKyB0aGlzLmlkICsgJzonKTtcbiAgICAgICAgdGhpcy50cmFuc3BvcnRNYW5hZ2VyXyA9IG5ldyBUcmFuc3BvcnRNYW5hZ2VyKHJlcG9JbmZvXyk7XG4gICAgICAgIHRoaXMubG9nXygnQ29ubmVjdGlvbiBjcmVhdGVkJyk7XG4gICAgICAgIHRoaXMuc3RhcnRfKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyBhIGNvbm5lY3Rpb24gYXR0ZW1wdFxuICAgICAqL1xuICAgIHN0YXJ0XygpIHtcbiAgICAgICAgY29uc3QgY29ubiA9IHRoaXMudHJhbnNwb3J0TWFuYWdlcl8uaW5pdGlhbFRyYW5zcG9ydCgpO1xuICAgICAgICB0aGlzLmNvbm5fID0gbmV3IGNvbm4odGhpcy5uZXh0VHJhbnNwb3J0SWRfKCksIHRoaXMucmVwb0luZm9fLCB0aGlzLmFwcGxpY2F0aW9uSWRfLCB0aGlzLmFwcENoZWNrVG9rZW5fLCB0aGlzLmF1dGhUb2tlbl8sIG51bGwsIHRoaXMubGFzdFNlc3Npb25JZCk7XG4gICAgICAgIC8vIEZvciBjZXJ0YWluIHRyYW5zcG9ydHMgKFdlYlNvY2tldHMpLCB3ZSBuZWVkIHRvIHNlbmQgYW5kIHJlY2VpdmUgc2V2ZXJhbCBtZXNzYWdlcyBiYWNrIGFuZCBmb3J0aCBiZWZvcmUgd2VcbiAgICAgICAgLy8gY2FuIGNvbnNpZGVyIHRoZSB0cmFuc3BvcnQgaGVhbHRoeS5cbiAgICAgICAgdGhpcy5wcmltYXJ5UmVzcG9uc2VzUmVxdWlyZWRfID0gY29ublsncmVzcG9uc2VzUmVxdWlyZWRUb0JlSGVhbHRoeSddIHx8IDA7XG4gICAgICAgIGNvbnN0IG9uTWVzc2FnZVJlY2VpdmVkID0gdGhpcy5jb25uUmVjZWl2ZXJfKHRoaXMuY29ubl8pO1xuICAgICAgICBjb25zdCBvbkNvbm5lY3Rpb25Mb3N0ID0gdGhpcy5kaXNjb25uUmVjZWl2ZXJfKHRoaXMuY29ubl8pO1xuICAgICAgICB0aGlzLnR4XyA9IHRoaXMuY29ubl87XG4gICAgICAgIHRoaXMucnhfID0gdGhpcy5jb25uXztcbiAgICAgICAgdGhpcy5zZWNvbmRhcnlDb25uXyA9IG51bGw7XG4gICAgICAgIHRoaXMuaXNIZWFsdGh5XyA9IGZhbHNlO1xuICAgICAgICAvKlxuICAgICAgICAgKiBGaXJlZm94IGRvZXNuJ3QgbGlrZSB3aGVuIGNvZGUgZnJvbSBvbmUgaWZyYW1lIHRyaWVzIHRvIGNyZWF0ZSBhbm90aGVyIGlmcmFtZSBieSB3YXkgb2YgdGhlIHBhcmVudCBmcmFtZS5cbiAgICAgICAgICogVGhpcyBjYW4gb2NjdXIgaW4gdGhlIGNhc2Ugb2YgYSByZWRpcmVjdCwgaS5lLiB3ZSBndWVzc2VkIHdyb25nIG9uIHdoYXQgc2VydmVyIHRvIGNvbm5lY3QgdG8gYW5kIHJlY2VpdmVkIGEgcmVzZXQuXG4gICAgICAgICAqIFNvbWVob3csIHNldFRpbWVvdXQgc2VlbXMgdG8gbWFrZSB0aGlzIG9rLiBUaGF0IGRvZXNuJ3QgbWFrZSBzZW5zZSBmcm9tIGEgc2VjdXJpdHkgcGVyc3BlY3RpdmUsIHNpbmNlIHlvdSBzaG91bGRcbiAgICAgICAgICogc3RpbGwgaGF2ZSB0aGUgY29udGV4dCBvZiB5b3VyIG9yaWdpbmF0aW5nIGZyYW1lLlxuICAgICAgICAgKi9cbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAvLyB0aGlzLmNvbm5fIGdldHMgc2V0IHRvIG51bGwgaW4gc29tZSBvZiB0aGUgdGVzdHMuIENoZWNrIHRvIG1ha2Ugc3VyZSBpdCBzdGlsbCBleGlzdHMgYmVmb3JlIHVzaW5nIGl0XG4gICAgICAgICAgICB0aGlzLmNvbm5fICYmIHRoaXMuY29ubl8ub3Blbihvbk1lc3NhZ2VSZWNlaXZlZCwgb25Db25uZWN0aW9uTG9zdCk7XG4gICAgICAgIH0sIE1hdGguZmxvb3IoMCkpO1xuICAgICAgICBjb25zdCBoZWFsdGh5VGltZW91dE1TID0gY29ublsnaGVhbHRoeVRpbWVvdXQnXSB8fCAwO1xuICAgICAgICBpZiAoaGVhbHRoeVRpbWVvdXRNUyA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuaGVhbHRoeVRpbWVvdXRfID0gc2V0VGltZW91dE5vbkJsb2NraW5nKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmhlYWx0aHlUaW1lb3V0XyA9IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzSGVhbHRoeV8pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29ubl8gJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29ubl8uYnl0ZXNSZWNlaXZlZCA+IEJZVEVTX1JFQ0VJVkVEX0hFQUxUSFlfT1ZFUlJJREUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nXygnQ29ubmVjdGlvbiBleGNlZWRlZCBoZWFsdGh5IHRpbWVvdXQgYnV0IGhhcyByZWNlaXZlZCAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbm5fLmJ5dGVzUmVjZWl2ZWQgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgYnl0ZXMuICBNYXJraW5nIGNvbm5lY3Rpb24gaGVhbHRoeS4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNIZWFsdGh5XyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbm5fLm1hcmtDb25uZWN0aW9uSGVhbHRoeSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuY29ubl8gJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29ubl8uYnl0ZXNTZW50ID4gQllURVNfU0VOVF9IRUFMVEhZX09WRVJSSURFKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ18oJ0Nvbm5lY3Rpb24gZXhjZWVkZWQgaGVhbHRoeSB0aW1lb3V0IGJ1dCBoYXMgc2VudCAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbm5fLmJ5dGVzU2VudCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJyBieXRlcy4gIExlYXZpbmcgY29ubmVjdGlvbiBhbGl2ZS4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5PVEU6IFdlIGRvbid0IHdhbnQgdG8gbWFyayBpdCBoZWFsdGh5LCBzaW5jZSB3ZSBoYXZlIG5vIGd1YXJhbnRlZSB0aGF0IHRoZSBieXRlcyBoYXZlIG1hZGUgaXQgdG9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBzZXJ2ZXIuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ18oJ0Nsb3NpbmcgdW5oZWFsdGh5IGNvbm5lY3Rpb24gYWZ0ZXIgdGltZW91dC4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgfSwgTWF0aC5mbG9vcihoZWFsdGh5VGltZW91dE1TKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmV4dFRyYW5zcG9ydElkXygpIHtcbiAgICAgICAgcmV0dXJuICdjOicgKyB0aGlzLmlkICsgJzonICsgdGhpcy5jb25uZWN0aW9uQ291bnQrKztcbiAgICB9XG4gICAgZGlzY29ublJlY2VpdmVyXyhjb25uKSB7XG4gICAgICAgIHJldHVybiBldmVyQ29ubmVjdGVkID0+IHtcbiAgICAgICAgICAgIGlmIChjb25uID09PSB0aGlzLmNvbm5fKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkNvbm5lY3Rpb25Mb3N0XyhldmVyQ29ubmVjdGVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbm4gPT09IHRoaXMuc2Vjb25kYXJ5Q29ubl8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ18oJ1NlY29uZGFyeSBjb25uZWN0aW9uIGxvc3QuJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5vblNlY29uZGFyeUNvbm5lY3Rpb25Mb3N0XygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dfKCdjbG9zaW5nIGFuIG9sZCBjb25uZWN0aW9uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbm5SZWNlaXZlcl8oY29ubikge1xuICAgICAgICByZXR1cm4gKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlXyAhPT0gMiAvKiBSZWFsdGltZVN0YXRlLkRJU0NPTk5FQ1RFRCAqLykge1xuICAgICAgICAgICAgICAgIGlmIChjb25uID09PSB0aGlzLnJ4Xykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uUHJpbWFyeU1lc3NhZ2VSZWNlaXZlZF8obWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvbm4gPT09IHRoaXMuc2Vjb25kYXJ5Q29ubl8pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vblNlY29uZGFyeU1lc3NhZ2VSZWNlaXZlZF8obWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ18oJ21lc3NhZ2Ugb24gb2xkIGNvbm5lY3Rpb24nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBkYXRhTXNnIC0gQW4gYXJiaXRyYXJ5IGRhdGEgbWVzc2FnZSB0byBiZSBzZW50IHRvIHRoZSBzZXJ2ZXJcbiAgICAgKi9cbiAgICBzZW5kUmVxdWVzdChkYXRhTXNnKSB7XG4gICAgICAgIC8vIHdyYXAgaW4gYSBkYXRhIG1lc3NhZ2UgZW52ZWxvcGUgYW5kIHNlbmQgaXQgb25cbiAgICAgICAgY29uc3QgbXNnID0geyB0OiAnZCcsIGQ6IGRhdGFNc2cgfTtcbiAgICAgICAgdGhpcy5zZW5kRGF0YV8obXNnKTtcbiAgICB9XG4gICAgdHJ5Q2xlYW51cENvbm5lY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLnR4XyA9PT0gdGhpcy5zZWNvbmRhcnlDb25uXyAmJiB0aGlzLnJ4XyA9PT0gdGhpcy5zZWNvbmRhcnlDb25uXykge1xuICAgICAgICAgICAgdGhpcy5sb2dfKCdjbGVhbmluZyB1cCBhbmQgcHJvbW90aW5nIGEgY29ubmVjdGlvbjogJyArIHRoaXMuc2Vjb25kYXJ5Q29ubl8uY29ubklkKTtcbiAgICAgICAgICAgIHRoaXMuY29ubl8gPSB0aGlzLnNlY29uZGFyeUNvbm5fO1xuICAgICAgICAgICAgdGhpcy5zZWNvbmRhcnlDb25uXyA9IG51bGw7XG4gICAgICAgICAgICAvLyB0aGUgc2VydmVyIHdpbGwgc2h1dGRvd24gdGhlIG9sZCBjb25uZWN0aW9uXG4gICAgICAgIH1cbiAgICB9XG4gICAgb25TZWNvbmRhcnlDb250cm9sXyhjb250cm9sRGF0YSkge1xuICAgICAgICBpZiAoTUVTU0FHRV9UWVBFIGluIGNvbnRyb2xEYXRhKSB7XG4gICAgICAgICAgICBjb25zdCBjbWQgPSBjb250cm9sRGF0YVtNRVNTQUdFX1RZUEVdO1xuICAgICAgICAgICAgaWYgKGNtZCA9PT0gU1dJVENIX0FDSykge1xuICAgICAgICAgICAgICAgIHRoaXMudXBncmFkZUlmU2Vjb25kYXJ5SGVhbHRoeV8oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNtZCA9PT0gQ09OVFJPTF9SRVNFVCkge1xuICAgICAgICAgICAgICAgIC8vIE1vc3QgbGlrZWx5IHRoZSBzZXNzaW9uIHdhc24ndCB2YWxpZC4gQWJhbmRvbiB0aGUgc3dpdGNoIGF0dGVtcHRcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ18oJ0dvdCBhIHJlc2V0IG9uIHNlY29uZGFyeSwgY2xvc2luZyBpdCcpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2Vjb25kYXJ5Q29ubl8uY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAvLyBJZiB3ZSB3ZXJlIGFscmVhZHkgdXNpbmcgdGhpcyBjb25uZWN0aW9uIGZvciBzb21ldGhpbmcsIHRoYW4gd2UgbmVlZCB0byBmdWxseSBjbG9zZVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnR4XyA9PT0gdGhpcy5zZWNvbmRhcnlDb25uXyB8fFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJ4XyA9PT0gdGhpcy5zZWNvbmRhcnlDb25uXykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY21kID09PSBDT05UUk9MX1BPTkcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ18oJ2dvdCBwb25nIG9uIHNlY29uZGFyeS4nKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlY29uZGFyeVJlc3BvbnNlc1JlcXVpcmVkXy0tO1xuICAgICAgICAgICAgICAgIHRoaXMudXBncmFkZUlmU2Vjb25kYXJ5SGVhbHRoeV8oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBvblNlY29uZGFyeU1lc3NhZ2VSZWNlaXZlZF8ocGFyc2VkRGF0YSkge1xuICAgICAgICBjb25zdCBsYXllciA9IHJlcXVpcmVLZXkoJ3QnLCBwYXJzZWREYXRhKTtcbiAgICAgICAgY29uc3QgZGF0YSA9IHJlcXVpcmVLZXkoJ2QnLCBwYXJzZWREYXRhKTtcbiAgICAgICAgaWYgKGxheWVyID09PSAnYycpIHtcbiAgICAgICAgICAgIHRoaXMub25TZWNvbmRhcnlDb250cm9sXyhkYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsYXllciA9PT0gJ2QnKSB7XG4gICAgICAgICAgICAvLyBnb3QgYSBkYXRhIG1lc3NhZ2UsIGJ1dCB3ZSdyZSBzdGlsbCBzZWNvbmQgY29ubmVjdGlvbi4gTmVlZCB0byBidWZmZXIgaXQgdXBcbiAgICAgICAgICAgIHRoaXMucGVuZGluZ0RhdGFNZXNzYWdlcy5wdXNoKGRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIHByb3RvY29sIGxheWVyOiAnICsgbGF5ZXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVwZ3JhZGVJZlNlY29uZGFyeUhlYWx0aHlfKCkge1xuICAgICAgICBpZiAodGhpcy5zZWNvbmRhcnlSZXNwb25zZXNSZXF1aXJlZF8gPD0gMCkge1xuICAgICAgICAgICAgdGhpcy5sb2dfKCdTZWNvbmRhcnkgY29ubmVjdGlvbiBpcyBoZWFsdGh5LicpO1xuICAgICAgICAgICAgdGhpcy5pc0hlYWx0aHlfID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuc2Vjb25kYXJ5Q29ubl8ubWFya0Nvbm5lY3Rpb25IZWFsdGh5KCk7XG4gICAgICAgICAgICB0aGlzLnByb2NlZWRXaXRoVXBncmFkZV8oKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIFNlbmQgYSBwaW5nIHRvIG1ha2Ugc3VyZSB0aGUgY29ubmVjdGlvbiBpcyBoZWFsdGh5LlxuICAgICAgICAgICAgdGhpcy5sb2dfKCdzZW5kaW5nIHBpbmcgb24gc2Vjb25kYXJ5LicpO1xuICAgICAgICAgICAgdGhpcy5zZWNvbmRhcnlDb25uXy5zZW5kKHsgdDogJ2MnLCBkOiB7IHQ6IFBJTkcsIGQ6IHt9IH0gfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJvY2VlZFdpdGhVcGdyYWRlXygpIHtcbiAgICAgICAgLy8gdGVsbCB0aGlzIGNvbm5lY3Rpb24gdG8gY29uc2lkZXIgaXRzZWxmIG9wZW5cbiAgICAgICAgdGhpcy5zZWNvbmRhcnlDb25uXy5zdGFydCgpO1xuICAgICAgICAvLyBzZW5kIGFja1xuICAgICAgICB0aGlzLmxvZ18oJ3NlbmRpbmcgY2xpZW50IGFjayBvbiBzZWNvbmRhcnknKTtcbiAgICAgICAgdGhpcy5zZWNvbmRhcnlDb25uXy5zZW5kKHsgdDogJ2MnLCBkOiB7IHQ6IFNXSVRDSF9BQ0ssIGQ6IHt9IH0gfSk7XG4gICAgICAgIC8vIHNlbmQgZW5kIHBhY2tldCBvbiBwcmltYXJ5IHRyYW5zcG9ydCwgc3dpdGNoIHRvIHNlbmRpbmcgb24gdGhpcyBvbmVcbiAgICAgICAgLy8gY2FuIHJlY2VpdmUgb24gdGhpcyBvbmUsIGJ1ZmZlciByZXNwb25zZXMgdW50aWwgZW5kIHJlY2VpdmVkIG9uIHByaW1hcnkgdHJhbnNwb3J0XG4gICAgICAgIHRoaXMubG9nXygnRW5kaW5nIHRyYW5zbWlzc2lvbiBvbiBwcmltYXJ5Jyk7XG4gICAgICAgIHRoaXMuY29ubl8uc2VuZCh7IHQ6ICdjJywgZDogeyB0OiBFTkRfVFJBTlNNSVNTSU9OLCBkOiB7fSB9IH0pO1xuICAgICAgICB0aGlzLnR4XyA9IHRoaXMuc2Vjb25kYXJ5Q29ubl87XG4gICAgICAgIHRoaXMudHJ5Q2xlYW51cENvbm5lY3Rpb24oKTtcbiAgICB9XG4gICAgb25QcmltYXJ5TWVzc2FnZVJlY2VpdmVkXyhwYXJzZWREYXRhKSB7XG4gICAgICAgIC8vIE11c3QgcmVmZXIgdG8gcGFyc2VkRGF0YSBwcm9wZXJ0aWVzIGluIHF1b3Rlcywgc28gY2xvc3VyZSBkb2Vzbid0IHRvdWNoIHRoZW0uXG4gICAgICAgIGNvbnN0IGxheWVyID0gcmVxdWlyZUtleSgndCcsIHBhcnNlZERhdGEpO1xuICAgICAgICBjb25zdCBkYXRhID0gcmVxdWlyZUtleSgnZCcsIHBhcnNlZERhdGEpO1xuICAgICAgICBpZiAobGF5ZXIgPT09ICdjJykge1xuICAgICAgICAgICAgdGhpcy5vbkNvbnRyb2xfKGRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGxheWVyID09PSAnZCcpIHtcbiAgICAgICAgICAgIHRoaXMub25EYXRhTWVzc2FnZV8oZGF0YSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25EYXRhTWVzc2FnZV8obWVzc2FnZSkge1xuICAgICAgICB0aGlzLm9uUHJpbWFyeVJlc3BvbnNlXygpO1xuICAgICAgICAvLyBXZSBkb24ndCBkbyBhbnl0aGluZyB3aXRoIGRhdGEgbWVzc2FnZXMsIGp1c3Qga2ljayB0aGVtIHVwIGEgbGV2ZWxcbiAgICAgICAgdGhpcy5vbk1lc3NhZ2VfKG1lc3NhZ2UpO1xuICAgIH1cbiAgICBvblByaW1hcnlSZXNwb25zZV8oKSB7XG4gICAgICAgIGlmICghdGhpcy5pc0hlYWx0aHlfKSB7XG4gICAgICAgICAgICB0aGlzLnByaW1hcnlSZXNwb25zZXNSZXF1aXJlZF8tLTtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaW1hcnlSZXNwb25zZXNSZXF1aXJlZF8gPD0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nXygnUHJpbWFyeSBjb25uZWN0aW9uIGlzIGhlYWx0aHkuJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0hlYWx0aHlfID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbm5fLm1hcmtDb25uZWN0aW9uSGVhbHRoeSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIG9uQ29udHJvbF8oY29udHJvbERhdGEpIHtcbiAgICAgICAgY29uc3QgY21kID0gcmVxdWlyZUtleShNRVNTQUdFX1RZUEUsIGNvbnRyb2xEYXRhKTtcbiAgICAgICAgaWYgKE1FU1NBR0VfREFUQSBpbiBjb250cm9sRGF0YSkge1xuICAgICAgICAgICAgY29uc3QgcGF5bG9hZCA9IGNvbnRyb2xEYXRhW01FU1NBR0VfREFUQV07XG4gICAgICAgICAgICBpZiAoY21kID09PSBTRVJWRVJfSEVMTE8pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBoYW5kc2hha2VQYXlsb2FkID0gT2JqZWN0LmFzc2lnbih7fSwgcGF5bG9hZCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucmVwb0luZm9fLmlzVXNpbmdFbXVsYXRvcikge1xuICAgICAgICAgICAgICAgICAgICAvLyBVcG9uIGNvbm5lY3RpbmcsIHRoZSBlbXVsYXRvciB3aWxsIHBhc3MgdGhlIGhvc3RuYW1lIHRoYXQgaXQncyBhd2FyZSBvZiwgYnV0IHdlIHByZWZlciB0aGUgdXNlcidzIHNldCBob3N0bmFtZSB2aWEgYGNvbm5lY3REYXRhYmFzZUVtdWxhdG9yYCBvdmVyIHdoYXQgdGhlIGVtdWxhdG9yIHBhc3Nlcy5cbiAgICAgICAgICAgICAgICAgICAgaGFuZHNoYWtlUGF5bG9hZC5oID0gdGhpcy5yZXBvSW5mb18uaG9zdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5vbkhhbmRzaGFrZV8oaGFuZHNoYWtlUGF5bG9hZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjbWQgPT09IEVORF9UUkFOU01JU1NJT04pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ18oJ3JlY3ZkIGVuZCB0cmFuc21pc3Npb24gb24gcHJpbWFyeScpO1xuICAgICAgICAgICAgICAgIHRoaXMucnhfID0gdGhpcy5zZWNvbmRhcnlDb25uXztcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucGVuZGluZ0RhdGFNZXNzYWdlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRGF0YU1lc3NhZ2VfKHRoaXMucGVuZGluZ0RhdGFNZXNzYWdlc1tpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZ0RhdGFNZXNzYWdlcyA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMudHJ5Q2xlYW51cENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNtZCA9PT0gQ09OVFJPTF9TSFVURE9XTikge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgd2FzIHByZXZpb3VzbHkgdGhlICdvbktpbGwnIGNhbGxiYWNrIHBhc3NlZCB0byB0aGUgbG93ZXItbGV2ZWwgY29ubmVjdGlvblxuICAgICAgICAgICAgICAgIC8vIHBheWxvYWQgaW4gdGhpcyBjYXNlIGlzIHRoZSByZWFzb24gZm9yIHRoZSBzaHV0ZG93bi4gR2VuZXJhbGx5IGEgaHVtYW4tcmVhZGFibGUgZXJyb3JcbiAgICAgICAgICAgICAgICB0aGlzLm9uQ29ubmVjdGlvblNodXRkb3duXyhwYXlsb2FkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNtZCA9PT0gQ09OVFJPTF9SRVNFVCkge1xuICAgICAgICAgICAgICAgIC8vIHBheWxvYWQgaW4gdGhpcyBjYXNlIGlzIHRoZSBob3N0IHdlIHNob3VsZCBjb250YWN0XG4gICAgICAgICAgICAgICAgdGhpcy5vblJlc2V0XyhwYXlsb2FkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNtZCA9PT0gQ09OVFJPTF9FUlJPUikge1xuICAgICAgICAgICAgICAgIGVycm9yKCdTZXJ2ZXIgRXJyb3I6ICcgKyBwYXlsb2FkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNtZCA9PT0gQ09OVFJPTF9QT05HKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dfKCdnb3QgcG9uZyBvbiBwcmltYXJ5LicpO1xuICAgICAgICAgICAgICAgIHRoaXMub25QcmltYXJ5UmVzcG9uc2VfKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kUGluZ09uUHJpbWFyeUlmTmVjZXNzYXJ5XygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZXJyb3IoJ1Vua25vd24gY29udHJvbCBwYWNrZXQgY29tbWFuZDogJyArIGNtZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGhhbmRzaGFrZSAtIFRoZSBoYW5kc2hha2UgZGF0YSByZXR1cm5lZCBmcm9tIHRoZSBzZXJ2ZXJcbiAgICAgKi9cbiAgICBvbkhhbmRzaGFrZV8oaGFuZHNoYWtlKSB7XG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IGhhbmRzaGFrZS50cztcbiAgICAgICAgY29uc3QgdmVyc2lvbiA9IGhhbmRzaGFrZS52O1xuICAgICAgICBjb25zdCBob3N0ID0gaGFuZHNoYWtlLmg7XG4gICAgICAgIHRoaXMuc2Vzc2lvbklkID0gaGFuZHNoYWtlLnM7XG4gICAgICAgIHRoaXMucmVwb0luZm9fLmhvc3QgPSBob3N0O1xuICAgICAgICAvLyBpZiB3ZSd2ZSBhbHJlYWR5IGNsb3NlZCB0aGUgY29ubmVjdGlvbiwgdGhlbiBkb24ndCBib3RoZXIgdHJ5aW5nIHRvIHByb2dyZXNzIGZ1cnRoZXJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGVfID09PSAwIC8qIFJlYWx0aW1lU3RhdGUuQ09OTkVDVElORyAqLykge1xuICAgICAgICAgICAgdGhpcy5jb25uXy5zdGFydCgpO1xuICAgICAgICAgICAgdGhpcy5vbkNvbm5lY3Rpb25Fc3RhYmxpc2hlZF8odGhpcy5jb25uXywgdGltZXN0YW1wKTtcbiAgICAgICAgICAgIGlmIChQUk9UT0NPTF9WRVJTSU9OICE9PSB2ZXJzaW9uKSB7XG4gICAgICAgICAgICAgICAgd2FybignUHJvdG9jb2wgdmVyc2lvbiBtaXNtYXRjaCBkZXRlY3RlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVE9ETzogZG8gd2Ugd2FudCB0byB1cGdyYWRlPyB3aGVuPyBtYXliZSBhIGRlbGF5P1xuICAgICAgICAgICAgdGhpcy50cnlTdGFydFVwZ3JhZGVfKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJ5U3RhcnRVcGdyYWRlXygpIHtcbiAgICAgICAgY29uc3QgY29ubiA9IHRoaXMudHJhbnNwb3J0TWFuYWdlcl8udXBncmFkZVRyYW5zcG9ydCgpO1xuICAgICAgICBpZiAoY29ubikge1xuICAgICAgICAgICAgdGhpcy5zdGFydFVwZ3JhZGVfKGNvbm4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXJ0VXBncmFkZV8oY29ubikge1xuICAgICAgICB0aGlzLnNlY29uZGFyeUNvbm5fID0gbmV3IGNvbm4odGhpcy5uZXh0VHJhbnNwb3J0SWRfKCksIHRoaXMucmVwb0luZm9fLCB0aGlzLmFwcGxpY2F0aW9uSWRfLCB0aGlzLmFwcENoZWNrVG9rZW5fLCB0aGlzLmF1dGhUb2tlbl8sIHRoaXMuc2Vzc2lvbklkKTtcbiAgICAgICAgLy8gRm9yIGNlcnRhaW4gdHJhbnNwb3J0cyAoV2ViU29ja2V0cyksIHdlIG5lZWQgdG8gc2VuZCBhbmQgcmVjZWl2ZSBzZXZlcmFsIG1lc3NhZ2VzIGJhY2sgYW5kIGZvcnRoIGJlZm9yZSB3ZVxuICAgICAgICAvLyBjYW4gY29uc2lkZXIgdGhlIHRyYW5zcG9ydCBoZWFsdGh5LlxuICAgICAgICB0aGlzLnNlY29uZGFyeVJlc3BvbnNlc1JlcXVpcmVkXyA9XG4gICAgICAgICAgICBjb25uWydyZXNwb25zZXNSZXF1aXJlZFRvQmVIZWFsdGh5J10gfHwgMDtcbiAgICAgICAgY29uc3Qgb25NZXNzYWdlID0gdGhpcy5jb25uUmVjZWl2ZXJfKHRoaXMuc2Vjb25kYXJ5Q29ubl8pO1xuICAgICAgICBjb25zdCBvbkRpc2Nvbm5lY3QgPSB0aGlzLmRpc2Nvbm5SZWNlaXZlcl8odGhpcy5zZWNvbmRhcnlDb25uXyk7XG4gICAgICAgIHRoaXMuc2Vjb25kYXJ5Q29ubl8ub3Blbihvbk1lc3NhZ2UsIG9uRGlzY29ubmVjdCk7XG4gICAgICAgIC8vIElmIHdlIGhhdmVuJ3Qgc3VjY2Vzc2Z1bGx5IHVwZ3JhZGVkIGFmdGVyIFVQR1JBREVfVElNRU9VVCwgZ2l2ZSB1cCBhbmQga2lsbCB0aGUgc2Vjb25kYXJ5LlxuICAgICAgICBzZXRUaW1lb3V0Tm9uQmxvY2tpbmcoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2Vjb25kYXJ5Q29ubl8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ18oJ1RpbWVkIG91dCB0cnlpbmcgdG8gdXBncmFkZS4nKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlY29uZGFyeUNvbm5fLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIE1hdGguZmxvb3IoVVBHUkFERV9USU1FT1VUKSk7XG4gICAgfVxuICAgIG9uUmVzZXRfKGhvc3QpIHtcbiAgICAgICAgdGhpcy5sb2dfKCdSZXNldCBwYWNrZXQgcmVjZWl2ZWQuICBOZXcgaG9zdDogJyArIGhvc3QpO1xuICAgICAgICB0aGlzLnJlcG9JbmZvXy5ob3N0ID0gaG9zdDtcbiAgICAgICAgLy8gVE9ETzogaWYgd2UncmUgYWxyZWFkeSBcImNvbm5lY3RlZFwiLCB3ZSBuZWVkIHRvIHRyaWdnZXIgYSBkaXNjb25uZWN0IGF0IHRoZSBuZXh0IGxheWVyIHVwLlxuICAgICAgICAvLyBXZSBkb24ndCBjdXJyZW50bHkgc3VwcG9ydCByZXNldHMgYWZ0ZXIgdGhlIGNvbm5lY3Rpb24gaGFzIGFscmVhZHkgYmVlbiBlc3RhYmxpc2hlZFxuICAgICAgICBpZiAodGhpcy5zdGF0ZV8gPT09IDEgLyogUmVhbHRpbWVTdGF0ZS5DT05ORUNURUQgKi8pIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIENsb3NlIHdoYXRldmVyIGNvbm5lY3Rpb25zIHdlIGhhdmUgb3BlbiBhbmQgc3RhcnQgYWdhaW4uXG4gICAgICAgICAgICB0aGlzLmNsb3NlQ29ubmVjdGlvbnNfKCk7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0XygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uQ29ubmVjdGlvbkVzdGFibGlzaGVkXyhjb25uLCB0aW1lc3RhbXApIHtcbiAgICAgICAgdGhpcy5sb2dfKCdSZWFsdGltZSBjb25uZWN0aW9uIGVzdGFibGlzaGVkLicpO1xuICAgICAgICB0aGlzLmNvbm5fID0gY29ubjtcbiAgICAgICAgdGhpcy5zdGF0ZV8gPSAxIC8qIFJlYWx0aW1lU3RhdGUuQ09OTkVDVEVEICovO1xuICAgICAgICBpZiAodGhpcy5vblJlYWR5Xykge1xuICAgICAgICAgICAgdGhpcy5vblJlYWR5Xyh0aW1lc3RhbXAsIHRoaXMuc2Vzc2lvbklkKTtcbiAgICAgICAgICAgIHRoaXMub25SZWFkeV8gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIGFmdGVyIDUgc2Vjb25kcyB3ZSBoYXZlbid0IHNlbnQgZW5vdWdoIHJlcXVlc3RzIHRvIHRoZSBzZXJ2ZXIgdG8gZ2V0IHRoZSBjb25uZWN0aW9uIGhlYWx0aHksXG4gICAgICAgIC8vIHNlbmQgc29tZSBwaW5ncy5cbiAgICAgICAgaWYgKHRoaXMucHJpbWFyeVJlc3BvbnNlc1JlcXVpcmVkXyA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5sb2dfKCdQcmltYXJ5IGNvbm5lY3Rpb24gaXMgaGVhbHRoeS4nKTtcbiAgICAgICAgICAgIHRoaXMuaXNIZWFsdGh5XyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0Tm9uQmxvY2tpbmcoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VuZFBpbmdPblByaW1hcnlJZk5lY2Vzc2FyeV8oKTtcbiAgICAgICAgICAgIH0sIE1hdGguZmxvb3IoREVMQVlfQkVGT1JFX1NFTkRJTkdfRVhUUkFfUkVRVUVTVFMpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZW5kUGluZ09uUHJpbWFyeUlmTmVjZXNzYXJ5XygpIHtcbiAgICAgICAgLy8gSWYgdGhlIGNvbm5lY3Rpb24gaXNuJ3QgY29uc2lkZXJlZCBoZWFsdGh5IHlldCwgd2UnbGwgc2VuZCBhIG5vb3AgcGluZyBwYWNrZXQgcmVxdWVzdC5cbiAgICAgICAgaWYgKCF0aGlzLmlzSGVhbHRoeV8gJiYgdGhpcy5zdGF0ZV8gPT09IDEgLyogUmVhbHRpbWVTdGF0ZS5DT05ORUNURUQgKi8pIHtcbiAgICAgICAgICAgIHRoaXMubG9nXygnc2VuZGluZyBwaW5nIG9uIHByaW1hcnkuJyk7XG4gICAgICAgICAgICB0aGlzLnNlbmREYXRhXyh7IHQ6ICdjJywgZDogeyB0OiBQSU5HLCBkOiB7fSB9IH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uU2Vjb25kYXJ5Q29ubmVjdGlvbkxvc3RfKCkge1xuICAgICAgICBjb25zdCBjb25uID0gdGhpcy5zZWNvbmRhcnlDb25uXztcbiAgICAgICAgdGhpcy5zZWNvbmRhcnlDb25uXyA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLnR4XyA9PT0gY29ubiB8fCB0aGlzLnJ4XyA9PT0gY29ubikge1xuICAgICAgICAgICAgLy8gd2UgYXJlIHJlbHlpbmcgb24gdGhpcyBjb25uZWN0aW9uIGFscmVhZHkgaW4gc29tZSBjYXBhY2l0eS4gVGhlcmVmb3JlLCBhIGZhaWx1cmUgaXMgcmVhbFxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBldmVyQ29ubmVjdGVkIC0gV2hldGhlciBvciBub3QgdGhlIGNvbm5lY3Rpb24gZXZlciByZWFjaGVkIGEgc2VydmVyLiBVc2VkIHRvIGRldGVybWluZSBpZlxuICAgICAqIHdlIHNob3VsZCBmbHVzaCB0aGUgaG9zdCBjYWNoZVxuICAgICAqL1xuICAgIG9uQ29ubmVjdGlvbkxvc3RfKGV2ZXJDb25uZWN0ZWQpIHtcbiAgICAgICAgdGhpcy5jb25uXyA9IG51bGw7XG4gICAgICAgIC8vIE5PVEU6IElGIHlvdSdyZSBzZWVpbmcgYSBGaXJlZm94IGVycm9yIGZvciB0aGlzIGxpbmUsIEkgdGhpbmsgaXQgbWlnaHQgYmUgYmVjYXVzZSBpdCdzIGdldHRpbmdcbiAgICAgICAgLy8gY2FsbGVkIG9uIHdpbmRvdyBjbG9zZSBhbmQgUmVhbHRpbWVTdGF0ZS5DT05ORUNUSU5HIGlzIG5vIGxvbmdlciBkZWZpbmVkLiAgSnVzdCBhIGd1ZXNzLlxuICAgICAgICBpZiAoIWV2ZXJDb25uZWN0ZWQgJiYgdGhpcy5zdGF0ZV8gPT09IDAgLyogUmVhbHRpbWVTdGF0ZS5DT05ORUNUSU5HICovKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ18oJ1JlYWx0aW1lIGNvbm5lY3Rpb24gZmFpbGVkLicpO1xuICAgICAgICAgICAgLy8gU2luY2Ugd2UgZmFpbGVkIHRvIGNvbm5lY3QgYXQgYWxsLCBjbGVhciBhbnkgY2FjaGVkIGVudHJ5IGZvciB0aGlzIG5hbWVzcGFjZSBpbiBjYXNlIHRoZSBtYWNoaW5lIHdlbnQgYXdheVxuICAgICAgICAgICAgaWYgKHRoaXMucmVwb0luZm9fLmlzQ2FjaGVhYmxlSG9zdCgpKSB7XG4gICAgICAgICAgICAgICAgUGVyc2lzdGVudFN0b3JhZ2UucmVtb3ZlKCdob3N0OicgKyB0aGlzLnJlcG9JbmZvXy5ob3N0KTtcbiAgICAgICAgICAgICAgICAvLyByZXNldCB0aGUgaW50ZXJuYWwgaG9zdCB0byB3aGF0IHdlIHdvdWxkIHNob3cgdGhlIHVzZXIsIGkuZS4gPG5zPi5maXJlYmFzZWlvLmNvbVxuICAgICAgICAgICAgICAgIHRoaXMucmVwb0luZm9fLmludGVybmFsSG9zdCA9IHRoaXMucmVwb0luZm9fLmhvc3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5zdGF0ZV8gPT09IDEgLyogUmVhbHRpbWVTdGF0ZS5DT05ORUNURUQgKi8pIHtcbiAgICAgICAgICAgIHRoaXMubG9nXygnUmVhbHRpbWUgY29ubmVjdGlvbiBsb3N0LicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gICAgb25Db25uZWN0aW9uU2h1dGRvd25fKHJlYXNvbikge1xuICAgICAgICB0aGlzLmxvZ18oJ0Nvbm5lY3Rpb24gc2h1dGRvd24gY29tbWFuZCByZWNlaXZlZC4gU2h1dHRpbmcgZG93bi4uLicpO1xuICAgICAgICBpZiAodGhpcy5vbktpbGxfKSB7XG4gICAgICAgICAgICB0aGlzLm9uS2lsbF8ocmVhc29uKTtcbiAgICAgICAgICAgIHRoaXMub25LaWxsXyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2UgaW50ZW50aW9uYWxseSBkb24ndCB3YW50IHRvIGZpcmUgb25EaXNjb25uZWN0IChraWxsIGlzIGEgZGlmZmVyZW50IGNhc2UpLFxuICAgICAgICAvLyBzbyBjbGVhciB0aGUgY2FsbGJhY2suXG4gICAgICAgIHRoaXMub25EaXNjb25uZWN0XyA9IG51bGw7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gICAgc2VuZERhdGFfKGRhdGEpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGVfICE9PSAxIC8qIFJlYWx0aW1lU3RhdGUuQ09OTkVDVEVEICovKSB7XG4gICAgICAgICAgICB0aHJvdyAnQ29ubmVjdGlvbiBpcyBub3QgY29ubmVjdGVkJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudHhfLnNlbmQoZGF0YSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xlYW5zIHVwIHRoaXMgY29ubmVjdGlvbiwgY2FsbGluZyB0aGUgYXBwcm9wcmlhdGUgY2FsbGJhY2tzXG4gICAgICovXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlXyAhPT0gMiAvKiBSZWFsdGltZVN0YXRlLkRJU0NPTk5FQ1RFRCAqLykge1xuICAgICAgICAgICAgdGhpcy5sb2dfKCdDbG9zaW5nIHJlYWx0aW1lIGNvbm5lY3Rpb24uJyk7XG4gICAgICAgICAgICB0aGlzLnN0YXRlXyA9IDIgLyogUmVhbHRpbWVTdGF0ZS5ESVNDT05ORUNURUQgKi87XG4gICAgICAgICAgICB0aGlzLmNsb3NlQ29ubmVjdGlvbnNfKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5vbkRpc2Nvbm5lY3RfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkRpc2Nvbm5lY3RfKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkRpc2Nvbm5lY3RfID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjbG9zZUNvbm5lY3Rpb25zXygpIHtcbiAgICAgICAgdGhpcy5sb2dfKCdTaHV0dGluZyBkb3duIGFsbCBjb25uZWN0aW9ucycpO1xuICAgICAgICBpZiAodGhpcy5jb25uXykge1xuICAgICAgICAgICAgdGhpcy5jb25uXy5jbG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5jb25uXyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc2Vjb25kYXJ5Q29ubl8pIHtcbiAgICAgICAgICAgIHRoaXMuc2Vjb25kYXJ5Q29ubl8uY2xvc2UoKTtcbiAgICAgICAgICAgIHRoaXMuc2Vjb25kYXJ5Q29ubl8gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmhlYWx0aHlUaW1lb3V0Xykge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuaGVhbHRoeVRpbWVvdXRfKTtcbiAgICAgICAgICAgIHRoaXMuaGVhbHRoeVRpbWVvdXRfID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSW50ZXJmYWNlIGRlZmluaW5nIHRoZSBzZXQgb2YgYWN0aW9ucyB0aGF0IGNhbiBiZSBwZXJmb3JtZWQgYWdhaW5zdCB0aGUgRmlyZWJhc2Ugc2VydmVyXG4gKiAoYmFzaWNhbGx5IGNvcnJlc3BvbmRzIHRvIG91ciB3aXJlIHByb3RvY29sKS5cbiAqXG4gKiBAaW50ZXJmYWNlXG4gKi9cbmNsYXNzIFNlcnZlckFjdGlvbnMge1xuICAgIHB1dChwYXRoU3RyaW5nLCBkYXRhLCBvbkNvbXBsZXRlLCBoYXNoKSB7IH1cbiAgICBtZXJnZShwYXRoU3RyaW5nLCBkYXRhLCBvbkNvbXBsZXRlLCBoYXNoKSB7IH1cbiAgICAvKipcbiAgICAgKiBSZWZyZXNoZXMgdGhlIGF1dGggdG9rZW4gZm9yIHRoZSBjdXJyZW50IGNvbm5lY3Rpb24uXG4gICAgICogQHBhcmFtIHRva2VuIC0gVGhlIGF1dGhlbnRpY2F0aW9uIHRva2VuXG4gICAgICovXG4gICAgcmVmcmVzaEF1dGhUb2tlbih0b2tlbikgeyB9XG4gICAgLyoqXG4gICAgICogUmVmcmVzaGVzIHRoZSBhcHAgY2hlY2sgdG9rZW4gZm9yIHRoZSBjdXJyZW50IGNvbm5lY3Rpb24uXG4gICAgICogQHBhcmFtIHRva2VuIFRoZSBhcHAgY2hlY2sgdG9rZW5cbiAgICAgKi9cbiAgICByZWZyZXNoQXBwQ2hlY2tUb2tlbih0b2tlbikgeyB9XG4gICAgb25EaXNjb25uZWN0UHV0KHBhdGhTdHJpbmcsIGRhdGEsIG9uQ29tcGxldGUpIHsgfVxuICAgIG9uRGlzY29ubmVjdE1lcmdlKHBhdGhTdHJpbmcsIGRhdGEsIG9uQ29tcGxldGUpIHsgfVxuICAgIG9uRGlzY29ubmVjdENhbmNlbChwYXRoU3RyaW5nLCBvbkNvbXBsZXRlKSB7IH1cbiAgICByZXBvcnRTdGF0cyhzdGF0cykgeyB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEJhc2UgY2xhc3MgdG8gYmUgdXNlZCBpZiB5b3Ugd2FudCB0byBlbWl0IGV2ZW50cy4gQ2FsbCB0aGUgY29uc3RydWN0b3Igd2l0aFxuICogdGhlIHNldCBvZiBhbGxvd2VkIGV2ZW50IG5hbWVzLlxuICovXG5jbGFzcyBFdmVudEVtaXR0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGFsbG93ZWRFdmVudHNfKSB7XG4gICAgICAgIHRoaXMuYWxsb3dlZEV2ZW50c18gPSBhbGxvd2VkRXZlbnRzXztcbiAgICAgICAgdGhpcy5saXN0ZW5lcnNfID0ge307XG4gICAgICAgIGFzc2VydChBcnJheS5pc0FycmF5KGFsbG93ZWRFdmVudHNfKSAmJiBhbGxvd2VkRXZlbnRzXy5sZW5ndGggPiAwLCAnUmVxdWlyZXMgYSBub24tZW1wdHkgYXJyYXknKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVG8gYmUgY2FsbGVkIGJ5IGRlcml2ZWQgY2xhc3NlcyB0byB0cmlnZ2VyIGV2ZW50cy5cbiAgICAgKi9cbiAgICB0cmlnZ2VyKGV2ZW50VHlwZSwgLi4udmFyQXJncykge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLmxpc3RlbmVyc19bZXZlbnRUeXBlXSkpIHtcbiAgICAgICAgICAgIC8vIENsb25lIHRoZSBsaXN0LCBzaW5jZSBjYWxsYmFja3MgY291bGQgYWRkL3JlbW92ZSBsaXN0ZW5lcnMuXG4gICAgICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSBbLi4udGhpcy5saXN0ZW5lcnNfW2V2ZW50VHlwZV1dO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsaXN0ZW5lcnNbaV0uY2FsbGJhY2suYXBwbHkobGlzdGVuZXJzW2ldLmNvbnRleHQsIHZhckFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIG9uKGV2ZW50VHlwZSwgY2FsbGJhY2ssIGNvbnRleHQpIHtcbiAgICAgICAgdGhpcy52YWxpZGF0ZUV2ZW50VHlwZV8oZXZlbnRUeXBlKTtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnNfW2V2ZW50VHlwZV0gPSB0aGlzLmxpc3RlbmVyc19bZXZlbnRUeXBlXSB8fCBbXTtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnNfW2V2ZW50VHlwZV0ucHVzaCh7IGNhbGxiYWNrLCBjb250ZXh0IH0pO1xuICAgICAgICBjb25zdCBldmVudERhdGEgPSB0aGlzLmdldEluaXRpYWxFdmVudChldmVudFR5cGUpO1xuICAgICAgICBpZiAoZXZlbnREYXRhKSB7XG4gICAgICAgICAgICBjYWxsYmFjay5hcHBseShjb250ZXh0LCBldmVudERhdGEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9mZihldmVudFR5cGUsIGNhbGxiYWNrLCBjb250ZXh0KSB7XG4gICAgICAgIHRoaXMudmFsaWRhdGVFdmVudFR5cGVfKGV2ZW50VHlwZSk7XG4gICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMubGlzdGVuZXJzX1tldmVudFR5cGVdIHx8IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3RlbmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGxpc3RlbmVyc1tpXS5jYWxsYmFjayA9PT0gY2FsbGJhY2sgJiZcbiAgICAgICAgICAgICAgICAoIWNvbnRleHQgfHwgY29udGV4dCA9PT0gbGlzdGVuZXJzW2ldLmNvbnRleHQpKSB7XG4gICAgICAgICAgICAgICAgbGlzdGVuZXJzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFsaWRhdGVFdmVudFR5cGVfKGV2ZW50VHlwZSkge1xuICAgICAgICBhc3NlcnQodGhpcy5hbGxvd2VkRXZlbnRzXy5maW5kKGV0ID0+IHtcbiAgICAgICAgICAgIHJldHVybiBldCA9PT0gZXZlbnRUeXBlO1xuICAgICAgICB9KSwgJ1Vua25vd24gZXZlbnQ6ICcgKyBldmVudFR5cGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogTW9uaXRvcnMgb25saW5lIHN0YXRlIChhcyByZXBvcnRlZCBieSB3aW5kb3cub25saW5lL29mZmxpbmUgZXZlbnRzKS5cbiAqXG4gKiBUaGUgZXhwZWN0YXRpb24gaXMgdGhhdCB0aGlzIGNvdWxkIGhhdmUgbWFueSBmYWxzZSBwb3NpdGl2ZXMgKHRoaW5rcyB3ZSBhcmUgb25saW5lXG4gKiB3aGVuIHdlJ3JlIG5vdCksIGJ1dCBubyBmYWxzZSBuZWdhdGl2ZXMuICBTbyB3ZSBjYW4gc2FmZWx5IHVzZSBpdCB0byBkZXRlcm1pbmUgd2hlblxuICogd2UgZGVmaW5pdGVseSBjYW5ub3QgcmVhY2ggdGhlIGludGVybmV0LlxuICovXG5jbGFzcyBPbmxpbmVNb25pdG9yIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgICBzdGF0aWMgZ2V0SW5zdGFuY2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgT25saW5lTW9uaXRvcigpO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoWydvbmxpbmUnXSk7XG4gICAgICAgIHRoaXMub25saW5lXyA9IHRydWU7XG4gICAgICAgIC8vIFdlJ3ZlIGhhZCByZXBlYXRlZCBjb21wbGFpbnRzIHRoYXQgQ29yZG92YSBhcHBzIGNhbiBnZXQgc3R1Y2sgXCJvZmZsaW5lXCIsIGUuZy5cbiAgICAgICAgLy8gaHR0cHM6Ly9mb3J1bS5pb25pY2ZyYW1ld29yay5jb20vdC9maXJlYmFzZS1jb25uZWN0aW9uLWlzLWxvc3QtYW5kLW5ldmVyLWNvbWUtYmFjay80MzgxMFxuICAgICAgICAvLyBJdCB3b3VsZCBzZWVtIHRoYXQgdGhlICdvbmxpbmUnIGV2ZW50IGRvZXMgbm90IGFsd2F5cyBmaXJlIGNvbnNpc3RlbnRseS4gU28gd2UgZGlzYWJsZSBpdFxuICAgICAgICAvLyBmb3IgQ29yZG92YS5cbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgICB0eXBlb2Ygd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgICAhaXNNb2JpbGVDb3Jkb3ZhKCkpIHtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvbmxpbmUnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLm9ubGluZV8pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbmxpbmVfID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdvbmxpbmUnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb2ZmbGluZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vbmxpbmVfKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25saW5lXyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ29ubGluZScsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0SW5pdGlhbEV2ZW50KGV2ZW50VHlwZSkge1xuICAgICAgICBhc3NlcnQoZXZlbnRUeXBlID09PSAnb25saW5lJywgJ1Vua25vd24gZXZlbnQgdHlwZTogJyArIGV2ZW50VHlwZSk7XG4gICAgICAgIHJldHVybiBbdGhpcy5vbmxpbmVfXTtcbiAgICB9XG4gICAgY3VycmVudGx5T25saW5lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vbmxpbmVfO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBNYXhpbXVtIGtleSBkZXB0aC4gKi9cbmNvbnN0IE1BWF9QQVRIX0RFUFRIID0gMzI7XG4vKiogTWF4aW11bSBudW1iZXIgb2YgKFVURjgpIGJ5dGVzIGluIGEgRmlyZWJhc2UgcGF0aC4gKi9cbmNvbnN0IE1BWF9QQVRIX0xFTkdUSF9CWVRFUyA9IDc2ODtcbi8qKlxuICogQW4gaW1tdXRhYmxlIG9iamVjdCByZXByZXNlbnRpbmcgYSBwYXJzZWQgcGF0aC4gIEl0J3MgaW1tdXRhYmxlIHNvIHRoYXQgeW91XG4gKiBjYW4gcGFzcyB0aGVtIGFyb3VuZCB0byBvdGhlciBmdW5jdGlvbnMgd2l0aG91dCB3b3JyeWluZyBhYm91dCB0aGVtIGNoYW5naW5nXG4gKiBpdC5cbiAqL1xuY2xhc3MgUGF0aCB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHBhdGhPclN0cmluZyAtIFBhdGggc3RyaW5nIHRvIHBhcnNlLCBvciBhbm90aGVyIHBhdGgsIG9yIHRoZSByYXdcbiAgICAgKiB0b2tlbnMgYXJyYXlcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihwYXRoT3JTdHJpbmcsIHBpZWNlTnVtKSB7XG4gICAgICAgIGlmIChwaWVjZU51bSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICB0aGlzLnBpZWNlc18gPSBwYXRoT3JTdHJpbmcuc3BsaXQoJy8nKTtcbiAgICAgICAgICAgIC8vIFJlbW92ZSBlbXB0eSBwaWVjZXMuXG4gICAgICAgICAgICBsZXQgY29weVRvID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5waWVjZXNfLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGllY2VzX1tpXS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGllY2VzX1tjb3B5VG9dID0gdGhpcy5waWVjZXNfW2ldO1xuICAgICAgICAgICAgICAgICAgICBjb3B5VG8rKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBpZWNlc18ubGVuZ3RoID0gY29weVRvO1xuICAgICAgICAgICAgdGhpcy5waWVjZU51bV8gPSAwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5waWVjZXNfID0gcGF0aE9yU3RyaW5nO1xuICAgICAgICAgICAgdGhpcy5waWVjZU51bV8gPSBwaWVjZU51bTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgbGV0IHBhdGhTdHJpbmcgPSAnJztcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMucGllY2VOdW1fOyBpIDwgdGhpcy5waWVjZXNfLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5waWVjZXNfW2ldICE9PSAnJykge1xuICAgICAgICAgICAgICAgIHBhdGhTdHJpbmcgKz0gJy8nICsgdGhpcy5waWVjZXNfW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXRoU3RyaW5nIHx8ICcvJztcbiAgICB9XG59XG5mdW5jdGlvbiBuZXdFbXB0eVBhdGgoKSB7XG4gICAgcmV0dXJuIG5ldyBQYXRoKCcnKTtcbn1cbmZ1bmN0aW9uIHBhdGhHZXRGcm9udChwYXRoKSB7XG4gICAgaWYgKHBhdGgucGllY2VOdW1fID49IHBhdGgucGllY2VzXy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBwYXRoLnBpZWNlc19bcGF0aC5waWVjZU51bV9dO1xufVxuLyoqXG4gKiBAcmV0dXJucyBUaGUgbnVtYmVyIG9mIHNlZ21lbnRzIGluIHRoaXMgcGF0aFxuICovXG5mdW5jdGlvbiBwYXRoR2V0TGVuZ3RoKHBhdGgpIHtcbiAgICByZXR1cm4gcGF0aC5waWVjZXNfLmxlbmd0aCAtIHBhdGgucGllY2VOdW1fO1xufVxuZnVuY3Rpb24gcGF0aFBvcEZyb250KHBhdGgpIHtcbiAgICBsZXQgcGllY2VOdW0gPSBwYXRoLnBpZWNlTnVtXztcbiAgICBpZiAocGllY2VOdW0gPCBwYXRoLnBpZWNlc18ubGVuZ3RoKSB7XG4gICAgICAgIHBpZWNlTnVtKys7XG4gICAgfVxuICAgIHJldHVybiBuZXcgUGF0aChwYXRoLnBpZWNlc18sIHBpZWNlTnVtKTtcbn1cbmZ1bmN0aW9uIHBhdGhHZXRCYWNrKHBhdGgpIHtcbiAgICBpZiAocGF0aC5waWVjZU51bV8gPCBwYXRoLnBpZWNlc18ubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBwYXRoLnBpZWNlc19bcGF0aC5waWVjZXNfLmxlbmd0aCAtIDFdO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIHBhdGhUb1VybEVuY29kZWRTdHJpbmcocGF0aCkge1xuICAgIGxldCBwYXRoU3RyaW5nID0gJyc7XG4gICAgZm9yIChsZXQgaSA9IHBhdGgucGllY2VOdW1fOyBpIDwgcGF0aC5waWVjZXNfLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChwYXRoLnBpZWNlc19baV0gIT09ICcnKSB7XG4gICAgICAgICAgICBwYXRoU3RyaW5nICs9ICcvJyArIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocGF0aC5waWVjZXNfW2ldKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBhdGhTdHJpbmcgfHwgJy8nO1xufVxuLyoqXG4gKiBTaGFsbG93IGNvcHkgb2YgdGhlIHBhcnRzIG9mIHRoZSBwYXRoLlxuICpcbiAqL1xuZnVuY3Rpb24gcGF0aFNsaWNlKHBhdGgsIGJlZ2luID0gMCkge1xuICAgIHJldHVybiBwYXRoLnBpZWNlc18uc2xpY2UocGF0aC5waWVjZU51bV8gKyBiZWdpbik7XG59XG5mdW5jdGlvbiBwYXRoUGFyZW50KHBhdGgpIHtcbiAgICBpZiAocGF0aC5waWVjZU51bV8gPj0gcGF0aC5waWVjZXNfLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgcGllY2VzID0gW107XG4gICAgZm9yIChsZXQgaSA9IHBhdGgucGllY2VOdW1fOyBpIDwgcGF0aC5waWVjZXNfLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICBwaWVjZXMucHVzaChwYXRoLnBpZWNlc19baV0pO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFBhdGgocGllY2VzLCAwKTtcbn1cbmZ1bmN0aW9uIHBhdGhDaGlsZChwYXRoLCBjaGlsZFBhdGhPYmopIHtcbiAgICBjb25zdCBwaWVjZXMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gcGF0aC5waWVjZU51bV87IGkgPCBwYXRoLnBpZWNlc18ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcGllY2VzLnB1c2gocGF0aC5waWVjZXNfW2ldKTtcbiAgICB9XG4gICAgaWYgKGNoaWxkUGF0aE9iaiBpbnN0YW5jZW9mIFBhdGgpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IGNoaWxkUGF0aE9iai5waWVjZU51bV87IGkgPCBjaGlsZFBhdGhPYmoucGllY2VzXy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgcGllY2VzLnB1c2goY2hpbGRQYXRoT2JqLnBpZWNlc19baV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBjaGlsZFBpZWNlcyA9IGNoaWxkUGF0aE9iai5zcGxpdCgnLycpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkUGllY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoY2hpbGRQaWVjZXNbaV0ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHBpZWNlcy5wdXNoKGNoaWxkUGllY2VzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3IFBhdGgocGllY2VzLCAwKTtcbn1cbi8qKlxuICogQHJldHVybnMgVHJ1ZSBpZiB0aGVyZSBhcmUgbm8gc2VnbWVudHMgaW4gdGhpcyBwYXRoXG4gKi9cbmZ1bmN0aW9uIHBhdGhJc0VtcHR5KHBhdGgpIHtcbiAgICByZXR1cm4gcGF0aC5waWVjZU51bV8gPj0gcGF0aC5waWVjZXNfLmxlbmd0aDtcbn1cbi8qKlxuICogQHJldHVybnMgVGhlIHBhdGggZnJvbSBvdXRlclBhdGggdG8gaW5uZXJQYXRoXG4gKi9cbmZ1bmN0aW9uIG5ld1JlbGF0aXZlUGF0aChvdXRlclBhdGgsIGlubmVyUGF0aCkge1xuICAgIGNvbnN0IG91dGVyID0gcGF0aEdldEZyb250KG91dGVyUGF0aCksIGlubmVyID0gcGF0aEdldEZyb250KGlubmVyUGF0aCk7XG4gICAgaWYgKG91dGVyID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBpbm5lclBhdGg7XG4gICAgfVxuICAgIGVsc2UgaWYgKG91dGVyID09PSBpbm5lcikge1xuICAgICAgICByZXR1cm4gbmV3UmVsYXRpdmVQYXRoKHBhdGhQb3BGcm9udChvdXRlclBhdGgpLCBwYXRoUG9wRnJvbnQoaW5uZXJQYXRoKSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0lOVEVSTkFMIEVSUk9SOiBpbm5lclBhdGggKCcgK1xuICAgICAgICAgICAgaW5uZXJQYXRoICtcbiAgICAgICAgICAgICcpIGlzIG5vdCB3aXRoaW4gJyArXG4gICAgICAgICAgICAnb3V0ZXJQYXRoICgnICtcbiAgICAgICAgICAgIG91dGVyUGF0aCArXG4gICAgICAgICAgICAnKScpO1xuICAgIH1cbn1cbi8qKlxuICogQHJldHVybnMgLTEsIDAsIDEgaWYgbGVmdCBpcyBsZXNzLCBlcXVhbCwgb3IgZ3JlYXRlciB0aGFuIHRoZSByaWdodC5cbiAqL1xuZnVuY3Rpb24gcGF0aENvbXBhcmUobGVmdCwgcmlnaHQpIHtcbiAgICBjb25zdCBsZWZ0S2V5cyA9IHBhdGhTbGljZShsZWZ0LCAwKTtcbiAgICBjb25zdCByaWdodEtleXMgPSBwYXRoU2xpY2UocmlnaHQsIDApO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVmdEtleXMubGVuZ3RoICYmIGkgPCByaWdodEtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgY21wID0gbmFtZUNvbXBhcmUobGVmdEtleXNbaV0sIHJpZ2h0S2V5c1tpXSk7XG4gICAgICAgIGlmIChjbXAgIT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBjbXA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGxlZnRLZXlzLmxlbmd0aCA9PT0gcmlnaHRLZXlzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgcmV0dXJuIGxlZnRLZXlzLmxlbmd0aCA8IHJpZ2h0S2V5cy5sZW5ndGggPyAtMSA6IDE7XG59XG4vKipcbiAqIEByZXR1cm5zIHRydWUgaWYgcGF0aHMgYXJlIHRoZSBzYW1lLlxuICovXG5mdW5jdGlvbiBwYXRoRXF1YWxzKHBhdGgsIG90aGVyKSB7XG4gICAgaWYgKHBhdGhHZXRMZW5ndGgocGF0aCkgIT09IHBhdGhHZXRMZW5ndGgob3RoZXIpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IHBhdGgucGllY2VOdW1fLCBqID0gb3RoZXIucGllY2VOdW1fOyBpIDw9IHBhdGgucGllY2VzXy5sZW5ndGg7IGkrKywgaisrKSB7XG4gICAgICAgIGlmIChwYXRoLnBpZWNlc19baV0gIT09IG90aGVyLnBpZWNlc19bal0pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuICogQHJldHVybnMgVHJ1ZSBpZiB0aGlzIHBhdGggaXMgYSBwYXJlbnQgb2YgKG9yIHRoZSBzYW1lIGFzKSBvdGhlclxuICovXG5mdW5jdGlvbiBwYXRoQ29udGFpbnMocGF0aCwgb3RoZXIpIHtcbiAgICBsZXQgaSA9IHBhdGgucGllY2VOdW1fO1xuICAgIGxldCBqID0gb3RoZXIucGllY2VOdW1fO1xuICAgIGlmIChwYXRoR2V0TGVuZ3RoKHBhdGgpID4gcGF0aEdldExlbmd0aChvdGhlcikpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB3aGlsZSAoaSA8IHBhdGgucGllY2VzXy5sZW5ndGgpIHtcbiAgICAgICAgaWYgKHBhdGgucGllY2VzX1tpXSAhPT0gb3RoZXIucGllY2VzX1tqXSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgICsraTtcbiAgICAgICAgKytqO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuICogRHluYW1pYyAobXV0YWJsZSkgcGF0aCB1c2VkIHRvIGNvdW50IHBhdGggbGVuZ3Rocy5cbiAqXG4gKiBUaGlzIGNsYXNzIGlzIHVzZWQgdG8gZWZmaWNpZW50bHkgY2hlY2sgcGF0aHMgZm9yIHZhbGlkXG4gKiBsZW5ndGggKGluIFVURjggYnl0ZXMpIGFuZCBkZXB0aCAodXNlZCBpbiBwYXRoIHZhbGlkYXRpb24pLlxuICpcbiAqIFRocm93cyBFcnJvciBleGNlcHRpb24gaWYgcGF0aCBpcyBldmVyIGludmFsaWQuXG4gKlxuICogVGhlIGRlZmluaXRpb24gb2YgYSBwYXRoIGFsd2F5cyBiZWdpbnMgd2l0aCAnLycuXG4gKi9cbmNsYXNzIFZhbGlkYXRpb25QYXRoIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gcGF0aCAtIEluaXRpYWwgUGF0aC5cbiAgICAgKiBAcGFyYW0gZXJyb3JQcmVmaXhfIC0gUHJlZml4IGZvciBhbnkgZXJyb3IgbWVzc2FnZXMuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocGF0aCwgZXJyb3JQcmVmaXhfKSB7XG4gICAgICAgIHRoaXMuZXJyb3JQcmVmaXhfID0gZXJyb3JQcmVmaXhfO1xuICAgICAgICB0aGlzLnBhcnRzXyA9IHBhdGhTbGljZShwYXRoLCAwKTtcbiAgICAgICAgLyoqIEluaXRpYWxpemUgdG8gbnVtYmVyIG9mICcvJyBjaGFycyBuZWVkZWQgaW4gcGF0aC4gKi9cbiAgICAgICAgdGhpcy5ieXRlTGVuZ3RoXyA9IE1hdGgubWF4KDEsIHRoaXMucGFydHNfLmxlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5wYXJ0c18ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuYnl0ZUxlbmd0aF8gKz0gc3RyaW5nTGVuZ3RoKHRoaXMucGFydHNfW2ldKTtcbiAgICAgICAgfVxuICAgICAgICB2YWxpZGF0aW9uUGF0aENoZWNrVmFsaWQodGhpcyk7XG4gICAgfVxufVxuZnVuY3Rpb24gdmFsaWRhdGlvblBhdGhQdXNoKHZhbGlkYXRpb25QYXRoLCBjaGlsZCkge1xuICAgIC8vIENvdW50IHRoZSBuZWVkZWQgJy8nXG4gICAgaWYgKHZhbGlkYXRpb25QYXRoLnBhcnRzXy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHZhbGlkYXRpb25QYXRoLmJ5dGVMZW5ndGhfICs9IDE7XG4gICAgfVxuICAgIHZhbGlkYXRpb25QYXRoLnBhcnRzXy5wdXNoKGNoaWxkKTtcbiAgICB2YWxpZGF0aW9uUGF0aC5ieXRlTGVuZ3RoXyArPSBzdHJpbmdMZW5ndGgoY2hpbGQpO1xuICAgIHZhbGlkYXRpb25QYXRoQ2hlY2tWYWxpZCh2YWxpZGF0aW9uUGF0aCk7XG59XG5mdW5jdGlvbiB2YWxpZGF0aW9uUGF0aFBvcCh2YWxpZGF0aW9uUGF0aCkge1xuICAgIGNvbnN0IGxhc3QgPSB2YWxpZGF0aW9uUGF0aC5wYXJ0c18ucG9wKCk7XG4gICAgdmFsaWRhdGlvblBhdGguYnl0ZUxlbmd0aF8gLT0gc3RyaW5nTGVuZ3RoKGxhc3QpO1xuICAgIC8vIFVuLWNvdW50IHRoZSBwcmV2aW91cyAnLydcbiAgICBpZiAodmFsaWRhdGlvblBhdGgucGFydHNfLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdmFsaWRhdGlvblBhdGguYnl0ZUxlbmd0aF8gLT0gMTtcbiAgICB9XG59XG5mdW5jdGlvbiB2YWxpZGF0aW9uUGF0aENoZWNrVmFsaWQodmFsaWRhdGlvblBhdGgpIHtcbiAgICBpZiAodmFsaWRhdGlvblBhdGguYnl0ZUxlbmd0aF8gPiBNQVhfUEFUSF9MRU5HVEhfQllURVMpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHZhbGlkYXRpb25QYXRoLmVycm9yUHJlZml4XyArXG4gICAgICAgICAgICAnaGFzIGEga2V5IHBhdGggbG9uZ2VyIHRoYW4gJyArXG4gICAgICAgICAgICBNQVhfUEFUSF9MRU5HVEhfQllURVMgK1xuICAgICAgICAgICAgJyBieXRlcyAoJyArXG4gICAgICAgICAgICB2YWxpZGF0aW9uUGF0aC5ieXRlTGVuZ3RoXyArXG4gICAgICAgICAgICAnKS4nKTtcbiAgICB9XG4gICAgaWYgKHZhbGlkYXRpb25QYXRoLnBhcnRzXy5sZW5ndGggPiBNQVhfUEFUSF9ERVBUSCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IodmFsaWRhdGlvblBhdGguZXJyb3JQcmVmaXhfICtcbiAgICAgICAgICAgICdwYXRoIHNwZWNpZmllZCBleGNlZWRzIHRoZSBtYXhpbXVtIGRlcHRoIHRoYXQgY2FuIGJlIHdyaXR0ZW4gKCcgK1xuICAgICAgICAgICAgTUFYX1BBVEhfREVQVEggK1xuICAgICAgICAgICAgJykgb3Igb2JqZWN0IGNvbnRhaW5zIGEgY3ljbGUgJyArXG4gICAgICAgICAgICB2YWxpZGF0aW9uUGF0aFRvRXJyb3JTdHJpbmcodmFsaWRhdGlvblBhdGgpKTtcbiAgICB9XG59XG4vKipcbiAqIFN0cmluZyBmb3IgdXNlIGluIGVycm9yIG1lc3NhZ2VzIC0gdXNlcyAnLicgbm90YXRpb24gZm9yIHBhdGguXG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRpb25QYXRoVG9FcnJvclN0cmluZyh2YWxpZGF0aW9uUGF0aCkge1xuICAgIGlmICh2YWxpZGF0aW9uUGF0aC5wYXJ0c18ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgcmV0dXJuIFwiaW4gcHJvcGVydHkgJ1wiICsgdmFsaWRhdGlvblBhdGgucGFydHNfLmpvaW4oJy4nKSArIFwiJ1wiO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY2xhc3MgVmlzaWJpbGl0eU1vbml0b3IgZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICAgIHN0YXRpYyBnZXRJbnN0YW5jZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWaXNpYmlsaXR5TW9uaXRvcigpO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoWyd2aXNpYmxlJ10pO1xuICAgICAgICBsZXQgaGlkZGVuO1xuICAgICAgICBsZXQgdmlzaWJpbGl0eUNoYW5nZTtcbiAgICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICAgIHR5cGVvZiBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudFsnaGlkZGVuJ10gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgLy8gT3BlcmEgMTIuMTAgYW5kIEZpcmVmb3ggMTggYW5kIGxhdGVyIHN1cHBvcnRcbiAgICAgICAgICAgICAgICB2aXNpYmlsaXR5Q2hhbmdlID0gJ3Zpc2liaWxpdHljaGFuZ2UnO1xuICAgICAgICAgICAgICAgIGhpZGRlbiA9ICdoaWRkZW4nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGRvY3VtZW50Wydtb3pIaWRkZW4nXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB2aXNpYmlsaXR5Q2hhbmdlID0gJ21venZpc2liaWxpdHljaGFuZ2UnO1xuICAgICAgICAgICAgICAgIGhpZGRlbiA9ICdtb3pIaWRkZW4nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGRvY3VtZW50Wydtc0hpZGRlbiddICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHZpc2liaWxpdHlDaGFuZ2UgPSAnbXN2aXNpYmlsaXR5Y2hhbmdlJztcbiAgICAgICAgICAgICAgICBoaWRkZW4gPSAnbXNIaWRkZW4nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGRvY3VtZW50Wyd3ZWJraXRIaWRkZW4nXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB2aXNpYmlsaXR5Q2hhbmdlID0gJ3dlYmtpdHZpc2liaWxpdHljaGFuZ2UnO1xuICAgICAgICAgICAgICAgIGhpZGRlbiA9ICd3ZWJraXRIaWRkZW4nO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEluaXRpYWxseSwgd2UgYWx3YXlzIGFzc3VtZSB3ZSBhcmUgdmlzaWJsZS4gVGhpcyBlbnN1cmVzIHRoYXQgaW4gYnJvd3NlcnNcbiAgICAgICAgLy8gd2l0aG91dCBwYWdlIHZpc2liaWxpdHkgc3VwcG9ydCBvciBpbiBjYXNlcyB3aGVyZSB3ZSBhcmUgbmV2ZXIgdmlzaWJsZVxuICAgICAgICAvLyAoZS5nLiBjaHJvbWUgZXh0ZW5zaW9uKSwgd2UgYWN0IGFzIGlmIHdlIGFyZSB2aXNpYmxlLCBpLmUuIGRvbid0IGRlbGF5XG4gICAgICAgIC8vIHJlY29ubmVjdHNcbiAgICAgICAgdGhpcy52aXNpYmxlXyA9IHRydWU7XG4gICAgICAgIGlmICh2aXNpYmlsaXR5Q2hhbmdlKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKHZpc2liaWxpdHlDaGFuZ2UsICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB2aXNpYmxlID0gIWRvY3VtZW50W2hpZGRlbl07XG4gICAgICAgICAgICAgICAgaWYgKHZpc2libGUgIT09IHRoaXMudmlzaWJsZV8pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlXyA9IHZpc2libGU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcigndmlzaWJsZScsIHZpc2libGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRJbml0aWFsRXZlbnQoZXZlbnRUeXBlKSB7XG4gICAgICAgIGFzc2VydChldmVudFR5cGUgPT09ICd2aXNpYmxlJywgJ1Vua25vd24gZXZlbnQgdHlwZTogJyArIGV2ZW50VHlwZSk7XG4gICAgICAgIHJldHVybiBbdGhpcy52aXNpYmxlX107XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgUkVDT05ORUNUX01JTl9ERUxBWSA9IDEwMDA7XG5jb25zdCBSRUNPTk5FQ1RfTUFYX0RFTEFZX0RFRkFVTFQgPSA2MCAqIDUgKiAxMDAwOyAvLyA1IG1pbnV0ZXMgaW4gbWlsbGlzZWNvbmRzIChDYXNlOiAxODU4KVxuY29uc3QgUkVDT05ORUNUX01BWF9ERUxBWV9GT1JfQURNSU5TID0gMzAgKiAxMDAwOyAvLyAzMCBzZWNvbmRzIGZvciBhZG1pbiBjbGllbnRzIChsaWtlbHkgdG8gYmUgYSBiYWNrZW5kIHNlcnZlcilcbmNvbnN0IFJFQ09OTkVDVF9ERUxBWV9NVUxUSVBMSUVSID0gMS4zO1xuY29uc3QgUkVDT05ORUNUX0RFTEFZX1JFU0VUX1RJTUVPVVQgPSAzMDAwMDsgLy8gUmVzZXQgZGVsYXkgYmFjayB0byBNSU5fREVMQVkgYWZ0ZXIgYmVpbmcgY29ubmVjdGVkIGZvciAzMHNlYy5cbmNvbnN0IFNFUlZFUl9LSUxMX0lOVEVSUlVQVF9SRUFTT04gPSAnc2VydmVyX2tpbGwnO1xuLy8gSWYgYXV0aCBmYWlscyByZXBlYXRlZGx5LCB3ZSdsbCBhc3N1bWUgc29tZXRoaW5nIGlzIHdyb25nIGFuZCBsb2cgYSB3YXJuaW5nIC8gYmFjayBvZmYuXG5jb25zdCBJTlZBTElEX1RPS0VOX1RIUkVTSE9MRCA9IDM7XG4vKipcbiAqIEZpcmViYXNlIGNvbm5lY3Rpb24uICBBYnN0cmFjdHMgd2lyZSBwcm90b2NvbCBhbmQgaGFuZGxlcyByZWNvbm5lY3RpbmcuXG4gKlxuICogTk9URTogQWxsIEpTT04gb2JqZWN0cyBzZW50IHRvIHRoZSByZWFsdGltZSBjb25uZWN0aW9uIG11c3QgaGF2ZSBwcm9wZXJ0eSBuYW1lcyBlbmNsb3NlZFxuICogaW4gcXVvdGVzIHRvIG1ha2Ugc3VyZSB0aGUgY2xvc3VyZSBjb21waWxlciBkb2VzIG5vdCBtaW5pZnkgdGhlbS5cbiAqL1xuY2xhc3MgUGVyc2lzdGVudENvbm5lY3Rpb24gZXh0ZW5kcyBTZXJ2ZXJBY3Rpb25zIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gcmVwb0luZm9fIC0gRGF0YSBhYm91dCB0aGUgbmFtZXNwYWNlIHdlIGFyZSBjb25uZWN0aW5nIHRvXG4gICAgICogQHBhcmFtIGFwcGxpY2F0aW9uSWRfIC0gVGhlIEZpcmViYXNlIEFwcCBJRCBmb3IgdGhpcyBwcm9qZWN0XG4gICAgICogQHBhcmFtIG9uRGF0YVVwZGF0ZV8gLSBBIGNhbGxiYWNrIGZvciBuZXcgZGF0YSBmcm9tIHRoZSBzZXJ2ZXJcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihyZXBvSW5mb18sIGFwcGxpY2F0aW9uSWRfLCBvbkRhdGFVcGRhdGVfLCBvbkNvbm5lY3RTdGF0dXNfLCBvblNlcnZlckluZm9VcGRhdGVfLCBhdXRoVG9rZW5Qcm92aWRlcl8sIGFwcENoZWNrVG9rZW5Qcm92aWRlcl8sIGF1dGhPdmVycmlkZV8pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5yZXBvSW5mb18gPSByZXBvSW5mb187XG4gICAgICAgIHRoaXMuYXBwbGljYXRpb25JZF8gPSBhcHBsaWNhdGlvbklkXztcbiAgICAgICAgdGhpcy5vbkRhdGFVcGRhdGVfID0gb25EYXRhVXBkYXRlXztcbiAgICAgICAgdGhpcy5vbkNvbm5lY3RTdGF0dXNfID0gb25Db25uZWN0U3RhdHVzXztcbiAgICAgICAgdGhpcy5vblNlcnZlckluZm9VcGRhdGVfID0gb25TZXJ2ZXJJbmZvVXBkYXRlXztcbiAgICAgICAgdGhpcy5hdXRoVG9rZW5Qcm92aWRlcl8gPSBhdXRoVG9rZW5Qcm92aWRlcl87XG4gICAgICAgIHRoaXMuYXBwQ2hlY2tUb2tlblByb3ZpZGVyXyA9IGFwcENoZWNrVG9rZW5Qcm92aWRlcl87XG4gICAgICAgIHRoaXMuYXV0aE92ZXJyaWRlXyA9IGF1dGhPdmVycmlkZV87XG4gICAgICAgIC8vIFVzZWQgZm9yIGRpYWdub3N0aWMgbG9nZ2luZy5cbiAgICAgICAgdGhpcy5pZCA9IFBlcnNpc3RlbnRDb25uZWN0aW9uLm5leHRQZXJzaXN0ZW50Q29ubmVjdGlvbklkXysrO1xuICAgICAgICB0aGlzLmxvZ18gPSBsb2dXcmFwcGVyKCdwOicgKyB0aGlzLmlkICsgJzonKTtcbiAgICAgICAgdGhpcy5pbnRlcnJ1cHRSZWFzb25zXyA9IHt9O1xuICAgICAgICB0aGlzLmxpc3RlbnMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMub3V0c3RhbmRpbmdQdXRzXyA9IFtdO1xuICAgICAgICB0aGlzLm91dHN0YW5kaW5nR2V0c18gPSBbXTtcbiAgICAgICAgdGhpcy5vdXRzdGFuZGluZ1B1dENvdW50XyA9IDA7XG4gICAgICAgIHRoaXMub3V0c3RhbmRpbmdHZXRDb3VudF8gPSAwO1xuICAgICAgICB0aGlzLm9uRGlzY29ubmVjdFJlcXVlc3RRdWV1ZV8gPSBbXTtcbiAgICAgICAgdGhpcy5jb25uZWN0ZWRfID0gZmFsc2U7XG4gICAgICAgIHRoaXMucmVjb25uZWN0RGVsYXlfID0gUkVDT05ORUNUX01JTl9ERUxBWTtcbiAgICAgICAgdGhpcy5tYXhSZWNvbm5lY3REZWxheV8gPSBSRUNPTk5FQ1RfTUFYX0RFTEFZX0RFRkFVTFQ7XG4gICAgICAgIHRoaXMuc2VjdXJpdHlEZWJ1Z0NhbGxiYWNrXyA9IG51bGw7XG4gICAgICAgIHRoaXMubGFzdFNlc3Npb25JZCA9IG51bGw7XG4gICAgICAgIHRoaXMuZXN0YWJsaXNoQ29ubmVjdGlvblRpbWVyXyA9IG51bGw7XG4gICAgICAgIHRoaXMudmlzaWJsZV8gPSBmYWxzZTtcbiAgICAgICAgLy8gQmVmb3JlIHdlIGdldCBjb25uZWN0ZWQsIHdlIGtlZXAgYSBxdWV1ZSBvZiBwZW5kaW5nIG1lc3NhZ2VzIHRvIHNlbmQuXG4gICAgICAgIHRoaXMucmVxdWVzdENCSGFzaF8gPSB7fTtcbiAgICAgICAgdGhpcy5yZXF1ZXN0TnVtYmVyXyA9IDA7XG4gICAgICAgIHRoaXMucmVhbHRpbWVfID0gbnVsbDtcbiAgICAgICAgdGhpcy5hdXRoVG9rZW5fID0gbnVsbDtcbiAgICAgICAgdGhpcy5hcHBDaGVja1Rva2VuXyA9IG51bGw7XG4gICAgICAgIHRoaXMuZm9yY2VUb2tlblJlZnJlc2hfID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaW52YWxpZEF1dGhUb2tlbkNvdW50XyA9IDA7XG4gICAgICAgIHRoaXMuaW52YWxpZEFwcENoZWNrVG9rZW5Db3VudF8gPSAwO1xuICAgICAgICB0aGlzLmZpcnN0Q29ubmVjdGlvbl8gPSB0cnVlO1xuICAgICAgICB0aGlzLmxhc3RDb25uZWN0aW9uQXR0ZW1wdFRpbWVfID0gbnVsbDtcbiAgICAgICAgdGhpcy5sYXN0Q29ubmVjdGlvbkVzdGFibGlzaGVkVGltZV8gPSBudWxsO1xuICAgICAgICBpZiAoYXV0aE92ZXJyaWRlXyAmJiAhaXNOb2RlU2RrKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQXV0aCBvdmVycmlkZSBzcGVjaWZpZWQgaW4gb3B0aW9ucywgYnV0IG5vdCBzdXBwb3J0ZWQgb24gbm9uIE5vZGUuanMgcGxhdGZvcm1zJyk7XG4gICAgICAgIH1cbiAgICAgICAgVmlzaWJpbGl0eU1vbml0b3IuZ2V0SW5zdGFuY2UoKS5vbigndmlzaWJsZScsIHRoaXMub25WaXNpYmxlXywgdGhpcyk7XG4gICAgICAgIGlmIChyZXBvSW5mb18uaG9zdC5pbmRleE9mKCdmYmxvY2FsJykgPT09IC0xKSB7XG4gICAgICAgICAgICBPbmxpbmVNb25pdG9yLmdldEluc3RhbmNlKCkub24oJ29ubGluZScsIHRoaXMub25PbmxpbmVfLCB0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZW5kUmVxdWVzdChhY3Rpb24sIGJvZHksIG9uUmVzcG9uc2UpIHtcbiAgICAgICAgY29uc3QgY3VyUmVxTnVtID0gKyt0aGlzLnJlcXVlc3ROdW1iZXJfO1xuICAgICAgICBjb25zdCBtc2cgPSB7IHI6IGN1clJlcU51bSwgYTogYWN0aW9uLCBiOiBib2R5IH07XG4gICAgICAgIHRoaXMubG9nXyhzdHJpbmdpZnkobXNnKSk7XG4gICAgICAgIGFzc2VydCh0aGlzLmNvbm5lY3RlZF8sIFwic2VuZFJlcXVlc3QgY2FsbCB3aGVuIHdlJ3JlIG5vdCBjb25uZWN0ZWQgbm90IGFsbG93ZWQuXCIpO1xuICAgICAgICB0aGlzLnJlYWx0aW1lXy5zZW5kUmVxdWVzdChtc2cpO1xuICAgICAgICBpZiAob25SZXNwb25zZSkge1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0Q0JIYXNoX1tjdXJSZXFOdW1dID0gb25SZXNwb25zZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQocXVlcnkpIHtcbiAgICAgICAgdGhpcy5pbml0Q29ubmVjdGlvbl8oKTtcbiAgICAgICAgY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHtcbiAgICAgICAgICAgIHA6IHF1ZXJ5Ll9wYXRoLnRvU3RyaW5nKCksXG4gICAgICAgICAgICBxOiBxdWVyeS5fcXVlcnlPYmplY3RcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgb3V0c3RhbmRpbmdHZXQgPSB7XG4gICAgICAgICAgICBhY3Rpb246ICdnJyxcbiAgICAgICAgICAgIHJlcXVlc3QsXG4gICAgICAgICAgICBvbkNvbXBsZXRlOiAobWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSBtZXNzYWdlWydkJ107XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2VbJ3MnXSA9PT0gJ29rJykge1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHBheWxvYWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KHBheWxvYWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vdXRzdGFuZGluZ0dldHNfLnB1c2gob3V0c3RhbmRpbmdHZXQpO1xuICAgICAgICB0aGlzLm91dHN0YW5kaW5nR2V0Q291bnRfKys7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5vdXRzdGFuZGluZ0dldHNfLmxlbmd0aCAtIDE7XG4gICAgICAgIGlmICh0aGlzLmNvbm5lY3RlZF8pIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZEdldF8oaW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH1cbiAgICBsaXN0ZW4ocXVlcnksIGN1cnJlbnRIYXNoRm4sIHRhZywgb25Db21wbGV0ZSkge1xuICAgICAgICB0aGlzLmluaXRDb25uZWN0aW9uXygpO1xuICAgICAgICBjb25zdCBxdWVyeUlkID0gcXVlcnkuX3F1ZXJ5SWRlbnRpZmllcjtcbiAgICAgICAgY29uc3QgcGF0aFN0cmluZyA9IHF1ZXJ5Ll9wYXRoLnRvU3RyaW5nKCk7XG4gICAgICAgIHRoaXMubG9nXygnTGlzdGVuIGNhbGxlZCBmb3IgJyArIHBhdGhTdHJpbmcgKyAnICcgKyBxdWVyeUlkKTtcbiAgICAgICAgaWYgKCF0aGlzLmxpc3RlbnMuaGFzKHBhdGhTdHJpbmcpKSB7XG4gICAgICAgICAgICB0aGlzLmxpc3RlbnMuc2V0KHBhdGhTdHJpbmcsIG5ldyBNYXAoKSk7XG4gICAgICAgIH1cbiAgICAgICAgYXNzZXJ0KHF1ZXJ5Ll9xdWVyeVBhcmFtcy5pc0RlZmF1bHQoKSB8fCAhcXVlcnkuX3F1ZXJ5UGFyYW1zLmxvYWRzQWxsRGF0YSgpLCAnbGlzdGVuKCkgY2FsbGVkIGZvciBub24tZGVmYXVsdCBidXQgY29tcGxldGUgcXVlcnknKTtcbiAgICAgICAgYXNzZXJ0KCF0aGlzLmxpc3RlbnMuZ2V0KHBhdGhTdHJpbmcpLmhhcyhxdWVyeUlkKSwgYGxpc3RlbigpIGNhbGxlZCB0d2ljZSBmb3Igc2FtZSBwYXRoL3F1ZXJ5SWQuYCk7XG4gICAgICAgIGNvbnN0IGxpc3RlblNwZWMgPSB7XG4gICAgICAgICAgICBvbkNvbXBsZXRlLFxuICAgICAgICAgICAgaGFzaEZuOiBjdXJyZW50SGFzaEZuLFxuICAgICAgICAgICAgcXVlcnksXG4gICAgICAgICAgICB0YWdcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5saXN0ZW5zLmdldChwYXRoU3RyaW5nKS5zZXQocXVlcnlJZCwgbGlzdGVuU3BlYyk7XG4gICAgICAgIGlmICh0aGlzLmNvbm5lY3RlZF8pIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZExpc3Rlbl8obGlzdGVuU3BlYyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2VuZEdldF8oaW5kZXgpIHtcbiAgICAgICAgY29uc3QgZ2V0ID0gdGhpcy5vdXRzdGFuZGluZ0dldHNfW2luZGV4XTtcbiAgICAgICAgdGhpcy5zZW5kUmVxdWVzdCgnZycsIGdldC5yZXF1ZXN0LCAobWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMub3V0c3RhbmRpbmdHZXRzX1tpbmRleF07XG4gICAgICAgICAgICB0aGlzLm91dHN0YW5kaW5nR2V0Q291bnRfLS07XG4gICAgICAgICAgICBpZiAodGhpcy5vdXRzdGFuZGluZ0dldENvdW50XyA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMub3V0c3RhbmRpbmdHZXRzXyA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdldC5vbkNvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgZ2V0Lm9uQ29tcGxldGUobWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzZW5kTGlzdGVuXyhsaXN0ZW5TcGVjKSB7XG4gICAgICAgIGNvbnN0IHF1ZXJ5ID0gbGlzdGVuU3BlYy5xdWVyeTtcbiAgICAgICAgY29uc3QgcGF0aFN0cmluZyA9IHF1ZXJ5Ll9wYXRoLnRvU3RyaW5nKCk7XG4gICAgICAgIGNvbnN0IHF1ZXJ5SWQgPSBxdWVyeS5fcXVlcnlJZGVudGlmaWVyO1xuICAgICAgICB0aGlzLmxvZ18oJ0xpc3RlbiBvbiAnICsgcGF0aFN0cmluZyArICcgZm9yICcgKyBxdWVyeUlkKTtcbiAgICAgICAgY29uc3QgcmVxID0geyAvKnBhdGgqLyBwOiBwYXRoU3RyaW5nIH07XG4gICAgICAgIGNvbnN0IGFjdGlvbiA9ICdxJztcbiAgICAgICAgLy8gT25seSBib3RoZXIgdG8gc2VuZCBxdWVyeSBpZiBpdCdzIG5vbi1kZWZhdWx0LlxuICAgICAgICBpZiAobGlzdGVuU3BlYy50YWcpIHtcbiAgICAgICAgICAgIHJlcVsncSddID0gcXVlcnkuX3F1ZXJ5T2JqZWN0O1xuICAgICAgICAgICAgcmVxWyd0J10gPSBsaXN0ZW5TcGVjLnRhZztcbiAgICAgICAgfVxuICAgICAgICByZXFbIC8qaGFzaCovJ2gnXSA9IGxpc3RlblNwZWMuaGFzaEZuKCk7XG4gICAgICAgIHRoaXMuc2VuZFJlcXVlc3QoYWN0aW9uLCByZXEsIChtZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwYXlsb2FkID0gbWVzc2FnZVsgLypkYXRhKi8nZCddO1xuICAgICAgICAgICAgY29uc3Qgc3RhdHVzID0gbWVzc2FnZVsgLypzdGF0dXMqLydzJ107XG4gICAgICAgICAgICAvLyBwcmludCB3YXJuaW5ncyBpbiBhbnkgY2FzZS4uLlxuICAgICAgICAgICAgUGVyc2lzdGVudENvbm5lY3Rpb24ud2Fybk9uTGlzdGVuV2FybmluZ3NfKHBheWxvYWQsIHF1ZXJ5KTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRMaXN0ZW5TcGVjID0gdGhpcy5saXN0ZW5zLmdldChwYXRoU3RyaW5nKSAmJlxuICAgICAgICAgICAgICAgIHRoaXMubGlzdGVucy5nZXQocGF0aFN0cmluZykuZ2V0KHF1ZXJ5SWQpO1xuICAgICAgICAgICAgLy8gb25seSB0cmlnZ2VyIGFjdGlvbnMgaWYgdGhlIGxpc3RlbiBoYXNuJ3QgYmVlbiByZW1vdmVkIGFuZCByZWFkZGVkXG4gICAgICAgICAgICBpZiAoY3VycmVudExpc3RlblNwZWMgPT09IGxpc3RlblNwZWMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ18oJ2xpc3RlbiByZXNwb25zZScsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIGlmIChzdGF0dXMgIT09ICdvaycpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5fKHBhdGhTdHJpbmcsIHF1ZXJ5SWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobGlzdGVuU3BlYy5vbkNvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpc3RlblNwZWMub25Db21wbGV0ZShzdGF0dXMsIHBheWxvYWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyB3YXJuT25MaXN0ZW5XYXJuaW5nc18ocGF5bG9hZCwgcXVlcnkpIHtcbiAgICAgICAgaWYgKHBheWxvYWQgJiYgdHlwZW9mIHBheWxvYWQgPT09ICdvYmplY3QnICYmIGNvbnRhaW5zKHBheWxvYWQsICd3JykpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICBjb25zdCB3YXJuaW5ncyA9IHNhZmVHZXQocGF5bG9hZCwgJ3cnKTtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHdhcm5pbmdzKSAmJiB+d2FybmluZ3MuaW5kZXhPZignbm9faW5kZXgnKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4U3BlYyA9ICdcIi5pbmRleE9uXCI6IFwiJyArIHF1ZXJ5Ll9xdWVyeVBhcmFtcy5nZXRJbmRleCgpLnRvU3RyaW5nKCkgKyAnXCInO1xuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4UGF0aCA9IHF1ZXJ5Ll9wYXRoLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgd2FybihgVXNpbmcgYW4gdW5zcGVjaWZpZWQgaW5kZXguIFlvdXIgZGF0YSB3aWxsIGJlIGRvd25sb2FkZWQgYW5kIGAgK1xuICAgICAgICAgICAgICAgICAgICBgZmlsdGVyZWQgb24gdGhlIGNsaWVudC4gQ29uc2lkZXIgYWRkaW5nICR7aW5kZXhTcGVjfSBhdCBgICtcbiAgICAgICAgICAgICAgICAgICAgYCR7aW5kZXhQYXRofSB0byB5b3VyIHNlY3VyaXR5IHJ1bGVzIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2UuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVmcmVzaEF1dGhUb2tlbih0b2tlbikge1xuICAgICAgICB0aGlzLmF1dGhUb2tlbl8gPSB0b2tlbjtcbiAgICAgICAgdGhpcy5sb2dfKCdBdXRoIHRva2VuIHJlZnJlc2hlZCcpO1xuICAgICAgICBpZiAodGhpcy5hdXRoVG9rZW5fKSB7XG4gICAgICAgICAgICB0aGlzLnRyeUF1dGgoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vSWYgd2UncmUgY29ubmVjdGVkIHdlIHdhbnQgdG8gbGV0IHRoZSBzZXJ2ZXIga25vdyB0byB1bmF1dGhlbnRpY2F0ZSB1cy4gSWYgd2UncmUgbm90IGNvbm5lY3RlZCwgc2ltcGx5IGRlbGV0ZVxuICAgICAgICAgICAgLy90aGUgY3JlZGVudGlhbCBzbyB3ZSBkb250IGJlY29tZSBhdXRoZW50aWNhdGVkIG5leHQgdGltZSB3ZSBjb25uZWN0LlxuICAgICAgICAgICAgaWYgKHRoaXMuY29ubmVjdGVkXykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VuZFJlcXVlc3QoJ3VuYXV0aCcsIHt9LCAoKSA9PiB7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVkdWNlUmVjb25uZWN0RGVsYXlJZkFkbWluQ3JlZGVudGlhbF8odG9rZW4pO1xuICAgIH1cbiAgICByZWR1Y2VSZWNvbm5lY3REZWxheUlmQWRtaW5DcmVkZW50aWFsXyhjcmVkZW50aWFsKSB7XG4gICAgICAgIC8vIE5PVEU6IFRoaXMgaXNuJ3QgaW50ZW5kZWQgdG8gYmUgYnVsbGV0cHJvb2YgKGEgbWFsaWNpb3VzIGRldmVsb3BlciBjYW4gYWx3YXlzIGp1c3QgbW9kaWZ5IHRoZSBjbGllbnQpLlxuICAgICAgICAvLyBBZGRpdGlvbmFsbHksIHdlIGRvbid0IGJvdGhlciByZXNldHRpbmcgdGhlIG1heCBkZWxheSBiYWNrIHRvIHRoZSBkZWZhdWx0IGlmIGF1dGggZmFpbHMgLyBleHBpcmVzLlxuICAgICAgICBjb25zdCBpc0ZpcmViYXNlU2VjcmV0ID0gY3JlZGVudGlhbCAmJiBjcmVkZW50aWFsLmxlbmd0aCA9PT0gNDA7XG4gICAgICAgIGlmIChpc0ZpcmViYXNlU2VjcmV0IHx8IGlzQWRtaW4oY3JlZGVudGlhbCkpIHtcbiAgICAgICAgICAgIHRoaXMubG9nXygnQWRtaW4gYXV0aCBjcmVkZW50aWFsIGRldGVjdGVkLiAgUmVkdWNpbmcgbWF4IHJlY29ubmVjdCB0aW1lLicpO1xuICAgICAgICAgICAgdGhpcy5tYXhSZWNvbm5lY3REZWxheV8gPSBSRUNPTk5FQ1RfTUFYX0RFTEFZX0ZPUl9BRE1JTlM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVmcmVzaEFwcENoZWNrVG9rZW4odG9rZW4pIHtcbiAgICAgICAgdGhpcy5hcHBDaGVja1Rva2VuXyA9IHRva2VuO1xuICAgICAgICB0aGlzLmxvZ18oJ0FwcCBjaGVjayB0b2tlbiByZWZyZXNoZWQnKTtcbiAgICAgICAgaWYgKHRoaXMuYXBwQ2hlY2tUb2tlbl8pIHtcbiAgICAgICAgICAgIHRoaXMudHJ5QXBwQ2hlY2soKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vSWYgd2UncmUgY29ubmVjdGVkIHdlIHdhbnQgdG8gbGV0IHRoZSBzZXJ2ZXIga25vdyB0byB1bmF1dGhlbnRpY2F0ZSB1cy5cbiAgICAgICAgICAgIC8vSWYgd2UncmUgbm90IGNvbm5lY3RlZCwgc2ltcGx5IGRlbGV0ZSB0aGUgY3JlZGVudGlhbCBzbyB3ZSBkb250IGJlY29tZVxuICAgICAgICAgICAgLy8gYXV0aGVudGljYXRlZCBuZXh0IHRpbWUgd2UgY29ubmVjdC5cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbm5lY3RlZF8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbmRSZXF1ZXN0KCd1bmFwcGVjaycsIHt9LCAoKSA9PiB7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEF0dGVtcHRzIHRvIGF1dGhlbnRpY2F0ZSB3aXRoIHRoZSBnaXZlbiBjcmVkZW50aWFscy4gSWYgdGhlIGF1dGhlbnRpY2F0aW9uIGF0dGVtcHQgZmFpbHMsIGl0J3MgdHJpZ2dlcmVkIGxpa2VcbiAgICAgKiBhIGF1dGggcmV2b2tlZCAodGhlIGNvbm5lY3Rpb24gaXMgY2xvc2VkKS5cbiAgICAgKi9cbiAgICB0cnlBdXRoKCkge1xuICAgICAgICBpZiAodGhpcy5jb25uZWN0ZWRfICYmIHRoaXMuYXV0aFRva2VuXykge1xuICAgICAgICAgICAgY29uc3QgdG9rZW4gPSB0aGlzLmF1dGhUb2tlbl87XG4gICAgICAgICAgICBjb25zdCBhdXRoTWV0aG9kID0gaXNWYWxpZEZvcm1hdCh0b2tlbikgPyAnYXV0aCcgOiAnZ2F1dGgnO1xuICAgICAgICAgICAgY29uc3QgcmVxdWVzdERhdGEgPSB7IGNyZWQ6IHRva2VuIH07XG4gICAgICAgICAgICBpZiAodGhpcy5hdXRoT3ZlcnJpZGVfID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmVxdWVzdERhdGFbJ25vYXV0aCddID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiB0aGlzLmF1dGhPdmVycmlkZV8gPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgcmVxdWVzdERhdGFbJ2F1dGh2YXInXSA9IHRoaXMuYXV0aE92ZXJyaWRlXztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2VuZFJlcXVlc3QoYXV0aE1ldGhvZCwgcmVxdWVzdERhdGEsIChyZXMpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGF0dXMgPSByZXNbIC8qc3RhdHVzKi8ncyddO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSByZXNbIC8qZGF0YSovJ2QnXSB8fCAnZXJyb3InO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmF1dGhUb2tlbl8gPT09IHRva2VuKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMgPT09ICdvaycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW52YWxpZEF1dGhUb2tlbkNvdW50XyA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUcmlnZ2VycyByZWNvbm5lY3QgYW5kIGZvcmNlIHJlZnJlc2ggZm9yIGF1dGggdG9rZW5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25BdXRoUmV2b2tlZF8oc3RhdHVzLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEF0dGVtcHRzIHRvIGF1dGhlbnRpY2F0ZSB3aXRoIHRoZSBnaXZlbiB0b2tlbi4gSWYgdGhlIGF1dGhlbnRpY2F0aW9uXG4gICAgICogYXR0ZW1wdCBmYWlscywgaXQncyB0cmlnZ2VyZWQgbGlrZSB0aGUgdG9rZW4gd2FzIHJldm9rZWQgKHRoZSBjb25uZWN0aW9uIGlzXG4gICAgICogY2xvc2VkKS5cbiAgICAgKi9cbiAgICB0cnlBcHBDaGVjaygpIHtcbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdGVkXyAmJiB0aGlzLmFwcENoZWNrVG9rZW5fKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRSZXF1ZXN0KCdhcHBjaGVjaycsIHsgJ3Rva2VuJzogdGhpcy5hcHBDaGVja1Rva2VuXyB9LCAocmVzKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhdHVzID0gcmVzWyAvKnN0YXR1cyovJ3MnXTtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gcmVzWyAvKmRhdGEqLydkJ10gfHwgJ2Vycm9yJztcbiAgICAgICAgICAgICAgICBpZiAoc3RhdHVzID09PSAnb2snKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW52YWxpZEFwcENoZWNrVG9rZW5Db3VudF8gPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkFwcENoZWNrUmV2b2tlZF8oc3RhdHVzLCBkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW5oZXJpdERvY1xuICAgICAqL1xuICAgIHVubGlzdGVuKHF1ZXJ5LCB0YWcpIHtcbiAgICAgICAgY29uc3QgcGF0aFN0cmluZyA9IHF1ZXJ5Ll9wYXRoLnRvU3RyaW5nKCk7XG4gICAgICAgIGNvbnN0IHF1ZXJ5SWQgPSBxdWVyeS5fcXVlcnlJZGVudGlmaWVyO1xuICAgICAgICB0aGlzLmxvZ18oJ1VubGlzdGVuIGNhbGxlZCBmb3IgJyArIHBhdGhTdHJpbmcgKyAnICcgKyBxdWVyeUlkKTtcbiAgICAgICAgYXNzZXJ0KHF1ZXJ5Ll9xdWVyeVBhcmFtcy5pc0RlZmF1bHQoKSB8fCAhcXVlcnkuX3F1ZXJ5UGFyYW1zLmxvYWRzQWxsRGF0YSgpLCAndW5saXN0ZW4oKSBjYWxsZWQgZm9yIG5vbi1kZWZhdWx0IGJ1dCBjb21wbGV0ZSBxdWVyeScpO1xuICAgICAgICBjb25zdCBsaXN0ZW4gPSB0aGlzLnJlbW92ZUxpc3Rlbl8ocGF0aFN0cmluZywgcXVlcnlJZCk7XG4gICAgICAgIGlmIChsaXN0ZW4gJiYgdGhpcy5jb25uZWN0ZWRfKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRVbmxpc3Rlbl8ocGF0aFN0cmluZywgcXVlcnlJZCwgcXVlcnkuX3F1ZXJ5T2JqZWN0LCB0YWcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNlbmRVbmxpc3Rlbl8ocGF0aFN0cmluZywgcXVlcnlJZCwgcXVlcnlPYmosIHRhZykge1xuICAgICAgICB0aGlzLmxvZ18oJ1VubGlzdGVuIG9uICcgKyBwYXRoU3RyaW5nICsgJyBmb3IgJyArIHF1ZXJ5SWQpO1xuICAgICAgICBjb25zdCByZXEgPSB7IC8qcGF0aCovIHA6IHBhdGhTdHJpbmcgfTtcbiAgICAgICAgY29uc3QgYWN0aW9uID0gJ24nO1xuICAgICAgICAvLyBPbmx5IGJvdGhlciBzZW5kaW5nIHF1ZXJ5SWQgaWYgaXQncyBub24tZGVmYXVsdC5cbiAgICAgICAgaWYgKHRhZykge1xuICAgICAgICAgICAgcmVxWydxJ10gPSBxdWVyeU9iajtcbiAgICAgICAgICAgIHJlcVsndCddID0gdGFnO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VuZFJlcXVlc3QoYWN0aW9uLCByZXEpO1xuICAgIH1cbiAgICBvbkRpc2Nvbm5lY3RQdXQocGF0aFN0cmluZywgZGF0YSwgb25Db21wbGV0ZSkge1xuICAgICAgICB0aGlzLmluaXRDb25uZWN0aW9uXygpO1xuICAgICAgICBpZiAodGhpcy5jb25uZWN0ZWRfKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRPbkRpc2Nvbm5lY3RfKCdvJywgcGF0aFN0cmluZywgZGF0YSwgb25Db21wbGV0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm9uRGlzY29ubmVjdFJlcXVlc3RRdWV1ZV8ucHVzaCh7XG4gICAgICAgICAgICAgICAgcGF0aFN0cmluZyxcbiAgICAgICAgICAgICAgICBhY3Rpb246ICdvJyxcbiAgICAgICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgICAgIG9uQ29tcGxldGVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uRGlzY29ubmVjdE1lcmdlKHBhdGhTdHJpbmcsIGRhdGEsIG9uQ29tcGxldGUpIHtcbiAgICAgICAgdGhpcy5pbml0Q29ubmVjdGlvbl8oKTtcbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdGVkXykge1xuICAgICAgICAgICAgdGhpcy5zZW5kT25EaXNjb25uZWN0Xygnb20nLCBwYXRoU3RyaW5nLCBkYXRhLCBvbkNvbXBsZXRlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub25EaXNjb25uZWN0UmVxdWVzdFF1ZXVlXy5wdXNoKHtcbiAgICAgICAgICAgICAgICBwYXRoU3RyaW5nLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogJ29tJyxcbiAgICAgICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgICAgIG9uQ29tcGxldGVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uRGlzY29ubmVjdENhbmNlbChwYXRoU3RyaW5nLCBvbkNvbXBsZXRlKSB7XG4gICAgICAgIHRoaXMuaW5pdENvbm5lY3Rpb25fKCk7XG4gICAgICAgIGlmICh0aGlzLmNvbm5lY3RlZF8pIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZE9uRGlzY29ubmVjdF8oJ29jJywgcGF0aFN0cmluZywgbnVsbCwgb25Db21wbGV0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm9uRGlzY29ubmVjdFJlcXVlc3RRdWV1ZV8ucHVzaCh7XG4gICAgICAgICAgICAgICAgcGF0aFN0cmluZyxcbiAgICAgICAgICAgICAgICBhY3Rpb246ICdvYycsXG4gICAgICAgICAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZW5kT25EaXNjb25uZWN0XyhhY3Rpb24sIHBhdGhTdHJpbmcsIGRhdGEsIG9uQ29tcGxldGUpIHtcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHsgLypwYXRoKi8gcDogcGF0aFN0cmluZywgLypkYXRhKi8gZDogZGF0YSB9O1xuICAgICAgICB0aGlzLmxvZ18oJ29uRGlzY29ubmVjdCAnICsgYWN0aW9uLCByZXF1ZXN0KTtcbiAgICAgICAgdGhpcy5zZW5kUmVxdWVzdChhY3Rpb24sIHJlcXVlc3QsIChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgaWYgKG9uQ29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgb25Db21wbGV0ZShyZXNwb25zZVsgLypzdGF0dXMqLydzJ10sIHJlc3BvbnNlWyAvKiBkYXRhICovJ2QnXSk7XG4gICAgICAgICAgICAgICAgfSwgTWF0aC5mbG9vcigwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwdXQocGF0aFN0cmluZywgZGF0YSwgb25Db21wbGV0ZSwgaGFzaCkge1xuICAgICAgICB0aGlzLnB1dEludGVybmFsKCdwJywgcGF0aFN0cmluZywgZGF0YSwgb25Db21wbGV0ZSwgaGFzaCk7XG4gICAgfVxuICAgIG1lcmdlKHBhdGhTdHJpbmcsIGRhdGEsIG9uQ29tcGxldGUsIGhhc2gpIHtcbiAgICAgICAgdGhpcy5wdXRJbnRlcm5hbCgnbScsIHBhdGhTdHJpbmcsIGRhdGEsIG9uQ29tcGxldGUsIGhhc2gpO1xuICAgIH1cbiAgICBwdXRJbnRlcm5hbChhY3Rpb24sIHBhdGhTdHJpbmcsIGRhdGEsIG9uQ29tcGxldGUsIGhhc2gpIHtcbiAgICAgICAgdGhpcy5pbml0Q29ubmVjdGlvbl8oKTtcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHtcbiAgICAgICAgICAgIC8qcGF0aCovIHA6IHBhdGhTdHJpbmcsXG4gICAgICAgICAgICAvKmRhdGEqLyBkOiBkYXRhXG4gICAgICAgIH07XG4gICAgICAgIGlmIChoYXNoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJlcXVlc3RbIC8qaGFzaCovJ2gnXSA9IGhhc2g7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVE9ETzogT25seSBrZWVwIHRyYWNrIG9mIHRoZSBtb3N0IHJlY2VudCBwdXQgZm9yIGEgZ2l2ZW4gcGF0aD9cbiAgICAgICAgdGhpcy5vdXRzdGFuZGluZ1B1dHNfLnB1c2goe1xuICAgICAgICAgICAgYWN0aW9uLFxuICAgICAgICAgICAgcmVxdWVzdCxcbiAgICAgICAgICAgIG9uQ29tcGxldGVcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMub3V0c3RhbmRpbmdQdXRDb3VudF8rKztcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLm91dHN0YW5kaW5nUHV0c18ubGVuZ3RoIC0gMTtcbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdGVkXykge1xuICAgICAgICAgICAgdGhpcy5zZW5kUHV0XyhpbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvZ18oJ0J1ZmZlcmluZyBwdXQ6ICcgKyBwYXRoU3RyaW5nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZW5kUHV0XyhpbmRleCkge1xuICAgICAgICBjb25zdCBhY3Rpb24gPSB0aGlzLm91dHN0YW5kaW5nUHV0c19baW5kZXhdLmFjdGlvbjtcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMub3V0c3RhbmRpbmdQdXRzX1tpbmRleF0ucmVxdWVzdDtcbiAgICAgICAgY29uc3Qgb25Db21wbGV0ZSA9IHRoaXMub3V0c3RhbmRpbmdQdXRzX1tpbmRleF0ub25Db21wbGV0ZTtcbiAgICAgICAgdGhpcy5vdXRzdGFuZGluZ1B1dHNfW2luZGV4XS5xdWV1ZWQgPSB0aGlzLmNvbm5lY3RlZF87XG4gICAgICAgIHRoaXMuc2VuZFJlcXVlc3QoYWN0aW9uLCByZXF1ZXN0LCAobWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5sb2dfKGFjdGlvbiArICcgcmVzcG9uc2UnLCBtZXNzYWdlKTtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLm91dHN0YW5kaW5nUHV0c19baW5kZXhdO1xuICAgICAgICAgICAgdGhpcy5vdXRzdGFuZGluZ1B1dENvdW50Xy0tO1xuICAgICAgICAgICAgLy8gQ2xlYW4gdXAgYXJyYXkgb2NjYXNpb25hbGx5LlxuICAgICAgICAgICAgaWYgKHRoaXMub3V0c3RhbmRpbmdQdXRDb3VudF8gPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLm91dHN0YW5kaW5nUHV0c18gPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvbkNvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZShtZXNzYWdlWyAvKnN0YXR1cyovJ3MnXSwgbWVzc2FnZVsgLyogZGF0YSAqLydkJ10pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVwb3J0U3RhdHMoc3RhdHMpIHtcbiAgICAgICAgLy8gSWYgd2UncmUgbm90IGNvbm5lY3RlZCwgd2UganVzdCBkcm9wIHRoZSBzdGF0cy5cbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdGVkXykge1xuICAgICAgICAgICAgY29uc3QgcmVxdWVzdCA9IHsgLypjb3VudGVycyovIGM6IHN0YXRzIH07XG4gICAgICAgICAgICB0aGlzLmxvZ18oJ3JlcG9ydFN0YXRzJywgcmVxdWVzdCk7XG4gICAgICAgICAgICB0aGlzLnNlbmRSZXF1ZXN0KC8qc3RhdHMqLyAncycsIHJlcXVlc3QsIHJlc3VsdCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhdHVzID0gcmVzdWx0WyAvKnN0YXR1cyovJ3MnXTtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAnb2snKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yUmVhc29uID0gcmVzdWx0WyAvKiBkYXRhICovJ2QnXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dfKCdyZXBvcnRTdGF0cycsICdFcnJvciBzZW5kaW5nIHN0YXRzOiAnICsgZXJyb3JSZWFzb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uRGF0YU1lc3NhZ2VfKG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKCdyJyBpbiBtZXNzYWdlKSB7XG4gICAgICAgICAgICAvLyB0aGlzIGlzIGEgcmVzcG9uc2VcbiAgICAgICAgICAgIHRoaXMubG9nXygnZnJvbSBzZXJ2ZXI6ICcgKyBzdHJpbmdpZnkobWVzc2FnZSkpO1xuICAgICAgICAgICAgY29uc3QgcmVxTnVtID0gbWVzc2FnZVsnciddO1xuICAgICAgICAgICAgY29uc3Qgb25SZXNwb25zZSA9IHRoaXMucmVxdWVzdENCSGFzaF9bcmVxTnVtXTtcbiAgICAgICAgICAgIGlmIChvblJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMucmVxdWVzdENCSGFzaF9bcmVxTnVtXTtcbiAgICAgICAgICAgICAgICBvblJlc3BvbnNlKG1lc3NhZ2VbIC8qYm9keSovJ2InXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoJ2Vycm9yJyBpbiBtZXNzYWdlKSB7XG4gICAgICAgICAgICB0aHJvdyAnQSBzZXJ2ZXItc2lkZSBlcnJvciBoYXMgb2NjdXJyZWQ6ICcgKyBtZXNzYWdlWydlcnJvciddO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCdhJyBpbiBtZXNzYWdlKSB7XG4gICAgICAgICAgICAvLyBhIGFuZCBiIGFyZSBhY3Rpb24gYW5kIGJvZHksIHJlc3BlY3RpdmVseVxuICAgICAgICAgICAgdGhpcy5vbkRhdGFQdXNoXyhtZXNzYWdlWydhJ10sIG1lc3NhZ2VbJ2InXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25EYXRhUHVzaF8oYWN0aW9uLCBib2R5KSB7XG4gICAgICAgIHRoaXMubG9nXygnaGFuZGxlU2VydmVyTWVzc2FnZScsIGFjdGlvbiwgYm9keSk7XG4gICAgICAgIGlmIChhY3Rpb24gPT09ICdkJykge1xuICAgICAgICAgICAgdGhpcy5vbkRhdGFVcGRhdGVfKGJvZHlbIC8qcGF0aCovJ3AnXSwgYm9keVsgLypkYXRhKi8nZCddLCBcbiAgICAgICAgICAgIC8qaXNNZXJnZSovIGZhbHNlLCBib2R5Wyd0J10pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGFjdGlvbiA9PT0gJ20nKSB7XG4gICAgICAgICAgICB0aGlzLm9uRGF0YVVwZGF0ZV8oYm9keVsgLypwYXRoKi8ncCddLCBib2R5WyAvKmRhdGEqLydkJ10sIFxuICAgICAgICAgICAgLyppc01lcmdlPSovIHRydWUsIGJvZHlbJ3QnXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYWN0aW9uID09PSAnYycpIHtcbiAgICAgICAgICAgIHRoaXMub25MaXN0ZW5SZXZva2VkXyhib2R5WyAvKnBhdGgqLydwJ10sIGJvZHlbIC8qcXVlcnkqLydxJ10pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGFjdGlvbiA9PT0gJ2FjJykge1xuICAgICAgICAgICAgdGhpcy5vbkF1dGhSZXZva2VkXyhib2R5WyAvKnN0YXR1cyBjb2RlKi8ncyddLCBib2R5WyAvKiBleHBsYW5hdGlvbiAqLydkJ10pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGFjdGlvbiA9PT0gJ2FwYycpIHtcbiAgICAgICAgICAgIHRoaXMub25BcHBDaGVja1Jldm9rZWRfKGJvZHlbIC8qc3RhdHVzIGNvZGUqLydzJ10sIGJvZHlbIC8qIGV4cGxhbmF0aW9uICovJ2QnXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYWN0aW9uID09PSAnc2QnKSB7XG4gICAgICAgICAgICB0aGlzLm9uU2VjdXJpdHlEZWJ1Z1BhY2tldF8oYm9keSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlcnJvcignVW5yZWNvZ25pemVkIGFjdGlvbiByZWNlaXZlZCBmcm9tIHNlcnZlcjogJyArXG4gICAgICAgICAgICAgICAgc3RyaW5naWZ5KGFjdGlvbikgK1xuICAgICAgICAgICAgICAgICdcXG5BcmUgeW91IHVzaW5nIHRoZSBsYXRlc3QgY2xpZW50PycpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uUmVhZHlfKHRpbWVzdGFtcCwgc2Vzc2lvbklkKSB7XG4gICAgICAgIHRoaXMubG9nXygnY29ubmVjdGlvbiByZWFkeScpO1xuICAgICAgICB0aGlzLmNvbm5lY3RlZF8gPSB0cnVlO1xuICAgICAgICB0aGlzLmxhc3RDb25uZWN0aW9uRXN0YWJsaXNoZWRUaW1lXyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICB0aGlzLmhhbmRsZVRpbWVzdGFtcF8odGltZXN0YW1wKTtcbiAgICAgICAgdGhpcy5sYXN0U2Vzc2lvbklkID0gc2Vzc2lvbklkO1xuICAgICAgICBpZiAodGhpcy5maXJzdENvbm5lY3Rpb25fKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRDb25uZWN0U3RhdHNfKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZXN0b3JlU3RhdGVfKCk7XG4gICAgICAgIHRoaXMuZmlyc3RDb25uZWN0aW9uXyA9IGZhbHNlO1xuICAgICAgICB0aGlzLm9uQ29ubmVjdFN0YXR1c18odHJ1ZSk7XG4gICAgfVxuICAgIHNjaGVkdWxlQ29ubmVjdF8odGltZW91dCkge1xuICAgICAgICBhc3NlcnQoIXRoaXMucmVhbHRpbWVfLCBcIlNjaGVkdWxpbmcgYSBjb25uZWN0IHdoZW4gd2UncmUgYWxyZWFkeSBjb25uZWN0ZWQvaW5nP1wiKTtcbiAgICAgICAgaWYgKHRoaXMuZXN0YWJsaXNoQ29ubmVjdGlvblRpbWVyXykge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZXN0YWJsaXNoQ29ubmVjdGlvblRpbWVyXyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTk9URTogRXZlbiB3aGVuIHRpbWVvdXQgaXMgMCwgaXQncyBpbXBvcnRhbnQgdG8gZG8gYSBzZXRUaW1lb3V0IHRvIHdvcmsgYXJvdW5kIGFuIGluZnVyaWF0aW5nIFwiU2VjdXJpdHkgRXJyb3JcIiBpblxuICAgICAgICAvLyBGaXJlZm94IHdoZW4gdHJ5aW5nIHRvIHdyaXRlIHRvIG91ciBsb25nLXBvbGxpbmcgaWZyYW1lIGluIHNvbWUgc2NlbmFyaW9zIChlLmcuIEZvcmdlIG9yIG91ciB1bml0IHRlc3RzKS5cbiAgICAgICAgdGhpcy5lc3RhYmxpc2hDb25uZWN0aW9uVGltZXJfID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmVzdGFibGlzaENvbm5lY3Rpb25UaW1lcl8gPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5lc3RhYmxpc2hDb25uZWN0aW9uXygpO1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgfSwgTWF0aC5mbG9vcih0aW1lb3V0KSk7XG4gICAgfVxuICAgIGluaXRDb25uZWN0aW9uXygpIHtcbiAgICAgICAgaWYgKCF0aGlzLnJlYWx0aW1lXyAmJiB0aGlzLmZpcnN0Q29ubmVjdGlvbl8pIHtcbiAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVDb25uZWN0XygwKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvblZpc2libGVfKHZpc2libGUpIHtcbiAgICAgICAgLy8gTk9URTogVGFiYmluZyBhd2F5IGFuZCBiYWNrIHRvIGEgd2luZG93IHdpbGwgZGVmZWF0IG91ciByZWNvbm5lY3QgYmFja29mZiwgYnV0IEkgdGhpbmsgdGhhdCdzIGZpbmUuXG4gICAgICAgIGlmICh2aXNpYmxlICYmXG4gICAgICAgICAgICAhdGhpcy52aXNpYmxlXyAmJlxuICAgICAgICAgICAgdGhpcy5yZWNvbm5lY3REZWxheV8gPT09IHRoaXMubWF4UmVjb25uZWN0RGVsYXlfKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ18oJ1dpbmRvdyBiZWNhbWUgdmlzaWJsZS4gIFJlZHVjaW5nIGRlbGF5LicpO1xuICAgICAgICAgICAgdGhpcy5yZWNvbm5lY3REZWxheV8gPSBSRUNPTk5FQ1RfTUlOX0RFTEFZO1xuICAgICAgICAgICAgaWYgKCF0aGlzLnJlYWx0aW1lXykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVDb25uZWN0XygwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZpc2libGVfID0gdmlzaWJsZTtcbiAgICB9XG4gICAgb25PbmxpbmVfKG9ubGluZSkge1xuICAgICAgICBpZiAob25saW5lKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ18oJ0Jyb3dzZXIgd2VudCBvbmxpbmUuJyk7XG4gICAgICAgICAgICB0aGlzLnJlY29ubmVjdERlbGF5XyA9IFJFQ09OTkVDVF9NSU5fREVMQVk7XG4gICAgICAgICAgICBpZiAoIXRoaXMucmVhbHRpbWVfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zY2hlZHVsZUNvbm5lY3RfKDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sb2dfKCdCcm93c2VyIHdlbnQgb2ZmbGluZS4gIEtpbGxpbmcgY29ubmVjdGlvbi4nKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlYWx0aW1lXykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVhbHRpbWVfLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25SZWFsdGltZURpc2Nvbm5lY3RfKCkge1xuICAgICAgICB0aGlzLmxvZ18oJ2RhdGEgY2xpZW50IGRpc2Nvbm5lY3RlZCcpO1xuICAgICAgICB0aGlzLmNvbm5lY3RlZF8gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5yZWFsdGltZV8gPSBudWxsO1xuICAgICAgICAvLyBTaW5jZSB3ZSBkb24ndCBrbm93IGlmIG91ciBzZW50IHRyYW5zYWN0aW9ucyBzdWNjZWVkZWQgb3Igbm90LCB3ZSBuZWVkIHRvIGNhbmNlbCB0aGVtLlxuICAgICAgICB0aGlzLmNhbmNlbFNlbnRUcmFuc2FjdGlvbnNfKCk7XG4gICAgICAgIC8vIENsZWFyIG91dCB0aGUgcGVuZGluZyByZXF1ZXN0cy5cbiAgICAgICAgdGhpcy5yZXF1ZXN0Q0JIYXNoXyA9IHt9O1xuICAgICAgICBpZiAodGhpcy5zaG91bGRSZWNvbm5lY3RfKCkpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy52aXNpYmxlXykge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nXyhcIldpbmRvdyBpc24ndCB2aXNpYmxlLiAgRGVsYXlpbmcgcmVjb25uZWN0LlwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlY29ubmVjdERlbGF5XyA9IHRoaXMubWF4UmVjb25uZWN0RGVsYXlfO1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdENvbm5lY3Rpb25BdHRlbXB0VGltZV8gPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMubGFzdENvbm5lY3Rpb25Fc3RhYmxpc2hlZFRpbWVfKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgd2UndmUgYmVlbiBjb25uZWN0ZWQgbG9uZyBlbm91Z2gsIHJlc2V0IHJlY29ubmVjdCBkZWxheSB0byBtaW5pbXVtLlxuICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVTaW5jZUxhc3RDb25uZWN0U3VjY2VlZGVkID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSB0aGlzLmxhc3RDb25uZWN0aW9uRXN0YWJsaXNoZWRUaW1lXztcbiAgICAgICAgICAgICAgICBpZiAodGltZVNpbmNlTGFzdENvbm5lY3RTdWNjZWVkZWQgPiBSRUNPTk5FQ1RfREVMQVlfUkVTRVRfVElNRU9VVCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlY29ubmVjdERlbGF5XyA9IFJFQ09OTkVDVF9NSU5fREVMQVk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMubGFzdENvbm5lY3Rpb25Fc3RhYmxpc2hlZFRpbWVfID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHRpbWVTaW5jZUxhc3RDb25uZWN0QXR0ZW1wdCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gdGhpcy5sYXN0Q29ubmVjdGlvbkF0dGVtcHRUaW1lXztcbiAgICAgICAgICAgIGxldCByZWNvbm5lY3REZWxheSA9IE1hdGgubWF4KDAsIHRoaXMucmVjb25uZWN0RGVsYXlfIC0gdGltZVNpbmNlTGFzdENvbm5lY3RBdHRlbXB0KTtcbiAgICAgICAgICAgIHJlY29ubmVjdERlbGF5ID0gTWF0aC5yYW5kb20oKSAqIHJlY29ubmVjdERlbGF5O1xuICAgICAgICAgICAgdGhpcy5sb2dfKCdUcnlpbmcgdG8gcmVjb25uZWN0IGluICcgKyByZWNvbm5lY3REZWxheSArICdtcycpO1xuICAgICAgICAgICAgdGhpcy5zY2hlZHVsZUNvbm5lY3RfKHJlY29ubmVjdERlbGF5KTtcbiAgICAgICAgICAgIC8vIEFkanVzdCByZWNvbm5lY3QgZGVsYXkgZm9yIG5leHQgdGltZS5cbiAgICAgICAgICAgIHRoaXMucmVjb25uZWN0RGVsYXlfID0gTWF0aC5taW4odGhpcy5tYXhSZWNvbm5lY3REZWxheV8sIHRoaXMucmVjb25uZWN0RGVsYXlfICogUkVDT05ORUNUX0RFTEFZX01VTFRJUExJRVIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub25Db25uZWN0U3RhdHVzXyhmYWxzZSk7XG4gICAgfVxuICAgIGFzeW5jIGVzdGFibGlzaENvbm5lY3Rpb25fKCkge1xuICAgICAgICBpZiAodGhpcy5zaG91bGRSZWNvbm5lY3RfKCkpIHtcbiAgICAgICAgICAgIHRoaXMubG9nXygnTWFraW5nIGEgY29ubmVjdGlvbiBhdHRlbXB0Jyk7XG4gICAgICAgICAgICB0aGlzLmxhc3RDb25uZWN0aW9uQXR0ZW1wdFRpbWVfID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICB0aGlzLmxhc3RDb25uZWN0aW9uRXN0YWJsaXNoZWRUaW1lXyA9IG51bGw7XG4gICAgICAgICAgICBjb25zdCBvbkRhdGFNZXNzYWdlID0gdGhpcy5vbkRhdGFNZXNzYWdlXy5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgY29uc3Qgb25SZWFkeSA9IHRoaXMub25SZWFkeV8uYmluZCh0aGlzKTtcbiAgICAgICAgICAgIGNvbnN0IG9uRGlzY29ubmVjdCA9IHRoaXMub25SZWFsdGltZURpc2Nvbm5lY3RfLmJpbmQodGhpcyk7XG4gICAgICAgICAgICBjb25zdCBjb25uSWQgPSB0aGlzLmlkICsgJzonICsgUGVyc2lzdGVudENvbm5lY3Rpb24ubmV4dENvbm5lY3Rpb25JZF8rKztcbiAgICAgICAgICAgIGNvbnN0IGxhc3RTZXNzaW9uSWQgPSB0aGlzLmxhc3RTZXNzaW9uSWQ7XG4gICAgICAgICAgICBsZXQgY2FuY2VsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGxldCBjb25uZWN0aW9uID0gbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IGNsb3NlRm4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBvbkRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3Qgc2VuZFJlcXVlc3RGbiA9IGZ1bmN0aW9uIChtc2cpIHtcbiAgICAgICAgICAgICAgICBhc3NlcnQoY29ubmVjdGlvbiwgXCJzZW5kUmVxdWVzdCBjYWxsIHdoZW4gd2UncmUgbm90IGNvbm5lY3RlZCBub3QgYWxsb3dlZC5cIik7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZW5kUmVxdWVzdChtc2cpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucmVhbHRpbWVfID0ge1xuICAgICAgICAgICAgICAgIGNsb3NlOiBjbG9zZUZuLFxuICAgICAgICAgICAgICAgIHNlbmRSZXF1ZXN0OiBzZW5kUmVxdWVzdEZuXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgZm9yY2VSZWZyZXNoID0gdGhpcy5mb3JjZVRva2VuUmVmcmVzaF87XG4gICAgICAgICAgICB0aGlzLmZvcmNlVG9rZW5SZWZyZXNoXyA9IGZhbHNlO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBGaXJzdCBmZXRjaCBhdXRoIGFuZCBhcHAgY2hlY2sgdG9rZW4sIGFuZCBlc3RhYmxpc2ggY29ubmVjdGlvbiBhZnRlclxuICAgICAgICAgICAgICAgIC8vIGZldGNoaW5nIHRoZSB0b2tlbiB3YXMgc3VjY2Vzc2Z1bFxuICAgICAgICAgICAgICAgIGNvbnN0IFthdXRoVG9rZW4sIGFwcENoZWNrVG9rZW5dID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmF1dGhUb2tlblByb3ZpZGVyXy5nZXRUb2tlbihmb3JjZVJlZnJlc2gpLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcENoZWNrVG9rZW5Qcm92aWRlcl8uZ2V0VG9rZW4oZm9yY2VSZWZyZXNoKVxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgIGlmICghY2FuY2VsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nKCdnZXRUb2tlbigpIGNvbXBsZXRlZC4gQ3JlYXRpbmcgY29ubmVjdGlvbi4nKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdXRoVG9rZW5fID0gYXV0aFRva2VuICYmIGF1dGhUb2tlbi5hY2Nlc3NUb2tlbjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBDaGVja1Rva2VuXyA9IGFwcENoZWNrVG9rZW4gJiYgYXBwQ2hlY2tUb2tlbi50b2tlbjtcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbiA9IG5ldyBDb25uZWN0aW9uKGNvbm5JZCwgdGhpcy5yZXBvSW5mb18sIHRoaXMuYXBwbGljYXRpb25JZF8sIHRoaXMuYXBwQ2hlY2tUb2tlbl8sIHRoaXMuYXV0aFRva2VuXywgb25EYXRhTWVzc2FnZSwgb25SZWFkeSwgb25EaXNjb25uZWN0LCBcbiAgICAgICAgICAgICAgICAgICAgLyogb25LaWxsPSAqLyByZWFzb24gPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2FybihyZWFzb24gKyAnICgnICsgdGhpcy5yZXBvSW5mb18udG9TdHJpbmcoKSArICcpJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmludGVycnVwdChTRVJWRVJfS0lMTF9JTlRFUlJVUFRfUkVBU09OKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgbGFzdFNlc3Npb25JZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsb2coJ2dldFRva2VuKCkgY29tcGxldGVkIGJ1dCB3YXMgY2FuY2VsZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ18oJ0ZhaWxlZCB0byBnZXQgdG9rZW46ICcgKyBlcnJvcik7XG4gICAgICAgICAgICAgICAgaWYgKCFjYW5jZWxlZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yZXBvSW5mb18ubm9kZUFkbWluKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIG1heSBiZSBhIGNyaXRpY2FsIGVycm9yIGZvciB0aGUgQWRtaW4gTm9kZS5qcyBTREssIHNvIGxvZyBhIHdhcm5pbmcuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBCdXQgZ2V0VG9rZW4oKSBtYXkgYWxzbyBqdXN0IGhhdmUgdGVtcG9yYXJpbHkgZmFpbGVkLCBzbyB3ZSBzdGlsbCB3YW50IHRvXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb250aW51ZSByZXRyeWluZy5cbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNsb3NlRm4oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW50ZXJydXB0KHJlYXNvbikge1xuICAgICAgICBsb2coJ0ludGVycnVwdGluZyBjb25uZWN0aW9uIGZvciByZWFzb246ICcgKyByZWFzb24pO1xuICAgICAgICB0aGlzLmludGVycnVwdFJlYXNvbnNfW3JlYXNvbl0gPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy5yZWFsdGltZV8pIHtcbiAgICAgICAgICAgIHRoaXMucmVhbHRpbWVfLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5lc3RhYmxpc2hDb25uZWN0aW9uVGltZXJfKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZXN0YWJsaXNoQ29ubmVjdGlvblRpbWVyXyk7XG4gICAgICAgICAgICAgICAgdGhpcy5lc3RhYmxpc2hDb25uZWN0aW9uVGltZXJfID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbm5lY3RlZF8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uUmVhbHRpbWVEaXNjb25uZWN0XygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJlc3VtZShyZWFzb24pIHtcbiAgICAgICAgbG9nKCdSZXN1bWluZyBjb25uZWN0aW9uIGZvciByZWFzb246ICcgKyByZWFzb24pO1xuICAgICAgICBkZWxldGUgdGhpcy5pbnRlcnJ1cHRSZWFzb25zX1tyZWFzb25dO1xuICAgICAgICBpZiAoaXNFbXB0eSh0aGlzLmludGVycnVwdFJlYXNvbnNfKSkge1xuICAgICAgICAgICAgdGhpcy5yZWNvbm5lY3REZWxheV8gPSBSRUNPTk5FQ1RfTUlOX0RFTEFZO1xuICAgICAgICAgICAgaWYgKCF0aGlzLnJlYWx0aW1lXykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVDb25uZWN0XygwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVUaW1lc3RhbXBfKHRpbWVzdGFtcCkge1xuICAgICAgICBjb25zdCBkZWx0YSA9IHRpbWVzdGFtcCAtIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICB0aGlzLm9uU2VydmVySW5mb1VwZGF0ZV8oeyBzZXJ2ZXJUaW1lT2Zmc2V0OiBkZWx0YSB9KTtcbiAgICB9XG4gICAgY2FuY2VsU2VudFRyYW5zYWN0aW9uc18oKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5vdXRzdGFuZGluZ1B1dHNfLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBwdXQgPSB0aGlzLm91dHN0YW5kaW5nUHV0c19baV07XG4gICAgICAgICAgICBpZiAocHV0ICYmIC8qaGFzaCovICdoJyBpbiBwdXQucmVxdWVzdCAmJiBwdXQucXVldWVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHB1dC5vbkNvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHB1dC5vbkNvbXBsZXRlKCdkaXNjb25uZWN0Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLm91dHN0YW5kaW5nUHV0c19baV07XG4gICAgICAgICAgICAgICAgdGhpcy5vdXRzdGFuZGluZ1B1dENvdW50Xy0tO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIENsZWFuIHVwIGFycmF5IG9jY2FzaW9uYWxseS5cbiAgICAgICAgaWYgKHRoaXMub3V0c3RhbmRpbmdQdXRDb3VudF8gPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMub3V0c3RhbmRpbmdQdXRzXyA9IFtdO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uTGlzdGVuUmV2b2tlZF8ocGF0aFN0cmluZywgcXVlcnkpIHtcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBsaXN0ZW4gYW5kIG1hbnVmYWN0dXJlIGEgXCJwZXJtaXNzaW9uX2RlbmllZFwiIGVycm9yIGZvciB0aGUgZmFpbGVkIGxpc3Rlbi5cbiAgICAgICAgbGV0IHF1ZXJ5SWQ7XG4gICAgICAgIGlmICghcXVlcnkpIHtcbiAgICAgICAgICAgIHF1ZXJ5SWQgPSAnZGVmYXVsdCc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBxdWVyeUlkID0gcXVlcnkubWFwKHEgPT4gT2JqZWN0VG9VbmlxdWVLZXkocSkpLmpvaW4oJyQnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsaXN0ZW4gPSB0aGlzLnJlbW92ZUxpc3Rlbl8ocGF0aFN0cmluZywgcXVlcnlJZCk7XG4gICAgICAgIGlmIChsaXN0ZW4gJiYgbGlzdGVuLm9uQ29tcGxldGUpIHtcbiAgICAgICAgICAgIGxpc3Rlbi5vbkNvbXBsZXRlKCdwZXJtaXNzaW9uX2RlbmllZCcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbW92ZUxpc3Rlbl8ocGF0aFN0cmluZywgcXVlcnlJZCkge1xuICAgICAgICBjb25zdCBub3JtYWxpemVkUGF0aFN0cmluZyA9IG5ldyBQYXRoKHBhdGhTdHJpbmcpLnRvU3RyaW5nKCk7IC8vIG5vcm1hbGl6ZSBwYXRoLlxuICAgICAgICBsZXQgbGlzdGVuO1xuICAgICAgICBpZiAodGhpcy5saXN0ZW5zLmhhcyhub3JtYWxpemVkUGF0aFN0cmluZykpIHtcbiAgICAgICAgICAgIGNvbnN0IG1hcCA9IHRoaXMubGlzdGVucy5nZXQobm9ybWFsaXplZFBhdGhTdHJpbmcpO1xuICAgICAgICAgICAgbGlzdGVuID0gbWFwLmdldChxdWVyeUlkKTtcbiAgICAgICAgICAgIG1hcC5kZWxldGUocXVlcnlJZCk7XG4gICAgICAgICAgICBpZiAobWFwLnNpemUgPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxpc3RlbnMuZGVsZXRlKG5vcm1hbGl6ZWRQYXRoU3RyaW5nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGFsbCBsaXN0ZW5zIGZvciB0aGlzIHBhdGggaGFzIGFscmVhZHkgYmVlbiByZW1vdmVkXG4gICAgICAgICAgICBsaXN0ZW4gPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpc3RlbjtcbiAgICB9XG4gICAgb25BdXRoUmV2b2tlZF8oc3RhdHVzQ29kZSwgZXhwbGFuYXRpb24pIHtcbiAgICAgICAgbG9nKCdBdXRoIHRva2VuIHJldm9rZWQ6ICcgKyBzdGF0dXNDb2RlICsgJy8nICsgZXhwbGFuYXRpb24pO1xuICAgICAgICB0aGlzLmF1dGhUb2tlbl8gPSBudWxsO1xuICAgICAgICB0aGlzLmZvcmNlVG9rZW5SZWZyZXNoXyA9IHRydWU7XG4gICAgICAgIHRoaXMucmVhbHRpbWVfLmNsb3NlKCk7XG4gICAgICAgIGlmIChzdGF0dXNDb2RlID09PSAnaW52YWxpZF90b2tlbicgfHwgc3RhdHVzQ29kZSA9PT0gJ3Blcm1pc3Npb25fZGVuaWVkJykge1xuICAgICAgICAgICAgLy8gV2UnbGwgd2FpdCBhIGNvdXBsZSB0aW1lcyBiZWZvcmUgbG9nZ2luZyB0aGUgd2FybmluZyAvIGluY3JlYXNpbmcgdGhlXG4gICAgICAgICAgICAvLyByZXRyeSBwZXJpb2Qgc2luY2Ugb2F1dGggdG9rZW5zIHdpbGwgcmVwb3J0IGFzIFwiaW52YWxpZFwiIGlmIHRoZXkncmVcbiAgICAgICAgICAgIC8vIGp1c3QgZXhwaXJlZC4gUGx1cyB0aGVyZSBtYXkgYmUgdHJhbnNpZW50IGlzc3VlcyB0aGF0IHJlc29sdmUgdGhlbXNlbHZlcy5cbiAgICAgICAgICAgIHRoaXMuaW52YWxpZEF1dGhUb2tlbkNvdW50XysrO1xuICAgICAgICAgICAgaWYgKHRoaXMuaW52YWxpZEF1dGhUb2tlbkNvdW50XyA+PSBJTlZBTElEX1RPS0VOX1RIUkVTSE9MRCkge1xuICAgICAgICAgICAgICAgIC8vIFNldCBhIGxvbmcgcmVjb25uZWN0IGRlbGF5IGJlY2F1c2UgcmVjb3ZlcnkgaXMgdW5saWtlbHlcbiAgICAgICAgICAgICAgICB0aGlzLnJlY29ubmVjdERlbGF5XyA9IFJFQ09OTkVDVF9NQVhfREVMQVlfRk9SX0FETUlOUztcbiAgICAgICAgICAgICAgICAvLyBOb3RpZnkgdGhlIGF1dGggdG9rZW4gcHJvdmlkZXIgdGhhdCB0aGUgdG9rZW4gaXMgaW52YWxpZCwgd2hpY2ggd2lsbCBsb2dcbiAgICAgICAgICAgICAgICAvLyBhIHdhcm5pbmdcbiAgICAgICAgICAgICAgICB0aGlzLmF1dGhUb2tlblByb3ZpZGVyXy5ub3RpZnlGb3JJbnZhbGlkVG9rZW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBvbkFwcENoZWNrUmV2b2tlZF8oc3RhdHVzQ29kZSwgZXhwbGFuYXRpb24pIHtcbiAgICAgICAgbG9nKCdBcHAgY2hlY2sgdG9rZW4gcmV2b2tlZDogJyArIHN0YXR1c0NvZGUgKyAnLycgKyBleHBsYW5hdGlvbik7XG4gICAgICAgIHRoaXMuYXBwQ2hlY2tUb2tlbl8gPSBudWxsO1xuICAgICAgICB0aGlzLmZvcmNlVG9rZW5SZWZyZXNoXyA9IHRydWU7XG4gICAgICAgIC8vIE5vdGU6IFdlIGRvbid0IGNsb3NlIHRoZSBjb25uZWN0aW9uIGFzIHRoZSBkZXZlbG9wZXIgbWF5IG5vdCBoYXZlXG4gICAgICAgIC8vIGVuZm9yY2VtZW50IGVuYWJsZWQuIFRoZSBiYWNrZW5kIGNsb3NlcyBjb25uZWN0aW9ucyB3aXRoIGVuZm9yY2VtZW50cy5cbiAgICAgICAgaWYgKHN0YXR1c0NvZGUgPT09ICdpbnZhbGlkX3Rva2VuJyB8fCBzdGF0dXNDb2RlID09PSAncGVybWlzc2lvbl9kZW5pZWQnKSB7XG4gICAgICAgICAgICAvLyBXZSdsbCB3YWl0IGEgY291cGxlIHRpbWVzIGJlZm9yZSBsb2dnaW5nIHRoZSB3YXJuaW5nIC8gaW5jcmVhc2luZyB0aGVcbiAgICAgICAgICAgIC8vIHJldHJ5IHBlcmlvZCBzaW5jZSBvYXV0aCB0b2tlbnMgd2lsbCByZXBvcnQgYXMgXCJpbnZhbGlkXCIgaWYgdGhleSdyZVxuICAgICAgICAgICAgLy8ganVzdCBleHBpcmVkLiBQbHVzIHRoZXJlIG1heSBiZSB0cmFuc2llbnQgaXNzdWVzIHRoYXQgcmVzb2x2ZSB0aGVtc2VsdmVzLlxuICAgICAgICAgICAgdGhpcy5pbnZhbGlkQXBwQ2hlY2tUb2tlbkNvdW50XysrO1xuICAgICAgICAgICAgaWYgKHRoaXMuaW52YWxpZEFwcENoZWNrVG9rZW5Db3VudF8gPj0gSU5WQUxJRF9UT0tFTl9USFJFU0hPTEQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcENoZWNrVG9rZW5Qcm92aWRlcl8ubm90aWZ5Rm9ySW52YWxpZFRva2VuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25TZWN1cml0eURlYnVnUGFja2V0Xyhib2R5KSB7XG4gICAgICAgIGlmICh0aGlzLnNlY3VyaXR5RGVidWdDYWxsYmFja18pIHtcbiAgICAgICAgICAgIHRoaXMuc2VjdXJpdHlEZWJ1Z0NhbGxiYWNrXyhib2R5KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICgnbXNnJyBpbiBib2R5KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0ZJUkVCQVNFOiAnICsgYm9keVsnbXNnJ10ucmVwbGFjZSgnXFxuJywgJ1xcbkZJUkVCQVNFOiAnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVzdG9yZVN0YXRlXygpIHtcbiAgICAgICAgLy9SZS1hdXRoZW50aWNhdGUgb3Vyc2VsdmVzIGlmIHdlIGhhdmUgYSBjcmVkZW50aWFsIHN0b3JlZC5cbiAgICAgICAgdGhpcy50cnlBdXRoKCk7XG4gICAgICAgIHRoaXMudHJ5QXBwQ2hlY2soKTtcbiAgICAgICAgLy8gUHV0cyBkZXBlbmQgb24gaGF2aW5nIHJlY2VpdmVkIHRoZSBjb3JyZXNwb25kaW5nIGRhdGEgdXBkYXRlIGZyb20gdGhlIHNlcnZlciBiZWZvcmUgdGhleSBjb21wbGV0ZSwgc28gd2UgbXVzdFxuICAgICAgICAvLyBtYWtlIHN1cmUgdG8gc2VuZCBsaXN0ZW5zIGJlZm9yZSBwdXRzLlxuICAgICAgICBmb3IgKGNvbnN0IHF1ZXJpZXMgb2YgdGhpcy5saXN0ZW5zLnZhbHVlcygpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGxpc3RlblNwZWMgb2YgcXVlcmllcy52YWx1ZXMoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VuZExpc3Rlbl8obGlzdGVuU3BlYyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm91dHN0YW5kaW5nUHV0c18ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm91dHN0YW5kaW5nUHV0c19baV0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbmRQdXRfKGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHdoaWxlICh0aGlzLm9uRGlzY29ubmVjdFJlcXVlc3RRdWV1ZV8ubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5vbkRpc2Nvbm5lY3RSZXF1ZXN0UXVldWVfLnNoaWZ0KCk7XG4gICAgICAgICAgICB0aGlzLnNlbmRPbkRpc2Nvbm5lY3RfKHJlcXVlc3QuYWN0aW9uLCByZXF1ZXN0LnBhdGhTdHJpbmcsIHJlcXVlc3QuZGF0YSwgcmVxdWVzdC5vbkNvbXBsZXRlKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMub3V0c3RhbmRpbmdHZXRzXy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHRoaXMub3V0c3RhbmRpbmdHZXRzX1tpXSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VuZEdldF8oaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZHMgY2xpZW50IHN0YXRzIGZvciBmaXJzdCBjb25uZWN0aW9uXG4gICAgICovXG4gICAgc2VuZENvbm5lY3RTdGF0c18oKSB7XG4gICAgICAgIGNvbnN0IHN0YXRzID0ge307XG4gICAgICAgIGxldCBjbGllbnROYW1lID0gJ2pzJztcbiAgICAgICAgaWYgKGlzTm9kZVNkaygpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZXBvSW5mb18ubm9kZUFkbWluKSB7XG4gICAgICAgICAgICAgICAgY2xpZW50TmFtZSA9ICdhZG1pbl9ub2RlJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNsaWVudE5hbWUgPSAnbm9kZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3RhdHNbJ3Nkay4nICsgY2xpZW50TmFtZSArICcuJyArIFNES19WRVJTSU9OLnJlcGxhY2UoL1xcLi9nLCAnLScpXSA9IDE7XG4gICAgICAgIGlmIChpc01vYmlsZUNvcmRvdmEoKSkge1xuICAgICAgICAgICAgc3RhdHNbJ2ZyYW1ld29yay5jb3Jkb3ZhJ10gPSAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzUmVhY3ROYXRpdmUoKSkge1xuICAgICAgICAgICAgc3RhdHNbJ2ZyYW1ld29yay5yZWFjdG5hdGl2ZSddID0gMTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlcG9ydFN0YXRzKHN0YXRzKTtcbiAgICB9XG4gICAgc2hvdWxkUmVjb25uZWN0XygpIHtcbiAgICAgICAgY29uc3Qgb25saW5lID0gT25saW5lTW9uaXRvci5nZXRJbnN0YW5jZSgpLmN1cnJlbnRseU9ubGluZSgpO1xuICAgICAgICByZXR1cm4gaXNFbXB0eSh0aGlzLmludGVycnVwdFJlYXNvbnNfKSAmJiBvbmxpbmU7XG4gICAgfVxufVxuUGVyc2lzdGVudENvbm5lY3Rpb24ubmV4dFBlcnNpc3RlbnRDb25uZWN0aW9uSWRfID0gMDtcbi8qKlxuICogQ291bnRlciBmb3IgbnVtYmVyIG9mIGNvbm5lY3Rpb25zIGNyZWF0ZWQuIE1haW5seSB1c2VkIGZvciB0YWdnaW5nIGluIHRoZSBsb2dzXG4gKi9cblBlcnNpc3RlbnRDb25uZWN0aW9uLm5leHRDb25uZWN0aW9uSWRfID0gMDtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNsYXNzIE5hbWVkTm9kZSB7XG4gICAgY29uc3RydWN0b3IobmFtZSwgbm9kZSkge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLm5vZGUgPSBub2RlO1xuICAgIH1cbiAgICBzdGF0aWMgV3JhcChuYW1lLCBub2RlKSB7XG4gICAgICAgIHJldHVybiBuZXcgTmFtZWROb2RlKG5hbWUsIG5vZGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNsYXNzIEluZGV4IHtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBBIHN0YW5kYWxvbmUgY29tcGFyaXNvbiBmdW5jdGlvbiBmb3JcbiAgICAgKiB0aGlzIGluZGV4XG4gICAgICovXG4gICAgZ2V0Q29tcGFyZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcGFyZS5iaW5kKHRoaXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHaXZlbiBhIGJlZm9yZSBhbmQgYWZ0ZXIgdmFsdWUgZm9yIGEgbm9kZSwgZGV0ZXJtaW5lIGlmIHRoZSBpbmRleGVkIHZhbHVlIGhhcyBjaGFuZ2VkLiBFdmVuIGlmIHRoZXkgYXJlIGRpZmZlcmVudCxcbiAgICAgKiBpdCdzIHBvc3NpYmxlIHRoYXQgdGhlIGNoYW5nZXMgYXJlIGlzb2xhdGVkIHRvIHBhcnRzIG9mIHRoZSBzbmFwc2hvdCB0aGF0IGFyZSBub3QgaW5kZXhlZC5cbiAgICAgKlxuICAgICAqXG4gICAgICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgcG9ydGlvbiBvZiB0aGUgc25hcHNob3QgYmVpbmcgaW5kZXhlZCBjaGFuZ2VkIGJldHdlZW4gb2xkTm9kZSBhbmQgbmV3Tm9kZVxuICAgICAqL1xuICAgIGluZGV4ZWRWYWx1ZUNoYW5nZWQob2xkTm9kZSwgbmV3Tm9kZSkge1xuICAgICAgICBjb25zdCBvbGRXcmFwcGVkID0gbmV3IE5hbWVkTm9kZShNSU5fTkFNRSwgb2xkTm9kZSk7XG4gICAgICAgIGNvbnN0IG5ld1dyYXBwZWQgPSBuZXcgTmFtZWROb2RlKE1JTl9OQU1FLCBuZXdOb2RlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcGFyZShvbGRXcmFwcGVkLCBuZXdXcmFwcGVkKSAhPT0gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybnMgYSBub2RlIHdyYXBwZXIgdGhhdCB3aWxsIHNvcnQgZXF1YWwgdG8gb3IgbGVzcyB0aGFuXG4gICAgICogYW55IG90aGVyIG5vZGUgd3JhcHBlciwgdXNpbmcgdGhpcyBpbmRleFxuICAgICAqL1xuICAgIG1pblBvc3QoKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiBOYW1lZE5vZGUuTUlOO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmxldCBfX0VNUFRZX05PREU7XG5jbGFzcyBLZXlJbmRleCBleHRlbmRzIEluZGV4IHtcbiAgICBzdGF0aWMgZ2V0IF9fRU1QVFlfTk9ERSgpIHtcbiAgICAgICAgcmV0dXJuIF9fRU1QVFlfTk9ERTtcbiAgICB9XG4gICAgc3RhdGljIHNldCBfX0VNUFRZX05PREUodmFsKSB7XG4gICAgICAgIF9fRU1QVFlfTk9ERSA9IHZhbDtcbiAgICB9XG4gICAgY29tcGFyZShhLCBiKSB7XG4gICAgICAgIHJldHVybiBuYW1lQ29tcGFyZShhLm5hbWUsIGIubmFtZSk7XG4gICAgfVxuICAgIGlzRGVmaW5lZE9uKG5vZGUpIHtcbiAgICAgICAgLy8gV2UgY291bGQgcHJvYmFibHkgcmV0dXJuIHRydWUgaGVyZSAoc2luY2UgZXZlcnkgbm9kZSBoYXMgYSBrZXkpLCBidXQgaXQncyBuZXZlciBjYWxsZWRcbiAgICAgICAgLy8gc28ganVzdCBsZWF2aW5nIHVuaW1wbGVtZW50ZWQgZm9yIG5vdy5cbiAgICAgICAgdGhyb3cgYXNzZXJ0aW9uRXJyb3IoJ0tleUluZGV4LmlzRGVmaW5lZE9uIG5vdCBleHBlY3RlZCB0byBiZSBjYWxsZWQuJyk7XG4gICAgfVxuICAgIGluZGV4ZWRWYWx1ZUNoYW5nZWQob2xkTm9kZSwgbmV3Tm9kZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7IC8vIFRoZSBrZXkgZm9yIGEgbm9kZSBuZXZlciBjaGFuZ2VzLlxuICAgIH1cbiAgICBtaW5Qb3N0KCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4gTmFtZWROb2RlLk1JTjtcbiAgICB9XG4gICAgbWF4UG9zdCgpIHtcbiAgICAgICAgLy8gVE9ETzogVGhpcyBzaG91bGQgcmVhbGx5IGJlIGNyZWF0ZWQgb25jZSBhbmQgY2FjaGVkIGluIGEgc3RhdGljIHByb3BlcnR5LCBidXRcbiAgICAgICAgLy8gTmFtZWROb2RlIGlzbid0IGRlZmluZWQgeWV0LCBzbyBJIGNhbid0IHVzZSBpdCBpbiBhIHN0YXRpYy4gIEJsZWguXG4gICAgICAgIHJldHVybiBuZXcgTmFtZWROb2RlKE1BWF9OQU1FLCBfX0VNUFRZX05PREUpO1xuICAgIH1cbiAgICBtYWtlUG9zdChpbmRleFZhbHVlLCBuYW1lKSB7XG4gICAgICAgIGFzc2VydCh0eXBlb2YgaW5kZXhWYWx1ZSA9PT0gJ3N0cmluZycsICdLZXlJbmRleCBpbmRleFZhbHVlIG11c3QgYWx3YXlzIGJlIGEgc3RyaW5nLicpO1xuICAgICAgICAvLyBXZSBqdXN0IHVzZSBlbXB0eSBub2RlLCBidXQgaXQnbGwgbmV2ZXIgYmUgY29tcGFyZWQsIHNpbmNlIG91ciBjb21wYXJhdG9yIG9ubHkgbG9va3MgYXQgbmFtZS5cbiAgICAgICAgcmV0dXJuIG5ldyBOYW1lZE5vZGUoaW5kZXhWYWx1ZSwgX19FTVBUWV9OT0RFKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybnMgU3RyaW5nIHJlcHJlc2VudGF0aW9uIGZvciBpbmNsdXNpb24gaW4gYSBxdWVyeSBzcGVjXG4gICAgICovXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiAnLmtleSc7XG4gICAgfVxufVxuY29uc3QgS0VZX0lOREVYID0gbmV3IEtleUluZGV4KCk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGl0ZXJhdG9yIG92ZXIgYW4gTExSQk5vZGUuXG4gKi9cbmNsYXNzIFNvcnRlZE1hcEl0ZXJhdG9yIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gbm9kZSAtIE5vZGUgdG8gaXRlcmF0ZS5cbiAgICAgKiBAcGFyYW0gaXNSZXZlcnNlXyAtIFdoZXRoZXIgb3Igbm90IHRvIGl0ZXJhdGUgaW4gcmV2ZXJzZVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG5vZGUsIHN0YXJ0S2V5LCBjb21wYXJhdG9yLCBpc1JldmVyc2VfLCByZXN1bHRHZW5lcmF0b3JfID0gbnVsbCkge1xuICAgICAgICB0aGlzLmlzUmV2ZXJzZV8gPSBpc1JldmVyc2VfO1xuICAgICAgICB0aGlzLnJlc3VsdEdlbmVyYXRvcl8gPSByZXN1bHRHZW5lcmF0b3JfO1xuICAgICAgICB0aGlzLm5vZGVTdGFja18gPSBbXTtcbiAgICAgICAgbGV0IGNtcCA9IDE7XG4gICAgICAgIHdoaWxlICghbm9kZS5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIG5vZGUgPSBub2RlO1xuICAgICAgICAgICAgY21wID0gc3RhcnRLZXkgPyBjb21wYXJhdG9yKG5vZGUua2V5LCBzdGFydEtleSkgOiAxO1xuICAgICAgICAgICAgLy8gZmxpcCB0aGUgY29tcGFyaXNvbiBpZiB3ZSdyZSBnb2luZyBpbiByZXZlcnNlXG4gICAgICAgICAgICBpZiAoaXNSZXZlcnNlXykge1xuICAgICAgICAgICAgICAgIGNtcCAqPSAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjbXAgPCAwKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBub2RlIGlzIGxlc3MgdGhhbiBvdXIgc3RhcnQga2V5LiBpZ25vcmUgaXRcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1JldmVyc2VfKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLmxlZnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBub2RlID0gbm9kZS5yaWdodDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjbXAgPT09IDApIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIG5vZGUgaXMgZXhhY3RseSBlcXVhbCB0byBvdXIgc3RhcnQga2V5LiBQdXNoIGl0IG9uIHRoZSBzdGFjaywgYnV0IHN0b3AgaXRlcmF0aW5nO1xuICAgICAgICAgICAgICAgIHRoaXMubm9kZVN0YWNrXy5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBub2RlIGlzIGdyZWF0ZXIgdGhhbiBvdXIgc3RhcnQga2V5LCBhZGQgaXQgdG8gdGhlIHN0YWNrIGFuZCBtb3ZlIHRvIHRoZSBuZXh0IG9uZVxuICAgICAgICAgICAgICAgIHRoaXMubm9kZVN0YWNrXy5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzUmV2ZXJzZV8pIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZSA9IG5vZGUucmlnaHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBub2RlID0gbm9kZS5sZWZ0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXROZXh0KCkge1xuICAgICAgICBpZiAodGhpcy5ub2RlU3RhY2tfLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG5vZGUgPSB0aGlzLm5vZGVTdGFja18ucG9wKCk7XG4gICAgICAgIGxldCByZXN1bHQ7XG4gICAgICAgIGlmICh0aGlzLnJlc3VsdEdlbmVyYXRvcl8pIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucmVzdWx0R2VuZXJhdG9yXyhub2RlLmtleSwgbm9kZS52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXN1bHQgPSB7IGtleTogbm9kZS5rZXksIHZhbHVlOiBub2RlLnZhbHVlIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaXNSZXZlcnNlXykge1xuICAgICAgICAgICAgbm9kZSA9IG5vZGUubGVmdDtcbiAgICAgICAgICAgIHdoaWxlICghbm9kZS5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVTdGFja18ucHVzaChub2RlKTtcbiAgICAgICAgICAgICAgICBub2RlID0gbm9kZS5yaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG5vZGUgPSBub2RlLnJpZ2h0O1xuICAgICAgICAgICAgd2hpbGUgKCFub2RlLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMubm9kZVN0YWNrXy5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLmxlZnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgaGFzTmV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZVN0YWNrXy5sZW5ndGggPiAwO1xuICAgIH1cbiAgICBwZWVrKCkge1xuICAgICAgICBpZiAodGhpcy5ub2RlU3RhY2tfLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgbm9kZSA9IHRoaXMubm9kZVN0YWNrX1t0aGlzLm5vZGVTdGFja18ubGVuZ3RoIC0gMV07XG4gICAgICAgIGlmICh0aGlzLnJlc3VsdEdlbmVyYXRvcl8pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlc3VsdEdlbmVyYXRvcl8obm9kZS5rZXksIG5vZGUudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHsga2V5OiBub2RlLmtleSwgdmFsdWU6IG5vZGUudmFsdWUgfTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogUmVwcmVzZW50cyBhIG5vZGUgaW4gYSBMZWZ0LWxlYW5pbmcgUmVkLUJsYWNrIHRyZWUuXG4gKi9cbmNsYXNzIExMUkJOb2RlIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ga2V5IC0gS2V5IGFzc29jaWF0ZWQgd2l0aCB0aGlzIG5vZGUuXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVmFsdWUgYXNzb2NpYXRlZCB3aXRoIHRoaXMgbm9kZS5cbiAgICAgKiBAcGFyYW0gY29sb3IgLSBXaGV0aGVyIHRoaXMgbm9kZSBpcyByZWQuXG4gICAgICogQHBhcmFtIGxlZnQgLSBMZWZ0IGNoaWxkLlxuICAgICAqIEBwYXJhbSByaWdodCAtIFJpZ2h0IGNoaWxkLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGtleSwgdmFsdWUsIGNvbG9yLCBsZWZ0LCByaWdodCkge1xuICAgICAgICB0aGlzLmtleSA9IGtleTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLmNvbG9yID0gY29sb3IgIT0gbnVsbCA/IGNvbG9yIDogTExSQk5vZGUuUkVEO1xuICAgICAgICB0aGlzLmxlZnQgPVxuICAgICAgICAgICAgbGVmdCAhPSBudWxsID8gbGVmdCA6IFNvcnRlZE1hcC5FTVBUWV9OT0RFO1xuICAgICAgICB0aGlzLnJpZ2h0ID1cbiAgICAgICAgICAgIHJpZ2h0ICE9IG51bGwgPyByaWdodCA6IFNvcnRlZE1hcC5FTVBUWV9OT0RFO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgY29weSBvZiB0aGUgY3VycmVudCBub2RlLCBvcHRpb25hbGx5IHJlcGxhY2luZyBwaWVjZXMgb2YgaXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ga2V5IC0gTmV3IGtleSBmb3IgdGhlIG5vZGUsIG9yIG51bGwuXG4gICAgICogQHBhcmFtIHZhbHVlIC0gTmV3IHZhbHVlIGZvciB0aGUgbm9kZSwgb3IgbnVsbC5cbiAgICAgKiBAcGFyYW0gY29sb3IgLSBOZXcgY29sb3IgZm9yIHRoZSBub2RlLCBvciBudWxsLlxuICAgICAqIEBwYXJhbSBsZWZ0IC0gTmV3IGxlZnQgY2hpbGQgZm9yIHRoZSBub2RlLCBvciBudWxsLlxuICAgICAqIEBwYXJhbSByaWdodCAtIE5ldyByaWdodCBjaGlsZCBmb3IgdGhlIG5vZGUsIG9yIG51bGwuXG4gICAgICogQHJldHVybnMgVGhlIG5vZGUgY29weS5cbiAgICAgKi9cbiAgICBjb3B5KGtleSwgdmFsdWUsIGNvbG9yLCBsZWZ0LCByaWdodCkge1xuICAgICAgICByZXR1cm4gbmV3IExMUkJOb2RlKGtleSAhPSBudWxsID8ga2V5IDogdGhpcy5rZXksIHZhbHVlICE9IG51bGwgPyB2YWx1ZSA6IHRoaXMudmFsdWUsIGNvbG9yICE9IG51bGwgPyBjb2xvciA6IHRoaXMuY29sb3IsIGxlZnQgIT0gbnVsbCA/IGxlZnQgOiB0aGlzLmxlZnQsIHJpZ2h0ICE9IG51bGwgPyByaWdodCA6IHRoaXMucmlnaHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBUaGUgdG90YWwgbnVtYmVyIG9mIG5vZGVzIGluIHRoZSB0cmVlLlxuICAgICAqL1xuICAgIGNvdW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sZWZ0LmNvdW50KCkgKyAxICsgdGhpcy5yaWdodC5jb3VudCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBUcnVlIGlmIHRoZSB0cmVlIGlzIGVtcHR5LlxuICAgICAqL1xuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJhdmVyc2VzIHRoZSB0cmVlIGluIGtleSBvcmRlciBhbmQgY2FsbHMgdGhlIHNwZWNpZmllZCBhY3Rpb24gZnVuY3Rpb25cbiAgICAgKiBmb3IgZWFjaCBub2RlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFjdGlvbiAtIENhbGxiYWNrIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBmb3IgZWFjaFxuICAgICAqICAgbm9kZS4gIElmIGl0IHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzIGFib3J0ZWQuXG4gICAgICogQHJldHVybnMgVGhlIGZpcnN0IHRydXRoeSB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24sIG9yIHRoZSBsYXN0IGZhbHNleVxuICAgICAqICAgdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uXG4gICAgICovXG4gICAgaW5vcmRlclRyYXZlcnNhbChhY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmxlZnQuaW5vcmRlclRyYXZlcnNhbChhY3Rpb24pIHx8XG4gICAgICAgICAgICAhIWFjdGlvbih0aGlzLmtleSwgdGhpcy52YWx1ZSkgfHxcbiAgICAgICAgICAgIHRoaXMucmlnaHQuaW5vcmRlclRyYXZlcnNhbChhY3Rpb24pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJhdmVyc2VzIHRoZSB0cmVlIGluIHJldmVyc2Uga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvbiBmdW5jdGlvblxuICAgICAqIGZvciBlYWNoIG5vZGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYWN0aW9uIC0gQ2FsbGJhY2sgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIGZvciBlYWNoXG4gICAgICogbm9kZS4gIElmIGl0IHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzIGFib3J0ZWQuXG4gICAgICogQHJldHVybnMgVHJ1ZSBpZiB0cmF2ZXJzYWwgd2FzIGFib3J0ZWQuXG4gICAgICovXG4gICAgcmV2ZXJzZVRyYXZlcnNhbChhY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLnJpZ2h0LnJldmVyc2VUcmF2ZXJzYWwoYWN0aW9uKSB8fFxuICAgICAgICAgICAgYWN0aW9uKHRoaXMua2V5LCB0aGlzLnZhbHVlKSB8fFxuICAgICAgICAgICAgdGhpcy5sZWZ0LnJldmVyc2VUcmF2ZXJzYWwoYWN0aW9uKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIFRoZSBtaW5pbXVtIG5vZGUgaW4gdGhlIHRyZWUuXG4gICAgICovXG4gICAgbWluXygpIHtcbiAgICAgICAgaWYgKHRoaXMubGVmdC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5taW5fKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybnMgVGhlIG1heGltdW0ga2V5IGluIHRoZSB0cmVlLlxuICAgICAqL1xuICAgIG1pbktleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluXygpLmtleTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybnMgVGhlIG1heGltdW0ga2V5IGluIHRoZSB0cmVlLlxuICAgICAqL1xuICAgIG1heEtleSgpIHtcbiAgICAgICAgaWYgKHRoaXMucmlnaHQuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5rZXk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yaWdodC5tYXhLZXkoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ga2V5IC0gS2V5IHRvIGluc2VydC5cbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBWYWx1ZSB0byBpbnNlcnQuXG4gICAgICogQHBhcmFtIGNvbXBhcmF0b3IgLSBDb21wYXJhdG9yLlxuICAgICAqIEByZXR1cm5zIE5ldyB0cmVlLCB3aXRoIHRoZSBrZXkvdmFsdWUgYWRkZWQuXG4gICAgICovXG4gICAgaW5zZXJ0KGtleSwgdmFsdWUsIGNvbXBhcmF0b3IpIHtcbiAgICAgICAgbGV0IG4gPSB0aGlzO1xuICAgICAgICBjb25zdCBjbXAgPSBjb21wYXJhdG9yKGtleSwgbi5rZXkpO1xuICAgICAgICBpZiAoY21wIDwgMCkge1xuICAgICAgICAgICAgbiA9IG4uY29weShudWxsLCBudWxsLCBudWxsLCBuLmxlZnQuaW5zZXJ0KGtleSwgdmFsdWUsIGNvbXBhcmF0b3IpLCBudWxsKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjbXAgPT09IDApIHtcbiAgICAgICAgICAgIG4gPSBuLmNvcHkobnVsbCwgdmFsdWUsIG51bGwsIG51bGwsIG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbiA9IG4uY29weShudWxsLCBudWxsLCBudWxsLCBudWxsLCBuLnJpZ2h0Lmluc2VydChrZXksIHZhbHVlLCBjb21wYXJhdG9yKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG4uZml4VXBfKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIE5ldyB0cmVlLCB3aXRoIHRoZSBtaW5pbXVtIGtleSByZW1vdmVkLlxuICAgICAqL1xuICAgIHJlbW92ZU1pbl8oKSB7XG4gICAgICAgIGlmICh0aGlzLmxlZnQuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICByZXR1cm4gU29ydGVkTWFwLkVNUFRZX05PREU7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG4gPSB0aGlzO1xuICAgICAgICBpZiAoIW4ubGVmdC5pc1JlZF8oKSAmJiAhbi5sZWZ0LmxlZnQuaXNSZWRfKCkpIHtcbiAgICAgICAgICAgIG4gPSBuLm1vdmVSZWRMZWZ0XygpO1xuICAgICAgICB9XG4gICAgICAgIG4gPSBuLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgbi5sZWZ0LnJlbW92ZU1pbl8oKSwgbnVsbCk7XG4gICAgICAgIHJldHVybiBuLmZpeFVwXygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ga2V5IC0gVGhlIGtleSBvZiB0aGUgaXRlbSB0byByZW1vdmUuXG4gICAgICogQHBhcmFtIGNvbXBhcmF0b3IgLSBDb21wYXJhdG9yLlxuICAgICAqIEByZXR1cm5zIE5ldyB0cmVlLCB3aXRoIHRoZSBzcGVjaWZpZWQgaXRlbSByZW1vdmVkLlxuICAgICAqL1xuICAgIHJlbW92ZShrZXksIGNvbXBhcmF0b3IpIHtcbiAgICAgICAgbGV0IG4sIHNtYWxsZXN0O1xuICAgICAgICBuID0gdGhpcztcbiAgICAgICAgaWYgKGNvbXBhcmF0b3Ioa2V5LCBuLmtleSkgPCAwKSB7XG4gICAgICAgICAgICBpZiAoIW4ubGVmdC5pc0VtcHR5KCkgJiYgIW4ubGVmdC5pc1JlZF8oKSAmJiAhbi5sZWZ0LmxlZnQuaXNSZWRfKCkpIHtcbiAgICAgICAgICAgICAgICBuID0gbi5tb3ZlUmVkTGVmdF8oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG4gPSBuLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgbi5sZWZ0LnJlbW92ZShrZXksIGNvbXBhcmF0b3IpLCBudWxsKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChuLmxlZnQuaXNSZWRfKCkpIHtcbiAgICAgICAgICAgICAgICBuID0gbi5yb3RhdGVSaWdodF8oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghbi5yaWdodC5pc0VtcHR5KCkgJiYgIW4ucmlnaHQuaXNSZWRfKCkgJiYgIW4ucmlnaHQubGVmdC5pc1JlZF8oKSkge1xuICAgICAgICAgICAgICAgIG4gPSBuLm1vdmVSZWRSaWdodF8oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb21wYXJhdG9yKGtleSwgbi5rZXkpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKG4ucmlnaHQuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBTb3J0ZWRNYXAuRU1QVFlfTk9ERTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNtYWxsZXN0ID0gbi5yaWdodC5taW5fKCk7XG4gICAgICAgICAgICAgICAgICAgIG4gPSBuLmNvcHkoc21hbGxlc3Qua2V5LCBzbWFsbGVzdC52YWx1ZSwgbnVsbCwgbnVsbCwgbi5yaWdodC5yZW1vdmVNaW5fKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG4gPSBuLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgbi5yaWdodC5yZW1vdmUoa2V5LCBjb21wYXJhdG9yKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG4uZml4VXBfKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIFdoZXRoZXIgdGhpcyBpcyBhIFJFRCBub2RlLlxuICAgICAqL1xuICAgIGlzUmVkXygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sb3I7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIE5ldyB0cmVlIGFmdGVyIHBlcmZvcm1pbmcgYW55IG5lZWRlZCByb3RhdGlvbnMuXG4gICAgICovXG4gICAgZml4VXBfKCkge1xuICAgICAgICBsZXQgbiA9IHRoaXM7XG4gICAgICAgIGlmIChuLnJpZ2h0LmlzUmVkXygpICYmICFuLmxlZnQuaXNSZWRfKCkpIHtcbiAgICAgICAgICAgIG4gPSBuLnJvdGF0ZUxlZnRfKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG4ubGVmdC5pc1JlZF8oKSAmJiBuLmxlZnQubGVmdC5pc1JlZF8oKSkge1xuICAgICAgICAgICAgbiA9IG4ucm90YXRlUmlnaHRfKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG4ubGVmdC5pc1JlZF8oKSAmJiBuLnJpZ2h0LmlzUmVkXygpKSB7XG4gICAgICAgICAgICBuID0gbi5jb2xvckZsaXBfKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIE5ldyB0cmVlLCBhZnRlciBtb3ZlUmVkTGVmdC5cbiAgICAgKi9cbiAgICBtb3ZlUmVkTGVmdF8oKSB7XG4gICAgICAgIGxldCBuID0gdGhpcy5jb2xvckZsaXBfKCk7XG4gICAgICAgIGlmIChuLnJpZ2h0LmxlZnQuaXNSZWRfKCkpIHtcbiAgICAgICAgICAgIG4gPSBuLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgbi5yaWdodC5yb3RhdGVSaWdodF8oKSk7XG4gICAgICAgICAgICBuID0gbi5yb3RhdGVMZWZ0XygpO1xuICAgICAgICAgICAgbiA9IG4uY29sb3JGbGlwXygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBOZXcgdHJlZSwgYWZ0ZXIgbW92ZVJlZFJpZ2h0LlxuICAgICAqL1xuICAgIG1vdmVSZWRSaWdodF8oKSB7XG4gICAgICAgIGxldCBuID0gdGhpcy5jb2xvckZsaXBfKCk7XG4gICAgICAgIGlmIChuLmxlZnQubGVmdC5pc1JlZF8oKSkge1xuICAgICAgICAgICAgbiA9IG4ucm90YXRlUmlnaHRfKCk7XG4gICAgICAgICAgICBuID0gbi5jb2xvckZsaXBfKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIE5ldyB0cmVlLCBhZnRlciByb3RhdGVMZWZ0LlxuICAgICAqL1xuICAgIHJvdGF0ZUxlZnRfKCkge1xuICAgICAgICBjb25zdCBubCA9IHRoaXMuY29weShudWxsLCBudWxsLCBMTFJCTm9kZS5SRUQsIG51bGwsIHRoaXMucmlnaHQubGVmdCk7XG4gICAgICAgIHJldHVybiB0aGlzLnJpZ2h0LmNvcHkobnVsbCwgbnVsbCwgdGhpcy5jb2xvciwgbmwsIG51bGwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBOZXcgdHJlZSwgYWZ0ZXIgcm90YXRlUmlnaHQuXG4gICAgICovXG4gICAgcm90YXRlUmlnaHRfKCkge1xuICAgICAgICBjb25zdCBuciA9IHRoaXMuY29weShudWxsLCBudWxsLCBMTFJCTm9kZS5SRUQsIHRoaXMubGVmdC5yaWdodCwgbnVsbCk7XG4gICAgICAgIHJldHVybiB0aGlzLmxlZnQuY29weShudWxsLCBudWxsLCB0aGlzLmNvbG9yLCBudWxsLCBucik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIE5ld3QgcmVlLCBhZnRlciBjb2xvckZsaXAuXG4gICAgICovXG4gICAgY29sb3JGbGlwXygpIHtcbiAgICAgICAgY29uc3QgbGVmdCA9IHRoaXMubGVmdC5jb3B5KG51bGwsIG51bGwsICF0aGlzLmxlZnQuY29sb3IsIG51bGwsIG51bGwpO1xuICAgICAgICBjb25zdCByaWdodCA9IHRoaXMucmlnaHQuY29weShudWxsLCBudWxsLCAhdGhpcy5yaWdodC5jb2xvciwgbnVsbCwgbnVsbCk7XG4gICAgICAgIHJldHVybiB0aGlzLmNvcHkobnVsbCwgbnVsbCwgIXRoaXMuY29sb3IsIGxlZnQsIHJpZ2h0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9yIHRlc3RpbmcuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUcnVlIGlmIGFsbCBpcyB3ZWxsLlxuICAgICAqL1xuICAgIGNoZWNrTWF4RGVwdGhfKCkge1xuICAgICAgICBjb25zdCBibGFja0RlcHRoID0gdGhpcy5jaGVja18oKTtcbiAgICAgICAgcmV0dXJuIE1hdGgucG93KDIuMCwgYmxhY2tEZXB0aCkgPD0gdGhpcy5jb3VudCgpICsgMTtcbiAgICB9XG4gICAgY2hlY2tfKCkge1xuICAgICAgICBpZiAodGhpcy5pc1JlZF8oKSAmJiB0aGlzLmxlZnQuaXNSZWRfKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVkIG5vZGUgaGFzIHJlZCBjaGlsZCgnICsgdGhpcy5rZXkgKyAnLCcgKyB0aGlzLnZhbHVlICsgJyknKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5yaWdodC5pc1JlZF8oKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSaWdodCBjaGlsZCBvZiAoJyArIHRoaXMua2V5ICsgJywnICsgdGhpcy52YWx1ZSArICcpIGlzIHJlZCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJsYWNrRGVwdGggPSB0aGlzLmxlZnQuY2hlY2tfKCk7XG4gICAgICAgIGlmIChibGFja0RlcHRoICE9PSB0aGlzLnJpZ2h0LmNoZWNrXygpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0JsYWNrIGRlcHRocyBkaWZmZXInKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBibGFja0RlcHRoICsgKHRoaXMuaXNSZWRfKCkgPyAwIDogMSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5MTFJCTm9kZS5SRUQgPSB0cnVlO1xuTExSQk5vZGUuQkxBQ0sgPSBmYWxzZTtcbi8qKlxuICogUmVwcmVzZW50cyBhbiBlbXB0eSBub2RlIChhIGxlYWYgbm9kZSBpbiB0aGUgUmVkLUJsYWNrIFRyZWUpLlxuICovXG5jbGFzcyBMTFJCRW1wdHlOb2RlIHtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgY29weSBvZiB0aGUgY3VycmVudCBub2RlLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIG5vZGUgY29weS5cbiAgICAgKi9cbiAgICBjb3B5KGtleSwgdmFsdWUsIGNvbG9yLCBsZWZ0LCByaWdodCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGNvcHkgb2YgdGhlIHRyZWUsIHdpdGggdGhlIHNwZWNpZmllZCBrZXkvdmFsdWUgYWRkZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ga2V5IC0gS2V5IHRvIGJlIGFkZGVkLlxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFZhbHVlIHRvIGJlIGFkZGVkLlxuICAgICAqIEBwYXJhbSBjb21wYXJhdG9yIC0gQ29tcGFyYXRvci5cbiAgICAgKiBAcmV0dXJucyBOZXcgdHJlZSwgd2l0aCBpdGVtIGFkZGVkLlxuICAgICAqL1xuICAgIGluc2VydChrZXksIHZhbHVlLCBjb21wYXJhdG9yKSB7XG4gICAgICAgIHJldHVybiBuZXcgTExSQk5vZGUoa2V5LCB2YWx1ZSwgbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBjb3B5IG9mIHRoZSB0cmVlLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IHJlbW92ZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ga2V5IC0gVGhlIGtleSB0byByZW1vdmUuXG4gICAgICogQHBhcmFtIGNvbXBhcmF0b3IgLSBDb21wYXJhdG9yLlxuICAgICAqIEByZXR1cm5zIE5ldyB0cmVlLCB3aXRoIGl0ZW0gcmVtb3ZlZC5cbiAgICAgKi9cbiAgICByZW1vdmUoa2V5LCBjb21wYXJhdG9yKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBUaGUgdG90YWwgbnVtYmVyIG9mIG5vZGVzIGluIHRoZSB0cmVlLlxuICAgICAqL1xuICAgIGNvdW50KCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgdHJlZSBpcyBlbXB0eS5cbiAgICAgKi9cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJhdmVyc2VzIHRoZSB0cmVlIGluIGtleSBvcmRlciBhbmQgY2FsbHMgdGhlIHNwZWNpZmllZCBhY3Rpb24gZnVuY3Rpb25cbiAgICAgKiBmb3IgZWFjaCBub2RlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFjdGlvbiAtIENhbGxiYWNrIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBmb3IgZWFjaFxuICAgICAqIG5vZGUuICBJZiBpdCByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpcyBhYm9ydGVkLlxuICAgICAqIEByZXR1cm5zIFRydWUgaWYgdHJhdmVyc2FsIHdhcyBhYm9ydGVkLlxuICAgICAqL1xuICAgIGlub3JkZXJUcmF2ZXJzYWwoYWN0aW9uKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJhdmVyc2VzIHRoZSB0cmVlIGluIHJldmVyc2Uga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvbiBmdW5jdGlvblxuICAgICAqIGZvciBlYWNoIG5vZGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYWN0aW9uIC0gQ2FsbGJhY2sgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIGZvciBlYWNoXG4gICAgICogbm9kZS4gIElmIGl0IHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzIGFib3J0ZWQuXG4gICAgICogQHJldHVybnMgVHJ1ZSBpZiB0cmF2ZXJzYWwgd2FzIGFib3J0ZWQuXG4gICAgICovXG4gICAgcmV2ZXJzZVRyYXZlcnNhbChhY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBtaW5LZXkoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBtYXhLZXkoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjaGVja18oKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIHRoaXMgbm9kZSBpcyByZWQuXG4gICAgICovXG4gICAgaXNSZWRfKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuLyoqXG4gKiBBbiBpbW11dGFibGUgc29ydGVkIG1hcCBpbXBsZW1lbnRhdGlvbiwgYmFzZWQgb24gYSBMZWZ0LWxlYW5pbmcgUmVkLUJsYWNrXG4gKiB0cmVlLlxuICovXG5jbGFzcyBTb3J0ZWRNYXAge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBjb21wYXJhdG9yXyAtIEtleSBjb21wYXJhdG9yLlxuICAgICAqIEBwYXJhbSByb290XyAtIE9wdGlvbmFsIHJvb3Qgbm9kZSBmb3IgdGhlIG1hcC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihjb21wYXJhdG9yXywgcm9vdF8gPSBTb3J0ZWRNYXAuRU1QVFlfTk9ERSkge1xuICAgICAgICB0aGlzLmNvbXBhcmF0b3JfID0gY29tcGFyYXRvcl87XG4gICAgICAgIHRoaXMucm9vdF8gPSByb290XztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGNvcHkgb2YgdGhlIG1hcCwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleS92YWx1ZSBhZGRlZCBvciByZXBsYWNlZC5cbiAgICAgKiAoVE9ETzogV2Ugc2hvdWxkIHBlcmhhcHMgcmVuYW1lIHRoaXMgbWV0aG9kIHRvICdwdXQnKVxuICAgICAqXG4gICAgICogQHBhcmFtIGtleSAtIEtleSB0byBiZSBhZGRlZC5cbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBWYWx1ZSB0byBiZSBhZGRlZC5cbiAgICAgKiBAcmV0dXJucyBOZXcgbWFwLCB3aXRoIGl0ZW0gYWRkZWQuXG4gICAgICovXG4gICAgaW5zZXJ0KGtleSwgdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTb3J0ZWRNYXAodGhpcy5jb21wYXJhdG9yXywgdGhpcy5yb290X1xuICAgICAgICAgICAgLmluc2VydChrZXksIHZhbHVlLCB0aGlzLmNvbXBhcmF0b3JfKVxuICAgICAgICAgICAgLmNvcHkobnVsbCwgbnVsbCwgTExSQk5vZGUuQkxBQ0ssIG51bGwsIG51bGwpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGNvcHkgb2YgdGhlIG1hcCwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleSByZW1vdmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGtleSAtIFRoZSBrZXkgdG8gcmVtb3ZlLlxuICAgICAqIEByZXR1cm5zIE5ldyBtYXAsIHdpdGggaXRlbSByZW1vdmVkLlxuICAgICAqL1xuICAgIHJlbW92ZShrZXkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTb3J0ZWRNYXAodGhpcy5jb21wYXJhdG9yXywgdGhpcy5yb290X1xuICAgICAgICAgICAgLnJlbW92ZShrZXksIHRoaXMuY29tcGFyYXRvcl8pXG4gICAgICAgICAgICAuY29weShudWxsLCBudWxsLCBMTFJCTm9kZS5CTEFDSywgbnVsbCwgbnVsbCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGUgbm9kZSB3aXRoIHRoZSBnaXZlbiBrZXksIG9yIG51bGwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ga2V5IC0gVGhlIGtleSB0byBsb29rIHVwLlxuICAgICAqIEByZXR1cm5zIFRoZSB2YWx1ZSBvZiB0aGUgbm9kZSB3aXRoIHRoZSBnaXZlbiBrZXksIG9yIG51bGwgaWYgdGhlXG4gICAgICoga2V5IGRvZXNuJ3QgZXhpc3QuXG4gICAgICovXG4gICAgZ2V0KGtleSkge1xuICAgICAgICBsZXQgY21wO1xuICAgICAgICBsZXQgbm9kZSA9IHRoaXMucm9vdF87XG4gICAgICAgIHdoaWxlICghbm9kZS5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIGNtcCA9IHRoaXMuY29tcGFyYXRvcl8oa2V5LCBub2RlLmtleSk7XG4gICAgICAgICAgICBpZiAoY21wID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGUudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjbXAgPCAwKSB7XG4gICAgICAgICAgICAgICAgbm9kZSA9IG5vZGUubGVmdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA+IDApIHtcbiAgICAgICAgICAgICAgICBub2RlID0gbm9kZS5yaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUga2V5IG9mIHRoZSBpdGVtICpiZWZvcmUqIHRoZSBzcGVjaWZpZWQga2V5LCBvciBudWxsIGlmIGtleSBpcyB0aGUgZmlyc3QgaXRlbS5cbiAgICAgKiBAcGFyYW0ga2V5IC0gVGhlIGtleSB0byBmaW5kIHRoZSBwcmVkZWNlc3NvciBvZlxuICAgICAqIEByZXR1cm5zIFRoZSBwcmVkZWNlc3NvciBrZXkuXG4gICAgICovXG4gICAgZ2V0UHJlZGVjZXNzb3JLZXkoa2V5KSB7XG4gICAgICAgIGxldCBjbXAsIG5vZGUgPSB0aGlzLnJvb3RfLCByaWdodFBhcmVudCA9IG51bGw7XG4gICAgICAgIHdoaWxlICghbm9kZS5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIGNtcCA9IHRoaXMuY29tcGFyYXRvcl8oa2V5LCBub2RlLmtleSk7XG4gICAgICAgICAgICBpZiAoY21wID09PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFub2RlLmxlZnQuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLmxlZnQ7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICghbm9kZS5yaWdodC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLnJpZ2h0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBub2RlLmtleTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocmlnaHRQYXJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJpZ2h0UGFyZW50LmtleTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOyAvLyBmaXJzdCBpdGVtLlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA8IDApIHtcbiAgICAgICAgICAgICAgICBub2RlID0gbm9kZS5sZWZ0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY21wID4gMCkge1xuICAgICAgICAgICAgICAgIHJpZ2h0UGFyZW50ID0gbm9kZTtcbiAgICAgICAgICAgICAgICBub2RlID0gbm9kZS5yaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0F0dGVtcHRlZCB0byBmaW5kIHByZWRlY2Vzc29yIGtleSBmb3IgYSBub25leGlzdGVudCBrZXkuICBXaGF0IGdpdmVzPycpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBUcnVlIGlmIHRoZSBtYXAgaXMgZW1wdHkuXG4gICAgICovXG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdF8uaXNFbXB0eSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBUaGUgdG90YWwgbnVtYmVyIG9mIG5vZGVzIGluIHRoZSBtYXAuXG4gICAgICovXG4gICAgY291bnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3RfLmNvdW50KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIFRoZSBtaW5pbXVtIGtleSBpbiB0aGUgbWFwLlxuICAgICAqL1xuICAgIG1pbktleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdF8ubWluS2V5KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIFRoZSBtYXhpbXVtIGtleSBpbiB0aGUgbWFwLlxuICAgICAqL1xuICAgIG1heEtleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdF8ubWF4S2V5KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyYXZlcnNlcyB0aGUgbWFwIGluIGtleSBvcmRlciBhbmQgY2FsbHMgdGhlIHNwZWNpZmllZCBhY3Rpb24gZnVuY3Rpb25cbiAgICAgKiBmb3IgZWFjaCBrZXkvdmFsdWUgcGFpci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhY3Rpb24gLSBDYWxsYmFjayBmdW5jdGlvbiB0byBiZSBjYWxsZWRcbiAgICAgKiBmb3IgZWFjaCBrZXkvdmFsdWUgcGFpci4gIElmIGFjdGlvbiByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpcyBhYm9ydGVkLlxuICAgICAqIEByZXR1cm5zIFRoZSBmaXJzdCB0cnV0aHkgdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLCBvciB0aGUgbGFzdCBmYWxzZXlcbiAgICAgKiAgIHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvblxuICAgICAqL1xuICAgIGlub3JkZXJUcmF2ZXJzYWwoYWN0aW9uKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3RfLmlub3JkZXJUcmF2ZXJzYWwoYWN0aW9uKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJhdmVyc2VzIHRoZSBtYXAgaW4gcmV2ZXJzZSBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uIGZ1bmN0aW9uXG4gICAgICogZm9yIGVhY2gga2V5L3ZhbHVlIHBhaXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYWN0aW9uIC0gQ2FsbGJhY2sgZnVuY3Rpb24gdG8gYmUgY2FsbGVkXG4gICAgICogZm9yIGVhY2gga2V5L3ZhbHVlIHBhaXIuICBJZiBhY3Rpb24gcmV0dXJucyB0cnVlLCB0cmF2ZXJzYWwgaXMgYWJvcnRlZC5cbiAgICAgKiBAcmV0dXJucyBUcnVlIGlmIHRoZSB0cmF2ZXJzYWwgd2FzIGFib3J0ZWQuXG4gICAgICovXG4gICAgcmV2ZXJzZVRyYXZlcnNhbChhY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdF8ucmV2ZXJzZVRyYXZlcnNhbChhY3Rpb24pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGl0ZXJhdG9yIG92ZXIgdGhlIFNvcnRlZE1hcC5cbiAgICAgKiBAcmV0dXJucyBUaGUgaXRlcmF0b3IuXG4gICAgICovXG4gICAgZ2V0SXRlcmF0b3IocmVzdWx0R2VuZXJhdG9yKSB7XG4gICAgICAgIHJldHVybiBuZXcgU29ydGVkTWFwSXRlcmF0b3IodGhpcy5yb290XywgbnVsbCwgdGhpcy5jb21wYXJhdG9yXywgZmFsc2UsIHJlc3VsdEdlbmVyYXRvcik7XG4gICAgfVxuICAgIGdldEl0ZXJhdG9yRnJvbShrZXksIHJlc3VsdEdlbmVyYXRvcikge1xuICAgICAgICByZXR1cm4gbmV3IFNvcnRlZE1hcEl0ZXJhdG9yKHRoaXMucm9vdF8sIGtleSwgdGhpcy5jb21wYXJhdG9yXywgZmFsc2UsIHJlc3VsdEdlbmVyYXRvcik7XG4gICAgfVxuICAgIGdldFJldmVyc2VJdGVyYXRvckZyb20oa2V5LCByZXN1bHRHZW5lcmF0b3IpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTb3J0ZWRNYXBJdGVyYXRvcih0aGlzLnJvb3RfLCBrZXksIHRoaXMuY29tcGFyYXRvcl8sIHRydWUsIHJlc3VsdEdlbmVyYXRvcik7XG4gICAgfVxuICAgIGdldFJldmVyc2VJdGVyYXRvcihyZXN1bHRHZW5lcmF0b3IpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTb3J0ZWRNYXBJdGVyYXRvcih0aGlzLnJvb3RfLCBudWxsLCB0aGlzLmNvbXBhcmF0b3JfLCB0cnVlLCByZXN1bHRHZW5lcmF0b3IpO1xuICAgIH1cbn1cbi8qKlxuICogQWx3YXlzIHVzZSB0aGUgc2FtZSBlbXB0eSBub2RlLCB0byByZWR1Y2UgbWVtb3J5LlxuICovXG5Tb3J0ZWRNYXAuRU1QVFlfTk9ERSA9IG5ldyBMTFJCRW1wdHlOb2RlKCk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5mdW5jdGlvbiBOQU1FX09OTFlfQ09NUEFSQVRPUihsZWZ0LCByaWdodCkge1xuICAgIHJldHVybiBuYW1lQ29tcGFyZShsZWZ0Lm5hbWUsIHJpZ2h0Lm5hbWUpO1xufVxuZnVuY3Rpb24gTkFNRV9DT01QQVJBVE9SKGxlZnQsIHJpZ2h0KSB7XG4gICAgcmV0dXJuIG5hbWVDb21wYXJlKGxlZnQsIHJpZ2h0KTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmxldCBNQVhfTk9ERSQyO1xuZnVuY3Rpb24gc2V0TWF4Tm9kZSQxKHZhbCkge1xuICAgIE1BWF9OT0RFJDIgPSB2YWw7XG59XG5jb25zdCBwcmlvcml0eUhhc2hUZXh0ID0gZnVuY3Rpb24gKHByaW9yaXR5KSB7XG4gICAgaWYgKHR5cGVvZiBwcmlvcml0eSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgcmV0dXJuICdudW1iZXI6JyArIGRvdWJsZVRvSUVFRTc1NFN0cmluZyhwcmlvcml0eSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gJ3N0cmluZzonICsgcHJpb3JpdHk7XG4gICAgfVxufTtcbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgYSBwcmlvcml0eSBzbmFwc2hvdCBOb2RlIGlzIHZhbGlkLlxuICovXG5jb25zdCB2YWxpZGF0ZVByaW9yaXR5Tm9kZSA9IGZ1bmN0aW9uIChwcmlvcml0eU5vZGUpIHtcbiAgICBpZiAocHJpb3JpdHlOb2RlLmlzTGVhZk5vZGUoKSkge1xuICAgICAgICBjb25zdCB2YWwgPSBwcmlvcml0eU5vZGUudmFsKCk7XG4gICAgICAgIGFzc2VydCh0eXBlb2YgdmFsID09PSAnc3RyaW5nJyB8fFxuICAgICAgICAgICAgdHlwZW9mIHZhbCA9PT0gJ251bWJlcicgfHxcbiAgICAgICAgICAgICh0eXBlb2YgdmFsID09PSAnb2JqZWN0JyAmJiBjb250YWlucyh2YWwsICcuc3YnKSksICdQcmlvcml0eSBtdXN0IGJlIGEgc3RyaW5nIG9yIG51bWJlci4nKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGFzc2VydChwcmlvcml0eU5vZGUgPT09IE1BWF9OT0RFJDIgfHwgcHJpb3JpdHlOb2RlLmlzRW1wdHkoKSwgJ3ByaW9yaXR5IG9mIHVuZXhwZWN0ZWQgdHlwZS4nKTtcbiAgICB9XG4gICAgLy8gRG9uJ3QgY2FsbCBnZXRQcmlvcml0eSgpIG9uIE1BWF9OT0RFIHRvIGF2b2lkIGhpdHRpbmcgYXNzZXJ0aW9uLlxuICAgIGFzc2VydChwcmlvcml0eU5vZGUgPT09IE1BWF9OT0RFJDIgfHwgcHJpb3JpdHlOb2RlLmdldFByaW9yaXR5KCkuaXNFbXB0eSgpLCBcIlByaW9yaXR5IG5vZGVzIGNhbid0IGhhdmUgYSBwcmlvcml0eSBvZiB0aGVpciBvd24uXCIpO1xufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmxldCBfX2NoaWxkcmVuTm9kZUNvbnN0cnVjdG9yO1xuLyoqXG4gKiBMZWFmTm9kZSBpcyBhIGNsYXNzIGZvciBzdG9yaW5nIGxlYWYgbm9kZXMgaW4gYSBEYXRhU25hcHNob3QuICBJdFxuICogaW1wbGVtZW50cyBOb2RlIGFuZCBzdG9yZXMgdGhlIHZhbHVlIG9mIHRoZSBub2RlIChhIHN0cmluZyxcbiAqIG51bWJlciwgb3IgYm9vbGVhbikgYWNjZXNzaWJsZSB2aWEgZ2V0VmFsdWUoKS5cbiAqL1xuY2xhc3MgTGVhZk5vZGUge1xuICAgIHN0YXRpYyBzZXQgX19jaGlsZHJlbk5vZGVDb25zdHJ1Y3Rvcih2YWwpIHtcbiAgICAgICAgX19jaGlsZHJlbk5vZGVDb25zdHJ1Y3RvciA9IHZhbDtcbiAgICB9XG4gICAgc3RhdGljIGdldCBfX2NoaWxkcmVuTm9kZUNvbnN0cnVjdG9yKCkge1xuICAgICAgICByZXR1cm4gX19jaGlsZHJlbk5vZGVDb25zdHJ1Y3RvcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHZhbHVlXyAtIFRoZSB2YWx1ZSB0byBzdG9yZSBpbiB0aGlzIGxlYWYgbm9kZS4gVGhlIG9iamVjdCB0eXBlIGlzXG4gICAgICogcG9zc2libGUgaW4gdGhlIGV2ZW50IG9mIGEgZGVmZXJyZWQgdmFsdWVcbiAgICAgKiBAcGFyYW0gcHJpb3JpdHlOb2RlXyAtIFRoZSBwcmlvcml0eSBvZiB0aGlzIG5vZGUuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodmFsdWVfLCBwcmlvcml0eU5vZGVfID0gTGVhZk5vZGUuX19jaGlsZHJlbk5vZGVDb25zdHJ1Y3Rvci5FTVBUWV9OT0RFKSB7XG4gICAgICAgIHRoaXMudmFsdWVfID0gdmFsdWVfO1xuICAgICAgICB0aGlzLnByaW9yaXR5Tm9kZV8gPSBwcmlvcml0eU5vZGVfO1xuICAgICAgICB0aGlzLmxhenlIYXNoXyA9IG51bGw7XG4gICAgICAgIGFzc2VydCh0aGlzLnZhbHVlXyAhPT0gdW5kZWZpbmVkICYmIHRoaXMudmFsdWVfICE9PSBudWxsLCBcIkxlYWZOb2RlIHNob3VsZG4ndCBiZSBjcmVhdGVkIHdpdGggbnVsbC91bmRlZmluZWQgdmFsdWUuXCIpO1xuICAgICAgICB2YWxpZGF0ZVByaW9yaXR5Tm9kZSh0aGlzLnByaW9yaXR5Tm9kZV8pO1xuICAgIH1cbiAgICAvKiogQGluaGVyaXREb2MgKi9cbiAgICBpc0xlYWZOb2RlKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLyoqIEBpbmhlcml0RG9jICovXG4gICAgZ2V0UHJpb3JpdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaW9yaXR5Tm9kZV87XG4gICAgfVxuICAgIC8qKiBAaW5oZXJpdERvYyAqL1xuICAgIHVwZGF0ZVByaW9yaXR5KG5ld1ByaW9yaXR5Tm9kZSkge1xuICAgICAgICByZXR1cm4gbmV3IExlYWZOb2RlKHRoaXMudmFsdWVfLCBuZXdQcmlvcml0eU5vZGUpO1xuICAgIH1cbiAgICAvKiogQGluaGVyaXREb2MgKi9cbiAgICBnZXRJbW1lZGlhdGVDaGlsZChjaGlsZE5hbWUpIHtcbiAgICAgICAgLy8gSGFjayB0byB0cmVhdCBwcmlvcml0eSBhcyBhIHJlZ3VsYXIgY2hpbGRcbiAgICAgICAgaWYgKGNoaWxkTmFtZSA9PT0gJy5wcmlvcml0eScpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaW9yaXR5Tm9kZV87XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gTGVhZk5vZGUuX19jaGlsZHJlbk5vZGVDb25zdHJ1Y3Rvci5FTVBUWV9OT0RFO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBAaW5oZXJpdERvYyAqL1xuICAgIGdldENoaWxkKHBhdGgpIHtcbiAgICAgICAgaWYgKHBhdGhJc0VtcHR5KHBhdGgpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwYXRoR2V0RnJvbnQocGF0aCkgPT09ICcucHJpb3JpdHknKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcmlvcml0eU5vZGVfO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIExlYWZOb2RlLl9fY2hpbGRyZW5Ob2RlQ29uc3RydWN0b3IuRU1QVFlfTk9ERTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYXNDaGlsZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvKiogQGluaGVyaXREb2MgKi9cbiAgICBnZXRQcmVkZWNlc3NvckNoaWxkTmFtZShjaGlsZE5hbWUsIGNoaWxkTm9kZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLyoqIEBpbmhlcml0RG9jICovXG4gICAgdXBkYXRlSW1tZWRpYXRlQ2hpbGQoY2hpbGROYW1lLCBuZXdDaGlsZE5vZGUpIHtcbiAgICAgICAgaWYgKGNoaWxkTmFtZSA9PT0gJy5wcmlvcml0eScpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZVByaW9yaXR5KG5ld0NoaWxkTm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobmV3Q2hpbGROb2RlLmlzRW1wdHkoKSAmJiBjaGlsZE5hbWUgIT09ICcucHJpb3JpdHknKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBMZWFmTm9kZS5fX2NoaWxkcmVuTm9kZUNvbnN0cnVjdG9yLkVNUFRZX05PREUudXBkYXRlSW1tZWRpYXRlQ2hpbGQoY2hpbGROYW1lLCBuZXdDaGlsZE5vZGUpLnVwZGF0ZVByaW9yaXR5KHRoaXMucHJpb3JpdHlOb2RlXyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEBpbmhlcml0RG9jICovXG4gICAgdXBkYXRlQ2hpbGQocGF0aCwgbmV3Q2hpbGROb2RlKSB7XG4gICAgICAgIGNvbnN0IGZyb250ID0gcGF0aEdldEZyb250KHBhdGgpO1xuICAgICAgICBpZiAoZnJvbnQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXdDaGlsZE5vZGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobmV3Q2hpbGROb2RlLmlzRW1wdHkoKSAmJiBmcm9udCAhPT0gJy5wcmlvcml0eScpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXNzZXJ0KGZyb250ICE9PSAnLnByaW9yaXR5JyB8fCBwYXRoR2V0TGVuZ3RoKHBhdGgpID09PSAxLCAnLnByaW9yaXR5IG11c3QgYmUgdGhlIGxhc3QgdG9rZW4gaW4gYSBwYXRoJyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVJbW1lZGlhdGVDaGlsZChmcm9udCwgTGVhZk5vZGUuX19jaGlsZHJlbk5vZGVDb25zdHJ1Y3Rvci5FTVBUWV9OT0RFLnVwZGF0ZUNoaWxkKHBhdGhQb3BGcm9udChwYXRoKSwgbmV3Q2hpbGROb2RlKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEBpbmhlcml0RG9jICovXG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvKiogQGluaGVyaXREb2MgKi9cbiAgICBudW1DaGlsZHJlbigpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIC8qKiBAaW5oZXJpdERvYyAqL1xuICAgIGZvckVhY2hDaGlsZChpbmRleCwgYWN0aW9uKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdmFsKGV4cG9ydEZvcm1hdCkge1xuICAgICAgICBpZiAoZXhwb3J0Rm9ybWF0ICYmICF0aGlzLmdldFByaW9yaXR5KCkuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICcudmFsdWUnOiB0aGlzLmdldFZhbHVlKCksXG4gICAgICAgICAgICAgICAgJy5wcmlvcml0eSc6IHRoaXMuZ2V0UHJpb3JpdHkoKS52YWwoKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFZhbHVlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEBpbmhlcml0RG9jICovXG4gICAgaGFzaCgpIHtcbiAgICAgICAgaWYgKHRoaXMubGF6eUhhc2hfID09PSBudWxsKSB7XG4gICAgICAgICAgICBsZXQgdG9IYXNoID0gJyc7XG4gICAgICAgICAgICBpZiAoIXRoaXMucHJpb3JpdHlOb2RlXy5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICB0b0hhc2ggKz1cbiAgICAgICAgICAgICAgICAgICAgJ3ByaW9yaXR5OicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJpb3JpdHlIYXNoVGV4dCh0aGlzLnByaW9yaXR5Tm9kZV8udmFsKCkpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICc6JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSB0eXBlb2YgdGhpcy52YWx1ZV87XG4gICAgICAgICAgICB0b0hhc2ggKz0gdHlwZSArICc6JztcbiAgICAgICAgICAgIGlmICh0eXBlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgIHRvSGFzaCArPSBkb3VibGVUb0lFRUU3NTRTdHJpbmcodGhpcy52YWx1ZV8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdG9IYXNoICs9IHRoaXMudmFsdWVfO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5sYXp5SGFzaF8gPSBzaGExKHRvSGFzaCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMubGF6eUhhc2hfO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGUgbGVhZiBub2RlLlxuICAgICAqIEByZXR1cm5zIFRoZSB2YWx1ZSBvZiB0aGUgbm9kZS5cbiAgICAgKi9cbiAgICBnZXRWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVfO1xuICAgIH1cbiAgICBjb21wYXJlVG8ob3RoZXIpIHtcbiAgICAgICAgaWYgKG90aGVyID09PSBMZWFmTm9kZS5fX2NoaWxkcmVuTm9kZUNvbnN0cnVjdG9yLkVNUFRZX05PREUpIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG90aGVyIGluc3RhbmNlb2YgTGVhZk5vZGUuX19jaGlsZHJlbk5vZGVDb25zdHJ1Y3Rvcikge1xuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXNzZXJ0KG90aGVyLmlzTGVhZk5vZGUoKSwgJ1Vua25vd24gbm9kZSB0eXBlJyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb21wYXJlVG9MZWFmTm9kZV8ob3RoZXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbXBhcmlzb24gc3BlY2lmaWNhbGx5IGZvciB0d28gbGVhZiBub2Rlc1xuICAgICAqL1xuICAgIGNvbXBhcmVUb0xlYWZOb2RlXyhvdGhlckxlYWYpIHtcbiAgICAgICAgY29uc3Qgb3RoZXJMZWFmVHlwZSA9IHR5cGVvZiBvdGhlckxlYWYudmFsdWVfO1xuICAgICAgICBjb25zdCB0aGlzTGVhZlR5cGUgPSB0eXBlb2YgdGhpcy52YWx1ZV87XG4gICAgICAgIGNvbnN0IG90aGVySW5kZXggPSBMZWFmTm9kZS5WQUxVRV9UWVBFX09SREVSLmluZGV4T2Yob3RoZXJMZWFmVHlwZSk7XG4gICAgICAgIGNvbnN0IHRoaXNJbmRleCA9IExlYWZOb2RlLlZBTFVFX1RZUEVfT1JERVIuaW5kZXhPZih0aGlzTGVhZlR5cGUpO1xuICAgICAgICBhc3NlcnQob3RoZXJJbmRleCA+PSAwLCAnVW5rbm93biBsZWFmIHR5cGU6ICcgKyBvdGhlckxlYWZUeXBlKTtcbiAgICAgICAgYXNzZXJ0KHRoaXNJbmRleCA+PSAwLCAnVW5rbm93biBsZWFmIHR5cGU6ICcgKyB0aGlzTGVhZlR5cGUpO1xuICAgICAgICBpZiAob3RoZXJJbmRleCA9PT0gdGhpc0luZGV4KSB7XG4gICAgICAgICAgICAvLyBTYW1lIHR5cGUsIGNvbXBhcmUgdmFsdWVzXG4gICAgICAgICAgICBpZiAodGhpc0xlYWZUeXBlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIC8vIERlZmVycmVkIHZhbHVlIG5vZGVzIGFyZSBhbGwgZXF1YWwsIGJ1dCB3ZSBzaG91bGQgYWxzbyBuZXZlciBnZXQgdG8gdGhpcyBwb2ludC4uLlxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gTm90ZSB0aGF0IHRoaXMgd29ya3MgYmVjYXVzZSB0cnVlID4gZmFsc2UsIGFsbCBvdGhlcnMgYXJlIG51bWJlciBvciBzdHJpbmcgY29tcGFyaXNvbnNcbiAgICAgICAgICAgICAgICBpZiAodGhpcy52YWx1ZV8gPCBvdGhlckxlYWYudmFsdWVfKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy52YWx1ZV8gPT09IG90aGVyTGVhZi52YWx1ZV8pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpc0luZGV4IC0gb3RoZXJJbmRleDtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3aXRoSW5kZXgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBpc0luZGV4ZWQoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBlcXVhbHMob3RoZXIpIHtcbiAgICAgICAgaWYgKG90aGVyID09PSB0aGlzKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvdGhlci5pc0xlYWZOb2RlKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IG90aGVyTGVhZiA9IG90aGVyO1xuICAgICAgICAgICAgcmV0dXJuICh0aGlzLnZhbHVlXyA9PT0gb3RoZXJMZWFmLnZhbHVlXyAmJlxuICAgICAgICAgICAgICAgIHRoaXMucHJpb3JpdHlOb2RlXy5lcXVhbHMob3RoZXJMZWFmLnByaW9yaXR5Tm9kZV8pKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogVGhlIHNvcnQgb3JkZXIgZm9yIGNvbXBhcmluZyBsZWFmIG5vZGVzIG9mIGRpZmZlcmVudCB0eXBlcy4gSWYgdHdvIGxlYWYgbm9kZXMgaGF2ZVxuICogdGhlIHNhbWUgdHlwZSwgdGhlIGNvbXBhcmlzb24gZmFsbHMgYmFjayB0byB0aGVpciB2YWx1ZVxuICovXG5MZWFmTm9kZS5WQUxVRV9UWVBFX09SREVSID0gWydvYmplY3QnLCAnYm9vbGVhbicsICdudW1iZXInLCAnc3RyaW5nJ107XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5sZXQgbm9kZUZyb21KU09OJDE7XG5sZXQgTUFYX05PREUkMTtcbmZ1bmN0aW9uIHNldE5vZGVGcm9tSlNPTih2YWwpIHtcbiAgICBub2RlRnJvbUpTT04kMSA9IHZhbDtcbn1cbmZ1bmN0aW9uIHNldE1heE5vZGUodmFsKSB7XG4gICAgTUFYX05PREUkMSA9IHZhbDtcbn1cbmNsYXNzIFByaW9yaXR5SW5kZXggZXh0ZW5kcyBJbmRleCB7XG4gICAgY29tcGFyZShhLCBiKSB7XG4gICAgICAgIGNvbnN0IGFQcmlvcml0eSA9IGEubm9kZS5nZXRQcmlvcml0eSgpO1xuICAgICAgICBjb25zdCBiUHJpb3JpdHkgPSBiLm5vZGUuZ2V0UHJpb3JpdHkoKTtcbiAgICAgICAgY29uc3QgaW5kZXhDbXAgPSBhUHJpb3JpdHkuY29tcGFyZVRvKGJQcmlvcml0eSk7XG4gICAgICAgIGlmIChpbmRleENtcCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG5hbWVDb21wYXJlKGEubmFtZSwgYi5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBpbmRleENtcDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpc0RlZmluZWRPbihub2RlKSB7XG4gICAgICAgIHJldHVybiAhbm9kZS5nZXRQcmlvcml0eSgpLmlzRW1wdHkoKTtcbiAgICB9XG4gICAgaW5kZXhlZFZhbHVlQ2hhbmdlZChvbGROb2RlLCBuZXdOb2RlKSB7XG4gICAgICAgIHJldHVybiAhb2xkTm9kZS5nZXRQcmlvcml0eSgpLmVxdWFscyhuZXdOb2RlLmdldFByaW9yaXR5KCkpO1xuICAgIH1cbiAgICBtaW5Qb3N0KCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4gTmFtZWROb2RlLk1JTjtcbiAgICB9XG4gICAgbWF4UG9zdCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBOYW1lZE5vZGUoTUFYX05BTUUsIG5ldyBMZWFmTm9kZSgnW1BSSU9SSVRZLVBPU1RdJywgTUFYX05PREUkMSkpO1xuICAgIH1cbiAgICBtYWtlUG9zdChpbmRleFZhbHVlLCBuYW1lKSB7XG4gICAgICAgIGNvbnN0IHByaW9yaXR5Tm9kZSA9IG5vZGVGcm9tSlNPTiQxKGluZGV4VmFsdWUpO1xuICAgICAgICByZXR1cm4gbmV3IE5hbWVkTm9kZShuYW1lLCBuZXcgTGVhZk5vZGUoJ1tQUklPUklUWS1QT1NUXScsIHByaW9yaXR5Tm9kZSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBTdHJpbmcgcmVwcmVzZW50YXRpb24gZm9yIGluY2x1c2lvbiBpbiBhIHF1ZXJ5IHNwZWNcbiAgICAgKi9cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuICcucHJpb3JpdHknO1xuICAgIH1cbn1cbmNvbnN0IFBSSU9SSVRZX0lOREVYID0gbmV3IFByaW9yaXR5SW5kZXgoKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNvbnN0IExPR18yID0gTWF0aC5sb2coMik7XG5jbGFzcyBCYXNlMTJOdW0ge1xuICAgIGNvbnN0cnVjdG9yKGxlbmd0aCkge1xuICAgICAgICBjb25zdCBsb2dCYXNlMiA9IChudW0pID0+IFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBwYXJzZUludCgoTWF0aC5sb2cobnVtKSAvIExPR18yKSwgMTApO1xuICAgICAgICBjb25zdCBiaXRNYXNrID0gKGJpdHMpID0+IHBhcnNlSW50KEFycmF5KGJpdHMgKyAxKS5qb2luKCcxJyksIDIpO1xuICAgICAgICB0aGlzLmNvdW50ID0gbG9nQmFzZTIobGVuZ3RoICsgMSk7XG4gICAgICAgIHRoaXMuY3VycmVudF8gPSB0aGlzLmNvdW50IC0gMTtcbiAgICAgICAgY29uc3QgbWFzayA9IGJpdE1hc2sodGhpcy5jb3VudCk7XG4gICAgICAgIHRoaXMuYml0c18gPSAobGVuZ3RoICsgMSkgJiBtYXNrO1xuICAgIH1cbiAgICBuZXh0Qml0SXNPbmUoKSB7XG4gICAgICAgIC8vbm9pbnNwZWN0aW9uIEpTQml0d2lzZU9wZXJhdG9yVXNhZ2VcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gISh0aGlzLmJpdHNfICYgKDB4MSA8PCB0aGlzLmN1cnJlbnRfKSk7XG4gICAgICAgIHRoaXMuY3VycmVudF8tLTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG59XG4vKipcbiAqIFRha2VzIGEgbGlzdCBvZiBjaGlsZCBub2RlcyBhbmQgY29uc3RydWN0cyBhIFNvcnRlZFNldCB1c2luZyB0aGUgZ2l2ZW4gY29tcGFyaXNvblxuICogZnVuY3Rpb25cbiAqXG4gKiBVc2VzIHRoZSBhbGdvcml0aG0gZGVzY3JpYmVkIGluIHRoZSBwYXBlciBsaW5rZWQgaGVyZTpcbiAqIGh0dHA6Ly9jaXRlc2VlcnguaXN0LnBzdS5lZHUvdmlld2RvYy9zdW1tYXJ5P2RvaT0xMC4xLjEuNDYuMTQ1OFxuICpcbiAqIEBwYXJhbSBjaGlsZExpc3QgLSBVbnNvcnRlZCBsaXN0IG9mIGNoaWxkcmVuXG4gKiBAcGFyYW0gY21wIC0gVGhlIGNvbXBhcmlzb24gbWV0aG9kIHRvIGJlIHVzZWRcbiAqIEBwYXJhbSBrZXlGbiAtIEFuIG9wdGlvbmFsIGZ1bmN0aW9uIHRvIGV4dHJhY3QgSyBmcm9tIGEgbm9kZSB3cmFwcGVyLCBpZiBLJ3NcbiAqIHR5cGUgaXMgbm90IE5hbWVkTm9kZVxuICogQHBhcmFtIG1hcFNvcnRGbiAtIEFuIG9wdGlvbmFsIG92ZXJyaWRlIGZvciBjb21wYXJhdG9yIHVzZWQgYnkgdGhlIGdlbmVyYXRlZCBzb3J0ZWQgbWFwXG4gKi9cbmNvbnN0IGJ1aWxkQ2hpbGRTZXQgPSBmdW5jdGlvbiAoY2hpbGRMaXN0LCBjbXAsIGtleUZuLCBtYXBTb3J0Rm4pIHtcbiAgICBjaGlsZExpc3Quc29ydChjbXApO1xuICAgIGNvbnN0IGJ1aWxkQmFsYW5jZWRUcmVlID0gZnVuY3Rpb24gKGxvdywgaGlnaCkge1xuICAgICAgICBjb25zdCBsZW5ndGggPSBoaWdoIC0gbG93O1xuICAgICAgICBsZXQgbmFtZWROb2RlO1xuICAgICAgICBsZXQga2V5O1xuICAgICAgICBpZiAobGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIG5hbWVkTm9kZSA9IGNoaWxkTGlzdFtsb3ddO1xuICAgICAgICAgICAga2V5ID0ga2V5Rm4gPyBrZXlGbihuYW1lZE5vZGUpIDogbmFtZWROb2RlO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBMTFJCTm9kZShrZXksIG5hbWVkTm9kZS5ub2RlLCBMTFJCTm9kZS5CTEFDSywgbnVsbCwgbnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgY29uc3QgbWlkZGxlID0gcGFyc2VJbnQoKGxlbmd0aCAvIDIpLCAxMCkgKyBsb3c7XG4gICAgICAgICAgICBjb25zdCBsZWZ0ID0gYnVpbGRCYWxhbmNlZFRyZWUobG93LCBtaWRkbGUpO1xuICAgICAgICAgICAgY29uc3QgcmlnaHQgPSBidWlsZEJhbGFuY2VkVHJlZShtaWRkbGUgKyAxLCBoaWdoKTtcbiAgICAgICAgICAgIG5hbWVkTm9kZSA9IGNoaWxkTGlzdFttaWRkbGVdO1xuICAgICAgICAgICAga2V5ID0ga2V5Rm4gPyBrZXlGbihuYW1lZE5vZGUpIDogbmFtZWROb2RlO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBMTFJCTm9kZShrZXksIG5hbWVkTm9kZS5ub2RlLCBMTFJCTm9kZS5CTEFDSywgbGVmdCwgcmlnaHQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBidWlsZEZyb20xMkFycmF5ID0gZnVuY3Rpb24gKGJhc2UxMikge1xuICAgICAgICBsZXQgbm9kZSA9IG51bGw7XG4gICAgICAgIGxldCByb290ID0gbnVsbDtcbiAgICAgICAgbGV0IGluZGV4ID0gY2hpbGRMaXN0Lmxlbmd0aDtcbiAgICAgICAgY29uc3QgYnVpbGRQZW5uYW50ID0gZnVuY3Rpb24gKGNodW5rU2l6ZSwgY29sb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IGxvdyA9IGluZGV4IC0gY2h1bmtTaXplO1xuICAgICAgICAgICAgY29uc3QgaGlnaCA9IGluZGV4O1xuICAgICAgICAgICAgaW5kZXggLT0gY2h1bmtTaXplO1xuICAgICAgICAgICAgY29uc3QgY2hpbGRUcmVlID0gYnVpbGRCYWxhbmNlZFRyZWUobG93ICsgMSwgaGlnaCk7XG4gICAgICAgICAgICBjb25zdCBuYW1lZE5vZGUgPSBjaGlsZExpc3RbbG93XTtcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IGtleUZuID8ga2V5Rm4obmFtZWROb2RlKSA6IG5hbWVkTm9kZTtcbiAgICAgICAgICAgIGF0dGFjaFBlbm5hbnQobmV3IExMUkJOb2RlKGtleSwgbmFtZWROb2RlLm5vZGUsIGNvbG9yLCBudWxsLCBjaGlsZFRyZWUpKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgYXR0YWNoUGVubmFudCA9IGZ1bmN0aW9uIChwZW5uYW50KSB7XG4gICAgICAgICAgICBpZiAobm9kZSkge1xuICAgICAgICAgICAgICAgIG5vZGUubGVmdCA9IHBlbm5hbnQ7XG4gICAgICAgICAgICAgICAgbm9kZSA9IHBlbm5hbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByb290ID0gcGVubmFudDtcbiAgICAgICAgICAgICAgICBub2RlID0gcGVubmFudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiYXNlMTIuY291bnQ7ICsraSkge1xuICAgICAgICAgICAgY29uc3QgaXNPbmUgPSBiYXNlMTIubmV4dEJpdElzT25lKCk7XG4gICAgICAgICAgICAvLyBUaGUgbnVtYmVyIG9mIG5vZGVzIHRha2VuIGluIGVhY2ggc2xpY2UgaXMgMl4oYXJyLmxlbmd0aCAtIChpICsgMSkpXG4gICAgICAgICAgICBjb25zdCBjaHVua1NpemUgPSBNYXRoLnBvdygyLCBiYXNlMTIuY291bnQgLSAoaSArIDEpKTtcbiAgICAgICAgICAgIGlmIChpc09uZSkge1xuICAgICAgICAgICAgICAgIGJ1aWxkUGVubmFudChjaHVua1NpemUsIExMUkJOb2RlLkJMQUNLKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGN1cnJlbnQgPT0gMlxuICAgICAgICAgICAgICAgIGJ1aWxkUGVubmFudChjaHVua1NpemUsIExMUkJOb2RlLkJMQUNLKTtcbiAgICAgICAgICAgICAgICBidWlsZFBlbm5hbnQoY2h1bmtTaXplLCBMTFJCTm9kZS5SRUQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByb290O1xuICAgIH07XG4gICAgY29uc3QgYmFzZTEyID0gbmV3IEJhc2UxMk51bShjaGlsZExpc3QubGVuZ3RoKTtcbiAgICBjb25zdCByb290ID0gYnVpbGRGcm9tMTJBcnJheShiYXNlMTIpO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgcmV0dXJuIG5ldyBTb3J0ZWRNYXAobWFwU29ydEZuIHx8IGNtcCwgcm9vdCk7XG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xubGV0IF9kZWZhdWx0SW5kZXhNYXA7XG5jb25zdCBmYWxsYmFja09iamVjdCA9IHt9O1xuY2xhc3MgSW5kZXhNYXAge1xuICAgIC8qKlxuICAgICAqIFRoZSBkZWZhdWx0IEluZGV4TWFwIGZvciBub2RlcyB3aXRob3V0IGEgcHJpb3JpdHlcbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0IERlZmF1bHQoKSB7XG4gICAgICAgIGFzc2VydChmYWxsYmFja09iamVjdCAmJiBQUklPUklUWV9JTkRFWCwgJ0NoaWxkcmVuTm9kZS50cyBoYXMgbm90IGJlZW4gbG9hZGVkJyk7XG4gICAgICAgIF9kZWZhdWx0SW5kZXhNYXAgPVxuICAgICAgICAgICAgX2RlZmF1bHRJbmRleE1hcCB8fFxuICAgICAgICAgICAgICAgIG5ldyBJbmRleE1hcCh7ICcucHJpb3JpdHknOiBmYWxsYmFja09iamVjdCB9LCB7ICcucHJpb3JpdHknOiBQUklPUklUWV9JTkRFWCB9KTtcbiAgICAgICAgcmV0dXJuIF9kZWZhdWx0SW5kZXhNYXA7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGluZGV4ZXNfLCBpbmRleFNldF8pIHtcbiAgICAgICAgdGhpcy5pbmRleGVzXyA9IGluZGV4ZXNfO1xuICAgICAgICB0aGlzLmluZGV4U2V0XyA9IGluZGV4U2V0XztcbiAgICB9XG4gICAgZ2V0KGluZGV4S2V5KSB7XG4gICAgICAgIGNvbnN0IHNvcnRlZE1hcCA9IHNhZmVHZXQodGhpcy5pbmRleGVzXywgaW5kZXhLZXkpO1xuICAgICAgICBpZiAoIXNvcnRlZE1hcCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBpbmRleCBkZWZpbmVkIGZvciAnICsgaW5kZXhLZXkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzb3J0ZWRNYXAgaW5zdGFuY2VvZiBTb3J0ZWRNYXApIHtcbiAgICAgICAgICAgIHJldHVybiBzb3J0ZWRNYXA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBUaGUgaW5kZXggZXhpc3RzLCBidXQgaXQgZmFsbHMgYmFjayB0byBqdXN0IG5hbWUgY29tcGFyaXNvbi4gUmV0dXJuIG51bGwgc28gdGhhdCB0aGUgY2FsbGluZyBjb2RlIHVzZXMgdGhlXG4gICAgICAgICAgICAvLyByZWd1bGFyIGNoaWxkIG1hcFxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFzSW5kZXgoaW5kZXhEZWZpbml0aW9uKSB7XG4gICAgICAgIHJldHVybiBjb250YWlucyh0aGlzLmluZGV4U2V0XywgaW5kZXhEZWZpbml0aW9uLnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgICBhZGRJbmRleChpbmRleERlZmluaXRpb24sIGV4aXN0aW5nQ2hpbGRyZW4pIHtcbiAgICAgICAgYXNzZXJ0KGluZGV4RGVmaW5pdGlvbiAhPT0gS0VZX0lOREVYLCBcIktleUluZGV4IGFsd2F5cyBleGlzdHMgYW5kIGlzbid0IG1lYW50IHRvIGJlIGFkZGVkIHRvIHRoZSBJbmRleE1hcC5cIik7XG4gICAgICAgIGNvbnN0IGNoaWxkTGlzdCA9IFtdO1xuICAgICAgICBsZXQgc2F3SW5kZXhlZFZhbHVlID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IGl0ZXIgPSBleGlzdGluZ0NoaWxkcmVuLmdldEl0ZXJhdG9yKE5hbWVkTm9kZS5XcmFwKTtcbiAgICAgICAgbGV0IG5leHQgPSBpdGVyLmdldE5leHQoKTtcbiAgICAgICAgd2hpbGUgKG5leHQpIHtcbiAgICAgICAgICAgIHNhd0luZGV4ZWRWYWx1ZSA9XG4gICAgICAgICAgICAgICAgc2F3SW5kZXhlZFZhbHVlIHx8IGluZGV4RGVmaW5pdGlvbi5pc0RlZmluZWRPbihuZXh0Lm5vZGUpO1xuICAgICAgICAgICAgY2hpbGRMaXN0LnB1c2gobmV4dCk7XG4gICAgICAgICAgICBuZXh0ID0gaXRlci5nZXROZXh0KCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG5ld0luZGV4O1xuICAgICAgICBpZiAoc2F3SW5kZXhlZFZhbHVlKSB7XG4gICAgICAgICAgICBuZXdJbmRleCA9IGJ1aWxkQ2hpbGRTZXQoY2hpbGRMaXN0LCBpbmRleERlZmluaXRpb24uZ2V0Q29tcGFyZSgpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG5ld0luZGV4ID0gZmFsbGJhY2tPYmplY3Q7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW5kZXhOYW1lID0gaW5kZXhEZWZpbml0aW9uLnRvU3RyaW5nKCk7XG4gICAgICAgIGNvbnN0IG5ld0luZGV4U2V0ID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5pbmRleFNldF8pO1xuICAgICAgICBuZXdJbmRleFNldFtpbmRleE5hbWVdID0gaW5kZXhEZWZpbml0aW9uO1xuICAgICAgICBjb25zdCBuZXdJbmRleGVzID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5pbmRleGVzXyk7XG4gICAgICAgIG5ld0luZGV4ZXNbaW5kZXhOYW1lXSA9IG5ld0luZGV4O1xuICAgICAgICByZXR1cm4gbmV3IEluZGV4TWFwKG5ld0luZGV4ZXMsIG5ld0luZGV4U2V0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5zdXJlIHRoYXQgdGhpcyBub2RlIGlzIHByb3Blcmx5IHRyYWNrZWQgaW4gYW55IGluZGV4ZXMgdGhhdCB3ZSdyZSBtYWludGFpbmluZ1xuICAgICAqL1xuICAgIGFkZFRvSW5kZXhlcyhuYW1lZE5vZGUsIGV4aXN0aW5nQ2hpbGRyZW4pIHtcbiAgICAgICAgY29uc3QgbmV3SW5kZXhlcyA9IG1hcCh0aGlzLmluZGV4ZXNfLCAoaW5kZXhlZENoaWxkcmVuLCBpbmRleE5hbWUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gc2FmZUdldCh0aGlzLmluZGV4U2V0XywgaW5kZXhOYW1lKTtcbiAgICAgICAgICAgIGFzc2VydChpbmRleCwgJ01pc3NpbmcgaW5kZXggaW1wbGVtZW50YXRpb24gZm9yICcgKyBpbmRleE5hbWUpO1xuICAgICAgICAgICAgaWYgKGluZGV4ZWRDaGlsZHJlbiA9PT0gZmFsbGJhY2tPYmplY3QpIHtcbiAgICAgICAgICAgICAgICAvLyBDaGVjayB0byBzZWUgaWYgd2UgbmVlZCB0byBpbmRleCBldmVyeXRoaW5nXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4LmlzRGVmaW5lZE9uKG5hbWVkTm9kZS5ub2RlKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIGJ1aWxkIHRoaXMgaW5kZXhcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hpbGRMaXN0ID0gW107XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGl0ZXIgPSBleGlzdGluZ0NoaWxkcmVuLmdldEl0ZXJhdG9yKE5hbWVkTm9kZS5XcmFwKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5leHQgPSBpdGVyLmdldE5leHQoKTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKG5leHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0Lm5hbWUgIT09IG5hbWVkTm9kZS5uYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRMaXN0LnB1c2gobmV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0ID0gaXRlci5nZXROZXh0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2hpbGRMaXN0LnB1c2gobmFtZWROb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJ1aWxkQ2hpbGRTZXQoY2hpbGRMaXN0LCBpbmRleC5nZXRDb21wYXJlKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gTm8gY2hhbmdlLCB0aGlzIHJlbWFpbnMgYSBmYWxsYmFja1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsbGJhY2tPYmplY3Q7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdTbmFwID0gZXhpc3RpbmdDaGlsZHJlbi5nZXQobmFtZWROb2RlLm5hbWUpO1xuICAgICAgICAgICAgICAgIGxldCBuZXdDaGlsZHJlbiA9IGluZGV4ZWRDaGlsZHJlbjtcbiAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdTbmFwKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld0NoaWxkcmVuID0gbmV3Q2hpbGRyZW4ucmVtb3ZlKG5ldyBOYW1lZE5vZGUobmFtZWROb2RlLm5hbWUsIGV4aXN0aW5nU25hcCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3Q2hpbGRyZW4uaW5zZXJ0KG5hbWVkTm9kZSwgbmFtZWROb2RlLm5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG5ldyBJbmRleE1hcChuZXdJbmRleGVzLCB0aGlzLmluZGV4U2V0Xyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBJbmRleE1hcCBpbnN0YW5jZSB3aXRoIHRoZSBnaXZlbiB2YWx1ZSByZW1vdmVkXG4gICAgICovXG4gICAgcmVtb3ZlRnJvbUluZGV4ZXMobmFtZWROb2RlLCBleGlzdGluZ0NoaWxkcmVuKSB7XG4gICAgICAgIGNvbnN0IG5ld0luZGV4ZXMgPSBtYXAodGhpcy5pbmRleGVzXywgKGluZGV4ZWRDaGlsZHJlbikgPT4ge1xuICAgICAgICAgICAgaWYgKGluZGV4ZWRDaGlsZHJlbiA9PT0gZmFsbGJhY2tPYmplY3QpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIHRoZSBmYWxsYmFjay4gSnVzdCByZXR1cm4gaXQsIG5vdGhpbmcgdG8gZG8gaW4gdGhpcyBjYXNlXG4gICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4ZWRDaGlsZHJlbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nU25hcCA9IGV4aXN0aW5nQ2hpbGRyZW4uZ2V0KG5hbWVkTm9kZS5uYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdTbmFwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpbmRleGVkQ2hpbGRyZW4ucmVtb3ZlKG5ldyBOYW1lZE5vZGUobmFtZWROb2RlLm5hbWUsIGV4aXN0aW5nU25hcCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gTm8gcmVjb3JkIG9mIHRoaXMgY2hpbGRcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4ZWRDaGlsZHJlbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbmV3IEluZGV4TWFwKG5ld0luZGV4ZXMsIHRoaXMuaW5kZXhTZXRfKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBUT0RPOiBGb3IgbWVtb3J5IHNhdmluZ3MsIGRvbid0IHN0b3JlIHByaW9yaXR5Tm9kZV8gaWYgaXQncyBlbXB0eS5cbmxldCBFTVBUWV9OT0RFO1xuLyoqXG4gKiBDaGlsZHJlbk5vZGUgaXMgYSBjbGFzcyBmb3Igc3RvcmluZyBpbnRlcm5hbCBub2RlcyBpbiBhIERhdGFTbmFwc2hvdFxuICogKGkuZS4gbm9kZXMgd2l0aCBjaGlsZHJlbikuICBJdCBpbXBsZW1lbnRzIE5vZGUgYW5kIHN0b3JlcyB0aGVcbiAqIGxpc3Qgb2YgY2hpbGRyZW4gaW4gdGhlIGNoaWxkcmVuIHByb3BlcnR5LCBzb3J0ZWQgYnkgY2hpbGQgbmFtZS5cbiAqL1xuY2xhc3MgQ2hpbGRyZW5Ob2RlIHtcbiAgICBzdGF0aWMgZ2V0IEVNUFRZX05PREUoKSB7XG4gICAgICAgIHJldHVybiAoRU1QVFlfTk9ERSB8fFxuICAgICAgICAgICAgKEVNUFRZX05PREUgPSBuZXcgQ2hpbGRyZW5Ob2RlKG5ldyBTb3J0ZWRNYXAoTkFNRV9DT01QQVJBVE9SKSwgbnVsbCwgSW5kZXhNYXAuRGVmYXVsdCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGNoaWxkcmVuXyAtIExpc3Qgb2YgY2hpbGRyZW4gb2YgdGhpcyBub2RlLi5cbiAgICAgKiBAcGFyYW0gcHJpb3JpdHlOb2RlXyAtIFRoZSBwcmlvcml0eSBvZiB0aGlzIG5vZGUgKGFzIGEgc25hcHNob3Qgbm9kZSkuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoY2hpbGRyZW5fLCBwcmlvcml0eU5vZGVfLCBpbmRleE1hcF8pIHtcbiAgICAgICAgdGhpcy5jaGlsZHJlbl8gPSBjaGlsZHJlbl87XG4gICAgICAgIHRoaXMucHJpb3JpdHlOb2RlXyA9IHByaW9yaXR5Tm9kZV87XG4gICAgICAgIHRoaXMuaW5kZXhNYXBfID0gaW5kZXhNYXBfO1xuICAgICAgICB0aGlzLmxhenlIYXNoXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBOb3RlOiBUaGUgb25seSByZWFzb24gd2UgYWxsb3cgbnVsbCBwcmlvcml0eSBpcyBmb3IgRU1QVFlfTk9ERSwgc2luY2Ugd2UgY2FuJ3QgdXNlXG4gICAgICAgICAqIEVNUFRZX05PREUgYXMgdGhlIHByaW9yaXR5IG9mIEVNUFRZX05PREUuICBXZSBtaWdodCB3YW50IHRvIGNvbnNpZGVyIG1ha2luZyBFTVBUWV9OT0RFIGl0cyBvd25cbiAgICAgICAgICogY2xhc3MgaW5zdGVhZCBvZiBhbiBlbXB0eSBDaGlsZHJlbk5vZGUuXG4gICAgICAgICAqL1xuICAgICAgICBpZiAodGhpcy5wcmlvcml0eU5vZGVfKSB7XG4gICAgICAgICAgICB2YWxpZGF0ZVByaW9yaXR5Tm9kZSh0aGlzLnByaW9yaXR5Tm9kZV8pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNoaWxkcmVuXy5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIGFzc2VydCghdGhpcy5wcmlvcml0eU5vZGVfIHx8IHRoaXMucHJpb3JpdHlOb2RlXy5pc0VtcHR5KCksICdBbiBlbXB0eSBub2RlIGNhbm5vdCBoYXZlIGEgcHJpb3JpdHknKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogQGluaGVyaXREb2MgKi9cbiAgICBpc0xlYWZOb2RlKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8qKiBAaW5oZXJpdERvYyAqL1xuICAgIGdldFByaW9yaXR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcmlvcml0eU5vZGVfIHx8IEVNUFRZX05PREU7XG4gICAgfVxuICAgIC8qKiBAaW5oZXJpdERvYyAqL1xuICAgIHVwZGF0ZVByaW9yaXR5KG5ld1ByaW9yaXR5Tm9kZSkge1xuICAgICAgICBpZiAodGhpcy5jaGlsZHJlbl8uaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAvLyBEb24ndCBhbGxvdyBwcmlvcml0aWVzIG9uIGVtcHR5IG5vZGVzXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2hpbGRyZW5Ob2RlKHRoaXMuY2hpbGRyZW5fLCBuZXdQcmlvcml0eU5vZGUsIHRoaXMuaW5kZXhNYXBfKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogQGluaGVyaXREb2MgKi9cbiAgICBnZXRJbW1lZGlhdGVDaGlsZChjaGlsZE5hbWUpIHtcbiAgICAgICAgLy8gSGFjayB0byB0cmVhdCBwcmlvcml0eSBhcyBhIHJlZ3VsYXIgY2hpbGRcbiAgICAgICAgaWYgKGNoaWxkTmFtZSA9PT0gJy5wcmlvcml0eScpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFByaW9yaXR5KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBjaGlsZCA9IHRoaXMuY2hpbGRyZW5fLmdldChjaGlsZE5hbWUpO1xuICAgICAgICAgICAgcmV0dXJuIGNoaWxkID09PSBudWxsID8gRU1QVFlfTk9ERSA6IGNoaWxkO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBAaW5oZXJpdERvYyAqL1xuICAgIGdldENoaWxkKHBhdGgpIHtcbiAgICAgICAgY29uc3QgZnJvbnQgPSBwYXRoR2V0RnJvbnQocGF0aCk7XG4gICAgICAgIGlmIChmcm9udCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SW1tZWRpYXRlQ2hpbGQoZnJvbnQpLmdldENoaWxkKHBhdGhQb3BGcm9udChwYXRoKSk7XG4gICAgfVxuICAgIC8qKiBAaW5oZXJpdERvYyAqL1xuICAgIGhhc0NoaWxkKGNoaWxkTmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGlsZHJlbl8uZ2V0KGNoaWxkTmFtZSkgIT09IG51bGw7XG4gICAgfVxuICAgIC8qKiBAaW5oZXJpdERvYyAqL1xuICAgIHVwZGF0ZUltbWVkaWF0ZUNoaWxkKGNoaWxkTmFtZSwgbmV3Q2hpbGROb2RlKSB7XG4gICAgICAgIGFzc2VydChuZXdDaGlsZE5vZGUsICdXZSBzaG91bGQgYWx3YXlzIGJlIHBhc3Npbmcgc25hcHNob3Qgbm9kZXMnKTtcbiAgICAgICAgaWYgKGNoaWxkTmFtZSA9PT0gJy5wcmlvcml0eScpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZVByaW9yaXR5KG5ld0NoaWxkTm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBuYW1lZE5vZGUgPSBuZXcgTmFtZWROb2RlKGNoaWxkTmFtZSwgbmV3Q2hpbGROb2RlKTtcbiAgICAgICAgICAgIGxldCBuZXdDaGlsZHJlbiwgbmV3SW5kZXhNYXA7XG4gICAgICAgICAgICBpZiAobmV3Q2hpbGROb2RlLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIG5ld0NoaWxkcmVuID0gdGhpcy5jaGlsZHJlbl8ucmVtb3ZlKGNoaWxkTmFtZSk7XG4gICAgICAgICAgICAgICAgbmV3SW5kZXhNYXAgPSB0aGlzLmluZGV4TWFwXy5yZW1vdmVGcm9tSW5kZXhlcyhuYW1lZE5vZGUsIHRoaXMuY2hpbGRyZW5fKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ld0NoaWxkcmVuID0gdGhpcy5jaGlsZHJlbl8uaW5zZXJ0KGNoaWxkTmFtZSwgbmV3Q2hpbGROb2RlKTtcbiAgICAgICAgICAgICAgICBuZXdJbmRleE1hcCA9IHRoaXMuaW5kZXhNYXBfLmFkZFRvSW5kZXhlcyhuYW1lZE5vZGUsIHRoaXMuY2hpbGRyZW5fKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG5ld1ByaW9yaXR5ID0gbmV3Q2hpbGRyZW4uaXNFbXB0eSgpXG4gICAgICAgICAgICAgICAgPyBFTVBUWV9OT0RFXG4gICAgICAgICAgICAgICAgOiB0aGlzLnByaW9yaXR5Tm9kZV87XG4gICAgICAgICAgICByZXR1cm4gbmV3IENoaWxkcmVuTm9kZShuZXdDaGlsZHJlbiwgbmV3UHJpb3JpdHksIG5ld0luZGV4TWFwKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogQGluaGVyaXREb2MgKi9cbiAgICB1cGRhdGVDaGlsZChwYXRoLCBuZXdDaGlsZE5vZGUpIHtcbiAgICAgICAgY29uc3QgZnJvbnQgPSBwYXRoR2V0RnJvbnQocGF0aCk7XG4gICAgICAgIGlmIChmcm9udCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ld0NoaWxkTm9kZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGFzc2VydChwYXRoR2V0RnJvbnQocGF0aCkgIT09ICcucHJpb3JpdHknIHx8IHBhdGhHZXRMZW5ndGgocGF0aCkgPT09IDEsICcucHJpb3JpdHkgbXVzdCBiZSB0aGUgbGFzdCB0b2tlbiBpbiBhIHBhdGgnKTtcbiAgICAgICAgICAgIGNvbnN0IG5ld0ltbWVkaWF0ZUNoaWxkID0gdGhpcy5nZXRJbW1lZGlhdGVDaGlsZChmcm9udCkudXBkYXRlQ2hpbGQocGF0aFBvcEZyb250KHBhdGgpLCBuZXdDaGlsZE5vZGUpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlSW1tZWRpYXRlQ2hpbGQoZnJvbnQsIG5ld0ltbWVkaWF0ZUNoaWxkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogQGluaGVyaXREb2MgKi9cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGlsZHJlbl8uaXNFbXB0eSgpO1xuICAgIH1cbiAgICAvKiogQGluaGVyaXREb2MgKi9cbiAgICBudW1DaGlsZHJlbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hpbGRyZW5fLmNvdW50KCk7XG4gICAgfVxuICAgIC8qKiBAaW5oZXJpdERvYyAqL1xuICAgIHZhbChleHBvcnRGb3JtYXQpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbGV0IG51bUtleXMgPSAwLCBtYXhLZXkgPSAwLCBhbGxJbnRlZ2VyS2V5cyA9IHRydWU7XG4gICAgICAgIHRoaXMuZm9yRWFjaENoaWxkKFBSSU9SSVRZX0lOREVYLCAoa2V5LCBjaGlsZE5vZGUpID0+IHtcbiAgICAgICAgICAgIG9ialtrZXldID0gY2hpbGROb2RlLnZhbChleHBvcnRGb3JtYXQpO1xuICAgICAgICAgICAgbnVtS2V5cysrO1xuICAgICAgICAgICAgaWYgKGFsbEludGVnZXJLZXlzICYmIENoaWxkcmVuTm9kZS5JTlRFR0VSX1JFR0VYUF8udGVzdChrZXkpKSB7XG4gICAgICAgICAgICAgICAgbWF4S2V5ID0gTWF0aC5tYXgobWF4S2V5LCBOdW1iZXIoa2V5KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhbGxJbnRlZ2VyS2V5cyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFleHBvcnRGb3JtYXQgJiYgYWxsSW50ZWdlcktleXMgJiYgbWF4S2V5IDwgMiAqIG51bUtleXMpIHtcbiAgICAgICAgICAgIC8vIGNvbnZlcnQgdG8gYXJyYXkuXG4gICAgICAgICAgICBjb25zdCBhcnJheSA9IFtdO1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGd1YXJkLWZvci1pblxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XG4gICAgICAgICAgICAgICAgYXJyYXlba2V5XSA9IG9ialtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGFycmF5O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGV4cG9ydEZvcm1hdCAmJiAhdGhpcy5nZXRQcmlvcml0eSgpLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIG9ialsnLnByaW9yaXR5J10gPSB0aGlzLmdldFByaW9yaXR5KCkudmFsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBAaW5oZXJpdERvYyAqL1xuICAgIGhhc2goKSB7XG4gICAgICAgIGlmICh0aGlzLmxhenlIYXNoXyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgbGV0IHRvSGFzaCA9ICcnO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmdldFByaW9yaXR5KCkuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgdG9IYXNoICs9XG4gICAgICAgICAgICAgICAgICAgICdwcmlvcml0eTonICtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaW9yaXR5SGFzaFRleHQodGhpcy5nZXRQcmlvcml0eSgpLnZhbCgpKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAnOic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmZvckVhY2hDaGlsZChQUklPUklUWV9JTkRFWCwgKGtleSwgY2hpbGROb2RlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hpbGRIYXNoID0gY2hpbGROb2RlLmhhc2goKTtcbiAgICAgICAgICAgICAgICBpZiAoY2hpbGRIYXNoICE9PSAnJykge1xuICAgICAgICAgICAgICAgICAgICB0b0hhc2ggKz0gJzonICsga2V5ICsgJzonICsgY2hpbGRIYXNoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5sYXp5SGFzaF8gPSB0b0hhc2ggPT09ICcnID8gJycgOiBzaGExKHRvSGFzaCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMubGF6eUhhc2hfO1xuICAgIH1cbiAgICAvKiogQGluaGVyaXREb2MgKi9cbiAgICBnZXRQcmVkZWNlc3NvckNoaWxkTmFtZShjaGlsZE5hbWUsIGNoaWxkTm9kZSwgaW5kZXgpIHtcbiAgICAgICAgY29uc3QgaWR4ID0gdGhpcy5yZXNvbHZlSW5kZXhfKGluZGV4KTtcbiAgICAgICAgaWYgKGlkeCkge1xuICAgICAgICAgICAgY29uc3QgcHJlZGVjZXNzb3IgPSBpZHguZ2V0UHJlZGVjZXNzb3JLZXkobmV3IE5hbWVkTm9kZShjaGlsZE5hbWUsIGNoaWxkTm9kZSkpO1xuICAgICAgICAgICAgcmV0dXJuIHByZWRlY2Vzc29yID8gcHJlZGVjZXNzb3IubmFtZSA6IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jaGlsZHJlbl8uZ2V0UHJlZGVjZXNzb3JLZXkoY2hpbGROYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRGaXJzdENoaWxkTmFtZShpbmRleERlZmluaXRpb24pIHtcbiAgICAgICAgY29uc3QgaWR4ID0gdGhpcy5yZXNvbHZlSW5kZXhfKGluZGV4RGVmaW5pdGlvbik7XG4gICAgICAgIGlmIChpZHgpIHtcbiAgICAgICAgICAgIGNvbnN0IG1pbktleSA9IGlkeC5taW5LZXkoKTtcbiAgICAgICAgICAgIHJldHVybiBtaW5LZXkgJiYgbWluS2V5Lm5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jaGlsZHJlbl8ubWluS2V5KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0Rmlyc3RDaGlsZChpbmRleERlZmluaXRpb24pIHtcbiAgICAgICAgY29uc3QgbWluS2V5ID0gdGhpcy5nZXRGaXJzdENoaWxkTmFtZShpbmRleERlZmluaXRpb24pO1xuICAgICAgICBpZiAobWluS2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE5hbWVkTm9kZShtaW5LZXksIHRoaXMuY2hpbGRyZW5fLmdldChtaW5LZXkpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdpdmVuIGFuIGluZGV4LCByZXR1cm4gdGhlIGtleSBuYW1lIG9mIHRoZSBsYXJnZXN0IHZhbHVlIHdlIGhhdmUsIGFjY29yZGluZyB0byB0aGF0IGluZGV4XG4gICAgICovXG4gICAgZ2V0TGFzdENoaWxkTmFtZShpbmRleERlZmluaXRpb24pIHtcbiAgICAgICAgY29uc3QgaWR4ID0gdGhpcy5yZXNvbHZlSW5kZXhfKGluZGV4RGVmaW5pdGlvbik7XG4gICAgICAgIGlmIChpZHgpIHtcbiAgICAgICAgICAgIGNvbnN0IG1heEtleSA9IGlkeC5tYXhLZXkoKTtcbiAgICAgICAgICAgIHJldHVybiBtYXhLZXkgJiYgbWF4S2V5Lm5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jaGlsZHJlbl8ubWF4S2V5KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0TGFzdENoaWxkKGluZGV4RGVmaW5pdGlvbikge1xuICAgICAgICBjb25zdCBtYXhLZXkgPSB0aGlzLmdldExhc3RDaGlsZE5hbWUoaW5kZXhEZWZpbml0aW9uKTtcbiAgICAgICAgaWYgKG1heEtleSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBOYW1lZE5vZGUobWF4S2V5LCB0aGlzLmNoaWxkcmVuXy5nZXQobWF4S2V5KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3JFYWNoQ2hpbGQoaW5kZXgsIGFjdGlvbikge1xuICAgICAgICBjb25zdCBpZHggPSB0aGlzLnJlc29sdmVJbmRleF8oaW5kZXgpO1xuICAgICAgICBpZiAoaWR4KSB7XG4gICAgICAgICAgICByZXR1cm4gaWR4Lmlub3JkZXJUcmF2ZXJzYWwod3JhcHBlZE5vZGUgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBhY3Rpb24od3JhcHBlZE5vZGUubmFtZSwgd3JhcHBlZE5vZGUubm9kZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuXy5pbm9yZGVyVHJhdmVyc2FsKGFjdGlvbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0SXRlcmF0b3IoaW5kZXhEZWZpbml0aW9uKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEl0ZXJhdG9yRnJvbShpbmRleERlZmluaXRpb24ubWluUG9zdCgpLCBpbmRleERlZmluaXRpb24pO1xuICAgIH1cbiAgICBnZXRJdGVyYXRvckZyb20oc3RhcnRQb3N0LCBpbmRleERlZmluaXRpb24pIHtcbiAgICAgICAgY29uc3QgaWR4ID0gdGhpcy5yZXNvbHZlSW5kZXhfKGluZGV4RGVmaW5pdGlvbik7XG4gICAgICAgIGlmIChpZHgpIHtcbiAgICAgICAgICAgIHJldHVybiBpZHguZ2V0SXRlcmF0b3JGcm9tKHN0YXJ0UG9zdCwga2V5ID0+IGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBpdGVyYXRvciA9IHRoaXMuY2hpbGRyZW5fLmdldEl0ZXJhdG9yRnJvbShzdGFydFBvc3QubmFtZSwgTmFtZWROb2RlLldyYXApO1xuICAgICAgICAgICAgbGV0IG5leHQgPSBpdGVyYXRvci5wZWVrKCk7XG4gICAgICAgICAgICB3aGlsZSAobmV4dCAhPSBudWxsICYmIGluZGV4RGVmaW5pdGlvbi5jb21wYXJlKG5leHQsIHN0YXJ0UG9zdCkgPCAwKSB7XG4gICAgICAgICAgICAgICAgaXRlcmF0b3IuZ2V0TmV4dCgpO1xuICAgICAgICAgICAgICAgIG5leHQgPSBpdGVyYXRvci5wZWVrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaXRlcmF0b3I7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0UmV2ZXJzZUl0ZXJhdG9yKGluZGV4RGVmaW5pdGlvbikge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRSZXZlcnNlSXRlcmF0b3JGcm9tKGluZGV4RGVmaW5pdGlvbi5tYXhQb3N0KCksIGluZGV4RGVmaW5pdGlvbik7XG4gICAgfVxuICAgIGdldFJldmVyc2VJdGVyYXRvckZyb20oZW5kUG9zdCwgaW5kZXhEZWZpbml0aW9uKSB7XG4gICAgICAgIGNvbnN0IGlkeCA9IHRoaXMucmVzb2x2ZUluZGV4XyhpbmRleERlZmluaXRpb24pO1xuICAgICAgICBpZiAoaWR4KSB7XG4gICAgICAgICAgICByZXR1cm4gaWR4LmdldFJldmVyc2VJdGVyYXRvckZyb20oZW5kUG9zdCwga2V5ID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4ga2V5O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBpdGVyYXRvciA9IHRoaXMuY2hpbGRyZW5fLmdldFJldmVyc2VJdGVyYXRvckZyb20oZW5kUG9zdC5uYW1lLCBOYW1lZE5vZGUuV3JhcCk7XG4gICAgICAgICAgICBsZXQgbmV4dCA9IGl0ZXJhdG9yLnBlZWsoKTtcbiAgICAgICAgICAgIHdoaWxlIChuZXh0ICE9IG51bGwgJiYgaW5kZXhEZWZpbml0aW9uLmNvbXBhcmUobmV4dCwgZW5kUG9zdCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgaXRlcmF0b3IuZ2V0TmV4dCgpO1xuICAgICAgICAgICAgICAgIG5leHQgPSBpdGVyYXRvci5wZWVrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaXRlcmF0b3I7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29tcGFyZVRvKG90aGVyKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgaWYgKG90aGVyLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG90aGVyLmlzTGVhZk5vZGUoKSB8fCBvdGhlci5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG90aGVyID09PSBNQVhfTk9ERSkge1xuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gTXVzdCBiZSBhbm90aGVyIG5vZGUgd2l0aCBjaGlsZHJlbi5cbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgfVxuICAgIHdpdGhJbmRleChpbmRleERlZmluaXRpb24pIHtcbiAgICAgICAgaWYgKGluZGV4RGVmaW5pdGlvbiA9PT0gS0VZX0lOREVYIHx8XG4gICAgICAgICAgICB0aGlzLmluZGV4TWFwXy5oYXNJbmRleChpbmRleERlZmluaXRpb24pKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld0luZGV4TWFwID0gdGhpcy5pbmRleE1hcF8uYWRkSW5kZXgoaW5kZXhEZWZpbml0aW9uLCB0aGlzLmNoaWxkcmVuXyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IENoaWxkcmVuTm9kZSh0aGlzLmNoaWxkcmVuXywgdGhpcy5wcmlvcml0eU5vZGVfLCBuZXdJbmRleE1hcCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaXNJbmRleGVkKGluZGV4KSB7XG4gICAgICAgIHJldHVybiBpbmRleCA9PT0gS0VZX0lOREVYIHx8IHRoaXMuaW5kZXhNYXBfLmhhc0luZGV4KGluZGV4KTtcbiAgICB9XG4gICAgZXF1YWxzKG90aGVyKSB7XG4gICAgICAgIGlmIChvdGhlciA9PT0gdGhpcykge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3RoZXIuaXNMZWFmTm9kZSgpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBvdGhlckNoaWxkcmVuTm9kZSA9IG90aGVyO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmdldFByaW9yaXR5KCkuZXF1YWxzKG90aGVyQ2hpbGRyZW5Ob2RlLmdldFByaW9yaXR5KCkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5jaGlsZHJlbl8uY291bnQoKSA9PT0gb3RoZXJDaGlsZHJlbk5vZGUuY2hpbGRyZW5fLmNvdW50KCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0aGlzSXRlciA9IHRoaXMuZ2V0SXRlcmF0b3IoUFJJT1JJVFlfSU5ERVgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG90aGVySXRlciA9IG90aGVyQ2hpbGRyZW5Ob2RlLmdldEl0ZXJhdG9yKFBSSU9SSVRZX0lOREVYKTtcbiAgICAgICAgICAgICAgICBsZXQgdGhpc0N1cnJlbnQgPSB0aGlzSXRlci5nZXROZXh0KCk7XG4gICAgICAgICAgICAgICAgbGV0IG90aGVyQ3VycmVudCA9IG90aGVySXRlci5nZXROZXh0KCk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHRoaXNDdXJyZW50ICYmIG90aGVyQ3VycmVudCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpc0N1cnJlbnQubmFtZSAhPT0gb3RoZXJDdXJyZW50Lm5hbWUgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICF0aGlzQ3VycmVudC5ub2RlLmVxdWFscyhvdGhlckN1cnJlbnQubm9kZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzQ3VycmVudCA9IHRoaXNJdGVyLmdldE5leHQoKTtcbiAgICAgICAgICAgICAgICAgICAgb3RoZXJDdXJyZW50ID0gb3RoZXJJdGVyLmdldE5leHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNDdXJyZW50ID09PSBudWxsICYmIG90aGVyQ3VycmVudCA9PT0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgU29ydGVkTWFwIG9yZGVyZWQgYnkgaW5kZXgsIG9yIG51bGwgaWYgdGhlIGRlZmF1bHQgKGJ5LWtleSkgb3JkZXJpbmcgY2FuIGJlIHVzZWRcbiAgICAgKiBpbnN0ZWFkLlxuICAgICAqXG4gICAgICovXG4gICAgcmVzb2x2ZUluZGV4XyhpbmRleERlZmluaXRpb24pIHtcbiAgICAgICAgaWYgKGluZGV4RGVmaW5pdGlvbiA9PT0gS0VZX0lOREVYKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluZGV4TWFwXy5nZXQoaW5kZXhEZWZpbml0aW9uLnRvU3RyaW5nKCkpO1xuICAgICAgICB9XG4gICAgfVxufVxuQ2hpbGRyZW5Ob2RlLklOVEVHRVJfUkVHRVhQXyA9IC9eKDB8WzEtOV1cXGQqKSQvO1xuY2xhc3MgTWF4Tm9kZSBleHRlbmRzIENoaWxkcmVuTm9kZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKG5ldyBTb3J0ZWRNYXAoTkFNRV9DT01QQVJBVE9SKSwgQ2hpbGRyZW5Ob2RlLkVNUFRZX05PREUsIEluZGV4TWFwLkRlZmF1bHQpO1xuICAgIH1cbiAgICBjb21wYXJlVG8ob3RoZXIpIHtcbiAgICAgICAgaWYgKG90aGVyID09PSB0aGlzKSB7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVxdWFscyhvdGhlcikge1xuICAgICAgICAvLyBOb3QgdGhhdCB3ZSBldmVyeSBjb21wYXJlIGl0LCBidXQgTUFYX05PREUgaXMgb25seSBldmVyIGVxdWFsIHRvIGl0c2VsZlxuICAgICAgICByZXR1cm4gb3RoZXIgPT09IHRoaXM7XG4gICAgfVxuICAgIGdldFByaW9yaXR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZ2V0SW1tZWRpYXRlQ2hpbGQoY2hpbGROYW1lKSB7XG4gICAgICAgIHJldHVybiBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERTtcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbi8qKlxuICogTWFya2VyIHRoYXQgd2lsbCBzb3J0IGhpZ2hlciB0aGFuIGFueSBvdGhlciBzbmFwc2hvdC5cbiAqL1xuY29uc3QgTUFYX05PREUgPSBuZXcgTWF4Tm9kZSgpO1xuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoTmFtZWROb2RlLCB7XG4gICAgTUlOOiB7XG4gICAgICAgIHZhbHVlOiBuZXcgTmFtZWROb2RlKE1JTl9OQU1FLCBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERSlcbiAgICB9LFxuICAgIE1BWDoge1xuICAgICAgICB2YWx1ZTogbmV3IE5hbWVkTm9kZShNQVhfTkFNRSwgTUFYX05PREUpXG4gICAgfVxufSk7XG4vKipcbiAqIFJlZmVyZW5jZSBFeHRlbnNpb25zXG4gKi9cbktleUluZGV4Ll9fRU1QVFlfTk9ERSA9IENoaWxkcmVuTm9kZS5FTVBUWV9OT0RFO1xuTGVhZk5vZGUuX19jaGlsZHJlbk5vZGVDb25zdHJ1Y3RvciA9IENoaWxkcmVuTm9kZTtcbnNldE1heE5vZGUkMShNQVhfTk9ERSk7XG5zZXRNYXhOb2RlKE1BWF9OT0RFKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNvbnN0IFVTRV9ISU5aRSA9IHRydWU7XG4vKipcbiAqIENvbnN0cnVjdHMgYSBzbmFwc2hvdCBub2RlIHJlcHJlc2VudGluZyB0aGUgcGFzc2VkIEpTT04gYW5kIHJldHVybnMgaXQuXG4gKiBAcGFyYW0ganNvbiAtIEpTT04gdG8gY3JlYXRlIGEgbm9kZSBmb3IuXG4gKiBAcGFyYW0gcHJpb3JpdHkgLSBPcHRpb25hbCBwcmlvcml0eSB0byB1c2UuICBUaGlzIHdpbGwgYmUgaWdub3JlZCBpZiB0aGVcbiAqIHBhc3NlZCBKU09OIGNvbnRhaW5zIGEgLnByaW9yaXR5IHByb3BlcnR5LlxuICovXG5mdW5jdGlvbiBub2RlRnJvbUpTT04oanNvbiwgcHJpb3JpdHkgPSBudWxsKSB7XG4gICAgaWYgKGpzb24gPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIENoaWxkcmVuTm9kZS5FTVBUWV9OT0RFO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGpzb24gPT09ICdvYmplY3QnICYmICcucHJpb3JpdHknIGluIGpzb24pIHtcbiAgICAgICAgcHJpb3JpdHkgPSBqc29uWycucHJpb3JpdHknXTtcbiAgICB9XG4gICAgYXNzZXJ0KHByaW9yaXR5ID09PSBudWxsIHx8XG4gICAgICAgIHR5cGVvZiBwcmlvcml0eSA9PT0gJ3N0cmluZycgfHxcbiAgICAgICAgdHlwZW9mIHByaW9yaXR5ID09PSAnbnVtYmVyJyB8fFxuICAgICAgICAodHlwZW9mIHByaW9yaXR5ID09PSAnb2JqZWN0JyAmJiAnLnN2JyBpbiBwcmlvcml0eSksICdJbnZhbGlkIHByaW9yaXR5IHR5cGUgZm91bmQ6ICcgKyB0eXBlb2YgcHJpb3JpdHkpO1xuICAgIGlmICh0eXBlb2YganNvbiA9PT0gJ29iamVjdCcgJiYgJy52YWx1ZScgaW4ganNvbiAmJiBqc29uWycudmFsdWUnXSAhPT0gbnVsbCkge1xuICAgICAgICBqc29uID0ganNvblsnLnZhbHVlJ107XG4gICAgfVxuICAgIC8vIFZhbGlkIGxlYWYgbm9kZXMgaW5jbHVkZSBub24tb2JqZWN0cyBvciBzZXJ2ZXItdmFsdWUgd3JhcHBlciBvYmplY3RzXG4gICAgaWYgKHR5cGVvZiBqc29uICE9PSAnb2JqZWN0JyB8fCAnLnN2JyBpbiBqc29uKSB7XG4gICAgICAgIGNvbnN0IGpzb25MZWFmID0ganNvbjtcbiAgICAgICAgcmV0dXJuIG5ldyBMZWFmTm9kZShqc29uTGVhZiwgbm9kZUZyb21KU09OKHByaW9yaXR5KSk7XG4gICAgfVxuICAgIGlmICghKGpzb24gaW5zdGFuY2VvZiBBcnJheSkgJiYgVVNFX0hJTlpFKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkcmVuID0gW107XG4gICAgICAgIGxldCBjaGlsZHJlbkhhdmVQcmlvcml0eSA9IGZhbHNlO1xuICAgICAgICBjb25zdCBoaW56ZUpzb25PYmogPSBqc29uO1xuICAgICAgICBlYWNoKGhpbnplSnNvbk9iaiwgKGtleSwgY2hpbGQpID0+IHtcbiAgICAgICAgICAgIGlmIChrZXkuc3Vic3RyaW5nKDAsIDEpICE9PSAnLicpIHtcbiAgICAgICAgICAgICAgICAvLyBJZ25vcmUgbWV0YWRhdGEgbm9kZXNcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZE5vZGUgPSBub2RlRnJvbUpTT04oY2hpbGQpO1xuICAgICAgICAgICAgICAgIGlmICghY2hpbGROb2RlLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbkhhdmVQcmlvcml0eSA9XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbkhhdmVQcmlvcml0eSB8fCAhY2hpbGROb2RlLmdldFByaW9yaXR5KCkuaXNFbXB0eSgpO1xuICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbi5wdXNoKG5ldyBOYW1lZE5vZGUoa2V5LCBjaGlsZE5vZGUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gQ2hpbGRyZW5Ob2RlLkVNUFRZX05PREU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2hpbGRTZXQgPSBidWlsZENoaWxkU2V0KGNoaWxkcmVuLCBOQU1FX09OTFlfQ09NUEFSQVRPUiwgbmFtZWROb2RlID0+IG5hbWVkTm9kZS5uYW1lLCBOQU1FX0NPTVBBUkFUT1IpO1xuICAgICAgICBpZiAoY2hpbGRyZW5IYXZlUHJpb3JpdHkpIHtcbiAgICAgICAgICAgIGNvbnN0IHNvcnRlZENoaWxkU2V0ID0gYnVpbGRDaGlsZFNldChjaGlsZHJlbiwgUFJJT1JJVFlfSU5ERVguZ2V0Q29tcGFyZSgpKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2hpbGRyZW5Ob2RlKGNoaWxkU2V0LCBub2RlRnJvbUpTT04ocHJpb3JpdHkpLCBuZXcgSW5kZXhNYXAoeyAnLnByaW9yaXR5Jzogc29ydGVkQ2hpbGRTZXQgfSwgeyAnLnByaW9yaXR5JzogUFJJT1JJVFlfSU5ERVggfSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDaGlsZHJlbk5vZGUoY2hpbGRTZXQsIG5vZGVGcm9tSlNPTihwcmlvcml0eSksIEluZGV4TWFwLkRlZmF1bHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBsZXQgbm9kZSA9IENoaWxkcmVuTm9kZS5FTVBUWV9OT0RFO1xuICAgICAgICBlYWNoKGpzb24sIChrZXksIGNoaWxkRGF0YSkgPT4ge1xuICAgICAgICAgICAgaWYgKGNvbnRhaW5zKGpzb24sIGtleSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5LnN1YnN0cmluZygwLCAxKSAhPT0gJy4nKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlnbm9yZSBtZXRhZGF0YSBub2Rlcy5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hpbGROb2RlID0gbm9kZUZyb21KU09OKGNoaWxkRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZE5vZGUuaXNMZWFmTm9kZSgpIHx8ICFjaGlsZE5vZGUuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlID0gbm9kZS51cGRhdGVJbW1lZGlhdGVDaGlsZChrZXksIGNoaWxkTm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbm9kZS51cGRhdGVQcmlvcml0eShub2RlRnJvbUpTT04ocHJpb3JpdHkpKTtcbiAgICB9XG59XG5zZXROb2RlRnJvbUpTT04obm9kZUZyb21KU09OKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNsYXNzIFBhdGhJbmRleCBleHRlbmRzIEluZGV4IHtcbiAgICBjb25zdHJ1Y3RvcihpbmRleFBhdGhfKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuaW5kZXhQYXRoXyA9IGluZGV4UGF0aF87XG4gICAgICAgIGFzc2VydCghcGF0aElzRW1wdHkoaW5kZXhQYXRoXykgJiYgcGF0aEdldEZyb250KGluZGV4UGF0aF8pICE9PSAnLnByaW9yaXR5JywgXCJDYW4ndCBjcmVhdGUgUGF0aEluZGV4IHdpdGggZW1wdHkgcGF0aCBvciAucHJpb3JpdHkga2V5XCIpO1xuICAgIH1cbiAgICBleHRyYWN0Q2hpbGQoc25hcCkge1xuICAgICAgICByZXR1cm4gc25hcC5nZXRDaGlsZCh0aGlzLmluZGV4UGF0aF8pO1xuICAgIH1cbiAgICBpc0RlZmluZWRPbihub2RlKSB7XG4gICAgICAgIHJldHVybiAhbm9kZS5nZXRDaGlsZCh0aGlzLmluZGV4UGF0aF8pLmlzRW1wdHkoKTtcbiAgICB9XG4gICAgY29tcGFyZShhLCBiKSB7XG4gICAgICAgIGNvbnN0IGFDaGlsZCA9IHRoaXMuZXh0cmFjdENoaWxkKGEubm9kZSk7XG4gICAgICAgIGNvbnN0IGJDaGlsZCA9IHRoaXMuZXh0cmFjdENoaWxkKGIubm9kZSk7XG4gICAgICAgIGNvbnN0IGluZGV4Q21wID0gYUNoaWxkLmNvbXBhcmVUbyhiQ2hpbGQpO1xuICAgICAgICBpZiAoaW5kZXhDbXAgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBuYW1lQ29tcGFyZShhLm5hbWUsIGIubmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gaW5kZXhDbXA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbWFrZVBvc3QoaW5kZXhWYWx1ZSwgbmFtZSkge1xuICAgICAgICBjb25zdCB2YWx1ZU5vZGUgPSBub2RlRnJvbUpTT04oaW5kZXhWYWx1ZSk7XG4gICAgICAgIGNvbnN0IG5vZGUgPSBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERS51cGRhdGVDaGlsZCh0aGlzLmluZGV4UGF0aF8sIHZhbHVlTm9kZSk7XG4gICAgICAgIHJldHVybiBuZXcgTmFtZWROb2RlKG5hbWUsIG5vZGUpO1xuICAgIH1cbiAgICBtYXhQb3N0KCkge1xuICAgICAgICBjb25zdCBub2RlID0gQ2hpbGRyZW5Ob2RlLkVNUFRZX05PREUudXBkYXRlQ2hpbGQodGhpcy5pbmRleFBhdGhfLCBNQVhfTk9ERSk7XG4gICAgICAgIHJldHVybiBuZXcgTmFtZWROb2RlKE1BWF9OQU1FLCBub2RlKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBwYXRoU2xpY2UodGhpcy5pbmRleFBhdGhfLCAwKS5qb2luKCcvJyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY2xhc3MgVmFsdWVJbmRleCBleHRlbmRzIEluZGV4IHtcbiAgICBjb21wYXJlKGEsIGIpIHtcbiAgICAgICAgY29uc3QgaW5kZXhDbXAgPSBhLm5vZGUuY29tcGFyZVRvKGIubm9kZSk7XG4gICAgICAgIGlmIChpbmRleENtcCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG5hbWVDb21wYXJlKGEubmFtZSwgYi5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBpbmRleENtcDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpc0RlZmluZWRPbihub2RlKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpbmRleGVkVmFsdWVDaGFuZ2VkKG9sZE5vZGUsIG5ld05vZGUpIHtcbiAgICAgICAgcmV0dXJuICFvbGROb2RlLmVxdWFscyhuZXdOb2RlKTtcbiAgICB9XG4gICAgbWluUG9zdCgpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgcmV0dXJuIE5hbWVkTm9kZS5NSU47XG4gICAgfVxuICAgIG1heFBvc3QoKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiBOYW1lZE5vZGUuTUFYO1xuICAgIH1cbiAgICBtYWtlUG9zdChpbmRleFZhbHVlLCBuYW1lKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlTm9kZSA9IG5vZGVGcm9tSlNPTihpbmRleFZhbHVlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBOYW1lZE5vZGUobmFtZSwgdmFsdWVOb2RlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybnMgU3RyaW5nIHJlcHJlc2VudGF0aW9uIGZvciBpbmNsdXNpb24gaW4gYSBxdWVyeSBzcGVjXG4gICAgICovXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiAnLnZhbHVlJztcbiAgICB9XG59XG5jb25zdCBWQUxVRV9JTkRFWCA9IG5ldyBWYWx1ZUluZGV4KCk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5mdW5jdGlvbiBjaGFuZ2VWYWx1ZShzbmFwc2hvdE5vZGUpIHtcbiAgICByZXR1cm4geyB0eXBlOiBcInZhbHVlXCIgLyogQ2hhbmdlVHlwZS5WQUxVRSAqLywgc25hcHNob3ROb2RlIH07XG59XG5mdW5jdGlvbiBjaGFuZ2VDaGlsZEFkZGVkKGNoaWxkTmFtZSwgc25hcHNob3ROb2RlKSB7XG4gICAgcmV0dXJuIHsgdHlwZTogXCJjaGlsZF9hZGRlZFwiIC8qIENoYW5nZVR5cGUuQ0hJTERfQURERUQgKi8sIHNuYXBzaG90Tm9kZSwgY2hpbGROYW1lIH07XG59XG5mdW5jdGlvbiBjaGFuZ2VDaGlsZFJlbW92ZWQoY2hpbGROYW1lLCBzbmFwc2hvdE5vZGUpIHtcbiAgICByZXR1cm4geyB0eXBlOiBcImNoaWxkX3JlbW92ZWRcIiAvKiBDaGFuZ2VUeXBlLkNISUxEX1JFTU9WRUQgKi8sIHNuYXBzaG90Tm9kZSwgY2hpbGROYW1lIH07XG59XG5mdW5jdGlvbiBjaGFuZ2VDaGlsZENoYW5nZWQoY2hpbGROYW1lLCBzbmFwc2hvdE5vZGUsIG9sZFNuYXApIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBcImNoaWxkX2NoYW5nZWRcIiAvKiBDaGFuZ2VUeXBlLkNISUxEX0NIQU5HRUQgKi8sXG4gICAgICAgIHNuYXBzaG90Tm9kZSxcbiAgICAgICAgY2hpbGROYW1lLFxuICAgICAgICBvbGRTbmFwXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGNoYW5nZUNoaWxkTW92ZWQoY2hpbGROYW1lLCBzbmFwc2hvdE5vZGUpIHtcbiAgICByZXR1cm4geyB0eXBlOiBcImNoaWxkX21vdmVkXCIgLyogQ2hhbmdlVHlwZS5DSElMRF9NT1ZFRCAqLywgc25hcHNob3ROb2RlLCBjaGlsZE5hbWUgfTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRG9lc24ndCByZWFsbHkgZmlsdGVyIG5vZGVzIGJ1dCBhcHBsaWVzIGFuIGluZGV4IHRvIHRoZSBub2RlIGFuZCBrZWVwcyB0cmFjayBvZiBhbnkgY2hhbmdlc1xuICovXG5jbGFzcyBJbmRleGVkRmlsdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihpbmRleF8pIHtcbiAgICAgICAgdGhpcy5pbmRleF8gPSBpbmRleF87XG4gICAgfVxuICAgIHVwZGF0ZUNoaWxkKHNuYXAsIGtleSwgbmV3Q2hpbGQsIGFmZmVjdGVkUGF0aCwgc291cmNlLCBvcHRDaGFuZ2VBY2N1bXVsYXRvcikge1xuICAgICAgICBhc3NlcnQoc25hcC5pc0luZGV4ZWQodGhpcy5pbmRleF8pLCAnQSBub2RlIG11c3QgYmUgaW5kZXhlZCBpZiBvbmx5IGEgY2hpbGQgaXMgdXBkYXRlZCcpO1xuICAgICAgICBjb25zdCBvbGRDaGlsZCA9IHNuYXAuZ2V0SW1tZWRpYXRlQ2hpbGQoa2V5KTtcbiAgICAgICAgLy8gQ2hlY2sgaWYgYW55dGhpbmcgYWN0dWFsbHkgY2hhbmdlZC5cbiAgICAgICAgaWYgKG9sZENoaWxkLmdldENoaWxkKGFmZmVjdGVkUGF0aCkuZXF1YWxzKG5ld0NoaWxkLmdldENoaWxkKGFmZmVjdGVkUGF0aCkpKSB7XG4gICAgICAgICAgICAvLyBUaGVyZSdzIGFuIGVkZ2UgY2FzZSB3aGVyZSBhIGNoaWxkIGNhbiBlbnRlciBvciBsZWF2ZSB0aGUgdmlldyBiZWNhdXNlIGFmZmVjdGVkUGF0aCB3YXMgc2V0IHRvIG51bGwuXG4gICAgICAgICAgICAvLyBJbiB0aGlzIGNhc2UsIGFmZmVjdGVkUGF0aCB3aWxsIGFwcGVhciBudWxsIGluIGJvdGggdGhlIG9sZCBhbmQgbmV3IHNuYXBzaG90cy4gIFNvIHdlIG5lZWRcbiAgICAgICAgICAgIC8vIHRvIGF2b2lkIHRyZWF0aW5nIHRoZXNlIGNhc2VzIGFzIFwibm90aGluZyBjaGFuZ2VkLlwiXG4gICAgICAgICAgICBpZiAob2xkQ2hpbGQuaXNFbXB0eSgpID09PSBuZXdDaGlsZC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICAvLyBOb3RoaW5nIGNoYW5nZWQuXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBhc3NlcnQgc2hvdWxkIGJlIHZhbGlkLCBidXQgaXQncyBleHBlbnNpdmUgKGNhbiBkb21pbmF0ZSBwZXJmIHRlc3RpbmcpIHNvIGRvbid0IGFjdHVhbGx5IGRvIGl0LlxuICAgICAgICAgICAgICAgIC8vYXNzZXJ0KG9sZENoaWxkLmVxdWFscyhuZXdDaGlsZCksICdPbGQgYW5kIG5ldyBzbmFwc2hvdHMgc2hvdWxkIGJlIGVxdWFsLicpO1xuICAgICAgICAgICAgICAgIHJldHVybiBzbmFwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRDaGFuZ2VBY2N1bXVsYXRvciAhPSBudWxsKSB7XG4gICAgICAgICAgICBpZiAobmV3Q2hpbGQuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNuYXAuaGFzQ2hpbGQoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBvcHRDaGFuZ2VBY2N1bXVsYXRvci50cmFja0NoaWxkQ2hhbmdlKGNoYW5nZUNoaWxkUmVtb3ZlZChrZXksIG9sZENoaWxkKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhc3NlcnQoc25hcC5pc0xlYWZOb2RlKCksICdBIGNoaWxkIHJlbW92ZSB3aXRob3V0IGFuIG9sZCBjaGlsZCBvbmx5IG1ha2VzIHNlbnNlIG9uIGEgbGVhZiBub2RlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAob2xkQ2hpbGQuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgb3B0Q2hhbmdlQWNjdW11bGF0b3IudHJhY2tDaGlsZENoYW5nZShjaGFuZ2VDaGlsZEFkZGVkKGtleSwgbmV3Q2hpbGQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG9wdENoYW5nZUFjY3VtdWxhdG9yLnRyYWNrQ2hpbGRDaGFuZ2UoY2hhbmdlQ2hpbGRDaGFuZ2VkKGtleSwgbmV3Q2hpbGQsIG9sZENoaWxkKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNuYXAuaXNMZWFmTm9kZSgpICYmIG5ld0NoaWxkLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHNuYXA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIG5vZGUgaXMgaW5kZXhlZFxuICAgICAgICAgICAgcmV0dXJuIHNuYXAudXBkYXRlSW1tZWRpYXRlQ2hpbGQoa2V5LCBuZXdDaGlsZCkud2l0aEluZGV4KHRoaXMuaW5kZXhfKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGVGdWxsTm9kZShvbGRTbmFwLCBuZXdTbmFwLCBvcHRDaGFuZ2VBY2N1bXVsYXRvcikge1xuICAgICAgICBpZiAob3B0Q2hhbmdlQWNjdW11bGF0b3IgIT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKCFvbGRTbmFwLmlzTGVhZk5vZGUoKSkge1xuICAgICAgICAgICAgICAgIG9sZFNuYXAuZm9yRWFjaENoaWxkKFBSSU9SSVRZX0lOREVYLCAoa2V5LCBjaGlsZE5vZGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFuZXdTbmFwLmhhc0NoaWxkKGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdENoYW5nZUFjY3VtdWxhdG9yLnRyYWNrQ2hpbGRDaGFuZ2UoY2hhbmdlQ2hpbGRSZW1vdmVkKGtleSwgY2hpbGROb2RlKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghbmV3U25hcC5pc0xlYWZOb2RlKCkpIHtcbiAgICAgICAgICAgICAgICBuZXdTbmFwLmZvckVhY2hDaGlsZChQUklPUklUWV9JTkRFWCwgKGtleSwgY2hpbGROb2RlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvbGRTbmFwLmhhc0NoaWxkKGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9sZENoaWxkID0gb2xkU25hcC5nZXRJbW1lZGlhdGVDaGlsZChrZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvbGRDaGlsZC5lcXVhbHMoY2hpbGROb2RlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdENoYW5nZUFjY3VtdWxhdG9yLnRyYWNrQ2hpbGRDaGFuZ2UoY2hhbmdlQ2hpbGRDaGFuZ2VkKGtleSwgY2hpbGROb2RlLCBvbGRDaGlsZCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0Q2hhbmdlQWNjdW11bGF0b3IudHJhY2tDaGlsZENoYW5nZShjaGFuZ2VDaGlsZEFkZGVkKGtleSwgY2hpbGROb2RlKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3U25hcC53aXRoSW5kZXgodGhpcy5pbmRleF8pO1xuICAgIH1cbiAgICB1cGRhdGVQcmlvcml0eShvbGRTbmFwLCBuZXdQcmlvcml0eSkge1xuICAgICAgICBpZiAob2xkU25hcC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIHJldHVybiBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBvbGRTbmFwLnVwZGF0ZVByaW9yaXR5KG5ld1ByaW9yaXR5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmaWx0ZXJzTm9kZXMoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZ2V0SW5kZXhlZEZpbHRlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGdldEluZGV4KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleF87XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBGaWx0ZXJzIG5vZGVzIGJ5IHJhbmdlIGFuZCB1c2VzIGFuIEluZGV4RmlsdGVyIHRvIHRyYWNrIGFueSBjaGFuZ2VzIGFmdGVyIGZpbHRlcmluZyB0aGUgbm9kZVxuICovXG5jbGFzcyBSYW5nZWRGaWx0ZXIge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xuICAgICAgICB0aGlzLmluZGV4ZWRGaWx0ZXJfID0gbmV3IEluZGV4ZWRGaWx0ZXIocGFyYW1zLmdldEluZGV4KCkpO1xuICAgICAgICB0aGlzLmluZGV4XyA9IHBhcmFtcy5nZXRJbmRleCgpO1xuICAgICAgICB0aGlzLnN0YXJ0UG9zdF8gPSBSYW5nZWRGaWx0ZXIuZ2V0U3RhcnRQb3N0XyhwYXJhbXMpO1xuICAgICAgICB0aGlzLmVuZFBvc3RfID0gUmFuZ2VkRmlsdGVyLmdldEVuZFBvc3RfKHBhcmFtcyk7XG4gICAgICAgIHRoaXMuc3RhcnRJc0luY2x1c2l2ZV8gPSAhcGFyYW1zLnN0YXJ0QWZ0ZXJTZXRfO1xuICAgICAgICB0aGlzLmVuZElzSW5jbHVzaXZlXyA9ICFwYXJhbXMuZW5kQmVmb3JlU2V0XztcbiAgICB9XG4gICAgZ2V0U3RhcnRQb3N0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGFydFBvc3RfO1xuICAgIH1cbiAgICBnZXRFbmRQb3N0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmRQb3N0XztcbiAgICB9XG4gICAgbWF0Y2hlcyhub2RlKSB7XG4gICAgICAgIGNvbnN0IGlzV2l0aGluU3RhcnQgPSB0aGlzLnN0YXJ0SXNJbmNsdXNpdmVfXG4gICAgICAgICAgICA/IHRoaXMuaW5kZXhfLmNvbXBhcmUodGhpcy5nZXRTdGFydFBvc3QoKSwgbm9kZSkgPD0gMFxuICAgICAgICAgICAgOiB0aGlzLmluZGV4Xy5jb21wYXJlKHRoaXMuZ2V0U3RhcnRQb3N0KCksIG5vZGUpIDwgMDtcbiAgICAgICAgY29uc3QgaXNXaXRoaW5FbmQgPSB0aGlzLmVuZElzSW5jbHVzaXZlX1xuICAgICAgICAgICAgPyB0aGlzLmluZGV4Xy5jb21wYXJlKG5vZGUsIHRoaXMuZ2V0RW5kUG9zdCgpKSA8PSAwXG4gICAgICAgICAgICA6IHRoaXMuaW5kZXhfLmNvbXBhcmUobm9kZSwgdGhpcy5nZXRFbmRQb3N0KCkpIDwgMDtcbiAgICAgICAgcmV0dXJuIGlzV2l0aGluU3RhcnQgJiYgaXNXaXRoaW5FbmQ7XG4gICAgfVxuICAgIHVwZGF0ZUNoaWxkKHNuYXAsIGtleSwgbmV3Q2hpbGQsIGFmZmVjdGVkUGF0aCwgc291cmNlLCBvcHRDaGFuZ2VBY2N1bXVsYXRvcikge1xuICAgICAgICBpZiAoIXRoaXMubWF0Y2hlcyhuZXcgTmFtZWROb2RlKGtleSwgbmV3Q2hpbGQpKSkge1xuICAgICAgICAgICAgbmV3Q2hpbGQgPSBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5pbmRleGVkRmlsdGVyXy51cGRhdGVDaGlsZChzbmFwLCBrZXksIG5ld0NoaWxkLCBhZmZlY3RlZFBhdGgsIHNvdXJjZSwgb3B0Q2hhbmdlQWNjdW11bGF0b3IpO1xuICAgIH1cbiAgICB1cGRhdGVGdWxsTm9kZShvbGRTbmFwLCBuZXdTbmFwLCBvcHRDaGFuZ2VBY2N1bXVsYXRvcikge1xuICAgICAgICBpZiAobmV3U25hcC5pc0xlYWZOb2RlKCkpIHtcbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBoYXZlIGEgY2hpbGRyZW4gbm9kZSB3aXRoIHRoZSBjb3JyZWN0IGluZGV4LCBub3QgYSBsZWFmIG5vZGU7XG4gICAgICAgICAgICBuZXdTbmFwID0gQ2hpbGRyZW5Ob2RlLkVNUFRZX05PREU7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGZpbHRlcmVkID0gbmV3U25hcC53aXRoSW5kZXgodGhpcy5pbmRleF8pO1xuICAgICAgICAvLyBEb24ndCBzdXBwb3J0IHByaW9yaXRpZXMgb24gcXVlcmllc1xuICAgICAgICBmaWx0ZXJlZCA9IGZpbHRlcmVkLnVwZGF0ZVByaW9yaXR5KENoaWxkcmVuTm9kZS5FTVBUWV9OT0RFKTtcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgICAgIG5ld1NuYXAuZm9yRWFjaENoaWxkKFBSSU9SSVRZX0lOREVYLCAoa2V5LCBjaGlsZE5vZGUpID0+IHtcbiAgICAgICAgICAgIGlmICghc2VsZi5tYXRjaGVzKG5ldyBOYW1lZE5vZGUoa2V5LCBjaGlsZE5vZGUpKSkge1xuICAgICAgICAgICAgICAgIGZpbHRlcmVkID0gZmlsdGVyZWQudXBkYXRlSW1tZWRpYXRlQ2hpbGQoa2V5LCBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleGVkRmlsdGVyXy51cGRhdGVGdWxsTm9kZShvbGRTbmFwLCBmaWx0ZXJlZCwgb3B0Q2hhbmdlQWNjdW11bGF0b3IpO1xuICAgIH1cbiAgICB1cGRhdGVQcmlvcml0eShvbGRTbmFwLCBuZXdQcmlvcml0eSkge1xuICAgICAgICAvLyBEb24ndCBzdXBwb3J0IHByaW9yaXRpZXMgb24gcXVlcmllc1xuICAgICAgICByZXR1cm4gb2xkU25hcDtcbiAgICB9XG4gICAgZmlsdGVyc05vZGVzKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZ2V0SW5kZXhlZEZpbHRlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXhlZEZpbHRlcl87XG4gICAgfVxuICAgIGdldEluZGV4KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleF87XG4gICAgfVxuICAgIHN0YXRpYyBnZXRTdGFydFBvc3RfKHBhcmFtcykge1xuICAgICAgICBpZiAocGFyYW1zLmhhc1N0YXJ0KCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0TmFtZSA9IHBhcmFtcy5nZXRJbmRleFN0YXJ0TmFtZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHBhcmFtcy5nZXRJbmRleCgpLm1ha2VQb3N0KHBhcmFtcy5nZXRJbmRleFN0YXJ0VmFsdWUoKSwgc3RhcnROYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJhbXMuZ2V0SW5kZXgoKS5taW5Qb3N0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGdldEVuZFBvc3RfKHBhcmFtcykge1xuICAgICAgICBpZiAocGFyYW1zLmhhc0VuZCgpKSB7XG4gICAgICAgICAgICBjb25zdCBlbmROYW1lID0gcGFyYW1zLmdldEluZGV4RW5kTmFtZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHBhcmFtcy5nZXRJbmRleCgpLm1ha2VQb3N0KHBhcmFtcy5nZXRJbmRleEVuZFZhbHVlKCksIGVuZE5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHBhcmFtcy5nZXRJbmRleCgpLm1heFBvc3QoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQXBwbGllcyBhIGxpbWl0IGFuZCBhIHJhbmdlIHRvIGEgbm9kZSBhbmQgdXNlcyBSYW5nZWRGaWx0ZXIgdG8gZG8gdGhlIGhlYXZ5IGxpZnRpbmcgd2hlcmUgcG9zc2libGVcbiAqL1xuY2xhc3MgTGltaXRlZEZpbHRlciB7XG4gICAgY29uc3RydWN0b3IocGFyYW1zKSB7XG4gICAgICAgIHRoaXMud2l0aGluRGlyZWN0aW9uYWxTdGFydCA9IChub2RlKSA9PiB0aGlzLnJldmVyc2VfID8gdGhpcy53aXRoaW5FbmRQb3N0KG5vZGUpIDogdGhpcy53aXRoaW5TdGFydFBvc3Qobm9kZSk7XG4gICAgICAgIHRoaXMud2l0aGluRGlyZWN0aW9uYWxFbmQgPSAobm9kZSkgPT4gdGhpcy5yZXZlcnNlXyA/IHRoaXMud2l0aGluU3RhcnRQb3N0KG5vZGUpIDogdGhpcy53aXRoaW5FbmRQb3N0KG5vZGUpO1xuICAgICAgICB0aGlzLndpdGhpblN0YXJ0UG9zdCA9IChub2RlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjb21wYXJlUmVzID0gdGhpcy5pbmRleF8uY29tcGFyZSh0aGlzLnJhbmdlZEZpbHRlcl8uZ2V0U3RhcnRQb3N0KCksIG5vZGUpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhcnRJc0luY2x1c2l2ZV8gPyBjb21wYXJlUmVzIDw9IDAgOiBjb21wYXJlUmVzIDwgMDtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy53aXRoaW5FbmRQb3N0ID0gKG5vZGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbXBhcmVSZXMgPSB0aGlzLmluZGV4Xy5jb21wYXJlKG5vZGUsIHRoaXMucmFuZ2VkRmlsdGVyXy5nZXRFbmRQb3N0KCkpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5kSXNJbmNsdXNpdmVfID8gY29tcGFyZVJlcyA8PSAwIDogY29tcGFyZVJlcyA8IDA7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucmFuZ2VkRmlsdGVyXyA9IG5ldyBSYW5nZWRGaWx0ZXIocGFyYW1zKTtcbiAgICAgICAgdGhpcy5pbmRleF8gPSBwYXJhbXMuZ2V0SW5kZXgoKTtcbiAgICAgICAgdGhpcy5saW1pdF8gPSBwYXJhbXMuZ2V0TGltaXQoKTtcbiAgICAgICAgdGhpcy5yZXZlcnNlXyA9ICFwYXJhbXMuaXNWaWV3RnJvbUxlZnQoKTtcbiAgICAgICAgdGhpcy5zdGFydElzSW5jbHVzaXZlXyA9ICFwYXJhbXMuc3RhcnRBZnRlclNldF87XG4gICAgICAgIHRoaXMuZW5kSXNJbmNsdXNpdmVfID0gIXBhcmFtcy5lbmRCZWZvcmVTZXRfO1xuICAgIH1cbiAgICB1cGRhdGVDaGlsZChzbmFwLCBrZXksIG5ld0NoaWxkLCBhZmZlY3RlZFBhdGgsIHNvdXJjZSwgb3B0Q2hhbmdlQWNjdW11bGF0b3IpIHtcbiAgICAgICAgaWYgKCF0aGlzLnJhbmdlZEZpbHRlcl8ubWF0Y2hlcyhuZXcgTmFtZWROb2RlKGtleSwgbmV3Q2hpbGQpKSkge1xuICAgICAgICAgICAgbmV3Q2hpbGQgPSBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc25hcC5nZXRJbW1lZGlhdGVDaGlsZChrZXkpLmVxdWFscyhuZXdDaGlsZCkpIHtcbiAgICAgICAgICAgIC8vIE5vIGNoYW5nZVxuICAgICAgICAgICAgcmV0dXJuIHNuYXA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc25hcC5udW1DaGlsZHJlbigpIDwgdGhpcy5saW1pdF8pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJhbmdlZEZpbHRlcl9cbiAgICAgICAgICAgICAgICAuZ2V0SW5kZXhlZEZpbHRlcigpXG4gICAgICAgICAgICAgICAgLnVwZGF0ZUNoaWxkKHNuYXAsIGtleSwgbmV3Q2hpbGQsIGFmZmVjdGVkUGF0aCwgc291cmNlLCBvcHRDaGFuZ2VBY2N1bXVsYXRvcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mdWxsTGltaXRVcGRhdGVDaGlsZF8oc25hcCwga2V5LCBuZXdDaGlsZCwgc291cmNlLCBvcHRDaGFuZ2VBY2N1bXVsYXRvcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlRnVsbE5vZGUob2xkU25hcCwgbmV3U25hcCwgb3B0Q2hhbmdlQWNjdW11bGF0b3IpIHtcbiAgICAgICAgbGV0IGZpbHRlcmVkO1xuICAgICAgICBpZiAobmV3U25hcC5pc0xlYWZOb2RlKCkgfHwgbmV3U25hcC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBoYXZlIGEgY2hpbGRyZW4gbm9kZSB3aXRoIHRoZSBjb3JyZWN0IGluZGV4LCBub3QgYSBsZWFmIG5vZGU7XG4gICAgICAgICAgICBmaWx0ZXJlZCA9IENoaWxkcmVuTm9kZS5FTVBUWV9OT0RFLndpdGhJbmRleCh0aGlzLmluZGV4Xyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5saW1pdF8gKiAyIDwgbmV3U25hcC5udW1DaGlsZHJlbigpICYmXG4gICAgICAgICAgICAgICAgbmV3U25hcC5pc0luZGV4ZWQodGhpcy5pbmRleF8pKSB7XG4gICAgICAgICAgICAgICAgLy8gRWFzaWVyIHRvIGJ1aWxkIHVwIGEgc25hcHNob3QsIHNpbmNlIHdoYXQgd2UncmUgZ2l2ZW4gaGFzIG1vcmUgdGhhbiB0d2ljZSB0aGUgZWxlbWVudHMgd2Ugd2FudFxuICAgICAgICAgICAgICAgIGZpbHRlcmVkID0gQ2hpbGRyZW5Ob2RlLkVNUFRZX05PREUud2l0aEluZGV4KHRoaXMuaW5kZXhfKTtcbiAgICAgICAgICAgICAgICAvLyBhbmNob3IgdG8gdGhlIHN0YXJ0UG9zdCwgZW5kUG9zdCwgb3IgbGFzdCBlbGVtZW50IGFzIGFwcHJvcHJpYXRlXG4gICAgICAgICAgICAgICAgbGV0IGl0ZXJhdG9yO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJldmVyc2VfKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZXJhdG9yID0gbmV3U25hcC5nZXRSZXZlcnNlSXRlcmF0b3JGcm9tKHRoaXMucmFuZ2VkRmlsdGVyXy5nZXRFbmRQb3N0KCksIHRoaXMuaW5kZXhfKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZXJhdG9yID0gbmV3U25hcC5nZXRJdGVyYXRvckZyb20odGhpcy5yYW5nZWRGaWx0ZXJfLmdldFN0YXJ0UG9zdCgpLCB0aGlzLmluZGV4Xyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGl0ZXJhdG9yLmhhc05leHQoKSAmJiBjb3VudCA8IHRoaXMubGltaXRfKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHQgPSBpdGVyYXRvci5nZXROZXh0KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy53aXRoaW5EaXJlY3Rpb25hbFN0YXJ0KG5leHQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB3ZSBoYXZlIG5vdCByZWFjaGVkIHRoZSBzdGFydCwgc2tpcCB0byB0aGUgbmV4dCBlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghdGhpcy53aXRoaW5EaXJlY3Rpb25hbEVuZChuZXh0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgd2UgaGF2ZSByZWFjaGVkIHRoZSBlbmQsIHN0b3AgYWRkaW5nIGVsZW1lbnRzXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkID0gZmlsdGVyZWQudXBkYXRlSW1tZWRpYXRlQ2hpbGQobmV4dC5uYW1lLCBuZXh0Lm5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFRoZSBzbmFwIGNvbnRhaW5zIGxlc3MgdGhhbiB0d2ljZSB0aGUgbGltaXQuIEZhc3RlciB0byBkZWxldGUgZnJvbSB0aGUgc25hcCB0aGFuIGJ1aWxkIHVwIGEgbmV3IG9uZVxuICAgICAgICAgICAgICAgIGZpbHRlcmVkID0gbmV3U25hcC53aXRoSW5kZXgodGhpcy5pbmRleF8pO1xuICAgICAgICAgICAgICAgIC8vIERvbid0IHN1cHBvcnQgcHJpb3JpdGllcyBvbiBxdWVyaWVzXG4gICAgICAgICAgICAgICAgZmlsdGVyZWQgPSBmaWx0ZXJlZC51cGRhdGVQcmlvcml0eShDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERSk7XG4gICAgICAgICAgICAgICAgbGV0IGl0ZXJhdG9yO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJldmVyc2VfKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZXJhdG9yID0gZmlsdGVyZWQuZ2V0UmV2ZXJzZUl0ZXJhdG9yKHRoaXMuaW5kZXhfKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZXJhdG9yID0gZmlsdGVyZWQuZ2V0SXRlcmF0b3IodGhpcy5pbmRleF8pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgY291bnQgPSAwO1xuICAgICAgICAgICAgICAgIHdoaWxlIChpdGVyYXRvci5oYXNOZXh0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dCA9IGl0ZXJhdG9yLmdldE5leHQoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5SYW5nZSA9IGNvdW50IDwgdGhpcy5saW1pdF8gJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2l0aGluRGlyZWN0aW9uYWxTdGFydChuZXh0KSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53aXRoaW5EaXJlY3Rpb25hbEVuZChuZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluUmFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZCA9IGZpbHRlcmVkLnVwZGF0ZUltbWVkaWF0ZUNoaWxkKG5leHQubmFtZSwgQ2hpbGRyZW5Ob2RlLkVNUFRZX05PREUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnJhbmdlZEZpbHRlcl9cbiAgICAgICAgICAgIC5nZXRJbmRleGVkRmlsdGVyKClcbiAgICAgICAgICAgIC51cGRhdGVGdWxsTm9kZShvbGRTbmFwLCBmaWx0ZXJlZCwgb3B0Q2hhbmdlQWNjdW11bGF0b3IpO1xuICAgIH1cbiAgICB1cGRhdGVQcmlvcml0eShvbGRTbmFwLCBuZXdQcmlvcml0eSkge1xuICAgICAgICAvLyBEb24ndCBzdXBwb3J0IHByaW9yaXRpZXMgb24gcXVlcmllc1xuICAgICAgICByZXR1cm4gb2xkU25hcDtcbiAgICB9XG4gICAgZmlsdGVyc05vZGVzKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZ2V0SW5kZXhlZEZpbHRlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmFuZ2VkRmlsdGVyXy5nZXRJbmRleGVkRmlsdGVyKCk7XG4gICAgfVxuICAgIGdldEluZGV4KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleF87XG4gICAgfVxuICAgIGZ1bGxMaW1pdFVwZGF0ZUNoaWxkXyhzbmFwLCBjaGlsZEtleSwgY2hpbGRTbmFwLCBzb3VyY2UsIGNoYW5nZUFjY3VtdWxhdG9yKSB7XG4gICAgICAgIC8vIFRPRE86IHJlbmFtZSBhbGwgY2FjaGUgc3R1ZmYgZXRjIHRvIGdlbmVyYWwgc25hcCB0ZXJtaW5vbG9neVxuICAgICAgICBsZXQgY21wO1xuICAgICAgICBpZiAodGhpcy5yZXZlcnNlXykge1xuICAgICAgICAgICAgY29uc3QgaW5kZXhDbXAgPSB0aGlzLmluZGV4Xy5nZXRDb21wYXJlKCk7XG4gICAgICAgICAgICBjbXAgPSAoYSwgYikgPT4gaW5kZXhDbXAoYiwgYSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjbXAgPSB0aGlzLmluZGV4Xy5nZXRDb21wYXJlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb2xkRXZlbnRDYWNoZSA9IHNuYXA7XG4gICAgICAgIGFzc2VydChvbGRFdmVudENhY2hlLm51bUNoaWxkcmVuKCkgPT09IHRoaXMubGltaXRfLCAnJyk7XG4gICAgICAgIGNvbnN0IG5ld0NoaWxkTmFtZWROb2RlID0gbmV3IE5hbWVkTm9kZShjaGlsZEtleSwgY2hpbGRTbmFwKTtcbiAgICAgICAgY29uc3Qgd2luZG93Qm91bmRhcnkgPSB0aGlzLnJldmVyc2VfXG4gICAgICAgICAgICA/IG9sZEV2ZW50Q2FjaGUuZ2V0Rmlyc3RDaGlsZCh0aGlzLmluZGV4XylcbiAgICAgICAgICAgIDogb2xkRXZlbnRDYWNoZS5nZXRMYXN0Q2hpbGQodGhpcy5pbmRleF8pO1xuICAgICAgICBjb25zdCBpblJhbmdlID0gdGhpcy5yYW5nZWRGaWx0ZXJfLm1hdGNoZXMobmV3Q2hpbGROYW1lZE5vZGUpO1xuICAgICAgICBpZiAob2xkRXZlbnRDYWNoZS5oYXNDaGlsZChjaGlsZEtleSkpIHtcbiAgICAgICAgICAgIGNvbnN0IG9sZENoaWxkU25hcCA9IG9sZEV2ZW50Q2FjaGUuZ2V0SW1tZWRpYXRlQ2hpbGQoY2hpbGRLZXkpO1xuICAgICAgICAgICAgbGV0IG5leHRDaGlsZCA9IHNvdXJjZS5nZXRDaGlsZEFmdGVyQ2hpbGQodGhpcy5pbmRleF8sIHdpbmRvd0JvdW5kYXJ5LCB0aGlzLnJldmVyc2VfKTtcbiAgICAgICAgICAgIHdoaWxlIChuZXh0Q2hpbGQgIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgIChuZXh0Q2hpbGQubmFtZSA9PT0gY2hpbGRLZXkgfHwgb2xkRXZlbnRDYWNoZS5oYXNDaGlsZChuZXh0Q2hpbGQubmFtZSkpKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlcmUgaXMgYSB3ZWlyZCBlZGdlIGNhc2Ugd2hlcmUgYSBub2RlIGlzIHVwZGF0ZWQgYXMgcGFydCBvZiBhIG1lcmdlIGluIHRoZSB3cml0ZSB0cmVlLCBidXQgaGFzbid0XG4gICAgICAgICAgICAgICAgLy8gYmVlbiBhcHBsaWVkIHRvIHRoZSBsaW1pdGVkIGZpbHRlciB5ZXQuIElnbm9yZSB0aGlzIG5leHQgY2hpbGQgd2hpY2ggd2lsbCBiZSB1cGRhdGVkIGxhdGVyIGluXG4gICAgICAgICAgICAgICAgLy8gdGhlIGxpbWl0ZWQgZmlsdGVyLi4uXG4gICAgICAgICAgICAgICAgbmV4dENoaWxkID0gc291cmNlLmdldENoaWxkQWZ0ZXJDaGlsZCh0aGlzLmluZGV4XywgbmV4dENoaWxkLCB0aGlzLnJldmVyc2VfKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNvbXBhcmVOZXh0ID0gbmV4dENoaWxkID09IG51bGwgPyAxIDogY21wKG5leHRDaGlsZCwgbmV3Q2hpbGROYW1lZE5vZGUpO1xuICAgICAgICAgICAgY29uc3QgcmVtYWluc0luV2luZG93ID0gaW5SYW5nZSAmJiAhY2hpbGRTbmFwLmlzRW1wdHkoKSAmJiBjb21wYXJlTmV4dCA+PSAwO1xuICAgICAgICAgICAgaWYgKHJlbWFpbnNJbldpbmRvdykge1xuICAgICAgICAgICAgICAgIGlmIChjaGFuZ2VBY2N1bXVsYXRvciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZUFjY3VtdWxhdG9yLnRyYWNrQ2hpbGRDaGFuZ2UoY2hhbmdlQ2hpbGRDaGFuZ2VkKGNoaWxkS2V5LCBjaGlsZFNuYXAsIG9sZENoaWxkU25hcCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gb2xkRXZlbnRDYWNoZS51cGRhdGVJbW1lZGlhdGVDaGlsZChjaGlsZEtleSwgY2hpbGRTbmFwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChjaGFuZ2VBY2N1bXVsYXRvciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZUFjY3VtdWxhdG9yLnRyYWNrQ2hpbGRDaGFuZ2UoY2hhbmdlQ2hpbGRSZW1vdmVkKGNoaWxkS2V5LCBvbGRDaGlsZFNuYXApKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3RXZlbnRDYWNoZSA9IG9sZEV2ZW50Q2FjaGUudXBkYXRlSW1tZWRpYXRlQ2hpbGQoY2hpbGRLZXksIENoaWxkcmVuTm9kZS5FTVBUWV9OT0RFKTtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0Q2hpbGRJblJhbmdlID0gbmV4dENoaWxkICE9IG51bGwgJiYgdGhpcy5yYW5nZWRGaWx0ZXJfLm1hdGNoZXMobmV4dENoaWxkKTtcbiAgICAgICAgICAgICAgICBpZiAobmV4dENoaWxkSW5SYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2hhbmdlQWNjdW11bGF0b3IgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlQWNjdW11bGF0b3IudHJhY2tDaGlsZENoYW5nZShjaGFuZ2VDaGlsZEFkZGVkKG5leHRDaGlsZC5uYW1lLCBuZXh0Q2hpbGQubm9kZSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdFdmVudENhY2hlLnVwZGF0ZUltbWVkaWF0ZUNoaWxkKG5leHRDaGlsZC5uYW1lLCBuZXh0Q2hpbGQubm9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3RXZlbnRDYWNoZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY2hpbGRTbmFwLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgLy8gd2UncmUgZGVsZXRpbmcgYSBub2RlLCBidXQgaXQgd2FzIG5vdCBpbiB0aGUgd2luZG93LCBzbyBpZ25vcmUgaXRcbiAgICAgICAgICAgIHJldHVybiBzbmFwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGluUmFuZ2UpIHtcbiAgICAgICAgICAgIGlmIChjbXAod2luZG93Qm91bmRhcnksIG5ld0NoaWxkTmFtZWROb2RlKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNoYW5nZUFjY3VtdWxhdG9yICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlQWNjdW11bGF0b3IudHJhY2tDaGlsZENoYW5nZShjaGFuZ2VDaGlsZFJlbW92ZWQod2luZG93Qm91bmRhcnkubmFtZSwgd2luZG93Qm91bmRhcnkubm9kZSkpO1xuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VBY2N1bXVsYXRvci50cmFja0NoaWxkQ2hhbmdlKGNoYW5nZUNoaWxkQWRkZWQoY2hpbGRLZXksIGNoaWxkU25hcCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gb2xkRXZlbnRDYWNoZVxuICAgICAgICAgICAgICAgICAgICAudXBkYXRlSW1tZWRpYXRlQ2hpbGQoY2hpbGRLZXksIGNoaWxkU25hcClcbiAgICAgICAgICAgICAgICAgICAgLnVwZGF0ZUltbWVkaWF0ZUNoaWxkKHdpbmRvd0JvdW5kYXJ5Lm5hbWUsIENoaWxkcmVuTm9kZS5FTVBUWV9OT0RFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBzbmFwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHNuYXA7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRoaXMgY2xhc3MgaXMgYW4gaW1tdXRhYmxlLWZyb20tdGhlLXB1YmxpYy1hcGkgc3RydWN0IGNvbnRhaW5pbmcgYSBzZXQgb2YgcXVlcnkgcGFyYW1ldGVycyBkZWZpbmluZyBhXG4gKiByYW5nZSB0byBiZSByZXR1cm5lZCBmb3IgYSBwYXJ0aWN1bGFyIGxvY2F0aW9uLiBJdCBpcyBhc3N1bWVkIHRoYXQgdmFsaWRhdGlvbiBvZiBwYXJhbWV0ZXJzIGlzIGRvbmUgYXQgdGhlXG4gKiB1c2VyLWZhY2luZyBBUEkgbGV2ZWwsIHNvIGl0IGlzIG5vdCBkb25lIGhlcmUuXG4gKlxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIFF1ZXJ5UGFyYW1zIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5saW1pdFNldF8gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zdGFydFNldF8gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zdGFydE5hbWVTZXRfID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc3RhcnRBZnRlclNldF8gPSBmYWxzZTsgLy8gY2FuIG9ubHkgYmUgdHJ1ZSBpZiBzdGFydFNldF8gaXMgdHJ1ZVxuICAgICAgICB0aGlzLmVuZFNldF8gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5lbmROYW1lU2V0XyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmVuZEJlZm9yZVNldF8gPSBmYWxzZTsgLy8gY2FuIG9ubHkgYmUgdHJ1ZSBpZiBlbmRTZXRfIGlzIHRydWVcbiAgICAgICAgdGhpcy5saW1pdF8gPSAwO1xuICAgICAgICB0aGlzLnZpZXdGcm9tXyA9ICcnO1xuICAgICAgICB0aGlzLmluZGV4U3RhcnRWYWx1ZV8gPSBudWxsO1xuICAgICAgICB0aGlzLmluZGV4U3RhcnROYW1lXyA9ICcnO1xuICAgICAgICB0aGlzLmluZGV4RW5kVmFsdWVfID0gbnVsbDtcbiAgICAgICAgdGhpcy5pbmRleEVuZE5hbWVfID0gJyc7XG4gICAgICAgIHRoaXMuaW5kZXhfID0gUFJJT1JJVFlfSU5ERVg7XG4gICAgfVxuICAgIGhhc1N0YXJ0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGFydFNldF87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIFRydWUgaWYgaXQgd291bGQgcmV0dXJuIGZyb20gbGVmdC5cbiAgICAgKi9cbiAgICBpc1ZpZXdGcm9tTGVmdCgpIHtcbiAgICAgICAgaWYgKHRoaXMudmlld0Zyb21fID09PSAnJykge1xuICAgICAgICAgICAgLy8gbGltaXQoKSwgcmF0aGVyIHRoYW4gbGltaXRUb0ZpcnN0IG9yIGxpbWl0VG9MYXN0IHdhcyBjYWxsZWQuXG4gICAgICAgICAgICAvLyBUaGlzIG1lYW5zIHRoYXQgb25seSBvbmUgb2Ygc3RhcnRTZXRfIGFuZCBlbmRTZXRfIGlzIHRydWUuIFVzZSB0aGVtXG4gICAgICAgICAgICAvLyB0byBjYWxjdWxhdGUgd2hpY2ggc2lkZSBvZiB0aGUgdmlldyB0byBhbmNob3IgdG8uIElmIG5laXRoZXIgaXMgc2V0LFxuICAgICAgICAgICAgLy8gYW5jaG9yIHRvIHRoZSBlbmQuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGFydFNldF87XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52aWV3RnJvbV8gPT09IFwibFwiIC8qIFdJUkVfUFJPVE9DT0xfQ09OU1RBTlRTLlZJRVdfRlJPTV9MRUZUICovO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE9ubHkgdmFsaWQgdG8gY2FsbCBpZiBoYXNTdGFydCgpIHJldHVybnMgdHJ1ZVxuICAgICAqL1xuICAgIGdldEluZGV4U3RhcnRWYWx1ZSgpIHtcbiAgICAgICAgYXNzZXJ0KHRoaXMuc3RhcnRTZXRfLCAnT25seSB2YWxpZCBpZiBzdGFydCBoYXMgYmVlbiBzZXQnKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXhTdGFydFZhbHVlXztcbiAgICB9XG4gICAgLyoqXG4gICAgICogT25seSB2YWxpZCB0byBjYWxsIGlmIGhhc1N0YXJ0KCkgcmV0dXJucyB0cnVlLlxuICAgICAqIFJldHVybnMgdGhlIHN0YXJ0aW5nIGtleSBuYW1lIGZvciB0aGUgcmFuZ2UgZGVmaW5lZCBieSB0aGVzZSBxdWVyeSBwYXJhbWV0ZXJzXG4gICAgICovXG4gICAgZ2V0SW5kZXhTdGFydE5hbWUoKSB7XG4gICAgICAgIGFzc2VydCh0aGlzLnN0YXJ0U2V0XywgJ09ubHkgdmFsaWQgaWYgc3RhcnQgaGFzIGJlZW4gc2V0Jyk7XG4gICAgICAgIGlmICh0aGlzLnN0YXJ0TmFtZVNldF8pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluZGV4U3RhcnROYW1lXztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBNSU5fTkFNRTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYXNFbmQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZFNldF87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE9ubHkgdmFsaWQgdG8gY2FsbCBpZiBoYXNFbmQoKSByZXR1cm5zIHRydWUuXG4gICAgICovXG4gICAgZ2V0SW5kZXhFbmRWYWx1ZSgpIHtcbiAgICAgICAgYXNzZXJ0KHRoaXMuZW5kU2V0XywgJ09ubHkgdmFsaWQgaWYgZW5kIGhhcyBiZWVuIHNldCcpO1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleEVuZFZhbHVlXztcbiAgICB9XG4gICAgLyoqXG4gICAgICogT25seSB2YWxpZCB0byBjYWxsIGlmIGhhc0VuZCgpIHJldHVybnMgdHJ1ZS5cbiAgICAgKiBSZXR1cm5zIHRoZSBlbmQga2V5IG5hbWUgZm9yIHRoZSByYW5nZSBkZWZpbmVkIGJ5IHRoZXNlIHF1ZXJ5IHBhcmFtZXRlcnNcbiAgICAgKi9cbiAgICBnZXRJbmRleEVuZE5hbWUoKSB7XG4gICAgICAgIGFzc2VydCh0aGlzLmVuZFNldF8sICdPbmx5IHZhbGlkIGlmIGVuZCBoYXMgYmVlbiBzZXQnKTtcbiAgICAgICAgaWYgKHRoaXMuZW5kTmFtZVNldF8pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluZGV4RW5kTmFtZV87XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gTUFYX05BTUU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFzTGltaXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxpbWl0U2V0XztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybnMgVHJ1ZSBpZiBhIGxpbWl0IGhhcyBiZWVuIHNldCBhbmQgaXQgaGFzIGJlZW4gZXhwbGljaXRseSBhbmNob3JlZFxuICAgICAqL1xuICAgIGhhc0FuY2hvcmVkTGltaXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxpbWl0U2V0XyAmJiB0aGlzLnZpZXdGcm9tXyAhPT0gJyc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE9ubHkgdmFsaWQgdG8gY2FsbCBpZiBoYXNMaW1pdCgpIHJldHVybnMgdHJ1ZVxuICAgICAqL1xuICAgIGdldExpbWl0KCkge1xuICAgICAgICBhc3NlcnQodGhpcy5saW1pdFNldF8sICdPbmx5IHZhbGlkIGlmIGxpbWl0IGhhcyBiZWVuIHNldCcpO1xuICAgICAgICByZXR1cm4gdGhpcy5saW1pdF87XG4gICAgfVxuICAgIGdldEluZGV4KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleF87XG4gICAgfVxuICAgIGxvYWRzQWxsRGF0YSgpIHtcbiAgICAgICAgcmV0dXJuICEodGhpcy5zdGFydFNldF8gfHwgdGhpcy5lbmRTZXRfIHx8IHRoaXMubGltaXRTZXRfKTtcbiAgICB9XG4gICAgaXNEZWZhdWx0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2Fkc0FsbERhdGEoKSAmJiB0aGlzLmluZGV4XyA9PT0gUFJJT1JJVFlfSU5ERVg7XG4gICAgfVxuICAgIGNvcHkoKSB7XG4gICAgICAgIGNvbnN0IGNvcHkgPSBuZXcgUXVlcnlQYXJhbXMoKTtcbiAgICAgICAgY29weS5saW1pdFNldF8gPSB0aGlzLmxpbWl0U2V0XztcbiAgICAgICAgY29weS5saW1pdF8gPSB0aGlzLmxpbWl0XztcbiAgICAgICAgY29weS5zdGFydFNldF8gPSB0aGlzLnN0YXJ0U2V0XztcbiAgICAgICAgY29weS5zdGFydEFmdGVyU2V0XyA9IHRoaXMuc3RhcnRBZnRlclNldF87XG4gICAgICAgIGNvcHkuaW5kZXhTdGFydFZhbHVlXyA9IHRoaXMuaW5kZXhTdGFydFZhbHVlXztcbiAgICAgICAgY29weS5zdGFydE5hbWVTZXRfID0gdGhpcy5zdGFydE5hbWVTZXRfO1xuICAgICAgICBjb3B5LmluZGV4U3RhcnROYW1lXyA9IHRoaXMuaW5kZXhTdGFydE5hbWVfO1xuICAgICAgICBjb3B5LmVuZFNldF8gPSB0aGlzLmVuZFNldF87XG4gICAgICAgIGNvcHkuZW5kQmVmb3JlU2V0XyA9IHRoaXMuZW5kQmVmb3JlU2V0XztcbiAgICAgICAgY29weS5pbmRleEVuZFZhbHVlXyA9IHRoaXMuaW5kZXhFbmRWYWx1ZV87XG4gICAgICAgIGNvcHkuZW5kTmFtZVNldF8gPSB0aGlzLmVuZE5hbWVTZXRfO1xuICAgICAgICBjb3B5LmluZGV4RW5kTmFtZV8gPSB0aGlzLmluZGV4RW5kTmFtZV87XG4gICAgICAgIGNvcHkuaW5kZXhfID0gdGhpcy5pbmRleF87XG4gICAgICAgIGNvcHkudmlld0Zyb21fID0gdGhpcy52aWV3RnJvbV87XG4gICAgICAgIHJldHVybiBjb3B5O1xuICAgIH1cbn1cbmZ1bmN0aW9uIHF1ZXJ5UGFyYW1zR2V0Tm9kZUZpbHRlcihxdWVyeVBhcmFtcykge1xuICAgIGlmIChxdWVyeVBhcmFtcy5sb2Fkc0FsbERhdGEoKSkge1xuICAgICAgICByZXR1cm4gbmV3IEluZGV4ZWRGaWx0ZXIocXVlcnlQYXJhbXMuZ2V0SW5kZXgoKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHF1ZXJ5UGFyYW1zLmhhc0xpbWl0KCkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBMaW1pdGVkRmlsdGVyKHF1ZXJ5UGFyYW1zKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBuZXcgUmFuZ2VkRmlsdGVyKHF1ZXJ5UGFyYW1zKTtcbiAgICB9XG59XG5mdW5jdGlvbiBxdWVyeVBhcmFtc0xpbWl0VG9GaXJzdChxdWVyeVBhcmFtcywgbmV3TGltaXQpIHtcbiAgICBjb25zdCBuZXdQYXJhbXMgPSBxdWVyeVBhcmFtcy5jb3B5KCk7XG4gICAgbmV3UGFyYW1zLmxpbWl0U2V0XyA9IHRydWU7XG4gICAgbmV3UGFyYW1zLmxpbWl0XyA9IG5ld0xpbWl0O1xuICAgIG5ld1BhcmFtcy52aWV3RnJvbV8gPSBcImxcIiAvKiBXSVJFX1BST1RPQ09MX0NPTlNUQU5UUy5WSUVXX0ZST01fTEVGVCAqLztcbiAgICByZXR1cm4gbmV3UGFyYW1zO1xufVxuZnVuY3Rpb24gcXVlcnlQYXJhbXNMaW1pdFRvTGFzdChxdWVyeVBhcmFtcywgbmV3TGltaXQpIHtcbiAgICBjb25zdCBuZXdQYXJhbXMgPSBxdWVyeVBhcmFtcy5jb3B5KCk7XG4gICAgbmV3UGFyYW1zLmxpbWl0U2V0XyA9IHRydWU7XG4gICAgbmV3UGFyYW1zLmxpbWl0XyA9IG5ld0xpbWl0O1xuICAgIG5ld1BhcmFtcy52aWV3RnJvbV8gPSBcInJcIiAvKiBXSVJFX1BST1RPQ09MX0NPTlNUQU5UUy5WSUVXX0ZST01fUklHSFQgKi87XG4gICAgcmV0dXJuIG5ld1BhcmFtcztcbn1cbmZ1bmN0aW9uIHF1ZXJ5UGFyYW1zU3RhcnRBdChxdWVyeVBhcmFtcywgaW5kZXhWYWx1ZSwga2V5KSB7XG4gICAgY29uc3QgbmV3UGFyYW1zID0gcXVlcnlQYXJhbXMuY29weSgpO1xuICAgIG5ld1BhcmFtcy5zdGFydFNldF8gPSB0cnVlO1xuICAgIGlmIChpbmRleFZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaW5kZXhWYWx1ZSA9IG51bGw7XG4gICAgfVxuICAgIG5ld1BhcmFtcy5pbmRleFN0YXJ0VmFsdWVfID0gaW5kZXhWYWx1ZTtcbiAgICBpZiAoa2V5ICE9IG51bGwpIHtcbiAgICAgICAgbmV3UGFyYW1zLnN0YXJ0TmFtZVNldF8gPSB0cnVlO1xuICAgICAgICBuZXdQYXJhbXMuaW5kZXhTdGFydE5hbWVfID0ga2V5O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbmV3UGFyYW1zLnN0YXJ0TmFtZVNldF8gPSBmYWxzZTtcbiAgICAgICAgbmV3UGFyYW1zLmluZGV4U3RhcnROYW1lXyA9ICcnO1xuICAgIH1cbiAgICByZXR1cm4gbmV3UGFyYW1zO1xufVxuZnVuY3Rpb24gcXVlcnlQYXJhbXNTdGFydEFmdGVyKHF1ZXJ5UGFyYW1zLCBpbmRleFZhbHVlLCBrZXkpIHtcbiAgICBsZXQgcGFyYW1zO1xuICAgIGlmIChxdWVyeVBhcmFtcy5pbmRleF8gPT09IEtFWV9JTkRFWCB8fCAhIWtleSkge1xuICAgICAgICBwYXJhbXMgPSBxdWVyeVBhcmFtc1N0YXJ0QXQocXVlcnlQYXJhbXMsIGluZGV4VmFsdWUsIGtleSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBwYXJhbXMgPSBxdWVyeVBhcmFtc1N0YXJ0QXQocXVlcnlQYXJhbXMsIGluZGV4VmFsdWUsIE1BWF9OQU1FKTtcbiAgICB9XG4gICAgcGFyYW1zLnN0YXJ0QWZ0ZXJTZXRfID0gdHJ1ZTtcbiAgICByZXR1cm4gcGFyYW1zO1xufVxuZnVuY3Rpb24gcXVlcnlQYXJhbXNFbmRBdChxdWVyeVBhcmFtcywgaW5kZXhWYWx1ZSwga2V5KSB7XG4gICAgY29uc3QgbmV3UGFyYW1zID0gcXVlcnlQYXJhbXMuY29weSgpO1xuICAgIG5ld1BhcmFtcy5lbmRTZXRfID0gdHJ1ZTtcbiAgICBpZiAoaW5kZXhWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGluZGV4VmFsdWUgPSBudWxsO1xuICAgIH1cbiAgICBuZXdQYXJhbXMuaW5kZXhFbmRWYWx1ZV8gPSBpbmRleFZhbHVlO1xuICAgIGlmIChrZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBuZXdQYXJhbXMuZW5kTmFtZVNldF8gPSB0cnVlO1xuICAgICAgICBuZXdQYXJhbXMuaW5kZXhFbmROYW1lXyA9IGtleTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG5ld1BhcmFtcy5lbmROYW1lU2V0XyA9IGZhbHNlO1xuICAgICAgICBuZXdQYXJhbXMuaW5kZXhFbmROYW1lXyA9ICcnO1xuICAgIH1cbiAgICByZXR1cm4gbmV3UGFyYW1zO1xufVxuZnVuY3Rpb24gcXVlcnlQYXJhbXNFbmRCZWZvcmUocXVlcnlQYXJhbXMsIGluZGV4VmFsdWUsIGtleSkge1xuICAgIGxldCBwYXJhbXM7XG4gICAgaWYgKHF1ZXJ5UGFyYW1zLmluZGV4XyA9PT0gS0VZX0lOREVYIHx8ICEha2V5KSB7XG4gICAgICAgIHBhcmFtcyA9IHF1ZXJ5UGFyYW1zRW5kQXQocXVlcnlQYXJhbXMsIGluZGV4VmFsdWUsIGtleSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBwYXJhbXMgPSBxdWVyeVBhcmFtc0VuZEF0KHF1ZXJ5UGFyYW1zLCBpbmRleFZhbHVlLCBNSU5fTkFNRSk7XG4gICAgfVxuICAgIHBhcmFtcy5lbmRCZWZvcmVTZXRfID0gdHJ1ZTtcbiAgICByZXR1cm4gcGFyYW1zO1xufVxuZnVuY3Rpb24gcXVlcnlQYXJhbXNPcmRlckJ5KHF1ZXJ5UGFyYW1zLCBpbmRleCkge1xuICAgIGNvbnN0IG5ld1BhcmFtcyA9IHF1ZXJ5UGFyYW1zLmNvcHkoKTtcbiAgICBuZXdQYXJhbXMuaW5kZXhfID0gaW5kZXg7XG4gICAgcmV0dXJuIG5ld1BhcmFtcztcbn1cbi8qKlxuICogUmV0dXJucyBhIHNldCBvZiBSRVNUIHF1ZXJ5IHN0cmluZyBwYXJhbWV0ZXJzIHJlcHJlc2VudGluZyB0aGlzIHF1ZXJ5LlxuICpcbiAqIEByZXR1cm5zIHF1ZXJ5IHN0cmluZyBwYXJhbWV0ZXJzXG4gKi9cbmZ1bmN0aW9uIHF1ZXJ5UGFyYW1zVG9SZXN0UXVlcnlTdHJpbmdQYXJhbWV0ZXJzKHF1ZXJ5UGFyYW1zKSB7XG4gICAgY29uc3QgcXMgPSB7fTtcbiAgICBpZiAocXVlcnlQYXJhbXMuaXNEZWZhdWx0KCkpIHtcbiAgICAgICAgcmV0dXJuIHFzO1xuICAgIH1cbiAgICBsZXQgb3JkZXJCeTtcbiAgICBpZiAocXVlcnlQYXJhbXMuaW5kZXhfID09PSBQUklPUklUWV9JTkRFWCkge1xuICAgICAgICBvcmRlckJ5ID0gXCIkcHJpb3JpdHlcIiAvKiBSRVNUX1FVRVJZX0NPTlNUQU5UUy5QUklPUklUWV9JTkRFWCAqLztcbiAgICB9XG4gICAgZWxzZSBpZiAocXVlcnlQYXJhbXMuaW5kZXhfID09PSBWQUxVRV9JTkRFWCkge1xuICAgICAgICBvcmRlckJ5ID0gXCIkdmFsdWVcIiAvKiBSRVNUX1FVRVJZX0NPTlNUQU5UUy5WQUxVRV9JTkRFWCAqLztcbiAgICB9XG4gICAgZWxzZSBpZiAocXVlcnlQYXJhbXMuaW5kZXhfID09PSBLRVlfSU5ERVgpIHtcbiAgICAgICAgb3JkZXJCeSA9IFwiJGtleVwiIC8qIFJFU1RfUVVFUllfQ09OU1RBTlRTLktFWV9JTkRFWCAqLztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGFzc2VydChxdWVyeVBhcmFtcy5pbmRleF8gaW5zdGFuY2VvZiBQYXRoSW5kZXgsICdVbnJlY29nbml6ZWQgaW5kZXggdHlwZSEnKTtcbiAgICAgICAgb3JkZXJCeSA9IHF1ZXJ5UGFyYW1zLmluZGV4Xy50b1N0cmluZygpO1xuICAgIH1cbiAgICBxc1tcIm9yZGVyQnlcIiAvKiBSRVNUX1FVRVJZX0NPTlNUQU5UUy5PUkRFUl9CWSAqL10gPSBzdHJpbmdpZnkob3JkZXJCeSk7XG4gICAgaWYgKHF1ZXJ5UGFyYW1zLnN0YXJ0U2V0Xykge1xuICAgICAgICBjb25zdCBzdGFydFBhcmFtID0gcXVlcnlQYXJhbXMuc3RhcnRBZnRlclNldF9cbiAgICAgICAgICAgID8gXCJzdGFydEFmdGVyXCIgLyogUkVTVF9RVUVSWV9DT05TVEFOVFMuU1RBUlRfQUZURVIgKi9cbiAgICAgICAgICAgIDogXCJzdGFydEF0XCIgLyogUkVTVF9RVUVSWV9DT05TVEFOVFMuU1RBUlRfQVQgKi87XG4gICAgICAgIHFzW3N0YXJ0UGFyYW1dID0gc3RyaW5naWZ5KHF1ZXJ5UGFyYW1zLmluZGV4U3RhcnRWYWx1ZV8pO1xuICAgICAgICBpZiAocXVlcnlQYXJhbXMuc3RhcnROYW1lU2V0Xykge1xuICAgICAgICAgICAgcXNbc3RhcnRQYXJhbV0gKz0gJywnICsgc3RyaW5naWZ5KHF1ZXJ5UGFyYW1zLmluZGV4U3RhcnROYW1lXyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHF1ZXJ5UGFyYW1zLmVuZFNldF8pIHtcbiAgICAgICAgY29uc3QgZW5kUGFyYW0gPSBxdWVyeVBhcmFtcy5lbmRCZWZvcmVTZXRfXG4gICAgICAgICAgICA/IFwiZW5kQmVmb3JlXCIgLyogUkVTVF9RVUVSWV9DT05TVEFOVFMuRU5EX0JFRk9SRSAqL1xuICAgICAgICAgICAgOiBcImVuZEF0XCIgLyogUkVTVF9RVUVSWV9DT05TVEFOVFMuRU5EX0FUICovO1xuICAgICAgICBxc1tlbmRQYXJhbV0gPSBzdHJpbmdpZnkocXVlcnlQYXJhbXMuaW5kZXhFbmRWYWx1ZV8pO1xuICAgICAgICBpZiAocXVlcnlQYXJhbXMuZW5kTmFtZVNldF8pIHtcbiAgICAgICAgICAgIHFzW2VuZFBhcmFtXSArPSAnLCcgKyBzdHJpbmdpZnkocXVlcnlQYXJhbXMuaW5kZXhFbmROYW1lXyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHF1ZXJ5UGFyYW1zLmxpbWl0U2V0Xykge1xuICAgICAgICBpZiAocXVlcnlQYXJhbXMuaXNWaWV3RnJvbUxlZnQoKSkge1xuICAgICAgICAgICAgcXNbXCJsaW1pdFRvRmlyc3RcIiAvKiBSRVNUX1FVRVJZX0NPTlNUQU5UUy5MSU1JVF9UT19GSVJTVCAqL10gPSBxdWVyeVBhcmFtcy5saW1pdF87XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBxc1tcImxpbWl0VG9MYXN0XCIgLyogUkVTVF9RVUVSWV9DT05TVEFOVFMuTElNSVRfVE9fTEFTVCAqL10gPSBxdWVyeVBhcmFtcy5saW1pdF87XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHFzO1xufVxuZnVuY3Rpb24gcXVlcnlQYXJhbXNHZXRRdWVyeU9iamVjdChxdWVyeVBhcmFtcykge1xuICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgIGlmIChxdWVyeVBhcmFtcy5zdGFydFNldF8pIHtcbiAgICAgICAgb2JqW1wic3BcIiAvKiBXSVJFX1BST1RPQ09MX0NPTlNUQU5UUy5JTkRFWF9TVEFSVF9WQUxVRSAqL10gPVxuICAgICAgICAgICAgcXVlcnlQYXJhbXMuaW5kZXhTdGFydFZhbHVlXztcbiAgICAgICAgaWYgKHF1ZXJ5UGFyYW1zLnN0YXJ0TmFtZVNldF8pIHtcbiAgICAgICAgICAgIG9ialtcInNuXCIgLyogV0lSRV9QUk9UT0NPTF9DT05TVEFOVFMuSU5ERVhfU1RBUlRfTkFNRSAqL10gPVxuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zLmluZGV4U3RhcnROYW1lXztcbiAgICAgICAgfVxuICAgICAgICBvYmpbXCJzaW5cIiAvKiBXSVJFX1BST1RPQ09MX0NPTlNUQU5UUy5JTkRFWF9TVEFSVF9JU19JTkNMVVNJVkUgKi9dID1cbiAgICAgICAgICAgICFxdWVyeVBhcmFtcy5zdGFydEFmdGVyU2V0XztcbiAgICB9XG4gICAgaWYgKHF1ZXJ5UGFyYW1zLmVuZFNldF8pIHtcbiAgICAgICAgb2JqW1wiZXBcIiAvKiBXSVJFX1BST1RPQ09MX0NPTlNUQU5UUy5JTkRFWF9FTkRfVkFMVUUgKi9dID0gcXVlcnlQYXJhbXMuaW5kZXhFbmRWYWx1ZV87XG4gICAgICAgIGlmIChxdWVyeVBhcmFtcy5lbmROYW1lU2V0Xykge1xuICAgICAgICAgICAgb2JqW1wiZW5cIiAvKiBXSVJFX1BST1RPQ09MX0NPTlNUQU5UUy5JTkRFWF9FTkRfTkFNRSAqL10gPSBxdWVyeVBhcmFtcy5pbmRleEVuZE5hbWVfO1xuICAgICAgICB9XG4gICAgICAgIG9ialtcImVpblwiIC8qIFdJUkVfUFJPVE9DT0xfQ09OU1RBTlRTLklOREVYX0VORF9JU19JTkNMVVNJVkUgKi9dID1cbiAgICAgICAgICAgICFxdWVyeVBhcmFtcy5lbmRCZWZvcmVTZXRfO1xuICAgIH1cbiAgICBpZiAocXVlcnlQYXJhbXMubGltaXRTZXRfKSB7XG4gICAgICAgIG9ialtcImxcIiAvKiBXSVJFX1BST1RPQ09MX0NPTlNUQU5UUy5MSU1JVCAqL10gPSBxdWVyeVBhcmFtcy5saW1pdF87XG4gICAgICAgIGxldCB2aWV3RnJvbSA9IHF1ZXJ5UGFyYW1zLnZpZXdGcm9tXztcbiAgICAgICAgaWYgKHZpZXdGcm9tID09PSAnJykge1xuICAgICAgICAgICAgaWYgKHF1ZXJ5UGFyYW1zLmlzVmlld0Zyb21MZWZ0KCkpIHtcbiAgICAgICAgICAgICAgICB2aWV3RnJvbSA9IFwibFwiIC8qIFdJUkVfUFJPVE9DT0xfQ09OU1RBTlRTLlZJRVdfRlJPTV9MRUZUICovO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmlld0Zyb20gPSBcInJcIiAvKiBXSVJFX1BST1RPQ09MX0NPTlNUQU5UUy5WSUVXX0ZST01fUklHSFQgKi87XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgb2JqW1widmZcIiAvKiBXSVJFX1BST1RPQ09MX0NPTlNUQU5UUy5WSUVXX0ZST00gKi9dID0gdmlld0Zyb207XG4gICAgfVxuICAgIC8vIEZvciBub3csIHByaW9yaXR5IGluZGV4IGlzIHRoZSBkZWZhdWx0LCBzbyB3ZSBvbmx5IHNwZWNpZnkgaWYgaXQncyBzb21lIG90aGVyIGluZGV4XG4gICAgaWYgKHF1ZXJ5UGFyYW1zLmluZGV4XyAhPT0gUFJJT1JJVFlfSU5ERVgpIHtcbiAgICAgICAgb2JqW1wiaVwiIC8qIFdJUkVfUFJPVE9DT0xfQ09OU1RBTlRTLklOREVYICovXSA9IHF1ZXJ5UGFyYW1zLmluZGV4Xy50b1N0cmluZygpO1xuICAgIH1cbiAgICByZXR1cm4gb2JqO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiBTZXJ2ZXJBY3Rpb25zIHRoYXQgY29tbXVuaWNhdGVzIHdpdGggdGhlIHNlcnZlciB2aWEgUkVTVCByZXF1ZXN0cy5cbiAqIFRoaXMgaXMgbW9zdGx5IHVzZWZ1bCBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIGNyYXdsZXJzLCB3aGVyZSB3ZSBkb24ndCB3YW50IHRvIHNwaW4gdXAgYSBmdWxsXG4gKiBwZXJzaXN0ZW50IGNvbm5lY3Rpb24gKHVzaW5nIFdlYlNvY2tldHMgb3IgbG9uZy1wb2xsaW5nKVxuICovXG5jbGFzcyBSZWFkb25seVJlc3RDbGllbnQgZXh0ZW5kcyBTZXJ2ZXJBY3Rpb25zIHtcbiAgICByZXBvcnRTdGF0cyhzdGF0cykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01ldGhvZCBub3QgaW1wbGVtZW50ZWQuJyk7XG4gICAgfVxuICAgIHN0YXRpYyBnZXRMaXN0ZW5JZF8ocXVlcnksIHRhZykge1xuICAgICAgICBpZiAodGFnICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiAndGFnJCcgKyB0YWc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhc3NlcnQocXVlcnkuX3F1ZXJ5UGFyYW1zLmlzRGVmYXVsdCgpLCBcInNob3VsZCBoYXZlIGEgdGFnIGlmIGl0J3Mgbm90IGEgZGVmYXVsdCBxdWVyeS5cIik7XG4gICAgICAgICAgICByZXR1cm4gcXVlcnkuX3BhdGgudG9TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gcmVwb0luZm9fIC0gRGF0YSBhYm91dCB0aGUgbmFtZXNwYWNlIHdlIGFyZSBjb25uZWN0aW5nIHRvXG4gICAgICogQHBhcmFtIG9uRGF0YVVwZGF0ZV8gLSBBIGNhbGxiYWNrIGZvciBuZXcgZGF0YSBmcm9tIHRoZSBzZXJ2ZXJcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihyZXBvSW5mb18sIG9uRGF0YVVwZGF0ZV8sIGF1dGhUb2tlblByb3ZpZGVyXywgYXBwQ2hlY2tUb2tlblByb3ZpZGVyXykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJlcG9JbmZvXyA9IHJlcG9JbmZvXztcbiAgICAgICAgdGhpcy5vbkRhdGFVcGRhdGVfID0gb25EYXRhVXBkYXRlXztcbiAgICAgICAgdGhpcy5hdXRoVG9rZW5Qcm92aWRlcl8gPSBhdXRoVG9rZW5Qcm92aWRlcl87XG4gICAgICAgIHRoaXMuYXBwQ2hlY2tUb2tlblByb3ZpZGVyXyA9IGFwcENoZWNrVG9rZW5Qcm92aWRlcl87XG4gICAgICAgIC8qKiBAcHJpdmF0ZSB7ZnVuY3Rpb24oLi4uWypdKX0gKi9cbiAgICAgICAgdGhpcy5sb2dfID0gbG9nV3JhcHBlcigncDpyZXN0OicpO1xuICAgICAgICAvKipcbiAgICAgICAgICogV2UgZG9uJ3QgYWN0dWFsbHkgbmVlZCB0byB0cmFjayBsaXN0ZW5zLCBleGNlcHQgdG8gcHJldmVudCB1cyBjYWxsaW5nIGFuIG9uQ29tcGxldGUgZm9yIGEgbGlzdGVuXG4gICAgICAgICAqIHRoYXQncyBiZWVuIHJlbW92ZWQuIDotL1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5saXN0ZW5zXyA9IHt9O1xuICAgIH1cbiAgICAvKiogQGluaGVyaXREb2MgKi9cbiAgICBsaXN0ZW4ocXVlcnksIGN1cnJlbnRIYXNoRm4sIHRhZywgb25Db21wbGV0ZSkge1xuICAgICAgICBjb25zdCBwYXRoU3RyaW5nID0gcXVlcnkuX3BhdGgudG9TdHJpbmcoKTtcbiAgICAgICAgdGhpcy5sb2dfKCdMaXN0ZW4gY2FsbGVkIGZvciAnICsgcGF0aFN0cmluZyArICcgJyArIHF1ZXJ5Ll9xdWVyeUlkZW50aWZpZXIpO1xuICAgICAgICAvLyBNYXJrIHRoaXMgbGlzdGVuZXIgc28gd2UgY2FuIHRlbGwgaWYgaXQncyByZW1vdmVkLlxuICAgICAgICBjb25zdCBsaXN0ZW5JZCA9IFJlYWRvbmx5UmVzdENsaWVudC5nZXRMaXN0ZW5JZF8ocXVlcnksIHRhZyk7XG4gICAgICAgIGNvbnN0IHRoaXNMaXN0ZW4gPSB7fTtcbiAgICAgICAgdGhpcy5saXN0ZW5zX1tsaXN0ZW5JZF0gPSB0aGlzTGlzdGVuO1xuICAgICAgICBjb25zdCBxdWVyeVN0cmluZ1BhcmFtZXRlcnMgPSBxdWVyeVBhcmFtc1RvUmVzdFF1ZXJ5U3RyaW5nUGFyYW1ldGVycyhxdWVyeS5fcXVlcnlQYXJhbXMpO1xuICAgICAgICB0aGlzLnJlc3RSZXF1ZXN0XyhwYXRoU3RyaW5nICsgJy5qc29uJywgcXVlcnlTdHJpbmdQYXJhbWV0ZXJzLCAoZXJyb3IsIHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgbGV0IGRhdGEgPSByZXN1bHQ7XG4gICAgICAgICAgICBpZiAoZXJyb3IgPT09IDQwNCkge1xuICAgICAgICAgICAgICAgIGRhdGEgPSBudWxsO1xuICAgICAgICAgICAgICAgIGVycm9yID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlcnJvciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMub25EYXRhVXBkYXRlXyhwYXRoU3RyaW5nLCBkYXRhLCAvKmlzTWVyZ2U9Ki8gZmFsc2UsIHRhZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2FmZUdldCh0aGlzLmxpc3RlbnNfLCBsaXN0ZW5JZCkgPT09IHRoaXNMaXN0ZW4pIHtcbiAgICAgICAgICAgICAgICBsZXQgc3RhdHVzO1xuICAgICAgICAgICAgICAgIGlmICghZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gJ29rJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZXJyb3IgPT09IDQwMSkge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPSAncGVybWlzc2lvbl9kZW5pZWQnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gJ3Jlc3RfZXJyb3I6JyArIGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlKHN0YXR1cywgbnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKiogQGluaGVyaXREb2MgKi9cbiAgICB1bmxpc3RlbihxdWVyeSwgdGFnKSB7XG4gICAgICAgIGNvbnN0IGxpc3RlbklkID0gUmVhZG9ubHlSZXN0Q2xpZW50LmdldExpc3RlbklkXyhxdWVyeSwgdGFnKTtcbiAgICAgICAgZGVsZXRlIHRoaXMubGlzdGVuc19bbGlzdGVuSWRdO1xuICAgIH1cbiAgICBnZXQocXVlcnkpIHtcbiAgICAgICAgY29uc3QgcXVlcnlTdHJpbmdQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbXNUb1Jlc3RRdWVyeVN0cmluZ1BhcmFtZXRlcnMocXVlcnkuX3F1ZXJ5UGFyYW1zKTtcbiAgICAgICAgY29uc3QgcGF0aFN0cmluZyA9IHF1ZXJ5Ll9wYXRoLnRvU3RyaW5nKCk7XG4gICAgICAgIGNvbnN0IGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgIHRoaXMucmVzdFJlcXVlc3RfKHBhdGhTdHJpbmcgKyAnLmpzb24nLCBxdWVyeVN0cmluZ1BhcmFtZXRlcnMsIChlcnJvciwgcmVzdWx0KSA9PiB7XG4gICAgICAgICAgICBsZXQgZGF0YSA9IHJlc3VsdDtcbiAgICAgICAgICAgIGlmIChlcnJvciA9PT0gNDA0KSB7XG4gICAgICAgICAgICAgICAgZGF0YSA9IG51bGw7XG4gICAgICAgICAgICAgICAgZXJyb3IgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVycm9yID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkRhdGFVcGRhdGVfKHBhdGhTdHJpbmcsIGRhdGEsIFxuICAgICAgICAgICAgICAgIC8qaXNNZXJnZT0qLyBmYWxzZSwgXG4gICAgICAgICAgICAgICAgLyp0YWc9Ki8gbnVsbCk7XG4gICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChuZXcgRXJyb3IoZGF0YSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfVxuICAgIC8qKiBAaW5oZXJpdERvYyAqL1xuICAgIHJlZnJlc2hBdXRoVG9rZW4odG9rZW4pIHtcbiAgICAgICAgLy8gbm8tb3Agc2luY2Ugd2UganVzdCBhbHdheXMgY2FsbCBnZXRUb2tlbi5cbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgYSBSRVNUIHJlcXVlc3QgdG8gdGhlIGdpdmVuIHBhdGgsIHdpdGggdGhlIHByb3ZpZGVkIHF1ZXJ5IHN0cmluZyBwYXJhbWV0ZXJzLFxuICAgICAqIGFuZCBhbnkgYXV0aCBjcmVkZW50aWFscyB3ZSBoYXZlLlxuICAgICAqL1xuICAgIHJlc3RSZXF1ZXN0XyhwYXRoU3RyaW5nLCBxdWVyeVN0cmluZ1BhcmFtZXRlcnMgPSB7fSwgY2FsbGJhY2spIHtcbiAgICAgICAgcXVlcnlTdHJpbmdQYXJhbWV0ZXJzWydmb3JtYXQnXSA9ICdleHBvcnQnO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgdGhpcy5hdXRoVG9rZW5Qcm92aWRlcl8uZ2V0VG9rZW4oLypmb3JjZVJlZnJlc2g9Ki8gZmFsc2UpLFxuICAgICAgICAgICAgdGhpcy5hcHBDaGVja1Rva2VuUHJvdmlkZXJfLmdldFRva2VuKC8qZm9yY2VSZWZyZXNoPSovIGZhbHNlKVxuICAgICAgICBdKS50aGVuKChbYXV0aFRva2VuLCBhcHBDaGVja1Rva2VuXSkgPT4ge1xuICAgICAgICAgICAgaWYgKGF1dGhUb2tlbiAmJiBhdXRoVG9rZW4uYWNjZXNzVG9rZW4pIHtcbiAgICAgICAgICAgICAgICBxdWVyeVN0cmluZ1BhcmFtZXRlcnNbJ2F1dGgnXSA9IGF1dGhUb2tlbi5hY2Nlc3NUb2tlbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhcHBDaGVja1Rva2VuICYmIGFwcENoZWNrVG9rZW4udG9rZW4pIHtcbiAgICAgICAgICAgICAgICBxdWVyeVN0cmluZ1BhcmFtZXRlcnNbJ2FjJ10gPSBhcHBDaGVja1Rva2VuLnRva2VuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXJsID0gKHRoaXMucmVwb0luZm9fLnNlY3VyZSA/ICdodHRwczovLycgOiAnaHR0cDovLycpICtcbiAgICAgICAgICAgICAgICB0aGlzLnJlcG9JbmZvXy5ob3N0ICtcbiAgICAgICAgICAgICAgICBwYXRoU3RyaW5nICtcbiAgICAgICAgICAgICAgICAnPycgK1xuICAgICAgICAgICAgICAgICducz0nICtcbiAgICAgICAgICAgICAgICB0aGlzLnJlcG9JbmZvXy5uYW1lc3BhY2UgK1xuICAgICAgICAgICAgICAgIHF1ZXJ5c3RyaW5nKHF1ZXJ5U3RyaW5nUGFyYW1ldGVycyk7XG4gICAgICAgICAgICB0aGlzLmxvZ18oJ1NlbmRpbmcgUkVTVCByZXF1ZXN0IGZvciAnICsgdXJsKTtcbiAgICAgICAgICAgIGNvbnN0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgeGhyLnJlYWR5U3RhdGUgPT09IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dfKCdSRVNUIFJlc3BvbnNlIGZvciAnICsgdXJsICsgJyByZWNlaXZlZC4gc3RhdHVzOicsIHhoci5zdGF0dXMsICdyZXNwb25zZTonLCB4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlcyA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGlmICh4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDwgMzAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcyA9IGpzb25FdmFsKHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuKCdGYWlsZWQgdG8gcGFyc2UgSlNPTiByZXNwb25zZSBmb3IgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc6ICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIHJlcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyA0MDEgYW5kIDQwNCBhcmUgZXhwZWN0ZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyAhPT0gNDAxICYmIHhoci5zdGF0dXMgIT09IDQwNCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oJ0dvdCB1bnN1Y2Nlc3NmdWwgUkVTVCByZXNwb25zZSBmb3IgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgU3RhdHVzOiAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyLnN0YXR1cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayh4aHIuc3RhdHVzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHhoci5vcGVuKCdHRVQnLCB1cmwsIC8qYXN5bmNocm9ub3VzPSovIHRydWUpO1xuICAgICAgICAgICAgeGhyLnNlbmQoKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBNdXRhYmxlIG9iamVjdCB3aGljaCBiYXNpY2FsbHkganVzdCBzdG9yZXMgYSByZWZlcmVuY2UgdG8gdGhlIFwibGF0ZXN0XCIgaW1tdXRhYmxlIHNuYXBzaG90LlxuICovXG5jbGFzcyBTbmFwc2hvdEhvbGRlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucm9vdE5vZGVfID0gQ2hpbGRyZW5Ob2RlLkVNUFRZX05PREU7XG4gICAgfVxuICAgIGdldE5vZGUocGF0aCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290Tm9kZV8uZ2V0Q2hpbGQocGF0aCk7XG4gICAgfVxuICAgIHVwZGF0ZVNuYXBzaG90KHBhdGgsIG5ld1NuYXBzaG90Tm9kZSkge1xuICAgICAgICB0aGlzLnJvb3ROb2RlXyA9IHRoaXMucm9vdE5vZGVfLnVwZGF0ZUNoaWxkKHBhdGgsIG5ld1NuYXBzaG90Tm9kZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuZnVuY3Rpb24gbmV3U3BhcnNlU25hcHNob3RUcmVlKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICBjaGlsZHJlbjogbmV3IE1hcCgpXG4gICAgfTtcbn1cbi8qKlxuICogU3RvcmVzIHRoZSBnaXZlbiBub2RlIGF0IHRoZSBzcGVjaWZpZWQgcGF0aC4gSWYgdGhlcmUgaXMgYWxyZWFkeSBhIG5vZGVcbiAqIGF0IGEgc2hhbGxvd2VyIHBhdGgsIGl0IG1lcmdlcyB0aGUgbmV3IGRhdGEgaW50byB0aGF0IHNuYXBzaG90IG5vZGUuXG4gKlxuICogQHBhcmFtIHBhdGggLSBQYXRoIHRvIGxvb2sgdXAgc25hcHNob3QgZm9yLlxuICogQHBhcmFtIGRhdGEgLSBUaGUgbmV3IGRhdGEsIG9yIG51bGwuXG4gKi9cbmZ1bmN0aW9uIHNwYXJzZVNuYXBzaG90VHJlZVJlbWVtYmVyKHNwYXJzZVNuYXBzaG90VHJlZSwgcGF0aCwgZGF0YSkge1xuICAgIGlmIChwYXRoSXNFbXB0eShwYXRoKSkge1xuICAgICAgICBzcGFyc2VTbmFwc2hvdFRyZWUudmFsdWUgPSBkYXRhO1xuICAgICAgICBzcGFyc2VTbmFwc2hvdFRyZWUuY2hpbGRyZW4uY2xlYXIoKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc3BhcnNlU25hcHNob3RUcmVlLnZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgIHNwYXJzZVNuYXBzaG90VHJlZS52YWx1ZSA9IHNwYXJzZVNuYXBzaG90VHJlZS52YWx1ZS51cGRhdGVDaGlsZChwYXRoLCBkYXRhKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IGNoaWxkS2V5ID0gcGF0aEdldEZyb250KHBhdGgpO1xuICAgICAgICBpZiAoIXNwYXJzZVNuYXBzaG90VHJlZS5jaGlsZHJlbi5oYXMoY2hpbGRLZXkpKSB7XG4gICAgICAgICAgICBzcGFyc2VTbmFwc2hvdFRyZWUuY2hpbGRyZW4uc2V0KGNoaWxkS2V5LCBuZXdTcGFyc2VTbmFwc2hvdFRyZWUoKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2hpbGQgPSBzcGFyc2VTbmFwc2hvdFRyZWUuY2hpbGRyZW4uZ2V0KGNoaWxkS2V5KTtcbiAgICAgICAgcGF0aCA9IHBhdGhQb3BGcm9udChwYXRoKTtcbiAgICAgICAgc3BhcnNlU25hcHNob3RUcmVlUmVtZW1iZXIoY2hpbGQsIHBhdGgsIGRhdGEpO1xuICAgIH1cbn1cbi8qKlxuICogUHVyZ2UgdGhlIGRhdGEgYXQgcGF0aCBmcm9tIHRoZSBjYWNoZS5cbiAqXG4gKiBAcGFyYW0gcGF0aCAtIFBhdGggdG8gbG9vayB1cCBzbmFwc2hvdCBmb3IuXG4gKiBAcmV0dXJucyBUcnVlIGlmIHRoaXMgbm9kZSBzaG91bGQgbm93IGJlIHJlbW92ZWQuXG4gKi9cbmZ1bmN0aW9uIHNwYXJzZVNuYXBzaG90VHJlZUZvcmdldChzcGFyc2VTbmFwc2hvdFRyZWUsIHBhdGgpIHtcbiAgICBpZiAocGF0aElzRW1wdHkocGF0aCkpIHtcbiAgICAgICAgc3BhcnNlU25hcHNob3RUcmVlLnZhbHVlID0gbnVsbDtcbiAgICAgICAgc3BhcnNlU25hcHNob3RUcmVlLmNoaWxkcmVuLmNsZWFyKCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKHNwYXJzZVNuYXBzaG90VHJlZS52YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKHNwYXJzZVNuYXBzaG90VHJlZS52YWx1ZS5pc0xlYWZOb2RlKCkpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSdyZSB0cnlpbmcgdG8gZm9yZ2V0IGEgbm9kZSB0aGF0IGRvZXNuJ3QgZXhpc3RcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHNwYXJzZVNuYXBzaG90VHJlZS52YWx1ZTtcbiAgICAgICAgICAgICAgICBzcGFyc2VTbmFwc2hvdFRyZWUudmFsdWUgPSBudWxsO1xuICAgICAgICAgICAgICAgIHZhbHVlLmZvckVhY2hDaGlsZChQUklPUklUWV9JTkRFWCwgKGtleSwgdHJlZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzcGFyc2VTbmFwc2hvdFRyZWVSZW1lbWJlcihzcGFyc2VTbmFwc2hvdFRyZWUsIG5ldyBQYXRoKGtleSksIHRyZWUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBzcGFyc2VTbmFwc2hvdFRyZWVGb3JnZXQoc3BhcnNlU25hcHNob3RUcmVlLCBwYXRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzcGFyc2VTbmFwc2hvdFRyZWUuY2hpbGRyZW4uc2l6ZSA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkS2V5ID0gcGF0aEdldEZyb250KHBhdGgpO1xuICAgICAgICAgICAgcGF0aCA9IHBhdGhQb3BGcm9udChwYXRoKTtcbiAgICAgICAgICAgIGlmIChzcGFyc2VTbmFwc2hvdFRyZWUuY2hpbGRyZW4uaGFzKGNoaWxkS2V5KSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNhZmVUb1JlbW92ZSA9IHNwYXJzZVNuYXBzaG90VHJlZUZvcmdldChzcGFyc2VTbmFwc2hvdFRyZWUuY2hpbGRyZW4uZ2V0KGNoaWxkS2V5KSwgcGF0aCk7XG4gICAgICAgICAgICAgICAgaWYgKHNhZmVUb1JlbW92ZSkge1xuICAgICAgICAgICAgICAgICAgICBzcGFyc2VTbmFwc2hvdFRyZWUuY2hpbGRyZW4uZGVsZXRlKGNoaWxkS2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc3BhcnNlU25hcHNob3RUcmVlLmNoaWxkcmVuLnNpemUgPT09IDA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogUmVjdXJzaXZlbHkgaXRlcmF0ZXMgdGhyb3VnaCBhbGwgb2YgdGhlIHN0b3JlZCB0cmVlIGFuZCBjYWxscyB0aGVcbiAqIGNhbGxiYWNrIG9uIGVhY2ggb25lLlxuICpcbiAqIEBwYXJhbSBwcmVmaXhQYXRoIC0gUGF0aCB0byBsb29rIHVwIG5vZGUgZm9yLlxuICogQHBhcmFtIGZ1bmMgLSBUaGUgZnVuY3Rpb24gdG8gaW52b2tlIGZvciBlYWNoIHRyZWUuXG4gKi9cbmZ1bmN0aW9uIHNwYXJzZVNuYXBzaG90VHJlZUZvckVhY2hUcmVlKHNwYXJzZVNuYXBzaG90VHJlZSwgcHJlZml4UGF0aCwgZnVuYykge1xuICAgIGlmIChzcGFyc2VTbmFwc2hvdFRyZWUudmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgZnVuYyhwcmVmaXhQYXRoLCBzcGFyc2VTbmFwc2hvdFRyZWUudmFsdWUpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc3BhcnNlU25hcHNob3RUcmVlRm9yRWFjaENoaWxkKHNwYXJzZVNuYXBzaG90VHJlZSwgKGtleSwgdHJlZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcGF0aCA9IG5ldyBQYXRoKHByZWZpeFBhdGgudG9TdHJpbmcoKSArICcvJyArIGtleSk7XG4gICAgICAgICAgICBzcGFyc2VTbmFwc2hvdFRyZWVGb3JFYWNoVHJlZSh0cmVlLCBwYXRoLCBmdW5jKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLyoqXG4gKiBJdGVyYXRlcyB0aHJvdWdoIGVhY2ggaW1tZWRpYXRlIGNoaWxkIGFuZCB0cmlnZ2VycyB0aGUgY2FsbGJhY2suXG4gKiBPbmx5IHNlZW1zIHRvIGJlIHVzZWQgaW4gdGVzdHMuXG4gKlxuICogQHBhcmFtIGZ1bmMgLSBUaGUgZnVuY3Rpb24gdG8gaW52b2tlIGZvciBlYWNoIGNoaWxkLlxuICovXG5mdW5jdGlvbiBzcGFyc2VTbmFwc2hvdFRyZWVGb3JFYWNoQ2hpbGQoc3BhcnNlU25hcHNob3RUcmVlLCBmdW5jKSB7XG4gICAgc3BhcnNlU25hcHNob3RUcmVlLmNoaWxkcmVuLmZvckVhY2goKHRyZWUsIGtleSkgPT4ge1xuICAgICAgICBmdW5jKGtleSwgdHJlZSk7XG4gICAgfSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJldHVybnMgdGhlIGRlbHRhIGZyb20gdGhlIHByZXZpb3VzIGNhbGwgdG8gZ2V0IHN0YXRzLlxuICpcbiAqIEBwYXJhbSBjb2xsZWN0aW9uXyAtIFRoZSBjb2xsZWN0aW9uIHRvIFwibGlzdGVuXCIgdG8uXG4gKi9cbmNsYXNzIFN0YXRzTGlzdGVuZXIge1xuICAgIGNvbnN0cnVjdG9yKGNvbGxlY3Rpb25fKSB7XG4gICAgICAgIHRoaXMuY29sbGVjdGlvbl8gPSBjb2xsZWN0aW9uXztcbiAgICAgICAgdGhpcy5sYXN0XyA9IG51bGw7XG4gICAgfVxuICAgIGdldCgpIHtcbiAgICAgICAgY29uc3QgbmV3U3RhdHMgPSB0aGlzLmNvbGxlY3Rpb25fLmdldCgpO1xuICAgICAgICBjb25zdCBkZWx0YSA9IE9iamVjdC5hc3NpZ24oe30sIG5ld1N0YXRzKTtcbiAgICAgICAgaWYgKHRoaXMubGFzdF8pIHtcbiAgICAgICAgICAgIGVhY2godGhpcy5sYXN0XywgKHN0YXQsIHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgZGVsdGFbc3RhdF0gPSBkZWx0YVtzdGF0XSAtIHZhbHVlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sYXN0XyA9IG5ld1N0YXRzO1xuICAgICAgICByZXR1cm4gZGVsdGE7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gQXNzdW1pbmcgc29tZSBhcHBzIG1heSBoYXZlIGEgc2hvcnQgYW1vdW50IG9mIHRpbWUgb24gcGFnZSwgYW5kIGEgYnVsayBvZiBmaXJlYmFzZSBvcGVyYXRpb25zIHByb2JhYmx5XG4vLyBoYXBwZW4gb24gcGFnZSBsb2FkLCB3ZSB0cnkgdG8gcmVwb3J0IG91ciBmaXJzdCBzZXQgb2Ygc3RhdHMgcHJldHR5IHF1aWNrbHksIGJ1dCB3ZSB3YWl0IGF0IGxlYXN0IDEwXG4vLyBzZWNvbmRzIHRvIHRyeSB0byBlbnN1cmUgdGhlIEZpcmViYXNlIGNvbm5lY3Rpb24gaXMgZXN0YWJsaXNoZWQgLyBzZXR0bGVkLlxuY29uc3QgRklSU1RfU1RBVFNfTUlOX1RJTUUgPSAxMCAqIDEwMDA7XG5jb25zdCBGSVJTVF9TVEFUU19NQVhfVElNRSA9IDMwICogMTAwMDtcbi8vIFdlJ2xsIGNvbnRpbnVlIHRvIHJlcG9ydCBzdGF0cyBvbiBhdmVyYWdlIGV2ZXJ5IDUgbWludXRlcy5cbmNvbnN0IFJFUE9SVF9TVEFUU19JTlRFUlZBTCA9IDUgKiA2MCAqIDEwMDA7XG5jbGFzcyBTdGF0c1JlcG9ydGVyIHtcbiAgICBjb25zdHJ1Y3Rvcihjb2xsZWN0aW9uLCBzZXJ2ZXJfKSB7XG4gICAgICAgIHRoaXMuc2VydmVyXyA9IHNlcnZlcl87XG4gICAgICAgIHRoaXMuc3RhdHNUb1JlcG9ydF8gPSB7fTtcbiAgICAgICAgdGhpcy5zdGF0c0xpc3RlbmVyXyA9IG5ldyBTdGF0c0xpc3RlbmVyKGNvbGxlY3Rpb24pO1xuICAgICAgICBjb25zdCB0aW1lb3V0ID0gRklSU1RfU1RBVFNfTUlOX1RJTUUgK1xuICAgICAgICAgICAgKEZJUlNUX1NUQVRTX01BWF9USU1FIC0gRklSU1RfU1RBVFNfTUlOX1RJTUUpICogTWF0aC5yYW5kb20oKTtcbiAgICAgICAgc2V0VGltZW91dE5vbkJsb2NraW5nKHRoaXMucmVwb3J0U3RhdHNfLmJpbmQodGhpcyksIE1hdGguZmxvb3IodGltZW91dCkpO1xuICAgIH1cbiAgICByZXBvcnRTdGF0c18oKSB7XG4gICAgICAgIGNvbnN0IHN0YXRzID0gdGhpcy5zdGF0c0xpc3RlbmVyXy5nZXQoKTtcbiAgICAgICAgY29uc3QgcmVwb3J0ZWRTdGF0cyA9IHt9O1xuICAgICAgICBsZXQgaGF2ZVN0YXRzVG9SZXBvcnQgPSBmYWxzZTtcbiAgICAgICAgZWFjaChzdGF0cywgKHN0YXQsIHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBpZiAodmFsdWUgPiAwICYmIGNvbnRhaW5zKHRoaXMuc3RhdHNUb1JlcG9ydF8sIHN0YXQpKSB7XG4gICAgICAgICAgICAgICAgcmVwb3J0ZWRTdGF0c1tzdGF0XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIGhhdmVTdGF0c1RvUmVwb3J0ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChoYXZlU3RhdHNUb1JlcG9ydCkge1xuICAgICAgICAgICAgdGhpcy5zZXJ2ZXJfLnJlcG9ydFN0YXRzKHJlcG9ydGVkU3RhdHMpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHF1ZXVlIG91ciBuZXh0IHJ1bi5cbiAgICAgICAgc2V0VGltZW91dE5vbkJsb2NraW5nKHRoaXMucmVwb3J0U3RhdHNfLmJpbmQodGhpcyksIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIgKiBSRVBPUlRfU1RBVFNfSU5URVJWQUwpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqXG4gKiBAZW51bVxuICovXG52YXIgT3BlcmF0aW9uVHlwZTtcbihmdW5jdGlvbiAoT3BlcmF0aW9uVHlwZSkge1xuICAgIE9wZXJhdGlvblR5cGVbT3BlcmF0aW9uVHlwZVtcIk9WRVJXUklURVwiXSA9IDBdID0gXCJPVkVSV1JJVEVcIjtcbiAgICBPcGVyYXRpb25UeXBlW09wZXJhdGlvblR5cGVbXCJNRVJHRVwiXSA9IDFdID0gXCJNRVJHRVwiO1xuICAgIE9wZXJhdGlvblR5cGVbT3BlcmF0aW9uVHlwZVtcIkFDS19VU0VSX1dSSVRFXCJdID0gMl0gPSBcIkFDS19VU0VSX1dSSVRFXCI7XG4gICAgT3BlcmF0aW9uVHlwZVtPcGVyYXRpb25UeXBlW1wiTElTVEVOX0NPTVBMRVRFXCJdID0gM10gPSBcIkxJU1RFTl9DT01QTEVURVwiO1xufSkoT3BlcmF0aW9uVHlwZSB8fCAoT3BlcmF0aW9uVHlwZSA9IHt9KSk7XG5mdW5jdGlvbiBuZXdPcGVyYXRpb25Tb3VyY2VVc2VyKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGZyb21Vc2VyOiB0cnVlLFxuICAgICAgICBmcm9tU2VydmVyOiBmYWxzZSxcbiAgICAgICAgcXVlcnlJZDogbnVsbCxcbiAgICAgICAgdGFnZ2VkOiBmYWxzZVxuICAgIH07XG59XG5mdW5jdGlvbiBuZXdPcGVyYXRpb25Tb3VyY2VTZXJ2ZXIoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZnJvbVVzZXI6IGZhbHNlLFxuICAgICAgICBmcm9tU2VydmVyOiB0cnVlLFxuICAgICAgICBxdWVyeUlkOiBudWxsLFxuICAgICAgICB0YWdnZWQ6IGZhbHNlXG4gICAgfTtcbn1cbmZ1bmN0aW9uIG5ld09wZXJhdGlvblNvdXJjZVNlcnZlclRhZ2dlZFF1ZXJ5KHF1ZXJ5SWQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBmcm9tVXNlcjogZmFsc2UsXG4gICAgICAgIGZyb21TZXJ2ZXI6IHRydWUsXG4gICAgICAgIHF1ZXJ5SWQsXG4gICAgICAgIHRhZ2dlZDogdHJ1ZVxuICAgIH07XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jbGFzcyBBY2tVc2VyV3JpdGUge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBhZmZlY3RlZFRyZWUgLSBBIHRyZWUgY29udGFpbmluZyB0cnVlIGZvciBlYWNoIGFmZmVjdGVkIHBhdGguIEFmZmVjdGVkIHBhdGhzIGNhbid0IG92ZXJsYXAuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIEBpbmhlcml0RG9jICovIHBhdGgsIFxuICAgIC8qKiBAaW5oZXJpdERvYyAqLyBhZmZlY3RlZFRyZWUsIFxuICAgIC8qKiBAaW5oZXJpdERvYyAqLyByZXZlcnQpIHtcbiAgICAgICAgdGhpcy5wYXRoID0gcGF0aDtcbiAgICAgICAgdGhpcy5hZmZlY3RlZFRyZWUgPSBhZmZlY3RlZFRyZWU7XG4gICAgICAgIHRoaXMucmV2ZXJ0ID0gcmV2ZXJ0O1xuICAgICAgICAvKiogQGluaGVyaXREb2MgKi9cbiAgICAgICAgdGhpcy50eXBlID0gT3BlcmF0aW9uVHlwZS5BQ0tfVVNFUl9XUklURTtcbiAgICAgICAgLyoqIEBpbmhlcml0RG9jICovXG4gICAgICAgIHRoaXMuc291cmNlID0gbmV3T3BlcmF0aW9uU291cmNlVXNlcigpO1xuICAgIH1cbiAgICBvcGVyYXRpb25Gb3JDaGlsZChjaGlsZE5hbWUpIHtcbiAgICAgICAgaWYgKCFwYXRoSXNFbXB0eSh0aGlzLnBhdGgpKSB7XG4gICAgICAgICAgICBhc3NlcnQocGF0aEdldEZyb250KHRoaXMucGF0aCkgPT09IGNoaWxkTmFtZSwgJ29wZXJhdGlvbkZvckNoaWxkIGNhbGxlZCBmb3IgdW5yZWxhdGVkIGNoaWxkLicpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBBY2tVc2VyV3JpdGUocGF0aFBvcEZyb250KHRoaXMucGF0aCksIHRoaXMuYWZmZWN0ZWRUcmVlLCB0aGlzLnJldmVydCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5hZmZlY3RlZFRyZWUudmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAgICAgYXNzZXJ0KHRoaXMuYWZmZWN0ZWRUcmVlLmNoaWxkcmVuLmlzRW1wdHkoKSwgJ2FmZmVjdGVkVHJlZSBzaG91bGQgbm90IGhhdmUgb3ZlcmxhcHBpbmcgYWZmZWN0ZWQgcGF0aHMuJyk7XG4gICAgICAgICAgICAvLyBBbGwgY2hpbGQgbG9jYXRpb25zIGFyZSBhZmZlY3RlZCBhcyB3ZWxsOyBqdXN0IHJldHVybiBzYW1lIG9wZXJhdGlvbi5cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgY2hpbGRUcmVlID0gdGhpcy5hZmZlY3RlZFRyZWUuc3VidHJlZShuZXcgUGF0aChjaGlsZE5hbWUpKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQWNrVXNlcldyaXRlKG5ld0VtcHR5UGF0aCgpLCBjaGlsZFRyZWUsIHRoaXMucmV2ZXJ0KTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNsYXNzIExpc3RlbkNvbXBsZXRlIHtcbiAgICBjb25zdHJ1Y3Rvcihzb3VyY2UsIHBhdGgpIHtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICAgIHRoaXMucGF0aCA9IHBhdGg7XG4gICAgICAgIC8qKiBAaW5oZXJpdERvYyAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBPcGVyYXRpb25UeXBlLkxJU1RFTl9DT01QTEVURTtcbiAgICB9XG4gICAgb3BlcmF0aW9uRm9yQ2hpbGQoY2hpbGROYW1lKSB7XG4gICAgICAgIGlmIChwYXRoSXNFbXB0eSh0aGlzLnBhdGgpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IExpc3RlbkNvbXBsZXRlKHRoaXMuc291cmNlLCBuZXdFbXB0eVBhdGgoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IExpc3RlbkNvbXBsZXRlKHRoaXMuc291cmNlLCBwYXRoUG9wRnJvbnQodGhpcy5wYXRoKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jbGFzcyBPdmVyd3JpdGUge1xuICAgIGNvbnN0cnVjdG9yKHNvdXJjZSwgcGF0aCwgc25hcCkge1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgdGhpcy5wYXRoID0gcGF0aDtcbiAgICAgICAgdGhpcy5zbmFwID0gc25hcDtcbiAgICAgICAgLyoqIEBpbmhlcml0RG9jICovXG4gICAgICAgIHRoaXMudHlwZSA9IE9wZXJhdGlvblR5cGUuT1ZFUldSSVRFO1xuICAgIH1cbiAgICBvcGVyYXRpb25Gb3JDaGlsZChjaGlsZE5hbWUpIHtcbiAgICAgICAgaWYgKHBhdGhJc0VtcHR5KHRoaXMucGF0aCkpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgT3ZlcndyaXRlKHRoaXMuc291cmNlLCBuZXdFbXB0eVBhdGgoKSwgdGhpcy5zbmFwLmdldEltbWVkaWF0ZUNoaWxkKGNoaWxkTmFtZSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBPdmVyd3JpdGUodGhpcy5zb3VyY2UsIHBhdGhQb3BGcm9udCh0aGlzLnBhdGgpLCB0aGlzLnNuYXApO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY2xhc3MgTWVyZ2Uge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBAaW5oZXJpdERvYyAqLyBzb3VyY2UsIFxuICAgIC8qKiBAaW5oZXJpdERvYyAqLyBwYXRoLCBcbiAgICAvKiogQGluaGVyaXREb2MgKi8gY2hpbGRyZW4pIHtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICAgIHRoaXMucGF0aCA9IHBhdGg7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgICAgICAgLyoqIEBpbmhlcml0RG9jICovXG4gICAgICAgIHRoaXMudHlwZSA9IE9wZXJhdGlvblR5cGUuTUVSR0U7XG4gICAgfVxuICAgIG9wZXJhdGlvbkZvckNoaWxkKGNoaWxkTmFtZSkge1xuICAgICAgICBpZiAocGF0aElzRW1wdHkodGhpcy5wYXRoKSkge1xuICAgICAgICAgICAgY29uc3QgY2hpbGRUcmVlID0gdGhpcy5jaGlsZHJlbi5zdWJ0cmVlKG5ldyBQYXRoKGNoaWxkTmFtZSkpO1xuICAgICAgICAgICAgaWYgKGNoaWxkVHJlZS5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGNoaWxkIGlzIHVuYWZmZWN0ZWRcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoaWxkVHJlZS52YWx1ZSkge1xuICAgICAgICAgICAgICAgIC8vIFdlIGhhdmUgYSBzbmFwc2hvdCBmb3IgdGhlIGNoaWxkIGluIHF1ZXN0aW9uLiAgVGhpcyBiZWNvbWVzIGFuIG92ZXJ3cml0ZSBvZiB0aGUgY2hpbGQuXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBPdmVyd3JpdGUodGhpcy5zb3VyY2UsIG5ld0VtcHR5UGF0aCgpLCBjaGlsZFRyZWUudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBhIG1lcmdlIGF0IGEgZGVlcGVyIGxldmVsXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBNZXJnZSh0aGlzLnNvdXJjZSwgbmV3RW1wdHlQYXRoKCksIGNoaWxkVHJlZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhc3NlcnQocGF0aEdldEZyb250KHRoaXMucGF0aCkgPT09IGNoaWxkTmFtZSwgXCJDYW4ndCBnZXQgYSBtZXJnZSBmb3IgYSBjaGlsZCBub3Qgb24gdGhlIHBhdGggb2YgdGhlIG9wZXJhdGlvblwiKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTWVyZ2UodGhpcy5zb3VyY2UsIHBhdGhQb3BGcm9udCh0aGlzLnBhdGgpLCB0aGlzLmNoaWxkcmVuKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuICgnT3BlcmF0aW9uKCcgK1xuICAgICAgICAgICAgdGhpcy5wYXRoICtcbiAgICAgICAgICAgICc6ICcgK1xuICAgICAgICAgICAgdGhpcy5zb3VyY2UudG9TdHJpbmcoKSArXG4gICAgICAgICAgICAnIG1lcmdlOiAnICtcbiAgICAgICAgICAgIHRoaXMuY2hpbGRyZW4udG9TdHJpbmcoKSArXG4gICAgICAgICAgICAnKScpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBjYWNoZSBub2RlIG9ubHkgc3RvcmVzIGNvbXBsZXRlIGNoaWxkcmVuLiBBZGRpdGlvbmFsbHkgaXQgaG9sZHMgYSBmbGFnIHdoZXRoZXIgdGhlIG5vZGUgY2FuIGJlIGNvbnNpZGVyZWQgZnVsbHlcbiAqIGluaXRpYWxpemVkIGluIHRoZSBzZW5zZSB0aGF0IHdlIGtub3cgYXQgb25lIHBvaW50IGluIHRpbWUgdGhpcyByZXByZXNlbnRlZCBhIHZhbGlkIHN0YXRlIG9mIHRoZSB3b3JsZCwgZS5nLlxuICogaW5pdGlhbGl6ZWQgd2l0aCBkYXRhIGZyb20gdGhlIHNlcnZlciwgb3IgYSBjb21wbGV0ZSBvdmVyd3JpdGUgYnkgdGhlIGNsaWVudC4gVGhlIGZpbHRlcmVkIGZsYWcgYWxzbyB0cmFja3NcbiAqIHdoZXRoZXIgYSBub2RlIHBvdGVudGlhbGx5IGhhZCBjaGlsZHJlbiByZW1vdmVkIGR1ZSB0byBhIGZpbHRlci5cbiAqL1xuY2xhc3MgQ2FjaGVOb2RlIHtcbiAgICBjb25zdHJ1Y3Rvcihub2RlXywgZnVsbHlJbml0aWFsaXplZF8sIGZpbHRlcmVkXykge1xuICAgICAgICB0aGlzLm5vZGVfID0gbm9kZV87XG4gICAgICAgIHRoaXMuZnVsbHlJbml0aWFsaXplZF8gPSBmdWxseUluaXRpYWxpemVkXztcbiAgICAgICAgdGhpcy5maWx0ZXJlZF8gPSBmaWx0ZXJlZF87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciB0aGlzIG5vZGUgd2FzIGZ1bGx5IGluaXRpYWxpemVkIHdpdGggZWl0aGVyIHNlcnZlciBkYXRhIG9yIGEgY29tcGxldGUgb3ZlcndyaXRlIGJ5IHRoZSBjbGllbnRcbiAgICAgKi9cbiAgICBpc0Z1bGx5SW5pdGlhbGl6ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZ1bGx5SW5pdGlhbGl6ZWRfO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhpcyBub2RlIGlzIHBvdGVudGlhbGx5IG1pc3NpbmcgY2hpbGRyZW4gZHVlIHRvIGEgZmlsdGVyIGFwcGxpZWQgdG8gdGhlIG5vZGVcbiAgICAgKi9cbiAgICBpc0ZpbHRlcmVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maWx0ZXJlZF87XG4gICAgfVxuICAgIGlzQ29tcGxldGVGb3JQYXRoKHBhdGgpIHtcbiAgICAgICAgaWYgKHBhdGhJc0VtcHR5KHBhdGgpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pc0Z1bGx5SW5pdGlhbGl6ZWQoKSAmJiAhdGhpcy5maWx0ZXJlZF87XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2hpbGRLZXkgPSBwYXRoR2V0RnJvbnQocGF0aCk7XG4gICAgICAgIHJldHVybiB0aGlzLmlzQ29tcGxldGVGb3JDaGlsZChjaGlsZEtleSk7XG4gICAgfVxuICAgIGlzQ29tcGxldGVGb3JDaGlsZChrZXkpIHtcbiAgICAgICAgcmV0dXJuICgodGhpcy5pc0Z1bGx5SW5pdGlhbGl6ZWQoKSAmJiAhdGhpcy5maWx0ZXJlZF8pIHx8IHRoaXMubm9kZV8uaGFzQ2hpbGQoa2V5KSk7XG4gICAgfVxuICAgIGdldE5vZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5vZGVfO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gRXZlbnRHZW5lcmF0b3IgaXMgdXNlZCB0byBjb252ZXJ0IFwicmF3XCIgY2hhbmdlcyAoQ2hhbmdlKSBhcyBjb21wdXRlZCBieSB0aGVcbiAqIENhY2hlRGlmZmVyIGludG8gYWN0dWFsIGV2ZW50cyAoRXZlbnQpIHRoYXQgY2FuIGJlIHJhaXNlZC4gIFNlZSBnZW5lcmF0ZUV2ZW50c0ZvckNoYW5nZXMoKVxuICogZm9yIGRldGFpbHMuXG4gKlxuICovXG5jbGFzcyBFdmVudEdlbmVyYXRvciB7XG4gICAgY29uc3RydWN0b3IocXVlcnlfKSB7XG4gICAgICAgIHRoaXMucXVlcnlfID0gcXVlcnlfO1xuICAgICAgICB0aGlzLmluZGV4XyA9IHRoaXMucXVlcnlfLl9xdWVyeVBhcmFtcy5nZXRJbmRleCgpO1xuICAgIH1cbn1cbi8qKlxuICogR2l2ZW4gYSBzZXQgb2YgcmF3IGNoYW5nZXMgKG5vIG1vdmVkIGV2ZW50cyBhbmQgcHJldk5hbWUgbm90IHNwZWNpZmllZCB5ZXQpLCBhbmQgYSBzZXQgb2ZcbiAqIEV2ZW50UmVnaXN0cmF0aW9ucyB0aGF0IHNob3VsZCBiZSBub3RpZmllZCBvZiB0aGVzZSBjaGFuZ2VzLCBnZW5lcmF0ZSB0aGUgYWN0dWFsIGV2ZW50cyB0byBiZSByYWlzZWQuXG4gKlxuICogTm90ZXM6XG4gKiAgLSBjaGlsZF9tb3ZlZCBldmVudHMgd2lsbCBiZSBzeW50aGVzaXplZCBhdCB0aGlzIHRpbWUgZm9yIGFueSBjaGlsZF9jaGFuZ2VkIGV2ZW50cyB0aGF0IGFmZmVjdFxuICogICAgb3VyIGluZGV4LlxuICogIC0gcHJldk5hbWUgd2lsbCBiZSBjYWxjdWxhdGVkIGJhc2VkIG9uIHRoZSBpbmRleCBvcmRlcmluZy5cbiAqL1xuZnVuY3Rpb24gZXZlbnRHZW5lcmF0b3JHZW5lcmF0ZUV2ZW50c0ZvckNoYW5nZXMoZXZlbnRHZW5lcmF0b3IsIGNoYW5nZXMsIGV2ZW50Q2FjaGUsIGV2ZW50UmVnaXN0cmF0aW9ucykge1xuICAgIGNvbnN0IGV2ZW50cyA9IFtdO1xuICAgIGNvbnN0IG1vdmVzID0gW107XG4gICAgY2hhbmdlcy5mb3JFYWNoKGNoYW5nZSA9PiB7XG4gICAgICAgIGlmIChjaGFuZ2UudHlwZSA9PT0gXCJjaGlsZF9jaGFuZ2VkXCIgLyogQ2hhbmdlVHlwZS5DSElMRF9DSEFOR0VEICovICYmXG4gICAgICAgICAgICBldmVudEdlbmVyYXRvci5pbmRleF8uaW5kZXhlZFZhbHVlQ2hhbmdlZChjaGFuZ2Uub2xkU25hcCwgY2hhbmdlLnNuYXBzaG90Tm9kZSkpIHtcbiAgICAgICAgICAgIG1vdmVzLnB1c2goY2hhbmdlQ2hpbGRNb3ZlZChjaGFuZ2UuY2hpbGROYW1lLCBjaGFuZ2Uuc25hcHNob3ROb2RlKSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBldmVudEdlbmVyYXRvckdlbmVyYXRlRXZlbnRzRm9yVHlwZShldmVudEdlbmVyYXRvciwgZXZlbnRzLCBcImNoaWxkX3JlbW92ZWRcIiAvKiBDaGFuZ2VUeXBlLkNISUxEX1JFTU9WRUQgKi8sIGNoYW5nZXMsIGV2ZW50UmVnaXN0cmF0aW9ucywgZXZlbnRDYWNoZSk7XG4gICAgZXZlbnRHZW5lcmF0b3JHZW5lcmF0ZUV2ZW50c0ZvclR5cGUoZXZlbnRHZW5lcmF0b3IsIGV2ZW50cywgXCJjaGlsZF9hZGRlZFwiIC8qIENoYW5nZVR5cGUuQ0hJTERfQURERUQgKi8sIGNoYW5nZXMsIGV2ZW50UmVnaXN0cmF0aW9ucywgZXZlbnRDYWNoZSk7XG4gICAgZXZlbnRHZW5lcmF0b3JHZW5lcmF0ZUV2ZW50c0ZvclR5cGUoZXZlbnRHZW5lcmF0b3IsIGV2ZW50cywgXCJjaGlsZF9tb3ZlZFwiIC8qIENoYW5nZVR5cGUuQ0hJTERfTU9WRUQgKi8sIG1vdmVzLCBldmVudFJlZ2lzdHJhdGlvbnMsIGV2ZW50Q2FjaGUpO1xuICAgIGV2ZW50R2VuZXJhdG9yR2VuZXJhdGVFdmVudHNGb3JUeXBlKGV2ZW50R2VuZXJhdG9yLCBldmVudHMsIFwiY2hpbGRfY2hhbmdlZFwiIC8qIENoYW5nZVR5cGUuQ0hJTERfQ0hBTkdFRCAqLywgY2hhbmdlcywgZXZlbnRSZWdpc3RyYXRpb25zLCBldmVudENhY2hlKTtcbiAgICBldmVudEdlbmVyYXRvckdlbmVyYXRlRXZlbnRzRm9yVHlwZShldmVudEdlbmVyYXRvciwgZXZlbnRzLCBcInZhbHVlXCIgLyogQ2hhbmdlVHlwZS5WQUxVRSAqLywgY2hhbmdlcywgZXZlbnRSZWdpc3RyYXRpb25zLCBldmVudENhY2hlKTtcbiAgICByZXR1cm4gZXZlbnRzO1xufVxuLyoqXG4gKiBHaXZlbiBjaGFuZ2VzIG9mIGEgc2luZ2xlIGNoYW5nZSB0eXBlLCBnZW5lcmF0ZSB0aGUgY29ycmVzcG9uZGluZyBldmVudHMuXG4gKi9cbmZ1bmN0aW9uIGV2ZW50R2VuZXJhdG9yR2VuZXJhdGVFdmVudHNGb3JUeXBlKGV2ZW50R2VuZXJhdG9yLCBldmVudHMsIGV2ZW50VHlwZSwgY2hhbmdlcywgcmVnaXN0cmF0aW9ucywgZXZlbnRDYWNoZSkge1xuICAgIGNvbnN0IGZpbHRlcmVkQ2hhbmdlcyA9IGNoYW5nZXMuZmlsdGVyKGNoYW5nZSA9PiBjaGFuZ2UudHlwZSA9PT0gZXZlbnRUeXBlKTtcbiAgICBmaWx0ZXJlZENoYW5nZXMuc29ydCgoYSwgYikgPT4gZXZlbnRHZW5lcmF0b3JDb21wYXJlQ2hhbmdlcyhldmVudEdlbmVyYXRvciwgYSwgYikpO1xuICAgIGZpbHRlcmVkQ2hhbmdlcy5mb3JFYWNoKGNoYW5nZSA9PiB7XG4gICAgICAgIGNvbnN0IG1hdGVyaWFsaXplZENoYW5nZSA9IGV2ZW50R2VuZXJhdG9yTWF0ZXJpYWxpemVTaW5nbGVDaGFuZ2UoZXZlbnRHZW5lcmF0b3IsIGNoYW5nZSwgZXZlbnRDYWNoZSk7XG4gICAgICAgIHJlZ2lzdHJhdGlvbnMuZm9yRWFjaChyZWdpc3RyYXRpb24gPT4ge1xuICAgICAgICAgICAgaWYgKHJlZ2lzdHJhdGlvbi5yZXNwb25kc1RvKGNoYW5nZS50eXBlKSkge1xuICAgICAgICAgICAgICAgIGV2ZW50cy5wdXNoKHJlZ2lzdHJhdGlvbi5jcmVhdGVFdmVudChtYXRlcmlhbGl6ZWRDaGFuZ2UsIGV2ZW50R2VuZXJhdG9yLnF1ZXJ5XykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGV2ZW50R2VuZXJhdG9yTWF0ZXJpYWxpemVTaW5nbGVDaGFuZ2UoZXZlbnRHZW5lcmF0b3IsIGNoYW5nZSwgZXZlbnRDYWNoZSkge1xuICAgIGlmIChjaGFuZ2UudHlwZSA9PT0gJ3ZhbHVlJyB8fCBjaGFuZ2UudHlwZSA9PT0gJ2NoaWxkX3JlbW92ZWQnKSB7XG4gICAgICAgIHJldHVybiBjaGFuZ2U7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjaGFuZ2UucHJldk5hbWUgPSBldmVudENhY2hlLmdldFByZWRlY2Vzc29yQ2hpbGROYW1lKGNoYW5nZS5jaGlsZE5hbWUsIGNoYW5nZS5zbmFwc2hvdE5vZGUsIGV2ZW50R2VuZXJhdG9yLmluZGV4Xyk7XG4gICAgICAgIHJldHVybiBjaGFuZ2U7XG4gICAgfVxufVxuZnVuY3Rpb24gZXZlbnRHZW5lcmF0b3JDb21wYXJlQ2hhbmdlcyhldmVudEdlbmVyYXRvciwgYSwgYikge1xuICAgIGlmIChhLmNoaWxkTmFtZSA9PSBudWxsIHx8IGIuY2hpbGROYW1lID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgYXNzZXJ0aW9uRXJyb3IoJ1Nob3VsZCBvbmx5IGNvbXBhcmUgY2hpbGRfIGV2ZW50cy4nKTtcbiAgICB9XG4gICAgY29uc3QgYVdyYXBwZWQgPSBuZXcgTmFtZWROb2RlKGEuY2hpbGROYW1lLCBhLnNuYXBzaG90Tm9kZSk7XG4gICAgY29uc3QgYldyYXBwZWQgPSBuZXcgTmFtZWROb2RlKGIuY2hpbGROYW1lLCBiLnNuYXBzaG90Tm9kZSk7XG4gICAgcmV0dXJuIGV2ZW50R2VuZXJhdG9yLmluZGV4Xy5jb21wYXJlKGFXcmFwcGVkLCBiV3JhcHBlZCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5mdW5jdGlvbiBuZXdWaWV3Q2FjaGUoZXZlbnRDYWNoZSwgc2VydmVyQ2FjaGUpIHtcbiAgICByZXR1cm4geyBldmVudENhY2hlLCBzZXJ2ZXJDYWNoZSB9O1xufVxuZnVuY3Rpb24gdmlld0NhY2hlVXBkYXRlRXZlbnRTbmFwKHZpZXdDYWNoZSwgZXZlbnRTbmFwLCBjb21wbGV0ZSwgZmlsdGVyZWQpIHtcbiAgICByZXR1cm4gbmV3Vmlld0NhY2hlKG5ldyBDYWNoZU5vZGUoZXZlbnRTbmFwLCBjb21wbGV0ZSwgZmlsdGVyZWQpLCB2aWV3Q2FjaGUuc2VydmVyQ2FjaGUpO1xufVxuZnVuY3Rpb24gdmlld0NhY2hlVXBkYXRlU2VydmVyU25hcCh2aWV3Q2FjaGUsIHNlcnZlclNuYXAsIGNvbXBsZXRlLCBmaWx0ZXJlZCkge1xuICAgIHJldHVybiBuZXdWaWV3Q2FjaGUodmlld0NhY2hlLmV2ZW50Q2FjaGUsIG5ldyBDYWNoZU5vZGUoc2VydmVyU25hcCwgY29tcGxldGUsIGZpbHRlcmVkKSk7XG59XG5mdW5jdGlvbiB2aWV3Q2FjaGVHZXRDb21wbGV0ZUV2ZW50U25hcCh2aWV3Q2FjaGUpIHtcbiAgICByZXR1cm4gdmlld0NhY2hlLmV2ZW50Q2FjaGUuaXNGdWxseUluaXRpYWxpemVkKClcbiAgICAgICAgPyB2aWV3Q2FjaGUuZXZlbnRDYWNoZS5nZXROb2RlKClcbiAgICAgICAgOiBudWxsO1xufVxuZnVuY3Rpb24gdmlld0NhY2hlR2V0Q29tcGxldGVTZXJ2ZXJTbmFwKHZpZXdDYWNoZSkge1xuICAgIHJldHVybiB2aWV3Q2FjaGUuc2VydmVyQ2FjaGUuaXNGdWxseUluaXRpYWxpemVkKClcbiAgICAgICAgPyB2aWV3Q2FjaGUuc2VydmVyQ2FjaGUuZ2V0Tm9kZSgpXG4gICAgICAgIDogbnVsbDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmxldCBlbXB0eUNoaWxkcmVuU2luZ2xldG9uO1xuLyoqXG4gKiBTaW5nbGV0b24gZW1wdHkgY2hpbGRyZW4gY29sbGVjdGlvbi5cbiAqXG4gKi9cbmNvbnN0IEVtcHR5Q2hpbGRyZW4gPSAoKSA9PiB7XG4gICAgaWYgKCFlbXB0eUNoaWxkcmVuU2luZ2xldG9uKSB7XG4gICAgICAgIGVtcHR5Q2hpbGRyZW5TaW5nbGV0b24gPSBuZXcgU29ydGVkTWFwKHN0cmluZ0NvbXBhcmUpO1xuICAgIH1cbiAgICByZXR1cm4gZW1wdHlDaGlsZHJlblNpbmdsZXRvbjtcbn07XG4vKipcbiAqIEEgdHJlZSB3aXRoIGltbXV0YWJsZSBlbGVtZW50cy5cbiAqL1xuY2xhc3MgSW1tdXRhYmxlVHJlZSB7XG4gICAgc3RhdGljIGZyb21PYmplY3Qob2JqKSB7XG4gICAgICAgIGxldCB0cmVlID0gbmV3IEltbXV0YWJsZVRyZWUobnVsbCk7XG4gICAgICAgIGVhY2gob2JqLCAoY2hpbGRQYXRoLCBjaGlsZFNuYXApID0+IHtcbiAgICAgICAgICAgIHRyZWUgPSB0cmVlLnNldChuZXcgUGF0aChjaGlsZFBhdGgpLCBjaGlsZFNuYXApO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRyZWU7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKHZhbHVlLCBjaGlsZHJlbiA9IEVtcHR5Q2hpbGRyZW4oKSkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJ1ZSBpZiB0aGUgdmFsdWUgaXMgZW1wdHkgYW5kIHRoZXJlIGFyZSBubyBjaGlsZHJlblxuICAgICAqL1xuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09PSBudWxsICYmIHRoaXMuY2hpbGRyZW4uaXNFbXB0eSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHaXZlbiBhIHBhdGggYW5kIHByZWRpY2F0ZSwgcmV0dXJuIHRoZSBmaXJzdCBub2RlIGFuZCB0aGUgcGF0aCB0byB0aGF0IG5vZGVcbiAgICAgKiB3aGVyZSB0aGUgcHJlZGljYXRlIHJldHVybnMgdHJ1ZS5cbiAgICAgKlxuICAgICAqIFRPRE8gRG8gYSBwZXJmIHRlc3QgLS0gSWYgd2UncmUgY3JlYXRpbmcgYSBidW5jaCBvZiBge3BhdGg6IHZhbHVlOn1gXG4gICAgICogb2JqZWN0cyBvbiB0aGUgd2F5IGJhY2sgb3V0LCBpdCBtYXkgYmUgYmV0dGVyIHRvIHBhc3MgZG93biBhIHBhdGhTb0ZhciBvYmouXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcmVsYXRpdmVQYXRoIC0gVGhlIHJlbWFpbmRlciBvZiB0aGUgcGF0aFxuICAgICAqIEBwYXJhbSBwcmVkaWNhdGUgLSBUaGUgcHJlZGljYXRlIHRvIHNhdGlzZnkgdG8gcmV0dXJuIGEgbm9kZVxuICAgICAqL1xuICAgIGZpbmRSb290TW9zdE1hdGNoaW5nUGF0aEFuZFZhbHVlKHJlbGF0aXZlUGF0aCwgcHJlZGljYXRlKSB7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlICE9IG51bGwgJiYgcHJlZGljYXRlKHRoaXMudmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4geyBwYXRoOiBuZXdFbXB0eVBhdGgoKSwgdmFsdWU6IHRoaXMudmFsdWUgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChwYXRoSXNFbXB0eShyZWxhdGl2ZVBhdGgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmcm9udCA9IHBhdGhHZXRGcm9udChyZWxhdGl2ZVBhdGgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkID0gdGhpcy5jaGlsZHJlbi5nZXQoZnJvbnQpO1xuICAgICAgICAgICAgICAgIGlmIChjaGlsZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGlsZEV4aXN0aW5nUGF0aEFuZFZhbHVlID0gY2hpbGQuZmluZFJvb3RNb3N0TWF0Y2hpbmdQYXRoQW5kVmFsdWUocGF0aFBvcEZyb250KHJlbGF0aXZlUGF0aCksIHByZWRpY2F0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZEV4aXN0aW5nUGF0aEFuZFZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gcGF0aENoaWxkKG5ldyBQYXRoKGZyb250KSwgY2hpbGRFeGlzdGluZ1BhdGhBbmRWYWx1ZS5wYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHBhdGg6IGZ1bGxQYXRoLCB2YWx1ZTogY2hpbGRFeGlzdGluZ1BhdGhBbmRWYWx1ZS52YWx1ZSB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaW5kLCBpZiBpdCBleGlzdHMsIHRoZSBzaG9ydGVzdCBzdWJwYXRoIG9mIHRoZSBnaXZlbiBwYXRoIHRoYXQgcG9pbnRzIGEgZGVmaW5lZFxuICAgICAqIHZhbHVlIGluIHRoZSB0cmVlXG4gICAgICovXG4gICAgZmluZFJvb3RNb3N0VmFsdWVBbmRQYXRoKHJlbGF0aXZlUGF0aCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kUm9vdE1vc3RNYXRjaGluZ1BhdGhBbmRWYWx1ZShyZWxhdGl2ZVBhdGgsICgpID0+IHRydWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBUaGUgc3VidHJlZSBhdCB0aGUgZ2l2ZW4gcGF0aFxuICAgICAqL1xuICAgIHN1YnRyZWUocmVsYXRpdmVQYXRoKSB7XG4gICAgICAgIGlmIChwYXRoSXNFbXB0eShyZWxhdGl2ZVBhdGgpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGZyb250ID0gcGF0aEdldEZyb250KHJlbGF0aXZlUGF0aCk7XG4gICAgICAgICAgICBjb25zdCBjaGlsZFRyZWUgPSB0aGlzLmNoaWxkcmVuLmdldChmcm9udCk7XG4gICAgICAgICAgICBpZiAoY2hpbGRUcmVlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkVHJlZS5zdWJ0cmVlKHBhdGhQb3BGcm9udChyZWxhdGl2ZVBhdGgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSW1tdXRhYmxlVHJlZShudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIGEgdmFsdWUgYXQgdGhlIHNwZWNpZmllZCBwYXRoLlxuICAgICAqXG4gICAgICogQHBhcmFtIHJlbGF0aXZlUGF0aCAtIFBhdGggdG8gc2V0IHZhbHVlIGF0LlxuICAgICAqIEBwYXJhbSB0b1NldCAtIFZhbHVlIHRvIHNldC5cbiAgICAgKiBAcmV0dXJucyBSZXN1bHRpbmcgdHJlZS5cbiAgICAgKi9cbiAgICBzZXQocmVsYXRpdmVQYXRoLCB0b1NldCkge1xuICAgICAgICBpZiAocGF0aElzRW1wdHkocmVsYXRpdmVQYXRoKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBJbW11dGFibGVUcmVlKHRvU2V0LCB0aGlzLmNoaWxkcmVuKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGZyb250ID0gcGF0aEdldEZyb250KHJlbGF0aXZlUGF0aCk7XG4gICAgICAgICAgICBjb25zdCBjaGlsZCA9IHRoaXMuY2hpbGRyZW4uZ2V0KGZyb250KSB8fCBuZXcgSW1tdXRhYmxlVHJlZShudWxsKTtcbiAgICAgICAgICAgIGNvbnN0IG5ld0NoaWxkID0gY2hpbGQuc2V0KHBhdGhQb3BGcm9udChyZWxhdGl2ZVBhdGgpLCB0b1NldCk7XG4gICAgICAgICAgICBjb25zdCBuZXdDaGlsZHJlbiA9IHRoaXMuY2hpbGRyZW4uaW5zZXJ0KGZyb250LCBuZXdDaGlsZCk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEltbXV0YWJsZVRyZWUodGhpcy52YWx1ZSwgbmV3Q2hpbGRyZW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIHZhbHVlIGF0IHRoZSBzcGVjaWZpZWQgcGF0aC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSByZWxhdGl2ZVBhdGggLSBQYXRoIHRvIHZhbHVlIHRvIHJlbW92ZS5cbiAgICAgKiBAcmV0dXJucyBSZXN1bHRpbmcgdHJlZS5cbiAgICAgKi9cbiAgICByZW1vdmUocmVsYXRpdmVQYXRoKSB7XG4gICAgICAgIGlmIChwYXRoSXNFbXB0eShyZWxhdGl2ZVBhdGgpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jaGlsZHJlbi5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEltbXV0YWJsZVRyZWUobnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEltbXV0YWJsZVRyZWUobnVsbCwgdGhpcy5jaGlsZHJlbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBmcm9udCA9IHBhdGhHZXRGcm9udChyZWxhdGl2ZVBhdGgpO1xuICAgICAgICAgICAgY29uc3QgY2hpbGQgPSB0aGlzLmNoaWxkcmVuLmdldChmcm9udCk7XG4gICAgICAgICAgICBpZiAoY2hpbGQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdDaGlsZCA9IGNoaWxkLnJlbW92ZShwYXRoUG9wRnJvbnQocmVsYXRpdmVQYXRoKSk7XG4gICAgICAgICAgICAgICAgbGV0IG5ld0NoaWxkcmVuO1xuICAgICAgICAgICAgICAgIGlmIChuZXdDaGlsZC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3Q2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuLnJlbW92ZShmcm9udCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBuZXdDaGlsZHJlbiA9IHRoaXMuY2hpbGRyZW4uaW5zZXJ0KGZyb250LCBuZXdDaGlsZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlID09PSBudWxsICYmIG5ld0NoaWxkcmVuLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEltbXV0YWJsZVRyZWUobnVsbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEltbXV0YWJsZVRyZWUodGhpcy52YWx1ZSwgbmV3Q2hpbGRyZW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgYSB2YWx1ZSBmcm9tIHRoZSB0cmVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHJlbGF0aXZlUGF0aCAtIFBhdGggdG8gZ2V0IHZhbHVlIGZvci5cbiAgICAgKiBAcmV0dXJucyBWYWx1ZSBhdCBwYXRoLCBvciBudWxsLlxuICAgICAqL1xuICAgIGdldChyZWxhdGl2ZVBhdGgpIHtcbiAgICAgICAgaWYgKHBhdGhJc0VtcHR5KHJlbGF0aXZlUGF0aCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZnJvbnQgPSBwYXRoR2V0RnJvbnQocmVsYXRpdmVQYXRoKTtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkID0gdGhpcy5jaGlsZHJlbi5nZXQoZnJvbnQpO1xuICAgICAgICAgICAgaWYgKGNoaWxkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkLmdldChwYXRoUG9wRnJvbnQocmVsYXRpdmVQYXRoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXBsYWNlIHRoZSBzdWJ0cmVlIGF0IHRoZSBzcGVjaWZpZWQgcGF0aCB3aXRoIHRoZSBnaXZlbiBuZXcgdHJlZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSByZWxhdGl2ZVBhdGggLSBQYXRoIHRvIHJlcGxhY2Ugc3VidHJlZSBmb3IuXG4gICAgICogQHBhcmFtIG5ld1RyZWUgLSBOZXcgdHJlZS5cbiAgICAgKiBAcmV0dXJucyBSZXN1bHRpbmcgdHJlZS5cbiAgICAgKi9cbiAgICBzZXRUcmVlKHJlbGF0aXZlUGF0aCwgbmV3VHJlZSkge1xuICAgICAgICBpZiAocGF0aElzRW1wdHkocmVsYXRpdmVQYXRoKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ld1RyZWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBmcm9udCA9IHBhdGhHZXRGcm9udChyZWxhdGl2ZVBhdGgpO1xuICAgICAgICAgICAgY29uc3QgY2hpbGQgPSB0aGlzLmNoaWxkcmVuLmdldChmcm9udCkgfHwgbmV3IEltbXV0YWJsZVRyZWUobnVsbCk7XG4gICAgICAgICAgICBjb25zdCBuZXdDaGlsZCA9IGNoaWxkLnNldFRyZWUocGF0aFBvcEZyb250KHJlbGF0aXZlUGF0aCksIG5ld1RyZWUpO1xuICAgICAgICAgICAgbGV0IG5ld0NoaWxkcmVuO1xuICAgICAgICAgICAgaWYgKG5ld0NoaWxkLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIG5ld0NoaWxkcmVuID0gdGhpcy5jaGlsZHJlbi5yZW1vdmUoZnJvbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3Q2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuLmluc2VydChmcm9udCwgbmV3Q2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBJbW11dGFibGVUcmVlKHRoaXMudmFsdWUsIG5ld0NoaWxkcmVuKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBhIGRlcHRoIGZpcnN0IGZvbGQgb24gdGhpcyB0cmVlLiBUcmFuc2Zvcm1zIGEgdHJlZSBpbnRvIGEgc2luZ2xlXG4gICAgICogdmFsdWUsIGdpdmVuIGEgZnVuY3Rpb24gdGhhdCBvcGVyYXRlcyBvbiB0aGUgcGF0aCB0byBhIG5vZGUsIGFuIG9wdGlvbmFsXG4gICAgICogY3VycmVudCB2YWx1ZSwgYW5kIGEgbWFwIG9mIGNoaWxkIG5hbWVzIHRvIGZvbGRlZCBzdWJ0cmVlc1xuICAgICAqL1xuICAgIGZvbGQoZm4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9sZF8obmV3RW1wdHlQYXRoKCksIGZuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVjdXJzaXZlIGhlbHBlciBmb3IgcHVibGljLWZhY2luZyBmb2xkKCkgbWV0aG9kXG4gICAgICovXG4gICAgZm9sZF8ocGF0aFNvRmFyLCBmbikge1xuICAgICAgICBjb25zdCBhY2N1bSA9IHt9O1xuICAgICAgICB0aGlzLmNoaWxkcmVuLmlub3JkZXJUcmF2ZXJzYWwoKGNoaWxkS2V5LCBjaGlsZFRyZWUpID0+IHtcbiAgICAgICAgICAgIGFjY3VtW2NoaWxkS2V5XSA9IGNoaWxkVHJlZS5mb2xkXyhwYXRoQ2hpbGQocGF0aFNvRmFyLCBjaGlsZEtleSksIGZuKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmbihwYXRoU29GYXIsIHRoaXMudmFsdWUsIGFjY3VtKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmluZCB0aGUgZmlyc3QgbWF0Y2hpbmcgdmFsdWUgb24gdGhlIGdpdmVuIHBhdGguIFJldHVybiB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIGYgdG8gaXQuXG4gICAgICovXG4gICAgZmluZE9uUGF0aChwYXRoLCBmKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbmRPblBhdGhfKHBhdGgsIG5ld0VtcHR5UGF0aCgpLCBmKTtcbiAgICB9XG4gICAgZmluZE9uUGF0aF8ocGF0aFRvRm9sbG93LCBwYXRoU29GYXIsIGYpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy52YWx1ZSA/IGYocGF0aFNvRmFyLCB0aGlzLnZhbHVlKSA6IGZhbHNlO1xuICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHBhdGhJc0VtcHR5KHBhdGhUb0ZvbGxvdykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZyb250ID0gcGF0aEdldEZyb250KHBhdGhUb0ZvbGxvdyk7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dENoaWxkID0gdGhpcy5jaGlsZHJlbi5nZXQoZnJvbnQpO1xuICAgICAgICAgICAgICAgIGlmIChuZXh0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5leHRDaGlsZC5maW5kT25QYXRoXyhwYXRoUG9wRnJvbnQocGF0aFRvRm9sbG93KSwgcGF0aENoaWxkKHBhdGhTb0ZhciwgZnJvbnQpLCBmKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3JlYWNoT25QYXRoKHBhdGgsIGYpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yZWFjaE9uUGF0aF8ocGF0aCwgbmV3RW1wdHlQYXRoKCksIGYpO1xuICAgIH1cbiAgICBmb3JlYWNoT25QYXRoXyhwYXRoVG9Gb2xsb3csIGN1cnJlbnRSZWxhdGl2ZVBhdGgsIGYpIHtcbiAgICAgICAgaWYgKHBhdGhJc0VtcHR5KHBhdGhUb0ZvbGxvdykpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBmKGN1cnJlbnRSZWxhdGl2ZVBhdGgsIHRoaXMudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZnJvbnQgPSBwYXRoR2V0RnJvbnQocGF0aFRvRm9sbG93KTtcbiAgICAgICAgICAgIGNvbnN0IG5leHRDaGlsZCA9IHRoaXMuY2hpbGRyZW4uZ2V0KGZyb250KTtcbiAgICAgICAgICAgIGlmIChuZXh0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV4dENoaWxkLmZvcmVhY2hPblBhdGhfKHBhdGhQb3BGcm9udChwYXRoVG9Gb2xsb3cpLCBwYXRoQ2hpbGQoY3VycmVudFJlbGF0aXZlUGF0aCwgZnJvbnQpLCBmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSW1tdXRhYmxlVHJlZShudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxscyB0aGUgZ2l2ZW4gZnVuY3Rpb24gZm9yIGVhY2ggbm9kZSBpbiB0aGUgdHJlZSB0aGF0IGhhcyBhIHZhbHVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGYgLSBBIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aXRoIHRoZSBwYXRoIGZyb20gdGhlIHJvb3Qgb2YgdGhlIHRyZWUgdG9cbiAgICAgKiBhIG5vZGUsIGFuZCB0aGUgdmFsdWUgYXQgdGhhdCBub2RlLiBDYWxsZWQgaW4gZGVwdGgtZmlyc3Qgb3JkZXIuXG4gICAgICovXG4gICAgZm9yZWFjaChmKSB7XG4gICAgICAgIHRoaXMuZm9yZWFjaF8obmV3RW1wdHlQYXRoKCksIGYpO1xuICAgIH1cbiAgICBmb3JlYWNoXyhjdXJyZW50UmVsYXRpdmVQYXRoLCBmKSB7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4uaW5vcmRlclRyYXZlcnNhbCgoY2hpbGROYW1lLCBjaGlsZFRyZWUpID0+IHtcbiAgICAgICAgICAgIGNoaWxkVHJlZS5mb3JlYWNoXyhwYXRoQ2hpbGQoY3VycmVudFJlbGF0aXZlUGF0aCwgY2hpbGROYW1lKSwgZik7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodGhpcy52YWx1ZSkge1xuICAgICAgICAgICAgZihjdXJyZW50UmVsYXRpdmVQYXRoLCB0aGlzLnZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3JlYWNoQ2hpbGQoZikge1xuICAgICAgICB0aGlzLmNoaWxkcmVuLmlub3JkZXJUcmF2ZXJzYWwoKGNoaWxkTmFtZSwgY2hpbGRUcmVlKSA9PiB7XG4gICAgICAgICAgICBpZiAoY2hpbGRUcmVlLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgZihjaGlsZE5hbWUsIGNoaWxkVHJlZS52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVGhpcyBjbGFzcyBob2xkcyBhIGNvbGxlY3Rpb24gb2Ygd3JpdGVzIHRoYXQgY2FuIGJlIGFwcGxpZWQgdG8gbm9kZXMgaW4gdW5pc29uLiBJdCBhYnN0cmFjdHMgYXdheSB0aGUgbG9naWMgd2l0aFxuICogZGVhbGluZyB3aXRoIHByaW9yaXR5IHdyaXRlcyBhbmQgbXVsdGlwbGUgbmVzdGVkIHdyaXRlcy4gQXQgYW55IGdpdmVuIHBhdGggdGhlcmUgaXMgb25seSBhbGxvd2VkIHRvIGJlIG9uZSB3cml0ZVxuICogbW9kaWZ5aW5nIHRoYXQgcGF0aC4gQW55IHdyaXRlIHRvIGFuIGV4aXN0aW5nIHBhdGggb3Igc2hhZG93aW5nIGFuIGV4aXN0aW5nIHBhdGggd2lsbCBtb2RpZnkgdGhhdCBleGlzdGluZyB3cml0ZVxuICogdG8gcmVmbGVjdCB0aGUgd3JpdGUgYWRkZWQuXG4gKi9cbmNsYXNzIENvbXBvdW5kV3JpdGUge1xuICAgIGNvbnN0cnVjdG9yKHdyaXRlVHJlZV8pIHtcbiAgICAgICAgdGhpcy53cml0ZVRyZWVfID0gd3JpdGVUcmVlXztcbiAgICB9XG4gICAgc3RhdGljIGVtcHR5KCkge1xuICAgICAgICByZXR1cm4gbmV3IENvbXBvdW5kV3JpdGUobmV3IEltbXV0YWJsZVRyZWUobnVsbCkpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNvbXBvdW5kV3JpdGVBZGRXcml0ZShjb21wb3VuZFdyaXRlLCBwYXRoLCBub2RlKSB7XG4gICAgaWYgKHBhdGhJc0VtcHR5KHBhdGgpKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ29tcG91bmRXcml0ZShuZXcgSW1tdXRhYmxlVHJlZShub2RlKSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCByb290bW9zdCA9IGNvbXBvdW5kV3JpdGUud3JpdGVUcmVlXy5maW5kUm9vdE1vc3RWYWx1ZUFuZFBhdGgocGF0aCk7XG4gICAgICAgIGlmIChyb290bW9zdCAhPSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCByb290TW9zdFBhdGggPSByb290bW9zdC5wYXRoO1xuICAgICAgICAgICAgbGV0IHZhbHVlID0gcm9vdG1vc3QudmFsdWU7XG4gICAgICAgICAgICBjb25zdCByZWxhdGl2ZVBhdGggPSBuZXdSZWxhdGl2ZVBhdGgocm9vdE1vc3RQYXRoLCBwYXRoKTtcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUudXBkYXRlQ2hpbGQocmVsYXRpdmVQYXRoLCBub2RlKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ29tcG91bmRXcml0ZShjb21wb3VuZFdyaXRlLndyaXRlVHJlZV8uc2V0KHJvb3RNb3N0UGF0aCwgdmFsdWUpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHN1YnRyZWUgPSBuZXcgSW1tdXRhYmxlVHJlZShub2RlKTtcbiAgICAgICAgICAgIGNvbnN0IG5ld1dyaXRlVHJlZSA9IGNvbXBvdW5kV3JpdGUud3JpdGVUcmVlXy5zZXRUcmVlKHBhdGgsIHN1YnRyZWUpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDb21wb3VuZFdyaXRlKG5ld1dyaXRlVHJlZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBjb21wb3VuZFdyaXRlQWRkV3JpdGVzKGNvbXBvdW5kV3JpdGUsIHBhdGgsIHVwZGF0ZXMpIHtcbiAgICBsZXQgbmV3V3JpdGUgPSBjb21wb3VuZFdyaXRlO1xuICAgIGVhY2godXBkYXRlcywgKGNoaWxkS2V5LCBub2RlKSA9PiB7XG4gICAgICAgIG5ld1dyaXRlID0gY29tcG91bmRXcml0ZUFkZFdyaXRlKG5ld1dyaXRlLCBwYXRoQ2hpbGQocGF0aCwgY2hpbGRLZXkpLCBub2RlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gbmV3V3JpdGU7XG59XG4vKipcbiAqIFdpbGwgcmVtb3ZlIGEgd3JpdGUgYXQgdGhlIGdpdmVuIHBhdGggYW5kIGRlZXBlciBwYXRocy4gVGhpcyB3aWxsIDxlbT5ub3Q8L2VtPiBtb2RpZnkgYSB3cml0ZSBhdCBhIGhpZ2hlclxuICogbG9jYXRpb24sIHdoaWNoIG11c3QgYmUgcmVtb3ZlZCBieSBjYWxsaW5nIHRoaXMgbWV0aG9kIHdpdGggdGhhdCBwYXRoLlxuICpcbiAqIEBwYXJhbSBjb21wb3VuZFdyaXRlIC0gVGhlIENvbXBvdW5kV3JpdGUgdG8gcmVtb3ZlLlxuICogQHBhcmFtIHBhdGggLSBUaGUgcGF0aCBhdCB3aGljaCBhIHdyaXRlIGFuZCBhbGwgZGVlcGVyIHdyaXRlcyBzaG91bGQgYmUgcmVtb3ZlZFxuICogQHJldHVybnMgVGhlIG5ldyBDb21wb3VuZFdyaXRlIHdpdGggdGhlIHJlbW92ZWQgcGF0aFxuICovXG5mdW5jdGlvbiBjb21wb3VuZFdyaXRlUmVtb3ZlV3JpdGUoY29tcG91bmRXcml0ZSwgcGF0aCkge1xuICAgIGlmIChwYXRoSXNFbXB0eShwYXRoKSkge1xuICAgICAgICByZXR1cm4gQ29tcG91bmRXcml0ZS5lbXB0eSgpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgbmV3V3JpdGVUcmVlID0gY29tcG91bmRXcml0ZS53cml0ZVRyZWVfLnNldFRyZWUocGF0aCwgbmV3IEltbXV0YWJsZVRyZWUobnVsbCkpO1xuICAgICAgICByZXR1cm4gbmV3IENvbXBvdW5kV3JpdGUobmV3V3JpdGVUcmVlKTtcbiAgICB9XG59XG4vKipcbiAqIFJldHVybnMgd2hldGhlciB0aGlzIENvbXBvdW5kV3JpdGUgd2lsbCBmdWxseSBvdmVyd3JpdGUgYSBub2RlIGF0IGEgZ2l2ZW4gbG9jYXRpb24gYW5kIGNhbiB0aGVyZWZvcmUgYmVcbiAqIGNvbnNpZGVyZWQgXCJjb21wbGV0ZVwiLlxuICpcbiAqIEBwYXJhbSBjb21wb3VuZFdyaXRlIC0gVGhlIENvbXBvdW5kV3JpdGUgdG8gY2hlY2suXG4gKiBAcGFyYW0gcGF0aCAtIFRoZSBwYXRoIHRvIGNoZWNrIGZvclxuICogQHJldHVybnMgV2hldGhlciB0aGVyZSBpcyBhIGNvbXBsZXRlIHdyaXRlIGF0IHRoYXQgcGF0aFxuICovXG5mdW5jdGlvbiBjb21wb3VuZFdyaXRlSGFzQ29tcGxldGVXcml0ZShjb21wb3VuZFdyaXRlLCBwYXRoKSB7XG4gICAgcmV0dXJuIGNvbXBvdW5kV3JpdGVHZXRDb21wbGV0ZU5vZGUoY29tcG91bmRXcml0ZSwgcGF0aCkgIT0gbnVsbDtcbn1cbi8qKlxuICogUmV0dXJucyBhIG5vZGUgZm9yIGEgcGF0aCBpZiBhbmQgb25seSBpZiB0aGUgbm9kZSBpcyBhIFwiY29tcGxldGVcIiBvdmVyd3JpdGUgYXQgdGhhdCBwYXRoLiBUaGlzIHdpbGwgbm90IGFnZ3JlZ2F0ZVxuICogd3JpdGVzIGZyb20gZGVlcGVyIHBhdGhzLCBidXQgd2lsbCByZXR1cm4gY2hpbGQgbm9kZXMgZnJvbSBhIG1vcmUgc2hhbGxvdyBwYXRoLlxuICpcbiAqIEBwYXJhbSBjb21wb3VuZFdyaXRlIC0gVGhlIENvbXBvdW5kV3JpdGUgdG8gZ2V0IHRoZSBub2RlIGZyb20uXG4gKiBAcGFyYW0gcGF0aCAtIFRoZSBwYXRoIHRvIGdldCBhIGNvbXBsZXRlIHdyaXRlXG4gKiBAcmV0dXJucyBUaGUgbm9kZSBpZiBjb21wbGV0ZSBhdCB0aGF0IHBhdGgsIG9yIG51bGwgb3RoZXJ3aXNlLlxuICovXG5mdW5jdGlvbiBjb21wb3VuZFdyaXRlR2V0Q29tcGxldGVOb2RlKGNvbXBvdW5kV3JpdGUsIHBhdGgpIHtcbiAgICBjb25zdCByb290bW9zdCA9IGNvbXBvdW5kV3JpdGUud3JpdGVUcmVlXy5maW5kUm9vdE1vc3RWYWx1ZUFuZFBhdGgocGF0aCk7XG4gICAgaWYgKHJvb3Rtb3N0ICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGNvbXBvdW5kV3JpdGUud3JpdGVUcmVlX1xuICAgICAgICAgICAgLmdldChyb290bW9zdC5wYXRoKVxuICAgICAgICAgICAgLmdldENoaWxkKG5ld1JlbGF0aXZlUGF0aChyb290bW9zdC5wYXRoLCBwYXRoKSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG4vKipcbiAqIFJldHVybnMgYWxsIGNoaWxkcmVuIHRoYXQgYXJlIGd1YXJhbnRlZWQgdG8gYmUgYSBjb21wbGV0ZSBvdmVyd3JpdGUuXG4gKlxuICogQHBhcmFtIGNvbXBvdW5kV3JpdGUgLSBUaGUgQ29tcG91bmRXcml0ZSB0byBnZXQgY2hpbGRyZW4gZnJvbS5cbiAqIEByZXR1cm5zIEEgbGlzdCBvZiBhbGwgY29tcGxldGUgY2hpbGRyZW4uXG4gKi9cbmZ1bmN0aW9uIGNvbXBvdW5kV3JpdGVHZXRDb21wbGV0ZUNoaWxkcmVuKGNvbXBvdW5kV3JpdGUpIHtcbiAgICBjb25zdCBjaGlsZHJlbiA9IFtdO1xuICAgIGNvbnN0IG5vZGUgPSBjb21wb3VuZFdyaXRlLndyaXRlVHJlZV8udmFsdWU7XG4gICAgaWYgKG5vZGUgIT0gbnVsbCkge1xuICAgICAgICAvLyBJZiBpdCdzIGEgbGVhZiBub2RlLCBpdCBoYXMgbm8gY2hpbGRyZW47IHNvIG5vdGhpbmcgdG8gZG8uXG4gICAgICAgIGlmICghbm9kZS5pc0xlYWZOb2RlKCkpIHtcbiAgICAgICAgICAgIG5vZGUuZm9yRWFjaENoaWxkKFBSSU9SSVRZX0lOREVYLCAoY2hpbGROYW1lLCBjaGlsZE5vZGUpID0+IHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbi5wdXNoKG5ldyBOYW1lZE5vZGUoY2hpbGROYW1lLCBjaGlsZE5vZGUpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb21wb3VuZFdyaXRlLndyaXRlVHJlZV8uY2hpbGRyZW4uaW5vcmRlclRyYXZlcnNhbCgoY2hpbGROYW1lLCBjaGlsZFRyZWUpID0+IHtcbiAgICAgICAgICAgIGlmIChjaGlsZFRyZWUudmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuLnB1c2gobmV3IE5hbWVkTm9kZShjaGlsZE5hbWUsIGNoaWxkVHJlZS52YWx1ZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGNoaWxkcmVuO1xufVxuZnVuY3Rpb24gY29tcG91bmRXcml0ZUNoaWxkQ29tcG91bmRXcml0ZShjb21wb3VuZFdyaXRlLCBwYXRoKSB7XG4gICAgaWYgKHBhdGhJc0VtcHR5KHBhdGgpKSB7XG4gICAgICAgIHJldHVybiBjb21wb3VuZFdyaXRlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3Qgc2hhZG93aW5nTm9kZSA9IGNvbXBvdW5kV3JpdGVHZXRDb21wbGV0ZU5vZGUoY29tcG91bmRXcml0ZSwgcGF0aCk7XG4gICAgICAgIGlmIChzaGFkb3dpbmdOb2RlICE9IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ29tcG91bmRXcml0ZShuZXcgSW1tdXRhYmxlVHJlZShzaGFkb3dpbmdOb2RlKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IENvbXBvdW5kV3JpdGUoY29tcG91bmRXcml0ZS53cml0ZVRyZWVfLnN1YnRyZWUocGF0aCkpO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBDb21wb3VuZFdyaXRlIGlzIGVtcHR5IGFuZCB0aGVyZWZvcmUgZG9lcyBub3QgbW9kaWZ5IGFueSBub2Rlcy5cbiAqIEByZXR1cm5zIFdoZXRoZXIgdGhpcyBDb21wb3VuZFdyaXRlIGlzIGVtcHR5XG4gKi9cbmZ1bmN0aW9uIGNvbXBvdW5kV3JpdGVJc0VtcHR5KGNvbXBvdW5kV3JpdGUpIHtcbiAgICByZXR1cm4gY29tcG91bmRXcml0ZS53cml0ZVRyZWVfLmlzRW1wdHkoKTtcbn1cbi8qKlxuICogQXBwbGllcyB0aGlzIENvbXBvdW5kV3JpdGUgdG8gYSBub2RlLiBUaGUgbm9kZSBpcyByZXR1cm5lZCB3aXRoIGFsbCB3cml0ZXMgZnJvbSB0aGlzIENvbXBvdW5kV3JpdGUgYXBwbGllZCB0byB0aGVcbiAqIG5vZGVcbiAqIEBwYXJhbSBub2RlIC0gVGhlIG5vZGUgdG8gYXBwbHkgdGhpcyBDb21wb3VuZFdyaXRlIHRvXG4gKiBAcmV0dXJucyBUaGUgbm9kZSB3aXRoIGFsbCB3cml0ZXMgYXBwbGllZFxuICovXG5mdW5jdGlvbiBjb21wb3VuZFdyaXRlQXBwbHkoY29tcG91bmRXcml0ZSwgbm9kZSkge1xuICAgIHJldHVybiBhcHBseVN1YnRyZWVXcml0ZShuZXdFbXB0eVBhdGgoKSwgY29tcG91bmRXcml0ZS53cml0ZVRyZWVfLCBub2RlKTtcbn1cbmZ1bmN0aW9uIGFwcGx5U3VidHJlZVdyaXRlKHJlbGF0aXZlUGF0aCwgd3JpdGVUcmVlLCBub2RlKSB7XG4gICAgaWYgKHdyaXRlVHJlZS52YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgIC8vIFNpbmNlIHRoZXJlIGEgd3JpdGUgaXMgYWx3YXlzIGEgbGVhZiwgd2UncmUgZG9uZSBoZXJlXG4gICAgICAgIHJldHVybiBub2RlLnVwZGF0ZUNoaWxkKHJlbGF0aXZlUGF0aCwgd3JpdGVUcmVlLnZhbHVlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGxldCBwcmlvcml0eVdyaXRlID0gbnVsbDtcbiAgICAgICAgd3JpdGVUcmVlLmNoaWxkcmVuLmlub3JkZXJUcmF2ZXJzYWwoKGNoaWxkS2V5LCBjaGlsZFRyZWUpID0+IHtcbiAgICAgICAgICAgIGlmIChjaGlsZEtleSA9PT0gJy5wcmlvcml0eScpIHtcbiAgICAgICAgICAgICAgICAvLyBBcHBseSBwcmlvcml0aWVzIGF0IHRoZSBlbmQgc28gd2UgZG9uJ3QgdXBkYXRlIHByaW9yaXRpZXMgZm9yIGVpdGhlciBlbXB0eSBub2RlcyBvciBmb3JnZXRcbiAgICAgICAgICAgICAgICAvLyB0byBhcHBseSBwcmlvcml0aWVzIHRvIGVtcHR5IG5vZGVzIHRoYXQgYXJlIGxhdGVyIGZpbGxlZFxuICAgICAgICAgICAgICAgIGFzc2VydChjaGlsZFRyZWUudmFsdWUgIT09IG51bGwsICdQcmlvcml0eSB3cml0ZXMgbXVzdCBhbHdheXMgYmUgbGVhZiBub2RlcycpO1xuICAgICAgICAgICAgICAgIHByaW9yaXR5V3JpdGUgPSBjaGlsZFRyZWUudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBub2RlID0gYXBwbHlTdWJ0cmVlV3JpdGUocGF0aENoaWxkKHJlbGF0aXZlUGF0aCwgY2hpbGRLZXkpLCBjaGlsZFRyZWUsIG5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gSWYgdGhlcmUgd2FzIGEgcHJpb3JpdHkgd3JpdGUsIHdlIG9ubHkgYXBwbHkgaXQgaWYgdGhlIG5vZGUgaXMgbm90IGVtcHR5XG4gICAgICAgIGlmICghbm9kZS5nZXRDaGlsZChyZWxhdGl2ZVBhdGgpLmlzRW1wdHkoKSAmJiBwcmlvcml0eVdyaXRlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBub2RlID0gbm9kZS51cGRhdGVDaGlsZChwYXRoQ2hpbGQocmVsYXRpdmVQYXRoLCAnLnByaW9yaXR5JyksIHByaW9yaXR5V3JpdGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQ3JlYXRlIGEgbmV3IFdyaXRlVHJlZVJlZiBmb3IgdGhlIGdpdmVuIHBhdGguIEZvciB1c2Ugd2l0aCBhIG5ldyBzeW5jIHBvaW50IGF0IHRoZSBnaXZlbiBwYXRoLlxuICpcbiAqL1xuZnVuY3Rpb24gd3JpdGVUcmVlQ2hpbGRXcml0ZXMod3JpdGVUcmVlLCBwYXRoKSB7XG4gICAgcmV0dXJuIG5ld1dyaXRlVHJlZVJlZihwYXRoLCB3cml0ZVRyZWUpO1xufVxuLyoqXG4gKiBSZWNvcmQgYSBuZXcgb3ZlcndyaXRlIGZyb20gdXNlciBjb2RlLlxuICpcbiAqIEBwYXJhbSB2aXNpYmxlIC0gVGhpcyBpcyBzZXQgdG8gZmFsc2UgYnkgc29tZSB0cmFuc2FjdGlvbnMuIEl0IHNob3VsZCBiZSBleGNsdWRlZCBmcm9tIGV2ZW50IGNhY2hlc1xuICovXG5mdW5jdGlvbiB3cml0ZVRyZWVBZGRPdmVyd3JpdGUod3JpdGVUcmVlLCBwYXRoLCBzbmFwLCB3cml0ZUlkLCB2aXNpYmxlKSB7XG4gICAgYXNzZXJ0KHdyaXRlSWQgPiB3cml0ZVRyZWUubGFzdFdyaXRlSWQsICdTdGFja2luZyBhbiBvbGRlciB3cml0ZSBvbiB0b3Agb2YgbmV3ZXIgb25lcycpO1xuICAgIGlmICh2aXNpYmxlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmlzaWJsZSA9IHRydWU7XG4gICAgfVxuICAgIHdyaXRlVHJlZS5hbGxXcml0ZXMucHVzaCh7XG4gICAgICAgIHBhdGgsXG4gICAgICAgIHNuYXAsXG4gICAgICAgIHdyaXRlSWQsXG4gICAgICAgIHZpc2libGVcbiAgICB9KTtcbiAgICBpZiAodmlzaWJsZSkge1xuICAgICAgICB3cml0ZVRyZWUudmlzaWJsZVdyaXRlcyA9IGNvbXBvdW5kV3JpdGVBZGRXcml0ZSh3cml0ZVRyZWUudmlzaWJsZVdyaXRlcywgcGF0aCwgc25hcCk7XG4gICAgfVxuICAgIHdyaXRlVHJlZS5sYXN0V3JpdGVJZCA9IHdyaXRlSWQ7XG59XG4vKipcbiAqIFJlY29yZCBhIG5ldyBtZXJnZSBmcm9tIHVzZXIgY29kZS5cbiAqL1xuZnVuY3Rpb24gd3JpdGVUcmVlQWRkTWVyZ2Uod3JpdGVUcmVlLCBwYXRoLCBjaGFuZ2VkQ2hpbGRyZW4sIHdyaXRlSWQpIHtcbiAgICBhc3NlcnQod3JpdGVJZCA+IHdyaXRlVHJlZS5sYXN0V3JpdGVJZCwgJ1N0YWNraW5nIGFuIG9sZGVyIG1lcmdlIG9uIHRvcCBvZiBuZXdlciBvbmVzJyk7XG4gICAgd3JpdGVUcmVlLmFsbFdyaXRlcy5wdXNoKHtcbiAgICAgICAgcGF0aCxcbiAgICAgICAgY2hpbGRyZW46IGNoYW5nZWRDaGlsZHJlbixcbiAgICAgICAgd3JpdGVJZCxcbiAgICAgICAgdmlzaWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHdyaXRlVHJlZS52aXNpYmxlV3JpdGVzID0gY29tcG91bmRXcml0ZUFkZFdyaXRlcyh3cml0ZVRyZWUudmlzaWJsZVdyaXRlcywgcGF0aCwgY2hhbmdlZENoaWxkcmVuKTtcbiAgICB3cml0ZVRyZWUubGFzdFdyaXRlSWQgPSB3cml0ZUlkO1xufVxuZnVuY3Rpb24gd3JpdGVUcmVlR2V0V3JpdGUod3JpdGVUcmVlLCB3cml0ZUlkKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3cml0ZVRyZWUuYWxsV3JpdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHJlY29yZCA9IHdyaXRlVHJlZS5hbGxXcml0ZXNbaV07XG4gICAgICAgIGlmIChyZWNvcmQud3JpdGVJZCA9PT0gd3JpdGVJZCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlY29yZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbi8qKlxuICogUmVtb3ZlIGEgd3JpdGUgKGVpdGhlciBhbiBvdmVyd3JpdGUgb3IgbWVyZ2UpIHRoYXQgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IGFja25vd2xlZGdlIGJ5IHRoZSBzZXJ2ZXIuIFJlY2FsY3VsYXRlc1xuICogdGhlIHRyZWUgaWYgbmVjZXNzYXJ5LiAgV2UgcmV0dXJuIHRydWUgaWYgaXQgbWF5IGhhdmUgYmVlbiB2aXNpYmxlLCBtZWFuaW5nIHZpZXdzIG5lZWQgdG8gcmVldmFsdWF0ZS5cbiAqXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSB3cml0ZSBtYXkgaGF2ZSBiZWVuIHZpc2libGUgKG1lYW5pbmcgd2UnbGwgbmVlZCB0byByZWV2YWx1YXRlIC8gcmFpc2VcbiAqIGV2ZW50cyBhcyBhIHJlc3VsdCkuXG4gKi9cbmZ1bmN0aW9uIHdyaXRlVHJlZVJlbW92ZVdyaXRlKHdyaXRlVHJlZSwgd3JpdGVJZCkge1xuICAgIC8vIE5vdGU6IGRpc2FibGluZyB0aGlzIGNoZWNrLiBJdCBjb3VsZCBiZSBhIHRyYW5zYWN0aW9uIHRoYXQgcHJlZW1wdGVkIGFub3RoZXIgdHJhbnNhY3Rpb24sIGFuZCB0aHVzIHdhcyBhcHBsaWVkXG4gICAgLy8gb3V0IG9mIG9yZGVyLlxuICAgIC8vY29uc3QgdmFsaWRDbGVhciA9IHJldmVydCB8fCB0aGlzLmFsbFdyaXRlc18ubGVuZ3RoID09PSAwIHx8IHdyaXRlSWQgPD0gdGhpcy5hbGxXcml0ZXNfWzBdLndyaXRlSWQ7XG4gICAgLy9hc3NlcnQodmFsaWRDbGVhciwgXCJFaXRoZXIgd2UgZG9uJ3QgaGF2ZSB0aGlzIHdyaXRlLCBvciBpdCdzIHRoZSBmaXJzdCBvbmUgaW4gdGhlIHF1ZXVlXCIpO1xuICAgIGNvbnN0IGlkeCA9IHdyaXRlVHJlZS5hbGxXcml0ZXMuZmluZEluZGV4KHMgPT4ge1xuICAgICAgICByZXR1cm4gcy53cml0ZUlkID09PSB3cml0ZUlkO1xuICAgIH0pO1xuICAgIGFzc2VydChpZHggPj0gMCwgJ3JlbW92ZVdyaXRlIGNhbGxlZCB3aXRoIG5vbmV4aXN0ZW50IHdyaXRlSWQuJyk7XG4gICAgY29uc3Qgd3JpdGVUb1JlbW92ZSA9IHdyaXRlVHJlZS5hbGxXcml0ZXNbaWR4XTtcbiAgICB3cml0ZVRyZWUuYWxsV3JpdGVzLnNwbGljZShpZHgsIDEpO1xuICAgIGxldCByZW1vdmVkV3JpdGVXYXNWaXNpYmxlID0gd3JpdGVUb1JlbW92ZS52aXNpYmxlO1xuICAgIGxldCByZW1vdmVkV3JpdGVPdmVybGFwc1dpdGhPdGhlcldyaXRlcyA9IGZhbHNlO1xuICAgIGxldCBpID0gd3JpdGVUcmVlLmFsbFdyaXRlcy5sZW5ndGggLSAxO1xuICAgIHdoaWxlIChyZW1vdmVkV3JpdGVXYXNWaXNpYmxlICYmIGkgPj0gMCkge1xuICAgICAgICBjb25zdCBjdXJyZW50V3JpdGUgPSB3cml0ZVRyZWUuYWxsV3JpdGVzW2ldO1xuICAgICAgICBpZiAoY3VycmVudFdyaXRlLnZpc2libGUpIHtcbiAgICAgICAgICAgIGlmIChpID49IGlkeCAmJlxuICAgICAgICAgICAgICAgIHdyaXRlVHJlZVJlY29yZENvbnRhaW5zUGF0aF8oY3VycmVudFdyaXRlLCB3cml0ZVRvUmVtb3ZlLnBhdGgpKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlIHJlbW92ZWQgd3JpdGUgd2FzIGNvbXBsZXRlbHkgc2hhZG93ZWQgYnkgYSBzdWJzZXF1ZW50IHdyaXRlLlxuICAgICAgICAgICAgICAgIHJlbW92ZWRXcml0ZVdhc1Zpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBhdGhDb250YWlucyh3cml0ZVRvUmVtb3ZlLnBhdGgsIGN1cnJlbnRXcml0ZS5wYXRoKSkge1xuICAgICAgICAgICAgICAgIC8vIEVpdGhlciB3ZSdyZSBjb3ZlcmluZyBzb21lIHdyaXRlcyBvciB0aGV5J3JlIGNvdmVyaW5nIHBhcnQgb2YgdXMgKGRlcGVuZGluZyBvbiB3aGljaCBjYW1lIGZpcnN0KS5cbiAgICAgICAgICAgICAgICByZW1vdmVkV3JpdGVPdmVybGFwc1dpdGhPdGhlcldyaXRlcyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaS0tO1xuICAgIH1cbiAgICBpZiAoIXJlbW92ZWRXcml0ZVdhc1Zpc2libGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBlbHNlIGlmIChyZW1vdmVkV3JpdGVPdmVybGFwc1dpdGhPdGhlcldyaXRlcykge1xuICAgICAgICAvLyBUaGVyZSdzIHNvbWUgc2hhZG93aW5nIGdvaW5nIG9uLiBKdXN0IHJlYnVpbGQgdGhlIHZpc2libGUgd3JpdGVzIGZyb20gc2NyYXRjaC5cbiAgICAgICAgd3JpdGVUcmVlUmVzZXRUcmVlXyh3cml0ZVRyZWUpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIFRoZXJlJ3Mgbm8gc2hhZG93aW5nLiAgV2UgY2FuIHNhZmVseSBqdXN0IHJlbW92ZSB0aGUgd3JpdGUocykgZnJvbSB2aXNpYmxlV3JpdGVzLlxuICAgICAgICBpZiAod3JpdGVUb1JlbW92ZS5zbmFwKSB7XG4gICAgICAgICAgICB3cml0ZVRyZWUudmlzaWJsZVdyaXRlcyA9IGNvbXBvdW5kV3JpdGVSZW1vdmVXcml0ZSh3cml0ZVRyZWUudmlzaWJsZVdyaXRlcywgd3JpdGVUb1JlbW92ZS5wYXRoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkcmVuID0gd3JpdGVUb1JlbW92ZS5jaGlsZHJlbjtcbiAgICAgICAgICAgIGVhY2goY2hpbGRyZW4sIChjaGlsZE5hbWUpID0+IHtcbiAgICAgICAgICAgICAgICB3cml0ZVRyZWUudmlzaWJsZVdyaXRlcyA9IGNvbXBvdW5kV3JpdGVSZW1vdmVXcml0ZSh3cml0ZVRyZWUudmlzaWJsZVdyaXRlcywgcGF0aENoaWxkKHdyaXRlVG9SZW1vdmUucGF0aCwgY2hpbGROYW1lKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG5mdW5jdGlvbiB3cml0ZVRyZWVSZWNvcmRDb250YWluc1BhdGhfKHdyaXRlUmVjb3JkLCBwYXRoKSB7XG4gICAgaWYgKHdyaXRlUmVjb3JkLnNuYXApIHtcbiAgICAgICAgcmV0dXJuIHBhdGhDb250YWlucyh3cml0ZVJlY29yZC5wYXRoLCBwYXRoKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGZvciAoY29uc3QgY2hpbGROYW1lIGluIHdyaXRlUmVjb3JkLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICBpZiAod3JpdGVSZWNvcmQuY2hpbGRyZW4uaGFzT3duUHJvcGVydHkoY2hpbGROYW1lKSAmJlxuICAgICAgICAgICAgICAgIHBhdGhDb250YWlucyhwYXRoQ2hpbGQod3JpdGVSZWNvcmQucGF0aCwgY2hpbGROYW1lKSwgcGF0aCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuLyoqXG4gKiBSZS1sYXllciB0aGUgd3JpdGVzIGFuZCBtZXJnZXMgaW50byBhIHRyZWUgc28gd2UgY2FuIGVmZmljaWVudGx5IGNhbGN1bGF0ZSBldmVudCBzbmFwc2hvdHNcbiAqL1xuZnVuY3Rpb24gd3JpdGVUcmVlUmVzZXRUcmVlXyh3cml0ZVRyZWUpIHtcbiAgICB3cml0ZVRyZWUudmlzaWJsZVdyaXRlcyA9IHdyaXRlVHJlZUxheWVyVHJlZV8od3JpdGVUcmVlLmFsbFdyaXRlcywgd3JpdGVUcmVlRGVmYXVsdEZpbHRlcl8sIG5ld0VtcHR5UGF0aCgpKTtcbiAgICBpZiAod3JpdGVUcmVlLmFsbFdyaXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHdyaXRlVHJlZS5sYXN0V3JpdGVJZCA9XG4gICAgICAgICAgICB3cml0ZVRyZWUuYWxsV3JpdGVzW3dyaXRlVHJlZS5hbGxXcml0ZXMubGVuZ3RoIC0gMV0ud3JpdGVJZDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHdyaXRlVHJlZS5sYXN0V3JpdGVJZCA9IC0xO1xuICAgIH1cbn1cbi8qKlxuICogVGhlIGRlZmF1bHQgZmlsdGVyIHVzZWQgd2hlbiBjb25zdHJ1Y3RpbmcgdGhlIHRyZWUuIEtlZXAgZXZlcnl0aGluZyB0aGF0J3MgdmlzaWJsZS5cbiAqL1xuZnVuY3Rpb24gd3JpdGVUcmVlRGVmYXVsdEZpbHRlcl8od3JpdGUpIHtcbiAgICByZXR1cm4gd3JpdGUudmlzaWJsZTtcbn1cbi8qKlxuICogU3RhdGljIG1ldGhvZC4gR2l2ZW4gYW4gYXJyYXkgb2YgV3JpdGVSZWNvcmRzLCBhIGZpbHRlciBmb3Igd2hpY2ggb25lcyB0byBpbmNsdWRlLCBhbmQgYSBwYXRoLCBjb25zdHJ1Y3QgdGhlIHRyZWUgb2ZcbiAqIGV2ZW50IGRhdGEgYXQgdGhhdCBwYXRoLlxuICovXG5mdW5jdGlvbiB3cml0ZVRyZWVMYXllclRyZWVfKHdyaXRlcywgZmlsdGVyLCB0cmVlUm9vdCkge1xuICAgIGxldCBjb21wb3VuZFdyaXRlID0gQ29tcG91bmRXcml0ZS5lbXB0eSgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd3JpdGVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGNvbnN0IHdyaXRlID0gd3JpdGVzW2ldO1xuICAgICAgICAvLyBUaGVvcnksIGEgbGF0ZXIgc2V0IHdpbGwgZWl0aGVyOlxuICAgICAgICAvLyBhKSBhYm9ydCBhIHJlbGV2YW50IHRyYW5zYWN0aW9uLCBzbyBubyBuZWVkIHRvIHdvcnJ5IGFib3V0IGV4Y2x1ZGluZyBpdCBmcm9tIGNhbGN1bGF0aW5nIHRoYXQgdHJhbnNhY3Rpb25cbiAgICAgICAgLy8gYikgbm90IGJlIHJlbGV2YW50IHRvIGEgdHJhbnNhY3Rpb24gKHNlcGFyYXRlIGJyYW5jaCksIHNvIGFnYWluIHdpbGwgbm90IGFmZmVjdCB0aGUgZGF0YSBmb3IgdGhhdCB0cmFuc2FjdGlvblxuICAgICAgICBpZiAoZmlsdGVyKHdyaXRlKSkge1xuICAgICAgICAgICAgY29uc3Qgd3JpdGVQYXRoID0gd3JpdGUucGF0aDtcbiAgICAgICAgICAgIGxldCByZWxhdGl2ZVBhdGg7XG4gICAgICAgICAgICBpZiAod3JpdGUuc25hcCkge1xuICAgICAgICAgICAgICAgIGlmIChwYXRoQ29udGFpbnModHJlZVJvb3QsIHdyaXRlUGF0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVsYXRpdmVQYXRoID0gbmV3UmVsYXRpdmVQYXRoKHRyZWVSb290LCB3cml0ZVBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBjb21wb3VuZFdyaXRlID0gY29tcG91bmRXcml0ZUFkZFdyaXRlKGNvbXBvdW5kV3JpdGUsIHJlbGF0aXZlUGF0aCwgd3JpdGUuc25hcCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBhdGhDb250YWlucyh3cml0ZVBhdGgsIHRyZWVSb290KSkge1xuICAgICAgICAgICAgICAgICAgICByZWxhdGl2ZVBhdGggPSBuZXdSZWxhdGl2ZVBhdGgod3JpdGVQYXRoLCB0cmVlUm9vdCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBvdW5kV3JpdGUgPSBjb21wb3VuZFdyaXRlQWRkV3JpdGUoY29tcG91bmRXcml0ZSwgbmV3RW1wdHlQYXRoKCksIHdyaXRlLnNuYXAuZ2V0Q2hpbGQocmVsYXRpdmVQYXRoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAod3JpdGUuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICBpZiAocGF0aENvbnRhaW5zKHRyZWVSb290LCB3cml0ZVBhdGgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbGF0aXZlUGF0aCA9IG5ld1JlbGF0aXZlUGF0aCh0cmVlUm9vdCwgd3JpdGVQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgY29tcG91bmRXcml0ZSA9IGNvbXBvdW5kV3JpdGVBZGRXcml0ZXMoY29tcG91bmRXcml0ZSwgcmVsYXRpdmVQYXRoLCB3cml0ZS5jaGlsZHJlbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBhdGhDb250YWlucyh3cml0ZVBhdGgsIHRyZWVSb290KSkge1xuICAgICAgICAgICAgICAgICAgICByZWxhdGl2ZVBhdGggPSBuZXdSZWxhdGl2ZVBhdGgod3JpdGVQYXRoLCB0cmVlUm9vdCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXRoSXNFbXB0eShyZWxhdGl2ZVBhdGgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wb3VuZFdyaXRlID0gY29tcG91bmRXcml0ZUFkZFdyaXRlcyhjb21wb3VuZFdyaXRlLCBuZXdFbXB0eVBhdGgoKSwgd3JpdGUuY2hpbGRyZW4pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hpbGQgPSBzYWZlR2V0KHdyaXRlLmNoaWxkcmVuLCBwYXRoR2V0RnJvbnQocmVsYXRpdmVQYXRoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGVyZSBleGlzdHMgYSBjaGlsZCBpbiB0aGlzIG5vZGUgdGhhdCBtYXRjaGVzIHRoZSByb290IHBhdGhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWVwTm9kZSA9IGNoaWxkLmdldENoaWxkKHBhdGhQb3BGcm9udChyZWxhdGl2ZVBhdGgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb3VuZFdyaXRlID0gY29tcG91bmRXcml0ZUFkZFdyaXRlKGNvbXBvdW5kV3JpdGUsIG5ld0VtcHR5UGF0aCgpLCBkZWVwTm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBhc3NlcnRpb25FcnJvcignV3JpdGVSZWNvcmQgc2hvdWxkIGhhdmUgLnNuYXAgb3IgLmNoaWxkcmVuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNvbXBvdW5kV3JpdGU7XG59XG4vKipcbiAqIEdpdmVuIG9wdGlvbmFsLCB1bmRlcmx5aW5nIHNlcnZlciBkYXRhLCBhbmQgYW4gb3B0aW9uYWwgc2V0IG9mIGNvbnN0cmFpbnRzIChleGNsdWRlIHNvbWUgc2V0cywgaW5jbHVkZSBoaWRkZW5cbiAqIHdyaXRlcyksIGF0dGVtcHQgdG8gY2FsY3VsYXRlIGEgY29tcGxldGUgc25hcHNob3QgZm9yIHRoZSBnaXZlbiBwYXRoXG4gKlxuICogQHBhcmFtIHdyaXRlSWRzVG9FeGNsdWRlIC0gQW4gb3B0aW9uYWwgc2V0IHRvIGJlIGV4Y2x1ZGVkXG4gKiBAcGFyYW0gaW5jbHVkZUhpZGRlbldyaXRlcyAtIERlZmF1bHRzIHRvIGZhbHNlLCB3aGV0aGVyIG9yIG5vdCB0byBsYXllciBvbiB3cml0ZXMgd2l0aCB2aXNpYmxlIHNldCB0byBmYWxzZVxuICovXG5mdW5jdGlvbiB3cml0ZVRyZWVDYWxjQ29tcGxldGVFdmVudENhY2hlKHdyaXRlVHJlZSwgdHJlZVBhdGgsIGNvbXBsZXRlU2VydmVyQ2FjaGUsIHdyaXRlSWRzVG9FeGNsdWRlLCBpbmNsdWRlSGlkZGVuV3JpdGVzKSB7XG4gICAgaWYgKCF3cml0ZUlkc1RvRXhjbHVkZSAmJiAhaW5jbHVkZUhpZGRlbldyaXRlcykge1xuICAgICAgICBjb25zdCBzaGFkb3dpbmdOb2RlID0gY29tcG91bmRXcml0ZUdldENvbXBsZXRlTm9kZSh3cml0ZVRyZWUudmlzaWJsZVdyaXRlcywgdHJlZVBhdGgpO1xuICAgICAgICBpZiAoc2hhZG93aW5nTm9kZSAhPSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gc2hhZG93aW5nTm9kZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHN1Yk1lcmdlID0gY29tcG91bmRXcml0ZUNoaWxkQ29tcG91bmRXcml0ZSh3cml0ZVRyZWUudmlzaWJsZVdyaXRlcywgdHJlZVBhdGgpO1xuICAgICAgICAgICAgaWYgKGNvbXBvdW5kV3JpdGVJc0VtcHR5KHN1Yk1lcmdlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21wbGV0ZVNlcnZlckNhY2hlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY29tcGxldGVTZXJ2ZXJDYWNoZSA9PSBudWxsICYmXG4gICAgICAgICAgICAgICAgIWNvbXBvdW5kV3JpdGVIYXNDb21wbGV0ZVdyaXRlKHN1Yk1lcmdlLCBuZXdFbXB0eVBhdGgoKSkpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSB3b3VsZG4ndCBoYXZlIGEgY29tcGxldGUgc25hcHNob3QsIHNpbmNlIHRoZXJlJ3Mgbm8gdW5kZXJseWluZyBkYXRhIGFuZCBubyBjb21wbGV0ZSBzaGFkb3dcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxheWVyZWRDYWNoZSA9IGNvbXBsZXRlU2VydmVyQ2FjaGUgfHwgQ2hpbGRyZW5Ob2RlLkVNUFRZX05PREU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBvdW5kV3JpdGVBcHBseShzdWJNZXJnZSwgbGF5ZXJlZENhY2hlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgbWVyZ2UgPSBjb21wb3VuZFdyaXRlQ2hpbGRDb21wb3VuZFdyaXRlKHdyaXRlVHJlZS52aXNpYmxlV3JpdGVzLCB0cmVlUGF0aCk7XG4gICAgICAgIGlmICghaW5jbHVkZUhpZGRlbldyaXRlcyAmJiBjb21wb3VuZFdyaXRlSXNFbXB0eShtZXJnZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBjb21wbGV0ZVNlcnZlckNhY2hlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gSWYgdGhlIHNlcnZlciBjYWNoZSBpcyBudWxsLCBhbmQgd2UgZG9uJ3QgaGF2ZSBhIGNvbXBsZXRlIGNhY2hlLCB3ZSBuZWVkIHRvIHJldHVybiBudWxsXG4gICAgICAgICAgICBpZiAoIWluY2x1ZGVIaWRkZW5Xcml0ZXMgJiZcbiAgICAgICAgICAgICAgICBjb21wbGV0ZVNlcnZlckNhY2hlID09IG51bGwgJiZcbiAgICAgICAgICAgICAgICAhY29tcG91bmRXcml0ZUhhc0NvbXBsZXRlV3JpdGUobWVyZ2UsIG5ld0VtcHR5UGF0aCgpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsdGVyID0gZnVuY3Rpb24gKHdyaXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoKHdyaXRlLnZpc2libGUgfHwgaW5jbHVkZUhpZGRlbldyaXRlcykgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICghd3JpdGVJZHNUb0V4Y2x1ZGUgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhfndyaXRlSWRzVG9FeGNsdWRlLmluZGV4T2Yod3JpdGUud3JpdGVJZCkpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAocGF0aENvbnRhaW5zKHdyaXRlLnBhdGgsIHRyZWVQYXRoKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGhDb250YWlucyh0cmVlUGF0aCwgd3JpdGUucGF0aCkpKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlQXRQYXRoID0gd3JpdGVUcmVlTGF5ZXJUcmVlXyh3cml0ZVRyZWUuYWxsV3JpdGVzLCBmaWx0ZXIsIHRyZWVQYXRoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBsYXllcmVkQ2FjaGUgPSBjb21wbGV0ZVNlcnZlckNhY2hlIHx8IENoaWxkcmVuTm9kZS5FTVBUWV9OT0RFO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21wb3VuZFdyaXRlQXBwbHkobWVyZ2VBdFBhdGgsIGxheWVyZWRDYWNoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIFdpdGggb3B0aW9uYWwsIHVuZGVybHlpbmcgc2VydmVyIGRhdGEsIGF0dGVtcHQgdG8gcmV0dXJuIGEgY2hpbGRyZW4gbm9kZSBvZiBjaGlsZHJlbiB0aGF0IHdlIGhhdmUgY29tcGxldGUgZGF0YSBmb3IuXG4gKiBVc2VkIHdoZW4gY3JlYXRpbmcgbmV3IHZpZXdzLCB0byBwcmUtZmlsbCB0aGVpciBjb21wbGV0ZSBldmVudCBjaGlsZHJlbiBzbmFwc2hvdC5cbiAqL1xuZnVuY3Rpb24gd3JpdGVUcmVlQ2FsY0NvbXBsZXRlRXZlbnRDaGlsZHJlbih3cml0ZVRyZWUsIHRyZWVQYXRoLCBjb21wbGV0ZVNlcnZlckNoaWxkcmVuKSB7XG4gICAgbGV0IGNvbXBsZXRlQ2hpbGRyZW4gPSBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERTtcbiAgICBjb25zdCB0b3BMZXZlbFNldCA9IGNvbXBvdW5kV3JpdGVHZXRDb21wbGV0ZU5vZGUod3JpdGVUcmVlLnZpc2libGVXcml0ZXMsIHRyZWVQYXRoKTtcbiAgICBpZiAodG9wTGV2ZWxTZXQpIHtcbiAgICAgICAgaWYgKCF0b3BMZXZlbFNldC5pc0xlYWZOb2RlKCkpIHtcbiAgICAgICAgICAgIC8vIHdlJ3JlIHNoYWRvd2luZyBldmVyeXRoaW5nLiBSZXR1cm4gdGhlIGNoaWxkcmVuLlxuICAgICAgICAgICAgdG9wTGV2ZWxTZXQuZm9yRWFjaENoaWxkKFBSSU9SSVRZX0lOREVYLCAoY2hpbGROYW1lLCBjaGlsZFNuYXApID0+IHtcbiAgICAgICAgICAgICAgICBjb21wbGV0ZUNoaWxkcmVuID0gY29tcGxldGVDaGlsZHJlbi51cGRhdGVJbW1lZGlhdGVDaGlsZChjaGlsZE5hbWUsIGNoaWxkU25hcCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29tcGxldGVDaGlsZHJlbjtcbiAgICB9XG4gICAgZWxzZSBpZiAoY29tcGxldGVTZXJ2ZXJDaGlsZHJlbikge1xuICAgICAgICAvLyBMYXllciBhbnkgY2hpbGRyZW4gd2UgaGF2ZSBvbiB0b3Agb2YgdGhpc1xuICAgICAgICAvLyBXZSBrbm93IHdlIGRvbid0IGhhdmUgYSB0b3AtbGV2ZWwgc2V0LCBzbyBqdXN0IGVudW1lcmF0ZSBleGlzdGluZyBjaGlsZHJlblxuICAgICAgICBjb25zdCBtZXJnZSA9IGNvbXBvdW5kV3JpdGVDaGlsZENvbXBvdW5kV3JpdGUod3JpdGVUcmVlLnZpc2libGVXcml0ZXMsIHRyZWVQYXRoKTtcbiAgICAgICAgY29tcGxldGVTZXJ2ZXJDaGlsZHJlbi5mb3JFYWNoQ2hpbGQoUFJJT1JJVFlfSU5ERVgsIChjaGlsZE5hbWUsIGNoaWxkTm9kZSkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgbm9kZSA9IGNvbXBvdW5kV3JpdGVBcHBseShjb21wb3VuZFdyaXRlQ2hpbGRDb21wb3VuZFdyaXRlKG1lcmdlLCBuZXcgUGF0aChjaGlsZE5hbWUpKSwgY2hpbGROb2RlKTtcbiAgICAgICAgICAgIGNvbXBsZXRlQ2hpbGRyZW4gPSBjb21wbGV0ZUNoaWxkcmVuLnVwZGF0ZUltbWVkaWF0ZUNoaWxkKGNoaWxkTmFtZSwgbm9kZSk7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBBZGQgYW55IGNvbXBsZXRlIGNoaWxkcmVuIHdlIGhhdmUgZnJvbSB0aGUgc2V0XG4gICAgICAgIGNvbXBvdW5kV3JpdGVHZXRDb21wbGV0ZUNoaWxkcmVuKG1lcmdlKS5mb3JFYWNoKG5hbWVkTm9kZSA9PiB7XG4gICAgICAgICAgICBjb21wbGV0ZUNoaWxkcmVuID0gY29tcGxldGVDaGlsZHJlbi51cGRhdGVJbW1lZGlhdGVDaGlsZChuYW1lZE5vZGUubmFtZSwgbmFtZWROb2RlLm5vZGUpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGNvbXBsZXRlQ2hpbGRyZW47XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBXZSBkb24ndCBoYXZlIGFueXRoaW5nIHRvIGxheWVyIG9uIHRvcCBvZi4gTGF5ZXIgb24gYW55IGNoaWxkcmVuIHdlIGhhdmVcbiAgICAgICAgLy8gTm90ZSB0aGF0IHdlIGNhbiByZXR1cm4gYW4gZW1wdHkgc25hcCBpZiB3ZSBoYXZlIGEgZGVmaW5lZCBkZWxldGVcbiAgICAgICAgY29uc3QgbWVyZ2UgPSBjb21wb3VuZFdyaXRlQ2hpbGRDb21wb3VuZFdyaXRlKHdyaXRlVHJlZS52aXNpYmxlV3JpdGVzLCB0cmVlUGF0aCk7XG4gICAgICAgIGNvbXBvdW5kV3JpdGVHZXRDb21wbGV0ZUNoaWxkcmVuKG1lcmdlKS5mb3JFYWNoKG5hbWVkTm9kZSA9PiB7XG4gICAgICAgICAgICBjb21wbGV0ZUNoaWxkcmVuID0gY29tcGxldGVDaGlsZHJlbi51cGRhdGVJbW1lZGlhdGVDaGlsZChuYW1lZE5vZGUubmFtZSwgbmFtZWROb2RlLm5vZGUpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGNvbXBsZXRlQ2hpbGRyZW47XG4gICAgfVxufVxuLyoqXG4gKiBHaXZlbiB0aGF0IHRoZSB1bmRlcmx5aW5nIHNlcnZlciBkYXRhIGhhcyB1cGRhdGVkLCBkZXRlcm1pbmUgd2hhdCwgaWYgYW55dGhpbmcsIG5lZWRzIHRvIGJlXG4gKiBhcHBsaWVkIHRvIHRoZSBldmVudCBjYWNoZS5cbiAqXG4gKiBQb3NzaWJpbGl0aWVzOlxuICpcbiAqIDEuIE5vIHdyaXRlcyBhcmUgc2hhZG93aW5nLiBFdmVudHMgc2hvdWxkIGJlIHJhaXNlZCwgdGhlIHNuYXAgdG8gYmUgYXBwbGllZCBjb21lcyBmcm9tIHRoZSBzZXJ2ZXIgZGF0YVxuICpcbiAqIDIuIFNvbWUgd3JpdGUgaXMgY29tcGxldGVseSBzaGFkb3dpbmcuIE5vIGV2ZW50cyB0byBiZSByYWlzZWRcbiAqXG4gKiAzLiBJcyBwYXJ0aWFsbHkgc2hhZG93ZWQuIEV2ZW50c1xuICpcbiAqIEVpdGhlciBleGlzdGluZ0V2ZW50U25hcCBvciBleGlzdGluZ1NlcnZlclNuYXAgbXVzdCBleGlzdFxuICovXG5mdW5jdGlvbiB3cml0ZVRyZWVDYWxjRXZlbnRDYWNoZUFmdGVyU2VydmVyT3ZlcndyaXRlKHdyaXRlVHJlZSwgdHJlZVBhdGgsIGNoaWxkUGF0aCwgZXhpc3RpbmdFdmVudFNuYXAsIGV4aXN0aW5nU2VydmVyU25hcCkge1xuICAgIGFzc2VydChleGlzdGluZ0V2ZW50U25hcCB8fCBleGlzdGluZ1NlcnZlclNuYXAsICdFaXRoZXIgZXhpc3RpbmdFdmVudFNuYXAgb3IgZXhpc3RpbmdTZXJ2ZXJTbmFwIG11c3QgZXhpc3QnKTtcbiAgICBjb25zdCBwYXRoID0gcGF0aENoaWxkKHRyZWVQYXRoLCBjaGlsZFBhdGgpO1xuICAgIGlmIChjb21wb3VuZFdyaXRlSGFzQ29tcGxldGVXcml0ZSh3cml0ZVRyZWUudmlzaWJsZVdyaXRlcywgcGF0aCkpIHtcbiAgICAgICAgLy8gQXQgdGhpcyBwb2ludCB3ZSBjYW4gcHJvYmFibHkgZ3VhcmFudGVlIHRoYXQgd2UncmUgaW4gY2FzZSAyLCBtZWFuaW5nIG5vIGV2ZW50c1xuICAgICAgICAvLyBNYXkgbmVlZCB0byBjaGVjayB2aXNpYmlsaXR5IHdoaWxlIGRvaW5nIHRoZSBmaW5kUm9vdE1vc3RWYWx1ZUFuZFBhdGggY2FsbFxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIE5vIGNvbXBsZXRlIHNoYWRvd2luZy4gV2UncmUgZWl0aGVyIHBhcnRpYWxseSBzaGFkb3dpbmcgb3Igbm90IHNoYWRvd2luZyBhdCBhbGwuXG4gICAgICAgIGNvbnN0IGNoaWxkTWVyZ2UgPSBjb21wb3VuZFdyaXRlQ2hpbGRDb21wb3VuZFdyaXRlKHdyaXRlVHJlZS52aXNpYmxlV3JpdGVzLCBwYXRoKTtcbiAgICAgICAgaWYgKGNvbXBvdW5kV3JpdGVJc0VtcHR5KGNoaWxkTWVyZ2UpKSB7XG4gICAgICAgICAgICAvLyBXZSdyZSBub3Qgc2hhZG93aW5nIGF0IGFsbC4gQ2FzZSAxXG4gICAgICAgICAgICByZXR1cm4gZXhpc3RpbmdTZXJ2ZXJTbmFwLmdldENoaWxkKGNoaWxkUGF0aCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBUaGlzIGNvdWxkIGJlIG1vcmUgZWZmaWNpZW50IGlmIHRoZSBzZXJ2ZXJOb2RlICsgdXBkYXRlcyBkb2Vzbid0IGNoYW5nZSB0aGUgZXZlbnRTbmFwXG4gICAgICAgICAgICAvLyBIb3dldmVyIHRoaXMgaXMgdHJpY2t5IHRvIGZpbmQgb3V0LCBzaW5jZSB1c2VyIHVwZGF0ZXMgZG9uJ3QgbmVjZXNzYXJ5IGNoYW5nZSB0aGUgc2VydmVyXG4gICAgICAgICAgICAvLyBzbmFwLCBlLmcuIHByaW9yaXR5IHVwZGF0ZXMgb24gZW1wdHkgbm9kZXMsIG9yIGRlZXAgZGVsZXRlcy4gQW5vdGhlciBzcGVjaWFsIGNhc2UgaXMgaWYgdGhlIHNlcnZlclxuICAgICAgICAgICAgLy8gYWRkcyBub2RlcywgYnV0IGRvZXNuJ3QgY2hhbmdlIGFueSBleGlzdGluZyB3cml0ZXMuIEl0IGlzIHRoZXJlZm9yZSBub3QgZW5vdWdoIHRvXG4gICAgICAgICAgICAvLyBvbmx5IGNoZWNrIGlmIHRoZSB1cGRhdGVzIGNoYW5nZSB0aGUgc2VydmVyTm9kZS5cbiAgICAgICAgICAgIC8vIE1heWJlIGNoZWNrIGlmIHRoZSBtZXJnZSB0cmVlIGNvbnRhaW5zIHRoZXNlIHNwZWNpYWwgY2FzZXMgYW5kIG9ubHkgZG8gYSBmdWxsIG92ZXJ3cml0ZSBpbiB0aGF0IGNhc2U/XG4gICAgICAgICAgICByZXR1cm4gY29tcG91bmRXcml0ZUFwcGx5KGNoaWxkTWVyZ2UsIGV4aXN0aW5nU2VydmVyU25hcC5nZXRDaGlsZChjaGlsZFBhdGgpKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogUmV0dXJucyBhIGNvbXBsZXRlIGNoaWxkIGZvciBhIGdpdmVuIHNlcnZlciBzbmFwIGFmdGVyIGFwcGx5aW5nIGFsbCB1c2VyIHdyaXRlcyBvciBudWxsIGlmIHRoZXJlIGlzIG5vXG4gKiBjb21wbGV0ZSBjaGlsZCBmb3IgdGhpcyBDaGlsZEtleS5cbiAqL1xuZnVuY3Rpb24gd3JpdGVUcmVlQ2FsY0NvbXBsZXRlQ2hpbGQod3JpdGVUcmVlLCB0cmVlUGF0aCwgY2hpbGRLZXksIGV4aXN0aW5nU2VydmVyU25hcCkge1xuICAgIGNvbnN0IHBhdGggPSBwYXRoQ2hpbGQodHJlZVBhdGgsIGNoaWxkS2V5KTtcbiAgICBjb25zdCBzaGFkb3dpbmdOb2RlID0gY29tcG91bmRXcml0ZUdldENvbXBsZXRlTm9kZSh3cml0ZVRyZWUudmlzaWJsZVdyaXRlcywgcGF0aCk7XG4gICAgaWYgKHNoYWRvd2luZ05vZGUgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gc2hhZG93aW5nTm9kZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmIChleGlzdGluZ1NlcnZlclNuYXAuaXNDb21wbGV0ZUZvckNoaWxkKGNoaWxkS2V5KSkge1xuICAgICAgICAgICAgY29uc3QgY2hpbGRNZXJnZSA9IGNvbXBvdW5kV3JpdGVDaGlsZENvbXBvdW5kV3JpdGUod3JpdGVUcmVlLnZpc2libGVXcml0ZXMsIHBhdGgpO1xuICAgICAgICAgICAgcmV0dXJuIGNvbXBvdW5kV3JpdGVBcHBseShjaGlsZE1lcmdlLCBleGlzdGluZ1NlcnZlclNuYXAuZ2V0Tm9kZSgpLmdldEltbWVkaWF0ZUNoaWxkKGNoaWxkS2V5KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogUmV0dXJucyBhIG5vZGUgaWYgdGhlcmUgaXMgYSBjb21wbGV0ZSBvdmVyd3JpdGUgZm9yIHRoaXMgcGF0aC4gTW9yZSBzcGVjaWZpY2FsbHksIGlmIHRoZXJlIGlzIGEgd3JpdGUgYXRcbiAqIGEgaGlnaGVyIHBhdGgsIHRoaXMgd2lsbCByZXR1cm4gdGhlIGNoaWxkIG9mIHRoYXQgd3JpdGUgcmVsYXRpdmUgdG8gdGhlIHdyaXRlIGFuZCB0aGlzIHBhdGguXG4gKiBSZXR1cm5zIG51bGwgaWYgdGhlcmUgaXMgbm8gd3JpdGUgYXQgdGhpcyBwYXRoLlxuICovXG5mdW5jdGlvbiB3cml0ZVRyZWVTaGFkb3dpbmdXcml0ZSh3cml0ZVRyZWUsIHBhdGgpIHtcbiAgICByZXR1cm4gY29tcG91bmRXcml0ZUdldENvbXBsZXRlTm9kZSh3cml0ZVRyZWUudmlzaWJsZVdyaXRlcywgcGF0aCk7XG59XG4vKipcbiAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgd2hlbiBwcm9jZXNzaW5nIGNoaWxkIHJlbW92ZSBldmVudHMgb24gYSBxdWVyeS4gSWYgd2UgY2FuLCB3ZSBwdWxsIGluIGNoaWxkcmVuIHRoYXQgd2VyZSBvdXRzaWRlXG4gKiB0aGUgd2luZG93LCBidXQgbWF5IG5vdyBiZSBpbiB0aGUgd2luZG93LlxuICovXG5mdW5jdGlvbiB3cml0ZVRyZWVDYWxjSW5kZXhlZFNsaWNlKHdyaXRlVHJlZSwgdHJlZVBhdGgsIGNvbXBsZXRlU2VydmVyRGF0YSwgc3RhcnRQb3N0LCBjb3VudCwgcmV2ZXJzZSwgaW5kZXgpIHtcbiAgICBsZXQgdG9JdGVyYXRlO1xuICAgIGNvbnN0IG1lcmdlID0gY29tcG91bmRXcml0ZUNoaWxkQ29tcG91bmRXcml0ZSh3cml0ZVRyZWUudmlzaWJsZVdyaXRlcywgdHJlZVBhdGgpO1xuICAgIGNvbnN0IHNoYWRvd2luZ05vZGUgPSBjb21wb3VuZFdyaXRlR2V0Q29tcGxldGVOb2RlKG1lcmdlLCBuZXdFbXB0eVBhdGgoKSk7XG4gICAgaWYgKHNoYWRvd2luZ05vZGUgIT0gbnVsbCkge1xuICAgICAgICB0b0l0ZXJhdGUgPSBzaGFkb3dpbmdOb2RlO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb21wbGV0ZVNlcnZlckRhdGEgIT0gbnVsbCkge1xuICAgICAgICB0b0l0ZXJhdGUgPSBjb21wb3VuZFdyaXRlQXBwbHkobWVyZ2UsIGNvbXBsZXRlU2VydmVyRGF0YSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBubyBjaGlsZHJlbiB0byBpdGVyYXRlIG9uXG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgdG9JdGVyYXRlID0gdG9JdGVyYXRlLndpdGhJbmRleChpbmRleCk7XG4gICAgaWYgKCF0b0l0ZXJhdGUuaXNFbXB0eSgpICYmICF0b0l0ZXJhdGUuaXNMZWFmTm9kZSgpKSB7XG4gICAgICAgIGNvbnN0IG5vZGVzID0gW107XG4gICAgICAgIGNvbnN0IGNtcCA9IGluZGV4LmdldENvbXBhcmUoKTtcbiAgICAgICAgY29uc3QgaXRlciA9IHJldmVyc2VcbiAgICAgICAgICAgID8gdG9JdGVyYXRlLmdldFJldmVyc2VJdGVyYXRvckZyb20oc3RhcnRQb3N0LCBpbmRleClcbiAgICAgICAgICAgIDogdG9JdGVyYXRlLmdldEl0ZXJhdG9yRnJvbShzdGFydFBvc3QsIGluZGV4KTtcbiAgICAgICAgbGV0IG5leHQgPSBpdGVyLmdldE5leHQoKTtcbiAgICAgICAgd2hpbGUgKG5leHQgJiYgbm9kZXMubGVuZ3RoIDwgY291bnQpIHtcbiAgICAgICAgICAgIGlmIChjbXAobmV4dCwgc3RhcnRQb3N0KSAhPT0gMCkge1xuICAgICAgICAgICAgICAgIG5vZGVzLnB1c2gobmV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXh0ID0gaXRlci5nZXROZXh0KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5vZGVzO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG5ld1dyaXRlVHJlZSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB2aXNpYmxlV3JpdGVzOiBDb21wb3VuZFdyaXRlLmVtcHR5KCksXG4gICAgICAgIGFsbFdyaXRlczogW10sXG4gICAgICAgIGxhc3RXcml0ZUlkOiAtMVxuICAgIH07XG59XG4vKipcbiAqIElmIHBvc3NpYmxlLCByZXR1cm5zIGEgY29tcGxldGUgZXZlbnQgY2FjaGUsIHVzaW5nIHRoZSB1bmRlcmx5aW5nIHNlcnZlciBkYXRhIGlmIHBvc3NpYmxlLiBJbiBhZGRpdGlvbiwgY2FuIGJlIHVzZWRcbiAqIHRvIGdldCBhIGNhY2hlIHRoYXQgaW5jbHVkZXMgaGlkZGVuIHdyaXRlcywgYW5kIGV4Y2x1ZGVzIGFyYml0cmFyeSB3cml0ZXMuIE5vdGUgdGhhdCBjdXN0b21pemluZyB0aGUgcmV0dXJuZWQgbm9kZVxuICogY2FuIGxlYWQgdG8gYSBtb3JlIGV4cGVuc2l2ZSBjYWxjdWxhdGlvbi5cbiAqXG4gKiBAcGFyYW0gd3JpdGVJZHNUb0V4Y2x1ZGUgLSBPcHRpb25hbCB3cml0ZXMgdG8gZXhjbHVkZS5cbiAqIEBwYXJhbSBpbmNsdWRlSGlkZGVuV3JpdGVzIC0gRGVmYXVsdHMgdG8gZmFsc2UsIHdoZXRoZXIgb3Igbm90IHRvIGxheWVyIG9uIHdyaXRlcyB3aXRoIHZpc2libGUgc2V0IHRvIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIHdyaXRlVHJlZVJlZkNhbGNDb21wbGV0ZUV2ZW50Q2FjaGUod3JpdGVUcmVlUmVmLCBjb21wbGV0ZVNlcnZlckNhY2hlLCB3cml0ZUlkc1RvRXhjbHVkZSwgaW5jbHVkZUhpZGRlbldyaXRlcykge1xuICAgIHJldHVybiB3cml0ZVRyZWVDYWxjQ29tcGxldGVFdmVudENhY2hlKHdyaXRlVHJlZVJlZi53cml0ZVRyZWUsIHdyaXRlVHJlZVJlZi50cmVlUGF0aCwgY29tcGxldGVTZXJ2ZXJDYWNoZSwgd3JpdGVJZHNUb0V4Y2x1ZGUsIGluY2x1ZGVIaWRkZW5Xcml0ZXMpO1xufVxuLyoqXG4gKiBJZiBwb3NzaWJsZSwgcmV0dXJucyBhIGNoaWxkcmVuIG5vZGUgY29udGFpbmluZyBhbGwgb2YgdGhlIGNvbXBsZXRlIGNoaWxkcmVuIHdlIGhhdmUgZGF0YSBmb3IuIFRoZSByZXR1cm5lZCBkYXRhIGlzIGFcbiAqIG1peCBvZiB0aGUgZ2l2ZW4gc2VydmVyIGRhdGEgYW5kIHdyaXRlIGRhdGEuXG4gKlxuICovXG5mdW5jdGlvbiB3cml0ZVRyZWVSZWZDYWxjQ29tcGxldGVFdmVudENoaWxkcmVuKHdyaXRlVHJlZVJlZiwgY29tcGxldGVTZXJ2ZXJDaGlsZHJlbikge1xuICAgIHJldHVybiB3cml0ZVRyZWVDYWxjQ29tcGxldGVFdmVudENoaWxkcmVuKHdyaXRlVHJlZVJlZi53cml0ZVRyZWUsIHdyaXRlVHJlZVJlZi50cmVlUGF0aCwgY29tcGxldGVTZXJ2ZXJDaGlsZHJlbik7XG59XG4vKipcbiAqIEdpdmVuIHRoYXQgZWl0aGVyIHRoZSB1bmRlcmx5aW5nIHNlcnZlciBkYXRhIGhhcyB1cGRhdGVkIG9yIHRoZSBvdXRzdGFuZGluZyB3cml0ZXMgaGF2ZSB1cGRhdGVkLCBkZXRlcm1pbmUgd2hhdCxcbiAqIGlmIGFueXRoaW5nLCBuZWVkcyB0byBiZSBhcHBsaWVkIHRvIHRoZSBldmVudCBjYWNoZS5cbiAqXG4gKiBQb3NzaWJpbGl0aWVzOlxuICpcbiAqIDEuIE5vIHdyaXRlcyBhcmUgc2hhZG93aW5nLiBFdmVudHMgc2hvdWxkIGJlIHJhaXNlZCwgdGhlIHNuYXAgdG8gYmUgYXBwbGllZCBjb21lcyBmcm9tIHRoZSBzZXJ2ZXIgZGF0YVxuICpcbiAqIDIuIFNvbWUgd3JpdGUgaXMgY29tcGxldGVseSBzaGFkb3dpbmcuIE5vIGV2ZW50cyB0byBiZSByYWlzZWRcbiAqXG4gKiAzLiBJcyBwYXJ0aWFsbHkgc2hhZG93ZWQuIEV2ZW50cyBzaG91bGQgYmUgcmFpc2VkXG4gKlxuICogRWl0aGVyIGV4aXN0aW5nRXZlbnRTbmFwIG9yIGV4aXN0aW5nU2VydmVyU25hcCBtdXN0IGV4aXN0LCB0aGlzIGlzIHZhbGlkYXRlZCB2aWEgYW4gYXNzZXJ0XG4gKlxuICpcbiAqL1xuZnVuY3Rpb24gd3JpdGVUcmVlUmVmQ2FsY0V2ZW50Q2FjaGVBZnRlclNlcnZlck92ZXJ3cml0ZSh3cml0ZVRyZWVSZWYsIHBhdGgsIGV4aXN0aW5nRXZlbnRTbmFwLCBleGlzdGluZ1NlcnZlclNuYXApIHtcbiAgICByZXR1cm4gd3JpdGVUcmVlQ2FsY0V2ZW50Q2FjaGVBZnRlclNlcnZlck92ZXJ3cml0ZSh3cml0ZVRyZWVSZWYud3JpdGVUcmVlLCB3cml0ZVRyZWVSZWYudHJlZVBhdGgsIHBhdGgsIGV4aXN0aW5nRXZlbnRTbmFwLCBleGlzdGluZ1NlcnZlclNuYXApO1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgbm9kZSBpZiB0aGVyZSBpcyBhIGNvbXBsZXRlIG92ZXJ3cml0ZSBmb3IgdGhpcyBwYXRoLiBNb3JlIHNwZWNpZmljYWxseSwgaWYgdGhlcmUgaXMgYSB3cml0ZSBhdFxuICogYSBoaWdoZXIgcGF0aCwgdGhpcyB3aWxsIHJldHVybiB0aGUgY2hpbGQgb2YgdGhhdCB3cml0ZSByZWxhdGl2ZSB0byB0aGUgd3JpdGUgYW5kIHRoaXMgcGF0aC5cbiAqIFJldHVybnMgbnVsbCBpZiB0aGVyZSBpcyBubyB3cml0ZSBhdCB0aGlzIHBhdGguXG4gKlxuICovXG5mdW5jdGlvbiB3cml0ZVRyZWVSZWZTaGFkb3dpbmdXcml0ZSh3cml0ZVRyZWVSZWYsIHBhdGgpIHtcbiAgICByZXR1cm4gd3JpdGVUcmVlU2hhZG93aW5nV3JpdGUod3JpdGVUcmVlUmVmLndyaXRlVHJlZSwgcGF0aENoaWxkKHdyaXRlVHJlZVJlZi50cmVlUGF0aCwgcGF0aCkpO1xufVxuLyoqXG4gKiBUaGlzIG1ldGhvZCBpcyB1c2VkIHdoZW4gcHJvY2Vzc2luZyBjaGlsZCByZW1vdmUgZXZlbnRzIG9uIGEgcXVlcnkuIElmIHdlIGNhbiwgd2UgcHVsbCBpbiBjaGlsZHJlbiB0aGF0IHdlcmUgb3V0c2lkZVxuICogdGhlIHdpbmRvdywgYnV0IG1heSBub3cgYmUgaW4gdGhlIHdpbmRvd1xuICovXG5mdW5jdGlvbiB3cml0ZVRyZWVSZWZDYWxjSW5kZXhlZFNsaWNlKHdyaXRlVHJlZVJlZiwgY29tcGxldGVTZXJ2ZXJEYXRhLCBzdGFydFBvc3QsIGNvdW50LCByZXZlcnNlLCBpbmRleCkge1xuICAgIHJldHVybiB3cml0ZVRyZWVDYWxjSW5kZXhlZFNsaWNlKHdyaXRlVHJlZVJlZi53cml0ZVRyZWUsIHdyaXRlVHJlZVJlZi50cmVlUGF0aCwgY29tcGxldGVTZXJ2ZXJEYXRhLCBzdGFydFBvc3QsIGNvdW50LCByZXZlcnNlLCBpbmRleCk7XG59XG4vKipcbiAqIFJldHVybnMgYSBjb21wbGV0ZSBjaGlsZCBmb3IgYSBnaXZlbiBzZXJ2ZXIgc25hcCBhZnRlciBhcHBseWluZyBhbGwgdXNlciB3cml0ZXMgb3IgbnVsbCBpZiB0aGVyZSBpcyBub1xuICogY29tcGxldGUgY2hpbGQgZm9yIHRoaXMgQ2hpbGRLZXkuXG4gKi9cbmZ1bmN0aW9uIHdyaXRlVHJlZVJlZkNhbGNDb21wbGV0ZUNoaWxkKHdyaXRlVHJlZVJlZiwgY2hpbGRLZXksIGV4aXN0aW5nU2VydmVyQ2FjaGUpIHtcbiAgICByZXR1cm4gd3JpdGVUcmVlQ2FsY0NvbXBsZXRlQ2hpbGQod3JpdGVUcmVlUmVmLndyaXRlVHJlZSwgd3JpdGVUcmVlUmVmLnRyZWVQYXRoLCBjaGlsZEtleSwgZXhpc3RpbmdTZXJ2ZXJDYWNoZSk7XG59XG4vKipcbiAqIFJldHVybiBhIFdyaXRlVHJlZVJlZiBmb3IgYSBjaGlsZC5cbiAqL1xuZnVuY3Rpb24gd3JpdGVUcmVlUmVmQ2hpbGQod3JpdGVUcmVlUmVmLCBjaGlsZE5hbWUpIHtcbiAgICByZXR1cm4gbmV3V3JpdGVUcmVlUmVmKHBhdGhDaGlsZCh3cml0ZVRyZWVSZWYudHJlZVBhdGgsIGNoaWxkTmFtZSksIHdyaXRlVHJlZVJlZi53cml0ZVRyZWUpO1xufVxuZnVuY3Rpb24gbmV3V3JpdGVUcmVlUmVmKHBhdGgsIHdyaXRlVHJlZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHRyZWVQYXRoOiBwYXRoLFxuICAgICAgICB3cml0ZVRyZWVcbiAgICB9O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY2xhc3MgQ2hpbGRDaGFuZ2VBY2N1bXVsYXRvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlTWFwID0gbmV3IE1hcCgpO1xuICAgIH1cbiAgICB0cmFja0NoaWxkQ2hhbmdlKGNoYW5nZSkge1xuICAgICAgICBjb25zdCB0eXBlID0gY2hhbmdlLnR5cGU7XG4gICAgICAgIGNvbnN0IGNoaWxkS2V5ID0gY2hhbmdlLmNoaWxkTmFtZTtcbiAgICAgICAgYXNzZXJ0KHR5cGUgPT09IFwiY2hpbGRfYWRkZWRcIiAvKiBDaGFuZ2VUeXBlLkNISUxEX0FEREVEICovIHx8XG4gICAgICAgICAgICB0eXBlID09PSBcImNoaWxkX2NoYW5nZWRcIiAvKiBDaGFuZ2VUeXBlLkNISUxEX0NIQU5HRUQgKi8gfHxcbiAgICAgICAgICAgIHR5cGUgPT09IFwiY2hpbGRfcmVtb3ZlZFwiIC8qIENoYW5nZVR5cGUuQ0hJTERfUkVNT1ZFRCAqLywgJ09ubHkgY2hpbGQgY2hhbmdlcyBzdXBwb3J0ZWQgZm9yIHRyYWNraW5nJyk7XG4gICAgICAgIGFzc2VydChjaGlsZEtleSAhPT0gJy5wcmlvcml0eScsICdPbmx5IG5vbi1wcmlvcml0eSBjaGlsZCBjaGFuZ2VzIGNhbiBiZSB0cmFja2VkLicpO1xuICAgICAgICBjb25zdCBvbGRDaGFuZ2UgPSB0aGlzLmNoYW5nZU1hcC5nZXQoY2hpbGRLZXkpO1xuICAgICAgICBpZiAob2xkQ2hhbmdlKSB7XG4gICAgICAgICAgICBjb25zdCBvbGRUeXBlID0gb2xkQ2hhbmdlLnR5cGU7XG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gXCJjaGlsZF9hZGRlZFwiIC8qIENoYW5nZVR5cGUuQ0hJTERfQURERUQgKi8gJiZcbiAgICAgICAgICAgICAgICBvbGRUeXBlID09PSBcImNoaWxkX3JlbW92ZWRcIiAvKiBDaGFuZ2VUeXBlLkNISUxEX1JFTU9WRUQgKi8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZU1hcC5zZXQoY2hpbGRLZXksIGNoYW5nZUNoaWxkQ2hhbmdlZChjaGlsZEtleSwgY2hhbmdlLnNuYXBzaG90Tm9kZSwgb2xkQ2hhbmdlLnNuYXBzaG90Tm9kZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gXCJjaGlsZF9yZW1vdmVkXCIgLyogQ2hhbmdlVHlwZS5DSElMRF9SRU1PVkVEICovICYmXG4gICAgICAgICAgICAgICAgb2xkVHlwZSA9PT0gXCJjaGlsZF9hZGRlZFwiIC8qIENoYW5nZVR5cGUuQ0hJTERfQURERUQgKi8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZU1hcC5kZWxldGUoY2hpbGRLZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gXCJjaGlsZF9yZW1vdmVkXCIgLyogQ2hhbmdlVHlwZS5DSElMRF9SRU1PVkVEICovICYmXG4gICAgICAgICAgICAgICAgb2xkVHlwZSA9PT0gXCJjaGlsZF9jaGFuZ2VkXCIgLyogQ2hhbmdlVHlwZS5DSElMRF9DSEFOR0VEICovKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VNYXAuc2V0KGNoaWxkS2V5LCBjaGFuZ2VDaGlsZFJlbW92ZWQoY2hpbGRLZXksIG9sZENoYW5nZS5vbGRTbmFwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlID09PSBcImNoaWxkX2NoYW5nZWRcIiAvKiBDaGFuZ2VUeXBlLkNISUxEX0NIQU5HRUQgKi8gJiZcbiAgICAgICAgICAgICAgICBvbGRUeXBlID09PSBcImNoaWxkX2FkZGVkXCIgLyogQ2hhbmdlVHlwZS5DSElMRF9BRERFRCAqLykge1xuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlTWFwLnNldChjaGlsZEtleSwgY2hhbmdlQ2hpbGRBZGRlZChjaGlsZEtleSwgY2hhbmdlLnNuYXBzaG90Tm9kZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gXCJjaGlsZF9jaGFuZ2VkXCIgLyogQ2hhbmdlVHlwZS5DSElMRF9DSEFOR0VEICovICYmXG4gICAgICAgICAgICAgICAgb2xkVHlwZSA9PT0gXCJjaGlsZF9jaGFuZ2VkXCIgLyogQ2hhbmdlVHlwZS5DSElMRF9DSEFOR0VEICovKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VNYXAuc2V0KGNoaWxkS2V5LCBjaGFuZ2VDaGlsZENoYW5nZWQoY2hpbGRLZXksIGNoYW5nZS5zbmFwc2hvdE5vZGUsIG9sZENoYW5nZS5vbGRTbmFwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBhc3NlcnRpb25FcnJvcignSWxsZWdhbCBjb21iaW5hdGlvbiBvZiBjaGFuZ2VzOiAnICtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlICtcbiAgICAgICAgICAgICAgICAgICAgJyBvY2N1cnJlZCBhZnRlciAnICtcbiAgICAgICAgICAgICAgICAgICAgb2xkQ2hhbmdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlTWFwLnNldChjaGlsZEtleSwgY2hhbmdlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRDaGFuZ2VzKCkge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmNoYW5nZU1hcC52YWx1ZXMoKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiBDb21wbGV0ZUNoaWxkU291cmNlIHRoYXQgbmV2ZXIgcmV0dXJucyBhbnkgYWRkaXRpb25hbCBjaGlsZHJlblxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uXG5jbGFzcyBOb0NvbXBsZXRlQ2hpbGRTb3VyY2VfIHtcbiAgICBnZXRDb21wbGV0ZUNoaWxkKGNoaWxkS2V5KSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBnZXRDaGlsZEFmdGVyQ2hpbGQoaW5kZXgsIGNoaWxkLCByZXZlcnNlKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbi8qKlxuICogU2luZ2xldG9uIGluc3RhbmNlLlxuICovXG5jb25zdCBOT19DT01QTEVURV9DSElMRF9TT1VSQ0UgPSBuZXcgTm9Db21wbGV0ZUNoaWxkU291cmNlXygpO1xuLyoqXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiBDb21wbGV0ZUNoaWxkU291cmNlIHRoYXQgdXNlcyBhIFdyaXRlVHJlZSBpbiBhZGRpdGlvbiB0byBhbnkgb3RoZXIgc2VydmVyIGRhdGEgb3JcbiAqIG9sZCBldmVudCBjYWNoZXMgYXZhaWxhYmxlIHRvIGNhbGN1bGF0ZSBjb21wbGV0ZSBjaGlsZHJlbi5cbiAqL1xuY2xhc3MgV3JpdGVUcmVlQ29tcGxldGVDaGlsZFNvdXJjZSB7XG4gICAgY29uc3RydWN0b3Iod3JpdGVzXywgdmlld0NhY2hlXywgb3B0Q29tcGxldGVTZXJ2ZXJDYWNoZV8gPSBudWxsKSB7XG4gICAgICAgIHRoaXMud3JpdGVzXyA9IHdyaXRlc187XG4gICAgICAgIHRoaXMudmlld0NhY2hlXyA9IHZpZXdDYWNoZV87XG4gICAgICAgIHRoaXMub3B0Q29tcGxldGVTZXJ2ZXJDYWNoZV8gPSBvcHRDb21wbGV0ZVNlcnZlckNhY2hlXztcbiAgICB9XG4gICAgZ2V0Q29tcGxldGVDaGlsZChjaGlsZEtleSkge1xuICAgICAgICBjb25zdCBub2RlID0gdGhpcy52aWV3Q2FjaGVfLmV2ZW50Q2FjaGU7XG4gICAgICAgIGlmIChub2RlLmlzQ29tcGxldGVGb3JDaGlsZChjaGlsZEtleSkpIHtcbiAgICAgICAgICAgIHJldHVybiBub2RlLmdldE5vZGUoKS5nZXRJbW1lZGlhdGVDaGlsZChjaGlsZEtleSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBzZXJ2ZXJOb2RlID0gdGhpcy5vcHRDb21wbGV0ZVNlcnZlckNhY2hlXyAhPSBudWxsXG4gICAgICAgICAgICAgICAgPyBuZXcgQ2FjaGVOb2RlKHRoaXMub3B0Q29tcGxldGVTZXJ2ZXJDYWNoZV8sIHRydWUsIGZhbHNlKVxuICAgICAgICAgICAgICAgIDogdGhpcy52aWV3Q2FjaGVfLnNlcnZlckNhY2hlO1xuICAgICAgICAgICAgcmV0dXJuIHdyaXRlVHJlZVJlZkNhbGNDb21wbGV0ZUNoaWxkKHRoaXMud3JpdGVzXywgY2hpbGRLZXksIHNlcnZlck5vZGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldENoaWxkQWZ0ZXJDaGlsZChpbmRleCwgY2hpbGQsIHJldmVyc2UpIHtcbiAgICAgICAgY29uc3QgY29tcGxldGVTZXJ2ZXJEYXRhID0gdGhpcy5vcHRDb21wbGV0ZVNlcnZlckNhY2hlXyAhPSBudWxsXG4gICAgICAgICAgICA/IHRoaXMub3B0Q29tcGxldGVTZXJ2ZXJDYWNoZV9cbiAgICAgICAgICAgIDogdmlld0NhY2hlR2V0Q29tcGxldGVTZXJ2ZXJTbmFwKHRoaXMudmlld0NhY2hlXyk7XG4gICAgICAgIGNvbnN0IG5vZGVzID0gd3JpdGVUcmVlUmVmQ2FsY0luZGV4ZWRTbGljZSh0aGlzLndyaXRlc18sIGNvbXBsZXRlU2VydmVyRGF0YSwgY2hpbGQsIDEsIHJldmVyc2UsIGluZGV4KTtcbiAgICAgICAgaWYgKG5vZGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZXNbMF07XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5mdW5jdGlvbiBuZXdWaWV3UHJvY2Vzc29yKGZpbHRlcikge1xuICAgIHJldHVybiB7IGZpbHRlciB9O1xufVxuZnVuY3Rpb24gdmlld1Byb2Nlc3NvckFzc2VydEluZGV4ZWQodmlld1Byb2Nlc3Nvciwgdmlld0NhY2hlKSB7XG4gICAgYXNzZXJ0KHZpZXdDYWNoZS5ldmVudENhY2hlLmdldE5vZGUoKS5pc0luZGV4ZWQodmlld1Byb2Nlc3Nvci5maWx0ZXIuZ2V0SW5kZXgoKSksICdFdmVudCBzbmFwIG5vdCBpbmRleGVkJyk7XG4gICAgYXNzZXJ0KHZpZXdDYWNoZS5zZXJ2ZXJDYWNoZS5nZXROb2RlKCkuaXNJbmRleGVkKHZpZXdQcm9jZXNzb3IuZmlsdGVyLmdldEluZGV4KCkpLCAnU2VydmVyIHNuYXAgbm90IGluZGV4ZWQnKTtcbn1cbmZ1bmN0aW9uIHZpZXdQcm9jZXNzb3JBcHBseU9wZXJhdGlvbih2aWV3UHJvY2Vzc29yLCBvbGRWaWV3Q2FjaGUsIG9wZXJhdGlvbiwgd3JpdGVzQ2FjaGUsIGNvbXBsZXRlQ2FjaGUpIHtcbiAgICBjb25zdCBhY2N1bXVsYXRvciA9IG5ldyBDaGlsZENoYW5nZUFjY3VtdWxhdG9yKCk7XG4gICAgbGV0IG5ld1ZpZXdDYWNoZSwgZmlsdGVyU2VydmVyTm9kZTtcbiAgICBpZiAob3BlcmF0aW9uLnR5cGUgPT09IE9wZXJhdGlvblR5cGUuT1ZFUldSSVRFKSB7XG4gICAgICAgIGNvbnN0IG92ZXJ3cml0ZSA9IG9wZXJhdGlvbjtcbiAgICAgICAgaWYgKG92ZXJ3cml0ZS5zb3VyY2UuZnJvbVVzZXIpIHtcbiAgICAgICAgICAgIG5ld1ZpZXdDYWNoZSA9IHZpZXdQcm9jZXNzb3JBcHBseVVzZXJPdmVyd3JpdGUodmlld1Byb2Nlc3Nvciwgb2xkVmlld0NhY2hlLCBvdmVyd3JpdGUucGF0aCwgb3ZlcndyaXRlLnNuYXAsIHdyaXRlc0NhY2hlLCBjb21wbGV0ZUNhY2hlLCBhY2N1bXVsYXRvcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhc3NlcnQob3ZlcndyaXRlLnNvdXJjZS5mcm9tU2VydmVyLCAnVW5rbm93biBzb3VyY2UuJyk7XG4gICAgICAgICAgICAvLyBXZSBmaWx0ZXIgdGhlIG5vZGUgaWYgaXQncyBhIHRhZ2dlZCB1cGRhdGUgb3IgdGhlIG5vZGUgaGFzIGJlZW4gcHJldmlvdXNseSBmaWx0ZXJlZCAgYW5kIHRoZVxuICAgICAgICAgICAgLy8gdXBkYXRlIGlzIG5vdCBhdCB0aGUgcm9vdCBpbiB3aGljaCBjYXNlIGl0IGlzIG9rIChhbmQgbmVjZXNzYXJ5KSB0byBtYXJrIHRoZSBub2RlIHVuZmlsdGVyZWRcbiAgICAgICAgICAgIC8vIGFnYWluXG4gICAgICAgICAgICBmaWx0ZXJTZXJ2ZXJOb2RlID1cbiAgICAgICAgICAgICAgICBvdmVyd3JpdGUuc291cmNlLnRhZ2dlZCB8fFxuICAgICAgICAgICAgICAgICAgICAob2xkVmlld0NhY2hlLnNlcnZlckNhY2hlLmlzRmlsdGVyZWQoKSAmJiAhcGF0aElzRW1wdHkob3ZlcndyaXRlLnBhdGgpKTtcbiAgICAgICAgICAgIG5ld1ZpZXdDYWNoZSA9IHZpZXdQcm9jZXNzb3JBcHBseVNlcnZlck92ZXJ3cml0ZSh2aWV3UHJvY2Vzc29yLCBvbGRWaWV3Q2FjaGUsIG92ZXJ3cml0ZS5wYXRoLCBvdmVyd3JpdGUuc25hcCwgd3JpdGVzQ2FjaGUsIGNvbXBsZXRlQ2FjaGUsIGZpbHRlclNlcnZlck5vZGUsIGFjY3VtdWxhdG9yKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChvcGVyYXRpb24udHlwZSA9PT0gT3BlcmF0aW9uVHlwZS5NRVJHRSkge1xuICAgICAgICBjb25zdCBtZXJnZSA9IG9wZXJhdGlvbjtcbiAgICAgICAgaWYgKG1lcmdlLnNvdXJjZS5mcm9tVXNlcikge1xuICAgICAgICAgICAgbmV3Vmlld0NhY2hlID0gdmlld1Byb2Nlc3NvckFwcGx5VXNlck1lcmdlKHZpZXdQcm9jZXNzb3IsIG9sZFZpZXdDYWNoZSwgbWVyZ2UucGF0aCwgbWVyZ2UuY2hpbGRyZW4sIHdyaXRlc0NhY2hlLCBjb21wbGV0ZUNhY2hlLCBhY2N1bXVsYXRvcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhc3NlcnQobWVyZ2Uuc291cmNlLmZyb21TZXJ2ZXIsICdVbmtub3duIHNvdXJjZS4nKTtcbiAgICAgICAgICAgIC8vIFdlIGZpbHRlciB0aGUgbm9kZSBpZiBpdCdzIGEgdGFnZ2VkIHVwZGF0ZSBvciB0aGUgbm9kZSBoYXMgYmVlbiBwcmV2aW91c2x5IGZpbHRlcmVkXG4gICAgICAgICAgICBmaWx0ZXJTZXJ2ZXJOb2RlID1cbiAgICAgICAgICAgICAgICBtZXJnZS5zb3VyY2UudGFnZ2VkIHx8IG9sZFZpZXdDYWNoZS5zZXJ2ZXJDYWNoZS5pc0ZpbHRlcmVkKCk7XG4gICAgICAgICAgICBuZXdWaWV3Q2FjaGUgPSB2aWV3UHJvY2Vzc29yQXBwbHlTZXJ2ZXJNZXJnZSh2aWV3UHJvY2Vzc29yLCBvbGRWaWV3Q2FjaGUsIG1lcmdlLnBhdGgsIG1lcmdlLmNoaWxkcmVuLCB3cml0ZXNDYWNoZSwgY29tcGxldGVDYWNoZSwgZmlsdGVyU2VydmVyTm9kZSwgYWNjdW11bGF0b3IpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKG9wZXJhdGlvbi50eXBlID09PSBPcGVyYXRpb25UeXBlLkFDS19VU0VSX1dSSVRFKSB7XG4gICAgICAgIGNvbnN0IGFja1VzZXJXcml0ZSA9IG9wZXJhdGlvbjtcbiAgICAgICAgaWYgKCFhY2tVc2VyV3JpdGUucmV2ZXJ0KSB7XG4gICAgICAgICAgICBuZXdWaWV3Q2FjaGUgPSB2aWV3UHJvY2Vzc29yQWNrVXNlcldyaXRlKHZpZXdQcm9jZXNzb3IsIG9sZFZpZXdDYWNoZSwgYWNrVXNlcldyaXRlLnBhdGgsIGFja1VzZXJXcml0ZS5hZmZlY3RlZFRyZWUsIHdyaXRlc0NhY2hlLCBjb21wbGV0ZUNhY2hlLCBhY2N1bXVsYXRvcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBuZXdWaWV3Q2FjaGUgPSB2aWV3UHJvY2Vzc29yUmV2ZXJ0VXNlcldyaXRlKHZpZXdQcm9jZXNzb3IsIG9sZFZpZXdDYWNoZSwgYWNrVXNlcldyaXRlLnBhdGgsIHdyaXRlc0NhY2hlLCBjb21wbGV0ZUNhY2hlLCBhY2N1bXVsYXRvcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAob3BlcmF0aW9uLnR5cGUgPT09IE9wZXJhdGlvblR5cGUuTElTVEVOX0NPTVBMRVRFKSB7XG4gICAgICAgIG5ld1ZpZXdDYWNoZSA9IHZpZXdQcm9jZXNzb3JMaXN0ZW5Db21wbGV0ZSh2aWV3UHJvY2Vzc29yLCBvbGRWaWV3Q2FjaGUsIG9wZXJhdGlvbi5wYXRoLCB3cml0ZXNDYWNoZSwgYWNjdW11bGF0b3IpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgYXNzZXJ0aW9uRXJyb3IoJ1Vua25vd24gb3BlcmF0aW9uIHR5cGU6ICcgKyBvcGVyYXRpb24udHlwZSk7XG4gICAgfVxuICAgIGNvbnN0IGNoYW5nZXMgPSBhY2N1bXVsYXRvci5nZXRDaGFuZ2VzKCk7XG4gICAgdmlld1Byb2Nlc3Nvck1heWJlQWRkVmFsdWVFdmVudChvbGRWaWV3Q2FjaGUsIG5ld1ZpZXdDYWNoZSwgY2hhbmdlcyk7XG4gICAgcmV0dXJuIHsgdmlld0NhY2hlOiBuZXdWaWV3Q2FjaGUsIGNoYW5nZXMgfTtcbn1cbmZ1bmN0aW9uIHZpZXdQcm9jZXNzb3JNYXliZUFkZFZhbHVlRXZlbnQob2xkVmlld0NhY2hlLCBuZXdWaWV3Q2FjaGUsIGFjY3VtdWxhdG9yKSB7XG4gICAgY29uc3QgZXZlbnRTbmFwID0gbmV3Vmlld0NhY2hlLmV2ZW50Q2FjaGU7XG4gICAgaWYgKGV2ZW50U25hcC5pc0Z1bGx5SW5pdGlhbGl6ZWQoKSkge1xuICAgICAgICBjb25zdCBpc0xlYWZPckVtcHR5ID0gZXZlbnRTbmFwLmdldE5vZGUoKS5pc0xlYWZOb2RlKCkgfHwgZXZlbnRTbmFwLmdldE5vZGUoKS5pc0VtcHR5KCk7XG4gICAgICAgIGNvbnN0IG9sZENvbXBsZXRlU25hcCA9IHZpZXdDYWNoZUdldENvbXBsZXRlRXZlbnRTbmFwKG9sZFZpZXdDYWNoZSk7XG4gICAgICAgIGlmIChhY2N1bXVsYXRvci5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICAhb2xkVmlld0NhY2hlLmV2ZW50Q2FjaGUuaXNGdWxseUluaXRpYWxpemVkKCkgfHxcbiAgICAgICAgICAgIChpc0xlYWZPckVtcHR5ICYmICFldmVudFNuYXAuZ2V0Tm9kZSgpLmVxdWFscyhvbGRDb21wbGV0ZVNuYXApKSB8fFxuICAgICAgICAgICAgIWV2ZW50U25hcC5nZXROb2RlKCkuZ2V0UHJpb3JpdHkoKS5lcXVhbHMob2xkQ29tcGxldGVTbmFwLmdldFByaW9yaXR5KCkpKSB7XG4gICAgICAgICAgICBhY2N1bXVsYXRvci5wdXNoKGNoYW5nZVZhbHVlKHZpZXdDYWNoZUdldENvbXBsZXRlRXZlbnRTbmFwKG5ld1ZpZXdDYWNoZSkpKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIHZpZXdQcm9jZXNzb3JHZW5lcmF0ZUV2ZW50Q2FjaGVBZnRlclNlcnZlckV2ZW50KHZpZXdQcm9jZXNzb3IsIHZpZXdDYWNoZSwgY2hhbmdlUGF0aCwgd3JpdGVzQ2FjaGUsIHNvdXJjZSwgYWNjdW11bGF0b3IpIHtcbiAgICBjb25zdCBvbGRFdmVudFNuYXAgPSB2aWV3Q2FjaGUuZXZlbnRDYWNoZTtcbiAgICBpZiAod3JpdGVUcmVlUmVmU2hhZG93aW5nV3JpdGUod3JpdGVzQ2FjaGUsIGNoYW5nZVBhdGgpICE9IG51bGwpIHtcbiAgICAgICAgLy8gd2UgaGF2ZSBhIHNoYWRvd2luZyB3cml0ZSwgaWdub3JlIGNoYW5nZXNcbiAgICAgICAgcmV0dXJuIHZpZXdDYWNoZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGxldCBuZXdFdmVudENhY2hlLCBzZXJ2ZXJOb2RlO1xuICAgICAgICBpZiAocGF0aElzRW1wdHkoY2hhbmdlUGF0aCkpIHtcbiAgICAgICAgICAgIC8vIFRPRE86IGZpZ3VyZSBvdXQgaG93IHRoaXMgcGxheXMgd2l0aCBcInNsaWRpbmcgYWNrIHdpbmRvd3NcIlxuICAgICAgICAgICAgYXNzZXJ0KHZpZXdDYWNoZS5zZXJ2ZXJDYWNoZS5pc0Z1bGx5SW5pdGlhbGl6ZWQoKSwgJ0lmIGNoYW5nZSBwYXRoIGlzIGVtcHR5LCB3ZSBtdXN0IGhhdmUgY29tcGxldGUgc2VydmVyIGRhdGEnKTtcbiAgICAgICAgICAgIGlmICh2aWV3Q2FjaGUuc2VydmVyQ2FjaGUuaXNGaWx0ZXJlZCgpKSB7XG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBzcGVjaWFsIGNhc2UgdGhpcywgYmVjYXVzZSB3ZSBuZWVkIHRvIG9ubHkgYXBwbHkgd3JpdGVzIHRvIGNvbXBsZXRlIGNoaWxkcmVuLCBvclxuICAgICAgICAgICAgICAgIC8vIHdlIG1pZ2h0IGVuZCB1cCByYWlzaW5nIGV2ZW50cyBmb3IgaW5jb21wbGV0ZSBjaGlsZHJlbi4gSWYgdGhlIHNlcnZlciBkYXRhIGlzIGZpbHRlcmVkIGRlZXBcbiAgICAgICAgICAgICAgICAvLyB3cml0ZXMgY2Fubm90IGJlIGd1YXJhbnRlZWQgdG8gYmUgY29tcGxldGVcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJ2ZXJDYWNoZSA9IHZpZXdDYWNoZUdldENvbXBsZXRlU2VydmVyU25hcCh2aWV3Q2FjaGUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRlQ2hpbGRyZW4gPSBzZXJ2ZXJDYWNoZSBpbnN0YW5jZW9mIENoaWxkcmVuTm9kZVxuICAgICAgICAgICAgICAgICAgICA/IHNlcnZlckNhY2hlXG4gICAgICAgICAgICAgICAgICAgIDogQ2hpbGRyZW5Ob2RlLkVNUFRZX05PREU7XG4gICAgICAgICAgICAgICAgY29uc3QgY29tcGxldGVFdmVudENoaWxkcmVuID0gd3JpdGVUcmVlUmVmQ2FsY0NvbXBsZXRlRXZlbnRDaGlsZHJlbih3cml0ZXNDYWNoZSwgY29tcGxldGVDaGlsZHJlbik7XG4gICAgICAgICAgICAgICAgbmV3RXZlbnRDYWNoZSA9IHZpZXdQcm9jZXNzb3IuZmlsdGVyLnVwZGF0ZUZ1bGxOb2RlKHZpZXdDYWNoZS5ldmVudENhY2hlLmdldE5vZGUoKSwgY29tcGxldGVFdmVudENoaWxkcmVuLCBhY2N1bXVsYXRvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb21wbGV0ZU5vZGUgPSB3cml0ZVRyZWVSZWZDYWxjQ29tcGxldGVFdmVudENhY2hlKHdyaXRlc0NhY2hlLCB2aWV3Q2FjaGVHZXRDb21wbGV0ZVNlcnZlclNuYXAodmlld0NhY2hlKSk7XG4gICAgICAgICAgICAgICAgbmV3RXZlbnRDYWNoZSA9IHZpZXdQcm9jZXNzb3IuZmlsdGVyLnVwZGF0ZUZ1bGxOb2RlKHZpZXdDYWNoZS5ldmVudENhY2hlLmdldE5vZGUoKSwgY29tcGxldGVOb2RlLCBhY2N1bXVsYXRvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBjaGlsZEtleSA9IHBhdGhHZXRGcm9udChjaGFuZ2VQYXRoKTtcbiAgICAgICAgICAgIGlmIChjaGlsZEtleSA9PT0gJy5wcmlvcml0eScpIHtcbiAgICAgICAgICAgICAgICBhc3NlcnQocGF0aEdldExlbmd0aChjaGFuZ2VQYXRoKSA9PT0gMSwgXCJDYW4ndCBoYXZlIGEgcHJpb3JpdHkgd2l0aCBhZGRpdGlvbmFsIHBhdGggY29tcG9uZW50c1wiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBvbGRFdmVudE5vZGUgPSBvbGRFdmVudFNuYXAuZ2V0Tm9kZSgpO1xuICAgICAgICAgICAgICAgIHNlcnZlck5vZGUgPSB2aWV3Q2FjaGUuc2VydmVyQ2FjaGUuZ2V0Tm9kZSgpO1xuICAgICAgICAgICAgICAgIC8vIHdlIG1pZ2h0IGhhdmUgb3ZlcndyaXRlcyBmb3IgdGhpcyBwcmlvcml0eVxuICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRQcmlvcml0eSA9IHdyaXRlVHJlZVJlZkNhbGNFdmVudENhY2hlQWZ0ZXJTZXJ2ZXJPdmVyd3JpdGUod3JpdGVzQ2FjaGUsIGNoYW5nZVBhdGgsIG9sZEV2ZW50Tm9kZSwgc2VydmVyTm9kZSk7XG4gICAgICAgICAgICAgICAgaWYgKHVwZGF0ZWRQcmlvcml0eSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld0V2ZW50Q2FjaGUgPSB2aWV3UHJvY2Vzc29yLmZpbHRlci51cGRhdGVQcmlvcml0eShvbGRFdmVudE5vZGUsIHVwZGF0ZWRQcmlvcml0eSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBwcmlvcml0eSBkaWRuJ3QgY2hhbmdlLCBrZWVwIG9sZCBub2RlXG4gICAgICAgICAgICAgICAgICAgIG5ld0V2ZW50Q2FjaGUgPSBvbGRFdmVudFNuYXAuZ2V0Tm9kZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkQ2hhbmdlUGF0aCA9IHBhdGhQb3BGcm9udChjaGFuZ2VQYXRoKTtcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgY2hpbGRcbiAgICAgICAgICAgICAgICBsZXQgbmV3RXZlbnRDaGlsZDtcbiAgICAgICAgICAgICAgICBpZiAob2xkRXZlbnRTbmFwLmlzQ29tcGxldGVGb3JDaGlsZChjaGlsZEtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VydmVyTm9kZSA9IHZpZXdDYWNoZS5zZXJ2ZXJDYWNoZS5nZXROb2RlKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGV2ZW50Q2hpbGRVcGRhdGUgPSB3cml0ZVRyZWVSZWZDYWxjRXZlbnRDYWNoZUFmdGVyU2VydmVyT3ZlcndyaXRlKHdyaXRlc0NhY2hlLCBjaGFuZ2VQYXRoLCBvbGRFdmVudFNuYXAuZ2V0Tm9kZSgpLCBzZXJ2ZXJOb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50Q2hpbGRVcGRhdGUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3RXZlbnRDaGlsZCA9IG9sZEV2ZW50U25hcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXROb2RlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0SW1tZWRpYXRlQ2hpbGQoY2hpbGRLZXkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnVwZGF0ZUNoaWxkKGNoaWxkQ2hhbmdlUGF0aCwgZXZlbnRDaGlsZFVwZGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3RoaW5nIGNoYW5nZWQsIGp1c3Qga2VlcCB0aGUgb2xkIGNoaWxkXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdFdmVudENoaWxkID0gb2xkRXZlbnRTbmFwLmdldE5vZGUoKS5nZXRJbW1lZGlhdGVDaGlsZChjaGlsZEtleSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld0V2ZW50Q2hpbGQgPSB3cml0ZVRyZWVSZWZDYWxjQ29tcGxldGVDaGlsZCh3cml0ZXNDYWNoZSwgY2hpbGRLZXksIHZpZXdDYWNoZS5zZXJ2ZXJDYWNoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChuZXdFdmVudENoaWxkICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3RXZlbnRDYWNoZSA9IHZpZXdQcm9jZXNzb3IuZmlsdGVyLnVwZGF0ZUNoaWxkKG9sZEV2ZW50U25hcC5nZXROb2RlKCksIGNoaWxkS2V5LCBuZXdFdmVudENoaWxkLCBjaGlsZENoYW5nZVBhdGgsIHNvdXJjZSwgYWNjdW11bGF0b3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbm8gY29tcGxldGUgY2hpbGQgYXZhaWxhYmxlIG9yIG5vIGNoYW5nZVxuICAgICAgICAgICAgICAgICAgICBuZXdFdmVudENhY2hlID0gb2xkRXZlbnRTbmFwLmdldE5vZGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZpZXdDYWNoZVVwZGF0ZUV2ZW50U25hcCh2aWV3Q2FjaGUsIG5ld0V2ZW50Q2FjaGUsIG9sZEV2ZW50U25hcC5pc0Z1bGx5SW5pdGlhbGl6ZWQoKSB8fCBwYXRoSXNFbXB0eShjaGFuZ2VQYXRoKSwgdmlld1Byb2Nlc3Nvci5maWx0ZXIuZmlsdGVyc05vZGVzKCkpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHZpZXdQcm9jZXNzb3JBcHBseVNlcnZlck92ZXJ3cml0ZSh2aWV3UHJvY2Vzc29yLCBvbGRWaWV3Q2FjaGUsIGNoYW5nZVBhdGgsIGNoYW5nZWRTbmFwLCB3cml0ZXNDYWNoZSwgY29tcGxldGVDYWNoZSwgZmlsdGVyU2VydmVyTm9kZSwgYWNjdW11bGF0b3IpIHtcbiAgICBjb25zdCBvbGRTZXJ2ZXJTbmFwID0gb2xkVmlld0NhY2hlLnNlcnZlckNhY2hlO1xuICAgIGxldCBuZXdTZXJ2ZXJDYWNoZTtcbiAgICBjb25zdCBzZXJ2ZXJGaWx0ZXIgPSBmaWx0ZXJTZXJ2ZXJOb2RlXG4gICAgICAgID8gdmlld1Byb2Nlc3Nvci5maWx0ZXJcbiAgICAgICAgOiB2aWV3UHJvY2Vzc29yLmZpbHRlci5nZXRJbmRleGVkRmlsdGVyKCk7XG4gICAgaWYgKHBhdGhJc0VtcHR5KGNoYW5nZVBhdGgpKSB7XG4gICAgICAgIG5ld1NlcnZlckNhY2hlID0gc2VydmVyRmlsdGVyLnVwZGF0ZUZ1bGxOb2RlKG9sZFNlcnZlclNuYXAuZ2V0Tm9kZSgpLCBjaGFuZ2VkU25hcCwgbnVsbCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNlcnZlckZpbHRlci5maWx0ZXJzTm9kZXMoKSAmJiAhb2xkU2VydmVyU25hcC5pc0ZpbHRlcmVkKCkpIHtcbiAgICAgICAgLy8gd2Ugd2FudCB0byBmaWx0ZXIgdGhlIHNlcnZlciBub2RlLCBidXQgd2UgZGlkbid0IGZpbHRlciB0aGUgc2VydmVyIG5vZGUgeWV0LCBzbyBzaW11bGF0ZSBhIGZ1bGwgdXBkYXRlXG4gICAgICAgIGNvbnN0IG5ld1NlcnZlck5vZGUgPSBvbGRTZXJ2ZXJTbmFwXG4gICAgICAgICAgICAuZ2V0Tm9kZSgpXG4gICAgICAgICAgICAudXBkYXRlQ2hpbGQoY2hhbmdlUGF0aCwgY2hhbmdlZFNuYXApO1xuICAgICAgICBuZXdTZXJ2ZXJDYWNoZSA9IHNlcnZlckZpbHRlci51cGRhdGVGdWxsTm9kZShvbGRTZXJ2ZXJTbmFwLmdldE5vZGUoKSwgbmV3U2VydmVyTm9kZSwgbnVsbCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBjaGlsZEtleSA9IHBhdGhHZXRGcm9udChjaGFuZ2VQYXRoKTtcbiAgICAgICAgaWYgKCFvbGRTZXJ2ZXJTbmFwLmlzQ29tcGxldGVGb3JQYXRoKGNoYW5nZVBhdGgpICYmXG4gICAgICAgICAgICBwYXRoR2V0TGVuZ3RoKGNoYW5nZVBhdGgpID4gMSkge1xuICAgICAgICAgICAgLy8gV2UgZG9uJ3QgdXBkYXRlIGluY29tcGxldGUgbm9kZXMgd2l0aCB1cGRhdGVzIGludGVuZGVkIGZvciBvdGhlciBsaXN0ZW5lcnNcbiAgICAgICAgICAgIHJldHVybiBvbGRWaWV3Q2FjaGU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2hpbGRDaGFuZ2VQYXRoID0gcGF0aFBvcEZyb250KGNoYW5nZVBhdGgpO1xuICAgICAgICBjb25zdCBjaGlsZE5vZGUgPSBvbGRTZXJ2ZXJTbmFwLmdldE5vZGUoKS5nZXRJbW1lZGlhdGVDaGlsZChjaGlsZEtleSk7XG4gICAgICAgIGNvbnN0IG5ld0NoaWxkTm9kZSA9IGNoaWxkTm9kZS51cGRhdGVDaGlsZChjaGlsZENoYW5nZVBhdGgsIGNoYW5nZWRTbmFwKTtcbiAgICAgICAgaWYgKGNoaWxkS2V5ID09PSAnLnByaW9yaXR5Jykge1xuICAgICAgICAgICAgbmV3U2VydmVyQ2FjaGUgPSBzZXJ2ZXJGaWx0ZXIudXBkYXRlUHJpb3JpdHkob2xkU2VydmVyU25hcC5nZXROb2RlKCksIG5ld0NoaWxkTm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBuZXdTZXJ2ZXJDYWNoZSA9IHNlcnZlckZpbHRlci51cGRhdGVDaGlsZChvbGRTZXJ2ZXJTbmFwLmdldE5vZGUoKSwgY2hpbGRLZXksIG5ld0NoaWxkTm9kZSwgY2hpbGRDaGFuZ2VQYXRoLCBOT19DT01QTEVURV9DSElMRF9TT1VSQ0UsIG51bGwpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG5ld1ZpZXdDYWNoZSA9IHZpZXdDYWNoZVVwZGF0ZVNlcnZlclNuYXAob2xkVmlld0NhY2hlLCBuZXdTZXJ2ZXJDYWNoZSwgb2xkU2VydmVyU25hcC5pc0Z1bGx5SW5pdGlhbGl6ZWQoKSB8fCBwYXRoSXNFbXB0eShjaGFuZ2VQYXRoKSwgc2VydmVyRmlsdGVyLmZpbHRlcnNOb2RlcygpKTtcbiAgICBjb25zdCBzb3VyY2UgPSBuZXcgV3JpdGVUcmVlQ29tcGxldGVDaGlsZFNvdXJjZSh3cml0ZXNDYWNoZSwgbmV3Vmlld0NhY2hlLCBjb21wbGV0ZUNhY2hlKTtcbiAgICByZXR1cm4gdmlld1Byb2Nlc3NvckdlbmVyYXRlRXZlbnRDYWNoZUFmdGVyU2VydmVyRXZlbnQodmlld1Byb2Nlc3NvciwgbmV3Vmlld0NhY2hlLCBjaGFuZ2VQYXRoLCB3cml0ZXNDYWNoZSwgc291cmNlLCBhY2N1bXVsYXRvcik7XG59XG5mdW5jdGlvbiB2aWV3UHJvY2Vzc29yQXBwbHlVc2VyT3ZlcndyaXRlKHZpZXdQcm9jZXNzb3IsIG9sZFZpZXdDYWNoZSwgY2hhbmdlUGF0aCwgY2hhbmdlZFNuYXAsIHdyaXRlc0NhY2hlLCBjb21wbGV0ZUNhY2hlLCBhY2N1bXVsYXRvcikge1xuICAgIGNvbnN0IG9sZEV2ZW50U25hcCA9IG9sZFZpZXdDYWNoZS5ldmVudENhY2hlO1xuICAgIGxldCBuZXdWaWV3Q2FjaGUsIG5ld0V2ZW50Q2FjaGU7XG4gICAgY29uc3Qgc291cmNlID0gbmV3IFdyaXRlVHJlZUNvbXBsZXRlQ2hpbGRTb3VyY2Uod3JpdGVzQ2FjaGUsIG9sZFZpZXdDYWNoZSwgY29tcGxldGVDYWNoZSk7XG4gICAgaWYgKHBhdGhJc0VtcHR5KGNoYW5nZVBhdGgpKSB7XG4gICAgICAgIG5ld0V2ZW50Q2FjaGUgPSB2aWV3UHJvY2Vzc29yLmZpbHRlci51cGRhdGVGdWxsTm9kZShvbGRWaWV3Q2FjaGUuZXZlbnRDYWNoZS5nZXROb2RlKCksIGNoYW5nZWRTbmFwLCBhY2N1bXVsYXRvcik7XG4gICAgICAgIG5ld1ZpZXdDYWNoZSA9IHZpZXdDYWNoZVVwZGF0ZUV2ZW50U25hcChvbGRWaWV3Q2FjaGUsIG5ld0V2ZW50Q2FjaGUsIHRydWUsIHZpZXdQcm9jZXNzb3IuZmlsdGVyLmZpbHRlcnNOb2RlcygpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IGNoaWxkS2V5ID0gcGF0aEdldEZyb250KGNoYW5nZVBhdGgpO1xuICAgICAgICBpZiAoY2hpbGRLZXkgPT09ICcucHJpb3JpdHknKSB7XG4gICAgICAgICAgICBuZXdFdmVudENhY2hlID0gdmlld1Byb2Nlc3Nvci5maWx0ZXIudXBkYXRlUHJpb3JpdHkob2xkVmlld0NhY2hlLmV2ZW50Q2FjaGUuZ2V0Tm9kZSgpLCBjaGFuZ2VkU25hcCk7XG4gICAgICAgICAgICBuZXdWaWV3Q2FjaGUgPSB2aWV3Q2FjaGVVcGRhdGVFdmVudFNuYXAob2xkVmlld0NhY2hlLCBuZXdFdmVudENhY2hlLCBvbGRFdmVudFNuYXAuaXNGdWxseUluaXRpYWxpemVkKCksIG9sZEV2ZW50U25hcC5pc0ZpbHRlcmVkKCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgY2hpbGRDaGFuZ2VQYXRoID0gcGF0aFBvcEZyb250KGNoYW5nZVBhdGgpO1xuICAgICAgICAgICAgY29uc3Qgb2xkQ2hpbGQgPSBvbGRFdmVudFNuYXAuZ2V0Tm9kZSgpLmdldEltbWVkaWF0ZUNoaWxkKGNoaWxkS2V5KTtcbiAgICAgICAgICAgIGxldCBuZXdDaGlsZDtcbiAgICAgICAgICAgIGlmIChwYXRoSXNFbXB0eShjaGlsZENoYW5nZVBhdGgpKSB7XG4gICAgICAgICAgICAgICAgLy8gQ2hpbGQgb3ZlcndyaXRlLCB3ZSBjYW4gcmVwbGFjZSB0aGUgY2hpbGRcbiAgICAgICAgICAgICAgICBuZXdDaGlsZCA9IGNoYW5nZWRTbmFwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hpbGROb2RlID0gc291cmNlLmdldENvbXBsZXRlQ2hpbGQoY2hpbGRLZXkpO1xuICAgICAgICAgICAgICAgIGlmIChjaGlsZE5vZGUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocGF0aEdldEJhY2soY2hpbGRDaGFuZ2VQYXRoKSA9PT0gJy5wcmlvcml0eScgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkTm9kZS5nZXRDaGlsZChwYXRoUGFyZW50KGNoaWxkQ2hhbmdlUGF0aCkpLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBhIHByaW9yaXR5IHVwZGF0ZSBvbiBhbiBlbXB0eSBub2RlLiBJZiB0aGlzIG5vZGUgZXhpc3RzIG9uIHRoZSBzZXJ2ZXIsIHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VydmVyIHdpbGwgc2VuZCBkb3duIHRoZSBwcmlvcml0eSBpbiB0aGUgdXBkYXRlLCBzbyBpZ25vcmUgZm9yIG5vd1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q2hpbGQgPSBjaGlsZE5vZGU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdDaGlsZCA9IGNoaWxkTm9kZS51cGRhdGVDaGlsZChjaGlsZENoYW5nZVBhdGgsIGNoYW5nZWRTbmFwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlcmUgaXMgbm8gY29tcGxldGUgY2hpbGQgbm9kZSBhdmFpbGFibGVcbiAgICAgICAgICAgICAgICAgICAgbmV3Q2hpbGQgPSBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIW9sZENoaWxkLmVxdWFscyhuZXdDaGlsZCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdFdmVudFNuYXAgPSB2aWV3UHJvY2Vzc29yLmZpbHRlci51cGRhdGVDaGlsZChvbGRFdmVudFNuYXAuZ2V0Tm9kZSgpLCBjaGlsZEtleSwgbmV3Q2hpbGQsIGNoaWxkQ2hhbmdlUGF0aCwgc291cmNlLCBhY2N1bXVsYXRvcik7XG4gICAgICAgICAgICAgICAgbmV3Vmlld0NhY2hlID0gdmlld0NhY2hlVXBkYXRlRXZlbnRTbmFwKG9sZFZpZXdDYWNoZSwgbmV3RXZlbnRTbmFwLCBvbGRFdmVudFNuYXAuaXNGdWxseUluaXRpYWxpemVkKCksIHZpZXdQcm9jZXNzb3IuZmlsdGVyLmZpbHRlcnNOb2RlcygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ld1ZpZXdDYWNoZSA9IG9sZFZpZXdDYWNoZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3Vmlld0NhY2hlO1xufVxuZnVuY3Rpb24gdmlld1Byb2Nlc3NvckNhY2hlSGFzQ2hpbGQodmlld0NhY2hlLCBjaGlsZEtleSkge1xuICAgIHJldHVybiB2aWV3Q2FjaGUuZXZlbnRDYWNoZS5pc0NvbXBsZXRlRm9yQ2hpbGQoY2hpbGRLZXkpO1xufVxuZnVuY3Rpb24gdmlld1Byb2Nlc3NvckFwcGx5VXNlck1lcmdlKHZpZXdQcm9jZXNzb3IsIHZpZXdDYWNoZSwgcGF0aCwgY2hhbmdlZENoaWxkcmVuLCB3cml0ZXNDYWNoZSwgc2VydmVyQ2FjaGUsIGFjY3VtdWxhdG9yKSB7XG4gICAgLy8gSEFDSzogSW4gdGhlIGNhc2Ugb2YgYSBsaW1pdCBxdWVyeSwgdGhlcmUgbWF5IGJlIHNvbWUgY2hhbmdlcyB0aGF0IGJ1bXAgdGhpbmdzIG91dCBvZiB0aGVcbiAgICAvLyB3aW5kb3cgbGVhdmluZyByb29tIGZvciBuZXcgaXRlbXMuICBJdCdzIGltcG9ydGFudCB3ZSBwcm9jZXNzIHRoZXNlIGNoYW5nZXMgZmlyc3QsIHNvIHdlXG4gICAgLy8gaXRlcmF0ZSB0aGUgY2hhbmdlcyB0d2ljZSwgZmlyc3QgcHJvY2Vzc2luZyBhbnkgdGhhdCBhZmZlY3QgaXRlbXMgY3VycmVudGx5IGluIHZpZXcuXG4gICAgLy8gVE9ETzogSSBjb25zaWRlciBhbiBpdGVtIFwiaW4gdmlld1wiIGlmIGNhY2hlSGFzQ2hpbGQgaXMgdHJ1ZSwgd2hpY2ggY2hlY2tzIGJvdGggdGhlIHNlcnZlclxuICAgIC8vIGFuZCBldmVudCBzbmFwLiAgSSdtIG5vdCBzdXJlIGlmIHRoaXMgd2lsbCByZXN1bHQgaW4gZWRnZSBjYXNlcyB3aGVuIGEgY2hpbGQgaXMgaW4gb25lIGJ1dFxuICAgIC8vIG5vdCB0aGUgb3RoZXIuXG4gICAgbGV0IGN1clZpZXdDYWNoZSA9IHZpZXdDYWNoZTtcbiAgICBjaGFuZ2VkQ2hpbGRyZW4uZm9yZWFjaCgocmVsYXRpdmVQYXRoLCBjaGlsZE5vZGUpID0+IHtcbiAgICAgICAgY29uc3Qgd3JpdGVQYXRoID0gcGF0aENoaWxkKHBhdGgsIHJlbGF0aXZlUGF0aCk7XG4gICAgICAgIGlmICh2aWV3UHJvY2Vzc29yQ2FjaGVIYXNDaGlsZCh2aWV3Q2FjaGUsIHBhdGhHZXRGcm9udCh3cml0ZVBhdGgpKSkge1xuICAgICAgICAgICAgY3VyVmlld0NhY2hlID0gdmlld1Byb2Nlc3NvckFwcGx5VXNlck92ZXJ3cml0ZSh2aWV3UHJvY2Vzc29yLCBjdXJWaWV3Q2FjaGUsIHdyaXRlUGF0aCwgY2hpbGROb2RlLCB3cml0ZXNDYWNoZSwgc2VydmVyQ2FjaGUsIGFjY3VtdWxhdG9yKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGNoYW5nZWRDaGlsZHJlbi5mb3JlYWNoKChyZWxhdGl2ZVBhdGgsIGNoaWxkTm9kZSkgPT4ge1xuICAgICAgICBjb25zdCB3cml0ZVBhdGggPSBwYXRoQ2hpbGQocGF0aCwgcmVsYXRpdmVQYXRoKTtcbiAgICAgICAgaWYgKCF2aWV3UHJvY2Vzc29yQ2FjaGVIYXNDaGlsZCh2aWV3Q2FjaGUsIHBhdGhHZXRGcm9udCh3cml0ZVBhdGgpKSkge1xuICAgICAgICAgICAgY3VyVmlld0NhY2hlID0gdmlld1Byb2Nlc3NvckFwcGx5VXNlck92ZXJ3cml0ZSh2aWV3UHJvY2Vzc29yLCBjdXJWaWV3Q2FjaGUsIHdyaXRlUGF0aCwgY2hpbGROb2RlLCB3cml0ZXNDYWNoZSwgc2VydmVyQ2FjaGUsIGFjY3VtdWxhdG9yKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBjdXJWaWV3Q2FjaGU7XG59XG5mdW5jdGlvbiB2aWV3UHJvY2Vzc29yQXBwbHlNZXJnZSh2aWV3UHJvY2Vzc29yLCBub2RlLCBtZXJnZSkge1xuICAgIG1lcmdlLmZvcmVhY2goKHJlbGF0aXZlUGF0aCwgY2hpbGROb2RlKSA9PiB7XG4gICAgICAgIG5vZGUgPSBub2RlLnVwZGF0ZUNoaWxkKHJlbGF0aXZlUGF0aCwgY2hpbGROb2RlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gbm9kZTtcbn1cbmZ1bmN0aW9uIHZpZXdQcm9jZXNzb3JBcHBseVNlcnZlck1lcmdlKHZpZXdQcm9jZXNzb3IsIHZpZXdDYWNoZSwgcGF0aCwgY2hhbmdlZENoaWxkcmVuLCB3cml0ZXNDYWNoZSwgc2VydmVyQ2FjaGUsIGZpbHRlclNlcnZlck5vZGUsIGFjY3VtdWxhdG9yKSB7XG4gICAgLy8gSWYgd2UgZG9uJ3QgaGF2ZSBhIGNhY2hlIHlldCwgdGhpcyBtZXJnZSB3YXMgaW50ZW5kZWQgZm9yIGEgcHJldmlvdXNseSBsaXN0ZW4gaW4gdGhlIHNhbWUgbG9jYXRpb24uIElnbm9yZSBpdCBhbmRcbiAgICAvLyB3YWl0IGZvciB0aGUgY29tcGxldGUgZGF0YSB1cGRhdGUgY29taW5nIHNvb24uXG4gICAgaWYgKHZpZXdDYWNoZS5zZXJ2ZXJDYWNoZS5nZXROb2RlKCkuaXNFbXB0eSgpICYmXG4gICAgICAgICF2aWV3Q2FjaGUuc2VydmVyQ2FjaGUuaXNGdWxseUluaXRpYWxpemVkKCkpIHtcbiAgICAgICAgcmV0dXJuIHZpZXdDYWNoZTtcbiAgICB9XG4gICAgLy8gSEFDSzogSW4gdGhlIGNhc2Ugb2YgYSBsaW1pdCBxdWVyeSwgdGhlcmUgbWF5IGJlIHNvbWUgY2hhbmdlcyB0aGF0IGJ1bXAgdGhpbmdzIG91dCBvZiB0aGVcbiAgICAvLyB3aW5kb3cgbGVhdmluZyByb29tIGZvciBuZXcgaXRlbXMuICBJdCdzIGltcG9ydGFudCB3ZSBwcm9jZXNzIHRoZXNlIGNoYW5nZXMgZmlyc3QsIHNvIHdlXG4gICAgLy8gaXRlcmF0ZSB0aGUgY2hhbmdlcyB0d2ljZSwgZmlyc3QgcHJvY2Vzc2luZyBhbnkgdGhhdCBhZmZlY3QgaXRlbXMgY3VycmVudGx5IGluIHZpZXcuXG4gICAgLy8gVE9ETzogSSBjb25zaWRlciBhbiBpdGVtIFwiaW4gdmlld1wiIGlmIGNhY2hlSGFzQ2hpbGQgaXMgdHJ1ZSwgd2hpY2ggY2hlY2tzIGJvdGggdGhlIHNlcnZlclxuICAgIC8vIGFuZCBldmVudCBzbmFwLiAgSSdtIG5vdCBzdXJlIGlmIHRoaXMgd2lsbCByZXN1bHQgaW4gZWRnZSBjYXNlcyB3aGVuIGEgY2hpbGQgaXMgaW4gb25lIGJ1dFxuICAgIC8vIG5vdCB0aGUgb3RoZXIuXG4gICAgbGV0IGN1clZpZXdDYWNoZSA9IHZpZXdDYWNoZTtcbiAgICBsZXQgdmlld01lcmdlVHJlZTtcbiAgICBpZiAocGF0aElzRW1wdHkocGF0aCkpIHtcbiAgICAgICAgdmlld01lcmdlVHJlZSA9IGNoYW5nZWRDaGlsZHJlbjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZpZXdNZXJnZVRyZWUgPSBuZXcgSW1tdXRhYmxlVHJlZShudWxsKS5zZXRUcmVlKHBhdGgsIGNoYW5nZWRDaGlsZHJlbik7XG4gICAgfVxuICAgIGNvbnN0IHNlcnZlck5vZGUgPSB2aWV3Q2FjaGUuc2VydmVyQ2FjaGUuZ2V0Tm9kZSgpO1xuICAgIHZpZXdNZXJnZVRyZWUuY2hpbGRyZW4uaW5vcmRlclRyYXZlcnNhbCgoY2hpbGRLZXksIGNoaWxkVHJlZSkgPT4ge1xuICAgICAgICBpZiAoc2VydmVyTm9kZS5oYXNDaGlsZChjaGlsZEtleSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlcnZlckNoaWxkID0gdmlld0NhY2hlLnNlcnZlckNhY2hlXG4gICAgICAgICAgICAgICAgLmdldE5vZGUoKVxuICAgICAgICAgICAgICAgIC5nZXRJbW1lZGlhdGVDaGlsZChjaGlsZEtleSk7XG4gICAgICAgICAgICBjb25zdCBuZXdDaGlsZCA9IHZpZXdQcm9jZXNzb3JBcHBseU1lcmdlKHZpZXdQcm9jZXNzb3IsIHNlcnZlckNoaWxkLCBjaGlsZFRyZWUpO1xuICAgICAgICAgICAgY3VyVmlld0NhY2hlID0gdmlld1Byb2Nlc3NvckFwcGx5U2VydmVyT3ZlcndyaXRlKHZpZXdQcm9jZXNzb3IsIGN1clZpZXdDYWNoZSwgbmV3IFBhdGgoY2hpbGRLZXkpLCBuZXdDaGlsZCwgd3JpdGVzQ2FjaGUsIHNlcnZlckNhY2hlLCBmaWx0ZXJTZXJ2ZXJOb2RlLCBhY2N1bXVsYXRvcik7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICB2aWV3TWVyZ2VUcmVlLmNoaWxkcmVuLmlub3JkZXJUcmF2ZXJzYWwoKGNoaWxkS2V5LCBjaGlsZE1lcmdlVHJlZSkgPT4ge1xuICAgICAgICBjb25zdCBpc1Vua25vd25EZWVwTWVyZ2UgPSAhdmlld0NhY2hlLnNlcnZlckNhY2hlLmlzQ29tcGxldGVGb3JDaGlsZChjaGlsZEtleSkgJiZcbiAgICAgICAgICAgIGNoaWxkTWVyZ2VUcmVlLnZhbHVlID09PSBudWxsO1xuICAgICAgICBpZiAoIXNlcnZlck5vZGUuaGFzQ2hpbGQoY2hpbGRLZXkpICYmICFpc1Vua25vd25EZWVwTWVyZ2UpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlcnZlckNoaWxkID0gdmlld0NhY2hlLnNlcnZlckNhY2hlXG4gICAgICAgICAgICAgICAgLmdldE5vZGUoKVxuICAgICAgICAgICAgICAgIC5nZXRJbW1lZGlhdGVDaGlsZChjaGlsZEtleSk7XG4gICAgICAgICAgICBjb25zdCBuZXdDaGlsZCA9IHZpZXdQcm9jZXNzb3JBcHBseU1lcmdlKHZpZXdQcm9jZXNzb3IsIHNlcnZlckNoaWxkLCBjaGlsZE1lcmdlVHJlZSk7XG4gICAgICAgICAgICBjdXJWaWV3Q2FjaGUgPSB2aWV3UHJvY2Vzc29yQXBwbHlTZXJ2ZXJPdmVyd3JpdGUodmlld1Byb2Nlc3NvciwgY3VyVmlld0NhY2hlLCBuZXcgUGF0aChjaGlsZEtleSksIG5ld0NoaWxkLCB3cml0ZXNDYWNoZSwgc2VydmVyQ2FjaGUsIGZpbHRlclNlcnZlck5vZGUsIGFjY3VtdWxhdG9yKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBjdXJWaWV3Q2FjaGU7XG59XG5mdW5jdGlvbiB2aWV3UHJvY2Vzc29yQWNrVXNlcldyaXRlKHZpZXdQcm9jZXNzb3IsIHZpZXdDYWNoZSwgYWNrUGF0aCwgYWZmZWN0ZWRUcmVlLCB3cml0ZXNDYWNoZSwgY29tcGxldGVDYWNoZSwgYWNjdW11bGF0b3IpIHtcbiAgICBpZiAod3JpdGVUcmVlUmVmU2hhZG93aW5nV3JpdGUod3JpdGVzQ2FjaGUsIGFja1BhdGgpICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHZpZXdDYWNoZTtcbiAgICB9XG4gICAgLy8gT25seSBmaWx0ZXIgc2VydmVyIG5vZGUgaWYgaXQgaXMgY3VycmVudGx5IGZpbHRlcmVkXG4gICAgY29uc3QgZmlsdGVyU2VydmVyTm9kZSA9IHZpZXdDYWNoZS5zZXJ2ZXJDYWNoZS5pc0ZpbHRlcmVkKCk7XG4gICAgLy8gRXNzZW50aWFsbHkgd2UnbGwganVzdCBnZXQgb3VyIGV4aXN0aW5nIHNlcnZlciBjYWNoZSBmb3IgdGhlIGFmZmVjdGVkIHBhdGhzIGFuZCByZS1hcHBseSBpdCBhcyBhIHNlcnZlciB1cGRhdGVcbiAgICAvLyBub3cgdGhhdCBpdCB3b24ndCBiZSBzaGFkb3dlZC5cbiAgICBjb25zdCBzZXJ2ZXJDYWNoZSA9IHZpZXdDYWNoZS5zZXJ2ZXJDYWNoZTtcbiAgICBpZiAoYWZmZWN0ZWRUcmVlLnZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgLy8gVGhpcyBpcyBhbiBvdmVyd3JpdGUuXG4gICAgICAgIGlmICgocGF0aElzRW1wdHkoYWNrUGF0aCkgJiYgc2VydmVyQ2FjaGUuaXNGdWxseUluaXRpYWxpemVkKCkpIHx8XG4gICAgICAgICAgICBzZXJ2ZXJDYWNoZS5pc0NvbXBsZXRlRm9yUGF0aChhY2tQYXRoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHZpZXdQcm9jZXNzb3JBcHBseVNlcnZlck92ZXJ3cml0ZSh2aWV3UHJvY2Vzc29yLCB2aWV3Q2FjaGUsIGFja1BhdGgsIHNlcnZlckNhY2hlLmdldE5vZGUoKS5nZXRDaGlsZChhY2tQYXRoKSwgd3JpdGVzQ2FjaGUsIGNvbXBsZXRlQ2FjaGUsIGZpbHRlclNlcnZlck5vZGUsIGFjY3VtdWxhdG9yKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwYXRoSXNFbXB0eShhY2tQYXRoKSkge1xuICAgICAgICAgICAgLy8gVGhpcyBpcyBhIGdvb2Z5IGVkZ2UgY2FzZSB3aGVyZSB3ZSBhcmUgYWNraW5nIGRhdGEgYXQgdGhpcyBsb2NhdGlvbiBidXQgZG9uJ3QgaGF2ZSBmdWxsIGRhdGEuICBXZVxuICAgICAgICAgICAgLy8gc2hvdWxkIGp1c3QgcmUtYXBwbHkgd2hhdGV2ZXIgd2UgaGF2ZSBpbiBvdXIgY2FjaGUgYXMgYSBtZXJnZS5cbiAgICAgICAgICAgIGxldCBjaGFuZ2VkQ2hpbGRyZW4gPSBuZXcgSW1tdXRhYmxlVHJlZShudWxsKTtcbiAgICAgICAgICAgIHNlcnZlckNhY2hlLmdldE5vZGUoKS5mb3JFYWNoQ2hpbGQoS0VZX0lOREVYLCAobmFtZSwgbm9kZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNoYW5nZWRDaGlsZHJlbiA9IGNoYW5nZWRDaGlsZHJlbi5zZXQobmV3IFBhdGgobmFtZSksIG5vZGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdmlld1Byb2Nlc3NvckFwcGx5U2VydmVyTWVyZ2Uodmlld1Byb2Nlc3Nvciwgdmlld0NhY2hlLCBhY2tQYXRoLCBjaGFuZ2VkQ2hpbGRyZW4sIHdyaXRlc0NhY2hlLCBjb21wbGV0ZUNhY2hlLCBmaWx0ZXJTZXJ2ZXJOb2RlLCBhY2N1bXVsYXRvcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdmlld0NhY2hlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBUaGlzIGlzIGEgbWVyZ2UuXG4gICAgICAgIGxldCBjaGFuZ2VkQ2hpbGRyZW4gPSBuZXcgSW1tdXRhYmxlVHJlZShudWxsKTtcbiAgICAgICAgYWZmZWN0ZWRUcmVlLmZvcmVhY2goKG1lcmdlUGF0aCwgdmFsdWUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNlcnZlckNhY2hlUGF0aCA9IHBhdGhDaGlsZChhY2tQYXRoLCBtZXJnZVBhdGgpO1xuICAgICAgICAgICAgaWYgKHNlcnZlckNhY2hlLmlzQ29tcGxldGVGb3JQYXRoKHNlcnZlckNhY2hlUGF0aCkpIHtcbiAgICAgICAgICAgICAgICBjaGFuZ2VkQ2hpbGRyZW4gPSBjaGFuZ2VkQ2hpbGRyZW4uc2V0KG1lcmdlUGF0aCwgc2VydmVyQ2FjaGUuZ2V0Tm9kZSgpLmdldENoaWxkKHNlcnZlckNhY2hlUGF0aCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHZpZXdQcm9jZXNzb3JBcHBseVNlcnZlck1lcmdlKHZpZXdQcm9jZXNzb3IsIHZpZXdDYWNoZSwgYWNrUGF0aCwgY2hhbmdlZENoaWxkcmVuLCB3cml0ZXNDYWNoZSwgY29tcGxldGVDYWNoZSwgZmlsdGVyU2VydmVyTm9kZSwgYWNjdW11bGF0b3IpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHZpZXdQcm9jZXNzb3JMaXN0ZW5Db21wbGV0ZSh2aWV3UHJvY2Vzc29yLCB2aWV3Q2FjaGUsIHBhdGgsIHdyaXRlc0NhY2hlLCBhY2N1bXVsYXRvcikge1xuICAgIGNvbnN0IG9sZFNlcnZlck5vZGUgPSB2aWV3Q2FjaGUuc2VydmVyQ2FjaGU7XG4gICAgY29uc3QgbmV3Vmlld0NhY2hlID0gdmlld0NhY2hlVXBkYXRlU2VydmVyU25hcCh2aWV3Q2FjaGUsIG9sZFNlcnZlck5vZGUuZ2V0Tm9kZSgpLCBvbGRTZXJ2ZXJOb2RlLmlzRnVsbHlJbml0aWFsaXplZCgpIHx8IHBhdGhJc0VtcHR5KHBhdGgpLCBvbGRTZXJ2ZXJOb2RlLmlzRmlsdGVyZWQoKSk7XG4gICAgcmV0dXJuIHZpZXdQcm9jZXNzb3JHZW5lcmF0ZUV2ZW50Q2FjaGVBZnRlclNlcnZlckV2ZW50KHZpZXdQcm9jZXNzb3IsIG5ld1ZpZXdDYWNoZSwgcGF0aCwgd3JpdGVzQ2FjaGUsIE5PX0NPTVBMRVRFX0NISUxEX1NPVVJDRSwgYWNjdW11bGF0b3IpO1xufVxuZnVuY3Rpb24gdmlld1Byb2Nlc3NvclJldmVydFVzZXJXcml0ZSh2aWV3UHJvY2Vzc29yLCB2aWV3Q2FjaGUsIHBhdGgsIHdyaXRlc0NhY2hlLCBjb21wbGV0ZVNlcnZlckNhY2hlLCBhY2N1bXVsYXRvcikge1xuICAgIGxldCBjb21wbGV0ZTtcbiAgICBpZiAod3JpdGVUcmVlUmVmU2hhZG93aW5nV3JpdGUod3JpdGVzQ2FjaGUsIHBhdGgpICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHZpZXdDYWNoZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IHNvdXJjZSA9IG5ldyBXcml0ZVRyZWVDb21wbGV0ZUNoaWxkU291cmNlKHdyaXRlc0NhY2hlLCB2aWV3Q2FjaGUsIGNvbXBsZXRlU2VydmVyQ2FjaGUpO1xuICAgICAgICBjb25zdCBvbGRFdmVudENhY2hlID0gdmlld0NhY2hlLmV2ZW50Q2FjaGUuZ2V0Tm9kZSgpO1xuICAgICAgICBsZXQgbmV3RXZlbnRDYWNoZTtcbiAgICAgICAgaWYgKHBhdGhJc0VtcHR5KHBhdGgpIHx8IHBhdGhHZXRGcm9udChwYXRoKSA9PT0gJy5wcmlvcml0eScpIHtcbiAgICAgICAgICAgIGxldCBuZXdOb2RlO1xuICAgICAgICAgICAgaWYgKHZpZXdDYWNoZS5zZXJ2ZXJDYWNoZS5pc0Z1bGx5SW5pdGlhbGl6ZWQoKSkge1xuICAgICAgICAgICAgICAgIG5ld05vZGUgPSB3cml0ZVRyZWVSZWZDYWxjQ29tcGxldGVFdmVudENhY2hlKHdyaXRlc0NhY2hlLCB2aWV3Q2FjaGVHZXRDb21wbGV0ZVNlcnZlclNuYXAodmlld0NhY2hlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJ2ZXJDaGlsZHJlbiA9IHZpZXdDYWNoZS5zZXJ2ZXJDYWNoZS5nZXROb2RlKCk7XG4gICAgICAgICAgICAgICAgYXNzZXJ0KHNlcnZlckNoaWxkcmVuIGluc3RhbmNlb2YgQ2hpbGRyZW5Ob2RlLCAnc2VydmVyQ2hpbGRyZW4gd291bGQgYmUgY29tcGxldGUgaWYgbGVhZiBub2RlJyk7XG4gICAgICAgICAgICAgICAgbmV3Tm9kZSA9IHdyaXRlVHJlZVJlZkNhbGNDb21wbGV0ZUV2ZW50Q2hpbGRyZW4od3JpdGVzQ2FjaGUsIHNlcnZlckNoaWxkcmVuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5ld05vZGUgPSBuZXdOb2RlO1xuICAgICAgICAgICAgbmV3RXZlbnRDYWNoZSA9IHZpZXdQcm9jZXNzb3IuZmlsdGVyLnVwZGF0ZUZ1bGxOb2RlKG9sZEV2ZW50Q2FjaGUsIG5ld05vZGUsIGFjY3VtdWxhdG9yKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkS2V5ID0gcGF0aEdldEZyb250KHBhdGgpO1xuICAgICAgICAgICAgbGV0IG5ld0NoaWxkID0gd3JpdGVUcmVlUmVmQ2FsY0NvbXBsZXRlQ2hpbGQod3JpdGVzQ2FjaGUsIGNoaWxkS2V5LCB2aWV3Q2FjaGUuc2VydmVyQ2FjaGUpO1xuICAgICAgICAgICAgaWYgKG5ld0NoaWxkID09IG51bGwgJiZcbiAgICAgICAgICAgICAgICB2aWV3Q2FjaGUuc2VydmVyQ2FjaGUuaXNDb21wbGV0ZUZvckNoaWxkKGNoaWxkS2V5KSkge1xuICAgICAgICAgICAgICAgIG5ld0NoaWxkID0gb2xkRXZlbnRDYWNoZS5nZXRJbW1lZGlhdGVDaGlsZChjaGlsZEtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobmV3Q2hpbGQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIG5ld0V2ZW50Q2FjaGUgPSB2aWV3UHJvY2Vzc29yLmZpbHRlci51cGRhdGVDaGlsZChvbGRFdmVudENhY2hlLCBjaGlsZEtleSwgbmV3Q2hpbGQsIHBhdGhQb3BGcm9udChwYXRoKSwgc291cmNlLCBhY2N1bXVsYXRvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh2aWV3Q2FjaGUuZXZlbnRDYWNoZS5nZXROb2RlKCkuaGFzQ2hpbGQoY2hpbGRLZXkpKSB7XG4gICAgICAgICAgICAgICAgLy8gTm8gY29tcGxldGUgY2hpbGQgYXZhaWxhYmxlLCBkZWxldGUgdGhlIGV4aXN0aW5nIG9uZSwgaWYgYW55XG4gICAgICAgICAgICAgICAgbmV3RXZlbnRDYWNoZSA9IHZpZXdQcm9jZXNzb3IuZmlsdGVyLnVwZGF0ZUNoaWxkKG9sZEV2ZW50Q2FjaGUsIGNoaWxkS2V5LCBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERSwgcGF0aFBvcEZyb250KHBhdGgpLCBzb3VyY2UsIGFjY3VtdWxhdG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ld0V2ZW50Q2FjaGUgPSBvbGRFdmVudENhY2hlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5ld0V2ZW50Q2FjaGUuaXNFbXB0eSgpICYmXG4gICAgICAgICAgICAgICAgdmlld0NhY2hlLnNlcnZlckNhY2hlLmlzRnVsbHlJbml0aWFsaXplZCgpKSB7XG4gICAgICAgICAgICAgICAgLy8gV2UgbWlnaHQgaGF2ZSByZXZlcnRlZCBhbGwgY2hpbGQgd3JpdGVzLiBNYXliZSB0aGUgb2xkIGV2ZW50IHdhcyBhIGxlYWYgbm9kZVxuICAgICAgICAgICAgICAgIGNvbXBsZXRlID0gd3JpdGVUcmVlUmVmQ2FsY0NvbXBsZXRlRXZlbnRDYWNoZSh3cml0ZXNDYWNoZSwgdmlld0NhY2hlR2V0Q29tcGxldGVTZXJ2ZXJTbmFwKHZpZXdDYWNoZSkpO1xuICAgICAgICAgICAgICAgIGlmIChjb21wbGV0ZS5pc0xlYWZOb2RlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3RXZlbnRDYWNoZSA9IHZpZXdQcm9jZXNzb3IuZmlsdGVyLnVwZGF0ZUZ1bGxOb2RlKG5ld0V2ZW50Q2FjaGUsIGNvbXBsZXRlLCBhY2N1bXVsYXRvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbXBsZXRlID1cbiAgICAgICAgICAgIHZpZXdDYWNoZS5zZXJ2ZXJDYWNoZS5pc0Z1bGx5SW5pdGlhbGl6ZWQoKSB8fFxuICAgICAgICAgICAgICAgIHdyaXRlVHJlZVJlZlNoYWRvd2luZ1dyaXRlKHdyaXRlc0NhY2hlLCBuZXdFbXB0eVBhdGgoKSkgIT0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHZpZXdDYWNoZVVwZGF0ZUV2ZW50U25hcCh2aWV3Q2FjaGUsIG5ld0V2ZW50Q2FjaGUsIGNvbXBsZXRlLCB2aWV3UHJvY2Vzc29yLmZpbHRlci5maWx0ZXJzTm9kZXMoKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHZpZXcgcmVwcmVzZW50cyBhIHNwZWNpZmljIGxvY2F0aW9uIGFuZCBxdWVyeSB0aGF0IGhhcyAxIG9yIG1vcmUgZXZlbnQgcmVnaXN0cmF0aW9ucy5cbiAqXG4gKiBJdCBkb2VzIHNldmVyYWwgdGhpbmdzOlxuICogIC0gTWFpbnRhaW5zIHRoZSBsaXN0IG9mIGV2ZW50IHJlZ2lzdHJhdGlvbnMgZm9yIHRoaXMgbG9jYXRpb24vcXVlcnkuXG4gKiAgLSBNYWludGFpbnMgYSBjYWNoZSBvZiB0aGUgZGF0YSB2aXNpYmxlIGZvciB0aGlzIGxvY2F0aW9uL3F1ZXJ5LlxuICogIC0gQXBwbGllcyBuZXcgb3BlcmF0aW9ucyAodmlhIGFwcGx5T3BlcmF0aW9uKSwgdXBkYXRlcyB0aGUgY2FjaGUsIGFuZCBiYXNlZCBvbiB0aGUgZXZlbnRcbiAqICAgIHJlZ2lzdHJhdGlvbnMgcmV0dXJucyB0aGUgc2V0IG9mIGV2ZW50cyB0byBiZSByYWlzZWQuXG4gKi9cbmNsYXNzIFZpZXcge1xuICAgIGNvbnN0cnVjdG9yKHF1ZXJ5XywgaW5pdGlhbFZpZXdDYWNoZSkge1xuICAgICAgICB0aGlzLnF1ZXJ5XyA9IHF1ZXJ5XztcbiAgICAgICAgdGhpcy5ldmVudFJlZ2lzdHJhdGlvbnNfID0gW107XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHRoaXMucXVlcnlfLl9xdWVyeVBhcmFtcztcbiAgICAgICAgY29uc3QgaW5kZXhGaWx0ZXIgPSBuZXcgSW5kZXhlZEZpbHRlcihwYXJhbXMuZ2V0SW5kZXgoKSk7XG4gICAgICAgIGNvbnN0IGZpbHRlciA9IHF1ZXJ5UGFyYW1zR2V0Tm9kZUZpbHRlcihwYXJhbXMpO1xuICAgICAgICB0aGlzLnByb2Nlc3Nvcl8gPSBuZXdWaWV3UHJvY2Vzc29yKGZpbHRlcik7XG4gICAgICAgIGNvbnN0IGluaXRpYWxTZXJ2ZXJDYWNoZSA9IGluaXRpYWxWaWV3Q2FjaGUuc2VydmVyQ2FjaGU7XG4gICAgICAgIGNvbnN0IGluaXRpYWxFdmVudENhY2hlID0gaW5pdGlhbFZpZXdDYWNoZS5ldmVudENhY2hlO1xuICAgICAgICAvLyBEb24ndCBmaWx0ZXIgc2VydmVyIG5vZGUgd2l0aCBvdGhlciBmaWx0ZXIgdGhhbiBpbmRleCwgd2FpdCBmb3IgdGFnZ2VkIGxpc3RlblxuICAgICAgICBjb25zdCBzZXJ2ZXJTbmFwID0gaW5kZXhGaWx0ZXIudXBkYXRlRnVsbE5vZGUoQ2hpbGRyZW5Ob2RlLkVNUFRZX05PREUsIGluaXRpYWxTZXJ2ZXJDYWNoZS5nZXROb2RlKCksIG51bGwpO1xuICAgICAgICBjb25zdCBldmVudFNuYXAgPSBmaWx0ZXIudXBkYXRlRnVsbE5vZGUoQ2hpbGRyZW5Ob2RlLkVNUFRZX05PREUsIGluaXRpYWxFdmVudENhY2hlLmdldE5vZGUoKSwgbnVsbCk7XG4gICAgICAgIGNvbnN0IG5ld1NlcnZlckNhY2hlID0gbmV3IENhY2hlTm9kZShzZXJ2ZXJTbmFwLCBpbml0aWFsU2VydmVyQ2FjaGUuaXNGdWxseUluaXRpYWxpemVkKCksIGluZGV4RmlsdGVyLmZpbHRlcnNOb2RlcygpKTtcbiAgICAgICAgY29uc3QgbmV3RXZlbnRDYWNoZSA9IG5ldyBDYWNoZU5vZGUoZXZlbnRTbmFwLCBpbml0aWFsRXZlbnRDYWNoZS5pc0Z1bGx5SW5pdGlhbGl6ZWQoKSwgZmlsdGVyLmZpbHRlcnNOb2RlcygpKTtcbiAgICAgICAgdGhpcy52aWV3Q2FjaGVfID0gbmV3Vmlld0NhY2hlKG5ld0V2ZW50Q2FjaGUsIG5ld1NlcnZlckNhY2hlKTtcbiAgICAgICAgdGhpcy5ldmVudEdlbmVyYXRvcl8gPSBuZXcgRXZlbnRHZW5lcmF0b3IodGhpcy5xdWVyeV8pO1xuICAgIH1cbiAgICBnZXQgcXVlcnkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5XztcbiAgICB9XG59XG5mdW5jdGlvbiB2aWV3R2V0U2VydmVyQ2FjaGUodmlldykge1xuICAgIHJldHVybiB2aWV3LnZpZXdDYWNoZV8uc2VydmVyQ2FjaGUuZ2V0Tm9kZSgpO1xufVxuZnVuY3Rpb24gdmlld0dldENvbXBsZXRlTm9kZSh2aWV3KSB7XG4gICAgcmV0dXJuIHZpZXdDYWNoZUdldENvbXBsZXRlRXZlbnRTbmFwKHZpZXcudmlld0NhY2hlXyk7XG59XG5mdW5jdGlvbiB2aWV3R2V0Q29tcGxldGVTZXJ2ZXJDYWNoZSh2aWV3LCBwYXRoKSB7XG4gICAgY29uc3QgY2FjaGUgPSB2aWV3Q2FjaGVHZXRDb21wbGV0ZVNlcnZlclNuYXAodmlldy52aWV3Q2FjaGVfKTtcbiAgICBpZiAoY2FjaGUpIHtcbiAgICAgICAgLy8gSWYgdGhpcyBpc24ndCBhIFwibG9hZHNBbGxEYXRhXCIgdmlldywgdGhlbiBjYWNoZSBpc24ndCBhY3R1YWxseSBhIGNvbXBsZXRlIGNhY2hlIGFuZFxuICAgICAgICAvLyB3ZSBuZWVkIHRvIHNlZSBpZiBpdCBjb250YWlucyB0aGUgY2hpbGQgd2UncmUgaW50ZXJlc3RlZCBpbi5cbiAgICAgICAgaWYgKHZpZXcucXVlcnkuX3F1ZXJ5UGFyYW1zLmxvYWRzQWxsRGF0YSgpIHx8XG4gICAgICAgICAgICAoIXBhdGhJc0VtcHR5KHBhdGgpICYmXG4gICAgICAgICAgICAgICAgIWNhY2hlLmdldEltbWVkaWF0ZUNoaWxkKHBhdGhHZXRGcm9udChwYXRoKSkuaXNFbXB0eSgpKSkge1xuICAgICAgICAgICAgcmV0dXJuIGNhY2hlLmdldENoaWxkKHBhdGgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gdmlld0lzRW1wdHkodmlldykge1xuICAgIHJldHVybiB2aWV3LmV2ZW50UmVnaXN0cmF0aW9uc18ubGVuZ3RoID09PSAwO1xufVxuZnVuY3Rpb24gdmlld0FkZEV2ZW50UmVnaXN0cmF0aW9uKHZpZXcsIGV2ZW50UmVnaXN0cmF0aW9uKSB7XG4gICAgdmlldy5ldmVudFJlZ2lzdHJhdGlvbnNfLnB1c2goZXZlbnRSZWdpc3RyYXRpb24pO1xufVxuLyoqXG4gKiBAcGFyYW0gZXZlbnRSZWdpc3RyYXRpb24gLSBJZiBudWxsLCByZW1vdmUgYWxsIGNhbGxiYWNrcy5cbiAqIEBwYXJhbSBjYW5jZWxFcnJvciAtIElmIGEgY2FuY2VsRXJyb3IgaXMgcHJvdmlkZWQsIGFwcHJvcHJpYXRlIGNhbmNlbCBldmVudHMgd2lsbCBiZSByZXR1cm5lZC5cbiAqIEByZXR1cm5zIENhbmNlbCBldmVudHMsIGlmIGNhbmNlbEVycm9yIHdhcyBwcm92aWRlZC5cbiAqL1xuZnVuY3Rpb24gdmlld1JlbW92ZUV2ZW50UmVnaXN0cmF0aW9uKHZpZXcsIGV2ZW50UmVnaXN0cmF0aW9uLCBjYW5jZWxFcnJvcikge1xuICAgIGNvbnN0IGNhbmNlbEV2ZW50cyA9IFtdO1xuICAgIGlmIChjYW5jZWxFcnJvcikge1xuICAgICAgICBhc3NlcnQoZXZlbnRSZWdpc3RyYXRpb24gPT0gbnVsbCwgJ0EgY2FuY2VsIHNob3VsZCBjYW5jZWwgYWxsIGV2ZW50IHJlZ2lzdHJhdGlvbnMuJyk7XG4gICAgICAgIGNvbnN0IHBhdGggPSB2aWV3LnF1ZXJ5Ll9wYXRoO1xuICAgICAgICB2aWV3LmV2ZW50UmVnaXN0cmF0aW9uc18uZm9yRWFjaChyZWdpc3RyYXRpb24gPT4ge1xuICAgICAgICAgICAgY29uc3QgbWF5YmVFdmVudCA9IHJlZ2lzdHJhdGlvbi5jcmVhdGVDYW5jZWxFdmVudChjYW5jZWxFcnJvciwgcGF0aCk7XG4gICAgICAgICAgICBpZiAobWF5YmVFdmVudCkge1xuICAgICAgICAgICAgICAgIGNhbmNlbEV2ZW50cy5wdXNoKG1heWJlRXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGV2ZW50UmVnaXN0cmF0aW9uKSB7XG4gICAgICAgIGxldCByZW1haW5pbmcgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2aWV3LmV2ZW50UmVnaXN0cmF0aW9uc18ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gdmlldy5ldmVudFJlZ2lzdHJhdGlvbnNfW2ldO1xuICAgICAgICAgICAgaWYgKCFleGlzdGluZy5tYXRjaGVzKGV2ZW50UmVnaXN0cmF0aW9uKSkge1xuICAgICAgICAgICAgICAgIHJlbWFpbmluZy5wdXNoKGV4aXN0aW5nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50UmVnaXN0cmF0aW9uLmhhc0FueUNhbGxiYWNrKCkpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSdyZSByZW1vdmluZyBqdXN0IHRoaXMgb25lXG4gICAgICAgICAgICAgICAgcmVtYWluaW5nID0gcmVtYWluaW5nLmNvbmNhdCh2aWV3LmV2ZW50UmVnaXN0cmF0aW9uc18uc2xpY2UoaSArIDEpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2aWV3LmV2ZW50UmVnaXN0cmF0aW9uc18gPSByZW1haW5pbmc7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2aWV3LmV2ZW50UmVnaXN0cmF0aW9uc18gPSBbXTtcbiAgICB9XG4gICAgcmV0dXJuIGNhbmNlbEV2ZW50cztcbn1cbi8qKlxuICogQXBwbGllcyB0aGUgZ2l2ZW4gT3BlcmF0aW9uLCB1cGRhdGVzIG91ciBjYWNoZSwgYW5kIHJldHVybnMgdGhlIGFwcHJvcHJpYXRlIGV2ZW50cy5cbiAqL1xuZnVuY3Rpb24gdmlld0FwcGx5T3BlcmF0aW9uKHZpZXcsIG9wZXJhdGlvbiwgd3JpdGVzQ2FjaGUsIGNvbXBsZXRlU2VydmVyQ2FjaGUpIHtcbiAgICBpZiAob3BlcmF0aW9uLnR5cGUgPT09IE9wZXJhdGlvblR5cGUuTUVSR0UgJiZcbiAgICAgICAgb3BlcmF0aW9uLnNvdXJjZS5xdWVyeUlkICE9PSBudWxsKSB7XG4gICAgICAgIGFzc2VydCh2aWV3Q2FjaGVHZXRDb21wbGV0ZVNlcnZlclNuYXAodmlldy52aWV3Q2FjaGVfKSwgJ1dlIHNob3VsZCBhbHdheXMgaGF2ZSBhIGZ1bGwgY2FjaGUgYmVmb3JlIGhhbmRsaW5nIG1lcmdlcycpO1xuICAgICAgICBhc3NlcnQodmlld0NhY2hlR2V0Q29tcGxldGVFdmVudFNuYXAodmlldy52aWV3Q2FjaGVfKSwgJ01pc3NpbmcgZXZlbnQgY2FjaGUsIGV2ZW4gdGhvdWdoIHdlIGhhdmUgYSBzZXJ2ZXIgY2FjaGUnKTtcbiAgICB9XG4gICAgY29uc3Qgb2xkVmlld0NhY2hlID0gdmlldy52aWV3Q2FjaGVfO1xuICAgIGNvbnN0IHJlc3VsdCA9IHZpZXdQcm9jZXNzb3JBcHBseU9wZXJhdGlvbih2aWV3LnByb2Nlc3Nvcl8sIG9sZFZpZXdDYWNoZSwgb3BlcmF0aW9uLCB3cml0ZXNDYWNoZSwgY29tcGxldGVTZXJ2ZXJDYWNoZSk7XG4gICAgdmlld1Byb2Nlc3NvckFzc2VydEluZGV4ZWQodmlldy5wcm9jZXNzb3JfLCByZXN1bHQudmlld0NhY2hlKTtcbiAgICBhc3NlcnQocmVzdWx0LnZpZXdDYWNoZS5zZXJ2ZXJDYWNoZS5pc0Z1bGx5SW5pdGlhbGl6ZWQoKSB8fFxuICAgICAgICAhb2xkVmlld0NhY2hlLnNlcnZlckNhY2hlLmlzRnVsbHlJbml0aWFsaXplZCgpLCAnT25jZSBhIHNlcnZlciBzbmFwIGlzIGNvbXBsZXRlLCBpdCBzaG91bGQgbmV2ZXIgZ28gYmFjaycpO1xuICAgIHZpZXcudmlld0NhY2hlXyA9IHJlc3VsdC52aWV3Q2FjaGU7XG4gICAgcmV0dXJuIHZpZXdHZW5lcmF0ZUV2ZW50c0ZvckNoYW5nZXNfKHZpZXcsIHJlc3VsdC5jaGFuZ2VzLCByZXN1bHQudmlld0NhY2hlLmV2ZW50Q2FjaGUuZ2V0Tm9kZSgpLCBudWxsKTtcbn1cbmZ1bmN0aW9uIHZpZXdHZXRJbml0aWFsRXZlbnRzKHZpZXcsIHJlZ2lzdHJhdGlvbikge1xuICAgIGNvbnN0IGV2ZW50U25hcCA9IHZpZXcudmlld0NhY2hlXy5ldmVudENhY2hlO1xuICAgIGNvbnN0IGluaXRpYWxDaGFuZ2VzID0gW107XG4gICAgaWYgKCFldmVudFNuYXAuZ2V0Tm9kZSgpLmlzTGVhZk5vZGUoKSkge1xuICAgICAgICBjb25zdCBldmVudE5vZGUgPSBldmVudFNuYXAuZ2V0Tm9kZSgpO1xuICAgICAgICBldmVudE5vZGUuZm9yRWFjaENoaWxkKFBSSU9SSVRZX0lOREVYLCAoa2V5LCBjaGlsZE5vZGUpID0+IHtcbiAgICAgICAgICAgIGluaXRpYWxDaGFuZ2VzLnB1c2goY2hhbmdlQ2hpbGRBZGRlZChrZXksIGNoaWxkTm9kZSkpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGV2ZW50U25hcC5pc0Z1bGx5SW5pdGlhbGl6ZWQoKSkge1xuICAgICAgICBpbml0aWFsQ2hhbmdlcy5wdXNoKGNoYW5nZVZhbHVlKGV2ZW50U25hcC5nZXROb2RlKCkpKTtcbiAgICB9XG4gICAgcmV0dXJuIHZpZXdHZW5lcmF0ZUV2ZW50c0ZvckNoYW5nZXNfKHZpZXcsIGluaXRpYWxDaGFuZ2VzLCBldmVudFNuYXAuZ2V0Tm9kZSgpLCByZWdpc3RyYXRpb24pO1xufVxuZnVuY3Rpb24gdmlld0dlbmVyYXRlRXZlbnRzRm9yQ2hhbmdlc18odmlldywgY2hhbmdlcywgZXZlbnRDYWNoZSwgZXZlbnRSZWdpc3RyYXRpb24pIHtcbiAgICBjb25zdCByZWdpc3RyYXRpb25zID0gZXZlbnRSZWdpc3RyYXRpb25cbiAgICAgICAgPyBbZXZlbnRSZWdpc3RyYXRpb25dXG4gICAgICAgIDogdmlldy5ldmVudFJlZ2lzdHJhdGlvbnNfO1xuICAgIHJldHVybiBldmVudEdlbmVyYXRvckdlbmVyYXRlRXZlbnRzRm9yQ2hhbmdlcyh2aWV3LmV2ZW50R2VuZXJhdG9yXywgY2hhbmdlcywgZXZlbnRDYWNoZSwgcmVnaXN0cmF0aW9ucyk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5sZXQgcmVmZXJlbmNlQ29uc3RydWN0b3IkMTtcbi8qKlxuICogU3luY1BvaW50IHJlcHJlc2VudHMgYSBzaW5nbGUgbG9jYXRpb24gaW4gYSBTeW5jVHJlZSB3aXRoIDEgb3IgbW9yZSBldmVudCByZWdpc3RyYXRpb25zLCBtZWFuaW5nIHdlIG5lZWQgdG9cbiAqIG1haW50YWluIDEgb3IgbW9yZSBWaWV3cyBhdCB0aGlzIGxvY2F0aW9uIHRvIGNhY2hlIHNlcnZlciBkYXRhIGFuZCByYWlzZSBhcHByb3ByaWF0ZSBldmVudHMgZm9yIHNlcnZlciBjaGFuZ2VzXG4gKiBhbmQgdXNlciB3cml0ZXMgKHNldCwgdHJhbnNhY3Rpb24sIHVwZGF0ZSkuXG4gKlxuICogSXQncyByZXNwb25zaWJsZSBmb3I6XG4gKiAgLSBNYWludGFpbmluZyB0aGUgc2V0IG9mIDEgb3IgbW9yZSB2aWV3cyBuZWNlc3NhcnkgYXQgdGhpcyBsb2NhdGlvbiAoYSBTeW5jUG9pbnQgd2l0aCAwIHZpZXdzIHNob3VsZCBiZSByZW1vdmVkKS5cbiAqICAtIFByb3h5aW5nIHVzZXIgLyBzZXJ2ZXIgb3BlcmF0aW9ucyB0byB0aGUgdmlld3MgYXMgYXBwcm9wcmlhdGUgKGkuZS4gYXBwbHlTZXJ2ZXJPdmVyd3JpdGUsXG4gKiAgICBhcHBseVVzZXJPdmVyd3JpdGUsIGV0Yy4pXG4gKi9cbmNsYXNzIFN5bmNQb2ludCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgVmlld3MgYmVpbmcgdHJhY2tlZCBhdCB0aGlzIGxvY2F0aW9uIGluIHRoZSB0cmVlLCBzdG9yZWQgYXMgYSBtYXAgd2hlcmUgdGhlIGtleSBpcyBhXG4gICAgICAgICAqIHF1ZXJ5SWQgYW5kIHRoZSB2YWx1ZSBpcyB0aGUgVmlldyBmb3IgdGhhdCBxdWVyeS5cbiAgICAgICAgICpcbiAgICAgICAgICogTk9URTogVGhpcyBsaXN0IHdpbGwgYmUgcXVpdGUgc21hbGwgKHVzdWFsbHkgMSwgYnV0IHBlcmhhcHMgMiBvciAzOyBhbnkgbW9yZSBpcyBhbiBvZGQgdXNlIGNhc2UpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy52aWV3cyA9IG5ldyBNYXAoKTtcbiAgICB9XG59XG5mdW5jdGlvbiBzeW5jUG9pbnRTZXRSZWZlcmVuY2VDb25zdHJ1Y3Rvcih2YWwpIHtcbiAgICBhc3NlcnQoIXJlZmVyZW5jZUNvbnN0cnVjdG9yJDEsICdfX3JlZmVyZW5jZUNvbnN0cnVjdG9yIGhhcyBhbHJlYWR5IGJlZW4gZGVmaW5lZCcpO1xuICAgIHJlZmVyZW5jZUNvbnN0cnVjdG9yJDEgPSB2YWw7XG59XG5mdW5jdGlvbiBzeW5jUG9pbnRHZXRSZWZlcmVuY2VDb25zdHJ1Y3RvcigpIHtcbiAgICBhc3NlcnQocmVmZXJlbmNlQ29uc3RydWN0b3IkMSwgJ1JlZmVyZW5jZS50cyBoYXMgbm90IGJlZW4gbG9hZGVkJyk7XG4gICAgcmV0dXJuIHJlZmVyZW5jZUNvbnN0cnVjdG9yJDE7XG59XG5mdW5jdGlvbiBzeW5jUG9pbnRJc0VtcHR5KHN5bmNQb2ludCkge1xuICAgIHJldHVybiBzeW5jUG9pbnQudmlld3Muc2l6ZSA9PT0gMDtcbn1cbmZ1bmN0aW9uIHN5bmNQb2ludEFwcGx5T3BlcmF0aW9uKHN5bmNQb2ludCwgb3BlcmF0aW9uLCB3cml0ZXNDYWNoZSwgb3B0Q29tcGxldGVTZXJ2ZXJDYWNoZSkge1xuICAgIGNvbnN0IHF1ZXJ5SWQgPSBvcGVyYXRpb24uc291cmNlLnF1ZXJ5SWQ7XG4gICAgaWYgKHF1ZXJ5SWQgIT09IG51bGwpIHtcbiAgICAgICAgY29uc3QgdmlldyA9IHN5bmNQb2ludC52aWV3cy5nZXQocXVlcnlJZCk7XG4gICAgICAgIGFzc2VydCh2aWV3ICE9IG51bGwsICdTeW5jVHJlZSBnYXZlIHVzIGFuIG9wIGZvciBhbiBpbnZhbGlkIHF1ZXJ5LicpO1xuICAgICAgICByZXR1cm4gdmlld0FwcGx5T3BlcmF0aW9uKHZpZXcsIG9wZXJhdGlvbiwgd3JpdGVzQ2FjaGUsIG9wdENvbXBsZXRlU2VydmVyQ2FjaGUpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbGV0IGV2ZW50cyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHZpZXcgb2Ygc3luY1BvaW50LnZpZXdzLnZhbHVlcygpKSB7XG4gICAgICAgICAgICBldmVudHMgPSBldmVudHMuY29uY2F0KHZpZXdBcHBseU9wZXJhdGlvbih2aWV3LCBvcGVyYXRpb24sIHdyaXRlc0NhY2hlLCBvcHRDb21wbGV0ZVNlcnZlckNhY2hlKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV2ZW50cztcbiAgICB9XG59XG4vKipcbiAqIEdldCBhIHZpZXcgZm9yIHRoZSBzcGVjaWZpZWQgcXVlcnkuXG4gKlxuICogQHBhcmFtIHF1ZXJ5IC0gVGhlIHF1ZXJ5IHRvIHJldHVybiBhIHZpZXcgZm9yXG4gKiBAcGFyYW0gd3JpdGVzQ2FjaGVcbiAqIEBwYXJhbSBzZXJ2ZXJDYWNoZVxuICogQHBhcmFtIHNlcnZlckNhY2hlQ29tcGxldGVcbiAqIEByZXR1cm5zIEV2ZW50cyB0byByYWlzZS5cbiAqL1xuZnVuY3Rpb24gc3luY1BvaW50R2V0VmlldyhzeW5jUG9pbnQsIHF1ZXJ5LCB3cml0ZXNDYWNoZSwgc2VydmVyQ2FjaGUsIHNlcnZlckNhY2hlQ29tcGxldGUpIHtcbiAgICBjb25zdCBxdWVyeUlkID0gcXVlcnkuX3F1ZXJ5SWRlbnRpZmllcjtcbiAgICBjb25zdCB2aWV3ID0gc3luY1BvaW50LnZpZXdzLmdldChxdWVyeUlkKTtcbiAgICBpZiAoIXZpZXcpIHtcbiAgICAgICAgLy8gVE9ETzogbWFrZSB3cml0ZXNDYWNoZSB0YWtlIGZsYWcgZm9yIGNvbXBsZXRlIHNlcnZlciBub2RlXG4gICAgICAgIGxldCBldmVudENhY2hlID0gd3JpdGVUcmVlUmVmQ2FsY0NvbXBsZXRlRXZlbnRDYWNoZSh3cml0ZXNDYWNoZSwgc2VydmVyQ2FjaGVDb21wbGV0ZSA/IHNlcnZlckNhY2hlIDogbnVsbCk7XG4gICAgICAgIGxldCBldmVudENhY2hlQ29tcGxldGUgPSBmYWxzZTtcbiAgICAgICAgaWYgKGV2ZW50Q2FjaGUpIHtcbiAgICAgICAgICAgIGV2ZW50Q2FjaGVDb21wbGV0ZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc2VydmVyQ2FjaGUgaW5zdGFuY2VvZiBDaGlsZHJlbk5vZGUpIHtcbiAgICAgICAgICAgIGV2ZW50Q2FjaGUgPSB3cml0ZVRyZWVSZWZDYWxjQ29tcGxldGVFdmVudENoaWxkcmVuKHdyaXRlc0NhY2hlLCBzZXJ2ZXJDYWNoZSk7XG4gICAgICAgICAgICBldmVudENhY2hlQ29tcGxldGUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGV2ZW50Q2FjaGUgPSBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERTtcbiAgICAgICAgICAgIGV2ZW50Q2FjaGVDb21wbGV0ZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZpZXdDYWNoZSA9IG5ld1ZpZXdDYWNoZShuZXcgQ2FjaGVOb2RlKGV2ZW50Q2FjaGUsIGV2ZW50Q2FjaGVDb21wbGV0ZSwgZmFsc2UpLCBuZXcgQ2FjaGVOb2RlKHNlcnZlckNhY2hlLCBzZXJ2ZXJDYWNoZUNvbXBsZXRlLCBmYWxzZSkpO1xuICAgICAgICByZXR1cm4gbmV3IFZpZXcocXVlcnksIHZpZXdDYWNoZSk7XG4gICAgfVxuICAgIHJldHVybiB2aWV3O1xufVxuLyoqXG4gKiBBZGQgYW4gZXZlbnQgY2FsbGJhY2sgZm9yIHRoZSBzcGVjaWZpZWQgcXVlcnkuXG4gKlxuICogQHBhcmFtIHF1ZXJ5XG4gKiBAcGFyYW0gZXZlbnRSZWdpc3RyYXRpb25cbiAqIEBwYXJhbSB3cml0ZXNDYWNoZVxuICogQHBhcmFtIHNlcnZlckNhY2hlIC0gQ29tcGxldGUgc2VydmVyIGNhY2hlLCBpZiB3ZSBoYXZlIGl0LlxuICogQHBhcmFtIHNlcnZlckNhY2hlQ29tcGxldGVcbiAqIEByZXR1cm5zIEV2ZW50cyB0byByYWlzZS5cbiAqL1xuZnVuY3Rpb24gc3luY1BvaW50QWRkRXZlbnRSZWdpc3RyYXRpb24oc3luY1BvaW50LCBxdWVyeSwgZXZlbnRSZWdpc3RyYXRpb24sIHdyaXRlc0NhY2hlLCBzZXJ2ZXJDYWNoZSwgc2VydmVyQ2FjaGVDb21wbGV0ZSkge1xuICAgIGNvbnN0IHZpZXcgPSBzeW5jUG9pbnRHZXRWaWV3KHN5bmNQb2ludCwgcXVlcnksIHdyaXRlc0NhY2hlLCBzZXJ2ZXJDYWNoZSwgc2VydmVyQ2FjaGVDb21wbGV0ZSk7XG4gICAgaWYgKCFzeW5jUG9pbnQudmlld3MuaGFzKHF1ZXJ5Ll9xdWVyeUlkZW50aWZpZXIpKSB7XG4gICAgICAgIHN5bmNQb2ludC52aWV3cy5zZXQocXVlcnkuX3F1ZXJ5SWRlbnRpZmllciwgdmlldyk7XG4gICAgfVxuICAgIC8vIFRoaXMgaXMgZ3VhcmFudGVlZCB0byBleGlzdCBub3csIHdlIGp1c3QgY3JlYXRlZCBhbnl0aGluZyB0aGF0IHdhcyBtaXNzaW5nXG4gICAgdmlld0FkZEV2ZW50UmVnaXN0cmF0aW9uKHZpZXcsIGV2ZW50UmVnaXN0cmF0aW9uKTtcbiAgICByZXR1cm4gdmlld0dldEluaXRpYWxFdmVudHModmlldywgZXZlbnRSZWdpc3RyYXRpb24pO1xufVxuLyoqXG4gKiBSZW1vdmUgZXZlbnQgY2FsbGJhY2socykuICBSZXR1cm4gY2FuY2VsRXZlbnRzIGlmIGEgY2FuY2VsRXJyb3IgaXMgc3BlY2lmaWVkLlxuICpcbiAqIElmIHF1ZXJ5IGlzIHRoZSBkZWZhdWx0IHF1ZXJ5LCB3ZSdsbCBjaGVjayBhbGwgdmlld3MgZm9yIHRoZSBzcGVjaWZpZWQgZXZlbnRSZWdpc3RyYXRpb24uXG4gKiBJZiBldmVudFJlZ2lzdHJhdGlvbiBpcyBudWxsLCB3ZSdsbCByZW1vdmUgYWxsIGNhbGxiYWNrcyBmb3IgdGhlIHNwZWNpZmllZCB2aWV3KHMpLlxuICpcbiAqIEBwYXJhbSBldmVudFJlZ2lzdHJhdGlvbiAtIElmIG51bGwsIHJlbW92ZSBhbGwgY2FsbGJhY2tzLlxuICogQHBhcmFtIGNhbmNlbEVycm9yIC0gSWYgYSBjYW5jZWxFcnJvciBpcyBwcm92aWRlZCwgYXBwcm9wcmlhdGUgY2FuY2VsIGV2ZW50cyB3aWxsIGJlIHJldHVybmVkLlxuICogQHJldHVybnMgcmVtb3ZlZCBxdWVyaWVzIGFuZCBhbnkgY2FuY2VsIGV2ZW50c1xuICovXG5mdW5jdGlvbiBzeW5jUG9pbnRSZW1vdmVFdmVudFJlZ2lzdHJhdGlvbihzeW5jUG9pbnQsIHF1ZXJ5LCBldmVudFJlZ2lzdHJhdGlvbiwgY2FuY2VsRXJyb3IpIHtcbiAgICBjb25zdCBxdWVyeUlkID0gcXVlcnkuX3F1ZXJ5SWRlbnRpZmllcjtcbiAgICBjb25zdCByZW1vdmVkID0gW107XG4gICAgbGV0IGNhbmNlbEV2ZW50cyA9IFtdO1xuICAgIGNvbnN0IGhhZENvbXBsZXRlVmlldyA9IHN5bmNQb2ludEhhc0NvbXBsZXRlVmlldyhzeW5jUG9pbnQpO1xuICAgIGlmIChxdWVyeUlkID09PSAnZGVmYXVsdCcpIHtcbiAgICAgICAgLy8gV2hlbiB5b3UgZG8gcmVmLm9mZiguLi4pLCB3ZSBzZWFyY2ggYWxsIHZpZXdzIGZvciB0aGUgcmVnaXN0cmF0aW9uIHRvIHJlbW92ZS5cbiAgICAgICAgZm9yIChjb25zdCBbdmlld1F1ZXJ5SWQsIHZpZXddIG9mIHN5bmNQb2ludC52aWV3cy5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgIGNhbmNlbEV2ZW50cyA9IGNhbmNlbEV2ZW50cy5jb25jYXQodmlld1JlbW92ZUV2ZW50UmVnaXN0cmF0aW9uKHZpZXcsIGV2ZW50UmVnaXN0cmF0aW9uLCBjYW5jZWxFcnJvcikpO1xuICAgICAgICAgICAgaWYgKHZpZXdJc0VtcHR5KHZpZXcpKSB7XG4gICAgICAgICAgICAgICAgc3luY1BvaW50LnZpZXdzLmRlbGV0ZSh2aWV3UXVlcnlJZCk7XG4gICAgICAgICAgICAgICAgLy8gV2UnbGwgZGVhbCB3aXRoIGNvbXBsZXRlIHZpZXdzIGxhdGVyLlxuICAgICAgICAgICAgICAgIGlmICghdmlldy5xdWVyeS5fcXVlcnlQYXJhbXMubG9hZHNBbGxEYXRhKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlZC5wdXNoKHZpZXcucXVlcnkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gcmVtb3ZlIHRoZSBjYWxsYmFjayBmcm9tIHRoZSBzcGVjaWZpYyB2aWV3LlxuICAgICAgICBjb25zdCB2aWV3ID0gc3luY1BvaW50LnZpZXdzLmdldChxdWVyeUlkKTtcbiAgICAgICAgaWYgKHZpZXcpIHtcbiAgICAgICAgICAgIGNhbmNlbEV2ZW50cyA9IGNhbmNlbEV2ZW50cy5jb25jYXQodmlld1JlbW92ZUV2ZW50UmVnaXN0cmF0aW9uKHZpZXcsIGV2ZW50UmVnaXN0cmF0aW9uLCBjYW5jZWxFcnJvcikpO1xuICAgICAgICAgICAgaWYgKHZpZXdJc0VtcHR5KHZpZXcpKSB7XG4gICAgICAgICAgICAgICAgc3luY1BvaW50LnZpZXdzLmRlbGV0ZShxdWVyeUlkKTtcbiAgICAgICAgICAgICAgICAvLyBXZSdsbCBkZWFsIHdpdGggY29tcGxldGUgdmlld3MgbGF0ZXIuXG4gICAgICAgICAgICAgICAgaWYgKCF2aWV3LnF1ZXJ5Ll9xdWVyeVBhcmFtcy5sb2Fkc0FsbERhdGEoKSkge1xuICAgICAgICAgICAgICAgICAgICByZW1vdmVkLnB1c2godmlldy5xdWVyeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChoYWRDb21wbGV0ZVZpZXcgJiYgIXN5bmNQb2ludEhhc0NvbXBsZXRlVmlldyhzeW5jUG9pbnQpKSB7XG4gICAgICAgIC8vIFdlIHJlbW92ZWQgb3VyIGxhc3QgY29tcGxldGUgdmlldy5cbiAgICAgICAgcmVtb3ZlZC5wdXNoKG5ldyAoc3luY1BvaW50R2V0UmVmZXJlbmNlQ29uc3RydWN0b3IoKSkocXVlcnkuX3JlcG8sIHF1ZXJ5Ll9wYXRoKSk7XG4gICAgfVxuICAgIHJldHVybiB7IHJlbW92ZWQsIGV2ZW50czogY2FuY2VsRXZlbnRzIH07XG59XG5mdW5jdGlvbiBzeW5jUG9pbnRHZXRRdWVyeVZpZXdzKHN5bmNQb2ludCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgIGZvciAoY29uc3QgdmlldyBvZiBzeW5jUG9pbnQudmlld3MudmFsdWVzKCkpIHtcbiAgICAgICAgaWYgKCF2aWV3LnF1ZXJ5Ll9xdWVyeVBhcmFtcy5sb2Fkc0FsbERhdGEoKSkge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2godmlldyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8qKlxuICogQHBhcmFtIHBhdGggLSBUaGUgcGF0aCB0byB0aGUgZGVzaXJlZCBjb21wbGV0ZSBzbmFwc2hvdFxuICogQHJldHVybnMgQSBjb21wbGV0ZSBjYWNoZSwgaWYgaXQgZXhpc3RzXG4gKi9cbmZ1bmN0aW9uIHN5bmNQb2ludEdldENvbXBsZXRlU2VydmVyQ2FjaGUoc3luY1BvaW50LCBwYXRoKSB7XG4gICAgbGV0IHNlcnZlckNhY2hlID0gbnVsbDtcbiAgICBmb3IgKGNvbnN0IHZpZXcgb2Ygc3luY1BvaW50LnZpZXdzLnZhbHVlcygpKSB7XG4gICAgICAgIHNlcnZlckNhY2hlID0gc2VydmVyQ2FjaGUgfHwgdmlld0dldENvbXBsZXRlU2VydmVyQ2FjaGUodmlldywgcGF0aCk7XG4gICAgfVxuICAgIHJldHVybiBzZXJ2ZXJDYWNoZTtcbn1cbmZ1bmN0aW9uIHN5bmNQb2ludFZpZXdGb3JRdWVyeShzeW5jUG9pbnQsIHF1ZXJ5KSB7XG4gICAgY29uc3QgcGFyYW1zID0gcXVlcnkuX3F1ZXJ5UGFyYW1zO1xuICAgIGlmIChwYXJhbXMubG9hZHNBbGxEYXRhKCkpIHtcbiAgICAgICAgcmV0dXJuIHN5bmNQb2ludEdldENvbXBsZXRlVmlldyhzeW5jUG9pbnQpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgcXVlcnlJZCA9IHF1ZXJ5Ll9xdWVyeUlkZW50aWZpZXI7XG4gICAgICAgIHJldHVybiBzeW5jUG9pbnQudmlld3MuZ2V0KHF1ZXJ5SWQpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHN5bmNQb2ludFZpZXdFeGlzdHNGb3JRdWVyeShzeW5jUG9pbnQsIHF1ZXJ5KSB7XG4gICAgcmV0dXJuIHN5bmNQb2ludFZpZXdGb3JRdWVyeShzeW5jUG9pbnQsIHF1ZXJ5KSAhPSBudWxsO1xufVxuZnVuY3Rpb24gc3luY1BvaW50SGFzQ29tcGxldGVWaWV3KHN5bmNQb2ludCkge1xuICAgIHJldHVybiBzeW5jUG9pbnRHZXRDb21wbGV0ZVZpZXcoc3luY1BvaW50KSAhPSBudWxsO1xufVxuZnVuY3Rpb24gc3luY1BvaW50R2V0Q29tcGxldGVWaWV3KHN5bmNQb2ludCkge1xuICAgIGZvciAoY29uc3QgdmlldyBvZiBzeW5jUG9pbnQudmlld3MudmFsdWVzKCkpIHtcbiAgICAgICAgaWYgKHZpZXcucXVlcnkuX3F1ZXJ5UGFyYW1zLmxvYWRzQWxsRGF0YSgpKSB7XG4gICAgICAgICAgICByZXR1cm4gdmlldztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmxldCByZWZlcmVuY2VDb25zdHJ1Y3RvcjtcbmZ1bmN0aW9uIHN5bmNUcmVlU2V0UmVmZXJlbmNlQ29uc3RydWN0b3IodmFsKSB7XG4gICAgYXNzZXJ0KCFyZWZlcmVuY2VDb25zdHJ1Y3RvciwgJ19fcmVmZXJlbmNlQ29uc3RydWN0b3IgaGFzIGFscmVhZHkgYmVlbiBkZWZpbmVkJyk7XG4gICAgcmVmZXJlbmNlQ29uc3RydWN0b3IgPSB2YWw7XG59XG5mdW5jdGlvbiBzeW5jVHJlZUdldFJlZmVyZW5jZUNvbnN0cnVjdG9yKCkge1xuICAgIGFzc2VydChyZWZlcmVuY2VDb25zdHJ1Y3RvciwgJ1JlZmVyZW5jZS50cyBoYXMgbm90IGJlZW4gbG9hZGVkJyk7XG4gICAgcmV0dXJuIHJlZmVyZW5jZUNvbnN0cnVjdG9yO1xufVxuLyoqXG4gKiBTdGF0aWMgdHJhY2tlciBmb3IgbmV4dCBxdWVyeSB0YWcuXG4gKi9cbmxldCBzeW5jVHJlZU5leHRRdWVyeVRhZ18gPSAxO1xuLyoqXG4gKiBTeW5jVHJlZSBpcyB0aGUgY2VudHJhbCBjbGFzcyBmb3IgbWFuYWdpbmcgZXZlbnQgY2FsbGJhY2sgcmVnaXN0cmF0aW9uLCBkYXRhIGNhY2hpbmcsIHZpZXdzXG4gKiAocXVlcnkgcHJvY2Vzc2luZyksIGFuZCBldmVudCBnZW5lcmF0aW9uLiAgVGhlcmUgYXJlIHR5cGljYWxseSB0d28gU3luY1RyZWUgaW5zdGFuY2VzIGZvclxuICogZWFjaCBSZXBvLCBvbmUgZm9yIHRoZSBub3JtYWwgRmlyZWJhc2UgZGF0YSwgYW5kIG9uZSBmb3IgdGhlIC5pbmZvIGRhdGEuXG4gKlxuICogSXQgaGFzIGEgbnVtYmVyIG9mIHJlc3BvbnNpYmlsaXRpZXMsIGluY2x1ZGluZzpcbiAqICAtIFRyYWNraW5nIGFsbCB1c2VyIGV2ZW50IGNhbGxiYWNrcyAocmVnaXN0ZXJlZCB2aWEgYWRkRXZlbnRSZWdpc3RyYXRpb24oKSBhbmQgcmVtb3ZlRXZlbnRSZWdpc3RyYXRpb24oKSkuXG4gKiAgLSBBcHBseWluZyBhbmQgY2FjaGluZyBkYXRhIGNoYW5nZXMgZm9yIHVzZXIgc2V0KCksIHRyYW5zYWN0aW9uKCksIGFuZCB1cGRhdGUoKSBjYWxsc1xuICogICAgKGFwcGx5VXNlck92ZXJ3cml0ZSgpLCBhcHBseVVzZXJNZXJnZSgpKS5cbiAqICAtIEFwcGx5aW5nIGFuZCBjYWNoaW5nIGRhdGEgY2hhbmdlcyBmb3Igc2VydmVyIGRhdGEgY2hhbmdlcyAoYXBwbHlTZXJ2ZXJPdmVyd3JpdGUoKSxcbiAqICAgIGFwcGx5U2VydmVyTWVyZ2UoKSkuXG4gKiAgLSBHZW5lcmF0aW5nIHVzZXItZmFjaW5nIGV2ZW50cyBmb3Igc2VydmVyIGFuZCB1c2VyIGNoYW5nZXMgKGFsbCBvZiB0aGUgYXBwbHkqIG1ldGhvZHNcbiAqICAgIHJldHVybiB0aGUgc2V0IG9mIGV2ZW50cyB0aGF0IG5lZWQgdG8gYmUgcmFpc2VkIGFzIGEgcmVzdWx0KS5cbiAqICAtIE1haW50YWluaW5nIHRoZSBhcHByb3ByaWF0ZSBzZXQgb2Ygc2VydmVyIGxpc3RlbnMgdG8gZW5zdXJlIHdlIGFyZSBhbHdheXMgc3Vic2NyaWJlZFxuICogICAgdG8gdGhlIGNvcnJlY3Qgc2V0IG9mIHBhdGhzIGFuZCBxdWVyaWVzIHRvIHNhdGlzZnkgdGhlIGN1cnJlbnQgc2V0IG9mIHVzZXIgZXZlbnRcbiAqICAgIGNhbGxiYWNrcyAobGlzdGVucyBhcmUgc3RhcnRlZC9zdG9wcGVkIHVzaW5nIHRoZSBwcm92aWRlZCBsaXN0ZW5Qcm92aWRlcikuXG4gKlxuICogTk9URTogQWx0aG91Z2ggU3luY1RyZWUgdHJhY2tzIGV2ZW50IGNhbGxiYWNrcyBhbmQgY2FsY3VsYXRlcyBldmVudHMgdG8gcmFpc2UsIHRoZSBhY3R1YWxcbiAqIGV2ZW50cyBhcmUgcmV0dXJuZWQgdG8gdGhlIGNhbGxlciByYXRoZXIgdGhhbiByYWlzZWQgc3luY2hyb25vdXNseS5cbiAqXG4gKi9cbmNsYXNzIFN5bmNUcmVlIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gbGlzdGVuUHJvdmlkZXJfIC0gVXNlZCBieSBTeW5jVHJlZSB0byBzdGFydCAvIHN0b3AgbGlzdGVuaW5nXG4gICAgICogICB0byBzZXJ2ZXIgZGF0YS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihsaXN0ZW5Qcm92aWRlcl8pIHtcbiAgICAgICAgdGhpcy5saXN0ZW5Qcm92aWRlcl8gPSBsaXN0ZW5Qcm92aWRlcl87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUcmVlIG9mIFN5bmNQb2ludHMuICBUaGVyZSdzIGEgU3luY1BvaW50IGF0IGFueSBsb2NhdGlvbiB0aGF0IGhhcyAxIG9yIG1vcmUgdmlld3MuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnN5bmNQb2ludFRyZWVfID0gbmV3IEltbXV0YWJsZVRyZWUobnVsbCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHRyZWUgb2YgYWxsIHBlbmRpbmcgdXNlciB3cml0ZXMgKHVzZXItaW5pdGlhdGVkIHNldCgpJ3MsIHRyYW5zYWN0aW9uKCkncywgdXBkYXRlKCkncywgZXRjLikuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnBlbmRpbmdXcml0ZVRyZWVfID0gbmV3V3JpdGVUcmVlKCk7XG4gICAgICAgIHRoaXMudGFnVG9RdWVyeU1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5xdWVyeVRvVGFnTWFwID0gbmV3IE1hcCgpO1xuICAgIH1cbn1cbi8qKlxuICogQXBwbHkgdGhlIGRhdGEgY2hhbmdlcyBmb3IgYSB1c2VyLWdlbmVyYXRlZCBzZXQoKSBvciB0cmFuc2FjdGlvbigpIGNhbGwuXG4gKlxuICogQHJldHVybnMgRXZlbnRzIHRvIHJhaXNlLlxuICovXG5mdW5jdGlvbiBzeW5jVHJlZUFwcGx5VXNlck92ZXJ3cml0ZShzeW5jVHJlZSwgcGF0aCwgbmV3RGF0YSwgd3JpdGVJZCwgdmlzaWJsZSkge1xuICAgIC8vIFJlY29yZCBwZW5kaW5nIHdyaXRlLlxuICAgIHdyaXRlVHJlZUFkZE92ZXJ3cml0ZShzeW5jVHJlZS5wZW5kaW5nV3JpdGVUcmVlXywgcGF0aCwgbmV3RGF0YSwgd3JpdGVJZCwgdmlzaWJsZSk7XG4gICAgaWYgKCF2aXNpYmxlKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBzeW5jVHJlZUFwcGx5T3BlcmF0aW9uVG9TeW5jUG9pbnRzXyhzeW5jVHJlZSwgbmV3IE92ZXJ3cml0ZShuZXdPcGVyYXRpb25Tb3VyY2VVc2VyKCksIHBhdGgsIG5ld0RhdGEpKTtcbiAgICB9XG59XG4vKipcbiAqIEFwcGx5IHRoZSBkYXRhIGZyb20gYSB1c2VyLWdlbmVyYXRlZCB1cGRhdGUoKSBjYWxsXG4gKlxuICogQHJldHVybnMgRXZlbnRzIHRvIHJhaXNlLlxuICovXG5mdW5jdGlvbiBzeW5jVHJlZUFwcGx5VXNlck1lcmdlKHN5bmNUcmVlLCBwYXRoLCBjaGFuZ2VkQ2hpbGRyZW4sIHdyaXRlSWQpIHtcbiAgICAvLyBSZWNvcmQgcGVuZGluZyBtZXJnZS5cbiAgICB3cml0ZVRyZWVBZGRNZXJnZShzeW5jVHJlZS5wZW5kaW5nV3JpdGVUcmVlXywgcGF0aCwgY2hhbmdlZENoaWxkcmVuLCB3cml0ZUlkKTtcbiAgICBjb25zdCBjaGFuZ2VUcmVlID0gSW1tdXRhYmxlVHJlZS5mcm9tT2JqZWN0KGNoYW5nZWRDaGlsZHJlbik7XG4gICAgcmV0dXJuIHN5bmNUcmVlQXBwbHlPcGVyYXRpb25Ub1N5bmNQb2ludHNfKHN5bmNUcmVlLCBuZXcgTWVyZ2UobmV3T3BlcmF0aW9uU291cmNlVXNlcigpLCBwYXRoLCBjaGFuZ2VUcmVlKSk7XG59XG4vKipcbiAqIEFja25vd2xlZGdlIGEgcGVuZGluZyB1c2VyIHdyaXRlIHRoYXQgd2FzIHByZXZpb3VzbHkgcmVnaXN0ZXJlZCB3aXRoIGFwcGx5VXNlck92ZXJ3cml0ZSgpIG9yIGFwcGx5VXNlck1lcmdlKCkuXG4gKlxuICogQHBhcmFtIHJldmVydCAtIFRydWUgaWYgdGhlIGdpdmVuIHdyaXRlIGZhaWxlZCBhbmQgbmVlZHMgdG8gYmUgcmV2ZXJ0ZWRcbiAqIEByZXR1cm5zIEV2ZW50cyB0byByYWlzZS5cbiAqL1xuZnVuY3Rpb24gc3luY1RyZWVBY2tVc2VyV3JpdGUoc3luY1RyZWUsIHdyaXRlSWQsIHJldmVydCA9IGZhbHNlKSB7XG4gICAgY29uc3Qgd3JpdGUgPSB3cml0ZVRyZWVHZXRXcml0ZShzeW5jVHJlZS5wZW5kaW5nV3JpdGVUcmVlXywgd3JpdGVJZCk7XG4gICAgY29uc3QgbmVlZFRvUmVldmFsdWF0ZSA9IHdyaXRlVHJlZVJlbW92ZVdyaXRlKHN5bmNUcmVlLnBlbmRpbmdXcml0ZVRyZWVfLCB3cml0ZUlkKTtcbiAgICBpZiAoIW5lZWRUb1JlZXZhbHVhdGUpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbGV0IGFmZmVjdGVkVHJlZSA9IG5ldyBJbW11dGFibGVUcmVlKG51bGwpO1xuICAgICAgICBpZiAod3JpdGUuc25hcCAhPSBudWxsKSB7XG4gICAgICAgICAgICAvLyBvdmVyd3JpdGVcbiAgICAgICAgICAgIGFmZmVjdGVkVHJlZSA9IGFmZmVjdGVkVHJlZS5zZXQobmV3RW1wdHlQYXRoKCksIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZWFjaCh3cml0ZS5jaGlsZHJlbiwgKHBhdGhTdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICBhZmZlY3RlZFRyZWUgPSBhZmZlY3RlZFRyZWUuc2V0KG5ldyBQYXRoKHBhdGhTdHJpbmcpLCB0cnVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzeW5jVHJlZUFwcGx5T3BlcmF0aW9uVG9TeW5jUG9pbnRzXyhzeW5jVHJlZSwgbmV3IEFja1VzZXJXcml0ZSh3cml0ZS5wYXRoLCBhZmZlY3RlZFRyZWUsIHJldmVydCkpO1xuICAgIH1cbn1cbi8qKlxuICogQXBwbHkgbmV3IHNlcnZlciBkYXRhIGZvciB0aGUgc3BlY2lmaWVkIHBhdGguLlxuICpcbiAqIEByZXR1cm5zIEV2ZW50cyB0byByYWlzZS5cbiAqL1xuZnVuY3Rpb24gc3luY1RyZWVBcHBseVNlcnZlck92ZXJ3cml0ZShzeW5jVHJlZSwgcGF0aCwgbmV3RGF0YSkge1xuICAgIHJldHVybiBzeW5jVHJlZUFwcGx5T3BlcmF0aW9uVG9TeW5jUG9pbnRzXyhzeW5jVHJlZSwgbmV3IE92ZXJ3cml0ZShuZXdPcGVyYXRpb25Tb3VyY2VTZXJ2ZXIoKSwgcGF0aCwgbmV3RGF0YSkpO1xufVxuLyoqXG4gKiBBcHBseSBuZXcgc2VydmVyIGRhdGEgdG8gYmUgbWVyZ2VkIGluIGF0IHRoZSBzcGVjaWZpZWQgcGF0aC5cbiAqXG4gKiBAcmV0dXJucyBFdmVudHMgdG8gcmFpc2UuXG4gKi9cbmZ1bmN0aW9uIHN5bmNUcmVlQXBwbHlTZXJ2ZXJNZXJnZShzeW5jVHJlZSwgcGF0aCwgY2hhbmdlZENoaWxkcmVuKSB7XG4gICAgY29uc3QgY2hhbmdlVHJlZSA9IEltbXV0YWJsZVRyZWUuZnJvbU9iamVjdChjaGFuZ2VkQ2hpbGRyZW4pO1xuICAgIHJldHVybiBzeW5jVHJlZUFwcGx5T3BlcmF0aW9uVG9TeW5jUG9pbnRzXyhzeW5jVHJlZSwgbmV3IE1lcmdlKG5ld09wZXJhdGlvblNvdXJjZVNlcnZlcigpLCBwYXRoLCBjaGFuZ2VUcmVlKSk7XG59XG4vKipcbiAqIEFwcGx5IGEgbGlzdGVuIGNvbXBsZXRlIGZvciBhIHF1ZXJ5XG4gKlxuICogQHJldHVybnMgRXZlbnRzIHRvIHJhaXNlLlxuICovXG5mdW5jdGlvbiBzeW5jVHJlZUFwcGx5TGlzdGVuQ29tcGxldGUoc3luY1RyZWUsIHBhdGgpIHtcbiAgICByZXR1cm4gc3luY1RyZWVBcHBseU9wZXJhdGlvblRvU3luY1BvaW50c18oc3luY1RyZWUsIG5ldyBMaXN0ZW5Db21wbGV0ZShuZXdPcGVyYXRpb25Tb3VyY2VTZXJ2ZXIoKSwgcGF0aCkpO1xufVxuLyoqXG4gKiBBcHBseSBhIGxpc3RlbiBjb21wbGV0ZSBmb3IgYSB0YWdnZWQgcXVlcnlcbiAqXG4gKiBAcmV0dXJucyBFdmVudHMgdG8gcmFpc2UuXG4gKi9cbmZ1bmN0aW9uIHN5bmNUcmVlQXBwbHlUYWdnZWRMaXN0ZW5Db21wbGV0ZShzeW5jVHJlZSwgcGF0aCwgdGFnKSB7XG4gICAgY29uc3QgcXVlcnlLZXkgPSBzeW5jVHJlZVF1ZXJ5S2V5Rm9yVGFnXyhzeW5jVHJlZSwgdGFnKTtcbiAgICBpZiAocXVlcnlLZXkpIHtcbiAgICAgICAgY29uc3QgciA9IHN5bmNUcmVlUGFyc2VRdWVyeUtleV8ocXVlcnlLZXkpO1xuICAgICAgICBjb25zdCBxdWVyeVBhdGggPSByLnBhdGgsIHF1ZXJ5SWQgPSByLnF1ZXJ5SWQ7XG4gICAgICAgIGNvbnN0IHJlbGF0aXZlUGF0aCA9IG5ld1JlbGF0aXZlUGF0aChxdWVyeVBhdGgsIHBhdGgpO1xuICAgICAgICBjb25zdCBvcCA9IG5ldyBMaXN0ZW5Db21wbGV0ZShuZXdPcGVyYXRpb25Tb3VyY2VTZXJ2ZXJUYWdnZWRRdWVyeShxdWVyeUlkKSwgcmVsYXRpdmVQYXRoKTtcbiAgICAgICAgcmV0dXJuIHN5bmNUcmVlQXBwbHlUYWdnZWRPcGVyYXRpb25fKHN5bmNUcmVlLCBxdWVyeVBhdGgsIG9wKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIFdlJ3ZlIGFscmVhZHkgcmVtb3ZlZCB0aGUgcXVlcnkuIE5vIGJpZyBkZWFsLCBpZ25vcmUgdGhlIHVwZGF0ZVxuICAgICAgICByZXR1cm4gW107XG4gICAgfVxufVxuLyoqXG4gKiBSZW1vdmUgZXZlbnQgY2FsbGJhY2socykuXG4gKlxuICogSWYgcXVlcnkgaXMgdGhlIGRlZmF1bHQgcXVlcnksIHdlJ2xsIGNoZWNrIGFsbCBxdWVyaWVzIGZvciB0aGUgc3BlY2lmaWVkIGV2ZW50UmVnaXN0cmF0aW9uLlxuICogSWYgZXZlbnRSZWdpc3RyYXRpb24gaXMgbnVsbCwgd2UnbGwgcmVtb3ZlIGFsbCBjYWxsYmFja3MgZm9yIHRoZSBzcGVjaWZpZWQgcXVlcnkvcXVlcmllcy5cbiAqXG4gKiBAcGFyYW0gZXZlbnRSZWdpc3RyYXRpb24gLSBJZiBudWxsLCBhbGwgY2FsbGJhY2tzIGFyZSByZW1vdmVkLlxuICogQHBhcmFtIGNhbmNlbEVycm9yIC0gSWYgYSBjYW5jZWxFcnJvciBpcyBwcm92aWRlZCwgYXBwcm9wcmlhdGUgY2FuY2VsIGV2ZW50cyB3aWxsIGJlIHJldHVybmVkLlxuICogQHBhcmFtIHNraXBMaXN0ZW5lckRlZHVwIC0gV2hlbiBwZXJmb3JtaW5nIGEgYGdldCgpYCwgd2UgZG9uJ3QgYWRkIGFueSBuZXcgbGlzdGVuZXJzLCBzbyBub1xuICogIGRlZHVwaW5nIG5lZWRzIHRvIHRha2UgcGxhY2UuIFRoaXMgZmxhZyBhbGxvd3MgdG9nZ2xpbmcgb2YgdGhhdCBiZWhhdmlvclxuICogQHJldHVybnMgQ2FuY2VsIGV2ZW50cywgaWYgY2FuY2VsRXJyb3Igd2FzIHByb3ZpZGVkLlxuICovXG5mdW5jdGlvbiBzeW5jVHJlZVJlbW92ZUV2ZW50UmVnaXN0cmF0aW9uKHN5bmNUcmVlLCBxdWVyeSwgZXZlbnRSZWdpc3RyYXRpb24sIGNhbmNlbEVycm9yLCBza2lwTGlzdGVuZXJEZWR1cCA9IGZhbHNlKSB7XG4gICAgLy8gRmluZCB0aGUgc3luY1BvaW50IGZpcnN0LiBUaGVuIGRlYWwgd2l0aCB3aGV0aGVyIG9yIG5vdCBpdCBoYXMgbWF0Y2hpbmcgbGlzdGVuZXJzXG4gICAgY29uc3QgcGF0aCA9IHF1ZXJ5Ll9wYXRoO1xuICAgIGNvbnN0IG1heWJlU3luY1BvaW50ID0gc3luY1RyZWUuc3luY1BvaW50VHJlZV8uZ2V0KHBhdGgpO1xuICAgIGxldCBjYW5jZWxFdmVudHMgPSBbXTtcbiAgICAvLyBBIHJlbW92YWwgb24gYSBkZWZhdWx0IHF1ZXJ5IGFmZmVjdHMgYWxsIHF1ZXJpZXMgYXQgdGhhdCBsb2NhdGlvbi4gQSByZW1vdmFsIG9uIGFuIGluZGV4ZWQgcXVlcnksIGV2ZW4gb25lIHdpdGhvdXRcbiAgICAvLyBvdGhlciBxdWVyeSBjb25zdHJhaW50cywgZG9lcyAqbm90KiBhZmZlY3QgYWxsIHF1ZXJpZXMgYXQgdGhhdCBsb2NhdGlvbi4gU28gdGhpcyBjaGVjayBtdXN0IGJlIGZvciAnZGVmYXVsdCcsIGFuZFxuICAgIC8vIG5vdCBsb2Fkc0FsbERhdGEoKS5cbiAgICBpZiAobWF5YmVTeW5jUG9pbnQgJiZcbiAgICAgICAgKHF1ZXJ5Ll9xdWVyeUlkZW50aWZpZXIgPT09ICdkZWZhdWx0JyB8fFxuICAgICAgICAgICAgc3luY1BvaW50Vmlld0V4aXN0c0ZvclF1ZXJ5KG1heWJlU3luY1BvaW50LCBxdWVyeSkpKSB7XG4gICAgICAgIGNvbnN0IHJlbW92ZWRBbmRFdmVudHMgPSBzeW5jUG9pbnRSZW1vdmVFdmVudFJlZ2lzdHJhdGlvbihtYXliZVN5bmNQb2ludCwgcXVlcnksIGV2ZW50UmVnaXN0cmF0aW9uLCBjYW5jZWxFcnJvcik7XG4gICAgICAgIGlmIChzeW5jUG9pbnRJc0VtcHR5KG1heWJlU3luY1BvaW50KSkge1xuICAgICAgICAgICAgc3luY1RyZWUuc3luY1BvaW50VHJlZV8gPSBzeW5jVHJlZS5zeW5jUG9pbnRUcmVlXy5yZW1vdmUocGF0aCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVtb3ZlZCA9IHJlbW92ZWRBbmRFdmVudHMucmVtb3ZlZDtcbiAgICAgICAgY2FuY2VsRXZlbnRzID0gcmVtb3ZlZEFuZEV2ZW50cy5ldmVudHM7XG4gICAgICAgIGlmICghc2tpcExpc3RlbmVyRGVkdXApIHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogV2UgbWF5IGhhdmUganVzdCByZW1vdmVkIG9uZSBvZiBtYW55IGxpc3RlbmVycyBhbmQgY2FuIHNob3J0LWNpcmN1aXQgdGhpcyB3aG9sZSBwcm9jZXNzXG4gICAgICAgICAgICAgKiBXZSBtYXkgYWxzbyBub3QgaGF2ZSByZW1vdmVkIGEgZGVmYXVsdCBsaXN0ZW5lciwgaW4gd2hpY2ggY2FzZSBhbGwgb2YgdGhlIGRlc2NlbmRhbnQgbGlzdGVuZXJzIHNob3VsZCBhbHJlYWR5IGJlXG4gICAgICAgICAgICAgKiBwcm9wZXJseSBzZXQgdXAuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIC8vIFNpbmNlIGluZGV4ZWQgcXVlcmllcyBjYW4gc2hhZG93IGlmIHRoZXkgZG9uJ3QgaGF2ZSBvdGhlciBxdWVyeSBjb25zdHJhaW50cywgY2hlY2sgZm9yIGxvYWRzQWxsRGF0YSgpLCBpbnN0ZWFkIG9mXG4gICAgICAgICAgICAvLyBxdWVyeUlkID09PSAnZGVmYXVsdCdcbiAgICAgICAgICAgIGNvbnN0IHJlbW92aW5nRGVmYXVsdCA9IC0xICE9PVxuICAgICAgICAgICAgICAgIHJlbW92ZWQuZmluZEluZGV4KHF1ZXJ5ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHF1ZXJ5Ll9xdWVyeVBhcmFtcy5sb2Fkc0FsbERhdGEoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGNvdmVyZWQgPSBzeW5jVHJlZS5zeW5jUG9pbnRUcmVlXy5maW5kT25QYXRoKHBhdGgsIChyZWxhdGl2ZVBhdGgsIHBhcmVudFN5bmNQb2ludCkgPT4gc3luY1BvaW50SGFzQ29tcGxldGVWaWV3KHBhcmVudFN5bmNQb2ludCkpO1xuICAgICAgICAgICAgaWYgKHJlbW92aW5nRGVmYXVsdCAmJiAhY292ZXJlZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN1YnRyZWUgPSBzeW5jVHJlZS5zeW5jUG9pbnRUcmVlXy5zdWJ0cmVlKHBhdGgpO1xuICAgICAgICAgICAgICAgIC8vIFRoZXJlIGFyZSBwb3RlbnRpYWxseSBjaGlsZCBsaXN0ZW5lcnMuIERldGVybWluZSB3aGF0IGlmIGFueSBsaXN0ZW5zIHdlIG5lZWQgdG8gc2VuZCBiZWZvcmUgZXhlY3V0aW5nIHRoZVxuICAgICAgICAgICAgICAgIC8vIHJlbW92YWxcbiAgICAgICAgICAgICAgICBpZiAoIXN1YnRyZWUuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gZm9sZCBvdmVyIG91ciBzdWJ0cmVlIGFuZCBjb2xsZWN0IHRoZSBsaXN0ZW5lcnMgdG8gc2VuZFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdWaWV3cyA9IHN5bmNUcmVlQ29sbGVjdERpc3RpbmN0Vmlld3NGb3JTdWJUcmVlXyhzdWJ0cmVlKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gT2ssIHdlJ3ZlIGNvbGxlY3RlZCBhbGwgdGhlIGxpc3RlbnMgd2UgbmVlZC4gU2V0IHRoZW0gdXAuXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmV3Vmlld3MubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZpZXcgPSBuZXdWaWV3c1tpXSwgbmV3UXVlcnkgPSB2aWV3LnF1ZXJ5O1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGlzdGVuZXIgPSBzeW5jVHJlZUNyZWF0ZUxpc3RlbmVyRm9yVmlld18oc3luY1RyZWUsIHZpZXcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3luY1RyZWUubGlzdGVuUHJvdmlkZXJfLnN0YXJ0TGlzdGVuaW5nKHN5bmNUcmVlUXVlcnlGb3JMaXN0ZW5pbmdfKG5ld1F1ZXJ5KSwgc3luY1RyZWVUYWdGb3JRdWVyeShzeW5jVHJlZSwgbmV3UXVlcnkpLCBsaXN0ZW5lci5oYXNoRm4sIGxpc3RlbmVyLm9uQ29tcGxldGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSB0aGVyZSdzIG5vdGhpbmcgYmVsb3cgdXMsIHNvIG5vdGhpbmcgd2UgbmVlZCB0byBzdGFydCBsaXN0ZW5pbmcgb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIElmIHdlIHJlbW92ZWQgYW55dGhpbmcgYW5kIHdlJ3JlIG5vdCBjb3ZlcmVkIGJ5IGEgaGlnaGVyIHVwIGxpc3Rlbiwgd2UgbmVlZCB0byBzdG9wIGxpc3RlbmluZyBvbiB0aGlzIHF1ZXJ5XG4gICAgICAgICAgICAvLyBUaGUgYWJvdmUgYmxvY2sgaGFzIHVzIGNvdmVyZWQgaW4gdGVybXMgb2YgbWFraW5nIHN1cmUgd2UncmUgc2V0IHVwIG9uIGxpc3RlbnMgbG93ZXIgaW4gdGhlIHRyZWUuXG4gICAgICAgICAgICAvLyBBbHNvLCBub3RlIHRoYXQgaWYgd2UgaGF2ZSBhIGNhbmNlbEVycm9yLCBpdCdzIGFscmVhZHkgYmVlbiByZW1vdmVkIGF0IHRoZSBwcm92aWRlciBsZXZlbC5cbiAgICAgICAgICAgIGlmICghY292ZXJlZCAmJiByZW1vdmVkLmxlbmd0aCA+IDAgJiYgIWNhbmNlbEVycm9yKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgd2UgcmVtb3ZlZCBhIGRlZmF1bHQsIHRoZW4gd2Ugd2VyZW4ndCBsaXN0ZW5pbmcgb24gYW55IG9mIHRoZSBvdGhlciBxdWVyaWVzIGhlcmUuIEp1c3QgY2FuY2VsIHRoZSBvbmVcbiAgICAgICAgICAgICAgICAvLyBkZWZhdWx0LiBPdGhlcndpc2UsIHdlIG5lZWQgdG8gaXRlcmF0ZSB0aHJvdWdoIGFuZCBjYW5jZWwgZWFjaCBpbmRpdmlkdWFsIHF1ZXJ5XG4gICAgICAgICAgICAgICAgaWYgKHJlbW92aW5nRGVmYXVsdCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBXZSBkb24ndCB0YWcgZGVmYXVsdCBsaXN0ZW5lcnNcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVmYXVsdFRhZyA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHN5bmNUcmVlLmxpc3RlblByb3ZpZGVyXy5zdG9wTGlzdGVuaW5nKHN5bmNUcmVlUXVlcnlGb3JMaXN0ZW5pbmdfKHF1ZXJ5KSwgZGVmYXVsdFRhZyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZW1vdmVkLmZvckVhY2goKHF1ZXJ5VG9SZW1vdmUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhZ1RvUmVtb3ZlID0gc3luY1RyZWUucXVlcnlUb1RhZ01hcC5nZXQoc3luY1RyZWVNYWtlUXVlcnlLZXlfKHF1ZXJ5VG9SZW1vdmUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN5bmNUcmVlLmxpc3RlblByb3ZpZGVyXy5zdG9wTGlzdGVuaW5nKHN5bmNUcmVlUXVlcnlGb3JMaXN0ZW5pbmdfKHF1ZXJ5VG9SZW1vdmUpLCB0YWdUb1JlbW92ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBOb3csIGNsZWFyIGFsbCBvZiB0aGUgdGFncyB3ZSdyZSB0cmFja2luZyBmb3IgdGhlIHJlbW92ZWQgbGlzdGVuc1xuICAgICAgICBzeW5jVHJlZVJlbW92ZVRhZ3NfKHN5bmNUcmVlLCByZW1vdmVkKTtcbiAgICB9XG4gICAgcmV0dXJuIGNhbmNlbEV2ZW50cztcbn1cbi8qKlxuICogQXBwbHkgbmV3IHNlcnZlciBkYXRhIGZvciB0aGUgc3BlY2lmaWVkIHRhZ2dlZCBxdWVyeS5cbiAqXG4gKiBAcmV0dXJucyBFdmVudHMgdG8gcmFpc2UuXG4gKi9cbmZ1bmN0aW9uIHN5bmNUcmVlQXBwbHlUYWdnZWRRdWVyeU92ZXJ3cml0ZShzeW5jVHJlZSwgcGF0aCwgc25hcCwgdGFnKSB7XG4gICAgY29uc3QgcXVlcnlLZXkgPSBzeW5jVHJlZVF1ZXJ5S2V5Rm9yVGFnXyhzeW5jVHJlZSwgdGFnKTtcbiAgICBpZiAocXVlcnlLZXkgIT0gbnVsbCkge1xuICAgICAgICBjb25zdCByID0gc3luY1RyZWVQYXJzZVF1ZXJ5S2V5XyhxdWVyeUtleSk7XG4gICAgICAgIGNvbnN0IHF1ZXJ5UGF0aCA9IHIucGF0aCwgcXVlcnlJZCA9IHIucXVlcnlJZDtcbiAgICAgICAgY29uc3QgcmVsYXRpdmVQYXRoID0gbmV3UmVsYXRpdmVQYXRoKHF1ZXJ5UGF0aCwgcGF0aCk7XG4gICAgICAgIGNvbnN0IG9wID0gbmV3IE92ZXJ3cml0ZShuZXdPcGVyYXRpb25Tb3VyY2VTZXJ2ZXJUYWdnZWRRdWVyeShxdWVyeUlkKSwgcmVsYXRpdmVQYXRoLCBzbmFwKTtcbiAgICAgICAgcmV0dXJuIHN5bmNUcmVlQXBwbHlUYWdnZWRPcGVyYXRpb25fKHN5bmNUcmVlLCBxdWVyeVBhdGgsIG9wKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIFF1ZXJ5IG11c3QgaGF2ZSBiZWVuIHJlbW92ZWQgYWxyZWFkeVxuICAgICAgICByZXR1cm4gW107XG4gICAgfVxufVxuLyoqXG4gKiBBcHBseSBzZXJ2ZXIgZGF0YSB0byBiZSBtZXJnZWQgaW4gZm9yIHRoZSBzcGVjaWZpZWQgdGFnZ2VkIHF1ZXJ5LlxuICpcbiAqIEByZXR1cm5zIEV2ZW50cyB0byByYWlzZS5cbiAqL1xuZnVuY3Rpb24gc3luY1RyZWVBcHBseVRhZ2dlZFF1ZXJ5TWVyZ2Uoc3luY1RyZWUsIHBhdGgsIGNoYW5nZWRDaGlsZHJlbiwgdGFnKSB7XG4gICAgY29uc3QgcXVlcnlLZXkgPSBzeW5jVHJlZVF1ZXJ5S2V5Rm9yVGFnXyhzeW5jVHJlZSwgdGFnKTtcbiAgICBpZiAocXVlcnlLZXkpIHtcbiAgICAgICAgY29uc3QgciA9IHN5bmNUcmVlUGFyc2VRdWVyeUtleV8ocXVlcnlLZXkpO1xuICAgICAgICBjb25zdCBxdWVyeVBhdGggPSByLnBhdGgsIHF1ZXJ5SWQgPSByLnF1ZXJ5SWQ7XG4gICAgICAgIGNvbnN0IHJlbGF0aXZlUGF0aCA9IG5ld1JlbGF0aXZlUGF0aChxdWVyeVBhdGgsIHBhdGgpO1xuICAgICAgICBjb25zdCBjaGFuZ2VUcmVlID0gSW1tdXRhYmxlVHJlZS5mcm9tT2JqZWN0KGNoYW5nZWRDaGlsZHJlbik7XG4gICAgICAgIGNvbnN0IG9wID0gbmV3IE1lcmdlKG5ld09wZXJhdGlvblNvdXJjZVNlcnZlclRhZ2dlZFF1ZXJ5KHF1ZXJ5SWQpLCByZWxhdGl2ZVBhdGgsIGNoYW5nZVRyZWUpO1xuICAgICAgICByZXR1cm4gc3luY1RyZWVBcHBseVRhZ2dlZE9wZXJhdGlvbl8oc3luY1RyZWUsIHF1ZXJ5UGF0aCwgb3ApO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gV2UndmUgYWxyZWFkeSByZW1vdmVkIHRoZSBxdWVyeS4gTm8gYmlnIGRlYWwsIGlnbm9yZSB0aGUgdXBkYXRlXG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG59XG4vKipcbiAqIEFkZCBhbiBldmVudCBjYWxsYmFjayBmb3IgdGhlIHNwZWNpZmllZCBxdWVyeS5cbiAqXG4gKiBAcmV0dXJucyBFdmVudHMgdG8gcmFpc2UuXG4gKi9cbmZ1bmN0aW9uIHN5bmNUcmVlQWRkRXZlbnRSZWdpc3RyYXRpb24oc3luY1RyZWUsIHF1ZXJ5LCBldmVudFJlZ2lzdHJhdGlvbiwgc2tpcFNldHVwTGlzdGVuZXIgPSBmYWxzZSkge1xuICAgIGNvbnN0IHBhdGggPSBxdWVyeS5fcGF0aDtcbiAgICBsZXQgc2VydmVyQ2FjaGUgPSBudWxsO1xuICAgIGxldCBmb3VuZEFuY2VzdG9yRGVmYXVsdFZpZXcgPSBmYWxzZTtcbiAgICAvLyBBbnkgY292ZXJpbmcgd3JpdGVzIHdpbGwgbmVjZXNzYXJpbHkgYmUgYXQgdGhlIHJvb3QsIHNvIHJlYWxseSBhbGwgd2UgbmVlZCB0byBmaW5kIGlzIHRoZSBzZXJ2ZXIgY2FjaGUuXG4gICAgLy8gQ29uc2lkZXIgb3B0aW1pemluZyB0aGlzIG9uY2UgdGhlcmUncyBhIGJldHRlciB1bmRlcnN0YW5kaW5nIG9mIHdoYXQgYWN0dWFsIGJlaGF2aW9yIHdpbGwgYmUuXG4gICAgc3luY1RyZWUuc3luY1BvaW50VHJlZV8uZm9yZWFjaE9uUGF0aChwYXRoLCAocGF0aFRvU3luY1BvaW50LCBzcCkgPT4ge1xuICAgICAgICBjb25zdCByZWxhdGl2ZVBhdGggPSBuZXdSZWxhdGl2ZVBhdGgocGF0aFRvU3luY1BvaW50LCBwYXRoKTtcbiAgICAgICAgc2VydmVyQ2FjaGUgPVxuICAgICAgICAgICAgc2VydmVyQ2FjaGUgfHwgc3luY1BvaW50R2V0Q29tcGxldGVTZXJ2ZXJDYWNoZShzcCwgcmVsYXRpdmVQYXRoKTtcbiAgICAgICAgZm91bmRBbmNlc3RvckRlZmF1bHRWaWV3ID1cbiAgICAgICAgICAgIGZvdW5kQW5jZXN0b3JEZWZhdWx0VmlldyB8fCBzeW5jUG9pbnRIYXNDb21wbGV0ZVZpZXcoc3ApO1xuICAgIH0pO1xuICAgIGxldCBzeW5jUG9pbnQgPSBzeW5jVHJlZS5zeW5jUG9pbnRUcmVlXy5nZXQocGF0aCk7XG4gICAgaWYgKCFzeW5jUG9pbnQpIHtcbiAgICAgICAgc3luY1BvaW50ID0gbmV3IFN5bmNQb2ludCgpO1xuICAgICAgICBzeW5jVHJlZS5zeW5jUG9pbnRUcmVlXyA9IHN5bmNUcmVlLnN5bmNQb2ludFRyZWVfLnNldChwYXRoLCBzeW5jUG9pbnQpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZm91bmRBbmNlc3RvckRlZmF1bHRWaWV3ID1cbiAgICAgICAgICAgIGZvdW5kQW5jZXN0b3JEZWZhdWx0VmlldyB8fCBzeW5jUG9pbnRIYXNDb21wbGV0ZVZpZXcoc3luY1BvaW50KTtcbiAgICAgICAgc2VydmVyQ2FjaGUgPVxuICAgICAgICAgICAgc2VydmVyQ2FjaGUgfHwgc3luY1BvaW50R2V0Q29tcGxldGVTZXJ2ZXJDYWNoZShzeW5jUG9pbnQsIG5ld0VtcHR5UGF0aCgpKTtcbiAgICB9XG4gICAgbGV0IHNlcnZlckNhY2hlQ29tcGxldGU7XG4gICAgaWYgKHNlcnZlckNhY2hlICE9IG51bGwpIHtcbiAgICAgICAgc2VydmVyQ2FjaGVDb21wbGV0ZSA9IHRydWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBzZXJ2ZXJDYWNoZUNvbXBsZXRlID0gZmFsc2U7XG4gICAgICAgIHNlcnZlckNhY2hlID0gQ2hpbGRyZW5Ob2RlLkVNUFRZX05PREU7XG4gICAgICAgIGNvbnN0IHN1YnRyZWUgPSBzeW5jVHJlZS5zeW5jUG9pbnRUcmVlXy5zdWJ0cmVlKHBhdGgpO1xuICAgICAgICBzdWJ0cmVlLmZvcmVhY2hDaGlsZCgoY2hpbGROYW1lLCBjaGlsZFN5bmNQb2ludCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY29tcGxldGVDYWNoZSA9IHN5bmNQb2ludEdldENvbXBsZXRlU2VydmVyQ2FjaGUoY2hpbGRTeW5jUG9pbnQsIG5ld0VtcHR5UGF0aCgpKTtcbiAgICAgICAgICAgIGlmIChjb21wbGV0ZUNhY2hlKSB7XG4gICAgICAgICAgICAgICAgc2VydmVyQ2FjaGUgPSBzZXJ2ZXJDYWNoZS51cGRhdGVJbW1lZGlhdGVDaGlsZChjaGlsZE5hbWUsIGNvbXBsZXRlQ2FjaGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29uc3Qgdmlld0FscmVhZHlFeGlzdHMgPSBzeW5jUG9pbnRWaWV3RXhpc3RzRm9yUXVlcnkoc3luY1BvaW50LCBxdWVyeSk7XG4gICAgaWYgKCF2aWV3QWxyZWFkeUV4aXN0cyAmJiAhcXVlcnkuX3F1ZXJ5UGFyYW1zLmxvYWRzQWxsRGF0YSgpKSB7XG4gICAgICAgIC8vIFdlIG5lZWQgdG8gdHJhY2sgYSB0YWcgZm9yIHRoaXMgcXVlcnlcbiAgICAgICAgY29uc3QgcXVlcnlLZXkgPSBzeW5jVHJlZU1ha2VRdWVyeUtleV8ocXVlcnkpO1xuICAgICAgICBhc3NlcnQoIXN5bmNUcmVlLnF1ZXJ5VG9UYWdNYXAuaGFzKHF1ZXJ5S2V5KSwgJ1ZpZXcgZG9lcyBub3QgZXhpc3QsIGJ1dCB3ZSBoYXZlIGEgdGFnJyk7XG4gICAgICAgIGNvbnN0IHRhZyA9IHN5bmNUcmVlR2V0TmV4dFF1ZXJ5VGFnXygpO1xuICAgICAgICBzeW5jVHJlZS5xdWVyeVRvVGFnTWFwLnNldChxdWVyeUtleSwgdGFnKTtcbiAgICAgICAgc3luY1RyZWUudGFnVG9RdWVyeU1hcC5zZXQodGFnLCBxdWVyeUtleSk7XG4gICAgfVxuICAgIGNvbnN0IHdyaXRlc0NhY2hlID0gd3JpdGVUcmVlQ2hpbGRXcml0ZXMoc3luY1RyZWUucGVuZGluZ1dyaXRlVHJlZV8sIHBhdGgpO1xuICAgIGxldCBldmVudHMgPSBzeW5jUG9pbnRBZGRFdmVudFJlZ2lzdHJhdGlvbihzeW5jUG9pbnQsIHF1ZXJ5LCBldmVudFJlZ2lzdHJhdGlvbiwgd3JpdGVzQ2FjaGUsIHNlcnZlckNhY2hlLCBzZXJ2ZXJDYWNoZUNvbXBsZXRlKTtcbiAgICBpZiAoIXZpZXdBbHJlYWR5RXhpc3RzICYmICFmb3VuZEFuY2VzdG9yRGVmYXVsdFZpZXcgJiYgIXNraXBTZXR1cExpc3RlbmVyKSB7XG4gICAgICAgIGNvbnN0IHZpZXcgPSBzeW5jUG9pbnRWaWV3Rm9yUXVlcnkoc3luY1BvaW50LCBxdWVyeSk7XG4gICAgICAgIGV2ZW50cyA9IGV2ZW50cy5jb25jYXQoc3luY1RyZWVTZXR1cExpc3RlbmVyXyhzeW5jVHJlZSwgcXVlcnksIHZpZXcpKTtcbiAgICB9XG4gICAgcmV0dXJuIGV2ZW50cztcbn1cbi8qKlxuICogUmV0dXJucyBhIGNvbXBsZXRlIGNhY2hlLCBpZiB3ZSBoYXZlIG9uZSwgb2YgdGhlIGRhdGEgYXQgYSBwYXJ0aWN1bGFyIHBhdGguIElmIHRoZSBsb2NhdGlvbiBkb2VzIG5vdCBoYXZlIGFcbiAqIGxpc3RlbmVyIGFib3ZlIGl0LCB3ZSB3aWxsIGdldCBhIGZhbHNlIFwibnVsbFwiLiBUaGlzIHNob3VsZG4ndCBiZSBhIHByb2JsZW0gYmVjYXVzZSB0cmFuc2FjdGlvbnMgd2lsbCBhbHdheXNcbiAqIGhhdmUgYSBsaXN0ZW5lciBhYm92ZSwgYW5kIGF0b21pYyBvcGVyYXRpb25zIHdvdWxkIGNvcnJlY3RseSBzaG93IGEgaml0dGVyIG9mIDxpbmNyZW1lbnQgdmFsdWU+IC0+XG4gKiAgICAgPGluY3JlbWVudGVkIHRvdGFsPiBhcyB0aGUgd3JpdGUgaXMgYXBwbGllZCBsb2NhbGx5IGFuZCB0aGVuIGFja25vd2xlZGdlZCBhdCB0aGUgc2VydmVyLlxuICpcbiAqIE5vdGU6IHRoaXMgbWV0aG9kIHdpbGwgKmluY2x1ZGUqIGhpZGRlbiB3cml0ZXMgZnJvbSB0cmFuc2FjdGlvbiB3aXRoIGFwcGx5TG9jYWxseSBzZXQgdG8gZmFsc2UuXG4gKlxuICogQHBhcmFtIHBhdGggLSBUaGUgcGF0aCB0byB0aGUgZGF0YSB3ZSB3YW50XG4gKiBAcGFyYW0gd3JpdGVJZHNUb0V4Y2x1ZGUgLSBBIHNwZWNpZmljIHNldCB0byBiZSBleGNsdWRlZFxuICovXG5mdW5jdGlvbiBzeW5jVHJlZUNhbGNDb21wbGV0ZUV2ZW50Q2FjaGUoc3luY1RyZWUsIHBhdGgsIHdyaXRlSWRzVG9FeGNsdWRlKSB7XG4gICAgY29uc3QgaW5jbHVkZUhpZGRlblNldHMgPSB0cnVlO1xuICAgIGNvbnN0IHdyaXRlVHJlZSA9IHN5bmNUcmVlLnBlbmRpbmdXcml0ZVRyZWVfO1xuICAgIGNvbnN0IHNlcnZlckNhY2hlID0gc3luY1RyZWUuc3luY1BvaW50VHJlZV8uZmluZE9uUGF0aChwYXRoLCAocGF0aFNvRmFyLCBzeW5jUG9pbnQpID0+IHtcbiAgICAgICAgY29uc3QgcmVsYXRpdmVQYXRoID0gbmV3UmVsYXRpdmVQYXRoKHBhdGhTb0ZhciwgcGF0aCk7XG4gICAgICAgIGNvbnN0IHNlcnZlckNhY2hlID0gc3luY1BvaW50R2V0Q29tcGxldGVTZXJ2ZXJDYWNoZShzeW5jUG9pbnQsIHJlbGF0aXZlUGF0aCk7XG4gICAgICAgIGlmIChzZXJ2ZXJDYWNoZSkge1xuICAgICAgICAgICAgcmV0dXJuIHNlcnZlckNhY2hlO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHdyaXRlVHJlZUNhbGNDb21wbGV0ZUV2ZW50Q2FjaGUod3JpdGVUcmVlLCBwYXRoLCBzZXJ2ZXJDYWNoZSwgd3JpdGVJZHNUb0V4Y2x1ZGUsIGluY2x1ZGVIaWRkZW5TZXRzKTtcbn1cbmZ1bmN0aW9uIHN5bmNUcmVlR2V0U2VydmVyVmFsdWUoc3luY1RyZWUsIHF1ZXJ5KSB7XG4gICAgY29uc3QgcGF0aCA9IHF1ZXJ5Ll9wYXRoO1xuICAgIGxldCBzZXJ2ZXJDYWNoZSA9IG51bGw7XG4gICAgLy8gQW55IGNvdmVyaW5nIHdyaXRlcyB3aWxsIG5lY2Vzc2FyaWx5IGJlIGF0IHRoZSByb290LCBzbyByZWFsbHkgYWxsIHdlIG5lZWQgdG8gZmluZCBpcyB0aGUgc2VydmVyIGNhY2hlLlxuICAgIC8vIENvbnNpZGVyIG9wdGltaXppbmcgdGhpcyBvbmNlIHRoZXJlJ3MgYSBiZXR0ZXIgdW5kZXJzdGFuZGluZyBvZiB3aGF0IGFjdHVhbCBiZWhhdmlvciB3aWxsIGJlLlxuICAgIHN5bmNUcmVlLnN5bmNQb2ludFRyZWVfLmZvcmVhY2hPblBhdGgocGF0aCwgKHBhdGhUb1N5bmNQb2ludCwgc3ApID0+IHtcbiAgICAgICAgY29uc3QgcmVsYXRpdmVQYXRoID0gbmV3UmVsYXRpdmVQYXRoKHBhdGhUb1N5bmNQb2ludCwgcGF0aCk7XG4gICAgICAgIHNlcnZlckNhY2hlID1cbiAgICAgICAgICAgIHNlcnZlckNhY2hlIHx8IHN5bmNQb2ludEdldENvbXBsZXRlU2VydmVyQ2FjaGUoc3AsIHJlbGF0aXZlUGF0aCk7XG4gICAgfSk7XG4gICAgbGV0IHN5bmNQb2ludCA9IHN5bmNUcmVlLnN5bmNQb2ludFRyZWVfLmdldChwYXRoKTtcbiAgICBpZiAoIXN5bmNQb2ludCkge1xuICAgICAgICBzeW5jUG9pbnQgPSBuZXcgU3luY1BvaW50KCk7XG4gICAgICAgIHN5bmNUcmVlLnN5bmNQb2ludFRyZWVfID0gc3luY1RyZWUuc3luY1BvaW50VHJlZV8uc2V0KHBhdGgsIHN5bmNQb2ludCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBzZXJ2ZXJDYWNoZSA9XG4gICAgICAgICAgICBzZXJ2ZXJDYWNoZSB8fCBzeW5jUG9pbnRHZXRDb21wbGV0ZVNlcnZlckNhY2hlKHN5bmNQb2ludCwgbmV3RW1wdHlQYXRoKCkpO1xuICAgIH1cbiAgICBjb25zdCBzZXJ2ZXJDYWNoZUNvbXBsZXRlID0gc2VydmVyQ2FjaGUgIT0gbnVsbDtcbiAgICBjb25zdCBzZXJ2ZXJDYWNoZU5vZGUgPSBzZXJ2ZXJDYWNoZUNvbXBsZXRlXG4gICAgICAgID8gbmV3IENhY2hlTm9kZShzZXJ2ZXJDYWNoZSwgdHJ1ZSwgZmFsc2UpXG4gICAgICAgIDogbnVsbDtcbiAgICBjb25zdCB3cml0ZXNDYWNoZSA9IHdyaXRlVHJlZUNoaWxkV3JpdGVzKHN5bmNUcmVlLnBlbmRpbmdXcml0ZVRyZWVfLCBxdWVyeS5fcGF0aCk7XG4gICAgY29uc3QgdmlldyA9IHN5bmNQb2ludEdldFZpZXcoc3luY1BvaW50LCBxdWVyeSwgd3JpdGVzQ2FjaGUsIHNlcnZlckNhY2hlQ29tcGxldGUgPyBzZXJ2ZXJDYWNoZU5vZGUuZ2V0Tm9kZSgpIDogQ2hpbGRyZW5Ob2RlLkVNUFRZX05PREUsIHNlcnZlckNhY2hlQ29tcGxldGUpO1xuICAgIHJldHVybiB2aWV3R2V0Q29tcGxldGVOb2RlKHZpZXcpO1xufVxuLyoqXG4gKiBBIGhlbHBlciBtZXRob2QgdGhhdCB2aXNpdHMgYWxsIGRlc2NlbmRhbnQgYW5kIGFuY2VzdG9yIFN5bmNQb2ludHMsIGFwcGx5aW5nIHRoZSBvcGVyYXRpb24uXG4gKlxuICogTk9URVM6XG4gKiAtIERlc2NlbmRhbnQgU3luY1BvaW50cyB3aWxsIGJlIHZpc2l0ZWQgZmlyc3QgKHNpbmNlIHdlIHJhaXNlIGV2ZW50cyBkZXB0aC1maXJzdCkuXG4gKlxuICogLSBXZSBjYWxsIGFwcGx5T3BlcmF0aW9uKCkgb24gZWFjaCBTeW5jUG9pbnQgcGFzc2luZyB0aHJlZSB0aGluZ3M6XG4gKiAgIDEuIEEgdmVyc2lvbiBvZiB0aGUgT3BlcmF0aW9uIHRoYXQgaGFzIGJlZW4gbWFkZSByZWxhdGl2ZSB0byB0aGUgU3luY1BvaW50IGxvY2F0aW9uLlxuICogICAyLiBBIFdyaXRlVHJlZVJlZiBvZiBhbnkgd3JpdGVzIHdlIGhhdmUgY2FjaGVkIGF0IHRoZSBTeW5jUG9pbnQgbG9jYXRpb24uXG4gKiAgIDMuIEEgc25hcHNob3QgTm9kZSB3aXRoIGNhY2hlZCBzZXJ2ZXIgZGF0YSwgaWYgd2UgaGF2ZSBpdC5cbiAqXG4gKiAtIFdlIGNvbmNhdGVuYXRlIGFsbCBvZiB0aGUgZXZlbnRzIHJldHVybmVkIGJ5IGVhY2ggU3luY1BvaW50IGFuZCByZXR1cm4gdGhlIHJlc3VsdC5cbiAqL1xuZnVuY3Rpb24gc3luY1RyZWVBcHBseU9wZXJhdGlvblRvU3luY1BvaW50c18oc3luY1RyZWUsIG9wZXJhdGlvbikge1xuICAgIHJldHVybiBzeW5jVHJlZUFwcGx5T3BlcmF0aW9uSGVscGVyXyhvcGVyYXRpb24sIHN5bmNUcmVlLnN5bmNQb2ludFRyZWVfLCBcbiAgICAvKnNlcnZlckNhY2hlPSovIG51bGwsIHdyaXRlVHJlZUNoaWxkV3JpdGVzKHN5bmNUcmVlLnBlbmRpbmdXcml0ZVRyZWVfLCBuZXdFbXB0eVBhdGgoKSkpO1xufVxuLyoqXG4gKiBSZWN1cnNpdmUgaGVscGVyIGZvciBhcHBseU9wZXJhdGlvblRvU3luY1BvaW50c19cbiAqL1xuZnVuY3Rpb24gc3luY1RyZWVBcHBseU9wZXJhdGlvbkhlbHBlcl8ob3BlcmF0aW9uLCBzeW5jUG9pbnRUcmVlLCBzZXJ2ZXJDYWNoZSwgd3JpdGVzQ2FjaGUpIHtcbiAgICBpZiAocGF0aElzRW1wdHkob3BlcmF0aW9uLnBhdGgpKSB7XG4gICAgICAgIHJldHVybiBzeW5jVHJlZUFwcGx5T3BlcmF0aW9uRGVzY2VuZGFudHNIZWxwZXJfKG9wZXJhdGlvbiwgc3luY1BvaW50VHJlZSwgc2VydmVyQ2FjaGUsIHdyaXRlc0NhY2hlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IHN5bmNQb2ludCA9IHN5bmNQb2ludFRyZWUuZ2V0KG5ld0VtcHR5UGF0aCgpKTtcbiAgICAgICAgLy8gSWYgd2UgZG9uJ3QgaGF2ZSBjYWNoZWQgc2VydmVyIGRhdGEsIHNlZSBpZiB3ZSBjYW4gZ2V0IGl0IGZyb20gdGhpcyBTeW5jUG9pbnQuXG4gICAgICAgIGlmIChzZXJ2ZXJDYWNoZSA9PSBudWxsICYmIHN5bmNQb2ludCAhPSBudWxsKSB7XG4gICAgICAgICAgICBzZXJ2ZXJDYWNoZSA9IHN5bmNQb2ludEdldENvbXBsZXRlU2VydmVyQ2FjaGUoc3luY1BvaW50LCBuZXdFbXB0eVBhdGgoKSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGV2ZW50cyA9IFtdO1xuICAgICAgICBjb25zdCBjaGlsZE5hbWUgPSBwYXRoR2V0RnJvbnQob3BlcmF0aW9uLnBhdGgpO1xuICAgICAgICBjb25zdCBjaGlsZE9wZXJhdGlvbiA9IG9wZXJhdGlvbi5vcGVyYXRpb25Gb3JDaGlsZChjaGlsZE5hbWUpO1xuICAgICAgICBjb25zdCBjaGlsZFRyZWUgPSBzeW5jUG9pbnRUcmVlLmNoaWxkcmVuLmdldChjaGlsZE5hbWUpO1xuICAgICAgICBpZiAoY2hpbGRUcmVlICYmIGNoaWxkT3BlcmF0aW9uKSB7XG4gICAgICAgICAgICBjb25zdCBjaGlsZFNlcnZlckNhY2hlID0gc2VydmVyQ2FjaGVcbiAgICAgICAgICAgICAgICA/IHNlcnZlckNhY2hlLmdldEltbWVkaWF0ZUNoaWxkKGNoaWxkTmFtZSlcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICBjb25zdCBjaGlsZFdyaXRlc0NhY2hlID0gd3JpdGVUcmVlUmVmQ2hpbGQod3JpdGVzQ2FjaGUsIGNoaWxkTmFtZSk7XG4gICAgICAgICAgICBldmVudHMgPSBldmVudHMuY29uY2F0KHN5bmNUcmVlQXBwbHlPcGVyYXRpb25IZWxwZXJfKGNoaWxkT3BlcmF0aW9uLCBjaGlsZFRyZWUsIGNoaWxkU2VydmVyQ2FjaGUsIGNoaWxkV3JpdGVzQ2FjaGUpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3luY1BvaW50KSB7XG4gICAgICAgICAgICBldmVudHMgPSBldmVudHMuY29uY2F0KHN5bmNQb2ludEFwcGx5T3BlcmF0aW9uKHN5bmNQb2ludCwgb3BlcmF0aW9uLCB3cml0ZXNDYWNoZSwgc2VydmVyQ2FjaGUpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZXZlbnRzO1xuICAgIH1cbn1cbi8qKlxuICogUmVjdXJzaXZlIGhlbHBlciBmb3IgYXBwbHlPcGVyYXRpb25Ub1N5bmNQb2ludHNfXG4gKi9cbmZ1bmN0aW9uIHN5bmNUcmVlQXBwbHlPcGVyYXRpb25EZXNjZW5kYW50c0hlbHBlcl8ob3BlcmF0aW9uLCBzeW5jUG9pbnRUcmVlLCBzZXJ2ZXJDYWNoZSwgd3JpdGVzQ2FjaGUpIHtcbiAgICBjb25zdCBzeW5jUG9pbnQgPSBzeW5jUG9pbnRUcmVlLmdldChuZXdFbXB0eVBhdGgoKSk7XG4gICAgLy8gSWYgd2UgZG9uJ3QgaGF2ZSBjYWNoZWQgc2VydmVyIGRhdGEsIHNlZSBpZiB3ZSBjYW4gZ2V0IGl0IGZyb20gdGhpcyBTeW5jUG9pbnQuXG4gICAgaWYgKHNlcnZlckNhY2hlID09IG51bGwgJiYgc3luY1BvaW50ICE9IG51bGwpIHtcbiAgICAgICAgc2VydmVyQ2FjaGUgPSBzeW5jUG9pbnRHZXRDb21wbGV0ZVNlcnZlckNhY2hlKHN5bmNQb2ludCwgbmV3RW1wdHlQYXRoKCkpO1xuICAgIH1cbiAgICBsZXQgZXZlbnRzID0gW107XG4gICAgc3luY1BvaW50VHJlZS5jaGlsZHJlbi5pbm9yZGVyVHJhdmVyc2FsKChjaGlsZE5hbWUsIGNoaWxkVHJlZSkgPT4ge1xuICAgICAgICBjb25zdCBjaGlsZFNlcnZlckNhY2hlID0gc2VydmVyQ2FjaGVcbiAgICAgICAgICAgID8gc2VydmVyQ2FjaGUuZ2V0SW1tZWRpYXRlQ2hpbGQoY2hpbGROYW1lKVxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICBjb25zdCBjaGlsZFdyaXRlc0NhY2hlID0gd3JpdGVUcmVlUmVmQ2hpbGQod3JpdGVzQ2FjaGUsIGNoaWxkTmFtZSk7XG4gICAgICAgIGNvbnN0IGNoaWxkT3BlcmF0aW9uID0gb3BlcmF0aW9uLm9wZXJhdGlvbkZvckNoaWxkKGNoaWxkTmFtZSk7XG4gICAgICAgIGlmIChjaGlsZE9wZXJhdGlvbikge1xuICAgICAgICAgICAgZXZlbnRzID0gZXZlbnRzLmNvbmNhdChzeW5jVHJlZUFwcGx5T3BlcmF0aW9uRGVzY2VuZGFudHNIZWxwZXJfKGNoaWxkT3BlcmF0aW9uLCBjaGlsZFRyZWUsIGNoaWxkU2VydmVyQ2FjaGUsIGNoaWxkV3JpdGVzQ2FjaGUpKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChzeW5jUG9pbnQpIHtcbiAgICAgICAgZXZlbnRzID0gZXZlbnRzLmNvbmNhdChzeW5jUG9pbnRBcHBseU9wZXJhdGlvbihzeW5jUG9pbnQsIG9wZXJhdGlvbiwgd3JpdGVzQ2FjaGUsIHNlcnZlckNhY2hlKSk7XG4gICAgfVxuICAgIHJldHVybiBldmVudHM7XG59XG5mdW5jdGlvbiBzeW5jVHJlZUNyZWF0ZUxpc3RlbmVyRm9yVmlld18oc3luY1RyZWUsIHZpZXcpIHtcbiAgICBjb25zdCBxdWVyeSA9IHZpZXcucXVlcnk7XG4gICAgY29uc3QgdGFnID0gc3luY1RyZWVUYWdGb3JRdWVyeShzeW5jVHJlZSwgcXVlcnkpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGhhc2hGbjogKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2FjaGUgPSB2aWV3R2V0U2VydmVyQ2FjaGUodmlldykgfHwgQ2hpbGRyZW5Ob2RlLkVNUFRZX05PREU7XG4gICAgICAgICAgICByZXR1cm4gY2FjaGUuaGFzaCgpO1xuICAgICAgICB9LFxuICAgICAgICBvbkNvbXBsZXRlOiAoc3RhdHVzKSA9PiB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzID09PSAnb2snKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRhZykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3luY1RyZWVBcHBseVRhZ2dlZExpc3RlbkNvbXBsZXRlKHN5bmNUcmVlLCBxdWVyeS5fcGF0aCwgdGFnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzeW5jVHJlZUFwcGx5TGlzdGVuQ29tcGxldGUoc3luY1RyZWUsIHF1ZXJ5Ll9wYXRoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBJZiBhIGxpc3RlbiBmYWlsZWQsIGtpbGwgYWxsIG9mIHRoZSBsaXN0ZW5lcnMgaGVyZSwgbm90IGp1c3QgdGhlIG9uZSB0aGF0IHRyaWdnZXJlZCB0aGUgZXJyb3IuXG4gICAgICAgICAgICAgICAgLy8gTm90ZSB0aGF0IHRoaXMgbWF5IG5lZWQgdG8gYmUgc2NvcGVkIHRvIGp1c3QgdGhpcyBsaXN0ZW5lciBpZiB3ZSBjaGFuZ2UgcGVybWlzc2lvbnMgb24gZmlsdGVyZWQgY2hpbGRyZW5cbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvciA9IGVycm9yRm9yU2VydmVyQ29kZShzdGF0dXMsIHF1ZXJ5KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3luY1RyZWVSZW1vdmVFdmVudFJlZ2lzdHJhdGlvbihzeW5jVHJlZSwgcXVlcnksIFxuICAgICAgICAgICAgICAgIC8qZXZlbnRSZWdpc3RyYXRpb24qLyBudWxsLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xufVxuLyoqXG4gKiBSZXR1cm4gdGhlIHRhZyBhc3NvY2lhdGVkIHdpdGggdGhlIGdpdmVuIHF1ZXJ5LlxuICovXG5mdW5jdGlvbiBzeW5jVHJlZVRhZ0ZvclF1ZXJ5KHN5bmNUcmVlLCBxdWVyeSkge1xuICAgIGNvbnN0IHF1ZXJ5S2V5ID0gc3luY1RyZWVNYWtlUXVlcnlLZXlfKHF1ZXJ5KTtcbiAgICByZXR1cm4gc3luY1RyZWUucXVlcnlUb1RhZ01hcC5nZXQocXVlcnlLZXkpO1xufVxuLyoqXG4gKiBHaXZlbiBhIHF1ZXJ5LCBjb21wdXRlcyBhIFwicXVlcnlLZXlcIiBzdWl0YWJsZSBmb3IgdXNlIGluIG91ciBxdWVyeVRvVGFnTWFwXy5cbiAqL1xuZnVuY3Rpb24gc3luY1RyZWVNYWtlUXVlcnlLZXlfKHF1ZXJ5KSB7XG4gICAgcmV0dXJuIHF1ZXJ5Ll9wYXRoLnRvU3RyaW5nKCkgKyAnJCcgKyBxdWVyeS5fcXVlcnlJZGVudGlmaWVyO1xufVxuLyoqXG4gKiBSZXR1cm4gdGhlIHF1ZXJ5IGFzc29jaWF0ZWQgd2l0aCB0aGUgZ2l2ZW4gdGFnLCBpZiB3ZSBoYXZlIG9uZVxuICovXG5mdW5jdGlvbiBzeW5jVHJlZVF1ZXJ5S2V5Rm9yVGFnXyhzeW5jVHJlZSwgdGFnKSB7XG4gICAgcmV0dXJuIHN5bmNUcmVlLnRhZ1RvUXVlcnlNYXAuZ2V0KHRhZyk7XG59XG4vKipcbiAqIEdpdmVuIGEgcXVlcnlLZXkgKGNyZWF0ZWQgYnkgbWFrZVF1ZXJ5S2V5KSwgcGFyc2UgaXQgYmFjayBpbnRvIGEgcGF0aCBhbmQgcXVlcnlJZC5cbiAqL1xuZnVuY3Rpb24gc3luY1RyZWVQYXJzZVF1ZXJ5S2V5XyhxdWVyeUtleSkge1xuICAgIGNvbnN0IHNwbGl0SW5kZXggPSBxdWVyeUtleS5pbmRleE9mKCckJyk7XG4gICAgYXNzZXJ0KHNwbGl0SW5kZXggIT09IC0xICYmIHNwbGl0SW5kZXggPCBxdWVyeUtleS5sZW5ndGggLSAxLCAnQmFkIHF1ZXJ5S2V5LicpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHF1ZXJ5SWQ6IHF1ZXJ5S2V5LnN1YnN0cihzcGxpdEluZGV4ICsgMSksXG4gICAgICAgIHBhdGg6IG5ldyBQYXRoKHF1ZXJ5S2V5LnN1YnN0cigwLCBzcGxpdEluZGV4KSlcbiAgICB9O1xufVxuLyoqXG4gKiBBIGhlbHBlciBtZXRob2QgdG8gYXBwbHkgdGFnZ2VkIG9wZXJhdGlvbnNcbiAqL1xuZnVuY3Rpb24gc3luY1RyZWVBcHBseVRhZ2dlZE9wZXJhdGlvbl8oc3luY1RyZWUsIHF1ZXJ5UGF0aCwgb3BlcmF0aW9uKSB7XG4gICAgY29uc3Qgc3luY1BvaW50ID0gc3luY1RyZWUuc3luY1BvaW50VHJlZV8uZ2V0KHF1ZXJ5UGF0aCk7XG4gICAgYXNzZXJ0KHN5bmNQb2ludCwgXCJNaXNzaW5nIHN5bmMgcG9pbnQgZm9yIHF1ZXJ5IHRhZyB0aGF0IHdlJ3JlIHRyYWNraW5nXCIpO1xuICAgIGNvbnN0IHdyaXRlc0NhY2hlID0gd3JpdGVUcmVlQ2hpbGRXcml0ZXMoc3luY1RyZWUucGVuZGluZ1dyaXRlVHJlZV8sIHF1ZXJ5UGF0aCk7XG4gICAgcmV0dXJuIHN5bmNQb2ludEFwcGx5T3BlcmF0aW9uKHN5bmNQb2ludCwgb3BlcmF0aW9uLCB3cml0ZXNDYWNoZSwgbnVsbCk7XG59XG4vKipcbiAqIFRoaXMgY29sbGFwc2VzIG11bHRpcGxlIHVuZmlsdGVyZWQgdmlld3MgaW50byBhIHNpbmdsZSB2aWV3LCBzaW5jZSB3ZSBvbmx5IG5lZWQgYSBzaW5nbGVcbiAqIGxpc3RlbmVyIGZvciB0aGVtLlxuICovXG5mdW5jdGlvbiBzeW5jVHJlZUNvbGxlY3REaXN0aW5jdFZpZXdzRm9yU3ViVHJlZV8oc3VidHJlZSkge1xuICAgIHJldHVybiBzdWJ0cmVlLmZvbGQoKHJlbGF0aXZlUGF0aCwgbWF5YmVDaGlsZFN5bmNQb2ludCwgY2hpbGRNYXApID0+IHtcbiAgICAgICAgaWYgKG1heWJlQ2hpbGRTeW5jUG9pbnQgJiYgc3luY1BvaW50SGFzQ29tcGxldGVWaWV3KG1heWJlQ2hpbGRTeW5jUG9pbnQpKSB7XG4gICAgICAgICAgICBjb25zdCBjb21wbGV0ZVZpZXcgPSBzeW5jUG9pbnRHZXRDb21wbGV0ZVZpZXcobWF5YmVDaGlsZFN5bmNQb2ludCk7XG4gICAgICAgICAgICByZXR1cm4gW2NvbXBsZXRlVmlld107XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBObyBjb21wbGV0ZSB2aWV3IGhlcmUsIGZsYXR0ZW4gYW55IGRlZXBlciBsaXN0ZW5zIGludG8gYW4gYXJyYXlcbiAgICAgICAgICAgIGxldCB2aWV3cyA9IFtdO1xuICAgICAgICAgICAgaWYgKG1heWJlQ2hpbGRTeW5jUG9pbnQpIHtcbiAgICAgICAgICAgICAgICB2aWV3cyA9IHN5bmNQb2ludEdldFF1ZXJ5Vmlld3MobWF5YmVDaGlsZFN5bmNQb2ludCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlYWNoKGNoaWxkTWFwLCAoX2tleSwgY2hpbGRWaWV3cykgPT4ge1xuICAgICAgICAgICAgICAgIHZpZXdzID0gdmlld3MuY29uY2F0KGNoaWxkVmlld3MpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdmlld3M7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbi8qKlxuICogTm9ybWFsaXplcyBhIHF1ZXJ5IHRvIGEgcXVlcnkgd2Ugc2VuZCB0aGUgc2VydmVyIGZvciBsaXN0ZW5pbmdcbiAqXG4gKiBAcmV0dXJucyBUaGUgbm9ybWFsaXplZCBxdWVyeVxuICovXG5mdW5jdGlvbiBzeW5jVHJlZVF1ZXJ5Rm9yTGlzdGVuaW5nXyhxdWVyeSkge1xuICAgIGlmIChxdWVyeS5fcXVlcnlQYXJhbXMubG9hZHNBbGxEYXRhKCkgJiYgIXF1ZXJ5Ll9xdWVyeVBhcmFtcy5pc0RlZmF1bHQoKSkge1xuICAgICAgICAvLyBXZSB0cmVhdCBxdWVyaWVzIHRoYXQgbG9hZCBhbGwgZGF0YSBhcyBkZWZhdWx0IHF1ZXJpZXNcbiAgICAgICAgLy8gQ2FzdCBpcyBuZWNlc3NhcnkgYmVjYXVzZSByZWYoKSB0ZWNobmljYWxseSByZXR1cm5zIEZpcmViYXNlIHdoaWNoIGlzIGFjdHVhbGx5IGZiLmFwaS5GaXJlYmFzZSB3aGljaCBpbmhlcml0c1xuICAgICAgICAvLyBmcm9tIFF1ZXJ5XG4gICAgICAgIHJldHVybiBuZXcgKHN5bmNUcmVlR2V0UmVmZXJlbmNlQ29uc3RydWN0b3IoKSkocXVlcnkuX3JlcG8sIHF1ZXJ5Ll9wYXRoKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBxdWVyeTtcbiAgICB9XG59XG5mdW5jdGlvbiBzeW5jVHJlZVJlbW92ZVRhZ3NfKHN5bmNUcmVlLCBxdWVyaWVzKSB7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBxdWVyaWVzLmxlbmd0aDsgKytqKSB7XG4gICAgICAgIGNvbnN0IHJlbW92ZWRRdWVyeSA9IHF1ZXJpZXNbal07XG4gICAgICAgIGlmICghcmVtb3ZlZFF1ZXJ5Ll9xdWVyeVBhcmFtcy5sb2Fkc0FsbERhdGEoKSkge1xuICAgICAgICAgICAgLy8gV2Ugc2hvdWxkIGhhdmUgYSB0YWcgZm9yIHRoaXNcbiAgICAgICAgICAgIGNvbnN0IHJlbW92ZWRRdWVyeUtleSA9IHN5bmNUcmVlTWFrZVF1ZXJ5S2V5XyhyZW1vdmVkUXVlcnkpO1xuICAgICAgICAgICAgY29uc3QgcmVtb3ZlZFF1ZXJ5VGFnID0gc3luY1RyZWUucXVlcnlUb1RhZ01hcC5nZXQocmVtb3ZlZFF1ZXJ5S2V5KTtcbiAgICAgICAgICAgIHN5bmNUcmVlLnF1ZXJ5VG9UYWdNYXAuZGVsZXRlKHJlbW92ZWRRdWVyeUtleSk7XG4gICAgICAgICAgICBzeW5jVHJlZS50YWdUb1F1ZXJ5TWFwLmRlbGV0ZShyZW1vdmVkUXVlcnlUYWcpO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBTdGF0aWMgYWNjZXNzb3IgZm9yIHF1ZXJ5IHRhZ3MuXG4gKi9cbmZ1bmN0aW9uIHN5bmNUcmVlR2V0TmV4dFF1ZXJ5VGFnXygpIHtcbiAgICByZXR1cm4gc3luY1RyZWVOZXh0UXVlcnlUYWdfKys7XG59XG4vKipcbiAqIEZvciBhIGdpdmVuIG5ldyBsaXN0ZW4sIG1hbmFnZSB0aGUgZGUtZHVwbGljYXRpb24gb2Ygb3V0c3RhbmRpbmcgc3Vic2NyaXB0aW9ucy5cbiAqXG4gKiBAcmV0dXJucyBUaGlzIG1ldGhvZCBjYW4gcmV0dXJuIGV2ZW50cyB0byBzdXBwb3J0IHN5bmNocm9ub3VzIGRhdGEgc291cmNlc1xuICovXG5mdW5jdGlvbiBzeW5jVHJlZVNldHVwTGlzdGVuZXJfKHN5bmNUcmVlLCBxdWVyeSwgdmlldykge1xuICAgIGNvbnN0IHBhdGggPSBxdWVyeS5fcGF0aDtcbiAgICBjb25zdCB0YWcgPSBzeW5jVHJlZVRhZ0ZvclF1ZXJ5KHN5bmNUcmVlLCBxdWVyeSk7XG4gICAgY29uc3QgbGlzdGVuZXIgPSBzeW5jVHJlZUNyZWF0ZUxpc3RlbmVyRm9yVmlld18oc3luY1RyZWUsIHZpZXcpO1xuICAgIGNvbnN0IGV2ZW50cyA9IHN5bmNUcmVlLmxpc3RlblByb3ZpZGVyXy5zdGFydExpc3RlbmluZyhzeW5jVHJlZVF1ZXJ5Rm9yTGlzdGVuaW5nXyhxdWVyeSksIHRhZywgbGlzdGVuZXIuaGFzaEZuLCBsaXN0ZW5lci5vbkNvbXBsZXRlKTtcbiAgICBjb25zdCBzdWJ0cmVlID0gc3luY1RyZWUuc3luY1BvaW50VHJlZV8uc3VidHJlZShwYXRoKTtcbiAgICAvLyBUaGUgcm9vdCBvZiB0aGlzIHN1YnRyZWUgaGFzIG91ciBxdWVyeS4gV2UncmUgaGVyZSBiZWNhdXNlIHdlIGRlZmluaXRlbHkgbmVlZCB0byBzZW5kIGEgbGlzdGVuIGZvciB0aGF0LCBidXQgd2VcbiAgICAvLyBtYXkgbmVlZCB0byBzaGFkb3cgb3RoZXIgbGlzdGVucyBhcyB3ZWxsLlxuICAgIGlmICh0YWcpIHtcbiAgICAgICAgYXNzZXJ0KCFzeW5jUG9pbnRIYXNDb21wbGV0ZVZpZXcoc3VidHJlZS52YWx1ZSksIFwiSWYgd2UncmUgYWRkaW5nIGEgcXVlcnksIGl0IHNob3VsZG4ndCBiZSBzaGFkb3dlZFwiKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIFNoYWRvdyBldmVyeXRoaW5nIGF0IG9yIGJlbG93IHRoaXMgbG9jYXRpb24sIHRoaXMgaXMgYSBkZWZhdWx0IGxpc3RlbmVyLlxuICAgICAgICBjb25zdCBxdWVyaWVzVG9TdG9wID0gc3VidHJlZS5mb2xkKChyZWxhdGl2ZVBhdGgsIG1heWJlQ2hpbGRTeW5jUG9pbnQsIGNoaWxkTWFwKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXBhdGhJc0VtcHR5KHJlbGF0aXZlUGF0aCkgJiZcbiAgICAgICAgICAgICAgICBtYXliZUNoaWxkU3luY1BvaW50ICYmXG4gICAgICAgICAgICAgICAgc3luY1BvaW50SGFzQ29tcGxldGVWaWV3KG1heWJlQ2hpbGRTeW5jUG9pbnQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtzeW5jUG9pbnRHZXRDb21wbGV0ZVZpZXcobWF5YmVDaGlsZFN5bmNQb2ludCkucXVlcnldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gTm8gZGVmYXVsdCBsaXN0ZW5lciBoZXJlLCBmbGF0dGVuIGFueSBkZWVwZXIgcXVlcmllcyBpbnRvIGFuIGFycmF5XG4gICAgICAgICAgICAgICAgbGV0IHF1ZXJpZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBpZiAobWF5YmVDaGlsZFN5bmNQb2ludCkge1xuICAgICAgICAgICAgICAgICAgICBxdWVyaWVzID0gcXVlcmllcy5jb25jYXQoc3luY1BvaW50R2V0UXVlcnlWaWV3cyhtYXliZUNoaWxkU3luY1BvaW50KS5tYXAodmlldyA9PiB2aWV3LnF1ZXJ5KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVhY2goY2hpbGRNYXAsIChfa2V5LCBjaGlsZFF1ZXJpZXMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcmllcyA9IHF1ZXJpZXMuY29uY2F0KGNoaWxkUXVlcmllcyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHF1ZXJpZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHF1ZXJpZXNUb1N0b3AubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5VG9TdG9wID0gcXVlcmllc1RvU3RvcFtpXTtcbiAgICAgICAgICAgIHN5bmNUcmVlLmxpc3RlblByb3ZpZGVyXy5zdG9wTGlzdGVuaW5nKHN5bmNUcmVlUXVlcnlGb3JMaXN0ZW5pbmdfKHF1ZXJ5VG9TdG9wKSwgc3luY1RyZWVUYWdGb3JRdWVyeShzeW5jVHJlZSwgcXVlcnlUb1N0b3ApKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZXZlbnRzO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY2xhc3MgRXhpc3RpbmdWYWx1ZVByb3ZpZGVyIHtcbiAgICBjb25zdHJ1Y3Rvcihub2RlXykge1xuICAgICAgICB0aGlzLm5vZGVfID0gbm9kZV87XG4gICAgfVxuICAgIGdldEltbWVkaWF0ZUNoaWxkKGNoaWxkTmFtZSkge1xuICAgICAgICBjb25zdCBjaGlsZCA9IHRoaXMubm9kZV8uZ2V0SW1tZWRpYXRlQ2hpbGQoY2hpbGROYW1lKTtcbiAgICAgICAgcmV0dXJuIG5ldyBFeGlzdGluZ1ZhbHVlUHJvdmlkZXIoY2hpbGQpO1xuICAgIH1cbiAgICBub2RlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ub2RlXztcbiAgICB9XG59XG5jbGFzcyBEZWZlcnJlZFZhbHVlUHJvdmlkZXIge1xuICAgIGNvbnN0cnVjdG9yKHN5bmNUcmVlLCBwYXRoKSB7XG4gICAgICAgIHRoaXMuc3luY1RyZWVfID0gc3luY1RyZWU7XG4gICAgICAgIHRoaXMucGF0aF8gPSBwYXRoO1xuICAgIH1cbiAgICBnZXRJbW1lZGlhdGVDaGlsZChjaGlsZE5hbWUpIHtcbiAgICAgICAgY29uc3QgY2hpbGRQYXRoID0gcGF0aENoaWxkKHRoaXMucGF0aF8sIGNoaWxkTmFtZSk7XG4gICAgICAgIHJldHVybiBuZXcgRGVmZXJyZWRWYWx1ZVByb3ZpZGVyKHRoaXMuc3luY1RyZWVfLCBjaGlsZFBhdGgpO1xuICAgIH1cbiAgICBub2RlKCkge1xuICAgICAgICByZXR1cm4gc3luY1RyZWVDYWxjQ29tcGxldGVFdmVudENhY2hlKHRoaXMuc3luY1RyZWVfLCB0aGlzLnBhdGhfKTtcbiAgICB9XG59XG4vKipcbiAqIEdlbmVyYXRlIHBsYWNlaG9sZGVycyBmb3IgZGVmZXJyZWQgdmFsdWVzLlxuICovXG5jb25zdCBnZW5lcmF0ZVdpdGhWYWx1ZXMgPSBmdW5jdGlvbiAodmFsdWVzKSB7XG4gICAgdmFsdWVzID0gdmFsdWVzIHx8IHt9O1xuICAgIHZhbHVlc1sndGltZXN0YW1wJ10gPSB2YWx1ZXNbJ3RpbWVzdGFtcCddIHx8IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIHJldHVybiB2YWx1ZXM7XG59O1xuLyoqXG4gKiBWYWx1ZSB0byB1c2Ugd2hlbiBmaXJpbmcgbG9jYWwgZXZlbnRzLiBXaGVuIHdyaXRpbmcgc2VydmVyIHZhbHVlcywgZmlyZVxuICogbG9jYWwgZXZlbnRzIHdpdGggYW4gYXBwcm94aW1hdGUgdmFsdWUsIG90aGVyd2lzZSByZXR1cm4gdmFsdWUgYXMtaXMuXG4gKi9cbmNvbnN0IHJlc29sdmVEZWZlcnJlZExlYWZWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSwgZXhpc3RpbmdWYWwsIHNlcnZlclZhbHVlcykge1xuICAgIGlmICghdmFsdWUgfHwgdHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGFzc2VydCgnLnN2JyBpbiB2YWx1ZSwgJ1VuZXhwZWN0ZWQgbGVhZiBub2RlIG9yIHByaW9yaXR5IGNvbnRlbnRzJyk7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZVsnLnN2J10gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlU2NhbGFyRGVmZXJyZWRWYWx1ZSh2YWx1ZVsnLnN2J10sIGV4aXN0aW5nVmFsLCBzZXJ2ZXJWYWx1ZXMpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgdmFsdWVbJy5zdiddID09PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZUNvbXBsZXhEZWZlcnJlZFZhbHVlKHZhbHVlWycuc3YnXSwgZXhpc3RpbmdWYWwpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYXNzZXJ0KGZhbHNlLCAnVW5leHBlY3RlZCBzZXJ2ZXIgdmFsdWU6ICcgKyBKU09OLnN0cmluZ2lmeSh2YWx1ZSwgbnVsbCwgMikpO1xuICAgIH1cbn07XG5jb25zdCByZXNvbHZlU2NhbGFyRGVmZXJyZWRWYWx1ZSA9IGZ1bmN0aW9uIChvcCwgZXhpc3RpbmcsIHNlcnZlclZhbHVlcykge1xuICAgIHN3aXRjaCAob3ApIHtcbiAgICAgICAgY2FzZSAndGltZXN0YW1wJzpcbiAgICAgICAgICAgIHJldHVybiBzZXJ2ZXJWYWx1ZXNbJ3RpbWVzdGFtcCddO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgYXNzZXJ0KGZhbHNlLCAnVW5leHBlY3RlZCBzZXJ2ZXIgdmFsdWU6ICcgKyBvcCk7XG4gICAgfVxufTtcbmNvbnN0IHJlc29sdmVDb21wbGV4RGVmZXJyZWRWYWx1ZSA9IGZ1bmN0aW9uIChvcCwgZXhpc3RpbmcsIHVudXNlZCkge1xuICAgIGlmICghb3AuaGFzT3duUHJvcGVydHkoJ2luY3JlbWVudCcpKSB7XG4gICAgICAgIGFzc2VydChmYWxzZSwgJ1VuZXhwZWN0ZWQgc2VydmVyIHZhbHVlOiAnICsgSlNPTi5zdHJpbmdpZnkob3AsIG51bGwsIDIpKTtcbiAgICB9XG4gICAgY29uc3QgZGVsdGEgPSBvcFsnaW5jcmVtZW50J107XG4gICAgaWYgKHR5cGVvZiBkZWx0YSAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgYXNzZXJ0KGZhbHNlLCAnVW5leHBlY3RlZCBpbmNyZW1lbnQgdmFsdWU6ICcgKyBkZWx0YSk7XG4gICAgfVxuICAgIGNvbnN0IGV4aXN0aW5nTm9kZSA9IGV4aXN0aW5nLm5vZGUoKTtcbiAgICBhc3NlcnQoZXhpc3RpbmdOb2RlICE9PSBudWxsICYmIHR5cGVvZiBleGlzdGluZ05vZGUgIT09ICd1bmRlZmluZWQnLCAnRXhwZWN0ZWQgQ2hpbGRyZW5Ob2RlLkVNUFRZX05PREUgZm9yIG51bGxzJyk7XG4gICAgLy8gSW5jcmVtZW50aW5nIGEgbm9uLW51bWJlciBzZXRzIHRoZSB2YWx1ZSB0byB0aGUgaW5jcmVtZW50ZWQgYW1vdW50XG4gICAgaWYgKCFleGlzdGluZ05vZGUuaXNMZWFmTm9kZSgpKSB7XG4gICAgICAgIHJldHVybiBkZWx0YTtcbiAgICB9XG4gICAgY29uc3QgbGVhZiA9IGV4aXN0aW5nTm9kZTtcbiAgICBjb25zdCBleGlzdGluZ1ZhbCA9IGxlYWYuZ2V0VmFsdWUoKTtcbiAgICBpZiAodHlwZW9mIGV4aXN0aW5nVmFsICE9PSAnbnVtYmVyJykge1xuICAgICAgICByZXR1cm4gZGVsdGE7XG4gICAgfVxuICAgIC8vIE5vIG5lZWQgdG8gZG8gb3Zlci91bmRlcmZsb3cgYXJpdGhtZXRpYyBoZXJlIGJlY2F1c2UgSlMgb25seSBoYW5kbGVzIGZsb2F0cyB1bmRlciB0aGUgY292ZXJzXG4gICAgcmV0dXJuIGV4aXN0aW5nVmFsICsgZGVsdGE7XG59O1xuLyoqXG4gKiBSZWN1cnNpdmVseSByZXBsYWNlIGFsbCBkZWZlcnJlZCB2YWx1ZXMgYW5kIHByaW9yaXRpZXMgaW4gdGhlIHRyZWUgd2l0aCB0aGVcbiAqIHNwZWNpZmllZCBnZW5lcmF0ZWQgcmVwbGFjZW1lbnQgdmFsdWVzLlxuICogQHBhcmFtIHBhdGggLSBwYXRoIHRvIHdoaWNoIHdyaXRlIGlzIHJlbGF0aXZlXG4gKiBAcGFyYW0gbm9kZSAtIG5ldyBkYXRhIHdyaXR0ZW4gYXQgcGF0aFxuICogQHBhcmFtIHN5bmNUcmVlIC0gY3VycmVudCBkYXRhXG4gKi9cbmNvbnN0IHJlc29sdmVEZWZlcnJlZFZhbHVlVHJlZSA9IGZ1bmN0aW9uIChwYXRoLCBub2RlLCBzeW5jVHJlZSwgc2VydmVyVmFsdWVzKSB7XG4gICAgcmV0dXJuIHJlc29sdmVEZWZlcnJlZFZhbHVlKG5vZGUsIG5ldyBEZWZlcnJlZFZhbHVlUHJvdmlkZXIoc3luY1RyZWUsIHBhdGgpLCBzZXJ2ZXJWYWx1ZXMpO1xufTtcbi8qKlxuICogUmVjdXJzaXZlbHkgcmVwbGFjZSBhbGwgZGVmZXJyZWQgdmFsdWVzIGFuZCBwcmlvcml0aWVzIGluIHRoZSBub2RlIHdpdGggdGhlXG4gKiBzcGVjaWZpZWQgZ2VuZXJhdGVkIHJlcGxhY2VtZW50IHZhbHVlcy4gIElmIHRoZXJlIGFyZSBubyBzZXJ2ZXIgdmFsdWVzIGluIHRoZSBub2RlLFxuICogaXQnbGwgYmUgcmV0dXJuZWQgYXMtaXMuXG4gKi9cbmNvbnN0IHJlc29sdmVEZWZlcnJlZFZhbHVlU25hcHNob3QgPSBmdW5jdGlvbiAobm9kZSwgZXhpc3RpbmcsIHNlcnZlclZhbHVlcykge1xuICAgIHJldHVybiByZXNvbHZlRGVmZXJyZWRWYWx1ZShub2RlLCBuZXcgRXhpc3RpbmdWYWx1ZVByb3ZpZGVyKGV4aXN0aW5nKSwgc2VydmVyVmFsdWVzKTtcbn07XG5mdW5jdGlvbiByZXNvbHZlRGVmZXJyZWRWYWx1ZShub2RlLCBleGlzdGluZ1ZhbCwgc2VydmVyVmFsdWVzKSB7XG4gICAgY29uc3QgcmF3UHJpID0gbm9kZS5nZXRQcmlvcml0eSgpLnZhbCgpO1xuICAgIGNvbnN0IHByaW9yaXR5ID0gcmVzb2x2ZURlZmVycmVkTGVhZlZhbHVlKHJhd1ByaSwgZXhpc3RpbmdWYWwuZ2V0SW1tZWRpYXRlQ2hpbGQoJy5wcmlvcml0eScpLCBzZXJ2ZXJWYWx1ZXMpO1xuICAgIGxldCBuZXdOb2RlO1xuICAgIGlmIChub2RlLmlzTGVhZk5vZGUoKSkge1xuICAgICAgICBjb25zdCBsZWFmTm9kZSA9IG5vZGU7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gcmVzb2x2ZURlZmVycmVkTGVhZlZhbHVlKGxlYWZOb2RlLmdldFZhbHVlKCksIGV4aXN0aW5nVmFsLCBzZXJ2ZXJWYWx1ZXMpO1xuICAgICAgICBpZiAodmFsdWUgIT09IGxlYWZOb2RlLmdldFZhbHVlKCkgfHxcbiAgICAgICAgICAgIHByaW9yaXR5ICE9PSBsZWFmTm9kZS5nZXRQcmlvcml0eSgpLnZhbCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IExlYWZOb2RlKHZhbHVlLCBub2RlRnJvbUpTT04ocHJpb3JpdHkpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBjaGlsZHJlbk5vZGUgPSBub2RlO1xuICAgICAgICBuZXdOb2RlID0gY2hpbGRyZW5Ob2RlO1xuICAgICAgICBpZiAocHJpb3JpdHkgIT09IGNoaWxkcmVuTm9kZS5nZXRQcmlvcml0eSgpLnZhbCgpKSB7XG4gICAgICAgICAgICBuZXdOb2RlID0gbmV3Tm9kZS51cGRhdGVQcmlvcml0eShuZXcgTGVhZk5vZGUocHJpb3JpdHkpKTtcbiAgICAgICAgfVxuICAgICAgICBjaGlsZHJlbk5vZGUuZm9yRWFjaENoaWxkKFBSSU9SSVRZX0lOREVYLCAoY2hpbGROYW1lLCBjaGlsZE5vZGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5ld0NoaWxkTm9kZSA9IHJlc29sdmVEZWZlcnJlZFZhbHVlKGNoaWxkTm9kZSwgZXhpc3RpbmdWYWwuZ2V0SW1tZWRpYXRlQ2hpbGQoY2hpbGROYW1lKSwgc2VydmVyVmFsdWVzKTtcbiAgICAgICAgICAgIGlmIChuZXdDaGlsZE5vZGUgIT09IGNoaWxkTm9kZSkge1xuICAgICAgICAgICAgICAgIG5ld05vZGUgPSBuZXdOb2RlLnVwZGF0ZUltbWVkaWF0ZUNoaWxkKGNoaWxkTmFtZSwgbmV3Q2hpbGROb2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBuZXdOb2RlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBsaWdodC13ZWlnaHQgdHJlZSwgdHJhdmVyc2FibGUgYnkgcGF0aC4gIE5vZGVzIGNhbiBoYXZlIGJvdGggdmFsdWVzIGFuZCBjaGlsZHJlbi5cbiAqIE5vZGVzIGFyZSBub3QgZW51bWVyYXRlZCAoYnkgZm9yRWFjaENoaWxkKSB1bmxlc3MgdGhleSBoYXZlIGEgdmFsdWUgb3Igbm9uLWVtcHR5XG4gKiBjaGlsZHJlbi5cbiAqL1xuY2xhc3MgVHJlZSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIG5hbWUgLSBPcHRpb25hbCBuYW1lIG9mIHRoZSBub2RlLlxuICAgICAqIEBwYXJhbSBwYXJlbnQgLSBPcHRpb25hbCBwYXJlbnQgbm9kZS5cbiAgICAgKiBAcGFyYW0gbm9kZSAtIE9wdGlvbmFsIG5vZGUgdG8gd3JhcC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihuYW1lID0gJycsIHBhcmVudCA9IG51bGwsIG5vZGUgPSB7IGNoaWxkcmVuOiB7fSwgY2hpbGRDb3VudDogMCB9KSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB0aGlzLm5vZGUgPSBub2RlO1xuICAgIH1cbn1cbi8qKlxuICogUmV0dXJucyBhIHN1Yi1UcmVlIGZvciB0aGUgZ2l2ZW4gcGF0aC5cbiAqXG4gKiBAcGFyYW0gcGF0aE9iaiAtIFBhdGggdG8gbG9vayB1cC5cbiAqIEByZXR1cm5zIFRyZWUgZm9yIHBhdGguXG4gKi9cbmZ1bmN0aW9uIHRyZWVTdWJUcmVlKHRyZWUsIHBhdGhPYmopIHtcbiAgICAvLyBUT0RPOiBSZXF1aXJlIHBhdGhPYmogdG8gYmUgUGF0aD9cbiAgICBsZXQgcGF0aCA9IHBhdGhPYmogaW5zdGFuY2VvZiBQYXRoID8gcGF0aE9iaiA6IG5ldyBQYXRoKHBhdGhPYmopO1xuICAgIGxldCBjaGlsZCA9IHRyZWUsIG5leHQgPSBwYXRoR2V0RnJvbnQocGF0aCk7XG4gICAgd2hpbGUgKG5leHQgIT09IG51bGwpIHtcbiAgICAgICAgY29uc3QgY2hpbGROb2RlID0gc2FmZUdldChjaGlsZC5ub2RlLmNoaWxkcmVuLCBuZXh0KSB8fCB7XG4gICAgICAgICAgICBjaGlsZHJlbjoge30sXG4gICAgICAgICAgICBjaGlsZENvdW50OiAwXG4gICAgICAgIH07XG4gICAgICAgIGNoaWxkID0gbmV3IFRyZWUobmV4dCwgY2hpbGQsIGNoaWxkTm9kZSk7XG4gICAgICAgIHBhdGggPSBwYXRoUG9wRnJvbnQocGF0aCk7XG4gICAgICAgIG5leHQgPSBwYXRoR2V0RnJvbnQocGF0aCk7XG4gICAgfVxuICAgIHJldHVybiBjaGlsZDtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgZGF0YSBhc3NvY2lhdGVkIHdpdGggdGhpcyB0cmVlIG5vZGUuXG4gKlxuICogQHJldHVybnMgVGhlIGRhdGEgb3IgbnVsbCBpZiBubyBkYXRhIGV4aXN0cy5cbiAqL1xuZnVuY3Rpb24gdHJlZUdldFZhbHVlKHRyZWUpIHtcbiAgICByZXR1cm4gdHJlZS5ub2RlLnZhbHVlO1xufVxuLyoqXG4gKiBTZXRzIGRhdGEgdG8gdGhpcyB0cmVlIG5vZGUuXG4gKlxuICogQHBhcmFtIHZhbHVlIC0gVmFsdWUgdG8gc2V0LlxuICovXG5mdW5jdGlvbiB0cmVlU2V0VmFsdWUodHJlZSwgdmFsdWUpIHtcbiAgICB0cmVlLm5vZGUudmFsdWUgPSB2YWx1ZTtcbiAgICB0cmVlVXBkYXRlUGFyZW50cyh0cmVlKTtcbn1cbi8qKlxuICogQHJldHVybnMgV2hldGhlciB0aGUgdHJlZSBoYXMgYW55IGNoaWxkcmVuLlxuICovXG5mdW5jdGlvbiB0cmVlSGFzQ2hpbGRyZW4odHJlZSkge1xuICAgIHJldHVybiB0cmVlLm5vZGUuY2hpbGRDb3VudCA+IDA7XG59XG4vKipcbiAqIEByZXR1cm5zIFdoZXRoZXIgdGhlIHRyZWUgaXMgZW1wdHkgKG5vIHZhbHVlIG9yIGNoaWxkcmVuKS5cbiAqL1xuZnVuY3Rpb24gdHJlZUlzRW1wdHkodHJlZSkge1xuICAgIHJldHVybiB0cmVlR2V0VmFsdWUodHJlZSkgPT09IHVuZGVmaW5lZCAmJiAhdHJlZUhhc0NoaWxkcmVuKHRyZWUpO1xufVxuLyoqXG4gKiBDYWxscyBhY3Rpb24gZm9yIGVhY2ggY2hpbGQgb2YgdGhpcyB0cmVlIG5vZGUuXG4gKlxuICogQHBhcmFtIGFjdGlvbiAtIEFjdGlvbiB0byBiZSBjYWxsZWQgZm9yIGVhY2ggY2hpbGQuXG4gKi9cbmZ1bmN0aW9uIHRyZWVGb3JFYWNoQ2hpbGQodHJlZSwgYWN0aW9uKSB7XG4gICAgZWFjaCh0cmVlLm5vZGUuY2hpbGRyZW4sIChjaGlsZCwgY2hpbGRUcmVlKSA9PiB7XG4gICAgICAgIGFjdGlvbihuZXcgVHJlZShjaGlsZCwgdHJlZSwgY2hpbGRUcmVlKSk7XG4gICAgfSk7XG59XG4vKipcbiAqIERvZXMgYSBkZXB0aC1maXJzdCB0cmF2ZXJzYWwgb2YgdGhpcyBub2RlJ3MgZGVzY2VuZGFudHMsIGNhbGxpbmcgYWN0aW9uIGZvciBlYWNoIG9uZS5cbiAqXG4gKiBAcGFyYW0gYWN0aW9uIC0gQWN0aW9uIHRvIGJlIGNhbGxlZCBmb3IgZWFjaCBjaGlsZC5cbiAqIEBwYXJhbSBpbmNsdWRlU2VsZiAtIFdoZXRoZXIgdG8gY2FsbCBhY3Rpb24gb24gdGhpcyBub2RlIGFzIHdlbGwuIERlZmF1bHRzIHRvXG4gKiAgIGZhbHNlLlxuICogQHBhcmFtIGNoaWxkcmVuRmlyc3QgLSBXaGV0aGVyIHRvIGNhbGwgYWN0aW9uIG9uIGNoaWxkcmVuIGJlZm9yZSBjYWxsaW5nIGl0IG9uXG4gKiAgIHBhcmVudC5cbiAqL1xuZnVuY3Rpb24gdHJlZUZvckVhY2hEZXNjZW5kYW50KHRyZWUsIGFjdGlvbiwgaW5jbHVkZVNlbGYsIGNoaWxkcmVuRmlyc3QpIHtcbiAgICBpZiAoaW5jbHVkZVNlbGYgJiYgIWNoaWxkcmVuRmlyc3QpIHtcbiAgICAgICAgYWN0aW9uKHRyZWUpO1xuICAgIH1cbiAgICB0cmVlRm9yRWFjaENoaWxkKHRyZWUsIGNoaWxkID0+IHtcbiAgICAgICAgdHJlZUZvckVhY2hEZXNjZW5kYW50KGNoaWxkLCBhY3Rpb24sIHRydWUsIGNoaWxkcmVuRmlyc3QpO1xuICAgIH0pO1xuICAgIGlmIChpbmNsdWRlU2VsZiAmJiBjaGlsZHJlbkZpcnN0KSB7XG4gICAgICAgIGFjdGlvbih0cmVlKTtcbiAgICB9XG59XG4vKipcbiAqIENhbGxzIGFjdGlvbiBvbiBlYWNoIGFuY2VzdG9yIG5vZGUuXG4gKlxuICogQHBhcmFtIGFjdGlvbiAtIEFjdGlvbiB0byBiZSBjYWxsZWQgb24gZWFjaCBwYXJlbnQ7IHJldHVyblxuICogICB0cnVlIHRvIGFib3J0LlxuICogQHBhcmFtIGluY2x1ZGVTZWxmIC0gV2hldGhlciB0byBjYWxsIGFjdGlvbiBvbiB0aGlzIG5vZGUgYXMgd2VsbC5cbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIGFjdGlvbiBjYWxsYmFjayByZXR1cm5lZCB0cnVlLlxuICovXG5mdW5jdGlvbiB0cmVlRm9yRWFjaEFuY2VzdG9yKHRyZWUsIGFjdGlvbiwgaW5jbHVkZVNlbGYpIHtcbiAgICBsZXQgbm9kZSA9IGluY2x1ZGVTZWxmID8gdHJlZSA6IHRyZWUucGFyZW50O1xuICAgIHdoaWxlIChub2RlICE9PSBudWxsKSB7XG4gICAgICAgIGlmIChhY3Rpb24obm9kZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIG5vZGUgPSBub2RlLnBhcmVudDtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuLyoqXG4gKiBAcmV0dXJucyBUaGUgcGF0aCBvZiB0aGlzIHRyZWUgbm9kZSwgYXMgYSBQYXRoLlxuICovXG5mdW5jdGlvbiB0cmVlR2V0UGF0aCh0cmVlKSB7XG4gICAgcmV0dXJuIG5ldyBQYXRoKHRyZWUucGFyZW50ID09PSBudWxsXG4gICAgICAgID8gdHJlZS5uYW1lXG4gICAgICAgIDogdHJlZUdldFBhdGgodHJlZS5wYXJlbnQpICsgJy8nICsgdHJlZS5uYW1lKTtcbn1cbi8qKlxuICogQWRkcyBvciByZW1vdmVzIHRoaXMgY2hpbGQgZnJvbSBpdHMgcGFyZW50IGJhc2VkIG9uIHdoZXRoZXIgaXQncyBlbXB0eSBvciBub3QuXG4gKi9cbmZ1bmN0aW9uIHRyZWVVcGRhdGVQYXJlbnRzKHRyZWUpIHtcbiAgICBpZiAodHJlZS5wYXJlbnQgIT09IG51bGwpIHtcbiAgICAgICAgdHJlZVVwZGF0ZUNoaWxkKHRyZWUucGFyZW50LCB0cmVlLm5hbWUsIHRyZWUpO1xuICAgIH1cbn1cbi8qKlxuICogQWRkcyBvciByZW1vdmVzIHRoZSBwYXNzZWQgY2hpbGQgdG8gdGhpcyB0cmVlIG5vZGUsIGRlcGVuZGluZyBvbiB3aGV0aGVyIGl0J3MgZW1wdHkuXG4gKlxuICogQHBhcmFtIGNoaWxkTmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBjaGlsZCB0byB1cGRhdGUuXG4gKiBAcGFyYW0gY2hpbGQgLSBUaGUgY2hpbGQgdG8gdXBkYXRlLlxuICovXG5mdW5jdGlvbiB0cmVlVXBkYXRlQ2hpbGQodHJlZSwgY2hpbGROYW1lLCBjaGlsZCkge1xuICAgIGNvbnN0IGNoaWxkRW1wdHkgPSB0cmVlSXNFbXB0eShjaGlsZCk7XG4gICAgY29uc3QgY2hpbGRFeGlzdHMgPSBjb250YWlucyh0cmVlLm5vZGUuY2hpbGRyZW4sIGNoaWxkTmFtZSk7XG4gICAgaWYgKGNoaWxkRW1wdHkgJiYgY2hpbGRFeGlzdHMpIHtcbiAgICAgICAgZGVsZXRlIHRyZWUubm9kZS5jaGlsZHJlbltjaGlsZE5hbWVdO1xuICAgICAgICB0cmVlLm5vZGUuY2hpbGRDb3VudC0tO1xuICAgICAgICB0cmVlVXBkYXRlUGFyZW50cyh0cmVlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoIWNoaWxkRW1wdHkgJiYgIWNoaWxkRXhpc3RzKSB7XG4gICAgICAgIHRyZWUubm9kZS5jaGlsZHJlbltjaGlsZE5hbWVdID0gY2hpbGQubm9kZTtcbiAgICAgICAgdHJlZS5ub2RlLmNoaWxkQ291bnQrKztcbiAgICAgICAgdHJlZVVwZGF0ZVBhcmVudHModHJlZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUcnVlIGZvciBpbnZhbGlkIEZpcmViYXNlIGtleXNcbiAqL1xuY29uc3QgSU5WQUxJRF9LRVlfUkVHRVhfID0gL1tcXFtcXF0uIyRcXC9cXHUwMDAwLVxcdTAwMUZcXHUwMDdGXS87XG4vKipcbiAqIFRydWUgZm9yIGludmFsaWQgRmlyZWJhc2UgcGF0aHMuXG4gKiBBbGxvd3MgJy8nIGluIHBhdGhzLlxuICovXG5jb25zdCBJTlZBTElEX1BBVEhfUkVHRVhfID0gL1tcXFtcXF0uIyRcXHUwMDAwLVxcdTAwMUZcXHUwMDdGXS87XG4vKipcbiAqIE1heGltdW0gbnVtYmVyIG9mIGNoYXJhY3RlcnMgdG8gYWxsb3cgaW4gbGVhZiB2YWx1ZVxuICovXG5jb25zdCBNQVhfTEVBRl9TSVpFXyA9IDEwICogMTAyNCAqIDEwMjQ7XG5jb25zdCBpc1ZhbGlkS2V5ID0gZnVuY3Rpb24gKGtleSkge1xuICAgIHJldHVybiAodHlwZW9mIGtleSA9PT0gJ3N0cmluZycgJiYga2V5Lmxlbmd0aCAhPT0gMCAmJiAhSU5WQUxJRF9LRVlfUkVHRVhfLnRlc3Qoa2V5KSk7XG59O1xuY29uc3QgaXNWYWxpZFBhdGhTdHJpbmcgPSBmdW5jdGlvbiAocGF0aFN0cmluZykge1xuICAgIHJldHVybiAodHlwZW9mIHBhdGhTdHJpbmcgPT09ICdzdHJpbmcnICYmXG4gICAgICAgIHBhdGhTdHJpbmcubGVuZ3RoICE9PSAwICYmXG4gICAgICAgICFJTlZBTElEX1BBVEhfUkVHRVhfLnRlc3QocGF0aFN0cmluZykpO1xufTtcbmNvbnN0IGlzVmFsaWRSb290UGF0aFN0cmluZyA9IGZ1bmN0aW9uIChwYXRoU3RyaW5nKSB7XG4gICAgaWYgKHBhdGhTdHJpbmcpIHtcbiAgICAgICAgLy8gQWxsb3cgJy8uaW5mby8nIGF0IHRoZSBiZWdpbm5pbmcuXG4gICAgICAgIHBhdGhTdHJpbmcgPSBwYXRoU3RyaW5nLnJlcGxhY2UoL15cXC8qXFwuaW5mbyhcXC98JCkvLCAnLycpO1xuICAgIH1cbiAgICByZXR1cm4gaXNWYWxpZFBhdGhTdHJpbmcocGF0aFN0cmluZyk7XG59O1xuY29uc3QgaXNWYWxpZFByaW9yaXR5ID0gZnVuY3Rpb24gKHByaW9yaXR5KSB7XG4gICAgcmV0dXJuIChwcmlvcml0eSA9PT0gbnVsbCB8fFxuICAgICAgICB0eXBlb2YgcHJpb3JpdHkgPT09ICdzdHJpbmcnIHx8XG4gICAgICAgICh0eXBlb2YgcHJpb3JpdHkgPT09ICdudW1iZXInICYmICFpc0ludmFsaWRKU09OTnVtYmVyKHByaW9yaXR5KSkgfHxcbiAgICAgICAgKHByaW9yaXR5ICYmXG4gICAgICAgICAgICB0eXBlb2YgcHJpb3JpdHkgPT09ICdvYmplY3QnICYmXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgY29udGFpbnMocHJpb3JpdHksICcuc3YnKSkpO1xufTtcbi8qKlxuICogUHJlLXZhbGlkYXRlIGEgZGF0dW0gcGFzc2VkIGFzIGFuIGFyZ3VtZW50IHRvIEZpcmViYXNlIGZ1bmN0aW9uLlxuICovXG5jb25zdCB2YWxpZGF0ZUZpcmViYXNlRGF0YUFyZyA9IGZ1bmN0aW9uIChmbk5hbWUsIHZhbHVlLCBwYXRoLCBvcHRpb25hbCkge1xuICAgIGlmIChvcHRpb25hbCAmJiB2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFsaWRhdGVGaXJlYmFzZURhdGEoZXJyb3JQcmVmaXgoZm5OYW1lLCAndmFsdWUnKSwgdmFsdWUsIHBhdGgpO1xufTtcbi8qKlxuICogVmFsaWRhdGUgYSBkYXRhIG9iamVjdCBjbGllbnQtc2lkZSBiZWZvcmUgc2VuZGluZyB0byBzZXJ2ZXIuXG4gKi9cbmNvbnN0IHZhbGlkYXRlRmlyZWJhc2VEYXRhID0gZnVuY3Rpb24gKGVycm9yUHJlZml4LCBkYXRhLCBwYXRoXykge1xuICAgIGNvbnN0IHBhdGggPSBwYXRoXyBpbnN0YW5jZW9mIFBhdGggPyBuZXcgVmFsaWRhdGlvblBhdGgocGF0aF8sIGVycm9yUHJlZml4KSA6IHBhdGhfO1xuICAgIGlmIChkYXRhID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yUHJlZml4ICsgJ2NvbnRhaW5zIHVuZGVmaW5lZCAnICsgdmFsaWRhdGlvblBhdGhUb0Vycm9yU3RyaW5nKHBhdGgpKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeCArXG4gICAgICAgICAgICAnY29udGFpbnMgYSBmdW5jdGlvbiAnICtcbiAgICAgICAgICAgIHZhbGlkYXRpb25QYXRoVG9FcnJvclN0cmluZyhwYXRoKSArXG4gICAgICAgICAgICAnIHdpdGggY29udGVudHMgPSAnICtcbiAgICAgICAgICAgIGRhdGEudG9TdHJpbmcoKSk7XG4gICAgfVxuICAgIGlmIChpc0ludmFsaWRKU09OTnVtYmVyKGRhdGEpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeCArXG4gICAgICAgICAgICAnY29udGFpbnMgJyArXG4gICAgICAgICAgICBkYXRhLnRvU3RyaW5nKCkgK1xuICAgICAgICAgICAgJyAnICtcbiAgICAgICAgICAgIHZhbGlkYXRpb25QYXRoVG9FcnJvclN0cmluZyhwYXRoKSk7XG4gICAgfVxuICAgIC8vIENoZWNrIG1heCBsZWFmIHNpemUsIGJ1dCB0cnkgdG8gYXZvaWQgdGhlIHV0ZjggY29udmVyc2lvbiBpZiB3ZSBjYW4uXG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJyAmJlxuICAgICAgICBkYXRhLmxlbmd0aCA+IE1BWF9MRUFGX1NJWkVfIC8gMyAmJlxuICAgICAgICBzdHJpbmdMZW5ndGgoZGF0YSkgPiBNQVhfTEVBRl9TSVpFXykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXggK1xuICAgICAgICAgICAgJ2NvbnRhaW5zIGEgc3RyaW5nIGdyZWF0ZXIgdGhhbiAnICtcbiAgICAgICAgICAgIE1BWF9MRUFGX1NJWkVfICtcbiAgICAgICAgICAgICcgdXRmOCBieXRlcyAnICtcbiAgICAgICAgICAgIHZhbGlkYXRpb25QYXRoVG9FcnJvclN0cmluZyhwYXRoKSArXG4gICAgICAgICAgICBcIiAoJ1wiICtcbiAgICAgICAgICAgIGRhdGEuc3Vic3RyaW5nKDAsIDUwKSArXG4gICAgICAgICAgICBcIi4uLicpXCIpO1xuICAgIH1cbiAgICAvLyBUT0RPID0gUGVyZiA9IENvbnNpZGVyIGNvbWJpbmluZyB0aGUgcmVjdXJzaXZlIHZhbGlkYXRpb24gb2Yga2V5cyBpbnRvIE5vZGVGcm9tSlNPTlxuICAgIC8vIHRvIHNhdmUgZXh0cmEgd2Fsa2luZyBvZiBsYXJnZSBvYmplY3RzLlxuICAgIGlmIChkYXRhICYmIHR5cGVvZiBkYXRhID09PSAnb2JqZWN0Jykge1xuICAgICAgICBsZXQgaGFzRG90VmFsdWUgPSBmYWxzZTtcbiAgICAgICAgbGV0IGhhc0FjdHVhbENoaWxkID0gZmFsc2U7XG4gICAgICAgIGVhY2goZGF0YSwgKGtleSwgdmFsdWUpID0+IHtcbiAgICAgICAgICAgIGlmIChrZXkgPT09ICcudmFsdWUnKSB7XG4gICAgICAgICAgICAgICAgaGFzRG90VmFsdWUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoa2V5ICE9PSAnLnByaW9yaXR5JyAmJiBrZXkgIT09ICcuc3YnKSB7XG4gICAgICAgICAgICAgICAgaGFzQWN0dWFsQ2hpbGQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZEtleShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeCArXG4gICAgICAgICAgICAgICAgICAgICAgICAnIGNvbnRhaW5zIGFuIGludmFsaWQga2V5ICgnICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleSArXG4gICAgICAgICAgICAgICAgICAgICAgICAnKSAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25QYXRoVG9FcnJvclN0cmluZyhwYXRoKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAnLiAgS2V5cyBtdXN0IGJlIG5vbi1lbXB0eSBzdHJpbmdzICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2FuZCBjYW5cXCd0IGNvbnRhaW4gXCIuXCIsIFwiI1wiLCBcIiRcIiwgXCIvXCIsIFwiW1wiLCBvciBcIl1cIicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhbGlkYXRpb25QYXRoUHVzaChwYXRoLCBrZXkpO1xuICAgICAgICAgICAgdmFsaWRhdGVGaXJlYmFzZURhdGEoZXJyb3JQcmVmaXgsIHZhbHVlLCBwYXRoKTtcbiAgICAgICAgICAgIHZhbGlkYXRpb25QYXRoUG9wKHBhdGgpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGhhc0RvdFZhbHVlICYmIGhhc0FjdHVhbENoaWxkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXggK1xuICAgICAgICAgICAgICAgICcgY29udGFpbnMgXCIudmFsdWVcIiBjaGlsZCAnICtcbiAgICAgICAgICAgICAgICB2YWxpZGF0aW9uUGF0aFRvRXJyb3JTdHJpbmcocGF0aCkgK1xuICAgICAgICAgICAgICAgICcgaW4gYWRkaXRpb24gdG8gYWN0dWFsIGNoaWxkcmVuLicpO1xuICAgICAgICB9XG4gICAgfVxufTtcbi8qKlxuICogUHJlLXZhbGlkYXRlIHBhdGhzIHBhc3NlZCBpbiB0aGUgZmlyZWJhc2UgZnVuY3Rpb24uXG4gKi9cbmNvbnN0IHZhbGlkYXRlRmlyZWJhc2VNZXJnZVBhdGhzID0gZnVuY3Rpb24gKGVycm9yUHJlZml4LCBtZXJnZVBhdGhzKSB7XG4gICAgbGV0IGksIGN1clBhdGg7XG4gICAgZm9yIChpID0gMDsgaSA8IG1lcmdlUGF0aHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY3VyUGF0aCA9IG1lcmdlUGF0aHNbaV07XG4gICAgICAgIGNvbnN0IGtleXMgPSBwYXRoU2xpY2UoY3VyUGF0aCk7XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwga2V5cy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgaWYgKGtleXNbal0gPT09ICcucHJpb3JpdHknICYmIGogPT09IGtleXMubGVuZ3RoIC0gMSkgO1xuICAgICAgICAgICAgZWxzZSBpZiAoIWlzVmFsaWRLZXkoa2V5c1tqXSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXggK1xuICAgICAgICAgICAgICAgICAgICAnY29udGFpbnMgYW4gaW52YWxpZCBrZXkgKCcgK1xuICAgICAgICAgICAgICAgICAgICBrZXlzW2pdICtcbiAgICAgICAgICAgICAgICAgICAgJykgaW4gcGF0aCAnICtcbiAgICAgICAgICAgICAgICAgICAgY3VyUGF0aC50b1N0cmluZygpICtcbiAgICAgICAgICAgICAgICAgICAgJy4gS2V5cyBtdXN0IGJlIG5vbi1lbXB0eSBzdHJpbmdzICcgK1xuICAgICAgICAgICAgICAgICAgICAnYW5kIGNhblxcJ3QgY29udGFpbiBcIi5cIiwgXCIjXCIsIFwiJFwiLCBcIi9cIiwgXCJbXCIsIG9yIFwiXVwiJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gQ2hlY2sgdGhhdCB1cGRhdGUga2V5cyBhcmUgbm90IGRlc2NlbmRhbnRzIG9mIGVhY2ggb3RoZXIuXG4gICAgLy8gV2UgcmVseSBvbiB0aGUgcHJvcGVydHkgdGhhdCBzb3J0aW5nIGd1YXJhbnRlZXMgdGhhdCBhbmNlc3RvcnMgY29tZVxuICAgIC8vIHJpZ2h0IGJlZm9yZSBkZXNjZW5kYW50cy5cbiAgICBtZXJnZVBhdGhzLnNvcnQocGF0aENvbXBhcmUpO1xuICAgIGxldCBwcmV2UGF0aCA9IG51bGw7XG4gICAgZm9yIChpID0gMDsgaSA8IG1lcmdlUGF0aHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY3VyUGF0aCA9IG1lcmdlUGF0aHNbaV07XG4gICAgICAgIGlmIChwcmV2UGF0aCAhPT0gbnVsbCAmJiBwYXRoQ29udGFpbnMocHJldlBhdGgsIGN1clBhdGgpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXggK1xuICAgICAgICAgICAgICAgICdjb250YWlucyBhIHBhdGggJyArXG4gICAgICAgICAgICAgICAgcHJldlBhdGgudG9TdHJpbmcoKSArXG4gICAgICAgICAgICAgICAgJyB0aGF0IGlzIGFuY2VzdG9yIG9mIGFub3RoZXIgcGF0aCAnICtcbiAgICAgICAgICAgICAgICBjdXJQYXRoLnRvU3RyaW5nKCkpO1xuICAgICAgICB9XG4gICAgICAgIHByZXZQYXRoID0gY3VyUGF0aDtcbiAgICB9XG59O1xuLyoqXG4gKiBwcmUtdmFsaWRhdGUgYW4gb2JqZWN0IHBhc3NlZCBhcyBhbiBhcmd1bWVudCB0byBmaXJlYmFzZSBmdW5jdGlvbiAoXG4gKiBtdXN0IGJlIGFuIG9iamVjdCAtIGUuZy4gZm9yIGZpcmViYXNlLnVwZGF0ZSgpKS5cbiAqL1xuY29uc3QgdmFsaWRhdGVGaXJlYmFzZU1lcmdlRGF0YUFyZyA9IGZ1bmN0aW9uIChmbk5hbWUsIGRhdGEsIHBhdGgsIG9wdGlvbmFsKSB7XG4gICAgaWYgKG9wdGlvbmFsICYmIGRhdGEgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGVycm9yUHJlZml4JDEgPSBlcnJvclByZWZpeChmbk5hbWUsICd2YWx1ZXMnKTtcbiAgICBpZiAoIShkYXRhICYmIHR5cGVvZiBkYXRhID09PSAnb2JqZWN0JykgfHwgQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgkMSArICcgbXVzdCBiZSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgY2hpbGRyZW4gdG8gcmVwbGFjZS4nKTtcbiAgICB9XG4gICAgY29uc3QgbWVyZ2VQYXRocyA9IFtdO1xuICAgIGVhY2goZGF0YSwgKGtleSwgdmFsdWUpID0+IHtcbiAgICAgICAgY29uc3QgY3VyUGF0aCA9IG5ldyBQYXRoKGtleSk7XG4gICAgICAgIHZhbGlkYXRlRmlyZWJhc2VEYXRhKGVycm9yUHJlZml4JDEsIHZhbHVlLCBwYXRoQ2hpbGQocGF0aCwgY3VyUGF0aCkpO1xuICAgICAgICBpZiAocGF0aEdldEJhY2soY3VyUGF0aCkgPT09ICcucHJpb3JpdHknKSB7XG4gICAgICAgICAgICBpZiAoIWlzVmFsaWRQcmlvcml0eSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgkMSArXG4gICAgICAgICAgICAgICAgICAgIFwiY29udGFpbnMgYW4gaW52YWxpZCB2YWx1ZSBmb3IgJ1wiICtcbiAgICAgICAgICAgICAgICAgICAgY3VyUGF0aC50b1N0cmluZygpICtcbiAgICAgICAgICAgICAgICAgICAgXCInLCB3aGljaCBtdXN0IGJlIGEgdmFsaWQgXCIgK1xuICAgICAgICAgICAgICAgICAgICAnRmlyZWJhc2UgcHJpb3JpdHkgKGEgc3RyaW5nLCBmaW5pdGUgbnVtYmVyLCBzZXJ2ZXIgdmFsdWUsIG9yIG51bGwpLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG1lcmdlUGF0aHMucHVzaChjdXJQYXRoKTtcbiAgICB9KTtcbiAgICB2YWxpZGF0ZUZpcmViYXNlTWVyZ2VQYXRocyhlcnJvclByZWZpeCQxLCBtZXJnZVBhdGhzKTtcbn07XG5jb25zdCB2YWxpZGF0ZVByaW9yaXR5ID0gZnVuY3Rpb24gKGZuTmFtZSwgcHJpb3JpdHksIG9wdGlvbmFsKSB7XG4gICAgaWYgKG9wdGlvbmFsICYmIHByaW9yaXR5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoaXNJbnZhbGlkSlNPTk51bWJlcihwcmlvcml0eSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yUHJlZml4KGZuTmFtZSwgJ3ByaW9yaXR5JykgK1xuICAgICAgICAgICAgJ2lzICcgK1xuICAgICAgICAgICAgcHJpb3JpdHkudG9TdHJpbmcoKSArXG4gICAgICAgICAgICAnLCBidXQgbXVzdCBiZSBhIHZhbGlkIEZpcmViYXNlIHByaW9yaXR5IChhIHN0cmluZywgZmluaXRlIG51bWJlciwgJyArXG4gICAgICAgICAgICAnc2VydmVyIHZhbHVlLCBvciBudWxsKS4nKTtcbiAgICB9XG4gICAgLy8gU3BlY2lhbCBjYXNlIHRvIGFsbG93IGltcG9ydGluZyBkYXRhIHdpdGggYSAuc3YuXG4gICAgaWYgKCFpc1ZhbGlkUHJpb3JpdHkocHJpb3JpdHkpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsICdwcmlvcml0eScpICtcbiAgICAgICAgICAgICdtdXN0IGJlIGEgdmFsaWQgRmlyZWJhc2UgcHJpb3JpdHkgJyArXG4gICAgICAgICAgICAnKGEgc3RyaW5nLCBmaW5pdGUgbnVtYmVyLCBzZXJ2ZXIgdmFsdWUsIG9yIG51bGwpLicpO1xuICAgIH1cbn07XG5jb25zdCB2YWxpZGF0ZUtleSA9IGZ1bmN0aW9uIChmbk5hbWUsIGFyZ3VtZW50TmFtZSwga2V5LCBvcHRpb25hbCkge1xuICAgIGlmIChvcHRpb25hbCAmJiBrZXkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghaXNWYWxpZEtleShrZXkpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsIGFyZ3VtZW50TmFtZSkgK1xuICAgICAgICAgICAgJ3dhcyBhbiBpbnZhbGlkIGtleSA9IFwiJyArXG4gICAgICAgICAgICBrZXkgK1xuICAgICAgICAgICAgJ1wiLiAgRmlyZWJhc2Uga2V5cyBtdXN0IGJlIG5vbi1lbXB0eSBzdHJpbmdzIGFuZCAnICtcbiAgICAgICAgICAgICdjYW5cXCd0IGNvbnRhaW4gXCIuXCIsIFwiI1wiLCBcIiRcIiwgXCIvXCIsIFwiW1wiLCBvciBcIl1cIikuJyk7XG4gICAgfVxufTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmNvbnN0IHZhbGlkYXRlUGF0aFN0cmluZyA9IGZ1bmN0aW9uIChmbk5hbWUsIGFyZ3VtZW50TmFtZSwgcGF0aFN0cmluZywgb3B0aW9uYWwpIHtcbiAgICBpZiAob3B0aW9uYWwgJiYgcGF0aFN0cmluZyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFpc1ZhbGlkUGF0aFN0cmluZyhwYXRoU3RyaW5nKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmd1bWVudE5hbWUpICtcbiAgICAgICAgICAgICd3YXMgYW4gaW52YWxpZCBwYXRoID0gXCInICtcbiAgICAgICAgICAgIHBhdGhTdHJpbmcgK1xuICAgICAgICAgICAgJ1wiLiBQYXRocyBtdXN0IGJlIG5vbi1lbXB0eSBzdHJpbmdzIGFuZCAnICtcbiAgICAgICAgICAgICdjYW5cXCd0IGNvbnRhaW4gXCIuXCIsIFwiI1wiLCBcIiRcIiwgXCJbXCIsIG9yIFwiXVwiJyk7XG4gICAgfVxufTtcbmNvbnN0IHZhbGlkYXRlUm9vdFBhdGhTdHJpbmcgPSBmdW5jdGlvbiAoZm5OYW1lLCBhcmd1bWVudE5hbWUsIHBhdGhTdHJpbmcsIG9wdGlvbmFsKSB7XG4gICAgaWYgKHBhdGhTdHJpbmcpIHtcbiAgICAgICAgLy8gQWxsb3cgJy8uaW5mby8nIGF0IHRoZSBiZWdpbm5pbmcuXG4gICAgICAgIHBhdGhTdHJpbmcgPSBwYXRoU3RyaW5nLnJlcGxhY2UoL15cXC8qXFwuaW5mbyhcXC98JCkvLCAnLycpO1xuICAgIH1cbiAgICB2YWxpZGF0ZVBhdGhTdHJpbmcoZm5OYW1lLCBhcmd1bWVudE5hbWUsIHBhdGhTdHJpbmcsIG9wdGlvbmFsKTtcbn07XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5jb25zdCB2YWxpZGF0ZVdyaXRhYmxlUGF0aCA9IGZ1bmN0aW9uIChmbk5hbWUsIHBhdGgpIHtcbiAgICBpZiAocGF0aEdldEZyb250KHBhdGgpID09PSAnLmluZm8nKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihmbk5hbWUgKyBcIiBmYWlsZWQgPSBDYW4ndCBtb2RpZnkgZGF0YSB1bmRlciAvLmluZm8vXCIpO1xuICAgIH1cbn07XG5jb25zdCB2YWxpZGF0ZVVybCA9IGZ1bmN0aW9uIChmbk5hbWUsIHBhcnNlZFVybCkge1xuICAgIC8vIFRPRE8gPSBWYWxpZGF0ZSBzZXJ2ZXIgYmV0dGVyLlxuICAgIGNvbnN0IHBhdGhTdHJpbmcgPSBwYXJzZWRVcmwucGF0aC50b1N0cmluZygpO1xuICAgIGlmICghKHR5cGVvZiBwYXJzZWRVcmwucmVwb0luZm8uaG9zdCA9PT0gJ3N0cmluZycpIHx8XG4gICAgICAgIHBhcnNlZFVybC5yZXBvSW5mby5ob3N0Lmxlbmd0aCA9PT0gMCB8fFxuICAgICAgICAoIWlzVmFsaWRLZXkocGFyc2VkVXJsLnJlcG9JbmZvLm5hbWVzcGFjZSkgJiZcbiAgICAgICAgICAgIHBhcnNlZFVybC5yZXBvSW5mby5ob3N0LnNwbGl0KCc6JylbMF0gIT09ICdsb2NhbGhvc3QnKSB8fFxuICAgICAgICAocGF0aFN0cmluZy5sZW5ndGggIT09IDAgJiYgIWlzVmFsaWRSb290UGF0aFN0cmluZyhwYXRoU3RyaW5nKSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yUHJlZml4KGZuTmFtZSwgJ3VybCcpICtcbiAgICAgICAgICAgICdtdXN0IGJlIGEgdmFsaWQgZmlyZWJhc2UgVVJMIGFuZCAnICtcbiAgICAgICAgICAgICd0aGUgcGF0aCBjYW5cXCd0IGNvbnRhaW4gXCIuXCIsIFwiI1wiLCBcIiRcIiwgXCJbXCIsIG9yIFwiXVwiLicpO1xuICAgIH1cbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRoZSBldmVudCBxdWV1ZSBzZXJ2ZXMgYSBmZXcgcHVycG9zZXM6XG4gKiAxLiBJdCBlbnN1cmVzIHdlIG1haW50YWluIGV2ZW50IG9yZGVyIGluIHRoZSBmYWNlIG9mIGV2ZW50IGNhbGxiYWNrcyBkb2luZyBvcGVyYXRpb25zIHRoYXQgcmVzdWx0IGluIG1vcmVcbiAqICAgIGV2ZW50cyBiZWluZyBxdWV1ZWQuXG4gKiAyLiByYWlzZVF1ZXVlZEV2ZW50cygpIGhhbmRsZXMgYmVpbmcgY2FsbGVkIHJlZW50cmFudGx5IG5pY2VseS4gIFRoYXQgaXMsIGlmIGluIHRoZSBjb3Vyc2Ugb2YgcmFpc2luZyBldmVudHMsXG4gKiAgICByYWlzZVF1ZXVlZEV2ZW50cygpIGlzIGNhbGxlZCBhZ2FpbiwgdGhlIFwiaW5uZXJcIiBjYWxsIHdpbGwgcGljayB1cCByYWlzaW5nIGV2ZW50cyB3aGVyZSB0aGUgXCJvdXRlclwiIGNhbGxcbiAqICAgIGxlZnQgb2ZmLCBlbnN1cmluZyB0aGF0IHRoZSBldmVudHMgYXJlIHN0aWxsIHJhaXNlZCBzeW5jaHJvbm91c2x5IGFuZCBpbiBvcmRlci5cbiAqIDMuIFlvdSBjYW4gdXNlIHJhaXNlRXZlbnRzQXRQYXRoIGFuZCByYWlzZUV2ZW50c0ZvckNoYW5nZWRQYXRoIHRvIGVuc3VyZSBvbmx5IHJlbGV2YW50IHByZXZpb3VzbHktcXVldWVkXG4gKiAgICBldmVudHMgYXJlIHJhaXNlZCBzeW5jaHJvbm91c2x5LlxuICpcbiAqIE5PVEU6IFRoaXMgY2FuIGFsbCBnbyBhd2F5IGlmL3doZW4gd2UgbW92ZSB0byBhc3luYyBldmVudHMuXG4gKlxuICovXG5jbGFzcyBFdmVudFF1ZXVlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5ldmVudExpc3RzXyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogVHJhY2tzIHJlY3Vyc2lvbiBkZXB0aCBvZiByYWlzZVF1ZXVlZEV2ZW50c18sIGZvciBkZWJ1Z2dpbmcgcHVycG9zZXMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlY3Vyc2lvbkRlcHRoXyA9IDA7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0gZXZlbnREYXRhTGlzdCAtIFRoZSBuZXcgZXZlbnRzIHRvIHF1ZXVlLlxuICovXG5mdW5jdGlvbiBldmVudFF1ZXVlUXVldWVFdmVudHMoZXZlbnRRdWV1ZSwgZXZlbnREYXRhTGlzdCkge1xuICAgIC8vIFdlIGdyb3VwIGV2ZW50cyBieSBwYXRoLCBzdG9yaW5nIHRoZW0gaW4gYSBzaW5nbGUgRXZlbnRMaXN0LCB0byBtYWtlIGl0IGVhc2llciB0byBza2lwIG92ZXIgdGhlbSBxdWlja2x5LlxuICAgIGxldCBjdXJyTGlzdCA9IG51bGw7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBldmVudERhdGFMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBldmVudERhdGFMaXN0W2ldO1xuICAgICAgICBjb25zdCBwYXRoID0gZGF0YS5nZXRQYXRoKCk7XG4gICAgICAgIGlmIChjdXJyTGlzdCAhPT0gbnVsbCAmJiAhcGF0aEVxdWFscyhwYXRoLCBjdXJyTGlzdC5wYXRoKSkge1xuICAgICAgICAgICAgZXZlbnRRdWV1ZS5ldmVudExpc3RzXy5wdXNoKGN1cnJMaXN0KTtcbiAgICAgICAgICAgIGN1cnJMaXN0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3Vyckxpc3QgPT09IG51bGwpIHtcbiAgICAgICAgICAgIGN1cnJMaXN0ID0geyBldmVudHM6IFtdLCBwYXRoIH07XG4gICAgICAgIH1cbiAgICAgICAgY3Vyckxpc3QuZXZlbnRzLnB1c2goZGF0YSk7XG4gICAgfVxuICAgIGlmIChjdXJyTGlzdCkge1xuICAgICAgICBldmVudFF1ZXVlLmV2ZW50TGlzdHNfLnB1c2goY3Vyckxpc3QpO1xuICAgIH1cbn1cbi8qKlxuICogUXVldWVzIHRoZSBzcGVjaWZpZWQgZXZlbnRzIGFuZCBzeW5jaHJvbm91c2x5IHJhaXNlcyBhbGwgZXZlbnRzIChpbmNsdWRpbmcgcHJldmlvdXNseSBxdWV1ZWQgb25lcylcbiAqIGZvciB0aGUgc3BlY2lmaWVkIHBhdGguXG4gKlxuICogSXQgaXMgYXNzdW1lZCB0aGF0IHRoZSBuZXcgZXZlbnRzIGFyZSBhbGwgZm9yIHRoZSBzcGVjaWZpZWQgcGF0aC5cbiAqXG4gKiBAcGFyYW0gcGF0aCAtIFRoZSBwYXRoIHRvIHJhaXNlIGV2ZW50cyBmb3IuXG4gKiBAcGFyYW0gZXZlbnREYXRhTGlzdCAtIFRoZSBuZXcgZXZlbnRzIHRvIHJhaXNlLlxuICovXG5mdW5jdGlvbiBldmVudFF1ZXVlUmFpc2VFdmVudHNBdFBhdGgoZXZlbnRRdWV1ZSwgcGF0aCwgZXZlbnREYXRhTGlzdCkge1xuICAgIGV2ZW50UXVldWVRdWV1ZUV2ZW50cyhldmVudFF1ZXVlLCBldmVudERhdGFMaXN0KTtcbiAgICBldmVudFF1ZXVlUmFpc2VRdWV1ZWRFdmVudHNNYXRjaGluZ1ByZWRpY2F0ZShldmVudFF1ZXVlLCBldmVudFBhdGggPT4gcGF0aEVxdWFscyhldmVudFBhdGgsIHBhdGgpKTtcbn1cbi8qKlxuICogUXVldWVzIHRoZSBzcGVjaWZpZWQgZXZlbnRzIGFuZCBzeW5jaHJvbm91c2x5IHJhaXNlcyBhbGwgZXZlbnRzIChpbmNsdWRpbmcgcHJldmlvdXNseSBxdWV1ZWQgb25lcykgZm9yXG4gKiBsb2NhdGlvbnMgcmVsYXRlZCB0byB0aGUgc3BlY2lmaWVkIGNoYW5nZSBwYXRoIChpLmUuIGFsbCBhbmNlc3RvcnMgYW5kIGRlc2NlbmRhbnRzKS5cbiAqXG4gKiBJdCBpcyBhc3N1bWVkIHRoYXQgdGhlIG5ldyBldmVudHMgYXJlIGFsbCByZWxhdGVkIChhbmNlc3RvciBvciBkZXNjZW5kYW50KSB0byB0aGUgc3BlY2lmaWVkIHBhdGguXG4gKlxuICogQHBhcmFtIGNoYW5nZWRQYXRoIC0gVGhlIHBhdGggdG8gcmFpc2UgZXZlbnRzIGZvci5cbiAqIEBwYXJhbSBldmVudERhdGFMaXN0IC0gVGhlIGV2ZW50cyB0byByYWlzZVxuICovXG5mdW5jdGlvbiBldmVudFF1ZXVlUmFpc2VFdmVudHNGb3JDaGFuZ2VkUGF0aChldmVudFF1ZXVlLCBjaGFuZ2VkUGF0aCwgZXZlbnREYXRhTGlzdCkge1xuICAgIGV2ZW50UXVldWVRdWV1ZUV2ZW50cyhldmVudFF1ZXVlLCBldmVudERhdGFMaXN0KTtcbiAgICBldmVudFF1ZXVlUmFpc2VRdWV1ZWRFdmVudHNNYXRjaGluZ1ByZWRpY2F0ZShldmVudFF1ZXVlLCBldmVudFBhdGggPT4gcGF0aENvbnRhaW5zKGV2ZW50UGF0aCwgY2hhbmdlZFBhdGgpIHx8XG4gICAgICAgIHBhdGhDb250YWlucyhjaGFuZ2VkUGF0aCwgZXZlbnRQYXRoKSk7XG59XG5mdW5jdGlvbiBldmVudFF1ZXVlUmFpc2VRdWV1ZWRFdmVudHNNYXRjaGluZ1ByZWRpY2F0ZShldmVudFF1ZXVlLCBwcmVkaWNhdGUpIHtcbiAgICBldmVudFF1ZXVlLnJlY3Vyc2lvbkRlcHRoXysrO1xuICAgIGxldCBzZW50QWxsID0gdHJ1ZTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGV2ZW50UXVldWUuZXZlbnRMaXN0c18ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgZXZlbnRMaXN0ID0gZXZlbnRRdWV1ZS5ldmVudExpc3RzX1tpXTtcbiAgICAgICAgaWYgKGV2ZW50TGlzdCkge1xuICAgICAgICAgICAgY29uc3QgZXZlbnRQYXRoID0gZXZlbnRMaXN0LnBhdGg7XG4gICAgICAgICAgICBpZiAocHJlZGljYXRlKGV2ZW50UGF0aCkpIHtcbiAgICAgICAgICAgICAgICBldmVudExpc3RSYWlzZShldmVudFF1ZXVlLmV2ZW50TGlzdHNfW2ldKTtcbiAgICAgICAgICAgICAgICBldmVudFF1ZXVlLmV2ZW50TGlzdHNfW2ldID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlbnRBbGwgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoc2VudEFsbCkge1xuICAgICAgICBldmVudFF1ZXVlLmV2ZW50TGlzdHNfID0gW107XG4gICAgfVxuICAgIGV2ZW50UXVldWUucmVjdXJzaW9uRGVwdGhfLS07XG59XG4vKipcbiAqIEl0ZXJhdGVzIHRocm91Z2ggdGhlIGxpc3QgYW5kIHJhaXNlcyBlYWNoIGV2ZW50XG4gKi9cbmZ1bmN0aW9uIGV2ZW50TGlzdFJhaXNlKGV2ZW50TGlzdCkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZXZlbnRMaXN0LmV2ZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBldmVudERhdGEgPSBldmVudExpc3QuZXZlbnRzW2ldO1xuICAgICAgICBpZiAoZXZlbnREYXRhICE9PSBudWxsKSB7XG4gICAgICAgICAgICBldmVudExpc3QuZXZlbnRzW2ldID0gbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50Rm4gPSBldmVudERhdGEuZ2V0RXZlbnRSdW5uZXIoKTtcbiAgICAgICAgICAgIGlmIChsb2dnZXIpIHtcbiAgICAgICAgICAgICAgICBsb2coJ2V2ZW50OiAnICsgZXZlbnREYXRhLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZXhjZXB0aW9uR3VhcmQoZXZlbnRGbik7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jb25zdCBJTlRFUlJVUFRfUkVBU09OID0gJ3JlcG9faW50ZXJydXB0Jztcbi8qKlxuICogSWYgYSB0cmFuc2FjdGlvbiBkb2VzIG5vdCBzdWNjZWVkIGFmdGVyIDI1IHJldHJpZXMsIHdlIGFib3J0IGl0LiBBbW9uZyBvdGhlclxuICogdGhpbmdzIHRoaXMgZW5zdXJlIHRoYXQgaWYgdGhlcmUncyBldmVyIGEgYnVnIGNhdXNpbmcgYSBtaXNtYXRjaCBiZXR3ZWVuXG4gKiBjbGllbnQgLyBzZXJ2ZXIgaGFzaGVzIGZvciBzb21lIGRhdGEsIHdlIHdvbid0IHJldHJ5IGluZGVmaW5pdGVseS5cbiAqL1xuY29uc3QgTUFYX1RSQU5TQUNUSU9OX1JFVFJJRVMgPSAyNTtcbi8qKlxuICogQSBjb25uZWN0aW9uIHRvIGEgc2luZ2xlIGRhdGEgcmVwb3NpdG9yeS5cbiAqL1xuY2xhc3MgUmVwbyB7XG4gICAgY29uc3RydWN0b3IocmVwb0luZm9fLCBmb3JjZVJlc3RDbGllbnRfLCBhdXRoVG9rZW5Qcm92aWRlcl8sIGFwcENoZWNrUHJvdmlkZXJfKSB7XG4gICAgICAgIHRoaXMucmVwb0luZm9fID0gcmVwb0luZm9fO1xuICAgICAgICB0aGlzLmZvcmNlUmVzdENsaWVudF8gPSBmb3JjZVJlc3RDbGllbnRfO1xuICAgICAgICB0aGlzLmF1dGhUb2tlblByb3ZpZGVyXyA9IGF1dGhUb2tlblByb3ZpZGVyXztcbiAgICAgICAgdGhpcy5hcHBDaGVja1Byb3ZpZGVyXyA9IGFwcENoZWNrUHJvdmlkZXJfO1xuICAgICAgICB0aGlzLmRhdGFVcGRhdGVDb3VudCA9IDA7XG4gICAgICAgIHRoaXMuc3RhdHNMaXN0ZW5lcl8gPSBudWxsO1xuICAgICAgICB0aGlzLmV2ZW50UXVldWVfID0gbmV3IEV2ZW50UXVldWUoKTtcbiAgICAgICAgdGhpcy5uZXh0V3JpdGVJZF8gPSAxO1xuICAgICAgICB0aGlzLmludGVyY2VwdFNlcnZlckRhdGFDYWxsYmFja18gPSBudWxsO1xuICAgICAgICAvKiogQSBsaXN0IG9mIGRhdGEgcGllY2VzIGFuZCBwYXRocyB0byBiZSBzZXQgd2hlbiB0aGlzIGNsaWVudCBkaXNjb25uZWN0cy4gKi9cbiAgICAgICAgdGhpcy5vbkRpc2Nvbm5lY3RfID0gbmV3U3BhcnNlU25hcHNob3RUcmVlKCk7XG4gICAgICAgIC8qKiBTdG9yZXMgcXVldWVzIG9mIG91dHN0YW5kaW5nIHRyYW5zYWN0aW9ucyBmb3IgRmlyZWJhc2UgbG9jYXRpb25zLiAqL1xuICAgICAgICB0aGlzLnRyYW5zYWN0aW9uUXVldWVUcmVlXyA9IG5ldyBUcmVlKCk7XG4gICAgICAgIC8vIFRPRE86IFRoaXMgc2hvdWxkIGJlIEBwcml2YXRlIGJ1dCBpdCdzIHVzZWQgYnkgdGVzdF9hY2Nlc3MuanMgYW5kIGludGVybmFsLmpzXG4gICAgICAgIHRoaXMucGVyc2lzdGVudENvbm5lY3Rpb25fID0gbnVsbDtcbiAgICAgICAgLy8gVGhpcyBrZXkgaXMgaW50ZW50aW9uYWxseSBub3QgdXBkYXRlZCBpZiBSZXBvSW5mbyBpcyBsYXRlciBjaGFuZ2VkIG9yIHJlcGxhY2VkXG4gICAgICAgIHRoaXMua2V5ID0gdGhpcy5yZXBvSW5mb18udG9VUkxTdHJpbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybnMgVGhlIFVSTCBjb3JyZXNwb25kaW5nIHRvIHRoZSByb290IG9mIHRoaXMgRmlyZWJhc2UuXG4gICAgICovXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiAoKHRoaXMucmVwb0luZm9fLnNlY3VyZSA/ICdodHRwczovLycgOiAnaHR0cDovLycpICsgdGhpcy5yZXBvSW5mb18uaG9zdCk7XG4gICAgfVxufVxuZnVuY3Rpb24gcmVwb1N0YXJ0KHJlcG8sIGFwcElkLCBhdXRoT3ZlcnJpZGUpIHtcbiAgICByZXBvLnN0YXRzXyA9IHN0YXRzTWFuYWdlckdldENvbGxlY3Rpb24ocmVwby5yZXBvSW5mb18pO1xuICAgIGlmIChyZXBvLmZvcmNlUmVzdENsaWVudF8gfHwgYmVpbmdDcmF3bGVkKCkpIHtcbiAgICAgICAgcmVwby5zZXJ2ZXJfID0gbmV3IFJlYWRvbmx5UmVzdENsaWVudChyZXBvLnJlcG9JbmZvXywgKHBhdGhTdHJpbmcsIGRhdGEsIGlzTWVyZ2UsIHRhZykgPT4ge1xuICAgICAgICAgICAgcmVwb09uRGF0YVVwZGF0ZShyZXBvLCBwYXRoU3RyaW5nLCBkYXRhLCBpc01lcmdlLCB0YWcpO1xuICAgICAgICB9LCByZXBvLmF1dGhUb2tlblByb3ZpZGVyXywgcmVwby5hcHBDaGVja1Byb3ZpZGVyXyk7XG4gICAgICAgIC8vIE1pbm9yIGhhY2s6IEZpcmUgb25Db25uZWN0IGltbWVkaWF0ZWx5LCBzaW5jZSB0aGVyZSdzIG5vIGFjdHVhbCBjb25uZWN0aW9uLlxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHJlcG9PbkNvbm5lY3RTdGF0dXMocmVwbywgLyogY29ubmVjdFN0YXR1cz0gKi8gdHJ1ZSksIDApO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gVmFsaWRhdGUgYXV0aE92ZXJyaWRlXG4gICAgICAgIGlmICh0eXBlb2YgYXV0aE92ZXJyaWRlICE9PSAndW5kZWZpbmVkJyAmJiBhdXRoT3ZlcnJpZGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYXV0aE92ZXJyaWRlICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignT25seSBvYmplY3RzIGFyZSBzdXBwb3J0ZWQgZm9yIG9wdGlvbiBkYXRhYmFzZUF1dGhWYXJpYWJsZU92ZXJyaWRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHN0cmluZ2lmeShhdXRoT3ZlcnJpZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgYXV0aE92ZXJyaWRlIHByb3ZpZGVkOiAnICsgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmVwby5wZXJzaXN0ZW50Q29ubmVjdGlvbl8gPSBuZXcgUGVyc2lzdGVudENvbm5lY3Rpb24ocmVwby5yZXBvSW5mb18sIGFwcElkLCAocGF0aFN0cmluZywgZGF0YSwgaXNNZXJnZSwgdGFnKSA9PiB7XG4gICAgICAgICAgICByZXBvT25EYXRhVXBkYXRlKHJlcG8sIHBhdGhTdHJpbmcsIGRhdGEsIGlzTWVyZ2UsIHRhZyk7XG4gICAgICAgIH0sIChjb25uZWN0U3RhdHVzKSA9PiB7XG4gICAgICAgICAgICByZXBvT25Db25uZWN0U3RhdHVzKHJlcG8sIGNvbm5lY3RTdGF0dXMpO1xuICAgICAgICB9LCAodXBkYXRlcykgPT4ge1xuICAgICAgICAgICAgcmVwb09uU2VydmVySW5mb1VwZGF0ZShyZXBvLCB1cGRhdGVzKTtcbiAgICAgICAgfSwgcmVwby5hdXRoVG9rZW5Qcm92aWRlcl8sIHJlcG8uYXBwQ2hlY2tQcm92aWRlcl8sIGF1dGhPdmVycmlkZSk7XG4gICAgICAgIHJlcG8uc2VydmVyXyA9IHJlcG8ucGVyc2lzdGVudENvbm5lY3Rpb25fO1xuICAgIH1cbiAgICByZXBvLmF1dGhUb2tlblByb3ZpZGVyXy5hZGRUb2tlbkNoYW5nZUxpc3RlbmVyKHRva2VuID0+IHtcbiAgICAgICAgcmVwby5zZXJ2ZXJfLnJlZnJlc2hBdXRoVG9rZW4odG9rZW4pO1xuICAgIH0pO1xuICAgIHJlcG8uYXBwQ2hlY2tQcm92aWRlcl8uYWRkVG9rZW5DaGFuZ2VMaXN0ZW5lcihyZXN1bHQgPT4ge1xuICAgICAgICByZXBvLnNlcnZlcl8ucmVmcmVzaEFwcENoZWNrVG9rZW4ocmVzdWx0LnRva2VuKTtcbiAgICB9KTtcbiAgICAvLyBJbiB0aGUgY2FzZSBvZiBtdWx0aXBsZSBSZXBvcyBmb3IgdGhlIHNhbWUgcmVwb0luZm8gKGkuZS4gdGhlcmUgYXJlIG11bHRpcGxlIEZpcmViYXNlLkNvbnRleHRzIGJlaW5nIHVzZWQpLFxuICAgIC8vIHdlIG9ubHkgd2FudCB0byBjcmVhdGUgb25lIFN0YXRzUmVwb3J0ZXIuICBBcyBzdWNoLCB3ZSdsbCByZXBvcnQgc3RhdHMgb3ZlciB0aGUgZmlyc3QgUmVwbyBjcmVhdGVkLlxuICAgIHJlcG8uc3RhdHNSZXBvcnRlcl8gPSBzdGF0c01hbmFnZXJHZXRPckNyZWF0ZVJlcG9ydGVyKHJlcG8ucmVwb0luZm9fLCAoKSA9PiBuZXcgU3RhdHNSZXBvcnRlcihyZXBvLnN0YXRzXywgcmVwby5zZXJ2ZXJfKSk7XG4gICAgLy8gVXNlZCBmb3IgLmluZm8uXG4gICAgcmVwby5pbmZvRGF0YV8gPSBuZXcgU25hcHNob3RIb2xkZXIoKTtcbiAgICByZXBvLmluZm9TeW5jVHJlZV8gPSBuZXcgU3luY1RyZWUoe1xuICAgICAgICBzdGFydExpc3RlbmluZzogKHF1ZXJ5LCB0YWcsIGN1cnJlbnRIYXNoRm4sIG9uQ29tcGxldGUpID0+IHtcbiAgICAgICAgICAgIGxldCBpbmZvRXZlbnRzID0gW107XG4gICAgICAgICAgICBjb25zdCBub2RlID0gcmVwby5pbmZvRGF0YV8uZ2V0Tm9kZShxdWVyeS5fcGF0aCk7XG4gICAgICAgICAgICAvLyBUaGlzIGlzIHBvc3NpYmx5IGEgaGFjaywgYnV0IHdlIGhhdmUgZGlmZmVyZW50IHNlbWFudGljcyBmb3IgLmluZm8gZW5kcG9pbnRzLiBXZSBkb24ndCByYWlzZSBudWxsIGV2ZW50c1xuICAgICAgICAgICAgLy8gb24gaW5pdGlhbCBkYXRhLi4uXG4gICAgICAgICAgICBpZiAoIW5vZGUuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgaW5mb0V2ZW50cyA9IHN5bmNUcmVlQXBwbHlTZXJ2ZXJPdmVyd3JpdGUocmVwby5pbmZvU3luY1RyZWVfLCBxdWVyeS5fcGF0aCwgbm9kZSk7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG9uQ29tcGxldGUoJ29rJyk7XG4gICAgICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW5mb0V2ZW50cztcbiAgICAgICAgfSxcbiAgICAgICAgc3RvcExpc3RlbmluZzogKCkgPT4geyB9XG4gICAgfSk7XG4gICAgcmVwb1VwZGF0ZUluZm8ocmVwbywgJ2Nvbm5lY3RlZCcsIGZhbHNlKTtcbiAgICByZXBvLnNlcnZlclN5bmNUcmVlXyA9IG5ldyBTeW5jVHJlZSh7XG4gICAgICAgIHN0YXJ0TGlzdGVuaW5nOiAocXVlcnksIHRhZywgY3VycmVudEhhc2hGbiwgb25Db21wbGV0ZSkgPT4ge1xuICAgICAgICAgICAgcmVwby5zZXJ2ZXJfLmxpc3RlbihxdWVyeSwgY3VycmVudEhhc2hGbiwgdGFnLCAoc3RhdHVzLCBkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXZlbnRzID0gb25Db21wbGV0ZShzdGF0dXMsIGRhdGEpO1xuICAgICAgICAgICAgICAgIGV2ZW50UXVldWVSYWlzZUV2ZW50c0ZvckNoYW5nZWRQYXRoKHJlcG8uZXZlbnRRdWV1ZV8sIHF1ZXJ5Ll9wYXRoLCBldmVudHMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBObyBzeW5jaHJvbm91cyBldmVudHMgZm9yIG5ldHdvcmstYmFja2VkIHN5bmMgdHJlZXNcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfSxcbiAgICAgICAgc3RvcExpc3RlbmluZzogKHF1ZXJ5LCB0YWcpID0+IHtcbiAgICAgICAgICAgIHJlcG8uc2VydmVyXy51bmxpc3RlbihxdWVyeSwgdGFnKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLyoqXG4gKiBAcmV0dXJucyBUaGUgdGltZSBpbiBtaWxsaXNlY29uZHMsIHRha2luZyB0aGUgc2VydmVyIG9mZnNldCBpbnRvIGFjY291bnQgaWYgd2UgaGF2ZSBvbmUuXG4gKi9cbmZ1bmN0aW9uIHJlcG9TZXJ2ZXJUaW1lKHJlcG8pIHtcbiAgICBjb25zdCBvZmZzZXROb2RlID0gcmVwby5pbmZvRGF0YV8uZ2V0Tm9kZShuZXcgUGF0aCgnLmluZm8vc2VydmVyVGltZU9mZnNldCcpKTtcbiAgICBjb25zdCBvZmZzZXQgPSBvZmZzZXROb2RlLnZhbCgpIHx8IDA7XG4gICAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgb2Zmc2V0O1xufVxuLyoqXG4gKiBHZW5lcmF0ZSBTZXJ2ZXJWYWx1ZXMgdXNpbmcgc29tZSB2YXJpYWJsZXMgZnJvbSB0aGUgcmVwbyBvYmplY3QuXG4gKi9cbmZ1bmN0aW9uIHJlcG9HZW5lcmF0ZVNlcnZlclZhbHVlcyhyZXBvKSB7XG4gICAgcmV0dXJuIGdlbmVyYXRlV2l0aFZhbHVlcyh7XG4gICAgICAgIHRpbWVzdGFtcDogcmVwb1NlcnZlclRpbWUocmVwbylcbiAgICB9KTtcbn1cbi8qKlxuICogQ2FsbGVkIGJ5IHJlYWx0aW1lIHdoZW4gd2UgZ2V0IG5ldyBtZXNzYWdlcyBmcm9tIHRoZSBzZXJ2ZXIuXG4gKi9cbmZ1bmN0aW9uIHJlcG9PbkRhdGFVcGRhdGUocmVwbywgcGF0aFN0cmluZywgZGF0YSwgaXNNZXJnZSwgdGFnKSB7XG4gICAgLy8gRm9yIHRlc3RpbmcuXG4gICAgcmVwby5kYXRhVXBkYXRlQ291bnQrKztcbiAgICBjb25zdCBwYXRoID0gbmV3IFBhdGgocGF0aFN0cmluZyk7XG4gICAgZGF0YSA9IHJlcG8uaW50ZXJjZXB0U2VydmVyRGF0YUNhbGxiYWNrX1xuICAgICAgICA/IHJlcG8uaW50ZXJjZXB0U2VydmVyRGF0YUNhbGxiYWNrXyhwYXRoU3RyaW5nLCBkYXRhKVxuICAgICAgICA6IGRhdGE7XG4gICAgbGV0IGV2ZW50cyA9IFtdO1xuICAgIGlmICh0YWcpIHtcbiAgICAgICAgaWYgKGlzTWVyZ2UpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZ2dlZENoaWxkcmVuID0gbWFwKGRhdGEsIChyYXcpID0+IG5vZGVGcm9tSlNPTihyYXcpKTtcbiAgICAgICAgICAgIGV2ZW50cyA9IHN5bmNUcmVlQXBwbHlUYWdnZWRRdWVyeU1lcmdlKHJlcG8uc2VydmVyU3luY1RyZWVfLCBwYXRoLCB0YWdnZWRDaGlsZHJlbiwgdGFnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZ2dlZFNuYXAgPSBub2RlRnJvbUpTT04oZGF0YSk7XG4gICAgICAgICAgICBldmVudHMgPSBzeW5jVHJlZUFwcGx5VGFnZ2VkUXVlcnlPdmVyd3JpdGUocmVwby5zZXJ2ZXJTeW5jVHJlZV8sIHBhdGgsIHRhZ2dlZFNuYXAsIHRhZyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoaXNNZXJnZSkge1xuICAgICAgICBjb25zdCBjaGFuZ2VkQ2hpbGRyZW4gPSBtYXAoZGF0YSwgKHJhdykgPT4gbm9kZUZyb21KU09OKHJhdykpO1xuICAgICAgICBldmVudHMgPSBzeW5jVHJlZUFwcGx5U2VydmVyTWVyZ2UocmVwby5zZXJ2ZXJTeW5jVHJlZV8sIHBhdGgsIGNoYW5nZWRDaGlsZHJlbik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBzbmFwID0gbm9kZUZyb21KU09OKGRhdGEpO1xuICAgICAgICBldmVudHMgPSBzeW5jVHJlZUFwcGx5U2VydmVyT3ZlcndyaXRlKHJlcG8uc2VydmVyU3luY1RyZWVfLCBwYXRoLCBzbmFwKTtcbiAgICB9XG4gICAgbGV0IGFmZmVjdGVkUGF0aCA9IHBhdGg7XG4gICAgaWYgKGV2ZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIFNpbmNlIHdlIGhhdmUgYSBsaXN0ZW5lciBvdXRzdGFuZGluZyBmb3IgZWFjaCB0cmFuc2FjdGlvbiwgcmVjZWl2aW5nIGFueSBldmVudHNcbiAgICAgICAgLy8gaXMgYSBwcm94eSBmb3Igc29tZSBjaGFuZ2UgaGF2aW5nIG9jY3VycmVkLlxuICAgICAgICBhZmZlY3RlZFBhdGggPSByZXBvUmVydW5UcmFuc2FjdGlvbnMocmVwbywgcGF0aCk7XG4gICAgfVxuICAgIGV2ZW50UXVldWVSYWlzZUV2ZW50c0ZvckNoYW5nZWRQYXRoKHJlcG8uZXZlbnRRdWV1ZV8sIGFmZmVjdGVkUGF0aCwgZXZlbnRzKTtcbn1cbmZ1bmN0aW9uIHJlcG9PbkNvbm5lY3RTdGF0dXMocmVwbywgY29ubmVjdFN0YXR1cykge1xuICAgIHJlcG9VcGRhdGVJbmZvKHJlcG8sICdjb25uZWN0ZWQnLCBjb25uZWN0U3RhdHVzKTtcbiAgICBpZiAoY29ubmVjdFN0YXR1cyA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmVwb1J1bk9uRGlzY29ubmVjdEV2ZW50cyhyZXBvKTtcbiAgICB9XG59XG5mdW5jdGlvbiByZXBvT25TZXJ2ZXJJbmZvVXBkYXRlKHJlcG8sIHVwZGF0ZXMpIHtcbiAgICBlYWNoKHVwZGF0ZXMsIChrZXksIHZhbHVlKSA9PiB7XG4gICAgICAgIHJlcG9VcGRhdGVJbmZvKHJlcG8sIGtleSwgdmFsdWUpO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gcmVwb1VwZGF0ZUluZm8ocmVwbywgcGF0aFN0cmluZywgdmFsdWUpIHtcbiAgICBjb25zdCBwYXRoID0gbmV3IFBhdGgoJy8uaW5mby8nICsgcGF0aFN0cmluZyk7XG4gICAgY29uc3QgbmV3Tm9kZSA9IG5vZGVGcm9tSlNPTih2YWx1ZSk7XG4gICAgcmVwby5pbmZvRGF0YV8udXBkYXRlU25hcHNob3QocGF0aCwgbmV3Tm9kZSk7XG4gICAgY29uc3QgZXZlbnRzID0gc3luY1RyZWVBcHBseVNlcnZlck92ZXJ3cml0ZShyZXBvLmluZm9TeW5jVHJlZV8sIHBhdGgsIG5ld05vZGUpO1xuICAgIGV2ZW50UXVldWVSYWlzZUV2ZW50c0ZvckNoYW5nZWRQYXRoKHJlcG8uZXZlbnRRdWV1ZV8sIHBhdGgsIGV2ZW50cyk7XG59XG5mdW5jdGlvbiByZXBvR2V0TmV4dFdyaXRlSWQocmVwbykge1xuICAgIHJldHVybiByZXBvLm5leHRXcml0ZUlkXysrO1xufVxuLyoqXG4gKiBUaGUgcHVycG9zZSBvZiBgZ2V0VmFsdWVgIGlzIHRvIHJldHVybiB0aGUgbGF0ZXN0IGtub3duIHZhbHVlXG4gKiBzYXRpc2Z5aW5nIGBxdWVyeWAuXG4gKlxuICogVGhpcyBtZXRob2Qgd2lsbCBmaXJzdCBjaGVjayBmb3IgaW4tbWVtb3J5IGNhY2hlZCB2YWx1ZXNcbiAqIGJlbG9uZ2luZyB0byBhY3RpdmUgbGlzdGVuZXJzLiBJZiB0aGV5IGFyZSBmb3VuZCwgc3VjaCB2YWx1ZXNcbiAqIGFyZSBjb25zaWRlcmVkIHRvIGJlIHRoZSBtb3N0IHVwLXRvLWRhdGUuXG4gKlxuICogSWYgdGhlIGNsaWVudCBpcyBub3QgY29ubmVjdGVkLCB0aGlzIG1ldGhvZCB3aWxsIHdhaXQgdW50aWwgdGhlXG4gKiAgcmVwbyBoYXMgZXN0YWJsaXNoZWQgYSBjb25uZWN0aW9uIGFuZCB0aGVuIHJlcXVlc3QgdGhlIHZhbHVlIGZvciBgcXVlcnlgLlxuICogSWYgdGhlIGNsaWVudCBpcyBub3QgYWJsZSB0byByZXRyaWV2ZSB0aGUgcXVlcnkgcmVzdWx0IGZvciBhbm90aGVyIHJlYXNvbixcbiAqIGl0IHJlcG9ydHMgYW4gZXJyb3IuXG4gKlxuICogQHBhcmFtIHF1ZXJ5IC0gVGhlIHF1ZXJ5IHRvIHN1cmZhY2UgYSB2YWx1ZSBmb3IuXG4gKi9cbmZ1bmN0aW9uIHJlcG9HZXRWYWx1ZShyZXBvLCBxdWVyeSwgZXZlbnRSZWdpc3RyYXRpb24pIHtcbiAgICAvLyBPbmx5IGFjdGl2ZSBxdWVyaWVzIGFyZSBjYWNoZWQuIFRoZXJlIGlzIG5vIHBlcnNpc3RlZCBjYWNoZS5cbiAgICBjb25zdCBjYWNoZWQgPSBzeW5jVHJlZUdldFNlcnZlclZhbHVlKHJlcG8uc2VydmVyU3luY1RyZWVfLCBxdWVyeSk7XG4gICAgaWYgKGNhY2hlZCAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoY2FjaGVkKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcG8uc2VydmVyXy5nZXQocXVlcnkpLnRoZW4ocGF5bG9hZCA9PiB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSBub2RlRnJvbUpTT04ocGF5bG9hZCkud2l0aEluZGV4KHF1ZXJ5Ll9xdWVyeVBhcmFtcy5nZXRJbmRleCgpKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEJlbG93IHdlIHNpbXVsYXRlIHRoZSBhY3Rpb25zIG9mIGFuIGBvbmx5T25jZWAgYG9uVmFsdWUoKWAgZXZlbnQgd2hlcmU6XG4gICAgICAgICAqIEFkZCBhbiBldmVudCByZWdpc3RyYXRpb24sXG4gICAgICAgICAqIFVwZGF0ZSBkYXRhIGF0IHRoZSBwYXRoLFxuICAgICAgICAgKiBSYWlzZSBhbnkgZXZlbnRzLFxuICAgICAgICAgKiBDbGVhbnVwIHRoZSBTeW5jVHJlZVxuICAgICAgICAgKi9cbiAgICAgICAgc3luY1RyZWVBZGRFdmVudFJlZ2lzdHJhdGlvbihyZXBvLnNlcnZlclN5bmNUcmVlXywgcXVlcnksIGV2ZW50UmVnaXN0cmF0aW9uLCB0cnVlKTtcbiAgICAgICAgbGV0IGV2ZW50cztcbiAgICAgICAgaWYgKHF1ZXJ5Ll9xdWVyeVBhcmFtcy5sb2Fkc0FsbERhdGEoKSkge1xuICAgICAgICAgICAgZXZlbnRzID0gc3luY1RyZWVBcHBseVNlcnZlck92ZXJ3cml0ZShyZXBvLnNlcnZlclN5bmNUcmVlXywgcXVlcnkuX3BhdGgsIG5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gc3luY1RyZWVUYWdGb3JRdWVyeShyZXBvLnNlcnZlclN5bmNUcmVlXywgcXVlcnkpO1xuICAgICAgICAgICAgZXZlbnRzID0gc3luY1RyZWVBcHBseVRhZ2dlZFF1ZXJ5T3ZlcndyaXRlKHJlcG8uc2VydmVyU3luY1RyZWVfLCBxdWVyeS5fcGF0aCwgbm9kZSwgdGFnKTtcbiAgICAgICAgfVxuICAgICAgICAvKlxuICAgICAgICAgKiBXZSBuZWVkIHRvIHJhaXNlIGV2ZW50cyBpbiB0aGUgc2NlbmFyaW8gd2hlcmUgYGdldCgpYCBpcyBjYWxsZWQgYXQgYSBwYXJlbnQgcGF0aCwgYW5kXG4gICAgICAgICAqIHdoaWxlIHRoZSBgZ2V0KClgIGlzIHBlbmRpbmcsIGBvblZhbHVlYCBpcyBjYWxsZWQgYXQgYSBjaGlsZCBsb2NhdGlvbi4gV2hpbGUgZ2V0KCkgaXMgd2FpdGluZ1xuICAgICAgICAgKiBmb3IgdGhlIGRhdGEsIGBvblZhbHVlYCB3aWxsIHJlZ2lzdGVyIGEgbmV3IGV2ZW50LiBUaGVuLCBnZXQoKSB3aWxsIGNvbWUgYmFjaywgYW5kIHVwZGF0ZSB0aGUgc3luY1RyZWVcbiAgICAgICAgICogYW5kIGl0cyBjb3JyZXNwb25kaW5nIHNlcnZlckNhY2hlLCBpbmNsdWRpbmcgdGhlIGNoaWxkIGxvY2F0aW9uIHdoZXJlIGBvblZhbHVlYCBpcyBjYWxsZWQuIFRoZW4sXG4gICAgICAgICAqIGBvblZhbHVlYCB3aWxsIHJlY2VpdmUgdGhlIGV2ZW50IGZyb20gdGhlIHNlcnZlciwgYnV0IGxvb2sgYXQgdGhlIHN5bmNUcmVlIGFuZCBzZWUgdGhhdCB0aGUgZGF0YSByZWNlaXZlZFxuICAgICAgICAgKiBmcm9tIHRoZSBzZXJ2ZXIgaXMgYWxyZWFkeSBhdCB0aGUgU3luY1BvaW50LCBhbmQgc28gdGhlIGBvblZhbHVlYCBjYWxsYmFjayB3aWxsIG5ldmVyIGdldCBmaXJlZC5cbiAgICAgICAgICogQ2FsbGluZyBgZXZlbnRRdWV1ZVJhaXNlRXZlbnRzRm9yQ2hhbmdlZFBhdGgoKWAgaXMgdGhlIGNvcnJlY3Qgd2F5IHRvIHByb3BhZ2F0ZSB0aGUgZXZlbnRzIGFuZFxuICAgICAgICAgKiBlbnN1cmUgdGhlIGNvcnJlc3BvbmRpbmcgY2hpbGQgZXZlbnRzIHdpbGwgZ2V0IGZpcmVkLlxuICAgICAgICAgKi9cbiAgICAgICAgZXZlbnRRdWV1ZVJhaXNlRXZlbnRzRm9yQ2hhbmdlZFBhdGgocmVwby5ldmVudFF1ZXVlXywgcXVlcnkuX3BhdGgsIGV2ZW50cyk7XG4gICAgICAgIHN5bmNUcmVlUmVtb3ZlRXZlbnRSZWdpc3RyYXRpb24ocmVwby5zZXJ2ZXJTeW5jVHJlZV8sIHF1ZXJ5LCBldmVudFJlZ2lzdHJhdGlvbiwgbnVsbCwgdHJ1ZSk7XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH0sIGVyciA9PiB7XG4gICAgICAgIHJlcG9Mb2cocmVwbywgJ2dldCBmb3IgcXVlcnkgJyArIHN0cmluZ2lmeShxdWVyeSkgKyAnIGZhaWxlZDogJyArIGVycik7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoZXJyKSk7XG4gICAgfSk7XG59XG5mdW5jdGlvbiByZXBvU2V0V2l0aFByaW9yaXR5KHJlcG8sIHBhdGgsIG5ld1ZhbCwgbmV3UHJpb3JpdHksIG9uQ29tcGxldGUpIHtcbiAgICByZXBvTG9nKHJlcG8sICdzZXQnLCB7XG4gICAgICAgIHBhdGg6IHBhdGgudG9TdHJpbmcoKSxcbiAgICAgICAgdmFsdWU6IG5ld1ZhbCxcbiAgICAgICAgcHJpb3JpdHk6IG5ld1ByaW9yaXR5XG4gICAgfSk7XG4gICAgLy8gVE9ETzogT3B0aW1pemUgdGhpcyBiZWhhdmlvciB0byBlaXRoZXIgKGEpIHN0b3JlIGZsYWcgdG8gc2tpcCByZXNvbHZpbmcgd2hlcmUgcG9zc2libGUgYW5kIC8gb3JcbiAgICAvLyAoYikgc3RvcmUgdW5yZXNvbHZlZCBwYXRocyBvbiBKU09OIHBhcnNlXG4gICAgY29uc3Qgc2VydmVyVmFsdWVzID0gcmVwb0dlbmVyYXRlU2VydmVyVmFsdWVzKHJlcG8pO1xuICAgIGNvbnN0IG5ld05vZGVVbnJlc29sdmVkID0gbm9kZUZyb21KU09OKG5ld1ZhbCwgbmV3UHJpb3JpdHkpO1xuICAgIGNvbnN0IGV4aXN0aW5nID0gc3luY1RyZWVDYWxjQ29tcGxldGVFdmVudENhY2hlKHJlcG8uc2VydmVyU3luY1RyZWVfLCBwYXRoKTtcbiAgICBjb25zdCBuZXdOb2RlID0gcmVzb2x2ZURlZmVycmVkVmFsdWVTbmFwc2hvdChuZXdOb2RlVW5yZXNvbHZlZCwgZXhpc3RpbmcsIHNlcnZlclZhbHVlcyk7XG4gICAgY29uc3Qgd3JpdGVJZCA9IHJlcG9HZXROZXh0V3JpdGVJZChyZXBvKTtcbiAgICBjb25zdCBldmVudHMgPSBzeW5jVHJlZUFwcGx5VXNlck92ZXJ3cml0ZShyZXBvLnNlcnZlclN5bmNUcmVlXywgcGF0aCwgbmV3Tm9kZSwgd3JpdGVJZCwgdHJ1ZSk7XG4gICAgZXZlbnRRdWV1ZVF1ZXVlRXZlbnRzKHJlcG8uZXZlbnRRdWV1ZV8sIGV2ZW50cyk7XG4gICAgcmVwby5zZXJ2ZXJfLnB1dChwYXRoLnRvU3RyaW5nKCksIG5ld05vZGVVbnJlc29sdmVkLnZhbCgvKmV4cG9ydD0qLyB0cnVlKSwgKHN0YXR1cywgZXJyb3JSZWFzb24pID0+IHtcbiAgICAgICAgY29uc3Qgc3VjY2VzcyA9IHN0YXR1cyA9PT0gJ29rJztcbiAgICAgICAgaWYgKCFzdWNjZXNzKSB7XG4gICAgICAgICAgICB3YXJuKCdzZXQgYXQgJyArIHBhdGggKyAnIGZhaWxlZDogJyArIHN0YXR1cyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2xlYXJFdmVudHMgPSBzeW5jVHJlZUFja1VzZXJXcml0ZShyZXBvLnNlcnZlclN5bmNUcmVlXywgd3JpdGVJZCwgIXN1Y2Nlc3MpO1xuICAgICAgICBldmVudFF1ZXVlUmFpc2VFdmVudHNGb3JDaGFuZ2VkUGF0aChyZXBvLmV2ZW50UXVldWVfLCBwYXRoLCBjbGVhckV2ZW50cyk7XG4gICAgICAgIHJlcG9DYWxsT25Db21wbGV0ZUNhbGxiYWNrKHJlcG8sIG9uQ29tcGxldGUsIHN0YXR1cywgZXJyb3JSZWFzb24pO1xuICAgIH0pO1xuICAgIGNvbnN0IGFmZmVjdGVkUGF0aCA9IHJlcG9BYm9ydFRyYW5zYWN0aW9ucyhyZXBvLCBwYXRoKTtcbiAgICByZXBvUmVydW5UcmFuc2FjdGlvbnMocmVwbywgYWZmZWN0ZWRQYXRoKTtcbiAgICAvLyBXZSBxdWV1ZWQgdGhlIGV2ZW50cyBhYm92ZSwgc28ganVzdCBmbHVzaCB0aGUgcXVldWUgaGVyZVxuICAgIGV2ZW50UXVldWVSYWlzZUV2ZW50c0ZvckNoYW5nZWRQYXRoKHJlcG8uZXZlbnRRdWV1ZV8sIGFmZmVjdGVkUGF0aCwgW10pO1xufVxuZnVuY3Rpb24gcmVwb1VwZGF0ZShyZXBvLCBwYXRoLCBjaGlsZHJlblRvTWVyZ2UsIG9uQ29tcGxldGUpIHtcbiAgICByZXBvTG9nKHJlcG8sICd1cGRhdGUnLCB7IHBhdGg6IHBhdGgudG9TdHJpbmcoKSwgdmFsdWU6IGNoaWxkcmVuVG9NZXJnZSB9KTtcbiAgICAvLyBTdGFydCB3aXRoIG91ciBleGlzdGluZyBkYXRhIGFuZCBtZXJnZSBlYWNoIGNoaWxkIGludG8gaXQuXG4gICAgbGV0IGVtcHR5ID0gdHJ1ZTtcbiAgICBjb25zdCBzZXJ2ZXJWYWx1ZXMgPSByZXBvR2VuZXJhdGVTZXJ2ZXJWYWx1ZXMocmVwbyk7XG4gICAgY29uc3QgY2hhbmdlZENoaWxkcmVuID0ge307XG4gICAgZWFjaChjaGlsZHJlblRvTWVyZ2UsIChjaGFuZ2VkS2V5LCBjaGFuZ2VkVmFsdWUpID0+IHtcbiAgICAgICAgZW1wdHkgPSBmYWxzZTtcbiAgICAgICAgY2hhbmdlZENoaWxkcmVuW2NoYW5nZWRLZXldID0gcmVzb2x2ZURlZmVycmVkVmFsdWVUcmVlKHBhdGhDaGlsZChwYXRoLCBjaGFuZ2VkS2V5KSwgbm9kZUZyb21KU09OKGNoYW5nZWRWYWx1ZSksIHJlcG8uc2VydmVyU3luY1RyZWVfLCBzZXJ2ZXJWYWx1ZXMpO1xuICAgIH0pO1xuICAgIGlmICghZW1wdHkpIHtcbiAgICAgICAgY29uc3Qgd3JpdGVJZCA9IHJlcG9HZXROZXh0V3JpdGVJZChyZXBvKTtcbiAgICAgICAgY29uc3QgZXZlbnRzID0gc3luY1RyZWVBcHBseVVzZXJNZXJnZShyZXBvLnNlcnZlclN5bmNUcmVlXywgcGF0aCwgY2hhbmdlZENoaWxkcmVuLCB3cml0ZUlkKTtcbiAgICAgICAgZXZlbnRRdWV1ZVF1ZXVlRXZlbnRzKHJlcG8uZXZlbnRRdWV1ZV8sIGV2ZW50cyk7XG4gICAgICAgIHJlcG8uc2VydmVyXy5tZXJnZShwYXRoLnRvU3RyaW5nKCksIGNoaWxkcmVuVG9NZXJnZSwgKHN0YXR1cywgZXJyb3JSZWFzb24pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBzdGF0dXMgPT09ICdvayc7XG4gICAgICAgICAgICBpZiAoIXN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICB3YXJuKCd1cGRhdGUgYXQgJyArIHBhdGggKyAnIGZhaWxlZDogJyArIHN0YXR1cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBjbGVhckV2ZW50cyA9IHN5bmNUcmVlQWNrVXNlcldyaXRlKHJlcG8uc2VydmVyU3luY1RyZWVfLCB3cml0ZUlkLCAhc3VjY2Vzcyk7XG4gICAgICAgICAgICBjb25zdCBhZmZlY3RlZFBhdGggPSBjbGVhckV2ZW50cy5sZW5ndGggPiAwID8gcmVwb1JlcnVuVHJhbnNhY3Rpb25zKHJlcG8sIHBhdGgpIDogcGF0aDtcbiAgICAgICAgICAgIGV2ZW50UXVldWVSYWlzZUV2ZW50c0ZvckNoYW5nZWRQYXRoKHJlcG8uZXZlbnRRdWV1ZV8sIGFmZmVjdGVkUGF0aCwgY2xlYXJFdmVudHMpO1xuICAgICAgICAgICAgcmVwb0NhbGxPbkNvbXBsZXRlQ2FsbGJhY2socmVwbywgb25Db21wbGV0ZSwgc3RhdHVzLCBlcnJvclJlYXNvbik7XG4gICAgICAgIH0pO1xuICAgICAgICBlYWNoKGNoaWxkcmVuVG9NZXJnZSwgKGNoYW5nZWRQYXRoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhZmZlY3RlZFBhdGggPSByZXBvQWJvcnRUcmFuc2FjdGlvbnMocmVwbywgcGF0aENoaWxkKHBhdGgsIGNoYW5nZWRQYXRoKSk7XG4gICAgICAgICAgICByZXBvUmVydW5UcmFuc2FjdGlvbnMocmVwbywgYWZmZWN0ZWRQYXRoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFdlIHF1ZXVlZCB0aGUgZXZlbnRzIGFib3ZlLCBzbyBqdXN0IGZsdXNoIHRoZSBxdWV1ZSBoZXJlXG4gICAgICAgIGV2ZW50UXVldWVSYWlzZUV2ZW50c0ZvckNoYW5nZWRQYXRoKHJlcG8uZXZlbnRRdWV1ZV8sIHBhdGgsIFtdKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGxvZyhcInVwZGF0ZSgpIGNhbGxlZCB3aXRoIGVtcHR5IGRhdGEuICBEb24ndCBkbyBhbnl0aGluZy5cIik7XG4gICAgICAgIHJlcG9DYWxsT25Db21wbGV0ZUNhbGxiYWNrKHJlcG8sIG9uQ29tcGxldGUsICdvaycsIHVuZGVmaW5lZCk7XG4gICAgfVxufVxuLyoqXG4gKiBBcHBsaWVzIGFsbCBvZiB0aGUgY2hhbmdlcyBzdG9yZWQgdXAgaW4gdGhlIG9uRGlzY29ubmVjdF8gdHJlZS5cbiAqL1xuZnVuY3Rpb24gcmVwb1J1bk9uRGlzY29ubmVjdEV2ZW50cyhyZXBvKSB7XG4gICAgcmVwb0xvZyhyZXBvLCAnb25EaXNjb25uZWN0RXZlbnRzJyk7XG4gICAgY29uc3Qgc2VydmVyVmFsdWVzID0gcmVwb0dlbmVyYXRlU2VydmVyVmFsdWVzKHJlcG8pO1xuICAgIGNvbnN0IHJlc29sdmVkT25EaXNjb25uZWN0VHJlZSA9IG5ld1NwYXJzZVNuYXBzaG90VHJlZSgpO1xuICAgIHNwYXJzZVNuYXBzaG90VHJlZUZvckVhY2hUcmVlKHJlcG8ub25EaXNjb25uZWN0XywgbmV3RW1wdHlQYXRoKCksIChwYXRoLCBub2RlKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc29sdmVkID0gcmVzb2x2ZURlZmVycmVkVmFsdWVUcmVlKHBhdGgsIG5vZGUsIHJlcG8uc2VydmVyU3luY1RyZWVfLCBzZXJ2ZXJWYWx1ZXMpO1xuICAgICAgICBzcGFyc2VTbmFwc2hvdFRyZWVSZW1lbWJlcihyZXNvbHZlZE9uRGlzY29ubmVjdFRyZWUsIHBhdGgsIHJlc29sdmVkKTtcbiAgICB9KTtcbiAgICBsZXQgZXZlbnRzID0gW107XG4gICAgc3BhcnNlU25hcHNob3RUcmVlRm9yRWFjaFRyZWUocmVzb2x2ZWRPbkRpc2Nvbm5lY3RUcmVlLCBuZXdFbXB0eVBhdGgoKSwgKHBhdGgsIHNuYXApID0+IHtcbiAgICAgICAgZXZlbnRzID0gZXZlbnRzLmNvbmNhdChzeW5jVHJlZUFwcGx5U2VydmVyT3ZlcndyaXRlKHJlcG8uc2VydmVyU3luY1RyZWVfLCBwYXRoLCBzbmFwKSk7XG4gICAgICAgIGNvbnN0IGFmZmVjdGVkUGF0aCA9IHJlcG9BYm9ydFRyYW5zYWN0aW9ucyhyZXBvLCBwYXRoKTtcbiAgICAgICAgcmVwb1JlcnVuVHJhbnNhY3Rpb25zKHJlcG8sIGFmZmVjdGVkUGF0aCk7XG4gICAgfSk7XG4gICAgcmVwby5vbkRpc2Nvbm5lY3RfID0gbmV3U3BhcnNlU25hcHNob3RUcmVlKCk7XG4gICAgZXZlbnRRdWV1ZVJhaXNlRXZlbnRzRm9yQ2hhbmdlZFBhdGgocmVwby5ldmVudFF1ZXVlXywgbmV3RW1wdHlQYXRoKCksIGV2ZW50cyk7XG59XG5mdW5jdGlvbiByZXBvT25EaXNjb25uZWN0Q2FuY2VsKHJlcG8sIHBhdGgsIG9uQ29tcGxldGUpIHtcbiAgICByZXBvLnNlcnZlcl8ub25EaXNjb25uZWN0Q2FuY2VsKHBhdGgudG9TdHJpbmcoKSwgKHN0YXR1cywgZXJyb3JSZWFzb24pID0+IHtcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gJ29rJykge1xuICAgICAgICAgICAgc3BhcnNlU25hcHNob3RUcmVlRm9yZ2V0KHJlcG8ub25EaXNjb25uZWN0XywgcGF0aCk7XG4gICAgICAgIH1cbiAgICAgICAgcmVwb0NhbGxPbkNvbXBsZXRlQ2FsbGJhY2socmVwbywgb25Db21wbGV0ZSwgc3RhdHVzLCBlcnJvclJlYXNvbik7XG4gICAgfSk7XG59XG5mdW5jdGlvbiByZXBvT25EaXNjb25uZWN0U2V0KHJlcG8sIHBhdGgsIHZhbHVlLCBvbkNvbXBsZXRlKSB7XG4gICAgY29uc3QgbmV3Tm9kZSA9IG5vZGVGcm9tSlNPTih2YWx1ZSk7XG4gICAgcmVwby5zZXJ2ZXJfLm9uRGlzY29ubmVjdFB1dChwYXRoLnRvU3RyaW5nKCksIG5ld05vZGUudmFsKC8qZXhwb3J0PSovIHRydWUpLCAoc3RhdHVzLCBlcnJvclJlYXNvbikgPT4ge1xuICAgICAgICBpZiAoc3RhdHVzID09PSAnb2snKSB7XG4gICAgICAgICAgICBzcGFyc2VTbmFwc2hvdFRyZWVSZW1lbWJlcihyZXBvLm9uRGlzY29ubmVjdF8sIHBhdGgsIG5ld05vZGUpO1xuICAgICAgICB9XG4gICAgICAgIHJlcG9DYWxsT25Db21wbGV0ZUNhbGxiYWNrKHJlcG8sIG9uQ29tcGxldGUsIHN0YXR1cywgZXJyb3JSZWFzb24pO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gcmVwb09uRGlzY29ubmVjdFNldFdpdGhQcmlvcml0eShyZXBvLCBwYXRoLCB2YWx1ZSwgcHJpb3JpdHksIG9uQ29tcGxldGUpIHtcbiAgICBjb25zdCBuZXdOb2RlID0gbm9kZUZyb21KU09OKHZhbHVlLCBwcmlvcml0eSk7XG4gICAgcmVwby5zZXJ2ZXJfLm9uRGlzY29ubmVjdFB1dChwYXRoLnRvU3RyaW5nKCksIG5ld05vZGUudmFsKC8qZXhwb3J0PSovIHRydWUpLCAoc3RhdHVzLCBlcnJvclJlYXNvbikgPT4ge1xuICAgICAgICBpZiAoc3RhdHVzID09PSAnb2snKSB7XG4gICAgICAgICAgICBzcGFyc2VTbmFwc2hvdFRyZWVSZW1lbWJlcihyZXBvLm9uRGlzY29ubmVjdF8sIHBhdGgsIG5ld05vZGUpO1xuICAgICAgICB9XG4gICAgICAgIHJlcG9DYWxsT25Db21wbGV0ZUNhbGxiYWNrKHJlcG8sIG9uQ29tcGxldGUsIHN0YXR1cywgZXJyb3JSZWFzb24pO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gcmVwb09uRGlzY29ubmVjdFVwZGF0ZShyZXBvLCBwYXRoLCBjaGlsZHJlblRvTWVyZ2UsIG9uQ29tcGxldGUpIHtcbiAgICBpZiAoaXNFbXB0eShjaGlsZHJlblRvTWVyZ2UpKSB7XG4gICAgICAgIGxvZyhcIm9uRGlzY29ubmVjdCgpLnVwZGF0ZSgpIGNhbGxlZCB3aXRoIGVtcHR5IGRhdGEuICBEb24ndCBkbyBhbnl0aGluZy5cIik7XG4gICAgICAgIHJlcG9DYWxsT25Db21wbGV0ZUNhbGxiYWNrKHJlcG8sIG9uQ29tcGxldGUsICdvaycsIHVuZGVmaW5lZCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmVwby5zZXJ2ZXJfLm9uRGlzY29ubmVjdE1lcmdlKHBhdGgudG9TdHJpbmcoKSwgY2hpbGRyZW5Ub01lcmdlLCAoc3RhdHVzLCBlcnJvclJlYXNvbikgPT4ge1xuICAgICAgICBpZiAoc3RhdHVzID09PSAnb2snKSB7XG4gICAgICAgICAgICBlYWNoKGNoaWxkcmVuVG9NZXJnZSwgKGNoaWxkTmFtZSwgY2hpbGROb2RlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3Q2hpbGROb2RlID0gbm9kZUZyb21KU09OKGNoaWxkTm9kZSk7XG4gICAgICAgICAgICAgICAgc3BhcnNlU25hcHNob3RUcmVlUmVtZW1iZXIocmVwby5vbkRpc2Nvbm5lY3RfLCBwYXRoQ2hpbGQocGF0aCwgY2hpbGROYW1lKSwgbmV3Q2hpbGROb2RlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJlcG9DYWxsT25Db21wbGV0ZUNhbGxiYWNrKHJlcG8sIG9uQ29tcGxldGUsIHN0YXR1cywgZXJyb3JSZWFzb24pO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gcmVwb0FkZEV2ZW50Q2FsbGJhY2tGb3JRdWVyeShyZXBvLCBxdWVyeSwgZXZlbnRSZWdpc3RyYXRpb24pIHtcbiAgICBsZXQgZXZlbnRzO1xuICAgIGlmIChwYXRoR2V0RnJvbnQocXVlcnkuX3BhdGgpID09PSAnLmluZm8nKSB7XG4gICAgICAgIGV2ZW50cyA9IHN5bmNUcmVlQWRkRXZlbnRSZWdpc3RyYXRpb24ocmVwby5pbmZvU3luY1RyZWVfLCBxdWVyeSwgZXZlbnRSZWdpc3RyYXRpb24pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZXZlbnRzID0gc3luY1RyZWVBZGRFdmVudFJlZ2lzdHJhdGlvbihyZXBvLnNlcnZlclN5bmNUcmVlXywgcXVlcnksIGV2ZW50UmVnaXN0cmF0aW9uKTtcbiAgICB9XG4gICAgZXZlbnRRdWV1ZVJhaXNlRXZlbnRzQXRQYXRoKHJlcG8uZXZlbnRRdWV1ZV8sIHF1ZXJ5Ll9wYXRoLCBldmVudHMpO1xufVxuZnVuY3Rpb24gcmVwb1JlbW92ZUV2ZW50Q2FsbGJhY2tGb3JRdWVyeShyZXBvLCBxdWVyeSwgZXZlbnRSZWdpc3RyYXRpb24pIHtcbiAgICAvLyBUaGVzZSBhcmUgZ3VhcmFudGVlZCBub3QgdG8gcmFpc2UgZXZlbnRzLCBzaW5jZSB3ZSdyZSBub3QgcGFzc2luZyBpbiBhIGNhbmNlbEVycm9yLiBIb3dldmVyLCB3ZSBjYW4gZnV0dXJlLXByb29mXG4gICAgLy8gYSBsaXR0bGUgYml0IGJ5IGhhbmRsaW5nIHRoZSByZXR1cm4gdmFsdWVzIGFueXdheXMuXG4gICAgbGV0IGV2ZW50cztcbiAgICBpZiAocGF0aEdldEZyb250KHF1ZXJ5Ll9wYXRoKSA9PT0gJy5pbmZvJykge1xuICAgICAgICBldmVudHMgPSBzeW5jVHJlZVJlbW92ZUV2ZW50UmVnaXN0cmF0aW9uKHJlcG8uaW5mb1N5bmNUcmVlXywgcXVlcnksIGV2ZW50UmVnaXN0cmF0aW9uKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGV2ZW50cyA9IHN5bmNUcmVlUmVtb3ZlRXZlbnRSZWdpc3RyYXRpb24ocmVwby5zZXJ2ZXJTeW5jVHJlZV8sIHF1ZXJ5LCBldmVudFJlZ2lzdHJhdGlvbik7XG4gICAgfVxuICAgIGV2ZW50UXVldWVSYWlzZUV2ZW50c0F0UGF0aChyZXBvLmV2ZW50UXVldWVfLCBxdWVyeS5fcGF0aCwgZXZlbnRzKTtcbn1cbmZ1bmN0aW9uIHJlcG9JbnRlcnJ1cHQocmVwbykge1xuICAgIGlmIChyZXBvLnBlcnNpc3RlbnRDb25uZWN0aW9uXykge1xuICAgICAgICByZXBvLnBlcnNpc3RlbnRDb25uZWN0aW9uXy5pbnRlcnJ1cHQoSU5URVJSVVBUX1JFQVNPTik7XG4gICAgfVxufVxuZnVuY3Rpb24gcmVwb1Jlc3VtZShyZXBvKSB7XG4gICAgaWYgKHJlcG8ucGVyc2lzdGVudENvbm5lY3Rpb25fKSB7XG4gICAgICAgIHJlcG8ucGVyc2lzdGVudENvbm5lY3Rpb25fLnJlc3VtZShJTlRFUlJVUFRfUkVBU09OKTtcbiAgICB9XG59XG5mdW5jdGlvbiByZXBvTG9nKHJlcG8sIC4uLnZhckFyZ3MpIHtcbiAgICBsZXQgcHJlZml4ID0gJyc7XG4gICAgaWYgKHJlcG8ucGVyc2lzdGVudENvbm5lY3Rpb25fKSB7XG4gICAgICAgIHByZWZpeCA9IHJlcG8ucGVyc2lzdGVudENvbm5lY3Rpb25fLmlkICsgJzonO1xuICAgIH1cbiAgICBsb2cocHJlZml4LCAuLi52YXJBcmdzKTtcbn1cbmZ1bmN0aW9uIHJlcG9DYWxsT25Db21wbGV0ZUNhbGxiYWNrKHJlcG8sIGNhbGxiYWNrLCBzdGF0dXMsIGVycm9yUmVhc29uKSB7XG4gICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgIGV4Y2VwdGlvbkd1YXJkKCgpID0+IHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgPT09ICdvaycpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvZGUgPSAoc3RhdHVzIHx8ICdlcnJvcicpLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgbGV0IG1lc3NhZ2UgPSBjb2RlO1xuICAgICAgICAgICAgICAgIGlmIChlcnJvclJlYXNvbikge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlICs9ICc6ICcgKyBlcnJvclJlYXNvbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICBlcnJvci5jb2RlID0gY29kZTtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyB0cmFuc2FjdGlvbiwgYWRkcyBpdCB0byB0aGUgdHJhbnNhY3Rpb25zIHdlJ3JlIHRyYWNraW5nLCBhbmRcbiAqIHNlbmRzIGl0IHRvIHRoZSBzZXJ2ZXIgaWYgcG9zc2libGUuXG4gKlxuICogQHBhcmFtIHBhdGggLSBQYXRoIGF0IHdoaWNoIHRvIGRvIHRyYW5zYWN0aW9uLlxuICogQHBhcmFtIHRyYW5zYWN0aW9uVXBkYXRlIC0gVXBkYXRlIGNhbGxiYWNrLlxuICogQHBhcmFtIG9uQ29tcGxldGUgLSBDb21wbGV0aW9uIGNhbGxiYWNrLlxuICogQHBhcmFtIHVud2F0Y2hlciAtIEZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWQgd2hlbiB0aGUgdHJhbnNhY3Rpb24gbm8gbG9uZ2VyXG4gKiBuZWVkIGRhdGEgdXBkYXRlcyBmb3IgYHBhdGhgLlxuICogQHBhcmFtIGFwcGx5TG9jYWxseSAtIFdoZXRoZXIgb3Igbm90IHRvIG1ha2UgaW50ZXJtZWRpYXRlIHJlc3VsdHMgdmlzaWJsZVxuICovXG5mdW5jdGlvbiByZXBvU3RhcnRUcmFuc2FjdGlvbihyZXBvLCBwYXRoLCB0cmFuc2FjdGlvblVwZGF0ZSwgb25Db21wbGV0ZSwgdW53YXRjaGVyLCBhcHBseUxvY2FsbHkpIHtcbiAgICByZXBvTG9nKHJlcG8sICd0cmFuc2FjdGlvbiBvbiAnICsgcGF0aCk7XG4gICAgLy8gSW5pdGlhbGl6ZSB0cmFuc2FjdGlvbi5cbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IHtcbiAgICAgICAgcGF0aCxcbiAgICAgICAgdXBkYXRlOiB0cmFuc2FjdGlvblVwZGF0ZSxcbiAgICAgICAgb25Db21wbGV0ZSxcbiAgICAgICAgLy8gT25lIG9mIFRyYW5zYWN0aW9uU3RhdHVzIGVudW1zLlxuICAgICAgICBzdGF0dXM6IG51bGwsXG4gICAgICAgIC8vIFVzZWQgd2hlbiBjb21iaW5pbmcgdHJhbnNhY3Rpb25zIGF0IGRpZmZlcmVudCBsb2NhdGlvbnMgdG8gZmlndXJlIG91dFxuICAgICAgICAvLyB3aGljaCBvbmUgZ29lcyBmaXJzdC5cbiAgICAgICAgb3JkZXI6IExVSURHZW5lcmF0b3IoKSxcbiAgICAgICAgLy8gV2hldGhlciB0byByYWlzZSBsb2NhbCBldmVudHMgZm9yIHRoaXMgdHJhbnNhY3Rpb24uXG4gICAgICAgIGFwcGx5TG9jYWxseSxcbiAgICAgICAgLy8gQ291bnQgb2YgaG93IG1hbnkgdGltZXMgd2UndmUgcmV0cmllZCB0aGUgdHJhbnNhY3Rpb24uXG4gICAgICAgIHJldHJ5Q291bnQ6IDAsXG4gICAgICAgIC8vIEZ1bmN0aW9uIHRvIGNhbGwgdG8gY2xlYW4gdXAgb3VyIC5vbigpIGxpc3RlbmVyLlxuICAgICAgICB1bndhdGNoZXIsXG4gICAgICAgIC8vIFN0b3JlcyB3aHkgYSB0cmFuc2FjdGlvbiB3YXMgYWJvcnRlZC5cbiAgICAgICAgYWJvcnRSZWFzb246IG51bGwsXG4gICAgICAgIGN1cnJlbnRXcml0ZUlkOiBudWxsLFxuICAgICAgICBjdXJyZW50SW5wdXRTbmFwc2hvdDogbnVsbCxcbiAgICAgICAgY3VycmVudE91dHB1dFNuYXBzaG90UmF3OiBudWxsLFxuICAgICAgICBjdXJyZW50T3V0cHV0U25hcHNob3RSZXNvbHZlZDogbnVsbFxuICAgIH07XG4gICAgLy8gUnVuIHRyYW5zYWN0aW9uIGluaXRpYWxseS5cbiAgICBjb25zdCBjdXJyZW50U3RhdGUgPSByZXBvR2V0TGF0ZXN0U3RhdGUocmVwbywgcGF0aCwgdW5kZWZpbmVkKTtcbiAgICB0cmFuc2FjdGlvbi5jdXJyZW50SW5wdXRTbmFwc2hvdCA9IGN1cnJlbnRTdGF0ZTtcbiAgICBjb25zdCBuZXdWYWwgPSB0cmFuc2FjdGlvbi51cGRhdGUoY3VycmVudFN0YXRlLnZhbCgpKTtcbiAgICBpZiAobmV3VmFsID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gQWJvcnQgdHJhbnNhY3Rpb24uXG4gICAgICAgIHRyYW5zYWN0aW9uLnVud2F0Y2hlcigpO1xuICAgICAgICB0cmFuc2FjdGlvbi5jdXJyZW50T3V0cHV0U25hcHNob3RSYXcgPSBudWxsO1xuICAgICAgICB0cmFuc2FjdGlvbi5jdXJyZW50T3V0cHV0U25hcHNob3RSZXNvbHZlZCA9IG51bGw7XG4gICAgICAgIGlmICh0cmFuc2FjdGlvbi5vbkNvbXBsZXRlKSB7XG4gICAgICAgICAgICB0cmFuc2FjdGlvbi5vbkNvbXBsZXRlKG51bGwsIGZhbHNlLCB0cmFuc2FjdGlvbi5jdXJyZW50SW5wdXRTbmFwc2hvdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZhbGlkYXRlRmlyZWJhc2VEYXRhKCd0cmFuc2FjdGlvbiBmYWlsZWQ6IERhdGEgcmV0dXJuZWQgJywgbmV3VmFsLCB0cmFuc2FjdGlvbi5wYXRoKTtcbiAgICAgICAgLy8gTWFyayBhcyBydW4gYW5kIGFkZCB0byBvdXIgcXVldWUuXG4gICAgICAgIHRyYW5zYWN0aW9uLnN0YXR1cyA9IDAgLyogVHJhbnNhY3Rpb25TdGF0dXMuUlVOICovO1xuICAgICAgICBjb25zdCBxdWV1ZU5vZGUgPSB0cmVlU3ViVHJlZShyZXBvLnRyYW5zYWN0aW9uUXVldWVUcmVlXywgcGF0aCk7XG4gICAgICAgIGNvbnN0IG5vZGVRdWV1ZSA9IHRyZWVHZXRWYWx1ZShxdWV1ZU5vZGUpIHx8IFtdO1xuICAgICAgICBub2RlUXVldWUucHVzaCh0cmFuc2FjdGlvbik7XG4gICAgICAgIHRyZWVTZXRWYWx1ZShxdWV1ZU5vZGUsIG5vZGVRdWV1ZSk7XG4gICAgICAgIC8vIFVwZGF0ZSB2aXNpYmxlRGF0YSBhbmQgcmFpc2UgZXZlbnRzXG4gICAgICAgIC8vIE5vdGU6IFdlIGludGVudGlvbmFsbHkgcmFpc2UgZXZlbnRzIGFmdGVyIHVwZGF0aW5nIGFsbCBvZiBvdXJcbiAgICAgICAgLy8gdHJhbnNhY3Rpb24gc3RhdGUsIHNpbmNlIHRoZSB1c2VyIGNvdWxkIHN0YXJ0IG5ldyB0cmFuc2FjdGlvbnMgZnJvbSB0aGVcbiAgICAgICAgLy8gZXZlbnQgY2FsbGJhY2tzLlxuICAgICAgICBsZXQgcHJpb3JpdHlGb3JOb2RlO1xuICAgICAgICBpZiAodHlwZW9mIG5ld1ZhbCA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgICAgIG5ld1ZhbCAhPT0gbnVsbCAmJlxuICAgICAgICAgICAgY29udGFpbnMobmV3VmFsLCAnLnByaW9yaXR5JykpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICBwcmlvcml0eUZvck5vZGUgPSBzYWZlR2V0KG5ld1ZhbCwgJy5wcmlvcml0eScpO1xuICAgICAgICAgICAgYXNzZXJ0KGlzVmFsaWRQcmlvcml0eShwcmlvcml0eUZvck5vZGUpLCAnSW52YWxpZCBwcmlvcml0eSByZXR1cm5lZCBieSB0cmFuc2FjdGlvbi4gJyArXG4gICAgICAgICAgICAgICAgJ1ByaW9yaXR5IG11c3QgYmUgYSB2YWxpZCBzdHJpbmcsIGZpbml0ZSBudW1iZXIsIHNlcnZlciB2YWx1ZSwgb3IgbnVsbC4nKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnROb2RlID0gc3luY1RyZWVDYWxjQ29tcGxldGVFdmVudENhY2hlKHJlcG8uc2VydmVyU3luY1RyZWVfLCBwYXRoKSB8fFxuICAgICAgICAgICAgICAgIENoaWxkcmVuTm9kZS5FTVBUWV9OT0RFO1xuICAgICAgICAgICAgcHJpb3JpdHlGb3JOb2RlID0gY3VycmVudE5vZGUuZ2V0UHJpb3JpdHkoKS52YWwoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzZXJ2ZXJWYWx1ZXMgPSByZXBvR2VuZXJhdGVTZXJ2ZXJWYWx1ZXMocmVwbyk7XG4gICAgICAgIGNvbnN0IG5ld05vZGVVbnJlc29sdmVkID0gbm9kZUZyb21KU09OKG5ld1ZhbCwgcHJpb3JpdHlGb3JOb2RlKTtcbiAgICAgICAgY29uc3QgbmV3Tm9kZSA9IHJlc29sdmVEZWZlcnJlZFZhbHVlU25hcHNob3QobmV3Tm9kZVVucmVzb2x2ZWQsIGN1cnJlbnRTdGF0ZSwgc2VydmVyVmFsdWVzKTtcbiAgICAgICAgdHJhbnNhY3Rpb24uY3VycmVudE91dHB1dFNuYXBzaG90UmF3ID0gbmV3Tm9kZVVucmVzb2x2ZWQ7XG4gICAgICAgIHRyYW5zYWN0aW9uLmN1cnJlbnRPdXRwdXRTbmFwc2hvdFJlc29sdmVkID0gbmV3Tm9kZTtcbiAgICAgICAgdHJhbnNhY3Rpb24uY3VycmVudFdyaXRlSWQgPSByZXBvR2V0TmV4dFdyaXRlSWQocmVwbyk7XG4gICAgICAgIGNvbnN0IGV2ZW50cyA9IHN5bmNUcmVlQXBwbHlVc2VyT3ZlcndyaXRlKHJlcG8uc2VydmVyU3luY1RyZWVfLCBwYXRoLCBuZXdOb2RlLCB0cmFuc2FjdGlvbi5jdXJyZW50V3JpdGVJZCwgdHJhbnNhY3Rpb24uYXBwbHlMb2NhbGx5KTtcbiAgICAgICAgZXZlbnRRdWV1ZVJhaXNlRXZlbnRzRm9yQ2hhbmdlZFBhdGgocmVwby5ldmVudFF1ZXVlXywgcGF0aCwgZXZlbnRzKTtcbiAgICAgICAgcmVwb1NlbmRSZWFkeVRyYW5zYWN0aW9ucyhyZXBvLCByZXBvLnRyYW5zYWN0aW9uUXVldWVUcmVlXyk7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0gZXhjbHVkZVNldHMgLSBBIHNwZWNpZmljIHNldCB0byBleGNsdWRlXG4gKi9cbmZ1bmN0aW9uIHJlcG9HZXRMYXRlc3RTdGF0ZShyZXBvLCBwYXRoLCBleGNsdWRlU2V0cykge1xuICAgIHJldHVybiAoc3luY1RyZWVDYWxjQ29tcGxldGVFdmVudENhY2hlKHJlcG8uc2VydmVyU3luY1RyZWVfLCBwYXRoLCBleGNsdWRlU2V0cykgfHxcbiAgICAgICAgQ2hpbGRyZW5Ob2RlLkVNUFRZX05PREUpO1xufVxuLyoqXG4gKiBTZW5kcyBhbnkgYWxyZWFkeS1ydW4gdHJhbnNhY3Rpb25zIHRoYXQgYXJlbid0IHdhaXRpbmcgZm9yIG91dHN0YW5kaW5nXG4gKiB0cmFuc2FjdGlvbnMgdG8gY29tcGxldGUuXG4gKlxuICogRXh0ZXJuYWxseSBpdCdzIGNhbGxlZCB3aXRoIG5vIGFyZ3VtZW50cywgYnV0IGl0IGNhbGxzIGl0c2VsZiByZWN1cnNpdmVseVxuICogd2l0aCBhIHBhcnRpY3VsYXIgdHJhbnNhY3Rpb25RdWV1ZVRyZWUgbm9kZSB0byByZWN1cnNlIHRocm91Z2ggdGhlIHRyZWUuXG4gKlxuICogQHBhcmFtIG5vZGUgLSB0cmFuc2FjdGlvblF1ZXVlVHJlZSBub2RlIHRvIHN0YXJ0IGF0LlxuICovXG5mdW5jdGlvbiByZXBvU2VuZFJlYWR5VHJhbnNhY3Rpb25zKHJlcG8sIG5vZGUgPSByZXBvLnRyYW5zYWN0aW9uUXVldWVUcmVlXykge1xuICAgIC8vIEJlZm9yZSByZWN1cnNpbmcsIG1ha2Ugc3VyZSBhbnkgY29tcGxldGVkIHRyYW5zYWN0aW9ucyBhcmUgcmVtb3ZlZC5cbiAgICBpZiAoIW5vZGUpIHtcbiAgICAgICAgcmVwb1BydW5lQ29tcGxldGVkVHJhbnNhY3Rpb25zQmVsb3dOb2RlKHJlcG8sIG5vZGUpO1xuICAgIH1cbiAgICBpZiAodHJlZUdldFZhbHVlKG5vZGUpKSB7XG4gICAgICAgIGNvbnN0IHF1ZXVlID0gcmVwb0J1aWxkVHJhbnNhY3Rpb25RdWV1ZShyZXBvLCBub2RlKTtcbiAgICAgICAgYXNzZXJ0KHF1ZXVlLmxlbmd0aCA+IDAsICdTZW5kaW5nIHplcm8gbGVuZ3RoIHRyYW5zYWN0aW9uIHF1ZXVlJyk7XG4gICAgICAgIGNvbnN0IGFsbFJ1biA9IHF1ZXVlLmV2ZXJ5KCh0cmFuc2FjdGlvbikgPT4gdHJhbnNhY3Rpb24uc3RhdHVzID09PSAwIC8qIFRyYW5zYWN0aW9uU3RhdHVzLlJVTiAqLyk7XG4gICAgICAgIC8vIElmIHRoZXkncmUgYWxsIHJ1biAoYW5kIG5vdCBzZW50KSwgd2UgY2FuIHNlbmQgdGhlbS4gIEVsc2UsIHdlIG11c3Qgd2FpdC5cbiAgICAgICAgaWYgKGFsbFJ1bikge1xuICAgICAgICAgICAgcmVwb1NlbmRUcmFuc2FjdGlvblF1ZXVlKHJlcG8sIHRyZWVHZXRQYXRoKG5vZGUpLCBxdWV1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAodHJlZUhhc0NoaWxkcmVuKG5vZGUpKSB7XG4gICAgICAgIHRyZWVGb3JFYWNoQ2hpbGQobm9kZSwgY2hpbGROb2RlID0+IHtcbiAgICAgICAgICAgIHJlcG9TZW5kUmVhZHlUcmFuc2FjdGlvbnMocmVwbywgY2hpbGROb2RlKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLyoqXG4gKiBHaXZlbiBhIGxpc3Qgb2YgcnVuIHRyYW5zYWN0aW9ucywgc2VuZCB0aGVtIHRvIHRoZSBzZXJ2ZXIgYW5kIHRoZW4gaGFuZGxlXG4gKiB0aGUgcmVzdWx0IChzdWNjZXNzIG9yIGZhaWx1cmUpLlxuICpcbiAqIEBwYXJhbSBwYXRoIC0gVGhlIGxvY2F0aW9uIG9mIHRoZSBxdWV1ZS5cbiAqIEBwYXJhbSBxdWV1ZSAtIFF1ZXVlIG9mIHRyYW5zYWN0aW9ucyB1bmRlciB0aGUgc3BlY2lmaWVkIGxvY2F0aW9uLlxuICovXG5mdW5jdGlvbiByZXBvU2VuZFRyYW5zYWN0aW9uUXVldWUocmVwbywgcGF0aCwgcXVldWUpIHtcbiAgICAvLyBNYXJrIHRyYW5zYWN0aW9ucyBhcyBzZW50IGFuZCBpbmNyZW1lbnQgcmV0cnkgY291bnQhXG4gICAgY29uc3Qgc2V0c1RvSWdub3JlID0gcXVldWUubWFwKHR4biA9PiB7XG4gICAgICAgIHJldHVybiB0eG4uY3VycmVudFdyaXRlSWQ7XG4gICAgfSk7XG4gICAgY29uc3QgbGF0ZXN0U3RhdGUgPSByZXBvR2V0TGF0ZXN0U3RhdGUocmVwbywgcGF0aCwgc2V0c1RvSWdub3JlKTtcbiAgICBsZXQgc25hcFRvU2VuZCA9IGxhdGVzdFN0YXRlO1xuICAgIGNvbnN0IGxhdGVzdEhhc2ggPSBsYXRlc3RTdGF0ZS5oYXNoKCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBxdWV1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCB0eG4gPSBxdWV1ZVtpXTtcbiAgICAgICAgYXNzZXJ0KHR4bi5zdGF0dXMgPT09IDAgLyogVHJhbnNhY3Rpb25TdGF0dXMuUlVOICovLCAndHJ5VG9TZW5kVHJhbnNhY3Rpb25RdWV1ZV86IGl0ZW1zIGluIHF1ZXVlIHNob3VsZCBhbGwgYmUgcnVuLicpO1xuICAgICAgICB0eG4uc3RhdHVzID0gMSAvKiBUcmFuc2FjdGlvblN0YXR1cy5TRU5UICovO1xuICAgICAgICB0eG4ucmV0cnlDb3VudCsrO1xuICAgICAgICBjb25zdCByZWxhdGl2ZVBhdGggPSBuZXdSZWxhdGl2ZVBhdGgocGF0aCwgdHhuLnBhdGgpO1xuICAgICAgICAvLyBJZiB3ZSd2ZSBnb3R0ZW4gdG8gdGhpcyBwb2ludCwgdGhlIG91dHB1dCBzbmFwc2hvdCBtdXN0IGJlIGRlZmluZWQuXG4gICAgICAgIHNuYXBUb1NlbmQgPSBzbmFwVG9TZW5kLnVwZGF0ZUNoaWxkKHJlbGF0aXZlUGF0aCAvKiogQHR5cGUgeyFOb2RlfSAqLywgdHhuLmN1cnJlbnRPdXRwdXRTbmFwc2hvdFJhdyk7XG4gICAgfVxuICAgIGNvbnN0IGRhdGFUb1NlbmQgPSBzbmFwVG9TZW5kLnZhbCh0cnVlKTtcbiAgICBjb25zdCBwYXRoVG9TZW5kID0gcGF0aDtcbiAgICAvLyBTZW5kIHRoZSBwdXQuXG4gICAgcmVwby5zZXJ2ZXJfLnB1dChwYXRoVG9TZW5kLnRvU3RyaW5nKCksIGRhdGFUb1NlbmQsIChzdGF0dXMpID0+IHtcbiAgICAgICAgcmVwb0xvZyhyZXBvLCAndHJhbnNhY3Rpb24gcHV0IHJlc3BvbnNlJywge1xuICAgICAgICAgICAgcGF0aDogcGF0aFRvU2VuZC50b1N0cmluZygpLFxuICAgICAgICAgICAgc3RhdHVzXG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgZXZlbnRzID0gW107XG4gICAgICAgIGlmIChzdGF0dXMgPT09ICdvaycpIHtcbiAgICAgICAgICAgIC8vIFF1ZXVlIHVwIHRoZSBjYWxsYmFja3MgYW5kIGZpcmUgdGhlbSBhZnRlciBjbGVhbmluZyB1cCBhbGwgb2Ygb3VyXG4gICAgICAgICAgICAvLyB0cmFuc2FjdGlvbiBzdGF0ZSwgc2luY2UgdGhlIGNhbGxiYWNrIGNvdWxkIHRyaWdnZXIgbW9yZVxuICAgICAgICAgICAgLy8gdHJhbnNhY3Rpb25zIG9yIHNldHMuXG4gICAgICAgICAgICBjb25zdCBjYWxsYmFja3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBxdWV1ZVtpXS5zdGF0dXMgPSAyIC8qIFRyYW5zYWN0aW9uU3RhdHVzLkNPTVBMRVRFRCAqLztcbiAgICAgICAgICAgICAgICBldmVudHMgPSBldmVudHMuY29uY2F0KHN5bmNUcmVlQWNrVXNlcldyaXRlKHJlcG8uc2VydmVyU3luY1RyZWVfLCBxdWV1ZVtpXS5jdXJyZW50V3JpdGVJZCkpO1xuICAgICAgICAgICAgICAgIGlmIChxdWV1ZVtpXS5vbkNvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIG5ldmVyIHVuc2V0IHRoZSBvdXRwdXQgc25hcHNob3QsIGFuZCBnaXZlbiB0aGF0IHRoaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gdHJhbnNhY3Rpb24gaXMgY29tcGxldGUsIGl0IHNob3VsZCBiZSBzZXRcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzLnB1c2goKCkgPT4gcXVldWVbaV0ub25Db21wbGV0ZShudWxsLCB0cnVlLCBxdWV1ZVtpXS5jdXJyZW50T3V0cHV0U25hcHNob3RSZXNvbHZlZCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBxdWV1ZVtpXS51bndhdGNoZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE5vdyByZW1vdmUgdGhlIGNvbXBsZXRlZCB0cmFuc2FjdGlvbnMuXG4gICAgICAgICAgICByZXBvUHJ1bmVDb21wbGV0ZWRUcmFuc2FjdGlvbnNCZWxvd05vZGUocmVwbywgdHJlZVN1YlRyZWUocmVwby50cmFuc2FjdGlvblF1ZXVlVHJlZV8sIHBhdGgpKTtcbiAgICAgICAgICAgIC8vIFRoZXJlIG1heSBiZSBwZW5kaW5nIHRyYW5zYWN0aW9ucyB0aGF0IHdlIGNhbiBub3cgc2VuZC5cbiAgICAgICAgICAgIHJlcG9TZW5kUmVhZHlUcmFuc2FjdGlvbnMocmVwbywgcmVwby50cmFuc2FjdGlvblF1ZXVlVHJlZV8pO1xuICAgICAgICAgICAgZXZlbnRRdWV1ZVJhaXNlRXZlbnRzRm9yQ2hhbmdlZFBhdGgocmVwby5ldmVudFF1ZXVlXywgcGF0aCwgZXZlbnRzKTtcbiAgICAgICAgICAgIC8vIEZpbmFsbHksIHRyaWdnZXIgb25Db21wbGV0ZSBjYWxsYmFja3MuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNhbGxiYWNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGV4Y2VwdGlvbkd1YXJkKGNhbGxiYWNrc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyB0cmFuc2FjdGlvbnMgYXJlIG5vIGxvbmdlciBzZW50LiAgVXBkYXRlIHRoZWlyIHN0YXR1cyBhcHByb3ByaWF0ZWx5LlxuICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gJ2RhdGFzdGFsZScpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChxdWV1ZVtpXS5zdGF0dXMgPT09IDMgLyogVHJhbnNhY3Rpb25TdGF0dXMuU0VOVF9ORUVEU19BQk9SVCAqLykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcXVldWVbaV0uc3RhdHVzID0gNCAvKiBUcmFuc2FjdGlvblN0YXR1cy5ORUVEU19BQk9SVCAqLztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlW2ldLnN0YXR1cyA9IDAgLyogVHJhbnNhY3Rpb25TdGF0dXMuUlVOICovO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgd2FybigndHJhbnNhY3Rpb24gYXQgJyArIHBhdGhUb1NlbmQudG9TdHJpbmcoKSArICcgZmFpbGVkOiAnICsgc3RhdHVzKTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlW2ldLnN0YXR1cyA9IDQgLyogVHJhbnNhY3Rpb25TdGF0dXMuTkVFRFNfQUJPUlQgKi87XG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlW2ldLmFib3J0UmVhc29uID0gc3RhdHVzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlcG9SZXJ1blRyYW5zYWN0aW9ucyhyZXBvLCBwYXRoKTtcbiAgICAgICAgfVxuICAgIH0sIGxhdGVzdEhhc2gpO1xufVxuLyoqXG4gKiBGaW5kcyBhbGwgdHJhbnNhY3Rpb25zIGRlcGVuZGVudCBvbiB0aGUgZGF0YSBhdCBjaGFuZ2VkUGF0aCBhbmQgcmVydW5zIHRoZW0uXG4gKlxuICogU2hvdWxkIGJlIGNhbGxlZCBhbnkgdGltZSBjYWNoZWQgZGF0YSBjaGFuZ2VzLlxuICpcbiAqIFJldHVybiB0aGUgaGlnaGVzdCBwYXRoIHRoYXQgd2FzIGFmZmVjdGVkIGJ5IHJlcnVubmluZyB0cmFuc2FjdGlvbnMuIFRoaXNcbiAqIGlzIHRoZSBwYXRoIGF0IHdoaWNoIGV2ZW50cyBuZWVkIHRvIGJlIHJhaXNlZCBmb3IuXG4gKlxuICogQHBhcmFtIGNoYW5nZWRQYXRoIC0gVGhlIHBhdGggaW4gbWVyZ2VkRGF0YSB0aGF0IGNoYW5nZWQuXG4gKiBAcmV0dXJucyBUaGUgcm9vdG1vc3QgcGF0aCB0aGF0IHdhcyBhZmZlY3RlZCBieSByZXJ1bm5pbmcgdHJhbnNhY3Rpb25zLlxuICovXG5mdW5jdGlvbiByZXBvUmVydW5UcmFuc2FjdGlvbnMocmVwbywgY2hhbmdlZFBhdGgpIHtcbiAgICBjb25zdCByb290TW9zdFRyYW5zYWN0aW9uTm9kZSA9IHJlcG9HZXRBbmNlc3RvclRyYW5zYWN0aW9uTm9kZShyZXBvLCBjaGFuZ2VkUGF0aCk7XG4gICAgY29uc3QgcGF0aCA9IHRyZWVHZXRQYXRoKHJvb3RNb3N0VHJhbnNhY3Rpb25Ob2RlKTtcbiAgICBjb25zdCBxdWV1ZSA9IHJlcG9CdWlsZFRyYW5zYWN0aW9uUXVldWUocmVwbywgcm9vdE1vc3RUcmFuc2FjdGlvbk5vZGUpO1xuICAgIHJlcG9SZXJ1blRyYW5zYWN0aW9uUXVldWUocmVwbywgcXVldWUsIHBhdGgpO1xuICAgIHJldHVybiBwYXRoO1xufVxuLyoqXG4gKiBEb2VzIGFsbCB0aGUgd29yayBvZiByZXJ1bm5pbmcgdHJhbnNhY3Rpb25zIChhcyB3ZWxsIGFzIGNsZWFucyB1cCBhYm9ydGVkXG4gKiB0cmFuc2FjdGlvbnMgYW5kIHdoYXRub3QpLlxuICpcbiAqIEBwYXJhbSBxdWV1ZSAtIFRoZSBxdWV1ZSBvZiB0cmFuc2FjdGlvbnMgdG8gcnVuLlxuICogQHBhcmFtIHBhdGggLSBUaGUgcGF0aCB0aGUgcXVldWUgaXMgZm9yLlxuICovXG5mdW5jdGlvbiByZXBvUmVydW5UcmFuc2FjdGlvblF1ZXVlKHJlcG8sIHF1ZXVlLCBwYXRoKSB7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm47IC8vIE5vdGhpbmcgdG8gZG8hXG4gICAgfVxuICAgIC8vIFF1ZXVlIHVwIHRoZSBjYWxsYmFja3MgYW5kIGZpcmUgdGhlbSBhZnRlciBjbGVhbmluZyB1cCBhbGwgb2Ygb3VyXG4gICAgLy8gdHJhbnNhY3Rpb24gc3RhdGUsIHNpbmNlIHRoZSBjYWxsYmFjayBjb3VsZCB0cmlnZ2VyIG1vcmUgdHJhbnNhY3Rpb25zIG9yXG4gICAgLy8gc2V0cy5cbiAgICBjb25zdCBjYWxsYmFja3MgPSBbXTtcbiAgICBsZXQgZXZlbnRzID0gW107XG4gICAgLy8gSWdub3JlIGFsbCBvZiB0aGUgc2V0cyB3ZSdyZSBnb2luZyB0byByZS1ydW4uXG4gICAgY29uc3QgdHhuc1RvUmVydW4gPSBxdWV1ZS5maWx0ZXIocSA9PiB7XG4gICAgICAgIHJldHVybiBxLnN0YXR1cyA9PT0gMCAvKiBUcmFuc2FjdGlvblN0YXR1cy5SVU4gKi87XG4gICAgfSk7XG4gICAgY29uc3Qgc2V0c1RvSWdub3JlID0gdHhuc1RvUmVydW4ubWFwKHEgPT4ge1xuICAgICAgICByZXR1cm4gcS5jdXJyZW50V3JpdGVJZDtcbiAgICB9KTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gcXVldWVbaV07XG4gICAgICAgIGNvbnN0IHJlbGF0aXZlUGF0aCA9IG5ld1JlbGF0aXZlUGF0aChwYXRoLCB0cmFuc2FjdGlvbi5wYXRoKTtcbiAgICAgICAgbGV0IGFib3J0VHJhbnNhY3Rpb24gPSBmYWxzZSwgYWJvcnRSZWFzb247XG4gICAgICAgIGFzc2VydChyZWxhdGl2ZVBhdGggIT09IG51bGwsICdyZXJ1blRyYW5zYWN0aW9uc1VuZGVyTm9kZV86IHJlbGF0aXZlUGF0aCBzaG91bGQgbm90IGJlIG51bGwuJyk7XG4gICAgICAgIGlmICh0cmFuc2FjdGlvbi5zdGF0dXMgPT09IDQgLyogVHJhbnNhY3Rpb25TdGF0dXMuTkVFRFNfQUJPUlQgKi8pIHtcbiAgICAgICAgICAgIGFib3J0VHJhbnNhY3Rpb24gPSB0cnVlO1xuICAgICAgICAgICAgYWJvcnRSZWFzb24gPSB0cmFuc2FjdGlvbi5hYm9ydFJlYXNvbjtcbiAgICAgICAgICAgIGV2ZW50cyA9IGV2ZW50cy5jb25jYXQoc3luY1RyZWVBY2tVc2VyV3JpdGUocmVwby5zZXJ2ZXJTeW5jVHJlZV8sIHRyYW5zYWN0aW9uLmN1cnJlbnRXcml0ZUlkLCB0cnVlKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHJhbnNhY3Rpb24uc3RhdHVzID09PSAwIC8qIFRyYW5zYWN0aW9uU3RhdHVzLlJVTiAqLykge1xuICAgICAgICAgICAgaWYgKHRyYW5zYWN0aW9uLnJldHJ5Q291bnQgPj0gTUFYX1RSQU5TQUNUSU9OX1JFVFJJRVMpIHtcbiAgICAgICAgICAgICAgICBhYm9ydFRyYW5zYWN0aW9uID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBhYm9ydFJlYXNvbiA9ICdtYXhyZXRyeSc7XG4gICAgICAgICAgICAgICAgZXZlbnRzID0gZXZlbnRzLmNvbmNhdChzeW5jVHJlZUFja1VzZXJXcml0ZShyZXBvLnNlcnZlclN5bmNUcmVlXywgdHJhbnNhY3Rpb24uY3VycmVudFdyaXRlSWQsIHRydWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgY29kZSByZXJ1bnMgYSB0cmFuc2FjdGlvblxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnROb2RlID0gcmVwb0dldExhdGVzdFN0YXRlKHJlcG8sIHRyYW5zYWN0aW9uLnBhdGgsIHNldHNUb0lnbm9yZSk7XG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24uY3VycmVudElucHV0U25hcHNob3QgPSBjdXJyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdEYXRhID0gcXVldWVbaV0udXBkYXRlKGN1cnJlbnROb2RlLnZhbCgpKTtcbiAgICAgICAgICAgICAgICBpZiAobmV3RGF0YSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlRmlyZWJhc2VEYXRhKCd0cmFuc2FjdGlvbiBmYWlsZWQ6IERhdGEgcmV0dXJuZWQgJywgbmV3RGF0YSwgdHJhbnNhY3Rpb24ucGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXdEYXRhTm9kZSA9IG5vZGVGcm9tSlNPTihuZXdEYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGFzRXhwbGljaXRQcmlvcml0eSA9IHR5cGVvZiBuZXdEYXRhID09PSAnb2JqZWN0JyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3RGF0YSAhPSBudWxsICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250YWlucyhuZXdEYXRhLCAnLnByaW9yaXR5Jyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaGFzRXhwbGljaXRQcmlvcml0eSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gS2VlcCB0aGUgb2xkIHByaW9yaXR5IGlmIHRoZXJlIHdhc24ndCBhIHByaW9yaXR5IGV4cGxpY2l0bHkgc3BlY2lmaWVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3RGF0YU5vZGUgPSBuZXdEYXRhTm9kZS51cGRhdGVQcmlvcml0eShjdXJyZW50Tm9kZS5nZXRQcmlvcml0eSgpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvbGRXcml0ZUlkID0gdHJhbnNhY3Rpb24uY3VycmVudFdyaXRlSWQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlcnZlclZhbHVlcyA9IHJlcG9HZW5lcmF0ZVNlcnZlclZhbHVlcyhyZXBvKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3Tm9kZVJlc29sdmVkID0gcmVzb2x2ZURlZmVycmVkVmFsdWVTbmFwc2hvdChuZXdEYXRhTm9kZSwgY3VycmVudE5vZGUsIHNlcnZlclZhbHVlcyk7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uLmN1cnJlbnRPdXRwdXRTbmFwc2hvdFJhdyA9IG5ld0RhdGFOb2RlO1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbi5jdXJyZW50T3V0cHV0U25hcHNob3RSZXNvbHZlZCA9IG5ld05vZGVSZXNvbHZlZDtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24uY3VycmVudFdyaXRlSWQgPSByZXBvR2V0TmV4dFdyaXRlSWQocmVwbyk7XG4gICAgICAgICAgICAgICAgICAgIC8vIE11dGF0ZXMgc2V0c1RvSWdub3JlIGluIHBsYWNlXG4gICAgICAgICAgICAgICAgICAgIHNldHNUb0lnbm9yZS5zcGxpY2Uoc2V0c1RvSWdub3JlLmluZGV4T2Yob2xkV3JpdGVJZCksIDEpO1xuICAgICAgICAgICAgICAgICAgICBldmVudHMgPSBldmVudHMuY29uY2F0KHN5bmNUcmVlQXBwbHlVc2VyT3ZlcndyaXRlKHJlcG8uc2VydmVyU3luY1RyZWVfLCB0cmFuc2FjdGlvbi5wYXRoLCBuZXdOb2RlUmVzb2x2ZWQsIHRyYW5zYWN0aW9uLmN1cnJlbnRXcml0ZUlkLCB0cmFuc2FjdGlvbi5hcHBseUxvY2FsbHkpKTtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRzID0gZXZlbnRzLmNvbmNhdChzeW5jVHJlZUFja1VzZXJXcml0ZShyZXBvLnNlcnZlclN5bmNUcmVlXywgb2xkV3JpdGVJZCwgdHJ1ZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYWJvcnRUcmFuc2FjdGlvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGFib3J0UmVhc29uID0gJ25vZGF0YSc7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50cyA9IGV2ZW50cy5jb25jYXQoc3luY1RyZWVBY2tVc2VyV3JpdGUocmVwby5zZXJ2ZXJTeW5jVHJlZV8sIHRyYW5zYWN0aW9uLmN1cnJlbnRXcml0ZUlkLCB0cnVlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGV2ZW50UXVldWVSYWlzZUV2ZW50c0ZvckNoYW5nZWRQYXRoKHJlcG8uZXZlbnRRdWV1ZV8sIHBhdGgsIGV2ZW50cyk7XG4gICAgICAgIGV2ZW50cyA9IFtdO1xuICAgICAgICBpZiAoYWJvcnRUcmFuc2FjdGlvbikge1xuICAgICAgICAgICAgLy8gQWJvcnQuXG4gICAgICAgICAgICBxdWV1ZVtpXS5zdGF0dXMgPSAyIC8qIFRyYW5zYWN0aW9uU3RhdHVzLkNPTVBMRVRFRCAqLztcbiAgICAgICAgICAgIC8vIFJlbW92aW5nIGEgbGlzdGVuZXIgY2FuIHRyaWdnZXIgcHJ1bmluZyB3aGljaCBjYW4gbXVjayB3aXRoXG4gICAgICAgICAgICAvLyBtZXJnZWREYXRhL3Zpc2libGVEYXRhIChhcyBpdCBwcnVuZXMgZGF0YSkuIFNvIGRlZmVyIHRoZSB1bndhdGNoZXJcbiAgICAgICAgICAgIC8vIHVudGlsIHdlJ3JlIGRvbmUuXG4gICAgICAgICAgICAoZnVuY3Rpb24gKHVud2F0Y2hlcikge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQodW53YXRjaGVyLCBNYXRoLmZsb29yKDApKTtcbiAgICAgICAgICAgIH0pKHF1ZXVlW2ldLnVud2F0Y2hlcik7XG4gICAgICAgICAgICBpZiAocXVldWVbaV0ub25Db21wbGV0ZSkge1xuICAgICAgICAgICAgICAgIGlmIChhYm9ydFJlYXNvbiA9PT0gJ25vZGF0YScpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzLnB1c2goKCkgPT4gcXVldWVbaV0ub25Db21wbGV0ZShudWxsLCBmYWxzZSwgcXVldWVbaV0uY3VycmVudElucHV0U25hcHNob3QpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5wdXNoKCgpID0+IHF1ZXVlW2ldLm9uQ29tcGxldGUobmV3IEVycm9yKGFib3J0UmVhc29uKSwgZmFsc2UsIG51bGwpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gQ2xlYW4gdXAgY29tcGxldGVkIHRyYW5zYWN0aW9ucy5cbiAgICByZXBvUHJ1bmVDb21wbGV0ZWRUcmFuc2FjdGlvbnNCZWxvd05vZGUocmVwbywgcmVwby50cmFuc2FjdGlvblF1ZXVlVHJlZV8pO1xuICAgIC8vIE5vdyBmaXJlIGNhbGxiYWNrcywgbm93IHRoYXQgd2UncmUgaW4gYSBnb29kLCBrbm93biBzdGF0ZS5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNhbGxiYWNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBleGNlcHRpb25HdWFyZChjYWxsYmFja3NbaV0pO1xuICAgIH1cbiAgICAvLyBUcnkgdG8gc2VuZCB0aGUgdHJhbnNhY3Rpb24gcmVzdWx0IHRvIHRoZSBzZXJ2ZXIuXG4gICAgcmVwb1NlbmRSZWFkeVRyYW5zYWN0aW9ucyhyZXBvLCByZXBvLnRyYW5zYWN0aW9uUXVldWVUcmVlXyk7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIHJvb3Rtb3N0IGFuY2VzdG9yIG5vZGUgb2YgdGhlIHNwZWNpZmllZCBwYXRoIHRoYXQgaGFzIGEgcGVuZGluZ1xuICogdHJhbnNhY3Rpb24gb24gaXQsIG9yIGp1c3QgcmV0dXJucyB0aGUgbm9kZSBmb3IgdGhlIGdpdmVuIHBhdGggaWYgdGhlcmUgYXJlXG4gKiBubyBwZW5kaW5nIHRyYW5zYWN0aW9ucyBvbiBhbnkgYW5jZXN0b3IuXG4gKlxuICogQHBhcmFtIHBhdGggLSBUaGUgbG9jYXRpb24gdG8gc3RhcnQgYXQuXG4gKiBAcmV0dXJucyBUaGUgcm9vdG1vc3Qgbm9kZSB3aXRoIGEgdHJhbnNhY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIHJlcG9HZXRBbmNlc3RvclRyYW5zYWN0aW9uTm9kZShyZXBvLCBwYXRoKSB7XG4gICAgbGV0IGZyb250O1xuICAgIC8vIFN0YXJ0IGF0IHRoZSByb290IGFuZCB3YWxrIGRlZXBlciBpbnRvIHRoZSB0cmVlIHRvd2FyZHMgcGF0aCB1bnRpbCB3ZVxuICAgIC8vIGZpbmQgYSBub2RlIHdpdGggcGVuZGluZyB0cmFuc2FjdGlvbnMuXG4gICAgbGV0IHRyYW5zYWN0aW9uTm9kZSA9IHJlcG8udHJhbnNhY3Rpb25RdWV1ZVRyZWVfO1xuICAgIGZyb250ID0gcGF0aEdldEZyb250KHBhdGgpO1xuICAgIHdoaWxlIChmcm9udCAhPT0gbnVsbCAmJiB0cmVlR2V0VmFsdWUodHJhbnNhY3Rpb25Ob2RlKSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRyYW5zYWN0aW9uTm9kZSA9IHRyZWVTdWJUcmVlKHRyYW5zYWN0aW9uTm9kZSwgZnJvbnQpO1xuICAgICAgICBwYXRoID0gcGF0aFBvcEZyb250KHBhdGgpO1xuICAgICAgICBmcm9udCA9IHBhdGhHZXRGcm9udChwYXRoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRyYW5zYWN0aW9uTm9kZTtcbn1cbi8qKlxuICogQnVpbGRzIHRoZSBxdWV1ZSBvZiBhbGwgdHJhbnNhY3Rpb25zIGF0IG9yIGJlbG93IHRoZSBzcGVjaWZpZWRcbiAqIHRyYW5zYWN0aW9uTm9kZS5cbiAqXG4gKiBAcGFyYW0gdHJhbnNhY3Rpb25Ob2RlXG4gKiBAcmV0dXJucyBUaGUgZ2VuZXJhdGVkIHF1ZXVlLlxuICovXG5mdW5jdGlvbiByZXBvQnVpbGRUcmFuc2FjdGlvblF1ZXVlKHJlcG8sIHRyYW5zYWN0aW9uTm9kZSkge1xuICAgIC8vIFdhbGsgYW55IGNoaWxkIHRyYW5zYWN0aW9uIHF1ZXVlcyBhbmQgYWdncmVnYXRlIHRoZW0gaW50byBhIHNpbmdsZSBxdWV1ZS5cbiAgICBjb25zdCB0cmFuc2FjdGlvblF1ZXVlID0gW107XG4gICAgcmVwb0FnZ3JlZ2F0ZVRyYW5zYWN0aW9uUXVldWVzRm9yTm9kZShyZXBvLCB0cmFuc2FjdGlvbk5vZGUsIHRyYW5zYWN0aW9uUXVldWUpO1xuICAgIC8vIFNvcnQgdGhlbSBieSB0aGUgb3JkZXIgdGhlIHRyYW5zYWN0aW9ucyB3ZXJlIGNyZWF0ZWQuXG4gICAgdHJhbnNhY3Rpb25RdWV1ZS5zb3J0KChhLCBiKSA9PiBhLm9yZGVyIC0gYi5vcmRlcik7XG4gICAgcmV0dXJuIHRyYW5zYWN0aW9uUXVldWU7XG59XG5mdW5jdGlvbiByZXBvQWdncmVnYXRlVHJhbnNhY3Rpb25RdWV1ZXNGb3JOb2RlKHJlcG8sIG5vZGUsIHF1ZXVlKSB7XG4gICAgY29uc3Qgbm9kZVF1ZXVlID0gdHJlZUdldFZhbHVlKG5vZGUpO1xuICAgIGlmIChub2RlUXVldWUpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2RlUXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHF1ZXVlLnB1c2gobm9kZVF1ZXVlW2ldKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0cmVlRm9yRWFjaENoaWxkKG5vZGUsIGNoaWxkID0+IHtcbiAgICAgICAgcmVwb0FnZ3JlZ2F0ZVRyYW5zYWN0aW9uUXVldWVzRm9yTm9kZShyZXBvLCBjaGlsZCwgcXVldWUpO1xuICAgIH0pO1xufVxuLyoqXG4gKiBSZW1vdmUgQ09NUExFVEVEIHRyYW5zYWN0aW9ucyBhdCBvciBiZWxvdyB0aGlzIG5vZGUgaW4gdGhlIHRyYW5zYWN0aW9uUXVldWVUcmVlXy5cbiAqL1xuZnVuY3Rpb24gcmVwb1BydW5lQ29tcGxldGVkVHJhbnNhY3Rpb25zQmVsb3dOb2RlKHJlcG8sIG5vZGUpIHtcbiAgICBjb25zdCBxdWV1ZSA9IHRyZWVHZXRWYWx1ZShub2RlKTtcbiAgICBpZiAocXVldWUpIHtcbiAgICAgICAgbGV0IHRvID0gMDtcbiAgICAgICAgZm9yIChsZXQgZnJvbSA9IDA7IGZyb20gPCBxdWV1ZS5sZW5ndGg7IGZyb20rKykge1xuICAgICAgICAgICAgaWYgKHF1ZXVlW2Zyb21dLnN0YXR1cyAhPT0gMiAvKiBUcmFuc2FjdGlvblN0YXR1cy5DT01QTEVURUQgKi8pIHtcbiAgICAgICAgICAgICAgICBxdWV1ZVt0b10gPSBxdWV1ZVtmcm9tXTtcbiAgICAgICAgICAgICAgICB0bysrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlLmxlbmd0aCA9IHRvO1xuICAgICAgICB0cmVlU2V0VmFsdWUobm9kZSwgcXVldWUubGVuZ3RoID4gMCA/IHF1ZXVlIDogdW5kZWZpbmVkKTtcbiAgICB9XG4gICAgdHJlZUZvckVhY2hDaGlsZChub2RlLCBjaGlsZE5vZGUgPT4ge1xuICAgICAgICByZXBvUHJ1bmVDb21wbGV0ZWRUcmFuc2FjdGlvbnNCZWxvd05vZGUocmVwbywgY2hpbGROb2RlKTtcbiAgICB9KTtcbn1cbi8qKlxuICogQWJvcnRzIGFsbCB0cmFuc2FjdGlvbnMgb24gYW5jZXN0b3JzIG9yIGRlc2NlbmRhbnRzIG9mIHRoZSBzcGVjaWZpZWQgcGF0aC5cbiAqIENhbGxlZCB3aGVuIGRvaW5nIGEgc2V0KCkgb3IgdXBkYXRlKCkgc2luY2Ugd2UgY29uc2lkZXIgdGhlbSBpbmNvbXBhdGlibGVcbiAqIHdpdGggdHJhbnNhY3Rpb25zLlxuICpcbiAqIEBwYXJhbSBwYXRoIC0gUGF0aCBmb3Igd2hpY2ggd2Ugd2FudCB0byBhYm9ydCByZWxhdGVkIHRyYW5zYWN0aW9ucy5cbiAqL1xuZnVuY3Rpb24gcmVwb0Fib3J0VHJhbnNhY3Rpb25zKHJlcG8sIHBhdGgpIHtcbiAgICBjb25zdCBhZmZlY3RlZFBhdGggPSB0cmVlR2V0UGF0aChyZXBvR2V0QW5jZXN0b3JUcmFuc2FjdGlvbk5vZGUocmVwbywgcGF0aCkpO1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uTm9kZSA9IHRyZWVTdWJUcmVlKHJlcG8udHJhbnNhY3Rpb25RdWV1ZVRyZWVfLCBwYXRoKTtcbiAgICB0cmVlRm9yRWFjaEFuY2VzdG9yKHRyYW5zYWN0aW9uTm9kZSwgKG5vZGUpID0+IHtcbiAgICAgICAgcmVwb0Fib3J0VHJhbnNhY3Rpb25zT25Ob2RlKHJlcG8sIG5vZGUpO1xuICAgIH0pO1xuICAgIHJlcG9BYm9ydFRyYW5zYWN0aW9uc09uTm9kZShyZXBvLCB0cmFuc2FjdGlvbk5vZGUpO1xuICAgIHRyZWVGb3JFYWNoRGVzY2VuZGFudCh0cmFuc2FjdGlvbk5vZGUsIChub2RlKSA9PiB7XG4gICAgICAgIHJlcG9BYm9ydFRyYW5zYWN0aW9uc09uTm9kZShyZXBvLCBub2RlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gYWZmZWN0ZWRQYXRoO1xufVxuLyoqXG4gKiBBYm9ydCB0cmFuc2FjdGlvbnMgc3RvcmVkIGluIHRoaXMgdHJhbnNhY3Rpb24gcXVldWUgbm9kZS5cbiAqXG4gKiBAcGFyYW0gbm9kZSAtIE5vZGUgdG8gYWJvcnQgdHJhbnNhY3Rpb25zIGZvci5cbiAqL1xuZnVuY3Rpb24gcmVwb0Fib3J0VHJhbnNhY3Rpb25zT25Ob2RlKHJlcG8sIG5vZGUpIHtcbiAgICBjb25zdCBxdWV1ZSA9IHRyZWVHZXRWYWx1ZShub2RlKTtcbiAgICBpZiAocXVldWUpIHtcbiAgICAgICAgLy8gUXVldWUgdXAgdGhlIGNhbGxiYWNrcyBhbmQgZmlyZSB0aGVtIGFmdGVyIGNsZWFuaW5nIHVwIGFsbCBvZiBvdXJcbiAgICAgICAgLy8gdHJhbnNhY3Rpb24gc3RhdGUsIHNpbmNlIHRoZSBjYWxsYmFjayBjb3VsZCB0cmlnZ2VyIG1vcmUgdHJhbnNhY3Rpb25zXG4gICAgICAgIC8vIG9yIHNldHMuXG4gICAgICAgIGNvbnN0IGNhbGxiYWNrcyA9IFtdO1xuICAgICAgICAvLyBHbyB0aHJvdWdoIHF1ZXVlLiAgQW55IGFscmVhZHktc2VudCB0cmFuc2FjdGlvbnMgbXVzdCBiZSBtYXJrZWQgZm9yXG4gICAgICAgIC8vIGFib3J0LCB3aGlsZSB0aGUgdW5zZW50IG9uZXMgY2FuIGJlIGltbWVkaWF0ZWx5IGFib3J0ZWQgYW5kIHJlbW92ZWQuXG4gICAgICAgIGxldCBldmVudHMgPSBbXTtcbiAgICAgICAgbGV0IGxhc3RTZW50ID0gLTE7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChxdWV1ZVtpXS5zdGF0dXMgPT09IDMgLyogVHJhbnNhY3Rpb25TdGF0dXMuU0VOVF9ORUVEU19BQk9SVCAqLykgO1xuICAgICAgICAgICAgZWxzZSBpZiAocXVldWVbaV0uc3RhdHVzID09PSAxIC8qIFRyYW5zYWN0aW9uU3RhdHVzLlNFTlQgKi8pIHtcbiAgICAgICAgICAgICAgICBhc3NlcnQobGFzdFNlbnQgPT09IGkgLSAxLCAnQWxsIFNFTlQgaXRlbXMgc2hvdWxkIGJlIGF0IGJlZ2lubmluZyBvZiBxdWV1ZS4nKTtcbiAgICAgICAgICAgICAgICBsYXN0U2VudCA9IGk7XG4gICAgICAgICAgICAgICAgLy8gTWFyayB0cmFuc2FjdGlvbiBmb3IgYWJvcnQgd2hlbiBpdCBjb21lcyBiYWNrLlxuICAgICAgICAgICAgICAgIHF1ZXVlW2ldLnN0YXR1cyA9IDMgLyogVHJhbnNhY3Rpb25TdGF0dXMuU0VOVF9ORUVEU19BQk9SVCAqLztcbiAgICAgICAgICAgICAgICBxdWV1ZVtpXS5hYm9ydFJlYXNvbiA9ICdzZXQnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXNzZXJ0KHF1ZXVlW2ldLnN0YXR1cyA9PT0gMCAvKiBUcmFuc2FjdGlvblN0YXR1cy5SVU4gKi8sICdVbmV4cGVjdGVkIHRyYW5zYWN0aW9uIHN0YXR1cyBpbiBhYm9ydCcpO1xuICAgICAgICAgICAgICAgIC8vIFdlIGNhbiBhYm9ydCBpdCBpbW1lZGlhdGVseS5cbiAgICAgICAgICAgICAgICBxdWV1ZVtpXS51bndhdGNoZXIoKTtcbiAgICAgICAgICAgICAgICBldmVudHMgPSBldmVudHMuY29uY2F0KHN5bmNUcmVlQWNrVXNlcldyaXRlKHJlcG8uc2VydmVyU3luY1RyZWVfLCBxdWV1ZVtpXS5jdXJyZW50V3JpdGVJZCwgdHJ1ZSkpO1xuICAgICAgICAgICAgICAgIGlmIChxdWV1ZVtpXS5vbkNvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5wdXNoKHF1ZXVlW2ldLm9uQ29tcGxldGUuYmluZChudWxsLCBuZXcgRXJyb3IoJ3NldCcpLCBmYWxzZSwgbnVsbCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobGFzdFNlbnQgPT09IC0xKSB7XG4gICAgICAgICAgICAvLyBXZSdyZSBub3Qgd2FpdGluZyBmb3IgYW55IHNlbnQgdHJhbnNhY3Rpb25zLiAgV2UgY2FuIGNsZWFyIHRoZSBxdWV1ZS5cbiAgICAgICAgICAgIHRyZWVTZXRWYWx1ZShub2RlLCB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSB0cmFuc2FjdGlvbnMgd2UgYWJvcnRlZC5cbiAgICAgICAgICAgIHF1ZXVlLmxlbmd0aCA9IGxhc3RTZW50ICsgMTtcbiAgICAgICAgfVxuICAgICAgICAvLyBOb3cgZmlyZSB0aGUgY2FsbGJhY2tzLlxuICAgICAgICBldmVudFF1ZXVlUmFpc2VFdmVudHNGb3JDaGFuZ2VkUGF0aChyZXBvLmV2ZW50UXVldWVfLCB0cmVlR2V0UGF0aChub2RlKSwgZXZlbnRzKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjYWxsYmFja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGV4Y2VwdGlvbkd1YXJkKGNhbGxiYWNrc1tpXSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5mdW5jdGlvbiBkZWNvZGVQYXRoKHBhdGhTdHJpbmcpIHtcbiAgICBsZXQgcGF0aFN0cmluZ0RlY29kZWQgPSAnJztcbiAgICBjb25zdCBwaWVjZXMgPSBwYXRoU3RyaW5nLnNwbGl0KCcvJyk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwaWVjZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHBpZWNlc1tpXS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBsZXQgcGllY2UgPSBwaWVjZXNbaV07XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHBpZWNlID0gZGVjb2RlVVJJQ29tcG9uZW50KHBpZWNlLnJlcGxhY2UoL1xcKy9nLCAnICcpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7IH1cbiAgICAgICAgICAgIHBhdGhTdHJpbmdEZWNvZGVkICs9ICcvJyArIHBpZWNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwYXRoU3RyaW5nRGVjb2RlZDtcbn1cbi8qKlxuICogQHJldHVybnMga2V5IHZhbHVlIGhhc2hcbiAqL1xuZnVuY3Rpb24gZGVjb2RlUXVlcnkocXVlcnlTdHJpbmcpIHtcbiAgICBjb25zdCByZXN1bHRzID0ge307XG4gICAgaWYgKHF1ZXJ5U3RyaW5nLmNoYXJBdCgwKSA9PT0gJz8nKSB7XG4gICAgICAgIHF1ZXJ5U3RyaW5nID0gcXVlcnlTdHJpbmcuc3Vic3RyaW5nKDEpO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IHNlZ21lbnQgb2YgcXVlcnlTdHJpbmcuc3BsaXQoJyYnKSkge1xuICAgICAgICBpZiAoc2VnbWVudC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGt2ID0gc2VnbWVudC5zcGxpdCgnPScpO1xuICAgICAgICBpZiAoa3YubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICByZXN1bHRzW2RlY29kZVVSSUNvbXBvbmVudChrdlswXSldID0gZGVjb2RlVVJJQ29tcG9uZW50KGt2WzFdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHdhcm4oYEludmFsaWQgcXVlcnkgc2VnbWVudCAnJHtzZWdtZW50fScgaW4gcXVlcnkgJyR7cXVlcnlTdHJpbmd9J2ApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHRzO1xufVxuY29uc3QgcGFyc2VSZXBvSW5mbyA9IGZ1bmN0aW9uIChkYXRhVVJMLCBub2RlQWRtaW4pIHtcbiAgICBjb25zdCBwYXJzZWRVcmwgPSBwYXJzZURhdGFiYXNlVVJMKGRhdGFVUkwpLCBuYW1lc3BhY2UgPSBwYXJzZWRVcmwubmFtZXNwYWNlO1xuICAgIGlmIChwYXJzZWRVcmwuZG9tYWluID09PSAnZmlyZWJhc2UuY29tJykge1xuICAgICAgICBmYXRhbChwYXJzZWRVcmwuaG9zdCArXG4gICAgICAgICAgICAnIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQuICcgK1xuICAgICAgICAgICAgJ1BsZWFzZSB1c2UgPFlPVVIgRklSRUJBU0U+LmZpcmViYXNlaW8uY29tIGluc3RlYWQnKTtcbiAgICB9XG4gICAgLy8gQ2F0Y2ggY29tbW9uIGVycm9yIG9mIHVuaW5pdGlhbGl6ZWQgbmFtZXNwYWNlIHZhbHVlLlxuICAgIGlmICgoIW5hbWVzcGFjZSB8fCBuYW1lc3BhY2UgPT09ICd1bmRlZmluZWQnKSAmJlxuICAgICAgICBwYXJzZWRVcmwuZG9tYWluICE9PSAnbG9jYWxob3N0Jykge1xuICAgICAgICBmYXRhbCgnQ2Fubm90IHBhcnNlIEZpcmViYXNlIHVybC4gUGxlYXNlIHVzZSBodHRwczovLzxZT1VSIEZJUkVCQVNFPi5maXJlYmFzZWlvLmNvbScpO1xuICAgIH1cbiAgICBpZiAoIXBhcnNlZFVybC5zZWN1cmUpIHtcbiAgICAgICAgd2FybklmUGFnZUlzU2VjdXJlKCk7XG4gICAgfVxuICAgIGNvbnN0IHdlYlNvY2tldE9ubHkgPSBwYXJzZWRVcmwuc2NoZW1lID09PSAnd3MnIHx8IHBhcnNlZFVybC5zY2hlbWUgPT09ICd3c3MnO1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlcG9JbmZvOiBuZXcgUmVwb0luZm8ocGFyc2VkVXJsLmhvc3QsIHBhcnNlZFVybC5zZWN1cmUsIG5hbWVzcGFjZSwgd2ViU29ja2V0T25seSwgbm9kZUFkbWluLCBcbiAgICAgICAgLypwZXJzaXN0ZW5jZUtleT0qLyAnJywgXG4gICAgICAgIC8qaW5jbHVkZU5hbWVzcGFjZUluUXVlcnlQYXJhbXM9Ki8gbmFtZXNwYWNlICE9PSBwYXJzZWRVcmwuc3ViZG9tYWluKSxcbiAgICAgICAgcGF0aDogbmV3IFBhdGgocGFyc2VkVXJsLnBhdGhTdHJpbmcpXG4gICAgfTtcbn07XG5jb25zdCBwYXJzZURhdGFiYXNlVVJMID0gZnVuY3Rpb24gKGRhdGFVUkwpIHtcbiAgICAvLyBEZWZhdWx0IHRvIGVtcHR5IHN0cmluZ3MgaW4gdGhlIGV2ZW50IG9mIGEgbWFsZm9ybWVkIHN0cmluZy5cbiAgICBsZXQgaG9zdCA9ICcnLCBkb21haW4gPSAnJywgc3ViZG9tYWluID0gJycsIHBhdGhTdHJpbmcgPSAnJywgbmFtZXNwYWNlID0gJyc7XG4gICAgLy8gQWx3YXlzIGRlZmF1bHQgdG8gU1NMLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAgICBsZXQgc2VjdXJlID0gdHJ1ZSwgc2NoZW1lID0gJ2h0dHBzJywgcG9ydCA9IDQ0MztcbiAgICAvLyBEb24ndCBkbyBhbnkgdmFsaWRhdGlvbiBoZXJlLiBUaGUgY2FsbGVyIGlzIHJlc3BvbnNpYmxlIGZvciB2YWxpZGF0aW5nIHRoZSByZXN1bHQgb2YgcGFyc2luZy5cbiAgICBpZiAodHlwZW9mIGRhdGFVUkwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIC8vIFBhcnNlIHNjaGVtZS5cbiAgICAgICAgbGV0IGNvbG9uSW5kID0gZGF0YVVSTC5pbmRleE9mKCcvLycpO1xuICAgICAgICBpZiAoY29sb25JbmQgPj0gMCkge1xuICAgICAgICAgICAgc2NoZW1lID0gZGF0YVVSTC5zdWJzdHJpbmcoMCwgY29sb25JbmQgLSAxKTtcbiAgICAgICAgICAgIGRhdGFVUkwgPSBkYXRhVVJMLnN1YnN0cmluZyhjb2xvbkluZCArIDIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFBhcnNlIGhvc3QsIHBhdGgsIGFuZCBxdWVyeSBzdHJpbmcuXG4gICAgICAgIGxldCBzbGFzaEluZCA9IGRhdGFVUkwuaW5kZXhPZignLycpO1xuICAgICAgICBpZiAoc2xhc2hJbmQgPT09IC0xKSB7XG4gICAgICAgICAgICBzbGFzaEluZCA9IGRhdGFVUkwubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIGxldCBxdWVzdGlvbk1hcmtJbmQgPSBkYXRhVVJMLmluZGV4T2YoJz8nKTtcbiAgICAgICAgaWYgKHF1ZXN0aW9uTWFya0luZCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHF1ZXN0aW9uTWFya0luZCA9IGRhdGFVUkwubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIGhvc3QgPSBkYXRhVVJMLnN1YnN0cmluZygwLCBNYXRoLm1pbihzbGFzaEluZCwgcXVlc3Rpb25NYXJrSW5kKSk7XG4gICAgICAgIGlmIChzbGFzaEluZCA8IHF1ZXN0aW9uTWFya0luZCkge1xuICAgICAgICAgICAgLy8gRm9yIHBhdGhTdHJpbmcsIHF1ZXN0aW9uTWFya0luZCB3aWxsIGFsd2F5cyBjb21lIGFmdGVyIHNsYXNoSW5kXG4gICAgICAgICAgICBwYXRoU3RyaW5nID0gZGVjb2RlUGF0aChkYXRhVVJMLnN1YnN0cmluZyhzbGFzaEluZCwgcXVlc3Rpb25NYXJrSW5kKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcXVlcnlQYXJhbXMgPSBkZWNvZGVRdWVyeShkYXRhVVJMLnN1YnN0cmluZyhNYXRoLm1pbihkYXRhVVJMLmxlbmd0aCwgcXVlc3Rpb25NYXJrSW5kKSkpO1xuICAgICAgICAvLyBJZiB3ZSBoYXZlIGEgcG9ydCwgdXNlIHNjaGVtZSBmb3IgZGV0ZXJtaW5pbmcgaWYgaXQncyBzZWN1cmUuXG4gICAgICAgIGNvbG9uSW5kID0gaG9zdC5pbmRleE9mKCc6Jyk7XG4gICAgICAgIGlmIChjb2xvbkluZCA+PSAwKSB7XG4gICAgICAgICAgICBzZWN1cmUgPSBzY2hlbWUgPT09ICdodHRwcycgfHwgc2NoZW1lID09PSAnd3NzJztcbiAgICAgICAgICAgIHBvcnQgPSBwYXJzZUludChob3N0LnN1YnN0cmluZyhjb2xvbkluZCArIDEpLCAxMCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb2xvbkluZCA9IGhvc3QubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhvc3RXaXRob3V0UG9ydCA9IGhvc3Quc2xpY2UoMCwgY29sb25JbmQpO1xuICAgICAgICBpZiAoaG9zdFdpdGhvdXRQb3J0LnRvTG93ZXJDYXNlKCkgPT09ICdsb2NhbGhvc3QnKSB7XG4gICAgICAgICAgICBkb21haW4gPSAnbG9jYWxob3N0JztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChob3N0V2l0aG91dFBvcnQuc3BsaXQoJy4nKS5sZW5ndGggPD0gMikge1xuICAgICAgICAgICAgZG9tYWluID0gaG9zdFdpdGhvdXRQb3J0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gSW50ZXJwcmV0IHRoZSBzdWJkb21haW4gb2YgYSAzIG9yIG1vcmUgY29tcG9uZW50IFVSTCBhcyB0aGUgbmFtZXNwYWNlIG5hbWUuXG4gICAgICAgICAgICBjb25zdCBkb3RJbmQgPSBob3N0LmluZGV4T2YoJy4nKTtcbiAgICAgICAgICAgIHN1YmRvbWFpbiA9IGhvc3Quc3Vic3RyaW5nKDAsIGRvdEluZCkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIGRvbWFpbiA9IGhvc3Quc3Vic3RyaW5nKGRvdEluZCArIDEpO1xuICAgICAgICAgICAgLy8gTm9ybWFsaXplIG5hbWVzcGFjZXMgdG8gbG93ZXJjYXNlIHRvIHNoYXJlIHN0b3JhZ2UgLyBjb25uZWN0aW9uLlxuICAgICAgICAgICAgbmFtZXNwYWNlID0gc3ViZG9tYWluO1xuICAgICAgICB9XG4gICAgICAgIC8vIEFsd2F5cyB0cmVhdCB0aGUgdmFsdWUgb2YgdGhlIGBuc2AgYXMgdGhlIG5hbWVzcGFjZSBuYW1lIGlmIGl0IGlzIHByZXNlbnQuXG4gICAgICAgIGlmICgnbnMnIGluIHF1ZXJ5UGFyYW1zKSB7XG4gICAgICAgICAgICBuYW1lc3BhY2UgPSBxdWVyeVBhcmFtc1snbnMnXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBob3N0LFxuICAgICAgICBwb3J0LFxuICAgICAgICBkb21haW4sXG4gICAgICAgIHN1YmRvbWFpbixcbiAgICAgICAgc2VjdXJlLFxuICAgICAgICBzY2hlbWUsXG4gICAgICAgIHBhdGhTdHJpbmcsXG4gICAgICAgIG5hbWVzcGFjZVxuICAgIH07XG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gTW9kZWxlZCBhZnRlciBiYXNlNjQgd2ViLXNhZmUgY2hhcnMsIGJ1dCBvcmRlcmVkIGJ5IEFTQ0lJLlxuY29uc3QgUFVTSF9DSEFSUyA9ICctMDEyMzQ1Njc4OUFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaX2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6Jztcbi8qKlxuICogRmFuY3kgSUQgZ2VuZXJhdG9yIHRoYXQgY3JlYXRlcyAyMC1jaGFyYWN0ZXIgc3RyaW5nIGlkZW50aWZpZXJzIHdpdGggdGhlXG4gKiBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqXG4gKiAxLiBUaGV5J3JlIGJhc2VkIG9uIHRpbWVzdGFtcCBzbyB0aGF0IHRoZXkgc29ydCAqYWZ0ZXIqIGFueSBleGlzdGluZyBpZHMuXG4gKiAyLiBUaGV5IGNvbnRhaW4gNzItYml0cyBvZiByYW5kb20gZGF0YSBhZnRlciB0aGUgdGltZXN0YW1wIHNvIHRoYXQgSURzIHdvbid0XG4gKiAgICBjb2xsaWRlIHdpdGggb3RoZXIgY2xpZW50cycgSURzLlxuICogMy4gVGhleSBzb3J0ICpsZXhpY29ncmFwaGljYWxseSogKHNvIHRoZSB0aW1lc3RhbXAgaXMgY29udmVydGVkIHRvIGNoYXJhY3RlcnNcbiAqICAgIHRoYXQgd2lsbCBzb3J0IHByb3Blcmx5KS5cbiAqIDQuIFRoZXkncmUgbW9ub3RvbmljYWxseSBpbmNyZWFzaW5nLiBFdmVuIGlmIHlvdSBnZW5lcmF0ZSBtb3JlIHRoYW4gb25lIGluXG4gKiAgICB0aGUgc2FtZSB0aW1lc3RhbXAsIHRoZSBsYXR0ZXIgb25lcyB3aWxsIHNvcnQgYWZ0ZXIgdGhlIGZvcm1lciBvbmVzLiBXZSBkb1xuICogICAgdGhpcyBieSB1c2luZyB0aGUgcHJldmlvdXMgcmFuZG9tIGJpdHMgYnV0IFwiaW5jcmVtZW50aW5nXCIgdGhlbSBieSAxIChvbmx5XG4gKiAgICBpbiB0aGUgY2FzZSBvZiBhIHRpbWVzdGFtcCBjb2xsaXNpb24pLlxuICovXG5jb25zdCBuZXh0UHVzaElkID0gKGZ1bmN0aW9uICgpIHtcbiAgICAvLyBUaW1lc3RhbXAgb2YgbGFzdCBwdXNoLCB1c2VkIHRvIHByZXZlbnQgbG9jYWwgY29sbGlzaW9ucyBpZiB5b3UgcHVzaCB0d2ljZVxuICAgIC8vIGluIG9uZSBtcy5cbiAgICBsZXQgbGFzdFB1c2hUaW1lID0gMDtcbiAgICAvLyBXZSBnZW5lcmF0ZSA3Mi1iaXRzIG9mIHJhbmRvbW5lc3Mgd2hpY2ggZ2V0IHR1cm5lZCBpbnRvIDEyIGNoYXJhY3RlcnMgYW5kXG4gICAgLy8gYXBwZW5kZWQgdG8gdGhlIHRpbWVzdGFtcCB0byBwcmV2ZW50IGNvbGxpc2lvbnMgd2l0aCBvdGhlciBjbGllbnRzLiBXZVxuICAgIC8vIHN0b3JlIHRoZSBsYXN0IGNoYXJhY3RlcnMgd2UgZ2VuZXJhdGVkIGJlY2F1c2UgaW4gdGhlIGV2ZW50IG9mIGEgY29sbGlzaW9uLFxuICAgIC8vIHdlJ2xsIHVzZSB0aG9zZSBzYW1lIGNoYXJhY3RlcnMgZXhjZXB0IFwiaW5jcmVtZW50ZWRcIiBieSBvbmUuXG4gICAgY29uc3QgbGFzdFJhbmRDaGFycyA9IFtdO1xuICAgIHJldHVybiBmdW5jdGlvbiAobm93KSB7XG4gICAgICAgIGNvbnN0IGR1cGxpY2F0ZVRpbWUgPSBub3cgPT09IGxhc3RQdXNoVGltZTtcbiAgICAgICAgbGFzdFB1c2hUaW1lID0gbm93O1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgY29uc3QgdGltZVN0YW1wQ2hhcnMgPSBuZXcgQXJyYXkoOCk7XG4gICAgICAgIGZvciAoaSA9IDc7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICB0aW1lU3RhbXBDaGFyc1tpXSA9IFBVU0hfQ0hBUlMuY2hhckF0KG5vdyAlIDY0KTtcbiAgICAgICAgICAgIC8vIE5PVEU6IENhbid0IHVzZSA8PCBoZXJlIGJlY2F1c2UgamF2YXNjcmlwdCB3aWxsIGNvbnZlcnQgdG8gaW50IGFuZCBsb3NlXG4gICAgICAgICAgICAvLyB0aGUgdXBwZXIgYml0cy5cbiAgICAgICAgICAgIG5vdyA9IE1hdGguZmxvb3Iobm93IC8gNjQpO1xuICAgICAgICB9XG4gICAgICAgIGFzc2VydChub3cgPT09IDAsICdDYW5ub3QgcHVzaCBhdCB0aW1lID09IDAnKTtcbiAgICAgICAgbGV0IGlkID0gdGltZVN0YW1wQ2hhcnMuam9pbignJyk7XG4gICAgICAgIGlmICghZHVwbGljYXRlVGltZSkge1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IDEyOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsYXN0UmFuZENoYXJzW2ldID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNjQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gSWYgdGhlIHRpbWVzdGFtcCBoYXNuJ3QgY2hhbmdlZCBzaW5jZSBsYXN0IHB1c2gsIHVzZSB0aGUgc2FtZSByYW5kb21cbiAgICAgICAgICAgIC8vIG51bWJlciwgZXhjZXB0IGluY3JlbWVudGVkIGJ5IDEuXG4gICAgICAgICAgICBmb3IgKGkgPSAxMTsgaSA+PSAwICYmIGxhc3RSYW5kQ2hhcnNbaV0gPT09IDYzOyBpLS0pIHtcbiAgICAgICAgICAgICAgICBsYXN0UmFuZENoYXJzW2ldID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxhc3RSYW5kQ2hhcnNbaV0rKztcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgMTI7IGkrKykge1xuICAgICAgICAgICAgaWQgKz0gUFVTSF9DSEFSUy5jaGFyQXQobGFzdFJhbmRDaGFyc1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgYXNzZXJ0KGlkLmxlbmd0aCA9PT0gMjAsICduZXh0UHVzaElkOiBMZW5ndGggc2hvdWxkIGJlIDIwLicpO1xuICAgICAgICByZXR1cm4gaWQ7XG4gICAgfTtcbn0pKCk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEVuY2Fwc3VsYXRlcyB0aGUgZGF0YSBuZWVkZWQgdG8gcmFpc2UgYW4gZXZlbnRcbiAqL1xuY2xhc3MgRGF0YUV2ZW50IHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gZXZlbnRUeXBlIC0gT25lIG9mOiB2YWx1ZSwgY2hpbGRfYWRkZWQsIGNoaWxkX2NoYW5nZWQsIGNoaWxkX21vdmVkLCBjaGlsZF9yZW1vdmVkXG4gICAgICogQHBhcmFtIGV2ZW50UmVnaXN0cmF0aW9uIC0gVGhlIGZ1bmN0aW9uIHRvIGNhbGwgdG8gd2l0aCB0aGUgZXZlbnQgZGF0YS4gVXNlciBwcm92aWRlZFxuICAgICAqIEBwYXJhbSBzbmFwc2hvdCAtIFRoZSBkYXRhIGJhY2tpbmcgdGhlIGV2ZW50XG4gICAgICogQHBhcmFtIHByZXZOYW1lIC0gT3B0aW9uYWwsIHRoZSBuYW1lIG9mIHRoZSBwcmV2aW91cyBjaGlsZCBmb3IgY2hpbGRfKiBldmVudHMuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZXZlbnRUeXBlLCBldmVudFJlZ2lzdHJhdGlvbiwgc25hcHNob3QsIHByZXZOYW1lKSB7XG4gICAgICAgIHRoaXMuZXZlbnRUeXBlID0gZXZlbnRUeXBlO1xuICAgICAgICB0aGlzLmV2ZW50UmVnaXN0cmF0aW9uID0gZXZlbnRSZWdpc3RyYXRpb247XG4gICAgICAgIHRoaXMuc25hcHNob3QgPSBzbmFwc2hvdDtcbiAgICAgICAgdGhpcy5wcmV2TmFtZSA9IHByZXZOYW1lO1xuICAgIH1cbiAgICBnZXRQYXRoKCkge1xuICAgICAgICBjb25zdCByZWYgPSB0aGlzLnNuYXBzaG90LnJlZjtcbiAgICAgICAgaWYgKHRoaXMuZXZlbnRUeXBlID09PSAndmFsdWUnKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVmLl9wYXRoO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHJlZi5wYXJlbnQuX3BhdGg7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0RXZlbnRUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudFR5cGU7XG4gICAgfVxuICAgIGdldEV2ZW50UnVubmVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudFJlZ2lzdHJhdGlvbi5nZXRFdmVudFJ1bm5lcih0aGlzKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5nZXRQYXRoKCkudG9TdHJpbmcoKSArXG4gICAgICAgICAgICAnOicgK1xuICAgICAgICAgICAgdGhpcy5ldmVudFR5cGUgK1xuICAgICAgICAgICAgJzonICtcbiAgICAgICAgICAgIHN0cmluZ2lmeSh0aGlzLnNuYXBzaG90LmV4cG9ydFZhbCgpKSk7XG4gICAgfVxufVxuY2xhc3MgQ2FuY2VsRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKGV2ZW50UmVnaXN0cmF0aW9uLCBlcnJvciwgcGF0aCkge1xuICAgICAgICB0aGlzLmV2ZW50UmVnaXN0cmF0aW9uID0gZXZlbnRSZWdpc3RyYXRpb247XG4gICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcbiAgICAgICAgdGhpcy5wYXRoID0gcGF0aDtcbiAgICB9XG4gICAgZ2V0UGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aDtcbiAgICB9XG4gICAgZ2V0RXZlbnRUeXBlKCkge1xuICAgICAgICByZXR1cm4gJ2NhbmNlbCc7XG4gICAgfVxuICAgIGdldEV2ZW50UnVubmVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudFJlZ2lzdHJhdGlvbi5nZXRFdmVudFJ1bm5lcih0aGlzKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGgudG9TdHJpbmcoKSArICc6Y2FuY2VsJztcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgd3JhcHBlciBjbGFzcyB0aGF0IGNvbnZlcnRzIGV2ZW50cyBmcm9tIHRoZSBkYXRhYmFzZUBleHAgU0RLIHRvIHRoZSBsZWdhY3lcbiAqIERhdGFiYXNlIFNESy4gRXZlbnRzIGFyZSBub3QgY29udmVydGVkIGRpcmVjdGx5IGFzIGV2ZW50IHJlZ2lzdHJhdGlvbiByZWxpZXNcbiAqIG9uIHJlZmVyZW5jZSBjb21wYXJpc29uIG9mIHRoZSBvcmlnaW5hbCB1c2VyIGNhbGxiYWNrIChzZWUgYG1hdGNoZXMoKWApIGFuZFxuICogcmVsaWVzIG9uIGVxdWFsaXR5IG9mIHRoZSBsZWdhY3kgU0RLJ3MgYGNvbnRleHRgIG9iamVjdC5cbiAqL1xuY2xhc3MgQ2FsbGJhY2tDb250ZXh0IHtcbiAgICBjb25zdHJ1Y3RvcihzbmFwc2hvdENhbGxiYWNrLCBjYW5jZWxDYWxsYmFjaykge1xuICAgICAgICB0aGlzLnNuYXBzaG90Q2FsbGJhY2sgPSBzbmFwc2hvdENhbGxiYWNrO1xuICAgICAgICB0aGlzLmNhbmNlbENhbGxiYWNrID0gY2FuY2VsQ2FsbGJhY2s7XG4gICAgfVxuICAgIG9uVmFsdWUoZXhwRGF0YVNuYXBzaG90LCBwcmV2aW91c0NoaWxkTmFtZSkge1xuICAgICAgICB0aGlzLnNuYXBzaG90Q2FsbGJhY2suY2FsbChudWxsLCBleHBEYXRhU25hcHNob3QsIHByZXZpb3VzQ2hpbGROYW1lKTtcbiAgICB9XG4gICAgb25DYW5jZWwoZXJyb3IpIHtcbiAgICAgICAgYXNzZXJ0KHRoaXMuaGFzQ2FuY2VsQ2FsbGJhY2ssICdSYWlzaW5nIGEgY2FuY2VsIGV2ZW50IG9uIGEgbGlzdGVuZXIgd2l0aCBubyBjYW5jZWwgY2FsbGJhY2snKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FuY2VsQ2FsbGJhY2suY2FsbChudWxsLCBlcnJvcik7XG4gICAgfVxuICAgIGdldCBoYXNDYW5jZWxDYWxsYmFjaygpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5jYW5jZWxDYWxsYmFjaztcbiAgICB9XG4gICAgbWF0Y2hlcyhvdGhlcikge1xuICAgICAgICByZXR1cm4gKHRoaXMuc25hcHNob3RDYWxsYmFjayA9PT0gb3RoZXIuc25hcHNob3RDYWxsYmFjayB8fFxuICAgICAgICAgICAgKHRoaXMuc25hcHNob3RDYWxsYmFjay51c2VyQ2FsbGJhY2sgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgIHRoaXMuc25hcHNob3RDYWxsYmFjay51c2VyQ2FsbGJhY2sgPT09XG4gICAgICAgICAgICAgICAgICAgIG90aGVyLnNuYXBzaG90Q2FsbGJhY2sudXNlckNhbGxiYWNrICYmXG4gICAgICAgICAgICAgICAgdGhpcy5zbmFwc2hvdENhbGxiYWNrLmNvbnRleHQgPT09IG90aGVyLnNuYXBzaG90Q2FsbGJhY2suY29udGV4dCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVGhlIGBvbkRpc2Nvbm5lY3RgIGNsYXNzIGFsbG93cyB5b3UgdG8gd3JpdGUgb3IgY2xlYXIgZGF0YSB3aGVuIHlvdXIgY2xpZW50XG4gKiBkaXNjb25uZWN0cyBmcm9tIHRoZSBEYXRhYmFzZSBzZXJ2ZXIuIFRoZXNlIHVwZGF0ZXMgb2NjdXIgd2hldGhlciB5b3VyXG4gKiBjbGllbnQgZGlzY29ubmVjdHMgY2xlYW5seSBvciBub3QsIHNvIHlvdSBjYW4gcmVseSBvbiB0aGVtIHRvIGNsZWFuIHVwIGRhdGFcbiAqIGV2ZW4gaWYgYSBjb25uZWN0aW9uIGlzIGRyb3BwZWQgb3IgYSBjbGllbnQgY3Jhc2hlcy5cbiAqXG4gKiBUaGUgYG9uRGlzY29ubmVjdGAgY2xhc3MgaXMgbW9zdCBjb21tb25seSB1c2VkIHRvIG1hbmFnZSBwcmVzZW5jZSBpblxuICogYXBwbGljYXRpb25zIHdoZXJlIGl0IGlzIHVzZWZ1bCB0byBkZXRlY3QgaG93IG1hbnkgY2xpZW50cyBhcmUgY29ubmVjdGVkIGFuZFxuICogd2hlbiBvdGhlciBjbGllbnRzIGRpc2Nvbm5lY3QuIFNlZVxuICoge0BsaW5rIGh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlLmNvbS9kb2NzL2RhdGFiYXNlL3dlYi9vZmZsaW5lLWNhcGFiaWxpdGllcyB8IEVuYWJsaW5nIE9mZmxpbmUgQ2FwYWJpbGl0aWVzIGluIEphdmFTY3JpcHR9XG4gKiBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAqXG4gKiBUbyBhdm9pZCBwcm9ibGVtcyB3aGVuIGEgY29ubmVjdGlvbiBpcyBkcm9wcGVkIGJlZm9yZSB0aGUgcmVxdWVzdHMgY2FuIGJlXG4gKiB0cmFuc2ZlcnJlZCB0byB0aGUgRGF0YWJhc2Ugc2VydmVyLCB0aGVzZSBmdW5jdGlvbnMgc2hvdWxkIGJlIGNhbGxlZCBiZWZvcmVcbiAqIHdyaXRpbmcgYW55IGRhdGEuXG4gKlxuICogTm90ZSB0aGF0IGBvbkRpc2Nvbm5lY3RgIG9wZXJhdGlvbnMgYXJlIG9ubHkgdHJpZ2dlcmVkIG9uY2UuIElmIHlvdSB3YW50IGFuXG4gKiBvcGVyYXRpb24gdG8gb2NjdXIgZWFjaCB0aW1lIGEgZGlzY29ubmVjdCBvY2N1cnMsIHlvdSdsbCBuZWVkIHRvIHJlLWVzdGFibGlzaFxuICogdGhlIGBvbkRpc2Nvbm5lY3RgIG9wZXJhdGlvbnMgZWFjaCB0aW1lIHlvdSByZWNvbm5lY3QuXG4gKi9cbmNsYXNzIE9uRGlzY29ubmVjdCB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3RvcihfcmVwbywgX3BhdGgpIHtcbiAgICAgICAgdGhpcy5fcmVwbyA9IF9yZXBvO1xuICAgICAgICB0aGlzLl9wYXRoID0gX3BhdGg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbmNlbHMgYWxsIHByZXZpb3VzbHkgcXVldWVkIGBvbkRpc2Nvbm5lY3QoKWAgc2V0IG9yIHVwZGF0ZSBldmVudHMgZm9yIHRoaXNcbiAgICAgKiBsb2NhdGlvbiBhbmQgYWxsIGNoaWxkcmVuLlxuICAgICAqXG4gICAgICogSWYgYSB3cml0ZSBoYXMgYmVlbiBxdWV1ZWQgZm9yIHRoaXMgbG9jYXRpb24gdmlhIGEgYHNldCgpYCBvciBgdXBkYXRlKClgIGF0IGFcbiAgICAgKiBwYXJlbnQgbG9jYXRpb24sIHRoZSB3cml0ZSBhdCB0aGlzIGxvY2F0aW9uIHdpbGwgYmUgY2FuY2VsZWQsIHRob3VnaCB3cml0ZXNcbiAgICAgKiB0byBzaWJsaW5nIGxvY2F0aW9ucyB3aWxsIHN0aWxsIG9jY3VyLlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVzb2x2ZXMgd2hlbiBzeW5jaHJvbml6YXRpb24gdG8gdGhlIHNlcnZlciBpcyBjb21wbGV0ZS5cbiAgICAgKi9cbiAgICBjYW5jZWwoKSB7XG4gICAgICAgIGNvbnN0IGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgIHJlcG9PbkRpc2Nvbm5lY3RDYW5jZWwodGhpcy5fcmVwbywgdGhpcy5fcGF0aCwgZGVmZXJyZWQud3JhcENhbGxiYWNrKCgpID0+IHsgfSkpO1xuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5zdXJlcyB0aGUgZGF0YSBhdCB0aGlzIGxvY2F0aW9uIGlzIGRlbGV0ZWQgd2hlbiB0aGUgY2xpZW50IGlzIGRpc2Nvbm5lY3RlZFxuICAgICAqIChkdWUgdG8gY2xvc2luZyB0aGUgYnJvd3NlciwgbmF2aWdhdGluZyB0byBhIG5ldyBwYWdlLCBvciBuZXR3b3JrIGlzc3VlcykuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZXNvbHZlcyB3aGVuIHN5bmNocm9uaXphdGlvbiB0byB0aGUgc2VydmVyIGlzIGNvbXBsZXRlLlxuICAgICAqL1xuICAgIHJlbW92ZSgpIHtcbiAgICAgICAgdmFsaWRhdGVXcml0YWJsZVBhdGgoJ09uRGlzY29ubmVjdC5yZW1vdmUnLCB0aGlzLl9wYXRoKTtcbiAgICAgICAgY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgcmVwb09uRGlzY29ubmVjdFNldCh0aGlzLl9yZXBvLCB0aGlzLl9wYXRoLCBudWxsLCBkZWZlcnJlZC53cmFwQ2FsbGJhY2soKCkgPT4geyB9KSk7XG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbnN1cmVzIHRoZSBkYXRhIGF0IHRoaXMgbG9jYXRpb24gaXMgc2V0IHRvIHRoZSBzcGVjaWZpZWQgdmFsdWUgd2hlbiB0aGVcbiAgICAgKiBjbGllbnQgaXMgZGlzY29ubmVjdGVkIChkdWUgdG8gY2xvc2luZyB0aGUgYnJvd3NlciwgbmF2aWdhdGluZyB0byBhIG5ldyBwYWdlLFxuICAgICAqIG9yIG5ldHdvcmsgaXNzdWVzKS5cbiAgICAgKlxuICAgICAqIGBzZXQoKWAgaXMgZXNwZWNpYWxseSB1c2VmdWwgZm9yIGltcGxlbWVudGluZyBcInByZXNlbmNlXCIgc3lzdGVtcywgd2hlcmUgYVxuICAgICAqIHZhbHVlIHNob3VsZCBiZSBjaGFuZ2VkIG9yIGNsZWFyZWQgd2hlbiBhIHVzZXIgZGlzY29ubmVjdHMgc28gdGhhdCB0aGV5XG4gICAgICogYXBwZWFyIFwib2ZmbGluZVwiIHRvIG90aGVyIHVzZXJzLiBTZWVcbiAgICAgKiB7QGxpbmsgaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvZGF0YWJhc2Uvd2ViL29mZmxpbmUtY2FwYWJpbGl0aWVzIHwgRW5hYmxpbmcgT2ZmbGluZSBDYXBhYmlsaXRpZXMgaW4gSmF2YVNjcmlwdH1cbiAgICAgKiBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCBgb25EaXNjb25uZWN0YCBvcGVyYXRpb25zIGFyZSBvbmx5IHRyaWdnZXJlZCBvbmNlLiBJZiB5b3Ugd2FudCBhblxuICAgICAqIG9wZXJhdGlvbiB0byBvY2N1ciBlYWNoIHRpbWUgYSBkaXNjb25uZWN0IG9jY3VycywgeW91J2xsIG5lZWQgdG8gcmUtZXN0YWJsaXNoXG4gICAgICogdGhlIGBvbkRpc2Nvbm5lY3RgIG9wZXJhdGlvbnMgZWFjaCB0aW1lLlxuICAgICAqXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIGJlIHdyaXR0ZW4gdG8gdGhpcyBsb2NhdGlvbiBvbiBkaXNjb25uZWN0IChjYW5cbiAgICAgKiBiZSBhbiBvYmplY3QsIGFycmF5LCBzdHJpbmcsIG51bWJlciwgYm9vbGVhbiwgb3IgbnVsbCkuXG4gICAgICogQHJldHVybnMgUmVzb2x2ZXMgd2hlbiBzeW5jaHJvbml6YXRpb24gdG8gdGhlIERhdGFiYXNlIGlzIGNvbXBsZXRlLlxuICAgICAqL1xuICAgIHNldCh2YWx1ZSkge1xuICAgICAgICB2YWxpZGF0ZVdyaXRhYmxlUGF0aCgnT25EaXNjb25uZWN0LnNldCcsIHRoaXMuX3BhdGgpO1xuICAgICAgICB2YWxpZGF0ZUZpcmViYXNlRGF0YUFyZygnT25EaXNjb25uZWN0LnNldCcsIHZhbHVlLCB0aGlzLl9wYXRoLCBmYWxzZSk7XG4gICAgICAgIGNvbnN0IGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgIHJlcG9PbkRpc2Nvbm5lY3RTZXQodGhpcy5fcmVwbywgdGhpcy5fcGF0aCwgdmFsdWUsIGRlZmVycmVkLndyYXBDYWxsYmFjaygoKSA9PiB7IH0pKTtcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuc3VyZXMgdGhlIGRhdGEgYXQgdGhpcyBsb2NhdGlvbiBpcyBzZXQgdG8gdGhlIHNwZWNpZmllZCB2YWx1ZSBhbmQgcHJpb3JpdHlcbiAgICAgKiB3aGVuIHRoZSBjbGllbnQgaXMgZGlzY29ubmVjdGVkIChkdWUgdG8gY2xvc2luZyB0aGUgYnJvd3NlciwgbmF2aWdhdGluZyB0byBhXG4gICAgICogbmV3IHBhZ2UsIG9yIG5ldHdvcmsgaXNzdWVzKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSB0byBiZSB3cml0dGVuIHRvIHRoaXMgbG9jYXRpb24gb24gZGlzY29ubmVjdCAoY2FuXG4gICAgICogYmUgYW4gb2JqZWN0LCBhcnJheSwgc3RyaW5nLCBudW1iZXIsIGJvb2xlYW4sIG9yIG51bGwpLlxuICAgICAqIEBwYXJhbSBwcmlvcml0eSAtIFRoZSBwcmlvcml0eSB0byBiZSB3cml0dGVuIChzdHJpbmcsIG51bWJlciwgb3IgbnVsbCkuXG4gICAgICogQHJldHVybnMgUmVzb2x2ZXMgd2hlbiBzeW5jaHJvbml6YXRpb24gdG8gdGhlIERhdGFiYXNlIGlzIGNvbXBsZXRlLlxuICAgICAqL1xuICAgIHNldFdpdGhQcmlvcml0eSh2YWx1ZSwgcHJpb3JpdHkpIHtcbiAgICAgICAgdmFsaWRhdGVXcml0YWJsZVBhdGgoJ09uRGlzY29ubmVjdC5zZXRXaXRoUHJpb3JpdHknLCB0aGlzLl9wYXRoKTtcbiAgICAgICAgdmFsaWRhdGVGaXJlYmFzZURhdGFBcmcoJ09uRGlzY29ubmVjdC5zZXRXaXRoUHJpb3JpdHknLCB2YWx1ZSwgdGhpcy5fcGF0aCwgZmFsc2UpO1xuICAgICAgICB2YWxpZGF0ZVByaW9yaXR5KCdPbkRpc2Nvbm5lY3Quc2V0V2l0aFByaW9yaXR5JywgcHJpb3JpdHksIGZhbHNlKTtcbiAgICAgICAgY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgcmVwb09uRGlzY29ubmVjdFNldFdpdGhQcmlvcml0eSh0aGlzLl9yZXBvLCB0aGlzLl9wYXRoLCB2YWx1ZSwgcHJpb3JpdHksIGRlZmVycmVkLndyYXBDYWxsYmFjaygoKSA9PiB7IH0pKTtcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdyaXRlcyBtdWx0aXBsZSB2YWx1ZXMgYXQgdGhpcyBsb2NhdGlvbiB3aGVuIHRoZSBjbGllbnQgaXMgZGlzY29ubmVjdGVkIChkdWVcbiAgICAgKiB0byBjbG9zaW5nIHRoZSBicm93c2VyLCBuYXZpZ2F0aW5nIHRvIGEgbmV3IHBhZ2UsIG9yIG5ldHdvcmsgaXNzdWVzKS5cbiAgICAgKlxuICAgICAqIFRoZSBgdmFsdWVzYCBhcmd1bWVudCBjb250YWlucyBtdWx0aXBsZSBwcm9wZXJ0eS12YWx1ZSBwYWlycyB0aGF0IHdpbGwgYmVcbiAgICAgKiB3cml0dGVuIHRvIHRoZSBEYXRhYmFzZSB0b2dldGhlci4gRWFjaCBjaGlsZCBwcm9wZXJ0eSBjYW4gZWl0aGVyIGJlIGEgc2ltcGxlXG4gICAgICogcHJvcGVydHkgKGZvciBleGFtcGxlLCBcIm5hbWVcIikgb3IgYSByZWxhdGl2ZSBwYXRoIChmb3IgZXhhbXBsZSwgXCJuYW1lL2ZpcnN0XCIpXG4gICAgICogZnJvbSB0aGUgY3VycmVudCBsb2NhdGlvbiB0byB0aGUgZGF0YSB0byB1cGRhdGUuXG4gICAgICpcbiAgICAgKiBBcyBvcHBvc2VkIHRvIHRoZSBgc2V0KClgIG1ldGhvZCwgYHVwZGF0ZSgpYCBjYW4gYmUgdXNlIHRvIHNlbGVjdGl2ZWx5IHVwZGF0ZVxuICAgICAqIG9ubHkgdGhlIHJlZmVyZW5jZWQgcHJvcGVydGllcyBhdCB0aGUgY3VycmVudCBsb2NhdGlvbiAoaW5zdGVhZCBvZiByZXBsYWNpbmdcbiAgICAgKiBhbGwgdGhlIGNoaWxkIHByb3BlcnRpZXMgYXQgdGhlIGN1cnJlbnQgbG9jYXRpb24pLlxuICAgICAqXG4gICAgICogQHBhcmFtIHZhbHVlcyAtIE9iamVjdCBjb250YWluaW5nIG11bHRpcGxlIHZhbHVlcy5cbiAgICAgKiBAcmV0dXJucyBSZXNvbHZlcyB3aGVuIHN5bmNocm9uaXphdGlvbiB0byB0aGUgRGF0YWJhc2UgaXMgY29tcGxldGUuXG4gICAgICovXG4gICAgdXBkYXRlKHZhbHVlcykge1xuICAgICAgICB2YWxpZGF0ZVdyaXRhYmxlUGF0aCgnT25EaXNjb25uZWN0LnVwZGF0ZScsIHRoaXMuX3BhdGgpO1xuICAgICAgICB2YWxpZGF0ZUZpcmViYXNlTWVyZ2VEYXRhQXJnKCdPbkRpc2Nvbm5lY3QudXBkYXRlJywgdmFsdWVzLCB0aGlzLl9wYXRoLCBmYWxzZSk7XG4gICAgICAgIGNvbnN0IGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgIHJlcG9PbkRpc2Nvbm5lY3RVcGRhdGUodGhpcy5fcmVwbywgdGhpcy5fcGF0aCwgdmFsdWVzLCBkZWZlcnJlZC53cmFwQ2FsbGJhY2soKCkgPT4geyB9KSk7XG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIFF1ZXJ5SW1wbCB7XG4gICAgLyoqXG4gICAgICogQGhpZGVjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKF9yZXBvLCBfcGF0aCwgX3F1ZXJ5UGFyYW1zLCBfb3JkZXJCeUNhbGxlZCkge1xuICAgICAgICB0aGlzLl9yZXBvID0gX3JlcG87XG4gICAgICAgIHRoaXMuX3BhdGggPSBfcGF0aDtcbiAgICAgICAgdGhpcy5fcXVlcnlQYXJhbXMgPSBfcXVlcnlQYXJhbXM7XG4gICAgICAgIHRoaXMuX29yZGVyQnlDYWxsZWQgPSBfb3JkZXJCeUNhbGxlZDtcbiAgICB9XG4gICAgZ2V0IGtleSgpIHtcbiAgICAgICAgaWYgKHBhdGhJc0VtcHR5KHRoaXMuX3BhdGgpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBwYXRoR2V0QmFjayh0aGlzLl9wYXRoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgcmVmKCkge1xuICAgICAgICByZXR1cm4gbmV3IFJlZmVyZW5jZUltcGwodGhpcy5fcmVwbywgdGhpcy5fcGF0aCk7XG4gICAgfVxuICAgIGdldCBfcXVlcnlJZGVudGlmaWVyKCkge1xuICAgICAgICBjb25zdCBvYmogPSBxdWVyeVBhcmFtc0dldFF1ZXJ5T2JqZWN0KHRoaXMuX3F1ZXJ5UGFyYW1zKTtcbiAgICAgICAgY29uc3QgaWQgPSBPYmplY3RUb1VuaXF1ZUtleShvYmopO1xuICAgICAgICByZXR1cm4gaWQgPT09ICd7fScgPyAnZGVmYXVsdCcgOiBpZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQW4gb2JqZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBxdWVyeSBwYXJhbWV0ZXJzIHVzZWQgYnkgdGhpcyBRdWVyeS5cbiAgICAgKi9cbiAgICBnZXQgX3F1ZXJ5T2JqZWN0KCkge1xuICAgICAgICByZXR1cm4gcXVlcnlQYXJhbXNHZXRRdWVyeU9iamVjdCh0aGlzLl9xdWVyeVBhcmFtcyk7XG4gICAgfVxuICAgIGlzRXF1YWwob3RoZXIpIHtcbiAgICAgICAgb3RoZXIgPSBnZXRNb2R1bGFySW5zdGFuY2Uob3RoZXIpO1xuICAgICAgICBpZiAoIShvdGhlciBpbnN0YW5jZW9mIFF1ZXJ5SW1wbCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzYW1lUmVwbyA9IHRoaXMuX3JlcG8gPT09IG90aGVyLl9yZXBvO1xuICAgICAgICBjb25zdCBzYW1lUGF0aCA9IHBhdGhFcXVhbHModGhpcy5fcGF0aCwgb3RoZXIuX3BhdGgpO1xuICAgICAgICBjb25zdCBzYW1lUXVlcnlJZGVudGlmaWVyID0gdGhpcy5fcXVlcnlJZGVudGlmaWVyID09PSBvdGhlci5fcXVlcnlJZGVudGlmaWVyO1xuICAgICAgICByZXR1cm4gc2FtZVJlcG8gJiYgc2FtZVBhdGggJiYgc2FtZVF1ZXJ5SWRlbnRpZmllcjtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50b1N0cmluZygpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlcG8udG9TdHJpbmcoKSArIHBhdGhUb1VybEVuY29kZWRTdHJpbmcodGhpcy5fcGF0aCk7XG4gICAgfVxufVxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhhdCBubyBvdGhlciBvcmRlciBieSBjYWxsIGhhcyBiZWVuIG1hZGVcbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGVOb1ByZXZpb3VzT3JkZXJCeUNhbGwocXVlcnksIGZuTmFtZSkge1xuICAgIGlmIChxdWVyeS5fb3JkZXJCeUNhbGxlZCA9PT0gdHJ1ZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZm5OYW1lICsgXCI6IFlvdSBjYW4ndCBjb21iaW5lIG11bHRpcGxlIG9yZGVyQnkgY2FsbHMuXCIpO1xuICAgIH1cbn1cbi8qKlxuICogVmFsaWRhdGVzIHN0YXJ0L2VuZCB2YWx1ZXMgZm9yIHF1ZXJpZXMuXG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlUXVlcnlFbmRwb2ludHMocGFyYW1zKSB7XG4gICAgbGV0IHN0YXJ0Tm9kZSA9IG51bGw7XG4gICAgbGV0IGVuZE5vZGUgPSBudWxsO1xuICAgIGlmIChwYXJhbXMuaGFzU3RhcnQoKSkge1xuICAgICAgICBzdGFydE5vZGUgPSBwYXJhbXMuZ2V0SW5kZXhTdGFydFZhbHVlKCk7XG4gICAgfVxuICAgIGlmIChwYXJhbXMuaGFzRW5kKCkpIHtcbiAgICAgICAgZW5kTm9kZSA9IHBhcmFtcy5nZXRJbmRleEVuZFZhbHVlKCk7XG4gICAgfVxuICAgIGlmIChwYXJhbXMuZ2V0SW5kZXgoKSA9PT0gS0VZX0lOREVYKSB7XG4gICAgICAgIGNvbnN0IHRvb01hbnlBcmdzRXJyb3IgPSAnUXVlcnk6IFdoZW4gb3JkZXJpbmcgYnkga2V5LCB5b3UgbWF5IG9ubHkgcGFzcyBvbmUgYXJndW1lbnQgdG8gJyArXG4gICAgICAgICAgICAnc3RhcnRBdCgpLCBlbmRBdCgpLCBvciBlcXVhbFRvKCkuJztcbiAgICAgICAgY29uc3Qgd3JvbmdBcmdUeXBlRXJyb3IgPSAnUXVlcnk6IFdoZW4gb3JkZXJpbmcgYnkga2V5LCB0aGUgYXJndW1lbnQgcGFzc2VkIHRvIHN0YXJ0QXQoKSwgc3RhcnRBZnRlcigpLCAnICtcbiAgICAgICAgICAgICdlbmRBdCgpLCBlbmRCZWZvcmUoKSwgb3IgZXF1YWxUbygpIG11c3QgYmUgYSBzdHJpbmcuJztcbiAgICAgICAgaWYgKHBhcmFtcy5oYXNTdGFydCgpKSB7XG4gICAgICAgICAgICBjb25zdCBzdGFydE5hbWUgPSBwYXJhbXMuZ2V0SW5kZXhTdGFydE5hbWUoKTtcbiAgICAgICAgICAgIGlmIChzdGFydE5hbWUgIT09IE1JTl9OQU1FKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHRvb01hbnlBcmdzRXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHN0YXJ0Tm9kZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3Iod3JvbmdBcmdUeXBlRXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJhbXMuaGFzRW5kKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGVuZE5hbWUgPSBwYXJhbXMuZ2V0SW5kZXhFbmROYW1lKCk7XG4gICAgICAgICAgICBpZiAoZW5kTmFtZSAhPT0gTUFYX05BTUUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IodG9vTWFueUFyZ3NFcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgZW5kTm9kZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3Iod3JvbmdBcmdUeXBlRXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKHBhcmFtcy5nZXRJbmRleCgpID09PSBQUklPUklUWV9JTkRFWCkge1xuICAgICAgICBpZiAoKHN0YXJ0Tm9kZSAhPSBudWxsICYmICFpc1ZhbGlkUHJpb3JpdHkoc3RhcnROb2RlKSkgfHxcbiAgICAgICAgICAgIChlbmROb2RlICE9IG51bGwgJiYgIWlzVmFsaWRQcmlvcml0eShlbmROb2RlKSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUXVlcnk6IFdoZW4gb3JkZXJpbmcgYnkgcHJpb3JpdHksIHRoZSBmaXJzdCBhcmd1bWVudCBwYXNzZWQgdG8gc3RhcnRBdCgpLCAnICtcbiAgICAgICAgICAgICAgICAnc3RhcnRBZnRlcigpIGVuZEF0KCksIGVuZEJlZm9yZSgpLCBvciBlcXVhbFRvKCkgbXVzdCBiZSBhIHZhbGlkIHByaW9yaXR5IHZhbHVlICcgK1xuICAgICAgICAgICAgICAgICcobnVsbCwgYSBudW1iZXIsIG9yIGEgc3RyaW5nKS4nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYXNzZXJ0KHBhcmFtcy5nZXRJbmRleCgpIGluc3RhbmNlb2YgUGF0aEluZGV4IHx8XG4gICAgICAgICAgICBwYXJhbXMuZ2V0SW5kZXgoKSA9PT0gVkFMVUVfSU5ERVgsICd1bmtub3duIGluZGV4IHR5cGUuJyk7XG4gICAgICAgIGlmICgoc3RhcnROb2RlICE9IG51bGwgJiYgdHlwZW9mIHN0YXJ0Tm9kZSA9PT0gJ29iamVjdCcpIHx8XG4gICAgICAgICAgICAoZW5kTm9kZSAhPSBudWxsICYmIHR5cGVvZiBlbmROb2RlID09PSAnb2JqZWN0JykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUXVlcnk6IEZpcnN0IGFyZ3VtZW50IHBhc3NlZCB0byBzdGFydEF0KCksIHN0YXJ0QWZ0ZXIoKSwgZW5kQXQoKSwgZW5kQmVmb3JlKCksIG9yICcgK1xuICAgICAgICAgICAgICAgICdlcXVhbFRvKCkgY2Fubm90IGJlIGFuIG9iamVjdC4nKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgbGltaXQqIGhhcyBiZWVuIGNhbGxlZCB3aXRoIHRoZSBjb3JyZWN0IGNvbWJpbmF0aW9uIG9mIHBhcmFtZXRlcnNcbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGVMaW1pdChwYXJhbXMpIHtcbiAgICBpZiAocGFyYW1zLmhhc1N0YXJ0KCkgJiZcbiAgICAgICAgcGFyYW1zLmhhc0VuZCgpICYmXG4gICAgICAgIHBhcmFtcy5oYXNMaW1pdCgpICYmXG4gICAgICAgICFwYXJhbXMuaGFzQW5jaG9yZWRMaW1pdCgpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlF1ZXJ5OiBDYW4ndCBjb21iaW5lIHN0YXJ0QXQoKSwgc3RhcnRBZnRlcigpLCBlbmRBdCgpLCBlbmRCZWZvcmUoKSwgYW5kIGxpbWl0KCkuIFVzZSBcIiArXG4gICAgICAgICAgICAnbGltaXRUb0ZpcnN0KCkgb3IgbGltaXRUb0xhc3QoKSBpbnN0ZWFkLicpO1xuICAgIH1cbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIFJlZmVyZW5jZUltcGwgZXh0ZW5kcyBRdWVyeUltcGwge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IocmVwbywgcGF0aCkge1xuICAgICAgICBzdXBlcihyZXBvLCBwYXRoLCBuZXcgUXVlcnlQYXJhbXMoKSwgZmFsc2UpO1xuICAgIH1cbiAgICBnZXQgcGFyZW50KCkge1xuICAgICAgICBjb25zdCBwYXJlbnRQYXRoID0gcGF0aFBhcmVudCh0aGlzLl9wYXRoKTtcbiAgICAgICAgcmV0dXJuIHBhcmVudFBhdGggPT09IG51bGxcbiAgICAgICAgICAgID8gbnVsbFxuICAgICAgICAgICAgOiBuZXcgUmVmZXJlbmNlSW1wbCh0aGlzLl9yZXBvLCBwYXJlbnRQYXRoKTtcbiAgICB9XG4gICAgZ2V0IHJvb3QoKSB7XG4gICAgICAgIGxldCByZWYgPSB0aGlzO1xuICAgICAgICB3aGlsZSAocmVmLnBhcmVudCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgcmVmID0gcmVmLnBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVmO1xuICAgIH1cbn1cbi8qKlxuICogQSBgRGF0YVNuYXBzaG90YCBjb250YWlucyBkYXRhIGZyb20gYSBEYXRhYmFzZSBsb2NhdGlvbi5cbiAqXG4gKiBBbnkgdGltZSB5b3UgcmVhZCBkYXRhIGZyb20gdGhlIERhdGFiYXNlLCB5b3UgcmVjZWl2ZSB0aGUgZGF0YSBhcyBhXG4gKiBgRGF0YVNuYXBzaG90YC4gQSBgRGF0YVNuYXBzaG90YCBpcyBwYXNzZWQgdG8gdGhlIGV2ZW50IGNhbGxiYWNrcyB5b3UgYXR0YWNoXG4gKiB3aXRoIGBvbigpYCBvciBgb25jZSgpYC4gWW91IGNhbiBleHRyYWN0IHRoZSBjb250ZW50cyBvZiB0aGUgc25hcHNob3QgYXMgYVxuICogSmF2YVNjcmlwdCBvYmplY3QgYnkgY2FsbGluZyB0aGUgYHZhbCgpYCBtZXRob2QuIEFsdGVybmF0aXZlbHksIHlvdSBjYW5cbiAqIHRyYXZlcnNlIGludG8gdGhlIHNuYXBzaG90IGJ5IGNhbGxpbmcgYGNoaWxkKClgIHRvIHJldHVybiBjaGlsZCBzbmFwc2hvdHNcbiAqICh3aGljaCB5b3UgY291bGQgdGhlbiBjYWxsIGB2YWwoKWAgb24pLlxuICpcbiAqIEEgYERhdGFTbmFwc2hvdGAgaXMgYW4gZWZmaWNpZW50bHkgZ2VuZXJhdGVkLCBpbW11dGFibGUgY29weSBvZiB0aGUgZGF0YSBhdFxuICogYSBEYXRhYmFzZSBsb2NhdGlvbi4gSXQgY2Fubm90IGJlIG1vZGlmaWVkIGFuZCB3aWxsIG5ldmVyIGNoYW5nZSAodG8gbW9kaWZ5XG4gKiBkYXRhLCB5b3UgYWx3YXlzIGNhbGwgdGhlIGBzZXQoKWAgbWV0aG9kIG9uIGEgYFJlZmVyZW5jZWAgZGlyZWN0bHkpLlxuICovXG5jbGFzcyBEYXRhU25hcHNob3Qge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBfbm9kZSAtIEEgU25hcHNob3ROb2RlIHRvIHdyYXAuXG4gICAgICogQHBhcmFtIHJlZiAtIFRoZSBsb2NhdGlvbiB0aGlzIHNuYXBzaG90IGNhbWUgZnJvbS5cbiAgICAgKiBAcGFyYW0gX2luZGV4IC0gVGhlIGl0ZXJhdGlvbiBvcmRlciBmb3IgdGhpcyBzbmFwc2hvdFxuICAgICAqIEBoaWRlY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihfbm9kZSwgXG4gICAgLyoqXG4gICAgICogVGhlIGxvY2F0aW9uIG9mIHRoaXMgRGF0YVNuYXBzaG90LlxuICAgICAqL1xuICAgIHJlZiwgX2luZGV4KSB7XG4gICAgICAgIHRoaXMuX25vZGUgPSBfbm9kZTtcbiAgICAgICAgdGhpcy5yZWYgPSByZWY7XG4gICAgICAgIHRoaXMuX2luZGV4ID0gX2luZGV4O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBwcmlvcml0eSB2YWx1ZSBvZiB0aGUgZGF0YSBpbiB0aGlzIGBEYXRhU25hcHNob3RgLlxuICAgICAqXG4gICAgICogQXBwbGljYXRpb25zIG5lZWQgbm90IHVzZSBwcmlvcml0eSBidXQgY2FuIG9yZGVyIGNvbGxlY3Rpb25zIGJ5XG4gICAgICogb3JkaW5hcnkgcHJvcGVydGllcyAoc2VlXG4gICAgICoge0BsaW5rIGh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlLmNvbS9kb2NzL2RhdGFiYXNlL3dlYi9saXN0cy1vZi1kYXRhI3NvcnRpbmdfYW5kX2ZpbHRlcmluZ19kYXRhIHxTb3J0aW5nIGFuZCBmaWx0ZXJpbmcgZGF0YX1cbiAgICAgKiApLlxuICAgICAqL1xuICAgIGdldCBwcmlvcml0eSgpIHtcbiAgICAgICAgLy8gdHlwZWNhc3QgaGVyZSBiZWNhdXNlIHdlIG5ldmVyIHJldHVybiBkZWZlcnJlZCB2YWx1ZXMgb3IgaW50ZXJuYWwgcHJpb3JpdGllcyAoTUFYX1BSSU9SSVRZKVxuICAgICAgICByZXR1cm4gdGhpcy5fbm9kZS5nZXRQcmlvcml0eSgpLnZhbCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUga2V5IChsYXN0IHBhcnQgb2YgdGhlIHBhdGgpIG9mIHRoZSBsb2NhdGlvbiBvZiB0aGlzIGBEYXRhU25hcHNob3RgLlxuICAgICAqXG4gICAgICogVGhlIGxhc3QgdG9rZW4gaW4gYSBEYXRhYmFzZSBsb2NhdGlvbiBpcyBjb25zaWRlcmVkIGl0cyBrZXkuIEZvciBleGFtcGxlLFxuICAgICAqIFwiYWRhXCIgaXMgdGhlIGtleSBmb3IgdGhlIC91c2Vycy9hZGEvIG5vZGUuIEFjY2Vzc2luZyB0aGUga2V5IG9uIGFueVxuICAgICAqIGBEYXRhU25hcHNob3RgIHdpbGwgcmV0dXJuIHRoZSBrZXkgZm9yIHRoZSBsb2NhdGlvbiB0aGF0IGdlbmVyYXRlZCBpdC5cbiAgICAgKiBIb3dldmVyLCBhY2Nlc3NpbmcgdGhlIGtleSBvbiB0aGUgcm9vdCBVUkwgb2YgYSBEYXRhYmFzZSB3aWxsIHJldHVyblxuICAgICAqIGBudWxsYC5cbiAgICAgKi9cbiAgICBnZXQga2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWYua2V5O1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGNoaWxkIHByb3BlcnRpZXMgb2YgdGhpcyBgRGF0YVNuYXBzaG90YC4gKi9cbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX25vZGUubnVtQ2hpbGRyZW4oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyBhbm90aGVyIGBEYXRhU25hcHNob3RgIGZvciB0aGUgbG9jYXRpb24gYXQgdGhlIHNwZWNpZmllZCByZWxhdGl2ZSBwYXRoLlxuICAgICAqXG4gICAgICogUGFzc2luZyBhIHJlbGF0aXZlIHBhdGggdG8gdGhlIGBjaGlsZCgpYCBtZXRob2Qgb2YgYSBEYXRhU25hcHNob3QgcmV0dXJuc1xuICAgICAqIGFub3RoZXIgYERhdGFTbmFwc2hvdGAgZm9yIHRoZSBsb2NhdGlvbiBhdCB0aGUgc3BlY2lmaWVkIHJlbGF0aXZlIHBhdGguIFRoZVxuICAgICAqIHJlbGF0aXZlIHBhdGggY2FuIGVpdGhlciBiZSBhIHNpbXBsZSBjaGlsZCBuYW1lIChmb3IgZXhhbXBsZSwgXCJhZGFcIikgb3IgYVxuICAgICAqIGRlZXBlciwgc2xhc2gtc2VwYXJhdGVkIHBhdGggKGZvciBleGFtcGxlLCBcImFkYS9uYW1lL2ZpcnN0XCIpLiBJZiB0aGUgY2hpbGRcbiAgICAgKiBsb2NhdGlvbiBoYXMgbm8gZGF0YSwgYW4gZW1wdHkgYERhdGFTbmFwc2hvdGAgKHRoYXQgaXMsIGEgYERhdGFTbmFwc2hvdGBcbiAgICAgKiB3aG9zZSB2YWx1ZSBpcyBgbnVsbGApIGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdGggLSBBIHJlbGF0aXZlIHBhdGggdG8gdGhlIGxvY2F0aW9uIG9mIGNoaWxkIGRhdGEuXG4gICAgICovXG4gICAgY2hpbGQocGF0aCkge1xuICAgICAgICBjb25zdCBjaGlsZFBhdGggPSBuZXcgUGF0aChwYXRoKTtcbiAgICAgICAgY29uc3QgY2hpbGRSZWYgPSBjaGlsZCh0aGlzLnJlZiwgcGF0aCk7XG4gICAgICAgIHJldHVybiBuZXcgRGF0YVNuYXBzaG90KHRoaXMuX25vZGUuZ2V0Q2hpbGQoY2hpbGRQYXRoKSwgY2hpbGRSZWYsIFBSSU9SSVRZX0lOREVYKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYERhdGFTbmFwc2hvdGAgY29udGFpbnMgYW55IGRhdGEuIEl0IGlzIHNsaWdodGx5IG1vcmVcbiAgICAgKiBlZmZpY2llbnQgdGhhbiB1c2luZyBgc25hcHNob3QudmFsKCkgIT09IG51bGxgLlxuICAgICAqL1xuICAgIGV4aXN0cygpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLl9ub2RlLmlzRW1wdHkoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXhwb3J0cyB0aGUgZW50aXJlIGNvbnRlbnRzIG9mIHRoZSBEYXRhU25hcHNob3QgYXMgYSBKYXZhU2NyaXB0IG9iamVjdC5cbiAgICAgKlxuICAgICAqIFRoZSBgZXhwb3J0VmFsKClgIG1ldGhvZCBpcyBzaW1pbGFyIHRvIGB2YWwoKWAsIGV4Y2VwdCBwcmlvcml0eSBpbmZvcm1hdGlvblxuICAgICAqIGlzIGluY2x1ZGVkIChpZiBhdmFpbGFibGUpLCBtYWtpbmcgaXQgc3VpdGFibGUgZm9yIGJhY2tpbmcgdXAgeW91ciBkYXRhLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIERhdGFTbmFwc2hvdCdzIGNvbnRlbnRzIGFzIGEgSmF2YVNjcmlwdCB2YWx1ZSAoT2JqZWN0LFxuICAgICAqICAgQXJyYXksIHN0cmluZywgbnVtYmVyLCBib29sZWFuLCBvciBgbnVsbGApLlxuICAgICAqL1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgZXhwb3J0VmFsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbm9kZS52YWwodHJ1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVudW1lcmF0ZXMgdGhlIHRvcC1sZXZlbCBjaGlsZHJlbiBpbiB0aGUgYEl0ZXJhdGVkRGF0YVNuYXBzaG90YC5cbiAgICAgKlxuICAgICAqIEJlY2F1c2Ugb2YgdGhlIHdheSBKYXZhU2NyaXB0IG9iamVjdHMgd29yaywgdGhlIG9yZGVyaW5nIG9mIGRhdGEgaW4gdGhlXG4gICAgICogSmF2YVNjcmlwdCBvYmplY3QgcmV0dXJuZWQgYnkgYHZhbCgpYCBpcyBub3QgZ3VhcmFudGVlZCB0byBtYXRjaCB0aGVcbiAgICAgKiBvcmRlcmluZyBvbiB0aGUgc2VydmVyIG5vciB0aGUgb3JkZXJpbmcgb2YgYG9uQ2hpbGRBZGRlZCgpYCBldmVudHMuIFRoYXQgaXNcbiAgICAgKiB3aGVyZSBgZm9yRWFjaCgpYCBjb21lcyBpbiBoYW5keS4gSXQgZ3VhcmFudGVlcyB0aGUgY2hpbGRyZW4gb2YgYVxuICAgICAqIGBEYXRhU25hcHNob3RgIHdpbGwgYmUgaXRlcmF0ZWQgaW4gdGhlaXIgcXVlcnkgb3JkZXIuXG4gICAgICpcbiAgICAgKiBJZiBubyBleHBsaWNpdCBgb3JkZXJCeSooKWAgbWV0aG9kIGlzIHVzZWQsIHJlc3VsdHMgYXJlIHJldHVybmVkXG4gICAgICogb3JkZXJlZCBieSBrZXkgKHVubGVzcyBwcmlvcml0aWVzIGFyZSB1c2VkLCBpbiB3aGljaCBjYXNlLCByZXN1bHRzIGFyZVxuICAgICAqIHJldHVybmVkIGJ5IHByaW9yaXR5KS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhY3Rpb24gLSBBIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWQgZm9yIGVhY2ggY2hpbGQgRGF0YVNuYXBzaG90LlxuICAgICAqIFRoZSBjYWxsYmFjayBjYW4gcmV0dXJuIHRydWUgdG8gY2FuY2VsIGZ1cnRoZXIgZW51bWVyYXRpb24uXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiBlbnVtZXJhdGlvbiB3YXMgY2FuY2VsZWQgZHVlIHRvIHlvdXIgY2FsbGJhY2sgcmV0dXJuaW5nXG4gICAgICogdHJ1ZS5cbiAgICAgKi9cbiAgICBmb3JFYWNoKGFjdGlvbikge1xuICAgICAgICBpZiAodGhpcy5fbm9kZS5pc0xlYWZOb2RlKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjaGlsZHJlbk5vZGUgPSB0aGlzLl9ub2RlO1xuICAgICAgICAvLyBTYW5pdGl6ZSB0aGUgcmV0dXJuIHZhbHVlIHRvIGEgYm9vbGVhbi4gQ2hpbGRyZW5Ob2RlLmZvckVhY2hDaGlsZCBoYXMgYSB3ZWlyZCByZXR1cm4gdHlwZS4uLlxuICAgICAgICByZXR1cm4gISFjaGlsZHJlbk5vZGUuZm9yRWFjaENoaWxkKHRoaXMuX2luZGV4LCAoa2V5LCBub2RlKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gYWN0aW9uKG5ldyBEYXRhU25hcHNob3Qobm9kZSwgY2hpbGQodGhpcy5yZWYsIGtleSksIFBSSU9SSVRZX0lOREVYKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHNwZWNpZmllZCBjaGlsZCBwYXRoIGhhcyAobm9uLW51bGwpIGRhdGEuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGF0aCAtIEEgcmVsYXRpdmUgcGF0aCB0byB0aGUgbG9jYXRpb24gb2YgYSBwb3RlbnRpYWwgY2hpbGQuXG4gICAgICogQHJldHVybnMgYHRydWVgIGlmIGRhdGEgZXhpc3RzIGF0IHRoZSBzcGVjaWZpZWQgY2hpbGQgcGF0aDsgZWxzZVxuICAgICAqICBgZmFsc2VgLlxuICAgICAqL1xuICAgIGhhc0NoaWxkKHBhdGgpIHtcbiAgICAgICAgY29uc3QgY2hpbGRQYXRoID0gbmV3IFBhdGgocGF0aCk7XG4gICAgICAgIHJldHVybiAhdGhpcy5fbm9kZS5nZXRDaGlsZChjaGlsZFBhdGgpLmlzRW1wdHkoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgYERhdGFTbmFwc2hvdGAgaGFzIGFueSBub24tYG51bGxgIGNoaWxkXG4gICAgICogcHJvcGVydGllcy5cbiAgICAgKlxuICAgICAqIFlvdSBjYW4gdXNlIGBoYXNDaGlsZHJlbigpYCB0byBkZXRlcm1pbmUgaWYgYSBgRGF0YVNuYXBzaG90YCBoYXMgYW55XG4gICAgICogY2hpbGRyZW4uIElmIGl0IGRvZXMsIHlvdSBjYW4gZW51bWVyYXRlIHRoZW0gdXNpbmcgYGZvckVhY2goKWAuIElmIGl0XG4gICAgICogZG9lc24ndCwgdGhlbiBlaXRoZXIgdGhpcyBzbmFwc2hvdCBjb250YWlucyBhIHByaW1pdGl2ZSB2YWx1ZSAod2hpY2ggY2FuIGJlXG4gICAgICogcmV0cmlldmVkIHdpdGggYHZhbCgpYCkgb3IgaXQgaXMgZW1wdHkgKGluIHdoaWNoIGNhc2UsIGB2YWwoKWAgd2lsbCByZXR1cm5cbiAgICAgKiBgbnVsbGApLlxuICAgICAqXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIHNuYXBzaG90IGhhcyBhbnkgY2hpbGRyZW47IGVsc2UgZmFsc2UuXG4gICAgICovXG4gICAgaGFzQ2hpbGRyZW4oKSB7XG4gICAgICAgIGlmICh0aGlzLl9ub2RlLmlzTGVhZk5vZGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuICF0aGlzLl9ub2RlLmlzRW1wdHkoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgSlNPTi1zZXJpYWxpemFibGUgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBvYmplY3QuXG4gICAgICovXG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5leHBvcnRWYWwoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXh0cmFjdHMgYSBKYXZhU2NyaXB0IHZhbHVlIGZyb20gYSBgRGF0YVNuYXBzaG90YC5cbiAgICAgKlxuICAgICAqIERlcGVuZGluZyBvbiB0aGUgZGF0YSBpbiBhIGBEYXRhU25hcHNob3RgLCB0aGUgYHZhbCgpYCBtZXRob2QgbWF5IHJldHVybiBhXG4gICAgICogc2NhbGFyIHR5cGUgKHN0cmluZywgbnVtYmVyLCBvciBib29sZWFuKSwgYW4gYXJyYXksIG9yIGFuIG9iamVjdC4gSXQgbWF5XG4gICAgICogYWxzbyByZXR1cm4gbnVsbCwgaW5kaWNhdGluZyB0aGF0IHRoZSBgRGF0YVNuYXBzaG90YCBpcyBlbXB0eSAoY29udGFpbnMgbm9cbiAgICAgKiBkYXRhKS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBEYXRhU25hcHNob3QncyBjb250ZW50cyBhcyBhIEphdmFTY3JpcHQgdmFsdWUgKE9iamVjdCxcbiAgICAgKiAgIEFycmF5LCBzdHJpbmcsIG51bWJlciwgYm9vbGVhbiwgb3IgYG51bGxgKS5cbiAgICAgKi9cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHZhbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX25vZGUudmFsKCk7XG4gICAgfVxufVxuLyoqXG4gKlxuICogUmV0dXJucyBhIGBSZWZlcmVuY2VgIHJlcHJlc2VudGluZyB0aGUgbG9jYXRpb24gaW4gdGhlIERhdGFiYXNlXG4gKiBjb3JyZXNwb25kaW5nIHRvIHRoZSBwcm92aWRlZCBwYXRoLiBJZiBubyBwYXRoIGlzIHByb3ZpZGVkLCB0aGUgYFJlZmVyZW5jZWBcbiAqIHdpbGwgcG9pbnQgdG8gdGhlIHJvb3Qgb2YgdGhlIERhdGFiYXNlLlxuICpcbiAqIEBwYXJhbSBkYiAtIFRoZSBkYXRhYmFzZSBpbnN0YW5jZSB0byBvYnRhaW4gYSByZWZlcmVuY2UgZm9yLlxuICogQHBhcmFtIHBhdGggLSBPcHRpb25hbCBwYXRoIHJlcHJlc2VudGluZyB0aGUgbG9jYXRpb24gdGhlIHJldHVybmVkXG4gKiAgIGBSZWZlcmVuY2VgIHdpbGwgcG9pbnQuIElmIG5vdCBwcm92aWRlZCwgdGhlIHJldHVybmVkIGBSZWZlcmVuY2VgIHdpbGxcbiAqICAgcG9pbnQgdG8gdGhlIHJvb3Qgb2YgdGhlIERhdGFiYXNlLlxuICogQHJldHVybnMgSWYgYSBwYXRoIGlzIHByb3ZpZGVkLCBhIGBSZWZlcmVuY2VgXG4gKiAgIHBvaW50aW5nIHRvIHRoZSBwcm92aWRlZCBwYXRoLiBPdGhlcndpc2UsIGEgYFJlZmVyZW5jZWAgcG9pbnRpbmcgdG8gdGhlXG4gKiAgIHJvb3Qgb2YgdGhlIERhdGFiYXNlLlxuICovXG5mdW5jdGlvbiByZWYoZGIsIHBhdGgpIHtcbiAgICBkYiA9IGdldE1vZHVsYXJJbnN0YW5jZShkYik7XG4gICAgZGIuX2NoZWNrTm90RGVsZXRlZCgncmVmJyk7XG4gICAgcmV0dXJuIHBhdGggIT09IHVuZGVmaW5lZCA/IGNoaWxkKGRiLl9yb290LCBwYXRoKSA6IGRiLl9yb290O1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgYFJlZmVyZW5jZWAgcmVwcmVzZW50aW5nIHRoZSBsb2NhdGlvbiBpbiB0aGUgRGF0YWJhc2VcbiAqIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHByb3ZpZGVkIEZpcmViYXNlIFVSTC5cbiAqXG4gKiBBbiBleGNlcHRpb24gaXMgdGhyb3duIGlmIHRoZSBVUkwgaXMgbm90IGEgdmFsaWQgRmlyZWJhc2UgRGF0YWJhc2UgVVJMIG9yIGl0XG4gKiBoYXMgYSBkaWZmZXJlbnQgZG9tYWluIHRoYW4gdGhlIGN1cnJlbnQgYERhdGFiYXNlYCBpbnN0YW5jZS5cbiAqXG4gKiBOb3RlIHRoYXQgYWxsIHF1ZXJ5IHBhcmFtZXRlcnMgKGBvcmRlckJ5YCwgYGxpbWl0VG9MYXN0YCwgZXRjLikgYXJlIGlnbm9yZWRcbiAqIGFuZCBhcmUgbm90IGFwcGxpZWQgdG8gdGhlIHJldHVybmVkIGBSZWZlcmVuY2VgLlxuICpcbiAqIEBwYXJhbSBkYiAtIFRoZSBkYXRhYmFzZSBpbnN0YW5jZSB0byBvYnRhaW4gYSByZWZlcmVuY2UgZm9yLlxuICogQHBhcmFtIHVybCAtIFRoZSBGaXJlYmFzZSBVUkwgYXQgd2hpY2ggdGhlIHJldHVybmVkIGBSZWZlcmVuY2VgIHdpbGxcbiAqICAgcG9pbnQuXG4gKiBAcmV0dXJucyBBIGBSZWZlcmVuY2VgIHBvaW50aW5nIHRvIHRoZSBwcm92aWRlZFxuICogICBGaXJlYmFzZSBVUkwuXG4gKi9cbmZ1bmN0aW9uIHJlZkZyb21VUkwoZGIsIHVybCkge1xuICAgIGRiID0gZ2V0TW9kdWxhckluc3RhbmNlKGRiKTtcbiAgICBkYi5fY2hlY2tOb3REZWxldGVkKCdyZWZGcm9tVVJMJyk7XG4gICAgY29uc3QgcGFyc2VkVVJMID0gcGFyc2VSZXBvSW5mbyh1cmwsIGRiLl9yZXBvLnJlcG9JbmZvXy5ub2RlQWRtaW4pO1xuICAgIHZhbGlkYXRlVXJsKCdyZWZGcm9tVVJMJywgcGFyc2VkVVJMKTtcbiAgICBjb25zdCByZXBvSW5mbyA9IHBhcnNlZFVSTC5yZXBvSW5mbztcbiAgICBpZiAoIWRiLl9yZXBvLnJlcG9JbmZvXy5pc0N1c3RvbUhvc3QoKSAmJlxuICAgICAgICByZXBvSW5mby5ob3N0ICE9PSBkYi5fcmVwby5yZXBvSW5mb18uaG9zdCkge1xuICAgICAgICBmYXRhbCgncmVmRnJvbVVSTCcgK1xuICAgICAgICAgICAgJzogSG9zdCBuYW1lIGRvZXMgbm90IG1hdGNoIHRoZSBjdXJyZW50IGRhdGFiYXNlOiAnICtcbiAgICAgICAgICAgICcoZm91bmQgJyArXG4gICAgICAgICAgICByZXBvSW5mby5ob3N0ICtcbiAgICAgICAgICAgICcgYnV0IGV4cGVjdGVkICcgK1xuICAgICAgICAgICAgZGIuX3JlcG8ucmVwb0luZm9fLmhvc3QgK1xuICAgICAgICAgICAgJyknKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlZihkYiwgcGFyc2VkVVJMLnBhdGgudG9TdHJpbmcoKSk7XG59XG4vKipcbiAqIEdldHMgYSBgUmVmZXJlbmNlYCBmb3IgdGhlIGxvY2F0aW9uIGF0IHRoZSBzcGVjaWZpZWQgcmVsYXRpdmUgcGF0aC5cbiAqXG4gKiBUaGUgcmVsYXRpdmUgcGF0aCBjYW4gZWl0aGVyIGJlIGEgc2ltcGxlIGNoaWxkIG5hbWUgKGZvciBleGFtcGxlLCBcImFkYVwiKSBvclxuICogYSBkZWVwZXIgc2xhc2gtc2VwYXJhdGVkIHBhdGggKGZvciBleGFtcGxlLCBcImFkYS9uYW1lL2ZpcnN0XCIpLlxuICpcbiAqIEBwYXJhbSBwYXJlbnQgLSBUaGUgcGFyZW50IGxvY2F0aW9uLlxuICogQHBhcmFtIHBhdGggLSBBIHJlbGF0aXZlIHBhdGggZnJvbSB0aGlzIGxvY2F0aW9uIHRvIHRoZSBkZXNpcmVkIGNoaWxkXG4gKiAgIGxvY2F0aW9uLlxuICogQHJldHVybnMgVGhlIHNwZWNpZmllZCBjaGlsZCBsb2NhdGlvbi5cbiAqL1xuZnVuY3Rpb24gY2hpbGQocGFyZW50LCBwYXRoKSB7XG4gICAgcGFyZW50ID0gZ2V0TW9kdWxhckluc3RhbmNlKHBhcmVudCk7XG4gICAgaWYgKHBhdGhHZXRGcm9udChwYXJlbnQuX3BhdGgpID09PSBudWxsKSB7XG4gICAgICAgIHZhbGlkYXRlUm9vdFBhdGhTdHJpbmcoJ2NoaWxkJywgJ3BhdGgnLCBwYXRoLCBmYWxzZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YWxpZGF0ZVBhdGhTdHJpbmcoJ2NoaWxkJywgJ3BhdGgnLCBwYXRoLCBmYWxzZSk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgUmVmZXJlbmNlSW1wbChwYXJlbnQuX3JlcG8sIHBhdGhDaGlsZChwYXJlbnQuX3BhdGgsIHBhdGgpKTtcbn1cbi8qKlxuICogUmV0dXJucyBhbiBgT25EaXNjb25uZWN0YCBvYmplY3QgLSBzZWVcbiAqIHtAbGluayBodHRwczovL2ZpcmViYXNlLmdvb2dsZS5jb20vZG9jcy9kYXRhYmFzZS93ZWIvb2ZmbGluZS1jYXBhYmlsaXRpZXMgfCBFbmFibGluZyBPZmZsaW5lIENhcGFiaWxpdGllcyBpbiBKYXZhU2NyaXB0fVxuICogZm9yIG1vcmUgaW5mb3JtYXRpb24gb24gaG93IHRvIHVzZSBpdC5cbiAqXG4gKiBAcGFyYW0gcmVmIC0gVGhlIHJlZmVyZW5jZSB0byBhZGQgT25EaXNjb25uZWN0IHRyaWdnZXJzIGZvci5cbiAqL1xuZnVuY3Rpb24gb25EaXNjb25uZWN0KHJlZikge1xuICAgIHJlZiA9IGdldE1vZHVsYXJJbnN0YW5jZShyZWYpO1xuICAgIHJldHVybiBuZXcgT25EaXNjb25uZWN0KHJlZi5fcmVwbywgcmVmLl9wYXRoKTtcbn1cbi8qKlxuICogR2VuZXJhdGVzIGEgbmV3IGNoaWxkIGxvY2F0aW9uIHVzaW5nIGEgdW5pcXVlIGtleSBhbmQgcmV0dXJucyBpdHNcbiAqIGBSZWZlcmVuY2VgLlxuICpcbiAqIFRoaXMgaXMgdGhlIG1vc3QgY29tbW9uIHBhdHRlcm4gZm9yIGFkZGluZyBkYXRhIHRvIGEgY29sbGVjdGlvbiBvZiBpdGVtcy5cbiAqXG4gKiBJZiB5b3UgcHJvdmlkZSBhIHZhbHVlIHRvIGBwdXNoKClgLCB0aGUgdmFsdWUgaXMgd3JpdHRlbiB0byB0aGVcbiAqIGdlbmVyYXRlZCBsb2NhdGlvbi4gSWYgeW91IGRvbid0IHBhc3MgYSB2YWx1ZSwgbm90aGluZyBpcyB3cml0dGVuIHRvIHRoZVxuICogZGF0YWJhc2UgYW5kIHRoZSBjaGlsZCByZW1haW5zIGVtcHR5IChidXQgeW91IGNhbiB1c2UgdGhlIGBSZWZlcmVuY2VgXG4gKiBlbHNld2hlcmUpLlxuICpcbiAqIFRoZSB1bmlxdWUga2V5cyBnZW5lcmF0ZWQgYnkgYHB1c2goKWAgYXJlIG9yZGVyZWQgYnkgdGhlIGN1cnJlbnQgdGltZSwgc28gdGhlXG4gKiByZXN1bHRpbmcgbGlzdCBvZiBpdGVtcyBpcyBjaHJvbm9sb2dpY2FsbHkgc29ydGVkLiBUaGUga2V5cyBhcmUgYWxzb1xuICogZGVzaWduZWQgdG8gYmUgdW5ndWVzc2FibGUgKHRoZXkgY29udGFpbiA3MiByYW5kb20gYml0cyBvZiBlbnRyb3B5KS5cbiAqXG4gKiBTZWUge0BsaW5rIGh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlLmNvbS9kb2NzL2RhdGFiYXNlL3dlYi9saXN0cy1vZi1kYXRhI2FwcGVuZF90b19hX2xpc3Rfb2ZfZGF0YSB8IEFwcGVuZCB0byBhIGxpc3Qgb2YgZGF0YX0uXG4gKiBTZWUge0BsaW5rIGh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlYmxvZy5jb20vMjAxNS8wMi90aGUtMjEyMC13YXlzLXRvLWVuc3VyZS11bmlxdWVfNjguaHRtbCB8IFRoZSAyXjEyMCBXYXlzIHRvIEVuc3VyZSBVbmlxdWUgSWRlbnRpZmllcnN9LlxuICpcbiAqIEBwYXJhbSBwYXJlbnQgLSBUaGUgcGFyZW50IGxvY2F0aW9uLlxuICogQHBhcmFtIHZhbHVlIC0gT3B0aW9uYWwgdmFsdWUgdG8gYmUgd3JpdHRlbiBhdCB0aGUgZ2VuZXJhdGVkIGxvY2F0aW9uLlxuICogQHJldHVybnMgQ29tYmluZWQgYFByb21pc2VgIGFuZCBgUmVmZXJlbmNlYDsgcmVzb2x2ZXMgd2hlbiB3cml0ZSBpcyBjb21wbGV0ZSxcbiAqIGJ1dCBjYW4gYmUgdXNlZCBpbW1lZGlhdGVseSBhcyB0aGUgYFJlZmVyZW5jZWAgdG8gdGhlIGNoaWxkIGxvY2F0aW9uLlxuICovXG5mdW5jdGlvbiBwdXNoKHBhcmVudCwgdmFsdWUpIHtcbiAgICBwYXJlbnQgPSBnZXRNb2R1bGFySW5zdGFuY2UocGFyZW50KTtcbiAgICB2YWxpZGF0ZVdyaXRhYmxlUGF0aCgncHVzaCcsIHBhcmVudC5fcGF0aCk7XG4gICAgdmFsaWRhdGVGaXJlYmFzZURhdGFBcmcoJ3B1c2gnLCB2YWx1ZSwgcGFyZW50Ll9wYXRoLCB0cnVlKTtcbiAgICBjb25zdCBub3cgPSByZXBvU2VydmVyVGltZShwYXJlbnQuX3JlcG8pO1xuICAgIGNvbnN0IG5hbWUgPSBuZXh0UHVzaElkKG5vdyk7XG4gICAgLy8gcHVzaCgpIHJldHVybnMgYSBUaGVubmFibGVSZWZlcmVuY2Ugd2hvc2UgcHJvbWlzZSBpcyBmdWxmaWxsZWQgd2l0aCBhXG4gICAgLy8gcmVndWxhciBSZWZlcmVuY2UuIFdlIHVzZSBjaGlsZCgpIHRvIGNyZWF0ZSBoYW5kbGVzIHRvIHR3byBkaWZmZXJlbnRcbiAgICAvLyByZWZlcmVuY2VzLiBUaGUgZmlyc3QgaXMgdHVybmVkIGludG8gYSBUaGVubmFibGVSZWZlcmVuY2UgYmVsb3cgYnkgYWRkaW5nXG4gICAgLy8gdGhlbigpIGFuZCBjYXRjaCgpIG1ldGhvZHMgYW5kIGlzIHVzZWQgYXMgdGhlIHJldHVybiB2YWx1ZSBvZiBwdXNoKCkuIFRoZVxuICAgIC8vIHNlY29uZCByZW1haW5zIGEgcmVndWxhciBSZWZlcmVuY2UgYW5kIGlzIHVzZWQgYXMgdGhlIGZ1bGZpbGxlZCB2YWx1ZSBvZlxuICAgIC8vIHRoZSBmaXJzdCBUaGVubmFibGVSZWZlcmVuY2UuXG4gICAgY29uc3QgdGhlbmFibGVQdXNoUmVmID0gY2hpbGQocGFyZW50LCBuYW1lKTtcbiAgICBjb25zdCBwdXNoUmVmID0gY2hpbGQocGFyZW50LCBuYW1lKTtcbiAgICBsZXQgcHJvbWlzZTtcbiAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgICBwcm9taXNlID0gc2V0KHB1c2hSZWYsIHZhbHVlKS50aGVuKCgpID0+IHB1c2hSZWYpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZShwdXNoUmVmKTtcbiAgICB9XG4gICAgdGhlbmFibGVQdXNoUmVmLnRoZW4gPSBwcm9taXNlLnRoZW4uYmluZChwcm9taXNlKTtcbiAgICB0aGVuYWJsZVB1c2hSZWYuY2F0Y2ggPSBwcm9taXNlLnRoZW4uYmluZChwcm9taXNlLCB1bmRlZmluZWQpO1xuICAgIHJldHVybiB0aGVuYWJsZVB1c2hSZWY7XG59XG4vKipcbiAqIFJlbW92ZXMgdGhlIGRhdGEgYXQgdGhpcyBEYXRhYmFzZSBsb2NhdGlvbi5cbiAqXG4gKiBBbnkgZGF0YSBhdCBjaGlsZCBsb2NhdGlvbnMgd2lsbCBhbHNvIGJlIGRlbGV0ZWQuXG4gKlxuICogVGhlIGVmZmVjdCBvZiB0aGUgcmVtb3ZlIHdpbGwgYmUgdmlzaWJsZSBpbW1lZGlhdGVseSBhbmQgdGhlIGNvcnJlc3BvbmRpbmdcbiAqIGV2ZW50ICd2YWx1ZScgd2lsbCBiZSB0cmlnZ2VyZWQuIFN5bmNocm9uaXphdGlvbiBvZiB0aGUgcmVtb3ZlIHRvIHRoZVxuICogRmlyZWJhc2Ugc2VydmVycyB3aWxsIGFsc28gYmUgc3RhcnRlZCwgYW5kIHRoZSByZXR1cm5lZCBQcm9taXNlIHdpbGwgcmVzb2x2ZVxuICogd2hlbiBjb21wbGV0ZS4gSWYgcHJvdmlkZWQsIHRoZSBvbkNvbXBsZXRlIGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkXG4gKiBhc3luY2hyb25vdXNseSBhZnRlciBzeW5jaHJvbml6YXRpb24gaGFzIGZpbmlzaGVkLlxuICpcbiAqIEBwYXJhbSByZWYgLSBUaGUgbG9jYXRpb24gdG8gcmVtb3ZlLlxuICogQHJldHVybnMgUmVzb2x2ZXMgd2hlbiByZW1vdmUgb24gc2VydmVyIGlzIGNvbXBsZXRlLlxuICovXG5mdW5jdGlvbiByZW1vdmUocmVmKSB7XG4gICAgdmFsaWRhdGVXcml0YWJsZVBhdGgoJ3JlbW92ZScsIHJlZi5fcGF0aCk7XG4gICAgcmV0dXJuIHNldChyZWYsIG51bGwpO1xufVxuLyoqXG4gKiBXcml0ZXMgZGF0YSB0byB0aGlzIERhdGFiYXNlIGxvY2F0aW9uLlxuICpcbiAqIFRoaXMgd2lsbCBvdmVyd3JpdGUgYW55IGRhdGEgYXQgdGhpcyBsb2NhdGlvbiBhbmQgYWxsIGNoaWxkIGxvY2F0aW9ucy5cbiAqXG4gKiBUaGUgZWZmZWN0IG9mIHRoZSB3cml0ZSB3aWxsIGJlIHZpc2libGUgaW1tZWRpYXRlbHksIGFuZCB0aGUgY29ycmVzcG9uZGluZ1xuICogZXZlbnRzIChcInZhbHVlXCIsIFwiY2hpbGRfYWRkZWRcIiwgZXRjLikgd2lsbCBiZSB0cmlnZ2VyZWQuIFN5bmNocm9uaXphdGlvbiBvZlxuICogdGhlIGRhdGEgdG8gdGhlIEZpcmViYXNlIHNlcnZlcnMgd2lsbCBhbHNvIGJlIHN0YXJ0ZWQsIGFuZCB0aGUgcmV0dXJuZWRcbiAqIFByb21pc2Ugd2lsbCByZXNvbHZlIHdoZW4gY29tcGxldGUuIElmIHByb3ZpZGVkLCB0aGUgYG9uQ29tcGxldGVgIGNhbGxiYWNrXG4gKiB3aWxsIGJlIGNhbGxlZCBhc3luY2hyb25vdXNseSBhZnRlciBzeW5jaHJvbml6YXRpb24gaGFzIGZpbmlzaGVkLlxuICpcbiAqIFBhc3NpbmcgYG51bGxgIGZvciB0aGUgbmV3IHZhbHVlIGlzIGVxdWl2YWxlbnQgdG8gY2FsbGluZyBgcmVtb3ZlKClgOyBuYW1lbHksXG4gKiBhbGwgZGF0YSBhdCB0aGlzIGxvY2F0aW9uIGFuZCBhbGwgY2hpbGQgbG9jYXRpb25zIHdpbGwgYmUgZGVsZXRlZC5cbiAqXG4gKiBgc2V0KClgIHdpbGwgcmVtb3ZlIGFueSBwcmlvcml0eSBzdG9yZWQgYXQgdGhpcyBsb2NhdGlvbiwgc28gaWYgcHJpb3JpdHkgaXNcbiAqIG1lYW50IHRvIGJlIHByZXNlcnZlZCwgeW91IG5lZWQgdG8gdXNlIGBzZXRXaXRoUHJpb3JpdHkoKWAgaW5zdGVhZC5cbiAqXG4gKiBOb3RlIHRoYXQgbW9kaWZ5aW5nIGRhdGEgd2l0aCBgc2V0KClgIHdpbGwgY2FuY2VsIGFueSBwZW5kaW5nIHRyYW5zYWN0aW9uc1xuICogYXQgdGhhdCBsb2NhdGlvbiwgc28gZXh0cmVtZSBjYXJlIHNob3VsZCBiZSB0YWtlbiBpZiBtaXhpbmcgYHNldCgpYCBhbmRcbiAqIGB0cmFuc2FjdGlvbigpYCB0byBtb2RpZnkgdGhlIHNhbWUgZGF0YS5cbiAqXG4gKiBBIHNpbmdsZSBgc2V0KClgIHdpbGwgZ2VuZXJhdGUgYSBzaW5nbGUgXCJ2YWx1ZVwiIGV2ZW50IGF0IHRoZSBsb2NhdGlvbiB3aGVyZVxuICogdGhlIGBzZXQoKWAgd2FzIHBlcmZvcm1lZC5cbiAqXG4gKiBAcGFyYW0gcmVmIC0gVGhlIGxvY2F0aW9uIHRvIHdyaXRlIHRvLlxuICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIGJlIHdyaXR0ZW4gKHN0cmluZywgbnVtYmVyLCBib29sZWFuLCBvYmplY3QsXG4gKiAgIGFycmF5LCBvciBudWxsKS5cbiAqIEByZXR1cm5zIFJlc29sdmVzIHdoZW4gd3JpdGUgdG8gc2VydmVyIGlzIGNvbXBsZXRlLlxuICovXG5mdW5jdGlvbiBzZXQocmVmLCB2YWx1ZSkge1xuICAgIHJlZiA9IGdldE1vZHVsYXJJbnN0YW5jZShyZWYpO1xuICAgIHZhbGlkYXRlV3JpdGFibGVQYXRoKCdzZXQnLCByZWYuX3BhdGgpO1xuICAgIHZhbGlkYXRlRmlyZWJhc2VEYXRhQXJnKCdzZXQnLCB2YWx1ZSwgcmVmLl9wYXRoLCBmYWxzZSk7XG4gICAgY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICByZXBvU2V0V2l0aFByaW9yaXR5KHJlZi5fcmVwbywgcmVmLl9wYXRoLCB2YWx1ZSwgXG4gICAgLypwcmlvcml0eT0qLyBudWxsLCBkZWZlcnJlZC53cmFwQ2FsbGJhY2soKCkgPT4geyB9KSk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59XG4vKipcbiAqIFNldHMgYSBwcmlvcml0eSBmb3IgdGhlIGRhdGEgYXQgdGhpcyBEYXRhYmFzZSBsb2NhdGlvbi5cbiAqXG4gKiBBcHBsaWNhdGlvbnMgbmVlZCBub3QgdXNlIHByaW9yaXR5IGJ1dCBjYW4gb3JkZXIgY29sbGVjdGlvbnMgYnlcbiAqIG9yZGluYXJ5IHByb3BlcnRpZXMgKHNlZVxuICoge0BsaW5rIGh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlLmNvbS9kb2NzL2RhdGFiYXNlL3dlYi9saXN0cy1vZi1kYXRhI3NvcnRpbmdfYW5kX2ZpbHRlcmluZ19kYXRhIHwgU29ydGluZyBhbmQgZmlsdGVyaW5nIGRhdGF9XG4gKiApLlxuICpcbiAqIEBwYXJhbSByZWYgLSBUaGUgbG9jYXRpb24gdG8gd3JpdGUgdG8uXG4gKiBAcGFyYW0gcHJpb3JpdHkgLSBUaGUgcHJpb3JpdHkgdG8gYmUgd3JpdHRlbiAoc3RyaW5nLCBudW1iZXIsIG9yIG51bGwpLlxuICogQHJldHVybnMgUmVzb2x2ZXMgd2hlbiB3cml0ZSB0byBzZXJ2ZXIgaXMgY29tcGxldGUuXG4gKi9cbmZ1bmN0aW9uIHNldFByaW9yaXR5KHJlZiwgcHJpb3JpdHkpIHtcbiAgICByZWYgPSBnZXRNb2R1bGFySW5zdGFuY2UocmVmKTtcbiAgICB2YWxpZGF0ZVdyaXRhYmxlUGF0aCgnc2V0UHJpb3JpdHknLCByZWYuX3BhdGgpO1xuICAgIHZhbGlkYXRlUHJpb3JpdHkoJ3NldFByaW9yaXR5JywgcHJpb3JpdHksIGZhbHNlKTtcbiAgICBjb25zdCBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpO1xuICAgIHJlcG9TZXRXaXRoUHJpb3JpdHkocmVmLl9yZXBvLCBwYXRoQ2hpbGQocmVmLl9wYXRoLCAnLnByaW9yaXR5JyksIHByaW9yaXR5LCBudWxsLCBkZWZlcnJlZC53cmFwQ2FsbGJhY2soKCkgPT4geyB9KSk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59XG4vKipcbiAqIFdyaXRlcyBkYXRhIHRoZSBEYXRhYmFzZSBsb2NhdGlvbi4gTGlrZSBgc2V0KClgIGJ1dCBhbHNvIHNwZWNpZmllcyB0aGVcbiAqIHByaW9yaXR5IGZvciB0aGF0IGRhdGEuXG4gKlxuICogQXBwbGljYXRpb25zIG5lZWQgbm90IHVzZSBwcmlvcml0eSBidXQgY2FuIG9yZGVyIGNvbGxlY3Rpb25zIGJ5XG4gKiBvcmRpbmFyeSBwcm9wZXJ0aWVzIChzZWVcbiAqIHtAbGluayBodHRwczovL2ZpcmViYXNlLmdvb2dsZS5jb20vZG9jcy9kYXRhYmFzZS93ZWIvbGlzdHMtb2YtZGF0YSNzb3J0aW5nX2FuZF9maWx0ZXJpbmdfZGF0YSB8IFNvcnRpbmcgYW5kIGZpbHRlcmluZyBkYXRhfVxuICogKS5cbiAqXG4gKiBAcGFyYW0gcmVmIC0gVGhlIGxvY2F0aW9uIHRvIHdyaXRlIHRvLlxuICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIGJlIHdyaXR0ZW4gKHN0cmluZywgbnVtYmVyLCBib29sZWFuLCBvYmplY3QsXG4gKiAgIGFycmF5LCBvciBudWxsKS5cbiAqIEBwYXJhbSBwcmlvcml0eSAtIFRoZSBwcmlvcml0eSB0byBiZSB3cml0dGVuIChzdHJpbmcsIG51bWJlciwgb3IgbnVsbCkuXG4gKiBAcmV0dXJucyBSZXNvbHZlcyB3aGVuIHdyaXRlIHRvIHNlcnZlciBpcyBjb21wbGV0ZS5cbiAqL1xuZnVuY3Rpb24gc2V0V2l0aFByaW9yaXR5KHJlZiwgdmFsdWUsIHByaW9yaXR5KSB7XG4gICAgdmFsaWRhdGVXcml0YWJsZVBhdGgoJ3NldFdpdGhQcmlvcml0eScsIHJlZi5fcGF0aCk7XG4gICAgdmFsaWRhdGVGaXJlYmFzZURhdGFBcmcoJ3NldFdpdGhQcmlvcml0eScsIHZhbHVlLCByZWYuX3BhdGgsIGZhbHNlKTtcbiAgICB2YWxpZGF0ZVByaW9yaXR5KCdzZXRXaXRoUHJpb3JpdHknLCBwcmlvcml0eSwgZmFsc2UpO1xuICAgIGlmIChyZWYua2V5ID09PSAnLmxlbmd0aCcgfHwgcmVmLmtleSA9PT0gJy5rZXlzJykge1xuICAgICAgICB0aHJvdyAnc2V0V2l0aFByaW9yaXR5IGZhaWxlZDogJyArIHJlZi5rZXkgKyAnIGlzIGEgcmVhZC1vbmx5IG9iamVjdC4nO1xuICAgIH1cbiAgICBjb25zdCBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpO1xuICAgIHJlcG9TZXRXaXRoUHJpb3JpdHkocmVmLl9yZXBvLCByZWYuX3BhdGgsIHZhbHVlLCBwcmlvcml0eSwgZGVmZXJyZWQud3JhcENhbGxiYWNrKCgpID0+IHsgfSkpO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xufVxuLyoqXG4gKiBXcml0ZXMgbXVsdGlwbGUgdmFsdWVzIHRvIHRoZSBEYXRhYmFzZSBhdCBvbmNlLlxuICpcbiAqIFRoZSBgdmFsdWVzYCBhcmd1bWVudCBjb250YWlucyBtdWx0aXBsZSBwcm9wZXJ0eS12YWx1ZSBwYWlycyB0aGF0IHdpbGwgYmVcbiAqIHdyaXR0ZW4gdG8gdGhlIERhdGFiYXNlIHRvZ2V0aGVyLiBFYWNoIGNoaWxkIHByb3BlcnR5IGNhbiBlaXRoZXIgYmUgYSBzaW1wbGVcbiAqIHByb3BlcnR5IChmb3IgZXhhbXBsZSwgXCJuYW1lXCIpIG9yIGEgcmVsYXRpdmUgcGF0aCAoZm9yIGV4YW1wbGUsXG4gKiBcIm5hbWUvZmlyc3RcIikgZnJvbSB0aGUgY3VycmVudCBsb2NhdGlvbiB0byB0aGUgZGF0YSB0byB1cGRhdGUuXG4gKlxuICogQXMgb3Bwb3NlZCB0byB0aGUgYHNldCgpYCBtZXRob2QsIGB1cGRhdGUoKWAgY2FuIGJlIHVzZSB0byBzZWxlY3RpdmVseSB1cGRhdGVcbiAqIG9ubHkgdGhlIHJlZmVyZW5jZWQgcHJvcGVydGllcyBhdCB0aGUgY3VycmVudCBsb2NhdGlvbiAoaW5zdGVhZCBvZiByZXBsYWNpbmdcbiAqIGFsbCB0aGUgY2hpbGQgcHJvcGVydGllcyBhdCB0aGUgY3VycmVudCBsb2NhdGlvbikuXG4gKlxuICogVGhlIGVmZmVjdCBvZiB0aGUgd3JpdGUgd2lsbCBiZSB2aXNpYmxlIGltbWVkaWF0ZWx5LCBhbmQgdGhlIGNvcnJlc3BvbmRpbmdcbiAqIGV2ZW50cyAoJ3ZhbHVlJywgJ2NoaWxkX2FkZGVkJywgZXRjLikgd2lsbCBiZSB0cmlnZ2VyZWQuIFN5bmNocm9uaXphdGlvbiBvZlxuICogdGhlIGRhdGEgdG8gdGhlIEZpcmViYXNlIHNlcnZlcnMgd2lsbCBhbHNvIGJlIHN0YXJ0ZWQsIGFuZCB0aGUgcmV0dXJuZWRcbiAqIFByb21pc2Ugd2lsbCByZXNvbHZlIHdoZW4gY29tcGxldGUuIElmIHByb3ZpZGVkLCB0aGUgYG9uQ29tcGxldGVgIGNhbGxiYWNrXG4gKiB3aWxsIGJlIGNhbGxlZCBhc3luY2hyb25vdXNseSBhZnRlciBzeW5jaHJvbml6YXRpb24gaGFzIGZpbmlzaGVkLlxuICpcbiAqIEEgc2luZ2xlIGB1cGRhdGUoKWAgd2lsbCBnZW5lcmF0ZSBhIHNpbmdsZSBcInZhbHVlXCIgZXZlbnQgYXQgdGhlIGxvY2F0aW9uXG4gKiB3aGVyZSB0aGUgYHVwZGF0ZSgpYCB3YXMgcGVyZm9ybWVkLCByZWdhcmRsZXNzIG9mIGhvdyBtYW55IGNoaWxkcmVuIHdlcmVcbiAqIG1vZGlmaWVkLlxuICpcbiAqIE5vdGUgdGhhdCBtb2RpZnlpbmcgZGF0YSB3aXRoIGB1cGRhdGUoKWAgd2lsbCBjYW5jZWwgYW55IHBlbmRpbmdcbiAqIHRyYW5zYWN0aW9ucyBhdCB0aGF0IGxvY2F0aW9uLCBzbyBleHRyZW1lIGNhcmUgc2hvdWxkIGJlIHRha2VuIGlmIG1peGluZ1xuICogYHVwZGF0ZSgpYCBhbmQgYHRyYW5zYWN0aW9uKClgIHRvIG1vZGlmeSB0aGUgc2FtZSBkYXRhLlxuICpcbiAqIFBhc3NpbmcgYG51bGxgIHRvIGB1cGRhdGUoKWAgd2lsbCByZW1vdmUgdGhlIGRhdGEgYXQgdGhpcyBsb2NhdGlvbi5cbiAqXG4gKiBTZWVcbiAqIHtAbGluayBodHRwczovL2ZpcmViYXNlLmdvb2dsZWJsb2cuY29tLzIwMTUvMDkvaW50cm9kdWNpbmctbXVsdGktbG9jYXRpb24tdXBkYXRlcy1hbmRfODYuaHRtbCB8IEludHJvZHVjaW5nIG11bHRpLWxvY2F0aW9uIHVwZGF0ZXMgYW5kIG1vcmV9LlxuICpcbiAqIEBwYXJhbSByZWYgLSBUaGUgbG9jYXRpb24gdG8gd3JpdGUgdG8uXG4gKiBAcGFyYW0gdmFsdWVzIC0gT2JqZWN0IGNvbnRhaW5pbmcgbXVsdGlwbGUgdmFsdWVzLlxuICogQHJldHVybnMgUmVzb2x2ZXMgd2hlbiB1cGRhdGUgb24gc2VydmVyIGlzIGNvbXBsZXRlLlxuICovXG5mdW5jdGlvbiB1cGRhdGUocmVmLCB2YWx1ZXMpIHtcbiAgICB2YWxpZGF0ZUZpcmViYXNlTWVyZ2VEYXRhQXJnKCd1cGRhdGUnLCB2YWx1ZXMsIHJlZi5fcGF0aCwgZmFsc2UpO1xuICAgIGNvbnN0IGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XG4gICAgcmVwb1VwZGF0ZShyZWYuX3JlcG8sIHJlZi5fcGF0aCwgdmFsdWVzLCBkZWZlcnJlZC53cmFwQ2FsbGJhY2soKCkgPT4geyB9KSk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59XG4vKipcbiAqIEdldHMgdGhlIG1vc3QgdXAtdG8tZGF0ZSByZXN1bHQgZm9yIHRoaXMgcXVlcnkuXG4gKlxuICogQHBhcmFtIHF1ZXJ5IC0gVGhlIHF1ZXJ5IHRvIHJ1bi5cbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHdoaWNoIHJlc29sdmVzIHRvIHRoZSByZXN1bHRpbmcgRGF0YVNuYXBzaG90IGlmIGEgdmFsdWUgaXNcbiAqIGF2YWlsYWJsZSwgb3IgcmVqZWN0cyBpZiB0aGUgY2xpZW50IGlzIHVuYWJsZSB0byByZXR1cm4gYSB2YWx1ZSAoZS5nLiwgaWYgdGhlXG4gKiBzZXJ2ZXIgaXMgdW5yZWFjaGFibGUgYW5kIHRoZXJlIGlzIG5vdGhpbmcgY2FjaGVkKS5cbiAqL1xuZnVuY3Rpb24gZ2V0KHF1ZXJ5KSB7XG4gICAgcXVlcnkgPSBnZXRNb2R1bGFySW5zdGFuY2UocXVlcnkpO1xuICAgIGNvbnN0IGNhbGxiYWNrQ29udGV4dCA9IG5ldyBDYWxsYmFja0NvbnRleHQoKCkgPT4geyB9KTtcbiAgICBjb25zdCBjb250YWluZXIgPSBuZXcgVmFsdWVFdmVudFJlZ2lzdHJhdGlvbihjYWxsYmFja0NvbnRleHQpO1xuICAgIHJldHVybiByZXBvR2V0VmFsdWUocXVlcnkuX3JlcG8sIHF1ZXJ5LCBjb250YWluZXIpLnRoZW4obm9kZSA9PiB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0YVNuYXBzaG90KG5vZGUsIG5ldyBSZWZlcmVuY2VJbXBsKHF1ZXJ5Ll9yZXBvLCBxdWVyeS5fcGF0aCksIHF1ZXJ5Ll9xdWVyeVBhcmFtcy5nZXRJbmRleCgpKTtcbiAgICB9KTtcbn1cbi8qKlxuICogUmVwcmVzZW50cyByZWdpc3RyYXRpb24gZm9yICd2YWx1ZScgZXZlbnRzLlxuICovXG5jbGFzcyBWYWx1ZUV2ZW50UmVnaXN0cmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihjYWxsYmFja0NvbnRleHQpIHtcbiAgICAgICAgdGhpcy5jYWxsYmFja0NvbnRleHQgPSBjYWxsYmFja0NvbnRleHQ7XG4gICAgfVxuICAgIHJlc3BvbmRzVG8oZXZlbnRUeXBlKSB7XG4gICAgICAgIHJldHVybiBldmVudFR5cGUgPT09ICd2YWx1ZSc7XG4gICAgfVxuICAgIGNyZWF0ZUV2ZW50KGNoYW5nZSwgcXVlcnkpIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSBxdWVyeS5fcXVlcnlQYXJhbXMuZ2V0SW5kZXgoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRhRXZlbnQoJ3ZhbHVlJywgdGhpcywgbmV3IERhdGFTbmFwc2hvdChjaGFuZ2Uuc25hcHNob3ROb2RlLCBuZXcgUmVmZXJlbmNlSW1wbChxdWVyeS5fcmVwbywgcXVlcnkuX3BhdGgpLCBpbmRleCkpO1xuICAgIH1cbiAgICBnZXRFdmVudFJ1bm5lcihldmVudERhdGEpIHtcbiAgICAgICAgaWYgKGV2ZW50RGF0YS5nZXRFdmVudFR5cGUoKSA9PT0gJ2NhbmNlbCcpIHtcbiAgICAgICAgICAgIHJldHVybiAoKSA9PiB0aGlzLmNhbGxiYWNrQ29udGV4dC5vbkNhbmNlbChldmVudERhdGEuZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuICgpID0+IHRoaXMuY2FsbGJhY2tDb250ZXh0Lm9uVmFsdWUoZXZlbnREYXRhLnNuYXBzaG90LCBudWxsKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjcmVhdGVDYW5jZWxFdmVudChlcnJvciwgcGF0aCkge1xuICAgICAgICBpZiAodGhpcy5jYWxsYmFja0NvbnRleHQuaGFzQ2FuY2VsQ2FsbGJhY2spIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2FuY2VsRXZlbnQodGhpcywgZXJyb3IsIHBhdGgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbWF0Y2hlcyhvdGhlcikge1xuICAgICAgICBpZiAoIShvdGhlciBpbnN0YW5jZW9mIFZhbHVlRXZlbnRSZWdpc3RyYXRpb24pKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIW90aGVyLmNhbGxiYWNrQ29udGV4dCB8fCAhdGhpcy5jYWxsYmFja0NvbnRleHQpIHtcbiAgICAgICAgICAgIC8vIElmIG5vIGNhbGxiYWNrIHNwZWNpZmllZCwgd2UgY29uc2lkZXIgaXQgdG8gbWF0Y2ggYW55IGNhbGxiYWNrLlxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gb3RoZXIuY2FsbGJhY2tDb250ZXh0Lm1hdGNoZXModGhpcy5jYWxsYmFja0NvbnRleHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhc0FueUNhbGxiYWNrKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxsYmFja0NvbnRleHQgIT09IG51bGw7XG4gICAgfVxufVxuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSByZWdpc3RyYXRpb24gb2YgYSBjaGlsZF94IGV2ZW50LlxuICovXG5jbGFzcyBDaGlsZEV2ZW50UmVnaXN0cmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihldmVudFR5cGUsIGNhbGxiYWNrQ29udGV4dCkge1xuICAgICAgICB0aGlzLmV2ZW50VHlwZSA9IGV2ZW50VHlwZTtcbiAgICAgICAgdGhpcy5jYWxsYmFja0NvbnRleHQgPSBjYWxsYmFja0NvbnRleHQ7XG4gICAgfVxuICAgIHJlc3BvbmRzVG8oZXZlbnRUeXBlKSB7XG4gICAgICAgIGxldCBldmVudFRvQ2hlY2sgPSBldmVudFR5cGUgPT09ICdjaGlsZHJlbl9hZGRlZCcgPyAnY2hpbGRfYWRkZWQnIDogZXZlbnRUeXBlO1xuICAgICAgICBldmVudFRvQ2hlY2sgPVxuICAgICAgICAgICAgZXZlbnRUb0NoZWNrID09PSAnY2hpbGRyZW5fcmVtb3ZlZCcgPyAnY2hpbGRfcmVtb3ZlZCcgOiBldmVudFRvQ2hlY2s7XG4gICAgICAgIHJldHVybiB0aGlzLmV2ZW50VHlwZSA9PT0gZXZlbnRUb0NoZWNrO1xuICAgIH1cbiAgICBjcmVhdGVDYW5jZWxFdmVudChlcnJvciwgcGF0aCkge1xuICAgICAgICBpZiAodGhpcy5jYWxsYmFja0NvbnRleHQuaGFzQ2FuY2VsQ2FsbGJhY2spIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2FuY2VsRXZlbnQodGhpcywgZXJyb3IsIHBhdGgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY3JlYXRlRXZlbnQoY2hhbmdlLCBxdWVyeSkge1xuICAgICAgICBhc3NlcnQoY2hhbmdlLmNoaWxkTmFtZSAhPSBudWxsLCAnQ2hpbGQgZXZlbnRzIHNob3VsZCBoYXZlIGEgY2hpbGROYW1lLicpO1xuICAgICAgICBjb25zdCBjaGlsZFJlZiA9IGNoaWxkKG5ldyBSZWZlcmVuY2VJbXBsKHF1ZXJ5Ll9yZXBvLCBxdWVyeS5fcGF0aCksIGNoYW5nZS5jaGlsZE5hbWUpO1xuICAgICAgICBjb25zdCBpbmRleCA9IHF1ZXJ5Ll9xdWVyeVBhcmFtcy5nZXRJbmRleCgpO1xuICAgICAgICByZXR1cm4gbmV3IERhdGFFdmVudChjaGFuZ2UudHlwZSwgdGhpcywgbmV3IERhdGFTbmFwc2hvdChjaGFuZ2Uuc25hcHNob3ROb2RlLCBjaGlsZFJlZiwgaW5kZXgpLCBjaGFuZ2UucHJldk5hbWUpO1xuICAgIH1cbiAgICBnZXRFdmVudFJ1bm5lcihldmVudERhdGEpIHtcbiAgICAgICAgaWYgKGV2ZW50RGF0YS5nZXRFdmVudFR5cGUoKSA9PT0gJ2NhbmNlbCcpIHtcbiAgICAgICAgICAgIHJldHVybiAoKSA9PiB0aGlzLmNhbGxiYWNrQ29udGV4dC5vbkNhbmNlbChldmVudERhdGEuZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuICgpID0+IHRoaXMuY2FsbGJhY2tDb250ZXh0Lm9uVmFsdWUoZXZlbnREYXRhLnNuYXBzaG90LCBldmVudERhdGEucHJldk5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG1hdGNoZXMob3RoZXIpIHtcbiAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgQ2hpbGRFdmVudFJlZ2lzdHJhdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuICh0aGlzLmV2ZW50VHlwZSA9PT0gb3RoZXIuZXZlbnRUeXBlICYmXG4gICAgICAgICAgICAgICAgKCF0aGlzLmNhbGxiYWNrQ29udGV4dCB8fFxuICAgICAgICAgICAgICAgICAgICAhb3RoZXIuY2FsbGJhY2tDb250ZXh0IHx8XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FsbGJhY2tDb250ZXh0Lm1hdGNoZXMob3RoZXIuY2FsbGJhY2tDb250ZXh0KSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaGFzQW55Q2FsbGJhY2soKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuY2FsbGJhY2tDb250ZXh0O1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXIocXVlcnksIGV2ZW50VHlwZSwgY2FsbGJhY2ssIGNhbmNlbENhbGxiYWNrT3JMaXN0ZW5PcHRpb25zLCBvcHRpb25zKSB7XG4gICAgbGV0IGNhbmNlbENhbGxiYWNrO1xuICAgIGlmICh0eXBlb2YgY2FuY2VsQ2FsbGJhY2tPckxpc3Rlbk9wdGlvbnMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGNhbmNlbENhbGxiYWNrID0gdW5kZWZpbmVkO1xuICAgICAgICBvcHRpb25zID0gY2FuY2VsQ2FsbGJhY2tPckxpc3Rlbk9wdGlvbnM7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgY2FuY2VsQ2FsbGJhY2tPckxpc3Rlbk9wdGlvbnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgY2FuY2VsQ2FsbGJhY2sgPSBjYW5jZWxDYWxsYmFja09yTGlzdGVuT3B0aW9ucztcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5vbmx5T25jZSkge1xuICAgICAgICBjb25zdCB1c2VyQ2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgICAgY29uc3Qgb25jZUNhbGxiYWNrID0gKGRhdGFTbmFwc2hvdCwgcHJldmlvdXNDaGlsZE5hbWUpID0+IHtcbiAgICAgICAgICAgIHJlcG9SZW1vdmVFdmVudENhbGxiYWNrRm9yUXVlcnkocXVlcnkuX3JlcG8sIHF1ZXJ5LCBjb250YWluZXIpO1xuICAgICAgICAgICAgdXNlckNhbGxiYWNrKGRhdGFTbmFwc2hvdCwgcHJldmlvdXNDaGlsZE5hbWUpO1xuICAgICAgICB9O1xuICAgICAgICBvbmNlQ2FsbGJhY2sudXNlckNhbGxiYWNrID0gY2FsbGJhY2sudXNlckNhbGxiYWNrO1xuICAgICAgICBvbmNlQ2FsbGJhY2suY29udGV4dCA9IGNhbGxiYWNrLmNvbnRleHQ7XG4gICAgICAgIGNhbGxiYWNrID0gb25jZUNhbGxiYWNrO1xuICAgIH1cbiAgICBjb25zdCBjYWxsYmFja0NvbnRleHQgPSBuZXcgQ2FsbGJhY2tDb250ZXh0KGNhbGxiYWNrLCBjYW5jZWxDYWxsYmFjayB8fCB1bmRlZmluZWQpO1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGV2ZW50VHlwZSA9PT0gJ3ZhbHVlJ1xuICAgICAgICA/IG5ldyBWYWx1ZUV2ZW50UmVnaXN0cmF0aW9uKGNhbGxiYWNrQ29udGV4dClcbiAgICAgICAgOiBuZXcgQ2hpbGRFdmVudFJlZ2lzdHJhdGlvbihldmVudFR5cGUsIGNhbGxiYWNrQ29udGV4dCk7XG4gICAgcmVwb0FkZEV2ZW50Q2FsbGJhY2tGb3JRdWVyeShxdWVyeS5fcmVwbywgcXVlcnksIGNvbnRhaW5lcik7XG4gICAgcmV0dXJuICgpID0+IHJlcG9SZW1vdmVFdmVudENhbGxiYWNrRm9yUXVlcnkocXVlcnkuX3JlcG8sIHF1ZXJ5LCBjb250YWluZXIpO1xufVxuZnVuY3Rpb24gb25WYWx1ZShxdWVyeSwgY2FsbGJhY2ssIGNhbmNlbENhbGxiYWNrT3JMaXN0ZW5PcHRpb25zLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGFkZEV2ZW50TGlzdGVuZXIocXVlcnksICd2YWx1ZScsIGNhbGxiYWNrLCBjYW5jZWxDYWxsYmFja09yTGlzdGVuT3B0aW9ucywgb3B0aW9ucyk7XG59XG5mdW5jdGlvbiBvbkNoaWxkQWRkZWQocXVlcnksIGNhbGxiYWNrLCBjYW5jZWxDYWxsYmFja09yTGlzdGVuT3B0aW9ucywgb3B0aW9ucykge1xuICAgIHJldHVybiBhZGRFdmVudExpc3RlbmVyKHF1ZXJ5LCAnY2hpbGRfYWRkZWQnLCBjYWxsYmFjaywgY2FuY2VsQ2FsbGJhY2tPckxpc3Rlbk9wdGlvbnMsIG9wdGlvbnMpO1xufVxuZnVuY3Rpb24gb25DaGlsZENoYW5nZWQocXVlcnksIGNhbGxiYWNrLCBjYW5jZWxDYWxsYmFja09yTGlzdGVuT3B0aW9ucywgb3B0aW9ucykge1xuICAgIHJldHVybiBhZGRFdmVudExpc3RlbmVyKHF1ZXJ5LCAnY2hpbGRfY2hhbmdlZCcsIGNhbGxiYWNrLCBjYW5jZWxDYWxsYmFja09yTGlzdGVuT3B0aW9ucywgb3B0aW9ucyk7XG59XG5mdW5jdGlvbiBvbkNoaWxkTW92ZWQocXVlcnksIGNhbGxiYWNrLCBjYW5jZWxDYWxsYmFja09yTGlzdGVuT3B0aW9ucywgb3B0aW9ucykge1xuICAgIHJldHVybiBhZGRFdmVudExpc3RlbmVyKHF1ZXJ5LCAnY2hpbGRfbW92ZWQnLCBjYWxsYmFjaywgY2FuY2VsQ2FsbGJhY2tPckxpc3Rlbk9wdGlvbnMsIG9wdGlvbnMpO1xufVxuZnVuY3Rpb24gb25DaGlsZFJlbW92ZWQocXVlcnksIGNhbGxiYWNrLCBjYW5jZWxDYWxsYmFja09yTGlzdGVuT3B0aW9ucywgb3B0aW9ucykge1xuICAgIHJldHVybiBhZGRFdmVudExpc3RlbmVyKHF1ZXJ5LCAnY2hpbGRfcmVtb3ZlZCcsIGNhbGxiYWNrLCBjYW5jZWxDYWxsYmFja09yTGlzdGVuT3B0aW9ucywgb3B0aW9ucyk7XG59XG4vKipcbiAqIERldGFjaGVzIGEgY2FsbGJhY2sgcHJldmlvdXNseSBhdHRhY2hlZCB3aXRoIHRoZSBjb3JyZXNwb25kaW5nIGBvbiooKWAgKGBvblZhbHVlYCwgYG9uQ2hpbGRBZGRlZGApIGxpc3RlbmVyLlxuICogTm90ZTogVGhpcyBpcyBub3QgdGhlIHJlY29tbWVuZGVkIHdheSB0byByZW1vdmUgYSBsaXN0ZW5lci4gSW5zdGVhZCwgcGxlYXNlIHVzZSB0aGUgcmV0dXJuZWQgY2FsbGJhY2sgZnVuY3Rpb24gZnJvbVxuICogdGhlIHJlc3BlY3RpdmUgYG9uKmAgY2FsbGJhY2tzLlxuICpcbiAqIERldGFjaCBhIGNhbGxiYWNrIHByZXZpb3VzbHkgYXR0YWNoZWQgd2l0aCBgb24qKClgLiBDYWxsaW5nIGBvZmYoKWAgb24gYSBwYXJlbnQgbGlzdGVuZXJcbiAqIHdpbGwgbm90IGF1dG9tYXRpY2FsbHkgcmVtb3ZlIGxpc3RlbmVycyByZWdpc3RlcmVkIG9uIGNoaWxkIG5vZGVzLCBgb2ZmKClgXG4gKiBtdXN0IGFsc28gYmUgY2FsbGVkIG9uIGFueSBjaGlsZCBsaXN0ZW5lcnMgdG8gcmVtb3ZlIHRoZSBjYWxsYmFjay5cbiAqXG4gKiBJZiBhIGNhbGxiYWNrIGlzIG5vdCBzcGVjaWZpZWQsIGFsbCBjYWxsYmFja3MgZm9yIHRoZSBzcGVjaWZpZWQgZXZlbnRUeXBlXG4gKiB3aWxsIGJlIHJlbW92ZWQuIFNpbWlsYXJseSwgaWYgbm8gZXZlbnRUeXBlIGlzIHNwZWNpZmllZCwgYWxsIGNhbGxiYWNrc1xuICogZm9yIHRoZSBgUmVmZXJlbmNlYCB3aWxsIGJlIHJlbW92ZWQuXG4gKlxuICogSW5kaXZpZHVhbCBsaXN0ZW5lcnMgY2FuIGFsc28gYmUgcmVtb3ZlZCBieSBpbnZva2luZyB0aGVpciB1bnN1YnNjcmliZVxuICogY2FsbGJhY2tzLlxuICpcbiAqIEBwYXJhbSBxdWVyeSAtIFRoZSBxdWVyeSB0aGF0IHRoZSBsaXN0ZW5lciB3YXMgcmVnaXN0ZXJlZCB3aXRoLlxuICogQHBhcmFtIGV2ZW50VHlwZSAtIE9uZSBvZiB0aGUgZm9sbG93aW5nIHN0cmluZ3M6IFwidmFsdWVcIiwgXCJjaGlsZF9hZGRlZFwiLFxuICogXCJjaGlsZF9jaGFuZ2VkXCIsIFwiY2hpbGRfcmVtb3ZlZFwiLCBvciBcImNoaWxkX21vdmVkLlwiIElmIG9taXR0ZWQsIGFsbCBjYWxsYmFja3NcbiAqIGZvciB0aGUgYFJlZmVyZW5jZWAgd2lsbCBiZSByZW1vdmVkLlxuICogQHBhcmFtIGNhbGxiYWNrIC0gVGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgd2FzIHBhc3NlZCB0byBgb24oKWAgb3JcbiAqIGB1bmRlZmluZWRgIHRvIHJlbW92ZSBhbGwgY2FsbGJhY2tzLlxuICovXG5mdW5jdGlvbiBvZmYocXVlcnksIGV2ZW50VHlwZSwgY2FsbGJhY2spIHtcbiAgICBsZXQgY29udGFpbmVyID0gbnVsbDtcbiAgICBjb25zdCBleHBDYWxsYmFjayA9IGNhbGxiYWNrID8gbmV3IENhbGxiYWNrQ29udGV4dChjYWxsYmFjaykgOiBudWxsO1xuICAgIGlmIChldmVudFR5cGUgPT09ICd2YWx1ZScpIHtcbiAgICAgICAgY29udGFpbmVyID0gbmV3IFZhbHVlRXZlbnRSZWdpc3RyYXRpb24oZXhwQ2FsbGJhY2spO1xuICAgIH1cbiAgICBlbHNlIGlmIChldmVudFR5cGUpIHtcbiAgICAgICAgY29udGFpbmVyID0gbmV3IENoaWxkRXZlbnRSZWdpc3RyYXRpb24oZXZlbnRUeXBlLCBleHBDYWxsYmFjayk7XG4gICAgfVxuICAgIHJlcG9SZW1vdmVFdmVudENhbGxiYWNrRm9yUXVlcnkocXVlcnkuX3JlcG8sIHF1ZXJ5LCBjb250YWluZXIpO1xufVxuLyoqXG4gKiBBIGBRdWVyeUNvbnN0cmFpbnRgIGlzIHVzZWQgdG8gbmFycm93IHRoZSBzZXQgb2YgZG9jdW1lbnRzIHJldHVybmVkIGJ5IGFcbiAqIERhdGFiYXNlIHF1ZXJ5LiBgUXVlcnlDb25zdHJhaW50YHMgYXJlIGNyZWF0ZWQgYnkgaW52b2tpbmcge0BsaW5rIGVuZEF0fSxcbiAqIHtAbGluayBlbmRCZWZvcmV9LCB7QGxpbmsgc3RhcnRBdH0sIHtAbGluayBzdGFydEFmdGVyfSwge0BsaW5rXG4gKiBsaW1pdFRvRmlyc3R9LCB7QGxpbmsgbGltaXRUb0xhc3R9LCB7QGxpbmsgb3JkZXJCeUNoaWxkfSxcbiAqIHtAbGluayBvcmRlckJ5Q2hpbGR9LCB7QGxpbmsgb3JkZXJCeUtleX0gLCB7QGxpbmsgb3JkZXJCeVByaW9yaXR5fSAsXG4gKiB7QGxpbmsgb3JkZXJCeVZhbHVlfSAgb3Ige0BsaW5rIGVxdWFsVG99IGFuZFxuICogY2FuIHRoZW4gYmUgcGFzc2VkIHRvIHtAbGluayBxdWVyeX0gdG8gY3JlYXRlIGEgbmV3IHF1ZXJ5IGluc3RhbmNlIHRoYXRcbiAqIGFsc28gY29udGFpbnMgdGhpcyBgUXVlcnlDb25zdHJhaW50YC5cbiAqL1xuY2xhc3MgUXVlcnlDb25zdHJhaW50IHtcbn1cbmNsYXNzIFF1ZXJ5RW5kQXRDb25zdHJhaW50IGV4dGVuZHMgUXVlcnlDb25zdHJhaW50IHtcbiAgICBjb25zdHJ1Y3RvcihfdmFsdWUsIF9rZXkpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5fdmFsdWUgPSBfdmFsdWU7XG4gICAgICAgIHRoaXMuX2tleSA9IF9rZXk7XG4gICAgICAgIHRoaXMudHlwZSA9ICdlbmRBdCc7XG4gICAgfVxuICAgIF9hcHBseShxdWVyeSkge1xuICAgICAgICB2YWxpZGF0ZUZpcmViYXNlRGF0YUFyZygnZW5kQXQnLCB0aGlzLl92YWx1ZSwgcXVlcnkuX3BhdGgsIHRydWUpO1xuICAgICAgICBjb25zdCBuZXdQYXJhbXMgPSBxdWVyeVBhcmFtc0VuZEF0KHF1ZXJ5Ll9xdWVyeVBhcmFtcywgdGhpcy5fdmFsdWUsIHRoaXMuX2tleSk7XG4gICAgICAgIHZhbGlkYXRlTGltaXQobmV3UGFyYW1zKTtcbiAgICAgICAgdmFsaWRhdGVRdWVyeUVuZHBvaW50cyhuZXdQYXJhbXMpO1xuICAgICAgICBpZiAocXVlcnkuX3F1ZXJ5UGFyYW1zLmhhc0VuZCgpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2VuZEF0OiBTdGFydGluZyBwb2ludCB3YXMgYWxyZWFkeSBzZXQgKGJ5IGFub3RoZXIgY2FsbCB0byBlbmRBdCwgJyArXG4gICAgICAgICAgICAgICAgJ2VuZEJlZm9yZSBvciBlcXVhbFRvKS4nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5SW1wbChxdWVyeS5fcmVwbywgcXVlcnkuX3BhdGgsIG5ld1BhcmFtcywgcXVlcnkuX29yZGVyQnlDYWxsZWQpO1xuICAgIH1cbn1cbi8qKlxuICogQ3JlYXRlcyBhIGBRdWVyeUNvbnN0cmFpbnRgIHdpdGggdGhlIHNwZWNpZmllZCBlbmRpbmcgcG9pbnQuXG4gKlxuICogVXNpbmcgYHN0YXJ0QXQoKWAsIGBzdGFydEFmdGVyKClgLCBgZW5kQmVmb3JlKClgLCBgZW5kQXQoKWAgYW5kIGBlcXVhbFRvKClgXG4gKiBhbGxvd3MgeW91IHRvIGNob29zZSBhcmJpdHJhcnkgc3RhcnRpbmcgYW5kIGVuZGluZyBwb2ludHMgZm9yIHlvdXIgcXVlcmllcy5cbiAqXG4gKiBUaGUgZW5kaW5nIHBvaW50IGlzIGluY2x1c2l2ZSwgc28gY2hpbGRyZW4gd2l0aCBleGFjdGx5IHRoZSBzcGVjaWZpZWQgdmFsdWVcbiAqIHdpbGwgYmUgaW5jbHVkZWQgaW4gdGhlIHF1ZXJ5LiBUaGUgb3B0aW9uYWwga2V5IGFyZ3VtZW50IGNhbiBiZSB1c2VkIHRvXG4gKiBmdXJ0aGVyIGxpbWl0IHRoZSByYW5nZSBvZiB0aGUgcXVlcnkuIElmIGl0IGlzIHNwZWNpZmllZCwgdGhlbiBjaGlsZHJlbiB0aGF0XG4gKiBoYXZlIGV4YWN0bHkgdGhlIHNwZWNpZmllZCB2YWx1ZSBtdXN0IGFsc28gaGF2ZSBhIGtleSBuYW1lIGxlc3MgdGhhbiBvciBlcXVhbFxuICogdG8gdGhlIHNwZWNpZmllZCBrZXkuXG4gKlxuICogWW91IGNhbiByZWFkIG1vcmUgYWJvdXQgYGVuZEF0KClgIGluXG4gKiB7QGxpbmsgaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvZGF0YWJhc2Uvd2ViL2xpc3RzLW9mLWRhdGEjZmlsdGVyaW5nX2RhdGEgfCBGaWx0ZXJpbmcgZGF0YX0uXG4gKlxuICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIGVuZCBhdC4gVGhlIGFyZ3VtZW50IHR5cGUgZGVwZW5kcyBvbiB3aGljaFxuICogYG9yZGVyQnkqKClgIGZ1bmN0aW9uIHdhcyB1c2VkIGluIHRoaXMgcXVlcnkuIFNwZWNpZnkgYSB2YWx1ZSB0aGF0IG1hdGNoZXNcbiAqIHRoZSBgb3JkZXJCeSooKWAgdHlwZS4gV2hlbiB1c2VkIGluIGNvbWJpbmF0aW9uIHdpdGggYG9yZGVyQnlLZXkoKWAsIHRoZVxuICogdmFsdWUgbXVzdCBiZSBhIHN0cmluZy5cbiAqIEBwYXJhbSBrZXkgLSBUaGUgY2hpbGQga2V5IHRvIGVuZCBhdCwgYW1vbmcgdGhlIGNoaWxkcmVuIHdpdGggdGhlIHByZXZpb3VzbHlcbiAqIHNwZWNpZmllZCBwcmlvcml0eS4gVGhpcyBhcmd1bWVudCBpcyBvbmx5IGFsbG93ZWQgaWYgb3JkZXJpbmcgYnkgY2hpbGQsXG4gKiB2YWx1ZSwgb3IgcHJpb3JpdHkuXG4gKi9cbmZ1bmN0aW9uIGVuZEF0KHZhbHVlLCBrZXkpIHtcbiAgICB2YWxpZGF0ZUtleSgnZW5kQXQnLCAna2V5Jywga2V5LCB0cnVlKTtcbiAgICByZXR1cm4gbmV3IFF1ZXJ5RW5kQXRDb25zdHJhaW50KHZhbHVlLCBrZXkpO1xufVxuY2xhc3MgUXVlcnlFbmRCZWZvcmVDb25zdHJhaW50IGV4dGVuZHMgUXVlcnlDb25zdHJhaW50IHtcbiAgICBjb25zdHJ1Y3RvcihfdmFsdWUsIF9rZXkpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5fdmFsdWUgPSBfdmFsdWU7XG4gICAgICAgIHRoaXMuX2tleSA9IF9rZXk7XG4gICAgICAgIHRoaXMudHlwZSA9ICdlbmRCZWZvcmUnO1xuICAgIH1cbiAgICBfYXBwbHkocXVlcnkpIHtcbiAgICAgICAgdmFsaWRhdGVGaXJlYmFzZURhdGFBcmcoJ2VuZEJlZm9yZScsIHRoaXMuX3ZhbHVlLCBxdWVyeS5fcGF0aCwgZmFsc2UpO1xuICAgICAgICBjb25zdCBuZXdQYXJhbXMgPSBxdWVyeVBhcmFtc0VuZEJlZm9yZShxdWVyeS5fcXVlcnlQYXJhbXMsIHRoaXMuX3ZhbHVlLCB0aGlzLl9rZXkpO1xuICAgICAgICB2YWxpZGF0ZUxpbWl0KG5ld1BhcmFtcyk7XG4gICAgICAgIHZhbGlkYXRlUXVlcnlFbmRwb2ludHMobmV3UGFyYW1zKTtcbiAgICAgICAgaWYgKHF1ZXJ5Ll9xdWVyeVBhcmFtcy5oYXNFbmQoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdlbmRCZWZvcmU6IFN0YXJ0aW5nIHBvaW50IHdhcyBhbHJlYWR5IHNldCAoYnkgYW5vdGhlciBjYWxsIHRvIGVuZEF0LCAnICtcbiAgICAgICAgICAgICAgICAnZW5kQmVmb3JlIG9yIGVxdWFsVG8pLicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnlJbXBsKHF1ZXJ5Ll9yZXBvLCBxdWVyeS5fcGF0aCwgbmV3UGFyYW1zLCBxdWVyeS5fb3JkZXJCeUNhbGxlZCk7XG4gICAgfVxufVxuLyoqXG4gKiBDcmVhdGVzIGEgYFF1ZXJ5Q29uc3RyYWludGAgd2l0aCB0aGUgc3BlY2lmaWVkIGVuZGluZyBwb2ludCAoZXhjbHVzaXZlKS5cbiAqXG4gKiBVc2luZyBgc3RhcnRBdCgpYCwgYHN0YXJ0QWZ0ZXIoKWAsIGBlbmRCZWZvcmUoKWAsIGBlbmRBdCgpYCBhbmQgYGVxdWFsVG8oKWBcbiAqIGFsbG93cyB5b3UgdG8gY2hvb3NlIGFyYml0cmFyeSBzdGFydGluZyBhbmQgZW5kaW5nIHBvaW50cyBmb3IgeW91ciBxdWVyaWVzLlxuICpcbiAqIFRoZSBlbmRpbmcgcG9pbnQgaXMgZXhjbHVzaXZlLiBJZiBvbmx5IGEgdmFsdWUgaXMgcHJvdmlkZWQsIGNoaWxkcmVuXG4gKiB3aXRoIGEgdmFsdWUgbGVzcyB0aGFuIHRoZSBzcGVjaWZpZWQgdmFsdWUgd2lsbCBiZSBpbmNsdWRlZCBpbiB0aGUgcXVlcnkuXG4gKiBJZiBhIGtleSBpcyBzcGVjaWZpZWQsIHRoZW4gY2hpbGRyZW4gbXVzdCBoYXZlIGEgdmFsdWUgbGVzcyB0aGFuIG9yIGVxdWFsXG4gKiB0byB0aGUgc3BlY2lmaWVkIHZhbHVlIGFuZCBhIGtleSBuYW1lIGxlc3MgdGhhbiB0aGUgc3BlY2lmaWVkIGtleS5cbiAqXG4gKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gZW5kIGJlZm9yZS4gVGhlIGFyZ3VtZW50IHR5cGUgZGVwZW5kcyBvbiB3aGljaFxuICogYG9yZGVyQnkqKClgIGZ1bmN0aW9uIHdhcyB1c2VkIGluIHRoaXMgcXVlcnkuIFNwZWNpZnkgYSB2YWx1ZSB0aGF0IG1hdGNoZXNcbiAqIHRoZSBgb3JkZXJCeSooKWAgdHlwZS4gV2hlbiB1c2VkIGluIGNvbWJpbmF0aW9uIHdpdGggYG9yZGVyQnlLZXkoKWAsIHRoZVxuICogdmFsdWUgbXVzdCBiZSBhIHN0cmluZy5cbiAqIEBwYXJhbSBrZXkgLSBUaGUgY2hpbGQga2V5IHRvIGVuZCBiZWZvcmUsIGFtb25nIHRoZSBjaGlsZHJlbiB3aXRoIHRoZVxuICogcHJldmlvdXNseSBzcGVjaWZpZWQgcHJpb3JpdHkuIFRoaXMgYXJndW1lbnQgaXMgb25seSBhbGxvd2VkIGlmIG9yZGVyaW5nIGJ5XG4gKiBjaGlsZCwgdmFsdWUsIG9yIHByaW9yaXR5LlxuICovXG5mdW5jdGlvbiBlbmRCZWZvcmUodmFsdWUsIGtleSkge1xuICAgIHZhbGlkYXRlS2V5KCdlbmRCZWZvcmUnLCAna2V5Jywga2V5LCB0cnVlKTtcbiAgICByZXR1cm4gbmV3IFF1ZXJ5RW5kQmVmb3JlQ29uc3RyYWludCh2YWx1ZSwga2V5KTtcbn1cbmNsYXNzIFF1ZXJ5U3RhcnRBdENvbnN0cmFpbnQgZXh0ZW5kcyBRdWVyeUNvbnN0cmFpbnQge1xuICAgIGNvbnN0cnVjdG9yKF92YWx1ZSwgX2tleSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl92YWx1ZSA9IF92YWx1ZTtcbiAgICAgICAgdGhpcy5fa2V5ID0gX2tleTtcbiAgICAgICAgdGhpcy50eXBlID0gJ3N0YXJ0QXQnO1xuICAgIH1cbiAgICBfYXBwbHkocXVlcnkpIHtcbiAgICAgICAgdmFsaWRhdGVGaXJlYmFzZURhdGFBcmcoJ3N0YXJ0QXQnLCB0aGlzLl92YWx1ZSwgcXVlcnkuX3BhdGgsIHRydWUpO1xuICAgICAgICBjb25zdCBuZXdQYXJhbXMgPSBxdWVyeVBhcmFtc1N0YXJ0QXQocXVlcnkuX3F1ZXJ5UGFyYW1zLCB0aGlzLl92YWx1ZSwgdGhpcy5fa2V5KTtcbiAgICAgICAgdmFsaWRhdGVMaW1pdChuZXdQYXJhbXMpO1xuICAgICAgICB2YWxpZGF0ZVF1ZXJ5RW5kcG9pbnRzKG5ld1BhcmFtcyk7XG4gICAgICAgIGlmIChxdWVyeS5fcXVlcnlQYXJhbXMuaGFzU3RhcnQoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzdGFydEF0OiBTdGFydGluZyBwb2ludCB3YXMgYWxyZWFkeSBzZXQgKGJ5IGFub3RoZXIgY2FsbCB0byBzdGFydEF0LCAnICtcbiAgICAgICAgICAgICAgICAnc3RhcnRCZWZvcmUgb3IgZXF1YWxUbykuJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeUltcGwocXVlcnkuX3JlcG8sIHF1ZXJ5Ll9wYXRoLCBuZXdQYXJhbXMsIHF1ZXJ5Ll9vcmRlckJ5Q2FsbGVkKTtcbiAgICB9XG59XG4vKipcbiAqIENyZWF0ZXMgYSBgUXVlcnlDb25zdHJhaW50YCB3aXRoIHRoZSBzcGVjaWZpZWQgc3RhcnRpbmcgcG9pbnQuXG4gKlxuICogVXNpbmcgYHN0YXJ0QXQoKWAsIGBzdGFydEFmdGVyKClgLCBgZW5kQmVmb3JlKClgLCBgZW5kQXQoKWAgYW5kIGBlcXVhbFRvKClgXG4gKiBhbGxvd3MgeW91IHRvIGNob29zZSBhcmJpdHJhcnkgc3RhcnRpbmcgYW5kIGVuZGluZyBwb2ludHMgZm9yIHlvdXIgcXVlcmllcy5cbiAqXG4gKiBUaGUgc3RhcnRpbmcgcG9pbnQgaXMgaW5jbHVzaXZlLCBzbyBjaGlsZHJlbiB3aXRoIGV4YWN0bHkgdGhlIHNwZWNpZmllZCB2YWx1ZVxuICogd2lsbCBiZSBpbmNsdWRlZCBpbiB0aGUgcXVlcnkuIFRoZSBvcHRpb25hbCBrZXkgYXJndW1lbnQgY2FuIGJlIHVzZWQgdG9cbiAqIGZ1cnRoZXIgbGltaXQgdGhlIHJhbmdlIG9mIHRoZSBxdWVyeS4gSWYgaXQgaXMgc3BlY2lmaWVkLCB0aGVuIGNoaWxkcmVuIHRoYXRcbiAqIGhhdmUgZXhhY3RseSB0aGUgc3BlY2lmaWVkIHZhbHVlIG11c3QgYWxzbyBoYXZlIGEga2V5IG5hbWUgZ3JlYXRlciB0aGFuIG9yXG4gKiBlcXVhbCB0byB0aGUgc3BlY2lmaWVkIGtleS5cbiAqXG4gKiBZb3UgY2FuIHJlYWQgbW9yZSBhYm91dCBgc3RhcnRBdCgpYCBpblxuICoge0BsaW5rIGh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlLmNvbS9kb2NzL2RhdGFiYXNlL3dlYi9saXN0cy1vZi1kYXRhI2ZpbHRlcmluZ19kYXRhIHwgRmlsdGVyaW5nIGRhdGF9LlxuICpcbiAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSB0byBzdGFydCBhdC4gVGhlIGFyZ3VtZW50IHR5cGUgZGVwZW5kcyBvbiB3aGljaFxuICogYG9yZGVyQnkqKClgIGZ1bmN0aW9uIHdhcyB1c2VkIGluIHRoaXMgcXVlcnkuIFNwZWNpZnkgYSB2YWx1ZSB0aGF0IG1hdGNoZXNcbiAqIHRoZSBgb3JkZXJCeSooKWAgdHlwZS4gV2hlbiB1c2VkIGluIGNvbWJpbmF0aW9uIHdpdGggYG9yZGVyQnlLZXkoKWAsIHRoZVxuICogdmFsdWUgbXVzdCBiZSBhIHN0cmluZy5cbiAqIEBwYXJhbSBrZXkgLSBUaGUgY2hpbGQga2V5IHRvIHN0YXJ0IGF0LiBUaGlzIGFyZ3VtZW50IGlzIG9ubHkgYWxsb3dlZCBpZlxuICogb3JkZXJpbmcgYnkgY2hpbGQsIHZhbHVlLCBvciBwcmlvcml0eS5cbiAqL1xuZnVuY3Rpb24gc3RhcnRBdCh2YWx1ZSA9IG51bGwsIGtleSkge1xuICAgIHZhbGlkYXRlS2V5KCdzdGFydEF0JywgJ2tleScsIGtleSwgdHJ1ZSk7XG4gICAgcmV0dXJuIG5ldyBRdWVyeVN0YXJ0QXRDb25zdHJhaW50KHZhbHVlLCBrZXkpO1xufVxuY2xhc3MgUXVlcnlTdGFydEFmdGVyQ29uc3RyYWludCBleHRlbmRzIFF1ZXJ5Q29uc3RyYWludCB7XG4gICAgY29uc3RydWN0b3IoX3ZhbHVlLCBfa2V5KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuX3ZhbHVlID0gX3ZhbHVlO1xuICAgICAgICB0aGlzLl9rZXkgPSBfa2V5O1xuICAgICAgICB0aGlzLnR5cGUgPSAnc3RhcnRBZnRlcic7XG4gICAgfVxuICAgIF9hcHBseShxdWVyeSkge1xuICAgICAgICB2YWxpZGF0ZUZpcmViYXNlRGF0YUFyZygnc3RhcnRBZnRlcicsIHRoaXMuX3ZhbHVlLCBxdWVyeS5fcGF0aCwgZmFsc2UpO1xuICAgICAgICBjb25zdCBuZXdQYXJhbXMgPSBxdWVyeVBhcmFtc1N0YXJ0QWZ0ZXIocXVlcnkuX3F1ZXJ5UGFyYW1zLCB0aGlzLl92YWx1ZSwgdGhpcy5fa2V5KTtcbiAgICAgICAgdmFsaWRhdGVMaW1pdChuZXdQYXJhbXMpO1xuICAgICAgICB2YWxpZGF0ZVF1ZXJ5RW5kcG9pbnRzKG5ld1BhcmFtcyk7XG4gICAgICAgIGlmIChxdWVyeS5fcXVlcnlQYXJhbXMuaGFzU3RhcnQoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzdGFydEFmdGVyOiBTdGFydGluZyBwb2ludCB3YXMgYWxyZWFkeSBzZXQgKGJ5IGFub3RoZXIgY2FsbCB0byBzdGFydEF0LCAnICtcbiAgICAgICAgICAgICAgICAnc3RhcnRBZnRlciwgb3IgZXF1YWxUbykuJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeUltcGwocXVlcnkuX3JlcG8sIHF1ZXJ5Ll9wYXRoLCBuZXdQYXJhbXMsIHF1ZXJ5Ll9vcmRlckJ5Q2FsbGVkKTtcbiAgICB9XG59XG4vKipcbiAqIENyZWF0ZXMgYSBgUXVlcnlDb25zdHJhaW50YCB3aXRoIHRoZSBzcGVjaWZpZWQgc3RhcnRpbmcgcG9pbnQgKGV4Y2x1c2l2ZSkuXG4gKlxuICogVXNpbmcgYHN0YXJ0QXQoKWAsIGBzdGFydEFmdGVyKClgLCBgZW5kQmVmb3JlKClgLCBgZW5kQXQoKWAgYW5kIGBlcXVhbFRvKClgXG4gKiBhbGxvd3MgeW91IHRvIGNob29zZSBhcmJpdHJhcnkgc3RhcnRpbmcgYW5kIGVuZGluZyBwb2ludHMgZm9yIHlvdXIgcXVlcmllcy5cbiAqXG4gKiBUaGUgc3RhcnRpbmcgcG9pbnQgaXMgZXhjbHVzaXZlLiBJZiBvbmx5IGEgdmFsdWUgaXMgcHJvdmlkZWQsIGNoaWxkcmVuXG4gKiB3aXRoIGEgdmFsdWUgZ3JlYXRlciB0aGFuIHRoZSBzcGVjaWZpZWQgdmFsdWUgd2lsbCBiZSBpbmNsdWRlZCBpbiB0aGUgcXVlcnkuXG4gKiBJZiBhIGtleSBpcyBzcGVjaWZpZWQsIHRoZW4gY2hpbGRyZW4gbXVzdCBoYXZlIGEgdmFsdWUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsXG4gKiB0byB0aGUgc3BlY2lmaWVkIHZhbHVlIGFuZCBhIGEga2V5IG5hbWUgZ3JlYXRlciB0aGFuIHRoZSBzcGVjaWZpZWQga2V5LlxuICpcbiAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSB0byBzdGFydCBhZnRlci4gVGhlIGFyZ3VtZW50IHR5cGUgZGVwZW5kcyBvbiB3aGljaFxuICogYG9yZGVyQnkqKClgIGZ1bmN0aW9uIHdhcyB1c2VkIGluIHRoaXMgcXVlcnkuIFNwZWNpZnkgYSB2YWx1ZSB0aGF0IG1hdGNoZXNcbiAqIHRoZSBgb3JkZXJCeSooKWAgdHlwZS4gV2hlbiB1c2VkIGluIGNvbWJpbmF0aW9uIHdpdGggYG9yZGVyQnlLZXkoKWAsIHRoZVxuICogdmFsdWUgbXVzdCBiZSBhIHN0cmluZy5cbiAqIEBwYXJhbSBrZXkgLSBUaGUgY2hpbGQga2V5IHRvIHN0YXJ0IGFmdGVyLiBUaGlzIGFyZ3VtZW50IGlzIG9ubHkgYWxsb3dlZCBpZlxuICogb3JkZXJpbmcgYnkgY2hpbGQsIHZhbHVlLCBvciBwcmlvcml0eS5cbiAqL1xuZnVuY3Rpb24gc3RhcnRBZnRlcih2YWx1ZSwga2V5KSB7XG4gICAgdmFsaWRhdGVLZXkoJ3N0YXJ0QWZ0ZXInLCAna2V5Jywga2V5LCB0cnVlKTtcbiAgICByZXR1cm4gbmV3IFF1ZXJ5U3RhcnRBZnRlckNvbnN0cmFpbnQodmFsdWUsIGtleSk7XG59XG5jbGFzcyBRdWVyeUxpbWl0VG9GaXJzdENvbnN0cmFpbnQgZXh0ZW5kcyBRdWVyeUNvbnN0cmFpbnQge1xuICAgIGNvbnN0cnVjdG9yKF9saW1pdCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl9saW1pdCA9IF9saW1pdDtcbiAgICAgICAgdGhpcy50eXBlID0gJ2xpbWl0VG9GaXJzdCc7XG4gICAgfVxuICAgIF9hcHBseShxdWVyeSkge1xuICAgICAgICBpZiAocXVlcnkuX3F1ZXJ5UGFyYW1zLmhhc0xpbWl0KCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignbGltaXRUb0ZpcnN0OiBMaW1pdCB3YXMgYWxyZWFkeSBzZXQgKGJ5IGFub3RoZXIgY2FsbCB0byBsaW1pdFRvRmlyc3QgJyArXG4gICAgICAgICAgICAgICAgJ29yIGxpbWl0VG9MYXN0KS4nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5SW1wbChxdWVyeS5fcmVwbywgcXVlcnkuX3BhdGgsIHF1ZXJ5UGFyYW1zTGltaXRUb0ZpcnN0KHF1ZXJ5Ll9xdWVyeVBhcmFtcywgdGhpcy5fbGltaXQpLCBxdWVyeS5fb3JkZXJCeUNhbGxlZCk7XG4gICAgfVxufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGBRdWVyeUNvbnN0cmFpbnRgIHRoYXQgaWYgbGltaXRlZCB0byB0aGUgZmlyc3Qgc3BlY2lmaWMgbnVtYmVyXG4gKiBvZiBjaGlsZHJlbi5cbiAqXG4gKiBUaGUgYGxpbWl0VG9GaXJzdCgpYCBtZXRob2QgaXMgdXNlZCB0byBzZXQgYSBtYXhpbXVtIG51bWJlciBvZiBjaGlsZHJlbiB0byBiZVxuICogc3luY2VkIGZvciBhIGdpdmVuIGNhbGxiYWNrLiBJZiB3ZSBzZXQgYSBsaW1pdCBvZiAxMDAsIHdlIHdpbGwgaW5pdGlhbGx5IG9ubHlcbiAqIHJlY2VpdmUgdXAgdG8gMTAwIGBjaGlsZF9hZGRlZGAgZXZlbnRzLiBJZiB3ZSBoYXZlIGZld2VyIHRoYW4gMTAwIG1lc3NhZ2VzXG4gKiBzdG9yZWQgaW4gb3VyIERhdGFiYXNlLCBhIGBjaGlsZF9hZGRlZGAgZXZlbnQgd2lsbCBmaXJlIGZvciBlYWNoIG1lc3NhZ2UuXG4gKiBIb3dldmVyLCBpZiB3ZSBoYXZlIG92ZXIgMTAwIG1lc3NhZ2VzLCB3ZSB3aWxsIG9ubHkgcmVjZWl2ZSBhIGBjaGlsZF9hZGRlZGBcbiAqIGV2ZW50IGZvciB0aGUgZmlyc3QgMTAwIG9yZGVyZWQgbWVzc2FnZXMuIEFzIGl0ZW1zIGNoYW5nZSwgd2Ugd2lsbCByZWNlaXZlXG4gKiBgY2hpbGRfcmVtb3ZlZGAgZXZlbnRzIGZvciBlYWNoIGl0ZW0gdGhhdCBkcm9wcyBvdXQgb2YgdGhlIGFjdGl2ZSBsaXN0IHNvXG4gKiB0aGF0IHRoZSB0b3RhbCBudW1iZXIgc3RheXMgYXQgMTAwLlxuICpcbiAqIFlvdSBjYW4gcmVhZCBtb3JlIGFib3V0IGBsaW1pdFRvRmlyc3QoKWAgaW5cbiAqIHtAbGluayBodHRwczovL2ZpcmViYXNlLmdvb2dsZS5jb20vZG9jcy9kYXRhYmFzZS93ZWIvbGlzdHMtb2YtZGF0YSNmaWx0ZXJpbmdfZGF0YSB8IEZpbHRlcmluZyBkYXRhfS5cbiAqXG4gKiBAcGFyYW0gbGltaXQgLSBUaGUgbWF4aW11bSBudW1iZXIgb2Ygbm9kZXMgdG8gaW5jbHVkZSBpbiB0aGlzIHF1ZXJ5LlxuICovXG5mdW5jdGlvbiBsaW1pdFRvRmlyc3QobGltaXQpIHtcbiAgICBpZiAodHlwZW9mIGxpbWl0ICE9PSAnbnVtYmVyJyB8fCBNYXRoLmZsb29yKGxpbWl0KSAhPT0gbGltaXQgfHwgbGltaXQgPD0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2xpbWl0VG9GaXJzdDogRmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXIuJyk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgUXVlcnlMaW1pdFRvRmlyc3RDb25zdHJhaW50KGxpbWl0KTtcbn1cbmNsYXNzIFF1ZXJ5TGltaXRUb0xhc3RDb25zdHJhaW50IGV4dGVuZHMgUXVlcnlDb25zdHJhaW50IHtcbiAgICBjb25zdHJ1Y3RvcihfbGltaXQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5fbGltaXQgPSBfbGltaXQ7XG4gICAgICAgIHRoaXMudHlwZSA9ICdsaW1pdFRvTGFzdCc7XG4gICAgfVxuICAgIF9hcHBseShxdWVyeSkge1xuICAgICAgICBpZiAocXVlcnkuX3F1ZXJ5UGFyYW1zLmhhc0xpbWl0KCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignbGltaXRUb0xhc3Q6IExpbWl0IHdhcyBhbHJlYWR5IHNldCAoYnkgYW5vdGhlciBjYWxsIHRvIGxpbWl0VG9GaXJzdCAnICtcbiAgICAgICAgICAgICAgICAnb3IgbGltaXRUb0xhc3QpLicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnlJbXBsKHF1ZXJ5Ll9yZXBvLCBxdWVyeS5fcGF0aCwgcXVlcnlQYXJhbXNMaW1pdFRvTGFzdChxdWVyeS5fcXVlcnlQYXJhbXMsIHRoaXMuX2xpbWl0KSwgcXVlcnkuX29yZGVyQnlDYWxsZWQpO1xuICAgIH1cbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBgUXVlcnlDb25zdHJhaW50YCB0aGF0IGlzIGxpbWl0ZWQgdG8gcmV0dXJuIG9ubHkgdGhlIGxhc3RcbiAqIHNwZWNpZmllZCBudW1iZXIgb2YgY2hpbGRyZW4uXG4gKlxuICogVGhlIGBsaW1pdFRvTGFzdCgpYCBtZXRob2QgaXMgdXNlZCB0byBzZXQgYSBtYXhpbXVtIG51bWJlciBvZiBjaGlsZHJlbiB0byBiZVxuICogc3luY2VkIGZvciBhIGdpdmVuIGNhbGxiYWNrLiBJZiB3ZSBzZXQgYSBsaW1pdCBvZiAxMDAsIHdlIHdpbGwgaW5pdGlhbGx5IG9ubHlcbiAqIHJlY2VpdmUgdXAgdG8gMTAwIGBjaGlsZF9hZGRlZGAgZXZlbnRzLiBJZiB3ZSBoYXZlIGZld2VyIHRoYW4gMTAwIG1lc3NhZ2VzXG4gKiBzdG9yZWQgaW4gb3VyIERhdGFiYXNlLCBhIGBjaGlsZF9hZGRlZGAgZXZlbnQgd2lsbCBmaXJlIGZvciBlYWNoIG1lc3NhZ2UuXG4gKiBIb3dldmVyLCBpZiB3ZSBoYXZlIG92ZXIgMTAwIG1lc3NhZ2VzLCB3ZSB3aWxsIG9ubHkgcmVjZWl2ZSBhIGBjaGlsZF9hZGRlZGBcbiAqIGV2ZW50IGZvciB0aGUgbGFzdCAxMDAgb3JkZXJlZCBtZXNzYWdlcy4gQXMgaXRlbXMgY2hhbmdlLCB3ZSB3aWxsIHJlY2VpdmVcbiAqIGBjaGlsZF9yZW1vdmVkYCBldmVudHMgZm9yIGVhY2ggaXRlbSB0aGF0IGRyb3BzIG91dCBvZiB0aGUgYWN0aXZlIGxpc3Qgc29cbiAqIHRoYXQgdGhlIHRvdGFsIG51bWJlciBzdGF5cyBhdCAxMDAuXG4gKlxuICogWW91IGNhbiByZWFkIG1vcmUgYWJvdXQgYGxpbWl0VG9MYXN0KClgIGluXG4gKiB7QGxpbmsgaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvZGF0YWJhc2Uvd2ViL2xpc3RzLW9mLWRhdGEjZmlsdGVyaW5nX2RhdGEgfCBGaWx0ZXJpbmcgZGF0YX0uXG4gKlxuICogQHBhcmFtIGxpbWl0IC0gVGhlIG1heGltdW0gbnVtYmVyIG9mIG5vZGVzIHRvIGluY2x1ZGUgaW4gdGhpcyBxdWVyeS5cbiAqL1xuZnVuY3Rpb24gbGltaXRUb0xhc3QobGltaXQpIHtcbiAgICBpZiAodHlwZW9mIGxpbWl0ICE9PSAnbnVtYmVyJyB8fCBNYXRoLmZsb29yKGxpbWl0KSAhPT0gbGltaXQgfHwgbGltaXQgPD0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2xpbWl0VG9MYXN0OiBGaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlci4nKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBRdWVyeUxpbWl0VG9MYXN0Q29uc3RyYWludChsaW1pdCk7XG59XG5jbGFzcyBRdWVyeU9yZGVyQnlDaGlsZENvbnN0cmFpbnQgZXh0ZW5kcyBRdWVyeUNvbnN0cmFpbnQge1xuICAgIGNvbnN0cnVjdG9yKF9wYXRoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuX3BhdGggPSBfcGF0aDtcbiAgICAgICAgdGhpcy50eXBlID0gJ29yZGVyQnlDaGlsZCc7XG4gICAgfVxuICAgIF9hcHBseShxdWVyeSkge1xuICAgICAgICB2YWxpZGF0ZU5vUHJldmlvdXNPcmRlckJ5Q2FsbChxdWVyeSwgJ29yZGVyQnlDaGlsZCcpO1xuICAgICAgICBjb25zdCBwYXJzZWRQYXRoID0gbmV3IFBhdGgodGhpcy5fcGF0aCk7XG4gICAgICAgIGlmIChwYXRoSXNFbXB0eShwYXJzZWRQYXRoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdvcmRlckJ5Q2hpbGQ6IGNhbm5vdCBwYXNzIGluIGVtcHR5IHBhdGguIFVzZSBvcmRlckJ5VmFsdWUoKSBpbnN0ZWFkLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluZGV4ID0gbmV3IFBhdGhJbmRleChwYXJzZWRQYXRoKTtcbiAgICAgICAgY29uc3QgbmV3UGFyYW1zID0gcXVlcnlQYXJhbXNPcmRlckJ5KHF1ZXJ5Ll9xdWVyeVBhcmFtcywgaW5kZXgpO1xuICAgICAgICB2YWxpZGF0ZVF1ZXJ5RW5kcG9pbnRzKG5ld1BhcmFtcyk7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnlJbXBsKHF1ZXJ5Ll9yZXBvLCBxdWVyeS5fcGF0aCwgbmV3UGFyYW1zLCBcbiAgICAgICAgLypvcmRlckJ5Q2FsbGVkPSovIHRydWUpO1xuICAgIH1cbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBgUXVlcnlDb25zdHJhaW50YCB0aGF0IG9yZGVycyBieSB0aGUgc3BlY2lmaWVkIGNoaWxkIGtleS5cbiAqXG4gKiBRdWVyaWVzIGNhbiBvbmx5IG9yZGVyIGJ5IG9uZSBrZXkgYXQgYSB0aW1lLiBDYWxsaW5nIGBvcmRlckJ5Q2hpbGQoKWBcbiAqIG11bHRpcGxlIHRpbWVzIG9uIHRoZSBzYW1lIHF1ZXJ5IGlzIGFuIGVycm9yLlxuICpcbiAqIEZpcmViYXNlIHF1ZXJpZXMgYWxsb3cgeW91IHRvIG9yZGVyIHlvdXIgZGF0YSBieSBhbnkgY2hpbGQga2V5IG9uIHRoZSBmbHkuXG4gKiBIb3dldmVyLCBpZiB5b3Uga25vdyBpbiBhZHZhbmNlIHdoYXQgeW91ciBpbmRleGVzIHdpbGwgYmUsIHlvdSBjYW4gZGVmaW5lXG4gKiB0aGVtIHZpYSB0aGUgLmluZGV4T24gcnVsZSBpbiB5b3VyIFNlY3VyaXR5IFJ1bGVzIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2UuIFNlZVxuICogdGhle0BsaW5rIGh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlLmNvbS9kb2NzL2RhdGFiYXNlL3NlY3VyaXR5L2luZGV4aW5nLWRhdGF9XG4gKiBydWxlIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICpcbiAqIFlvdSBjYW4gcmVhZCBtb3JlIGFib3V0IGBvcmRlckJ5Q2hpbGQoKWAgaW5cbiAqIHtAbGluayBodHRwczovL2ZpcmViYXNlLmdvb2dsZS5jb20vZG9jcy9kYXRhYmFzZS93ZWIvbGlzdHMtb2YtZGF0YSNzb3J0X2RhdGEgfCBTb3J0IGRhdGF9LlxuICpcbiAqIEBwYXJhbSBwYXRoIC0gVGhlIHBhdGggdG8gb3JkZXIgYnkuXG4gKi9cbmZ1bmN0aW9uIG9yZGVyQnlDaGlsZChwYXRoKSB7XG4gICAgaWYgKHBhdGggPT09ICcka2V5Jykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ29yZGVyQnlDaGlsZDogXCIka2V5XCIgaXMgaW52YWxpZC4gIFVzZSBvcmRlckJ5S2V5KCkgaW5zdGVhZC4nKTtcbiAgICB9XG4gICAgZWxzZSBpZiAocGF0aCA9PT0gJyRwcmlvcml0eScpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdvcmRlckJ5Q2hpbGQ6IFwiJHByaW9yaXR5XCIgaXMgaW52YWxpZC4gIFVzZSBvcmRlckJ5UHJpb3JpdHkoKSBpbnN0ZWFkLicpO1xuICAgIH1cbiAgICBlbHNlIGlmIChwYXRoID09PSAnJHZhbHVlJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ29yZGVyQnlDaGlsZDogXCIkdmFsdWVcIiBpcyBpbnZhbGlkLiAgVXNlIG9yZGVyQnlWYWx1ZSgpIGluc3RlYWQuJyk7XG4gICAgfVxuICAgIHZhbGlkYXRlUGF0aFN0cmluZygnb3JkZXJCeUNoaWxkJywgJ3BhdGgnLCBwYXRoLCBmYWxzZSk7XG4gICAgcmV0dXJuIG5ldyBRdWVyeU9yZGVyQnlDaGlsZENvbnN0cmFpbnQocGF0aCk7XG59XG5jbGFzcyBRdWVyeU9yZGVyQnlLZXlDb25zdHJhaW50IGV4dGVuZHMgUXVlcnlDb25zdHJhaW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy50eXBlID0gJ29yZGVyQnlLZXknO1xuICAgIH1cbiAgICBfYXBwbHkocXVlcnkpIHtcbiAgICAgICAgdmFsaWRhdGVOb1ByZXZpb3VzT3JkZXJCeUNhbGwocXVlcnksICdvcmRlckJ5S2V5Jyk7XG4gICAgICAgIGNvbnN0IG5ld1BhcmFtcyA9IHF1ZXJ5UGFyYW1zT3JkZXJCeShxdWVyeS5fcXVlcnlQYXJhbXMsIEtFWV9JTkRFWCk7XG4gICAgICAgIHZhbGlkYXRlUXVlcnlFbmRwb2ludHMobmV3UGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeUltcGwocXVlcnkuX3JlcG8sIHF1ZXJ5Ll9wYXRoLCBuZXdQYXJhbXMsIFxuICAgICAgICAvKm9yZGVyQnlDYWxsZWQ9Ki8gdHJ1ZSk7XG4gICAgfVxufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGBRdWVyeUNvbnN0cmFpbnRgIHRoYXQgb3JkZXJzIGJ5IHRoZSBrZXkuXG4gKlxuICogU29ydHMgdGhlIHJlc3VsdHMgb2YgYSBxdWVyeSBieSB0aGVpciAoYXNjZW5kaW5nKSBrZXkgdmFsdWVzLlxuICpcbiAqIFlvdSBjYW4gcmVhZCBtb3JlIGFib3V0IGBvcmRlckJ5S2V5KClgIGluXG4gKiB7QGxpbmsgaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvZGF0YWJhc2Uvd2ViL2xpc3RzLW9mLWRhdGEjc29ydF9kYXRhIHwgU29ydCBkYXRhfS5cbiAqL1xuZnVuY3Rpb24gb3JkZXJCeUtleSgpIHtcbiAgICByZXR1cm4gbmV3IFF1ZXJ5T3JkZXJCeUtleUNvbnN0cmFpbnQoKTtcbn1cbmNsYXNzIFF1ZXJ5T3JkZXJCeVByaW9yaXR5Q29uc3RyYWludCBleHRlbmRzIFF1ZXJ5Q29uc3RyYWludCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMudHlwZSA9ICdvcmRlckJ5UHJpb3JpdHknO1xuICAgIH1cbiAgICBfYXBwbHkocXVlcnkpIHtcbiAgICAgICAgdmFsaWRhdGVOb1ByZXZpb3VzT3JkZXJCeUNhbGwocXVlcnksICdvcmRlckJ5UHJpb3JpdHknKTtcbiAgICAgICAgY29uc3QgbmV3UGFyYW1zID0gcXVlcnlQYXJhbXNPcmRlckJ5KHF1ZXJ5Ll9xdWVyeVBhcmFtcywgUFJJT1JJVFlfSU5ERVgpO1xuICAgICAgICB2YWxpZGF0ZVF1ZXJ5RW5kcG9pbnRzKG5ld1BhcmFtcyk7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnlJbXBsKHF1ZXJ5Ll9yZXBvLCBxdWVyeS5fcGF0aCwgbmV3UGFyYW1zLCBcbiAgICAgICAgLypvcmRlckJ5Q2FsbGVkPSovIHRydWUpO1xuICAgIH1cbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBgUXVlcnlDb25zdHJhaW50YCB0aGF0IG9yZGVycyBieSBwcmlvcml0eS5cbiAqXG4gKiBBcHBsaWNhdGlvbnMgbmVlZCBub3QgdXNlIHByaW9yaXR5IGJ1dCBjYW4gb3JkZXIgY29sbGVjdGlvbnMgYnlcbiAqIG9yZGluYXJ5IHByb3BlcnRpZXMgKHNlZVxuICoge0BsaW5rIGh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlLmNvbS9kb2NzL2RhdGFiYXNlL3dlYi9saXN0cy1vZi1kYXRhI3NvcnRfZGF0YSB8IFNvcnQgZGF0YX1cbiAqIGZvciBhbHRlcm5hdGl2ZXMgdG8gcHJpb3JpdHkuXG4gKi9cbmZ1bmN0aW9uIG9yZGVyQnlQcmlvcml0eSgpIHtcbiAgICByZXR1cm4gbmV3IFF1ZXJ5T3JkZXJCeVByaW9yaXR5Q29uc3RyYWludCgpO1xufVxuY2xhc3MgUXVlcnlPcmRlckJ5VmFsdWVDb25zdHJhaW50IGV4dGVuZHMgUXVlcnlDb25zdHJhaW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy50eXBlID0gJ29yZGVyQnlWYWx1ZSc7XG4gICAgfVxuICAgIF9hcHBseShxdWVyeSkge1xuICAgICAgICB2YWxpZGF0ZU5vUHJldmlvdXNPcmRlckJ5Q2FsbChxdWVyeSwgJ29yZGVyQnlWYWx1ZScpO1xuICAgICAgICBjb25zdCBuZXdQYXJhbXMgPSBxdWVyeVBhcmFtc09yZGVyQnkocXVlcnkuX3F1ZXJ5UGFyYW1zLCBWQUxVRV9JTkRFWCk7XG4gICAgICAgIHZhbGlkYXRlUXVlcnlFbmRwb2ludHMobmV3UGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeUltcGwocXVlcnkuX3JlcG8sIHF1ZXJ5Ll9wYXRoLCBuZXdQYXJhbXMsIFxuICAgICAgICAvKm9yZGVyQnlDYWxsZWQ9Ki8gdHJ1ZSk7XG4gICAgfVxufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGBRdWVyeUNvbnN0cmFpbnRgIHRoYXQgb3JkZXJzIGJ5IHZhbHVlLlxuICpcbiAqIElmIHRoZSBjaGlsZHJlbiBvZiBhIHF1ZXJ5IGFyZSBhbGwgc2NhbGFyIHZhbHVlcyAoc3RyaW5nLCBudW1iZXIsIG9yXG4gKiBib29sZWFuKSwgeW91IGNhbiBvcmRlciB0aGUgcmVzdWx0cyBieSB0aGVpciAoYXNjZW5kaW5nKSB2YWx1ZXMuXG4gKlxuICogWW91IGNhbiByZWFkIG1vcmUgYWJvdXQgYG9yZGVyQnlWYWx1ZSgpYCBpblxuICoge0BsaW5rIGh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlLmNvbS9kb2NzL2RhdGFiYXNlL3dlYi9saXN0cy1vZi1kYXRhI3NvcnRfZGF0YSB8IFNvcnQgZGF0YX0uXG4gKi9cbmZ1bmN0aW9uIG9yZGVyQnlWYWx1ZSgpIHtcbiAgICByZXR1cm4gbmV3IFF1ZXJ5T3JkZXJCeVZhbHVlQ29uc3RyYWludCgpO1xufVxuY2xhc3MgUXVlcnlFcXVhbFRvVmFsdWVDb25zdHJhaW50IGV4dGVuZHMgUXVlcnlDb25zdHJhaW50IHtcbiAgICBjb25zdHJ1Y3RvcihfdmFsdWUsIF9rZXkpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5fdmFsdWUgPSBfdmFsdWU7XG4gICAgICAgIHRoaXMuX2tleSA9IF9rZXk7XG4gICAgICAgIHRoaXMudHlwZSA9ICdlcXVhbFRvJztcbiAgICB9XG4gICAgX2FwcGx5KHF1ZXJ5KSB7XG4gICAgICAgIHZhbGlkYXRlRmlyZWJhc2VEYXRhQXJnKCdlcXVhbFRvJywgdGhpcy5fdmFsdWUsIHF1ZXJ5Ll9wYXRoLCBmYWxzZSk7XG4gICAgICAgIGlmIChxdWVyeS5fcXVlcnlQYXJhbXMuaGFzU3RhcnQoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdlcXVhbFRvOiBTdGFydGluZyBwb2ludCB3YXMgYWxyZWFkeSBzZXQgKGJ5IGFub3RoZXIgY2FsbCB0byBzdGFydEF0L3N0YXJ0QWZ0ZXIgb3IgJyArXG4gICAgICAgICAgICAgICAgJ2VxdWFsVG8pLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChxdWVyeS5fcXVlcnlQYXJhbXMuaGFzRW5kKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignZXF1YWxUbzogRW5kaW5nIHBvaW50IHdhcyBhbHJlYWR5IHNldCAoYnkgYW5vdGhlciBjYWxsIHRvIGVuZEF0L2VuZEJlZm9yZSBvciAnICtcbiAgICAgICAgICAgICAgICAnZXF1YWxUbykuJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeUVuZEF0Q29uc3RyYWludCh0aGlzLl92YWx1ZSwgdGhpcy5fa2V5KS5fYXBwbHkobmV3IFF1ZXJ5U3RhcnRBdENvbnN0cmFpbnQodGhpcy5fdmFsdWUsIHRoaXMuX2tleSkuX2FwcGx5KHF1ZXJ5KSk7XG4gICAgfVxufVxuLyoqXG4gKiBDcmVhdGVzIGEgYFF1ZXJ5Q29uc3RyYWludGAgdGhhdCBpbmNsdWRlcyBjaGlsZHJlbiB0aGF0IG1hdGNoIHRoZSBzcGVjaWZpZWRcbiAqIHZhbHVlLlxuICpcbiAqIFVzaW5nIGBzdGFydEF0KClgLCBgc3RhcnRBZnRlcigpYCwgYGVuZEJlZm9yZSgpYCwgYGVuZEF0KClgIGFuZCBgZXF1YWxUbygpYFxuICogYWxsb3dzIHlvdSB0byBjaG9vc2UgYXJiaXRyYXJ5IHN0YXJ0aW5nIGFuZCBlbmRpbmcgcG9pbnRzIGZvciB5b3VyIHF1ZXJpZXMuXG4gKlxuICogVGhlIG9wdGlvbmFsIGtleSBhcmd1bWVudCBjYW4gYmUgdXNlZCB0byBmdXJ0aGVyIGxpbWl0IHRoZSByYW5nZSBvZiB0aGVcbiAqIHF1ZXJ5LiBJZiBpdCBpcyBzcGVjaWZpZWQsIHRoZW4gY2hpbGRyZW4gdGhhdCBoYXZlIGV4YWN0bHkgdGhlIHNwZWNpZmllZFxuICogdmFsdWUgbXVzdCBhbHNvIGhhdmUgZXhhY3RseSB0aGUgc3BlY2lmaWVkIGtleSBhcyB0aGVpciBrZXkgbmFtZS4gVGhpcyBjYW4gYmVcbiAqIHVzZWQgdG8gZmlsdGVyIHJlc3VsdCBzZXRzIHdpdGggbWFueSBtYXRjaGVzIGZvciB0aGUgc2FtZSB2YWx1ZS5cbiAqXG4gKiBZb3UgY2FuIHJlYWQgbW9yZSBhYm91dCBgZXF1YWxUbygpYCBpblxuICoge0BsaW5rIGh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlLmNvbS9kb2NzL2RhdGFiYXNlL3dlYi9saXN0cy1vZi1kYXRhI2ZpbHRlcmluZ19kYXRhIHwgRmlsdGVyaW5nIGRhdGF9LlxuICpcbiAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSB0byBtYXRjaCBmb3IuIFRoZSBhcmd1bWVudCB0eXBlIGRlcGVuZHMgb24gd2hpY2hcbiAqIGBvcmRlckJ5KigpYCBmdW5jdGlvbiB3YXMgdXNlZCBpbiB0aGlzIHF1ZXJ5LiBTcGVjaWZ5IGEgdmFsdWUgdGhhdCBtYXRjaGVzXG4gKiB0aGUgYG9yZGVyQnkqKClgIHR5cGUuIFdoZW4gdXNlZCBpbiBjb21iaW5hdGlvbiB3aXRoIGBvcmRlckJ5S2V5KClgLCB0aGVcbiAqIHZhbHVlIG11c3QgYmUgYSBzdHJpbmcuXG4gKiBAcGFyYW0ga2V5IC0gVGhlIGNoaWxkIGtleSB0byBzdGFydCBhdCwgYW1vbmcgdGhlIGNoaWxkcmVuIHdpdGggdGhlXG4gKiBwcmV2aW91c2x5IHNwZWNpZmllZCBwcmlvcml0eS4gVGhpcyBhcmd1bWVudCBpcyBvbmx5IGFsbG93ZWQgaWYgb3JkZXJpbmcgYnlcbiAqIGNoaWxkLCB2YWx1ZSwgb3IgcHJpb3JpdHkuXG4gKi9cbmZ1bmN0aW9uIGVxdWFsVG8odmFsdWUsIGtleSkge1xuICAgIHZhbGlkYXRlS2V5KCdlcXVhbFRvJywgJ2tleScsIGtleSwgdHJ1ZSk7XG4gICAgcmV0dXJuIG5ldyBRdWVyeUVxdWFsVG9WYWx1ZUNvbnN0cmFpbnQodmFsdWUsIGtleSk7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgaW1tdXRhYmxlIGluc3RhbmNlIG9mIGBRdWVyeWAgdGhhdCBpcyBleHRlbmRlZCB0byBhbHNvIGluY2x1ZGVcbiAqIGFkZGl0aW9uYWwgcXVlcnkgY29uc3RyYWludHMuXG4gKlxuICogQHBhcmFtIHF1ZXJ5IC0gVGhlIFF1ZXJ5IGluc3RhbmNlIHRvIHVzZSBhcyBhIGJhc2UgZm9yIHRoZSBuZXcgY29uc3RyYWludHMuXG4gKiBAcGFyYW0gcXVlcnlDb25zdHJhaW50cyAtIFRoZSBsaXN0IG9mIGBRdWVyeUNvbnN0cmFpbnRgcyB0byBhcHBseS5cbiAqIEB0aHJvd3MgaWYgYW55IG9mIHRoZSBwcm92aWRlZCBxdWVyeSBjb25zdHJhaW50cyBjYW5ub3QgYmUgY29tYmluZWQgd2l0aCB0aGVcbiAqIGV4aXN0aW5nIG9yIG5ldyBjb25zdHJhaW50cy5cbiAqL1xuZnVuY3Rpb24gcXVlcnkocXVlcnksIC4uLnF1ZXJ5Q29uc3RyYWludHMpIHtcbiAgICBsZXQgcXVlcnlJbXBsID0gZ2V0TW9kdWxhckluc3RhbmNlKHF1ZXJ5KTtcbiAgICBmb3IgKGNvbnN0IGNvbnN0cmFpbnQgb2YgcXVlcnlDb25zdHJhaW50cykge1xuICAgICAgICBxdWVyeUltcGwgPSBjb25zdHJhaW50Ll9hcHBseShxdWVyeUltcGwpO1xuICAgIH1cbiAgICByZXR1cm4gcXVlcnlJbXBsO1xufVxuLyoqXG4gKiBEZWZpbmUgcmVmZXJlbmNlIGNvbnN0cnVjdG9yIGluIHZhcmlvdXMgbW9kdWxlc1xuICpcbiAqIFdlIGFyZSBkb2luZyB0aGlzIGhlcmUgdG8gYXZvaWQgc2V2ZXJhbCBjaXJjdWxhclxuICogZGVwZW5kZW5jeSBpc3N1ZXNcbiAqL1xuc3luY1BvaW50U2V0UmVmZXJlbmNlQ29uc3RydWN0b3IoUmVmZXJlbmNlSW1wbCk7XG5zeW5jVHJlZVNldFJlZmVyZW5jZUNvbnN0cnVjdG9yKFJlZmVyZW5jZUltcGwpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGlzIHZhcmlhYmxlIGlzIGFsc28gZGVmaW5lZCBpbiB0aGUgZmlyZWJhc2UgTm9kZS5qcyBBZG1pbiBTREsuIEJlZm9yZVxuICogbW9kaWZ5aW5nIHRoaXMgZGVmaW5pdGlvbiwgY29uc3VsdCB0aGUgZGVmaW5pdGlvbiBpbjpcbiAqXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtYWRtaW4tbm9kZVxuICpcbiAqIGFuZCBtYWtlIHN1cmUgdGhlIHR3byBhcmUgY29uc2lzdGVudC5cbiAqL1xuY29uc3QgRklSRUJBU0VfREFUQUJBU0VfRU1VTEFUT1JfSE9TVF9WQVIgPSAnRklSRUJBU0VfREFUQUJBU0VfRU1VTEFUT1JfSE9TVCc7XG4vKipcbiAqIENyZWF0ZXMgYW5kIGNhY2hlcyBgUmVwb2AgaW5zdGFuY2VzLlxuICovXG5jb25zdCByZXBvcyA9IHt9O1xuLyoqXG4gKiBJZiB0cnVlLCBhbnkgbmV3IGBSZXBvYCB3aWxsIGJlIGNyZWF0ZWQgdG8gdXNlIGBSZWFkb25seVJlc3RDbGllbnRgIChmb3IgdGVzdGluZyBwdXJwb3NlcykuXG4gKi9cbmxldCB1c2VSZXN0Q2xpZW50ID0gZmFsc2U7XG4vKipcbiAqIFVwZGF0ZSBhbiBleGlzdGluZyBgUmVwb2AgaW4gcGxhY2UgdG8gcG9pbnQgdG8gYSBuZXcgaG9zdC9wb3J0LlxuICovXG5mdW5jdGlvbiByZXBvTWFuYWdlckFwcGx5RW11bGF0b3JTZXR0aW5ncyhyZXBvLCBob3N0LCBwb3J0LCB0b2tlblByb3ZpZGVyKSB7XG4gICAgcmVwby5yZXBvSW5mb18gPSBuZXcgUmVwb0luZm8oYCR7aG9zdH06JHtwb3J0fWAsIFxuICAgIC8qIHNlY3VyZT0gKi8gZmFsc2UsIHJlcG8ucmVwb0luZm9fLm5hbWVzcGFjZSwgcmVwby5yZXBvSW5mb18ud2ViU29ja2V0T25seSwgcmVwby5yZXBvSW5mb18ubm9kZUFkbWluLCByZXBvLnJlcG9JbmZvXy5wZXJzaXN0ZW5jZUtleSwgcmVwby5yZXBvSW5mb18uaW5jbHVkZU5hbWVzcGFjZUluUXVlcnlQYXJhbXMsIFxuICAgIC8qaXNVc2luZ0VtdWxhdG9yPSovIHRydWUpO1xuICAgIGlmICh0b2tlblByb3ZpZGVyKSB7XG4gICAgICAgIHJlcG8uYXV0aFRva2VuUHJvdmlkZXJfID0gdG9rZW5Qcm92aWRlcjtcbiAgICB9XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gc2hvdWxkIG9ubHkgZXZlciBiZSBjYWxsZWQgdG8gQ1JFQVRFIGEgbmV3IGRhdGFiYXNlIGluc3RhbmNlLlxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIHJlcG9NYW5hZ2VyRGF0YWJhc2VGcm9tQXBwKGFwcCwgYXV0aFByb3ZpZGVyLCBhcHBDaGVja1Byb3ZpZGVyLCB1cmwsIG5vZGVBZG1pbikge1xuICAgIGxldCBkYlVybCA9IHVybCB8fCBhcHAub3B0aW9ucy5kYXRhYmFzZVVSTDtcbiAgICBpZiAoZGJVcmwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoIWFwcC5vcHRpb25zLnByb2plY3RJZCkge1xuICAgICAgICAgICAgZmF0YWwoXCJDYW4ndCBkZXRlcm1pbmUgRmlyZWJhc2UgRGF0YWJhc2UgVVJMLiBCZSBzdXJlIHRvIGluY2x1ZGUgXCIgK1xuICAgICAgICAgICAgICAgICcgYSBQcm9qZWN0IElEIHdoZW4gY2FsbGluZyBmaXJlYmFzZS5pbml0aWFsaXplQXBwKCkuJyk7XG4gICAgICAgIH1cbiAgICAgICAgbG9nKCdVc2luZyBkZWZhdWx0IGhvc3QgZm9yIHByb2plY3QgJywgYXBwLm9wdGlvbnMucHJvamVjdElkKTtcbiAgICAgICAgZGJVcmwgPSBgJHthcHAub3B0aW9ucy5wcm9qZWN0SWR9LWRlZmF1bHQtcnRkYi5maXJlYmFzZWlvLmNvbWA7XG4gICAgfVxuICAgIGxldCBwYXJzZWRVcmwgPSBwYXJzZVJlcG9JbmZvKGRiVXJsLCBub2RlQWRtaW4pO1xuICAgIGxldCByZXBvSW5mbyA9IHBhcnNlZFVybC5yZXBvSW5mbztcbiAgICBsZXQgaXNFbXVsYXRvcjtcbiAgICBsZXQgZGJFbXVsYXRvckhvc3QgPSB1bmRlZmluZWQ7XG4gICAgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiBwcm9jZXNzLmVudikge1xuICAgICAgICBkYkVtdWxhdG9ySG9zdCA9IHByb2Nlc3MuZW52W0ZJUkVCQVNFX0RBVEFCQVNFX0VNVUxBVE9SX0hPU1RfVkFSXTtcbiAgICB9XG4gICAgaWYgKGRiRW11bGF0b3JIb3N0KSB7XG4gICAgICAgIGlzRW11bGF0b3IgPSB0cnVlO1xuICAgICAgICBkYlVybCA9IGBodHRwOi8vJHtkYkVtdWxhdG9ySG9zdH0/bnM9JHtyZXBvSW5mby5uYW1lc3BhY2V9YDtcbiAgICAgICAgcGFyc2VkVXJsID0gcGFyc2VSZXBvSW5mbyhkYlVybCwgbm9kZUFkbWluKTtcbiAgICAgICAgcmVwb0luZm8gPSBwYXJzZWRVcmwucmVwb0luZm87XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpc0VtdWxhdG9yID0gIXBhcnNlZFVybC5yZXBvSW5mby5zZWN1cmU7XG4gICAgfVxuICAgIGNvbnN0IGF1dGhUb2tlblByb3ZpZGVyID0gbm9kZUFkbWluICYmIGlzRW11bGF0b3JcbiAgICAgICAgPyBuZXcgRW11bGF0b3JUb2tlblByb3ZpZGVyKEVtdWxhdG9yVG9rZW5Qcm92aWRlci5PV05FUilcbiAgICAgICAgOiBuZXcgRmlyZWJhc2VBdXRoVG9rZW5Qcm92aWRlcihhcHAubmFtZSwgYXBwLm9wdGlvbnMsIGF1dGhQcm92aWRlcik7XG4gICAgdmFsaWRhdGVVcmwoJ0ludmFsaWQgRmlyZWJhc2UgRGF0YWJhc2UgVVJMJywgcGFyc2VkVXJsKTtcbiAgICBpZiAoIXBhdGhJc0VtcHR5KHBhcnNlZFVybC5wYXRoKSkge1xuICAgICAgICBmYXRhbCgnRGF0YWJhc2UgVVJMIG11c3QgcG9pbnQgdG8gdGhlIHJvb3Qgb2YgYSBGaXJlYmFzZSBEYXRhYmFzZSAnICtcbiAgICAgICAgICAgICcobm90IGluY2x1ZGluZyBhIGNoaWxkIHBhdGgpLicpO1xuICAgIH1cbiAgICBjb25zdCByZXBvID0gcmVwb01hbmFnZXJDcmVhdGVSZXBvKHJlcG9JbmZvLCBhcHAsIGF1dGhUb2tlblByb3ZpZGVyLCBuZXcgQXBwQ2hlY2tUb2tlblByb3ZpZGVyKGFwcC5uYW1lLCBhcHBDaGVja1Byb3ZpZGVyKSk7XG4gICAgcmV0dXJuIG5ldyBEYXRhYmFzZShyZXBvLCBhcHApO1xufVxuLyoqXG4gKiBSZW1vdmUgdGhlIHJlcG8gYW5kIG1ha2Ugc3VyZSBpdCBpcyBkaXNjb25uZWN0ZWQuXG4gKlxuICovXG5mdW5jdGlvbiByZXBvTWFuYWdlckRlbGV0ZVJlcG8ocmVwbywgYXBwTmFtZSkge1xuICAgIGNvbnN0IGFwcFJlcG9zID0gcmVwb3NbYXBwTmFtZV07XG4gICAgLy8gVGhpcyBzaG91bGQgbmV2ZXIgaGFwcGVuLi4uXG4gICAgaWYgKCFhcHBSZXBvcyB8fCBhcHBSZXBvc1tyZXBvLmtleV0gIT09IHJlcG8pIHtcbiAgICAgICAgZmF0YWwoYERhdGFiYXNlICR7YXBwTmFtZX0oJHtyZXBvLnJlcG9JbmZvX30pIGhhcyBhbHJlYWR5IGJlZW4gZGVsZXRlZC5gKTtcbiAgICB9XG4gICAgcmVwb0ludGVycnVwdChyZXBvKTtcbiAgICBkZWxldGUgYXBwUmVwb3NbcmVwby5rZXldO1xufVxuLyoqXG4gKiBFbnN1cmVzIGEgcmVwbyBkb2Vzbid0IGFscmVhZHkgZXhpc3QgYW5kIHRoZW4gY3JlYXRlcyBvbmUgdXNpbmcgdGhlXG4gKiBwcm92aWRlZCBhcHAuXG4gKlxuICogQHBhcmFtIHJlcG9JbmZvIC0gVGhlIG1ldGFkYXRhIGFib3V0IHRoZSBSZXBvXG4gKiBAcmV0dXJucyBUaGUgUmVwbyBvYmplY3QgZm9yIHRoZSBzcGVjaWZpZWQgc2VydmVyIC8gcmVwb05hbWUuXG4gKi9cbmZ1bmN0aW9uIHJlcG9NYW5hZ2VyQ3JlYXRlUmVwbyhyZXBvSW5mbywgYXBwLCBhdXRoVG9rZW5Qcm92aWRlciwgYXBwQ2hlY2tQcm92aWRlcikge1xuICAgIGxldCBhcHBSZXBvcyA9IHJlcG9zW2FwcC5uYW1lXTtcbiAgICBpZiAoIWFwcFJlcG9zKSB7XG4gICAgICAgIGFwcFJlcG9zID0ge307XG4gICAgICAgIHJlcG9zW2FwcC5uYW1lXSA9IGFwcFJlcG9zO1xuICAgIH1cbiAgICBsZXQgcmVwbyA9IGFwcFJlcG9zW3JlcG9JbmZvLnRvVVJMU3RyaW5nKCldO1xuICAgIGlmIChyZXBvKSB7XG4gICAgICAgIGZhdGFsKCdEYXRhYmFzZSBpbml0aWFsaXplZCBtdWx0aXBsZSB0aW1lcy4gUGxlYXNlIG1ha2Ugc3VyZSB0aGUgZm9ybWF0IG9mIHRoZSBkYXRhYmFzZSBVUkwgbWF0Y2hlcyB3aXRoIGVhY2ggZGF0YWJhc2UoKSBjYWxsLicpO1xuICAgIH1cbiAgICByZXBvID0gbmV3IFJlcG8ocmVwb0luZm8sIHVzZVJlc3RDbGllbnQsIGF1dGhUb2tlblByb3ZpZGVyLCBhcHBDaGVja1Byb3ZpZGVyKTtcbiAgICBhcHBSZXBvc1tyZXBvSW5mby50b1VSTFN0cmluZygpXSA9IHJlcG87XG4gICAgcmV0dXJuIHJlcG87XG59XG4vKipcbiAqIEZvcmNlcyB1cyB0byB1c2UgUmVhZG9ubHlSZXN0Q2xpZW50IGluc3RlYWQgb2YgUGVyc2lzdGVudENvbm5lY3Rpb24gZm9yIG5ldyBSZXBvcy5cbiAqL1xuZnVuY3Rpb24gcmVwb01hbmFnZXJGb3JjZVJlc3RDbGllbnQoZm9yY2VSZXN0Q2xpZW50KSB7XG4gICAgdXNlUmVzdENsaWVudCA9IGZvcmNlUmVzdENsaWVudDtcbn1cbi8qKlxuICogQ2xhc3MgcmVwcmVzZW50aW5nIGEgRmlyZWJhc2UgUmVhbHRpbWUgRGF0YWJhc2UuXG4gKi9cbmNsYXNzIERhdGFiYXNlIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKF9yZXBvSW50ZXJuYWwsIFxuICAgIC8qKiBUaGUge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IGFzc29jaWF0ZWQgd2l0aCB0aGlzIFJlYWx0aW1lIERhdGFiYXNlIGluc3RhbmNlLiAqL1xuICAgIGFwcCkge1xuICAgICAgICB0aGlzLl9yZXBvSW50ZXJuYWwgPSBfcmVwb0ludGVybmFsO1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAgICAgLyoqIFJlcHJlc2VudHMgYSBgRGF0YWJhc2VgIGluc3RhbmNlLiAqL1xuICAgICAgICB0aGlzWyd0eXBlJ10gPSAnZGF0YWJhc2UnO1xuICAgICAgICAvKiogVHJhY2sgaWYgdGhlIGluc3RhbmNlIGhhcyBiZWVuIHVzZWQgKHJvb3Qgb3IgcmVwbyBhY2Nlc3NlZCkgKi9cbiAgICAgICAgdGhpcy5faW5zdGFuY2VTdGFydGVkID0gZmFsc2U7XG4gICAgfVxuICAgIGdldCBfcmVwbygpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9pbnN0YW5jZVN0YXJ0ZWQpIHtcbiAgICAgICAgICAgIHJlcG9TdGFydCh0aGlzLl9yZXBvSW50ZXJuYWwsIHRoaXMuYXBwLm9wdGlvbnMuYXBwSWQsIHRoaXMuYXBwLm9wdGlvbnNbJ2RhdGFiYXNlQXV0aFZhcmlhYmxlT3ZlcnJpZGUnXSk7XG4gICAgICAgICAgICB0aGlzLl9pbnN0YW5jZVN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXBvSW50ZXJuYWw7XG4gICAgfVxuICAgIGdldCBfcm9vdCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9yb290SW50ZXJuYWwpIHtcbiAgICAgICAgICAgIHRoaXMuX3Jvb3RJbnRlcm5hbCA9IG5ldyBSZWZlcmVuY2VJbXBsKHRoaXMuX3JlcG8sIG5ld0VtcHR5UGF0aCgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fcm9vdEludGVybmFsO1xuICAgIH1cbiAgICBfZGVsZXRlKCkge1xuICAgICAgICBpZiAodGhpcy5fcm9vdEludGVybmFsICE9PSBudWxsKSB7XG4gICAgICAgICAgICByZXBvTWFuYWdlckRlbGV0ZVJlcG8odGhpcy5fcmVwbywgdGhpcy5hcHAubmFtZSk7XG4gICAgICAgICAgICB0aGlzLl9yZXBvSW50ZXJuYWwgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5fcm9vdEludGVybmFsID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIF9jaGVja05vdERlbGV0ZWQoYXBpTmFtZSkge1xuICAgICAgICBpZiAodGhpcy5fcm9vdEludGVybmFsID09PSBudWxsKSB7XG4gICAgICAgICAgICBmYXRhbCgnQ2Fubm90IGNhbGwgJyArIGFwaU5hbWUgKyAnIG9uIGEgZGVsZXRlZCBkYXRhYmFzZS4nKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGNoZWNrVHJhbnNwb3J0SW5pdCgpIHtcbiAgICBpZiAoVHJhbnNwb3J0TWFuYWdlci5JU19UUkFOU1BPUlRfSU5JVElBTElaRUQpIHtcbiAgICAgICAgd2FybignVHJhbnNwb3J0IGhhcyBhbHJlYWR5IGJlZW4gaW5pdGlhbGl6ZWQuIFBsZWFzZSBjYWxsIHRoaXMgZnVuY3Rpb24gYmVmb3JlIGNhbGxpbmcgcmVmIG9yIHNldHRpbmcgdXAgYSBsaXN0ZW5lcicpO1xuICAgIH1cbn1cbi8qKlxuICogRm9yY2UgdGhlIHVzZSBvZiB3ZWJzb2NrZXRzIGluc3RlYWQgb2YgbG9uZ1BvbGxpbmcuXG4gKi9cbmZ1bmN0aW9uIGZvcmNlV2ViU29ja2V0cygpIHtcbiAgICBjaGVja1RyYW5zcG9ydEluaXQoKTtcbiAgICBCcm93c2VyUG9sbENvbm5lY3Rpb24uZm9yY2VEaXNhbGxvdygpO1xufVxuLyoqXG4gKiBGb3JjZSB0aGUgdXNlIG9mIGxvbmdQb2xsaW5nIGluc3RlYWQgb2Ygd2Vic29ja2V0cy4gVGhpcyB3aWxsIGJlIGlnbm9yZWQgaWYgd2Vic29ja2V0IHByb3RvY29sIGlzIHVzZWQgaW4gZGF0YWJhc2VVUkwuXG4gKi9cbmZ1bmN0aW9uIGZvcmNlTG9uZ1BvbGxpbmcoKSB7XG4gICAgY2hlY2tUcmFuc3BvcnRJbml0KCk7XG4gICAgV2ViU29ja2V0Q29ubmVjdGlvbi5mb3JjZURpc2FsbG93KCk7XG4gICAgQnJvd3NlclBvbGxDb25uZWN0aW9uLmZvcmNlQWxsb3coKTtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgaW5zdGFuY2Ugb2YgdGhlIFJlYWx0aW1lIERhdGFiYXNlIFNESyB0aGF0IGlzIGFzc29jaWF0ZWQgd2l0aCB0aGUgcHJvdmlkZWRcbiAqIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfS4gSW5pdGlhbGl6ZXMgYSBuZXcgaW5zdGFuY2Ugd2l0aCBkZWZhdWx0IHNldHRpbmdzIGlmXG4gKiBubyBpbnN0YW5jZSBleGlzdHMgb3IgaWYgdGhlIGV4aXN0aW5nIGluc3RhbmNlIHVzZXMgYSBjdXN0b20gZGF0YWJhc2UgVVJMLlxuICpcbiAqIEBwYXJhbSBhcHAgLSBUaGUge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IGluc3RhbmNlIHRoYXQgdGhlIHJldHVybmVkIFJlYWx0aW1lXG4gKiBEYXRhYmFzZSBpbnN0YW5jZSBpcyBhc3NvY2lhdGVkIHdpdGguXG4gKiBAcGFyYW0gdXJsIC0gVGhlIFVSTCBvZiB0aGUgUmVhbHRpbWUgRGF0YWJhc2UgaW5zdGFuY2UgdG8gY29ubmVjdCB0by4gSWYgbm90XG4gKiBwcm92aWRlZCwgdGhlIFNESyBjb25uZWN0cyB0byB0aGUgZGVmYXVsdCBpbnN0YW5jZSBvZiB0aGUgRmlyZWJhc2UgQXBwLlxuICogQHJldHVybnMgVGhlIGBEYXRhYmFzZWAgaW5zdGFuY2Ugb2YgdGhlIHByb3ZpZGVkIGFwcC5cbiAqL1xuZnVuY3Rpb24gZ2V0RGF0YWJhc2UoYXBwID0gZ2V0QXBwKCksIHVybCkge1xuICAgIGNvbnN0IGRiID0gX2dldFByb3ZpZGVyKGFwcCwgJ2RhdGFiYXNlJykuZ2V0SW1tZWRpYXRlKHtcbiAgICAgICAgaWRlbnRpZmllcjogdXJsXG4gICAgfSk7XG4gICAgaWYgKCFkYi5faW5zdGFuY2VTdGFydGVkKSB7XG4gICAgICAgIGNvbnN0IGVtdWxhdG9yID0gZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdG5hbWVBbmRQb3J0KCdkYXRhYmFzZScpO1xuICAgICAgICBpZiAoZW11bGF0b3IpIHtcbiAgICAgICAgICAgIGNvbm5lY3REYXRhYmFzZUVtdWxhdG9yKGRiLCAuLi5lbXVsYXRvcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRiO1xufVxuLyoqXG4gKiBNb2RpZnkgdGhlIHByb3ZpZGVkIGluc3RhbmNlIHRvIGNvbW11bmljYXRlIHdpdGggdGhlIFJlYWx0aW1lIERhdGFiYXNlXG4gKiBlbXVsYXRvci5cbiAqXG4gKiA8cD5Ob3RlOiBUaGlzIG1ldGhvZCBtdXN0IGJlIGNhbGxlZCBiZWZvcmUgcGVyZm9ybWluZyBhbnkgb3RoZXIgb3BlcmF0aW9uLlxuICpcbiAqIEBwYXJhbSBkYiAtIFRoZSBpbnN0YW5jZSB0byBtb2RpZnkuXG4gKiBAcGFyYW0gaG9zdCAtIFRoZSBlbXVsYXRvciBob3N0IChleDogbG9jYWxob3N0KVxuICogQHBhcmFtIHBvcnQgLSBUaGUgZW11bGF0b3IgcG9ydCAoZXg6IDgwODApXG4gKiBAcGFyYW0gb3B0aW9ucy5tb2NrVXNlclRva2VuIC0gdGhlIG1vY2sgYXV0aCB0b2tlbiB0byB1c2UgZm9yIHVuaXQgdGVzdGluZyBTZWN1cml0eSBSdWxlc1xuICovXG5mdW5jdGlvbiBjb25uZWN0RGF0YWJhc2VFbXVsYXRvcihkYiwgaG9zdCwgcG9ydCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgZGIgPSBnZXRNb2R1bGFySW5zdGFuY2UoZGIpO1xuICAgIGRiLl9jaGVja05vdERlbGV0ZWQoJ3VzZUVtdWxhdG9yJyk7XG4gICAgaWYgKGRiLl9pbnN0YW5jZVN0YXJ0ZWQpIHtcbiAgICAgICAgZmF0YWwoJ0Nhbm5vdCBjYWxsIHVzZUVtdWxhdG9yKCkgYWZ0ZXIgaW5zdGFuY2UgaGFzIGFscmVhZHkgYmVlbiBpbml0aWFsaXplZC4nKTtcbiAgICB9XG4gICAgY29uc3QgcmVwbyA9IGRiLl9yZXBvSW50ZXJuYWw7XG4gICAgbGV0IHRva2VuUHJvdmlkZXIgPSB1bmRlZmluZWQ7XG4gICAgaWYgKHJlcG8ucmVwb0luZm9fLm5vZGVBZG1pbikge1xuICAgICAgICBpZiAob3B0aW9ucy5tb2NrVXNlclRva2VuKSB7XG4gICAgICAgICAgICBmYXRhbCgnbW9ja1VzZXJUb2tlbiBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBBZG1pbiBTREsuIEZvciBjbGllbnQgYWNjZXNzIHdpdGggbW9jayB1c2VycywgcGxlYXNlIHVzZSB0aGUgXCJmaXJlYmFzZVwiIHBhY2thZ2UgaW5zdGVhZCBvZiBcImZpcmViYXNlLWFkbWluXCIuJyk7XG4gICAgICAgIH1cbiAgICAgICAgdG9rZW5Qcm92aWRlciA9IG5ldyBFbXVsYXRvclRva2VuUHJvdmlkZXIoRW11bGF0b3JUb2tlblByb3ZpZGVyLk9XTkVSKTtcbiAgICB9XG4gICAgZWxzZSBpZiAob3B0aW9ucy5tb2NrVXNlclRva2VuKSB7XG4gICAgICAgIGNvbnN0IHRva2VuID0gdHlwZW9mIG9wdGlvbnMubW9ja1VzZXJUb2tlbiA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgID8gb3B0aW9ucy5tb2NrVXNlclRva2VuXG4gICAgICAgICAgICA6IGNyZWF0ZU1vY2tVc2VyVG9rZW4ob3B0aW9ucy5tb2NrVXNlclRva2VuLCBkYi5hcHAub3B0aW9ucy5wcm9qZWN0SWQpO1xuICAgICAgICB0b2tlblByb3ZpZGVyID0gbmV3IEVtdWxhdG9yVG9rZW5Qcm92aWRlcih0b2tlbik7XG4gICAgfVxuICAgIC8vIE1vZGlmeSB0aGUgcmVwbyB0byBhcHBseSBlbXVsYXRvciBzZXR0aW5nc1xuICAgIHJlcG9NYW5hZ2VyQXBwbHlFbXVsYXRvclNldHRpbmdzKHJlcG8sIGhvc3QsIHBvcnQsIHRva2VuUHJvdmlkZXIpO1xufVxuLyoqXG4gKiBEaXNjb25uZWN0cyBmcm9tIHRoZSBzZXJ2ZXIgKGFsbCBEYXRhYmFzZSBvcGVyYXRpb25zIHdpbGwgYmUgY29tcGxldGVkXG4gKiBvZmZsaW5lKS5cbiAqXG4gKiBUaGUgY2xpZW50IGF1dG9tYXRpY2FsbHkgbWFpbnRhaW5zIGEgcGVyc2lzdGVudCBjb25uZWN0aW9uIHRvIHRoZSBEYXRhYmFzZVxuICogc2VydmVyLCB3aGljaCB3aWxsIHJlbWFpbiBhY3RpdmUgaW5kZWZpbml0ZWx5IGFuZCByZWNvbm5lY3Qgd2hlblxuICogZGlzY29ubmVjdGVkLiBIb3dldmVyLCB0aGUgYGdvT2ZmbGluZSgpYCBhbmQgYGdvT25saW5lKClgIG1ldGhvZHMgbWF5IGJlIHVzZWRcbiAqIHRvIGNvbnRyb2wgdGhlIGNsaWVudCBjb25uZWN0aW9uIGluIGNhc2VzIHdoZXJlIGEgcGVyc2lzdGVudCBjb25uZWN0aW9uIGlzXG4gKiB1bmRlc2lyYWJsZS5cbiAqXG4gKiBXaGlsZSBvZmZsaW5lLCB0aGUgY2xpZW50IHdpbGwgbm8gbG9uZ2VyIHJlY2VpdmUgZGF0YSB1cGRhdGVzIGZyb20gdGhlXG4gKiBEYXRhYmFzZS4gSG93ZXZlciwgYWxsIERhdGFiYXNlIG9wZXJhdGlvbnMgcGVyZm9ybWVkIGxvY2FsbHkgd2lsbCBjb250aW51ZSB0b1xuICogaW1tZWRpYXRlbHkgZmlyZSBldmVudHMsIGFsbG93aW5nIHlvdXIgYXBwbGljYXRpb24gdG8gY29udGludWUgYmVoYXZpbmdcbiAqIG5vcm1hbGx5LiBBZGRpdGlvbmFsbHksIGVhY2ggb3BlcmF0aW9uIHBlcmZvcm1lZCBsb2NhbGx5IHdpbGwgYXV0b21hdGljYWxseVxuICogYmUgcXVldWVkIGFuZCByZXRyaWVkIHVwb24gcmVjb25uZWN0aW9uIHRvIHRoZSBEYXRhYmFzZSBzZXJ2ZXIuXG4gKlxuICogVG8gcmVjb25uZWN0IHRvIHRoZSBEYXRhYmFzZSBhbmQgYmVnaW4gcmVjZWl2aW5nIHJlbW90ZSBldmVudHMsIHNlZVxuICogYGdvT25saW5lKClgLlxuICpcbiAqIEBwYXJhbSBkYiAtIFRoZSBpbnN0YW5jZSB0byBkaXNjb25uZWN0LlxuICovXG5mdW5jdGlvbiBnb09mZmxpbmUoZGIpIHtcbiAgICBkYiA9IGdldE1vZHVsYXJJbnN0YW5jZShkYik7XG4gICAgZGIuX2NoZWNrTm90RGVsZXRlZCgnZ29PZmZsaW5lJyk7XG4gICAgcmVwb0ludGVycnVwdChkYi5fcmVwbyk7XG59XG4vKipcbiAqIFJlY29ubmVjdHMgdG8gdGhlIHNlcnZlciBhbmQgc3luY2hyb25pemVzIHRoZSBvZmZsaW5lIERhdGFiYXNlIHN0YXRlXG4gKiB3aXRoIHRoZSBzZXJ2ZXIgc3RhdGUuXG4gKlxuICogVGhpcyBtZXRob2Qgc2hvdWxkIGJlIHVzZWQgYWZ0ZXIgZGlzYWJsaW5nIHRoZSBhY3RpdmUgY29ubmVjdGlvbiB3aXRoXG4gKiBgZ29PZmZsaW5lKClgLiBPbmNlIHJlY29ubmVjdGVkLCB0aGUgY2xpZW50IHdpbGwgdHJhbnNtaXQgdGhlIHByb3BlciBkYXRhXG4gKiBhbmQgZmlyZSB0aGUgYXBwcm9wcmlhdGUgZXZlbnRzIHNvIHRoYXQgeW91ciBjbGllbnQgXCJjYXRjaGVzIHVwXCJcbiAqIGF1dG9tYXRpY2FsbHkuXG4gKlxuICogQHBhcmFtIGRiIC0gVGhlIGluc3RhbmNlIHRvIHJlY29ubmVjdC5cbiAqL1xuZnVuY3Rpb24gZ29PbmxpbmUoZGIpIHtcbiAgICBkYiA9IGdldE1vZHVsYXJJbnN0YW5jZShkYik7XG4gICAgZGIuX2NoZWNrTm90RGVsZXRlZCgnZ29PbmxpbmUnKTtcbiAgICByZXBvUmVzdW1lKGRiLl9yZXBvKTtcbn1cbmZ1bmN0aW9uIGVuYWJsZUxvZ2dpbmcobG9nZ2VyLCBwZXJzaXN0ZW50KSB7XG4gICAgZW5hYmxlTG9nZ2luZyQxKGxvZ2dlciwgcGVyc2lzdGVudCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5mdW5jdGlvbiByZWdpc3RlckRhdGFiYXNlKHZhcmlhbnQpIHtcbiAgICBzZXRTREtWZXJzaW9uKFNES19WRVJTSU9OJDEpO1xuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KCdkYXRhYmFzZScsIChjb250YWluZXIsIHsgaW5zdGFuY2VJZGVudGlmaWVyOiB1cmwgfSkgPT4ge1xuICAgICAgICBjb25zdCBhcHAgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2FwcCcpLmdldEltbWVkaWF0ZSgpO1xuICAgICAgICBjb25zdCBhdXRoUHJvdmlkZXIgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2F1dGgtaW50ZXJuYWwnKTtcbiAgICAgICAgY29uc3QgYXBwQ2hlY2tQcm92aWRlciA9IGNvbnRhaW5lci5nZXRQcm92aWRlcignYXBwLWNoZWNrLWludGVybmFsJyk7XG4gICAgICAgIHJldHVybiByZXBvTWFuYWdlckRhdGFiYXNlRnJvbUFwcChhcHAsIGF1dGhQcm92aWRlciwgYXBwQ2hlY2tQcm92aWRlciwgdXJsKTtcbiAgICB9LCBcIlBVQkxJQ1wiIC8qIENvbXBvbmVudFR5cGUuUFVCTElDICovKS5zZXRNdWx0aXBsZUluc3RhbmNlcyh0cnVlKSk7XG4gICAgcmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24sIHZhcmlhbnQpO1xuICAgIC8vIEJVSUxEX1RBUkdFVCB3aWxsIGJlIHJlcGxhY2VkIGJ5IHZhbHVlcyBsaWtlIGVzbTIwMTcsIGNqczIwMTcsIGV0YyBkdXJpbmcgdGhlIGNvbXBpbGF0aW9uXG4gICAgcmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24sICdlc20yMDE3Jyk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jb25zdCBTRVJWRVJfVElNRVNUQU1QID0ge1xuICAgICcuc3YnOiAndGltZXN0YW1wJ1xufTtcbi8qKlxuICogUmV0dXJucyBhIHBsYWNlaG9sZGVyIHZhbHVlIGZvciBhdXRvLXBvcHVsYXRpbmcgdGhlIGN1cnJlbnQgdGltZXN0YW1wICh0aW1lXG4gKiBzaW5jZSB0aGUgVW5peCBlcG9jaCwgaW4gbWlsbGlzZWNvbmRzKSBhcyBkZXRlcm1pbmVkIGJ5IHRoZSBGaXJlYmFzZVxuICogc2VydmVycy5cbiAqL1xuZnVuY3Rpb24gc2VydmVyVGltZXN0YW1wKCkge1xuICAgIHJldHVybiBTRVJWRVJfVElNRVNUQU1QO1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgcGxhY2Vob2xkZXIgdmFsdWUgdGhhdCBjYW4gYmUgdXNlZCB0byBhdG9taWNhbGx5IGluY3JlbWVudCB0aGVcbiAqIGN1cnJlbnQgZGF0YWJhc2UgdmFsdWUgYnkgdGhlIHByb3ZpZGVkIGRlbHRhLlxuICpcbiAqIEBwYXJhbSBkZWx0YSAtIHRoZSBhbW91bnQgdG8gbW9kaWZ5IHRoZSBjdXJyZW50IHZhbHVlIGF0b21pY2FsbHkuXG4gKiBAcmV0dXJucyBBIHBsYWNlaG9sZGVyIHZhbHVlIGZvciBtb2RpZnlpbmcgZGF0YSBhdG9taWNhbGx5IHNlcnZlci1zaWRlLlxuICovXG5mdW5jdGlvbiBpbmNyZW1lbnQoZGVsdGEpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICAnLnN2Jzoge1xuICAgICAgICAgICAgJ2luY3JlbWVudCc6IGRlbHRhXG4gICAgICAgIH1cbiAgICB9O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHR5cGUgZm9yIHRoZSByZXNvbHZlIHZhbHVlIG9mIHtAbGluayBydW5UcmFuc2FjdGlvbn0uXG4gKi9cbmNsYXNzIFRyYW5zYWN0aW9uUmVzdWx0IHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBXaGV0aGVyIHRoZSB0cmFuc2FjdGlvbiB3YXMgc3VjY2Vzc2Z1bGx5IGNvbW1pdHRlZC4gKi9cbiAgICBjb21taXR0ZWQsIFxuICAgIC8qKiBUaGUgcmVzdWx0aW5nIGRhdGEgc25hcHNob3QuICovXG4gICAgc25hcHNob3QpIHtcbiAgICAgICAgdGhpcy5jb21taXR0ZWQgPSBjb21taXR0ZWQ7XG4gICAgICAgIHRoaXMuc25hcHNob3QgPSBzbmFwc2hvdDtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSBKU09OLXNlcmlhbGl6YWJsZSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIG9iamVjdC4gKi9cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7IGNvbW1pdHRlZDogdGhpcy5jb21taXR0ZWQsIHNuYXBzaG90OiB0aGlzLnNuYXBzaG90LnRvSlNPTigpIH07XG4gICAgfVxufVxuLyoqXG4gKiBBdG9taWNhbGx5IG1vZGlmaWVzIHRoZSBkYXRhIGF0IHRoaXMgbG9jYXRpb24uXG4gKlxuICogQXRvbWljYWxseSBtb2RpZnkgdGhlIGRhdGEgYXQgdGhpcyBsb2NhdGlvbi4gVW5saWtlIGEgbm9ybWFsIGBzZXQoKWAsIHdoaWNoXG4gKiBqdXN0IG92ZXJ3cml0ZXMgdGhlIGRhdGEgcmVnYXJkbGVzcyBvZiBpdHMgcHJldmlvdXMgdmFsdWUsIGBydW5UcmFuc2FjdGlvbigpYCBpc1xuICogdXNlZCB0byBtb2RpZnkgdGhlIGV4aXN0aW5nIHZhbHVlIHRvIGEgbmV3IHZhbHVlLCBlbnN1cmluZyB0aGVyZSBhcmUgbm9cbiAqIGNvbmZsaWN0cyB3aXRoIG90aGVyIGNsaWVudHMgd3JpdGluZyB0byB0aGUgc2FtZSBsb2NhdGlvbiBhdCB0aGUgc2FtZSB0aW1lLlxuICpcbiAqIFRvIGFjY29tcGxpc2ggdGhpcywgeW91IHBhc3MgYHJ1blRyYW5zYWN0aW9uKClgIGFuIHVwZGF0ZSBmdW5jdGlvbiB3aGljaCBpc1xuICogdXNlZCB0byB0cmFuc2Zvcm0gdGhlIGN1cnJlbnQgdmFsdWUgaW50byBhIG5ldyB2YWx1ZS4gSWYgYW5vdGhlciBjbGllbnRcbiAqIHdyaXRlcyB0byB0aGUgbG9jYXRpb24gYmVmb3JlIHlvdXIgbmV3IHZhbHVlIGlzIHN1Y2Nlc3NmdWxseSB3cml0dGVuLCB5b3VyXG4gKiB1cGRhdGUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgYWdhaW4gd2l0aCB0aGUgbmV3IGN1cnJlbnQgdmFsdWUsIGFuZCB0aGVcbiAqIHdyaXRlIHdpbGwgYmUgcmV0cmllZC4gVGhpcyB3aWxsIGhhcHBlbiByZXBlYXRlZGx5IHVudGlsIHlvdXIgd3JpdGUgc3VjY2VlZHNcbiAqIHdpdGhvdXQgY29uZmxpY3Qgb3IgeW91IGFib3J0IHRoZSB0cmFuc2FjdGlvbiBieSBub3QgcmV0dXJuaW5nIGEgdmFsdWUgZnJvbVxuICogeW91ciB1cGRhdGUgZnVuY3Rpb24uXG4gKlxuICogTm90ZTogTW9kaWZ5aW5nIGRhdGEgd2l0aCBgc2V0KClgIHdpbGwgY2FuY2VsIGFueSBwZW5kaW5nIHRyYW5zYWN0aW9ucyBhdFxuICogdGhhdCBsb2NhdGlvbiwgc28gZXh0cmVtZSBjYXJlIHNob3VsZCBiZSB0YWtlbiBpZiBtaXhpbmcgYHNldCgpYCBhbmRcbiAqIGBydW5UcmFuc2FjdGlvbigpYCB0byB1cGRhdGUgdGhlIHNhbWUgZGF0YS5cbiAqXG4gKiBOb3RlOiBXaGVuIHVzaW5nIHRyYW5zYWN0aW9ucyB3aXRoIFNlY3VyaXR5IGFuZCBGaXJlYmFzZSBSdWxlcyBpbiBwbGFjZSwgYmVcbiAqIGF3YXJlIHRoYXQgYSBjbGllbnQgbmVlZHMgYC5yZWFkYCBhY2Nlc3MgaW4gYWRkaXRpb24gdG8gYC53cml0ZWAgYWNjZXNzIGluXG4gKiBvcmRlciB0byBwZXJmb3JtIGEgdHJhbnNhY3Rpb24uIFRoaXMgaXMgYmVjYXVzZSB0aGUgY2xpZW50LXNpZGUgbmF0dXJlIG9mXG4gKiB0cmFuc2FjdGlvbnMgcmVxdWlyZXMgdGhlIGNsaWVudCB0byByZWFkIHRoZSBkYXRhIGluIG9yZGVyIHRvIHRyYW5zYWN0aW9uYWxseVxuICogdXBkYXRlIGl0LlxuICpcbiAqIEBwYXJhbSByZWYgLSBUaGUgbG9jYXRpb24gdG8gYXRvbWljYWxseSBtb2RpZnkuXG4gKiBAcGFyYW0gdHJhbnNhY3Rpb25VcGRhdGUgLSBBIGRldmVsb3Blci1zdXBwbGllZCBmdW5jdGlvbiB3aGljaCB3aWxsIGJlIHBhc3NlZFxuICogdGhlIGN1cnJlbnQgZGF0YSBzdG9yZWQgYXQgdGhpcyBsb2NhdGlvbiAoYXMgYSBKYXZhU2NyaXB0IG9iamVjdCkuIFRoZVxuICogZnVuY3Rpb24gc2hvdWxkIHJldHVybiB0aGUgbmV3IHZhbHVlIGl0IHdvdWxkIGxpa2Ugd3JpdHRlbiAoYXMgYSBKYXZhU2NyaXB0XG4gKiBvYmplY3QpLiBJZiBgdW5kZWZpbmVkYCBpcyByZXR1cm5lZCAoaS5lLiB5b3UgcmV0dXJuIHdpdGggbm8gYXJndW1lbnRzKSB0aGVcbiAqIHRyYW5zYWN0aW9uIHdpbGwgYmUgYWJvcnRlZCBhbmQgdGhlIGRhdGEgYXQgdGhpcyBsb2NhdGlvbiB3aWxsIG5vdCBiZVxuICogbW9kaWZpZWQuXG4gKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9wdGlvbnMgb2JqZWN0IHRvIGNvbmZpZ3VyZSB0cmFuc2FjdGlvbnMuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IGNhbiBvcHRpb25hbGx5IGJlIHVzZWQgaW5zdGVhZCBvZiB0aGUgYG9uQ29tcGxldGVgXG4gKiBjYWxsYmFjayB0byBoYW5kbGUgc3VjY2VzcyBhbmQgZmFpbHVyZS5cbiAqL1xuZnVuY3Rpb24gcnVuVHJhbnNhY3Rpb24ocmVmLCBcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG50cmFuc2FjdGlvblVwZGF0ZSwgb3B0aW9ucykge1xuICAgIHZhciBfYTtcbiAgICByZWYgPSBnZXRNb2R1bGFySW5zdGFuY2UocmVmKTtcbiAgICB2YWxpZGF0ZVdyaXRhYmxlUGF0aCgnUmVmZXJlbmNlLnRyYW5zYWN0aW9uJywgcmVmLl9wYXRoKTtcbiAgICBpZiAocmVmLmtleSA9PT0gJy5sZW5ndGgnIHx8IHJlZi5rZXkgPT09ICcua2V5cycpIHtcbiAgICAgICAgdGhyb3cgKCdSZWZlcmVuY2UudHJhbnNhY3Rpb24gZmFpbGVkOiAnICsgcmVmLmtleSArICcgaXMgYSByZWFkLW9ubHkgb2JqZWN0LicpO1xuICAgIH1cbiAgICBjb25zdCBhcHBseUxvY2FsbHkgPSAoX2EgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuYXBwbHlMb2NhbGx5KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB0cnVlO1xuICAgIGNvbnN0IGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XG4gICAgY29uc3QgcHJvbWlzZUNvbXBsZXRlID0gKGVycm9yLCBjb21taXR0ZWQsIG5vZGUpID0+IHtcbiAgICAgICAgbGV0IGRhdGFTbmFwc2hvdCA9IG51bGw7XG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRhdGFTbmFwc2hvdCA9IG5ldyBEYXRhU25hcHNob3Qobm9kZSwgbmV3IFJlZmVyZW5jZUltcGwocmVmLl9yZXBvLCByZWYuX3BhdGgpLCBQUklPUklUWV9JTkRFWCk7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKG5ldyBUcmFuc2FjdGlvblJlc3VsdChjb21taXR0ZWQsIGRhdGFTbmFwc2hvdCkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvLyBBZGQgYSB3YXRjaCB0byBtYWtlIHN1cmUgd2UgZ2V0IHNlcnZlciB1cGRhdGVzLlxuICAgIGNvbnN0IHVud2F0Y2hlciA9IG9uVmFsdWUocmVmLCAoKSA9PiB7IH0pO1xuICAgIHJlcG9TdGFydFRyYW5zYWN0aW9uKHJlZi5fcmVwbywgcmVmLl9wYXRoLCB0cmFuc2FjdGlvblVwZGF0ZSwgcHJvbWlzZUNvbXBsZXRlLCB1bndhdGNoZXIsIGFwcGx5TG9jYWxseSk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5QZXJzaXN0ZW50Q29ubmVjdGlvbjtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5QZXJzaXN0ZW50Q29ubmVjdGlvbi5wcm90b3R5cGUuc2ltcGxlTGlzdGVuID0gZnVuY3Rpb24gKHBhdGhTdHJpbmcsIG9uQ29tcGxldGUpIHtcbiAgICB0aGlzLnNlbmRSZXF1ZXN0KCdxJywgeyBwOiBwYXRoU3RyaW5nIH0sIG9uQ29tcGxldGUpO1xufTtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5QZXJzaXN0ZW50Q29ubmVjdGlvbi5wcm90b3R5cGUuZWNobyA9IGZ1bmN0aW9uIChkYXRhLCBvbkVjaG8pIHtcbiAgICB0aGlzLnNlbmRSZXF1ZXN0KCdlY2hvJywgeyBkOiBkYXRhIH0sIG9uRWNobyk7XG59O1xuLy8gUmVhbFRpbWVDb25uZWN0aW9uIHByb3BlcnRpZXMgdGhhdCB3ZSB1c2UgaW4gdGVzdHMuXG5Db25uZWN0aW9uO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuY29uc3QgaGlqYWNrSGFzaCA9IGZ1bmN0aW9uIChuZXdIYXNoKSB7XG4gICAgY29uc3Qgb2xkUHV0ID0gUGVyc2lzdGVudENvbm5lY3Rpb24ucHJvdG90eXBlLnB1dDtcbiAgICBQZXJzaXN0ZW50Q29ubmVjdGlvbi5wcm90b3R5cGUucHV0ID0gZnVuY3Rpb24gKHBhdGhTdHJpbmcsIGRhdGEsIG9uQ29tcGxldGUsIGhhc2gpIHtcbiAgICAgICAgaWYgKGhhc2ggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGFzaCA9IG5ld0hhc2goKTtcbiAgICAgICAgfVxuICAgICAgICBvbGRQdXQuY2FsbCh0aGlzLCBwYXRoU3RyaW5nLCBkYXRhLCBvbkNvbXBsZXRlLCBoYXNoKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIFBlcnNpc3RlbnRDb25uZWN0aW9uLnByb3RvdHlwZS5wdXQgPSBvbGRQdXQ7XG4gICAgfTtcbn07XG5SZXBvSW5mbztcbi8qKlxuICogRm9yY2VzIHRoZSBSZXBvTWFuYWdlciB0byBjcmVhdGUgUmVwb3MgdGhhdCB1c2UgUmVhZG9ubHlSZXN0Q2xpZW50IGluc3RlYWQgb2YgUGVyc2lzdGVudENvbm5lY3Rpb24uXG4gKiBAaW50ZXJuYWxcbiAqL1xuY29uc3QgZm9yY2VSZXN0Q2xpZW50ID0gZnVuY3Rpb24gKGZvcmNlUmVzdENsaWVudCkge1xuICAgIHJlcG9NYW5hZ2VyRm9yY2VSZXN0Q2xpZW50KGZvcmNlUmVzdENsaWVudCk7XG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBVc2VkIGJ5IGNvbnNvbGUgdG8gY3JlYXRlIGEgZGF0YWJhc2UgYmFzZWQgb24gdGhlIGFwcCxcbiAqIHBhc3NlZCBkYXRhYmFzZSBVUkwgYW5kIGEgY3VzdG9tIGF1dGggaW1wbGVtZW50YXRpb24uXG4gKiBAaW50ZXJuYWxcbiAqIEBwYXJhbSBhcHAgLSBBIHZhbGlkIEZpcmViYXNlQXBwLWxpa2Ugb2JqZWN0XG4gKiBAcGFyYW0gdXJsIC0gQSB2YWxpZCBGaXJlYmFzZSBkYXRhYmFzZVVSTFxuICogQHBhcmFtIHZlcnNpb24gLSBjdXN0b20gdmVyc2lvbiBlLmcuIGZpcmViYXNlLWFkbWluIHZlcnNpb25cbiAqIEBwYXJhbSBjdXN0b21BcHBDaGVja0ltcGwgLSBjdXN0b20gYXBwIGNoZWNrIGltcGxlbWVudGF0aW9uXG4gKiBAcGFyYW0gY3VzdG9tQXV0aEltcGwgLSBjdXN0b20gYXV0aCBpbXBsZW1lbnRhdGlvblxuICovXG5mdW5jdGlvbiBfaW5pdFN0YW5kYWxvbmUoeyBhcHAsIHVybCwgdmVyc2lvbiwgY3VzdG9tQXV0aEltcGwsIGN1c3RvbUFwcENoZWNrSW1wbCwgbm9kZUFkbWluID0gZmFsc2UgfSkge1xuICAgIHNldFNES1ZlcnNpb24odmVyc2lvbik7XG4gICAgLyoqXG4gICAgICogQ29tcG9uZW50Q29udGFpbmVyKCdkYXRhYmFzZS1zdGFuZGFsb25lJykgaXMganVzdCBhIHBsYWNlaG9sZGVyIHRoYXQgZG9lc24ndCBwZXJmb3JtXG4gICAgICogYW55IGFjdHVhbCBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBjb25zdCBjb21wb25lbnRDb250YWluZXIgPSBuZXcgQ29tcG9uZW50Q29udGFpbmVyKCdkYXRhYmFzZS1zdGFuZGFsb25lJyk7XG4gICAgY29uc3QgYXV0aFByb3ZpZGVyID0gbmV3IFByb3ZpZGVyKCdhdXRoLWludGVybmFsJywgY29tcG9uZW50Q29udGFpbmVyKTtcbiAgICBsZXQgYXBwQ2hlY2tQcm92aWRlcjtcbiAgICBpZiAoY3VzdG9tQXBwQ2hlY2tJbXBsKSB7XG4gICAgICAgIGFwcENoZWNrUHJvdmlkZXIgPSBuZXcgUHJvdmlkZXIoJ2FwcC1jaGVjay1pbnRlcm5hbCcsIGNvbXBvbmVudENvbnRhaW5lcik7XG4gICAgICAgIGFwcENoZWNrUHJvdmlkZXIuc2V0Q29tcG9uZW50KG5ldyBDb21wb25lbnQoJ2FwcC1jaGVjay1pbnRlcm5hbCcsICgpID0+IGN1c3RvbUFwcENoZWNrSW1wbCwgXCJQUklWQVRFXCIgLyogQ29tcG9uZW50VHlwZS5QUklWQVRFICovKSk7XG4gICAgfVxuICAgIGF1dGhQcm92aWRlci5zZXRDb21wb25lbnQobmV3IENvbXBvbmVudCgnYXV0aC1pbnRlcm5hbCcsICgpID0+IGN1c3RvbUF1dGhJbXBsLCBcIlBSSVZBVEVcIiAvKiBDb21wb25lbnRUeXBlLlBSSVZBVEUgKi8pKTtcbiAgICByZXR1cm4gcmVwb01hbmFnZXJEYXRhYmFzZUZyb21BcHAoYXBwLCBhdXRoUHJvdmlkZXIsIGFwcENoZWNrUHJvdmlkZXIsIHVybCwgbm9kZUFkbWluKTtcbn1cblxuLyoqXG4gKiBGaXJlYmFzZSBSZWFsdGltZSBEYXRhYmFzZVxuICpcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICovXG5yZWdpc3RlckRhdGFiYXNlKCk7XG5cbmV4cG9ydCB7IERhdGFTbmFwc2hvdCwgRGF0YWJhc2UsIE9uRGlzY29ubmVjdCwgUXVlcnlDb25zdHJhaW50LCBUcmFuc2FjdGlvblJlc3VsdCwgUXVlcnlJbXBsIGFzIF9RdWVyeUltcGwsIFF1ZXJ5UGFyYW1zIGFzIF9RdWVyeVBhcmFtcywgUmVmZXJlbmNlSW1wbCBhcyBfUmVmZXJlbmNlSW1wbCwgZm9yY2VSZXN0Q2xpZW50IGFzIF9URVNUX0FDQ0VTU19mb3JjZVJlc3RDbGllbnQsIGhpamFja0hhc2ggYXMgX1RFU1RfQUNDRVNTX2hpamFja0hhc2gsIF9pbml0U3RhbmRhbG9uZSwgcmVwb01hbmFnZXJEYXRhYmFzZUZyb21BcHAgYXMgX3JlcG9NYW5hZ2VyRGF0YWJhc2VGcm9tQXBwLCBzZXRTREtWZXJzaW9uIGFzIF9zZXRTREtWZXJzaW9uLCB2YWxpZGF0ZVBhdGhTdHJpbmcgYXMgX3ZhbGlkYXRlUGF0aFN0cmluZywgdmFsaWRhdGVXcml0YWJsZVBhdGggYXMgX3ZhbGlkYXRlV3JpdGFibGVQYXRoLCBjaGlsZCwgY29ubmVjdERhdGFiYXNlRW11bGF0b3IsIGVuYWJsZUxvZ2dpbmcsIGVuZEF0LCBlbmRCZWZvcmUsIGVxdWFsVG8sIGZvcmNlTG9uZ1BvbGxpbmcsIGZvcmNlV2ViU29ja2V0cywgZ2V0LCBnZXREYXRhYmFzZSwgZ29PZmZsaW5lLCBnb09ubGluZSwgaW5jcmVtZW50LCBsaW1pdFRvRmlyc3QsIGxpbWl0VG9MYXN0LCBvZmYsIG9uQ2hpbGRBZGRlZCwgb25DaGlsZENoYW5nZWQsIG9uQ2hpbGRNb3ZlZCwgb25DaGlsZFJlbW92ZWQsIG9uRGlzY29ubmVjdCwgb25WYWx1ZSwgb3JkZXJCeUNoaWxkLCBvcmRlckJ5S2V5LCBvcmRlckJ5UHJpb3JpdHksIG9yZGVyQnlWYWx1ZSwgcHVzaCwgcXVlcnksIHJlZiwgcmVmRnJvbVVSTCwgcmVtb3ZlLCBydW5UcmFuc2FjdGlvbiwgc2VydmVyVGltZXN0YW1wLCBzZXQsIHNldFByaW9yaXR5LCBzZXRXaXRoUHJpb3JpdHksIHN0YXJ0QWZ0ZXIsIHN0YXJ0QXQsIHVwZGF0ZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsImltcG9ydCBhcHAgZnJvbSBcIi4uL2ZpcmViYXNlQ29uZmlnXCI7XG5pbXBvcnQgeyBnZXREYXRhYmFzZSwgcmVmLCBzZXQsIHB1c2gsIGdldCwgcmVtb3ZlIH0gZnJvbSBcImZpcmViYXNlL2RhdGFiYXNlXCI7XG5cbmNsYXNzIEZpcmViYXNlRmV0Y2gge1xuICBhc3luYyBmZXRjaERhdGEoKSB7XG4gICAgY29uc3QgZGIgPSBnZXREYXRhYmFzZShhcHApO1xuICAgIGNvbnN0IGRiUmVmID0gcmVmKGRiLCBcIi9leGN1cnNpb25zXCIpO1xuICAgIGxldCByZXN1bHRBcnJheSA9IFtdO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0KGRiUmVmKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHNuYXBzaG90LnZhbCgpO1xuICAgICAgZm9yIChjb25zdCBrZXkgaW4gcmVzdWx0KSB7XG4gICAgICAgIGNvbnN0IG5ld09iaiA9IHtcbiAgICAgICAgICBpZDoga2V5LFxuICAgICAgICAgIC4uLnJlc3VsdFtrZXldLFxuICAgICAgICB9O1xuXG4gICAgICAgIHJlc3VsdEFycmF5LnB1c2gobmV3T2JqKTtcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKFwiRGF0YSBmZXRjaGVkIHN1Y2Nlc3NmdWxseSFcIik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRkVUQ0ggLSBmYWlsZWQsIHN0YXR1czogJHtlcnJvcn1gKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0QXJyYXk7XG4gIH1cblxuICBhc3luYyBwdXNoRGF0YShvYmopIHtcbiAgICBjb25zdCBkYiA9IGdldERhdGFiYXNlKGFwcCk7XG4gICAgY29uc3QgZGJSZWYgPSByZWYoZGIsIFwiL2V4Y3Vyc2lvbnNcIik7XG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgcHVzaChkYlJlZiwgb2JqKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiRGF0YSBwdXNoZWQgc3VjY2Vzc2Z1bGx5IVwiKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBQVVNIIC0gZmFpbGVkLCBzdGF0dXM6ICR7ZXJyb3J9YCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcmVtb3ZlRGF0YShpZCkge1xuICAgIGNvbnN0IGRiID0gZ2V0RGF0YWJhc2UoYXBwKTtcbiAgICBjb25zdCBkYlJlZiA9IHJlZihkYiwgYC9leGN1cnNpb25zLyR7aWR9YCk7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHJlbW92ZShkYlJlZik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgUkVNT1ZFIC0gZmFpbGVkLCBzdGF0dXM6ICR7ZXJyb3J9YCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlRGF0YShpZCwgb2JqKSB7XG4gICAgY29uc3QgZGIgPSBnZXREYXRhYmFzZShhcHApO1xuICAgIGNvbnN0IGRiUmVmID0gcmVmKGRiLCBgL2V4Y3Vyc2lvbnMvJHtpZH1gKTtcblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBzZXQoZGJSZWYsIG9iaik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVVBEQVRFIC0gZmFpbGVkLCBzdGF0dXM6ICR7ZXJyb3J9YCk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZpcmViYXNlRmV0Y2g7XG4iLCJpbXBvcnQgXCIuLy4uL2Nzcy9yZXNldC5jc3NcIjtcbmltcG9ydCBcIi4vLi4vY3NzL2NsaWVudC9mb250cy5jc3NcIjtcbmltcG9ydCBcIi4vLi4vY3NzL2NsaWVudC9nbG9iYWwuY3NzXCI7XG5pbXBvcnQgXCIuLy4uL2Nzcy9jbGllbnQvbW9iaWxlLmNzc1wiO1xuaW1wb3J0IFwiLi8uLi9jc3MvY2xpZW50L2Rlc2t0b3AuY3NzXCI7XG5pbXBvcnQgXCIuLy4uL2Nzcy9jbGllbnQvYmFza2V0L2Jhc2tldC1mb250cy5jc3NcIjtcbmltcG9ydCBcIi4vLi4vY3NzL2NsaWVudC9iYXNrZXQvYmFza2V0LmNzc1wiO1xuXG5pbXBvcnQgRmlyZWJhc2VGZXRjaCBmcm9tIFwiLi9GaXJlYmFzZUZldGNoXCI7XG5pbXBvcnQgVmFsaWRhdGlvbiBmcm9tIFwiLi9WYWxpZGF0aW9uXCI7XG5pbXBvcnQgTmF2YmFyQ1NTIGZyb20gXCIuL25hdmJhckNTU1wiO1xuXG5jb25zdCBiYXNrZXQgPSBbXTtcblxuY29uc3QgZmlyZWJhc2VGZXRjaCA9IG5ldyBGaXJlYmFzZUZldGNoKCk7XG5jb25zdCB2YWxpZGF0aW9uID0gbmV3IFZhbGlkYXRpb24oYmFza2V0KTtcbmNvbnN0IG5hdmJhckNTUyA9IG5ldyBOYXZiYXJDU1MoKTtcblxuY29uc29sZS5sb2coXCJjbGllbnRcIik7XG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBpbml0KTtcblxuYXN5bmMgZnVuY3Rpb24gaW5pdCgpIHtcbiAgbmF2YmFyQ1NTLm1hbmFnZU5hdmJhcigpO1xuXG4gIGNvbnN0IGV4Y3Vyc2lvbnNMaXN0ID0gYXdhaXQgZmlyZWJhc2VGZXRjaC5mZXRjaERhdGEoKTtcbiAgc2hvd0V4Y3Vyc2lvbnMoZXhjdXJzaW9uc0xpc3QpO1xuXG4gIGNvbnN0IGV4Y3Vyc2lvbnNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmV4Y3Vyc2lvbnNcIik7XG4gIGV4Y3Vyc2lvbnNDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBtYW5hZ2VCYXNrZXQpO1xuXG4gIGNvbnN0IGJhc2tldE9yZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5iYXNrZXRfX29yZGVyXCIpO1xuICBiYXNrZXRPcmRlci5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHBsYWNlT3JkZXIpO1xufVxuXG5mdW5jdGlvbiBzaG93RXhjdXJzaW9ucyhleGN1cnNpb25zTGlzdCkge1xuICBjb25zdCBwYW5lbEV4Y3Vyc2lvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBhbmVsX19leGN1cnNpb25zXCIpO1xuXG4gIGV4Y3Vyc2lvbnNMaXN0LmZvckVhY2goKGV4Y3Vyc2lvbikgPT4ge1xuICAgIGNvbnN0IHsgZXhjdXJzaW9uVGVtcGxhdGUsIG5hbWUsIGRlc2NyaXB0aW9uLCBhZHVsdHNQcmljZSwgY2hpbGRyZW5QcmljZSB9ID1cbiAgICAgIHVzZUV4Y3Vyc2lvblRlbXBsYXRlKCk7XG5cbiAgICBleGN1cnNpb25UZW1wbGF0ZS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBleGN1cnNpb24uaWQpO1xuICAgIG5hbWUuaW5uZXJUZXh0ID0gZXhjdXJzaW9uLm5hbWU7XG4gICAgZGVzY3JpcHRpb24uaW5uZXJUZXh0ID0gZXhjdXJzaW9uLmRlc2NyaXB0aW9uO1xuICAgIGFkdWx0c1ByaWNlLmlubmVyVGV4dCA9IGV4Y3Vyc2lvbi5hZHVsdHNQcmljZTtcbiAgICBjaGlsZHJlblByaWNlLmlubmVyVGV4dCA9IGV4Y3Vyc2lvbi5jaGlsZHJlblByaWNlO1xuXG4gICAgcGFuZWxFeGN1cnNpb25zLmFwcGVuZENoaWxkKGV4Y3Vyc2lvblRlbXBsYXRlKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHVzZUV4Y3Vyc2lvblRlbXBsYXRlKCkge1xuICBjb25zdCBleGN1cnNpb25UZW1wbGF0ZSA9IGRvY3VtZW50XG4gICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZXhjdXJzaW9uc19faXRlbS0tcHJvdG90eXBlXCIpXG4gICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgZXhjdXJzaW9uVGVtcGxhdGUuY2xhc3NMaXN0LnJlbW92ZShcImV4Y3Vyc2lvbnNfX2l0ZW0tLXByb3RvdHlwZVwiKTtcbiAgY29uc3QgbmFtZSA9IGV4Y3Vyc2lvblRlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoXCIuZXhjdXJzaW9uc19fbmFtZVwiKTtcbiAgY29uc3QgZGVzY3JpcHRpb24gPSBleGN1cnNpb25UZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKFxuICAgIFwiLmV4Y3Vyc2lvbnNfX2Rlc2NyaXB0aW9uXCJcbiAgKTtcbiAgY29uc3QgcHJpY2UgPSBleGN1cnNpb25UZW1wbGF0ZS5xdWVyeVNlbGVjdG9yQWxsKFwiLmV4Y3Vyc2lvbnNfX3ByaWNlXCIpO1xuICBjb25zdCBbYWR1bHRzUHJpY2UsIGNoaWxkcmVuUHJpY2VdID0gcHJpY2U7XG5cbiAgcmV0dXJuIHsgZXhjdXJzaW9uVGVtcGxhdGUsIG5hbWUsIGRlc2NyaXB0aW9uLCBhZHVsdHNQcmljZSwgY2hpbGRyZW5QcmljZSB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBtYW5hZ2VCYXNrZXQoZXZ0KSB7XG4gIGF3YWl0IGFkZEl0ZW1Ub0Jhc2tldChldnQpO1xuICBzaG93SXRlbXNRdWFudGl0eSgpO1xuICBzaG93QmFza2V0SXRlbXMoKTtcbiAgY2xlYXJUaWNrZXRzSW5wdXQoKTtcbiAgc2hvd09yZGVyVG90YWxQcmljZSgpO1xuICBiYXNrZXRJdGVtUmVtb3ZhbCgpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBhZGRJdGVtVG9CYXNrZXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIGNvbnN0IHsgYmFza2V0VmFsaWRhdGlvbiB9ID0gdmFsaWRhdGlvbjtcbiAgY29uc3QgYmFza2V0VmFsaWRhdGlvblJlc3VsdCA9IGJhc2tldFZhbGlkYXRpb24oZXZ0KTtcbiAgaWYgKGJhc2tldFZhbGlkYXRpb25SZXN1bHQgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuO1xuICB9IGVsc2Uge1xuICAgIGhpZGVTdWJtaXRUaWNrZXRzRXJyb3IoKTtcbiAgfVxuXG4gIGNvbnN0IHsgc2VsZWN0ZWRFeGN1cnNpb24gfSA9IGF3YWl0IG1hdGNoRXhjdXJzaW9uc0lEKGV2dCk7XG5cbiAgY29uc3QgeyBhZHVsdHNUaWNrZXRBbW91bnQsIGNoaWxkcmVuVGlja2V0QW1vdW50IH0gPSBnZXRUaWNrZXRBbW91bnQoZXZ0KTtcblxuICBpZiAoaXNFeGN1cnNpb25JbkJhc2tldChzZWxlY3RlZEV4Y3Vyc2lvbikpIHtcbiAgICB1cGRhdGVCYXNrZXQoc2VsZWN0ZWRFeGN1cnNpb24sIGFkdWx0c1RpY2tldEFtb3VudCwgY2hpbGRyZW5UaWNrZXRBbW91bnQpO1xuICB9IGVsc2Uge1xuICAgIGFkZE5ld0l0ZW1Ub0Jhc2tldChcbiAgICAgIHNlbGVjdGVkRXhjdXJzaW9uLFxuICAgICAgYWR1bHRzVGlja2V0QW1vdW50LFxuICAgICAgY2hpbGRyZW5UaWNrZXRBbW91bnRcbiAgICApO1xuICB9XG59XG5cbmZ1bmN0aW9uIHNob3dJdGVtc1F1YW50aXR5KCkge1xuICBjb25zdCBiYXNrZXRCdG5RdWFudGl0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYmFza2V0LWJ0bl9fcXVhbnRpdHlcIik7XG5cbiAgaWYgKGJhc2tldC5sZW5ndGggPiAwKSB7XG4gICAgYmFza2V0QnRuUXVhbnRpdHkuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuICB9IGVsc2Uge1xuICAgIGJhc2tldEJ0blF1YW50aXR5LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgfVxuXG4gIGNvbnN0IGl0ZW1zUXVhbnRpdHkgPSBiYXNrZXQubGVuZ3RoO1xuICBiYXNrZXRCdG5RdWFudGl0eS5pbm5lclRleHQgPSBgJHtpdGVtc1F1YW50aXR5fWA7XG59XG5cbmZ1bmN0aW9uIHNob3dCYXNrZXRJdGVtcygpIHtcbiAgY29uc3QgaXRlbXNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5pdGVtcy1saXN0XCIpO1xuXG4gIGNsZWFyU2hvd25TdW1tYXJ5KGl0ZW1zTGlzdCk7XG5cbiAgYmFza2V0LmZvckVhY2goKGJhc2tldEl0ZW0pID0+IHtcbiAgICBjb25zdCB7XG4gICAgICBpdGVtTGlzdEl0ZW1UZW1wbGF0ZSxcbiAgICAgIG5hbWUsXG4gICAgICBwcmljZXNBZHVsdHMsXG4gICAgICBwcmljZXNDaGlsZHJlbixcbiAgICAgIGl0ZW1Ub3RhbFByaWNlLFxuICAgIH0gPSB1c2VJdGVtTGlzdEl0ZW1UZW1wbGF0ZSgpO1xuXG4gICAgaXRlbUxpc3RJdGVtVGVtcGxhdGUuc2V0QXR0cmlidXRlKFwiaWRcIiwgYmFza2V0SXRlbS5pZCk7XG4gICAgbmFtZS5pbm5lclRleHQgPSBiYXNrZXRJdGVtLm5hbWU7XG4gICAgc2hvd0l0ZW1QcmljZXMoYmFza2V0SXRlbSwgcHJpY2VzQWR1bHRzLCBwcmljZXNDaGlsZHJlbik7XG4gICAgc2hvd0l0ZW1Ub3RhbFByaWNlKGJhc2tldEl0ZW0sIGl0ZW1Ub3RhbFByaWNlKTtcbiAgICBpdGVtc0xpc3QuYXBwZW5kQ2hpbGQoaXRlbUxpc3RJdGVtVGVtcGxhdGUpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gb3JkZXJUb3RhbFByaWNlKCkge1xuICBsZXQgdG90YWxQcmljZSA9IDA7XG5cbiAgYmFza2V0LmZvckVhY2goKGJhc2tldEl0ZW0pID0+IHtcbiAgICBjb25zdCB7XG4gICAgICBhZHVsdHNUaWNrZXRBbW91bnQsXG4gICAgICBjaGlsZHJlblRpY2tldEFtb3VudCxcbiAgICAgIGFkdWx0c1ByaWNlLFxuICAgICAgY2hpbGRyZW5QcmljZSxcbiAgICB9ID0gcGFyc2VJbnRCYXNrZXREYXRhKGJhc2tldEl0ZW0pO1xuXG4gICAgdG90YWxQcmljZSArPVxuICAgICAgYWR1bHRzVGlja2V0QW1vdW50ICogYWR1bHRzUHJpY2UgKyBjaGlsZHJlblRpY2tldEFtb3VudCAqIGNoaWxkcmVuUHJpY2U7XG4gIH0pO1xuXG4gIHJldHVybiB7IHRvdGFsUHJpY2UgfTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlT3JkZXJPYmooYmFza2V0LCBuYW1lLCBlbWFpbCkge1xuICBjb25zdCBvcmRlck9iaiA9IHtcbiAgICB1c2VyTmFtZTogbmFtZSxcbiAgICB1c2VyRW1haWw6IGVtYWlsLFxuICAgIGJhc2tldDogYmFza2V0LFxuICB9O1xuICByZXR1cm4geyBvcmRlck9iaiB9O1xufVxuXG5mdW5jdGlvbiBzaG93T3JkZXJUb3RhbFByaWNlKCkge1xuICBjb25zdCB7IHRvdGFsUHJpY2UgfSA9IG9yZGVyVG90YWxQcmljZSgpO1xuXG4gIGNvbnN0IHRvdGFsUHJpY2VQbGFjZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG90YWwtcHJpY2VfX3ZhbHVlXCIpO1xuXG4gIHRvdGFsUHJpY2VQbGFjZS5pbm5lclRleHQgPSB0b3RhbFByaWNlICsgXCIgUExOXCI7XG59XG5cbmZ1bmN0aW9uIGNsZWFyU2hvd25TdW1tYXJ5KGl0ZW1zTGlzdCkge1xuICB3aGlsZSAoaXRlbXNMaXN0LmNoaWxkcmVuWzFdKSB7XG4gICAgaXRlbXNMaXN0LnJlbW92ZUNoaWxkKGl0ZW1zTGlzdC5jaGlsZHJlblsxXSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gdXNlSXRlbUxpc3RJdGVtVGVtcGxhdGUoKSB7XG4gIGNvbnN0IGl0ZW1MaXN0SXRlbVRlbXBsYXRlID0gZG9jdW1lbnRcbiAgICAucXVlcnlTZWxlY3RvcihcIi5pdGVtLWxpc3RfX2l0ZW0tLXByb3RvdHlwZVwiKVxuICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gIGl0ZW1MaXN0SXRlbVRlbXBsYXRlLmNsYXNzTGlzdC5yZW1vdmUoXCJpdGVtLWxpc3RfX2l0ZW0tLXByb3RvdHlwZVwiKTtcbiAgY29uc3QgbmFtZSA9IGl0ZW1MaXN0SXRlbVRlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoXCIuaXRlbV9fbmFtZVwiKTtcbiAgY29uc3QgaXRlbVByaWNlcyA9IGl0ZW1MaXN0SXRlbVRlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoXCIuaXRlbV9fcHJpY2VzXCIpO1xuXG4gIGNvbnN0IHByaWNlc0FkdWx0cyA9IGl0ZW1QcmljZXMucXVlcnlTZWxlY3RvcihcIi5wcmljZXNfX2FkdWx0c1wiKTtcbiAgY29uc3QgcHJpY2VzQ2hpbGRyZW4gPSBpdGVtUHJpY2VzLnF1ZXJ5U2VsZWN0b3IoXCIucHJpY2VzX19jaGlsZHJlblwiKTtcblxuICBjb25zdCBpdGVtVG90YWxQcmljZSA9XG4gICAgaXRlbUxpc3RJdGVtVGVtcGxhdGUucXVlcnlTZWxlY3RvcihcIi5pdGVtX190b3RhbC1wcmljZVwiKTtcblxuICByZXR1cm4ge1xuICAgIGl0ZW1MaXN0SXRlbVRlbXBsYXRlLFxuICAgIG5hbWUsXG4gICAgcHJpY2VzQWR1bHRzLFxuICAgIHByaWNlc0NoaWxkcmVuLFxuICAgIGl0ZW1Ub3RhbFByaWNlLFxuICB9O1xufVxuXG5mdW5jdGlvbiBzaG93SXRlbVByaWNlcyhiYXNrZXRJdGVtLCBwcmljZXNBZHVsdHMsIHByaWNlc0NoaWxkcmVuKSB7XG4gIGNvbnN0IHsgYWR1bHRzVGlja2V0QW1vdW50LCBjaGlsZHJlblRpY2tldEFtb3VudCB9ID1cbiAgICBwYXJzZUludEJhc2tldERhdGEoYmFza2V0SXRlbSk7XG4gIGNvbnN0IHsgYWR1bHRzVGlja2V0VGV4dCwgY2hpbGRyZW5UaWNrZXRUZXh0IH0gPVxuICAgIGl0ZW1QcmljZXNUeHRUZW1wbGF0ZShiYXNrZXRJdGVtKTtcblxuICBpZiAoYWR1bHRzVGlja2V0QW1vdW50ICYmIGNoaWxkcmVuVGlja2V0QW1vdW50KSB7XG4gICAgcHJpY2VzQWR1bHRzLmlubmVyVGV4dCA9IGFkdWx0c1RpY2tldFRleHQ7XG4gICAgcHJpY2VzQ2hpbGRyZW4uaW5uZXJUZXh0ID0gY2hpbGRyZW5UaWNrZXRUZXh0O1xuICB9IGVsc2UgaWYgKGFkdWx0c1RpY2tldEFtb3VudCkge1xuICAgIHByaWNlc0FkdWx0cy5pbm5lclRleHQgPSBhZHVsdHNUaWNrZXRUZXh0O1xuICAgIHByaWNlc0NoaWxkcmVuLmlubmVyVGV4dCA9IFwiXCI7XG4gIH0gZWxzZSBpZiAoY2hpbGRyZW5UaWNrZXRBbW91bnQpIHtcbiAgICBwcmljZXNDaGlsZHJlbi5pbm5lclRleHQgPSBjaGlsZHJlblRpY2tldFRleHQ7XG4gICAgcHJpY2VzQWR1bHRzLmlubmVyVGV4dCA9IFwiXCI7XG4gIH1cbn1cblxuZnVuY3Rpb24gcGFyc2VJbnRCYXNrZXREYXRhKGJhc2tldEl0ZW0pIHtcbiAgbGV0IHsgYWR1bHRzVGlja2V0QW1vdW50LCBjaGlsZHJlblRpY2tldEFtb3VudCwgYWR1bHRzUHJpY2UsIGNoaWxkcmVuUHJpY2UgfSA9XG4gICAgYmFza2V0SXRlbTtcblxuICBhZHVsdHNUaWNrZXRBbW91bnQgPSBwYXJzZUludChhZHVsdHNUaWNrZXRBbW91bnQpO1xuICBjaGlsZHJlblRpY2tldEFtb3VudCA9IHBhcnNlSW50KGNoaWxkcmVuVGlja2V0QW1vdW50KTtcbiAgYWR1bHRzUHJpY2UgPSBwYXJzZUludChhZHVsdHNQcmljZSk7XG4gIGNoaWxkcmVuUHJpY2UgPSBwYXJzZUludChjaGlsZHJlblByaWNlKTtcblxuICByZXR1cm4ge1xuICAgIGFkdWx0c1RpY2tldEFtb3VudCxcbiAgICBjaGlsZHJlblRpY2tldEFtb3VudCxcbiAgICBhZHVsdHNQcmljZSxcbiAgICBjaGlsZHJlblByaWNlLFxuICB9O1xufVxuXG5mdW5jdGlvbiBpdGVtUHJpY2VzVHh0VGVtcGxhdGUoYmFza2V0SXRlbSkge1xuICBjb25zdCB7XG4gICAgYWR1bHRzVGlja2V0QW1vdW50LFxuICAgIGNoaWxkcmVuVGlja2V0QW1vdW50LFxuICAgIGFkdWx0c1ByaWNlLFxuICAgIGNoaWxkcmVuUHJpY2UsXG4gIH0gPSBiYXNrZXRJdGVtO1xuXG4gIGNvbnN0IGFkdWx0c1RpY2tldFRleHQgPSBgYWR1bHRzOlxuICAgJHthZHVsdHNUaWNrZXRBbW91bnR9IHggJHthZHVsdHNQcmljZX0gUExOYDtcbiAgY29uc3QgY2hpbGRyZW5UaWNrZXRUZXh0ID0gYGNoaWxkcmVuOlxuICAgJHtjaGlsZHJlblRpY2tldEFtb3VudH0geCAke2NoaWxkcmVuUHJpY2V9IFBMTmA7XG5cbiAgcmV0dXJuIHsgYWR1bHRzVGlja2V0VGV4dCwgY2hpbGRyZW5UaWNrZXRUZXh0IH07XG59XG5cbmZ1bmN0aW9uIHNob3dJdGVtVG90YWxQcmljZShiYXNrZXRJdGVtLCBpdGVtVG90YWxQcmljZSkge1xuICBjb25zdCB7XG4gICAgYWR1bHRzVGlja2V0QW1vdW50LFxuICAgIGNoaWxkcmVuVGlja2V0QW1vdW50LFxuICAgIGFkdWx0c1ByaWNlLFxuICAgIGNoaWxkcmVuUHJpY2UsXG4gIH0gPSBwYXJzZUludEJhc2tldERhdGEoYmFza2V0SXRlbSk7XG4gIGl0ZW1Ub3RhbFByaWNlLmlubmVyVGV4dCA9XG4gICAgYWR1bHRzVGlja2V0QW1vdW50ICogYWR1bHRzUHJpY2UgK1xuICAgIGNoaWxkcmVuVGlja2V0QW1vdW50ICogY2hpbGRyZW5QcmljZSArXG4gICAgXCIgUExOXCI7XG59XG5cbmZ1bmN0aW9uIGJhc2tldEl0ZW1SZW1vdmFsKCkge1xuICBjb25zdCBpdGVtc0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLml0ZW1zLWxpc3RcIik7XG4gIGNvbnN0IGRlbGV0ZUJ0biA9IGl0ZW1zTGlzdC5xdWVyeVNlbGVjdG9yQWxsKFwiLml0ZW1fX2J0bi1yZW1vdmVcIik7XG5cbiAgZGVsZXRlQnRuLmZvckVhY2goKGVsZSkgPT4ge1xuICAgIGVsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICByZW1vdmVCYXNrZXRJdGVtKGV2dCk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5hc3luYyBmdW5jdGlvbiBwbGFjZU9yZGVyKGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3QgeyBvcmRlclZhbGlkYXRpb24sIGNyZWF0ZVBsYWNlT3JkZXJWYXJpYWJsZXMgfSA9IHZhbGlkYXRpb247XG4gIGNvbnN0IG9yZGVyVmFsaWRhdGlvblJlc3VsdCA9IG9yZGVyVmFsaWRhdGlvbigpO1xuICBpZiAob3JkZXJWYWxpZGF0aW9uUmVzdWx0ID09PSBmYWxzZSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHsgbmFtZSwgZW1haWwgfSA9IGNyZWF0ZVBsYWNlT3JkZXJWYXJpYWJsZXMoKTtcbiAgY29uc3QgeyB0b3RhbFByaWNlIH0gPSBvcmRlclRvdGFsUHJpY2UoKTtcbiAgY29uc3QgeyBvcmRlck9iaiB9ID0gY3JlYXRlT3JkZXJPYmooYmFza2V0LCBuYW1lLCBlbWFpbCk7XG5cbiAgLy8gIHBsYWNlIGZvciBzYXZpbmcgZGF0YVxuICAvLyAgYXdhaXQgZmlyZWJhc2VGZXRjaC5wdXNoRGF0YShvcmRlck9iaik7XG5cbiAgYWxlcnQoXG4gICAgYFRoYW5rIHlvdSBmb3IgcGxhY2luZyBhbiBvcmRlciB3b3J0aCAke3RvdGFsUHJpY2V9IFBMTi4gVGhlIG9yZGVyIGRldGFpbHMgaGF2ZSBiZWVuIHNlbnQgdG8gdGhlIGZvbGxvd2luZyBlbWFpbCBhZGRyZXNzOiAke2VtYWlsfS5cbiAgICBcbiAgICBUaGlzIGlzIGEgZGVtby4gTm8gcGVyc29uYWwgZGF0YSB3YXMgY29sbGVjdGVkLlxuICAgIGBcbiAgKTtcbiAgbG9jYXRpb24ucmVsb2FkKCk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUJhc2tldEl0ZW0oZXZ0KSB7XG4gIGNvbnN0IHN1bW1hcnlJdGVtID0gZXZ0LnRhcmdldC5wYXJlbnRFbGVtZW50O1xuICBjb25zdCBpdGVtc0xpc3QgPSBzdW1tYXJ5SXRlbS5wYXJlbnRFbGVtZW50O1xuXG4gIGNvbnN0IGJhc2tldEl0ZW1JbmRleCA9IGJhc2tldC5maW5kSW5kZXgoKGJhc2tldEl0ZW0pID0+IHtcbiAgICByZXR1cm4gc3VtbWFyeUl0ZW0uaWQgPT09IGJhc2tldEl0ZW0uaWQ7XG4gIH0pO1xuXG4gIGJhc2tldC5zcGxpY2UoYmFza2V0SXRlbUluZGV4LCAxKTtcbiAgaXRlbXNMaXN0LnJlbW92ZUNoaWxkKHN1bW1hcnlJdGVtKTtcbiAgc2hvd0l0ZW1zUXVhbnRpdHkoKTtcbiAgc2hvd09yZGVyVG90YWxQcmljZSgpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBtYXRjaEV4Y3Vyc2lvbnNJRChldnQpIHtcbiAgY29uc3QgZXhjdXJzaW9uc0xpc3QgPSBhd2FpdCBmaXJlYmFzZUZldGNoLmZldGNoRGF0YSgpO1xuXG4gIGNvbnN0IGV4Y3Vyc2lvbklkID0gZXZ0LnRhcmdldC5wYXJlbnRFbGVtZW50LmlkO1xuICBjb25zdCBzZWxlY3RlZEV4Y3Vyc2lvbiA9IGV4Y3Vyc2lvbnNMaXN0LmZpbmQoKGV4Y3Vyc2lvbikgPT4ge1xuICAgIHJldHVybiBleGN1cnNpb24uaWQgPT09IGV4Y3Vyc2lvbklkO1xuICB9KTtcbiAgcmV0dXJuIHsgc2VsZWN0ZWRFeGN1cnNpb24gfTtcbn1cblxuZnVuY3Rpb24gZ2V0VGlja2V0QW1vdW50KGV2dCkge1xuICBsZXQgYWR1bHRzVGlja2V0QW1vdW50ID0gZXZ0LnRhcmdldC5xdWVyeVNlbGVjdG9yKFxuICAgIGBpbnB1dFtuYW1lID0gXCJhZHVsdHNcIl1gXG4gICkudmFsdWU7XG4gIGxldCBjaGlsZHJlblRpY2tldEFtb3VudCA9IGV2dC50YXJnZXQucXVlcnlTZWxlY3RvcihcbiAgICBgaW5wdXRbbmFtZSA9IFwiY2hpbGRyZW5cIl1gXG4gICkudmFsdWU7XG5cbiAgaWYgKCFhZHVsdHNUaWNrZXRBbW91bnQpIHtcbiAgICByZXR1cm4geyBjaGlsZHJlblRpY2tldEFtb3VudCB9O1xuICB9XG4gIGlmICghY2hpbGRyZW5UaWNrZXRBbW91bnQpIHtcbiAgICByZXR1cm4geyBhZHVsdHNUaWNrZXRBbW91bnQgfTtcbiAgfVxuXG4gIHJldHVybiB7IGFkdWx0c1RpY2tldEFtb3VudCwgY2hpbGRyZW5UaWNrZXRBbW91bnQgfTtcbn1cblxuZnVuY3Rpb24gaXNFeGN1cnNpb25JbkJhc2tldChzZWxlY3RlZEV4Y3Vyc2lvbikge1xuICByZXR1cm4gYmFza2V0LnNvbWUoKGV4Y3Vyc2lvbikgPT4ge1xuICAgIHJldHVybiBleGN1cnNpb24uaWQgPT09IHNlbGVjdGVkRXhjdXJzaW9uLmlkO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlQmFza2V0KFxuICBzZWxlY3RlZEV4Y3Vyc2lvbixcbiAgYWR1bHRzVGlja2V0QW1vdW50ID0gXCIwXCIsXG4gIGNoaWxkcmVuVGlja2V0QW1vdW50ID0gXCIwXCJcbikge1xuICBiYXNrZXQuZm9yRWFjaCgoYmFza2V0SXRlbSkgPT4ge1xuICAgIGlmIChiYXNrZXRJdGVtLmlkID09PSBzZWxlY3RlZEV4Y3Vyc2lvbi5pZCkge1xuICAgICAgYWRkQWR1bHRzVGlja2V0cyhiYXNrZXRJdGVtLCBhZHVsdHNUaWNrZXRBbW91bnQpO1xuICAgICAgYWRkQ2hpbGRyZW5UaWNrZXRzKGJhc2tldEl0ZW0sIGNoaWxkcmVuVGlja2V0QW1vdW50KTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBhZGROZXdJdGVtVG9CYXNrZXQoXG4gIHNlbGVjdGVkRXhjdXJzaW9uLFxuICBhZHVsdHNUaWNrZXRBbW91bnQgPSBcIjBcIixcbiAgY2hpbGRyZW5UaWNrZXRBbW91bnQgPSBcIjBcIlxuKSB7XG4gIGNvbnN0IG5ld0l0ZW0gPSB7XG4gICAgaWQ6IHNlbGVjdGVkRXhjdXJzaW9uLmlkLFxuICAgIG5hbWU6IHNlbGVjdGVkRXhjdXJzaW9uLm5hbWUsXG4gICAgYWR1bHRzUHJpY2U6IHNlbGVjdGVkRXhjdXJzaW9uLmFkdWx0c1ByaWNlLFxuICAgIGFkdWx0c1RpY2tldEFtb3VudDogYWR1bHRzVGlja2V0QW1vdW50LFxuICAgIGNoaWxkcmVuUHJpY2U6IHNlbGVjdGVkRXhjdXJzaW9uLmNoaWxkcmVuUHJpY2UsXG4gICAgY2hpbGRyZW5UaWNrZXRBbW91bnQ6IGNoaWxkcmVuVGlja2V0QW1vdW50LFxuICB9O1xuICBiYXNrZXQucHVzaChuZXdJdGVtKTtcbn1cblxuZnVuY3Rpb24gYWRkQWR1bHRzVGlja2V0cyhiYXNrZXRJdGVtLCBhZHVsdHNUaWNrZXRBbW91bnQpIHtcbiAgYmFza2V0SXRlbS5hZHVsdHNUaWNrZXRBbW91bnQgPSAoXG4gICAgcGFyc2VJbnQoYmFza2V0SXRlbS5hZHVsdHNUaWNrZXRBbW91bnQpICsgcGFyc2VJbnQoYWR1bHRzVGlja2V0QW1vdW50KVxuICApLnRvU3RyaW5nKCk7XG59XG5cbmZ1bmN0aW9uIGFkZENoaWxkcmVuVGlja2V0cyhiYXNrZXRJdGVtLCBjaGlsZHJlblRpY2tldEFtb3VudCkge1xuICBiYXNrZXRJdGVtLmNoaWxkcmVuVGlja2V0QW1vdW50ID0gKFxuICAgIHBhcnNlSW50KGJhc2tldEl0ZW0uY2hpbGRyZW5UaWNrZXRBbW91bnQpICsgcGFyc2VJbnQoY2hpbGRyZW5UaWNrZXRBbW91bnQpXG4gICkudG9TdHJpbmcoKTtcbn1cblxuZnVuY3Rpb24gaGlkZVN1Ym1pdFRpY2tldHNFcnJvcigpIHtcbiAgY29uc3QgcGFuZWxFeGN1cnNpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wYW5lbF9fZXhjdXJzaW9uc1wiKTtcbiAgY29uc3QgZXhjdXJzaW9uRXJyb3JMaXN0ID0gQXJyYXkuZnJvbShcbiAgICBwYW5lbEV4Y3Vyc2lvbnMucXVlcnlTZWxlY3RvckFsbChcIi5leGN1cnNpb25zX19maWVsZC1lcnJvclwiKVxuICApO1xuXG4gIGV4Y3Vyc2lvbkVycm9yTGlzdC5mb3JFYWNoKChlcnJvcikgPT4ge1xuICAgIGVycm9yLmlubmVyVGV4dCA9IFwiXCI7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBjbGVhclRpY2tldHNJbnB1dCgpIHtcbiAgY29uc3QgcGFuZWxFeGN1cnNpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wYW5lbF9fZXhjdXJzaW9uc1wiKTtcbiAgY29uc3QgdGlja2V0SW5wdXRMaXN0ID0gcGFuZWxFeGN1cnNpb25zLnF1ZXJ5U2VsZWN0b3JBbGwoXG4gICAgXCJpbnB1dDpub3QoW3R5cGUgPSAnc3VibWl0J10pXCJcbiAgKTtcblxuICB0aWNrZXRJbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICBpbnB1dC52YWx1ZSA9IFwiXCI7XG4gIH0pO1xufVxuIiwiY2xhc3MgVmFsaWRhdGlvbiB7XG4gIGNvbnN0cnVjdG9yKGJhc2tldCkge1xuICAgIHRoaXMuYmFza2V0ID0gYmFza2V0O1xuICB9XG5cbiAgYmFza2V0VmFsaWRhdGlvbiA9IChldnQpID0+IHtcbiAgICBjb25zdCBhZHVsdHNUaWNrZXRBbW91bnQgPSBldnQudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgaW5wdXRbbmFtZSA9IFwiYWR1bHRzXCJdYFxuICAgICkudmFsdWU7XG4gICAgY29uc3QgY2hpbGRyZW5UaWNrZXRBbW91bnQgPSBldnQudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgaW5wdXRbbmFtZSA9IFwiY2hpbGRyZW5cIl1gXG4gICAgKS52YWx1ZTtcblxuICAgIGNvbnN0IGlzVGlja2V0SW5wdXRWYWxpZCA9IHRoaXMudmFsaWRhdGVTdWJtaXRUaWNrZXRzKFxuICAgICAgZXZ0LFxuICAgICAgYWR1bHRzVGlja2V0QW1vdW50LFxuICAgICAgY2hpbGRyZW5UaWNrZXRBbW91bnRcbiAgICApO1xuXG4gICAgY29uc3QgaXNCYXNrZXRGdWxsID0gdGhpcy52YWxpZGF0ZUJhc2tldFNpemUoXG4gICAgICBldnQsXG4gICAgICBhZHVsdHNUaWNrZXRBbW91bnQsXG4gICAgICBjaGlsZHJlblRpY2tldEFtb3VudFxuICAgICk7XG5cbiAgICBpZiAoIWlzVGlja2V0SW5wdXRWYWxpZCB8fCBpc0Jhc2tldEZ1bGwpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICB2YWxpZGF0ZVN1Ym1pdFRpY2tldHMoZXZ0LCBhZHVsdHNUaWNrZXRBbW91bnQsIGNoaWxkcmVuVGlja2V0QW1vdW50KSB7XG4gICAgbGV0IGlzVmFsaWQgPSB0cnVlO1xuICAgIGNvbnN0IHJlZ2V4VmFsaWRhdG9yID0gL14oWzEtOV18WzEtOV1bMC05XXwxMDApJC87XG4gICAgY29uc3QgYWR1bHRzSW5wdXRFcnJvciA9IGV2dC50YXJnZXQucXVlcnlTZWxlY3RvcihgZGl2W25hbWUgPSBcImFkdWx0c1wiXWApO1xuICAgIGNvbnN0IGNoaWxkcmVuSW5wdXRFcnJvciA9IGV2dC50YXJnZXQucXVlcnlTZWxlY3RvcihcbiAgICAgIGBkaXZbbmFtZSA9IFwiY2hpbGRyZW5cIl1gXG4gICAgKTtcblxuICAgIGlmIChhZHVsdHNUaWNrZXRBbW91bnQgPT09IFwiXCIgJiYgY2hpbGRyZW5UaWNrZXRBbW91bnQgPT09IFwiXCIpIHtcbiAgICAgIGFkdWx0c0lucHV0RXJyb3IuaW5uZXJUZXh0ID0gXCJGaWxsIHVwIHRoZSBibGFuayBzcGFjZSFcIjtcbiAgICAgIGlzVmFsaWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoYWR1bHRzVGlja2V0QW1vdW50ICYmICFyZWdleFZhbGlkYXRvci50ZXN0KGFkdWx0c1RpY2tldEFtb3VudCkpIHtcbiAgICAgIGFkdWx0c0lucHV0RXJyb3IuaW5uZXJUZXh0ID0gXCJJbnZhbGlkIGRhdGEhXCI7XG4gICAgICBpc1ZhbGlkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKGNoaWxkcmVuVGlja2V0QW1vdW50ICYmICFyZWdleFZhbGlkYXRvci50ZXN0KGNoaWxkcmVuVGlja2V0QW1vdW50KSkge1xuICAgICAgY2hpbGRyZW5JbnB1dEVycm9yLmlubmVyVGV4dCA9IFwiSW52YWxpZCBkYXRhIVwiO1xuICAgICAgaXNWYWxpZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChpc1ZhbGlkKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHZhbGlkYXRlQmFza2V0U2l6ZShldnQsIGFkdWx0c1RpY2tldEFtb3VudCwgY2hpbGRyZW5UaWNrZXRBbW91bnQpIHtcbiAgICBsZXQgaXNCYXNrZXRGdWxsID0gZmFsc2U7XG4gICAgY29uc3Qgc3VibWl0VHJpcElEID0gZXZ0LnRhcmdldC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZShcImlkXCIpO1xuXG4gICAgdGhpcy5iYXNrZXQuZm9yRWFjaCgoYmFza2V0SXRlbSkgPT4ge1xuICAgICAgaWYgKGJhc2tldEl0ZW0uaWQgPT09IHN1Ym1pdFRyaXBJRCkge1xuICAgICAgICBjb25zdCBtYXhUaWNrZXRzID0gMTAwO1xuICAgICAgICBsZXQgc3VtID0gMDtcbiAgICAgICAgY29uc3QgdG9TdW1MaXN0ID0gW107XG5cbiAgICAgICAgaWYgKGJhc2tldEl0ZW0uYWR1bHRzVGlja2V0QW1vdW50KSB7XG4gICAgICAgICAgdG9TdW1MaXN0LnB1c2gocGFyc2VJbnQoYmFza2V0SXRlbS5hZHVsdHNUaWNrZXRBbW91bnQpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYmFza2V0SXRlbS5jaGlsZHJlblRpY2tldEFtb3VudCkge1xuICAgICAgICAgIHRvU3VtTGlzdC5wdXNoKHBhcnNlSW50KGJhc2tldEl0ZW0uY2hpbGRyZW5UaWNrZXRBbW91bnQpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWR1bHRzVGlja2V0QW1vdW50KSB7XG4gICAgICAgICAgdG9TdW1MaXN0LnB1c2gocGFyc2VJbnQoYWR1bHRzVGlja2V0QW1vdW50KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNoaWxkcmVuVGlja2V0QW1vdW50KSB7XG4gICAgICAgICAgdG9TdW1MaXN0LnB1c2gocGFyc2VJbnQoY2hpbGRyZW5UaWNrZXRBbW91bnQpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG9TdW1MaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgc3VtICs9IHRvU3VtTGlzdFtpXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzdW0gPiBtYXhUaWNrZXRzKSB7XG4gICAgICAgICAgaXNCYXNrZXRGdWxsID0gdHJ1ZTtcbiAgICAgICAgICBhbGVydChcIlRoZSBCYXNrZXQgaXMgZnVsbCFcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gaXNCYXNrZXRGdWxsO1xuICB9XG5cbiAgb3JkZXJWYWxpZGF0aW9uID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLmJhc2tldC5sZW5ndGggPT09IDApIHtcbiAgICAgIGFsZXJ0KGBUaGVyZSdyZSBubyBpdGVtcyBpbiB0aGUgYmFza2V0IWApO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGxldCBpc09yZGVyVmFsaWQgPSB0cnVlO1xuXG4gICAgY29uc3QgeyBuYW1lLCBlbWFpbCwgb3JkZXJFcnJvck5hbWUsIG9yZGVyRXJyb3JFbWFpbCB9ID1cbiAgICAgIHRoaXMuY3JlYXRlUGxhY2VPcmRlclZhcmlhYmxlcygpO1xuXG4gICAgaWYgKCF0aGlzLmlzQ2xpZW50TmFtZVZhbGlkKG5hbWUpKSB7XG4gICAgICBvcmRlckVycm9yTmFtZS5pbm5lclRleHQgPSBcIkluY29ycmVjdCBuYW1lLlwiO1xuICAgICAgaXNPcmRlclZhbGlkID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9yZGVyRXJyb3JOYW1lLmlubmVyVGV4dCA9IFwiXCI7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmlzQ2xpZW50RW1haWxWYWxpZChlbWFpbCkpIHtcbiAgICAgIG9yZGVyRXJyb3JFbWFpbC5pbm5lclRleHQgPSBcIkluY29ycmVjdCBlbWFpbC5cIjtcbiAgICAgIGlzT3JkZXJWYWxpZCA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcmRlckVycm9yRW1haWwuaW5uZXJUZXh0ID0gXCJcIjtcbiAgICB9XG5cbiAgICBpZiAoaXNPcmRlclZhbGlkKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfTtcblxuICBjcmVhdGVQbGFjZU9yZGVyVmFyaWFibGVzID0gKCkgPT4ge1xuICAgIGNvbnN0IGJhc2tldE9yZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5iYXNrZXRfX29yZGVyXCIpO1xuICAgIGNvbnN0IG5hbWVJbnB1dCA9IGJhc2tldE9yZGVyLnF1ZXJ5U2VsZWN0b3IoYGlucHV0W25hbWUgPSBcIm5hbWVcIl1gKTtcbiAgICBjb25zdCBuYW1lID0gbmFtZUlucHV0LnZhbHVlO1xuICAgIGNvbnN0IGVtYWlsSW5wdXQgPSBiYXNrZXRPcmRlci5xdWVyeVNlbGVjdG9yKGBpbnB1dFtuYW1lID0gXCJlbWFpbFwiXWApO1xuICAgIGNvbnN0IGVtYWlsID0gZW1haWxJbnB1dC52YWx1ZTtcbiAgICBjb25zdCBvcmRlckVycm9yTmFtZSA9IGJhc2tldE9yZGVyLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5vcmRlcl9fZmllbGQtZXJyb3ItLW5hbWVcIlxuICAgICk7XG4gICAgY29uc3Qgb3JkZXJFcnJvckVtYWlsID0gYmFza2V0T3JkZXIucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLm9yZGVyX19maWVsZC1lcnJvci0tZW1haWxcIlxuICAgICk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgYmFza2V0T3JkZXIsXG4gICAgICBuYW1lSW5wdXQsXG4gICAgICBuYW1lLFxuICAgICAgZW1haWxJbnB1dCxcbiAgICAgIGVtYWlsLFxuICAgICAgb3JkZXJFcnJvck5hbWUsXG4gICAgICBvcmRlckVycm9yRW1haWwsXG4gICAgfTtcbiAgfTtcblxuICBpc0NsaWVudE5hbWVWYWxpZChuYW1lKSB7XG4gICAgY29uc3QgcmVnZXggPSAvXlthLXpBLVrEhcSHxJnFgsWEw7PFm8W6xbzEhMSGxJjFgcWDw5PFmsW5xbtcXHNdKyQvO1xuXG4gICAgaWYgKHJlZ2V4LnRlc3QobmFtZSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgaXNDbGllbnRFbWFpbFZhbGlkKGVtYWlsKSB7XG4gICAgaWYgKC9eXFxTK0BcXFMrJC9nLnRlc3QoZW1haWwpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBWYWxpZGF0aW9uO1xuIiwiY2xhc3MgTmF2YmFyQ1NTIHtcbiAgbWFuYWdlTmF2YmFyKCkge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XG4gICAgICB0aGlzLmNoYW5nZU5hdmJhclZpZXdzKCk7XG4gICAgICB0aGlzLmNoYW5nZU5hdmJhckJhY2tncm91bmRDb2xvcigpO1xuICAgICAgdGhpcy5vbk9mZkJhc2tldCgpO1xuICAgICAgdGhpcy5zaG93SGlkZU5hdmJhcigpO1xuICAgIH0pO1xuICB9XG5cbiAgY2hhbmdlTmF2YmFyVmlld3MoKSB7XG4gICAgdGhpcy5uYXZiYXJNb2JpbGVWaWV3KCk7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCAoKSA9PiB0aGlzLm5hdmJhck1vYmlsZVZpZXcoKSk7XG4gIH1cblxuICBjaGFuZ2VOYXZiYXJCYWNrZ3JvdW5kQ29sb3IoKSB7XG4gICAgY29uc3QgbmF2YmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uYXZiYXJcIik7XG4gICAgY29uc3QgYmFza2V0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5iYXNrZXQtYnRuXCIpO1xuICAgIGNvbnN0IG5hdmJhclRvZ2dsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmF2YmFyX190b2dnbGVcIik7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCAoKSA9PiB7XG4gICAgICBpZiAod2luZG93LnNjcm9sbFkgPiAwKSB7XG4gICAgICAgIG5hdmJhci5jbGFzc0xpc3QuYWRkKFwibmF2YmFyLS1iYWNrZ3JvdW5kLXNjcm9sbFwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5hdmJhci5jbGFzc0xpc3QucmVtb3ZlKFwibmF2YmFyLS1iYWNrZ3JvdW5kLXNjcm9sbFwiKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGJhc2tldEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgbmF2YmFyLmNsYXNzTGlzdC50b2dnbGUoXCJuYXZiYXItLWJhY2tncm91bmQtYmFza2V0LWJ0blwiKTtcbiAgICB9KTtcblxuICAgIG5hdmJhclRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgbmF2YmFyLmNsYXNzTGlzdC50b2dnbGUoXCJuYXZiYXItLWJhY2tncm91bmQtbmF2YmFyLWJ0blwiKTtcbiAgICB9KTtcbiAgfVxuXG4gIG9uT2ZmQmFza2V0KCkge1xuICAgIGNvbnN0IGJhc2tldEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYmFza2V0LWJ0blwiKTtcblxuICAgIGJhc2tldEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgY29uc3QgYmFza2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5iYXNrZXRcIik7XG4gICAgICBjb25zdCBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImJvZHlcIik7XG5cbiAgICAgIGlmIChiYXNrZXRCdG4uY2hlY2tlZCkge1xuICAgICAgICBiYXNrZXQuY2xhc3NMaXN0LmFkZChcImJhc2tldC0tb3BlblwiKTtcbiAgICAgICAgYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBiYXNrZXQuY2xhc3NMaXN0LnJlbW92ZShcImJhc2tldC0tb3BlblwiKTtcbiAgICAgICAgYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiaW5pdGlhbFwiO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgc2hvd0hpZGVOYXZiYXIoKSB7XG4gICAgY29uc3QgbmF2YmFyVG9nZ2xlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uYXZiYXJfX3RvZ2dsZVwiKTtcbiAgICBjb25zdCBuYXZiYXJDb250YWluZXJNb2JpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIubmF2YmFyX19jb250YWluZXItLW1vYmlsZVwiXG4gICAgKTtcbiAgICBjb25zdCBuYXZiYXJCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdmJhcl9fYnRuXCIpO1xuXG4gICAgbmF2YmFyVG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBuYXZiYXJDb250YWluZXJNb2JpbGUuY2xhc3NMaXN0LnRvZ2dsZShcIm5hdmJhcl9fY29udGFpbmVyLS1vcGVuXCIpO1xuICAgICAgbmF2YmFyQnRuLmNsYXNzTGlzdC50b2dnbGUoXCJuYXZiYXJfX2J0bi0tY2hlY2tlZFwiKTtcbiAgICB9KTtcbiAgfVxuXG4gIG5hdmJhck1vYmlsZVZpZXcoKSB7XG4gICAgY29uc3QgbmF2YmFyQ29udGFpbmVyID0gXCJuYXZiYXJfX2NvbnRhaW5lclwiO1xuICAgIGNvbnN0IG5hdmJhckl0ZW0gPSBcIm5hdmJhcl9faXRlbVwiO1xuXG4gICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDwgMTIwMCkge1xuICAgICAgdGhpcy5jaGFuZ2VDbGFzc09mRWxlbWVudExpc3QoYCR7bmF2YmFySXRlbX1gLCBgJHtuYXZiYXJJdGVtfS0tbW9iaWxlYCk7XG4gICAgICB0aGlzLmNoYW5nZUNsYXNzT2ZFbGVtZW50TGlzdChcbiAgICAgICAgYCR7bmF2YmFyQ29udGFpbmVyfWAsXG4gICAgICAgIGAke25hdmJhckNvbnRhaW5lcn0tLW1vYmlsZWBcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY2hhbmdlQ2xhc3NPZkVsZW1lbnRMaXN0KGAke25hdmJhckl0ZW19LS1tb2JpbGVgLCBgJHtuYXZiYXJJdGVtfWApO1xuICAgICAgdGhpcy5jaGFuZ2VDbGFzc09mRWxlbWVudExpc3QoXG4gICAgICAgIGAke25hdmJhckNvbnRhaW5lcn0tLW1vYmlsZWAsXG4gICAgICAgIGAke25hdmJhckNvbnRhaW5lcn1gXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIGNoYW5nZUNsYXNzT2ZFbGVtZW50TGlzdChlbGVtZW50Q2xhc3MsIG5ld0NsYXNzKSB7XG4gICAgY29uc3QgZWxlbWVudExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAuJHtlbGVtZW50Q2xhc3N9YCk7XG5cbiAgICBlbGVtZW50TGlzdC5mb3JFYWNoKChlbGUpID0+IHtcbiAgICAgIGVsZS5jbGFzc0xpc3QucmVtb3ZlKGAke2VsZW1lbnRDbGFzc31gKTtcbiAgICAgIGVsZS5jbGFzc0xpc3QuYWRkKGAke25ld0NsYXNzfWApO1xuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE5hdmJhckNTUzsiXSwibmFtZXMiOlsiX19fQ1NTX0xPQURFUl9FWFBPUlRfX18iLCJwdXNoIiwibW9kdWxlIiwiaWQiLCJfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMF9fXyIsIlVSTCIsIl9fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzBfX18iLCJfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMV9fXyIsIl9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8yX19fIiwiX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzNfX18iLCJfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF8xX19fIiwiX19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMl9fXyIsIl9fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzNfX18iLCJleHBvcnRzIiwiY3NzV2l0aE1hcHBpbmdUb1N0cmluZyIsImxpc3QiLCJ0b1N0cmluZyIsInRoaXMiLCJtYXAiLCJpdGVtIiwiY29udGVudCIsIm5lZWRMYXllciIsImNvbmNhdCIsImxlbmd0aCIsImpvaW4iLCJpIiwibW9kdWxlcyIsIm1lZGlhIiwiZGVkdXBlIiwic3VwcG9ydHMiLCJsYXllciIsInVuZGVmaW5lZCIsImFscmVhZHlJbXBvcnRlZE1vZHVsZXMiLCJrIiwiX2siLCJ1cmwiLCJvcHRpb25zIiwiU3RyaW5nIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJ0ZXN0Iiwic2xpY2UiLCJoYXNoIiwibmVlZFF1b3RlcyIsInJlcGxhY2UiLCJjc3NNYXBwaW5nIiwiYnRvYSIsImJhc2U2NCIsInVuZXNjYXBlIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiSlNPTiIsInN0cmluZ2lmeSIsImRhdGEiLCJzb3VyY2VNYXBwaW5nIiwic3R5bGVzSW5ET00iLCJnZXRJbmRleEJ5SWRlbnRpZmllciIsImlkZW50aWZpZXIiLCJyZXN1bHQiLCJtb2R1bGVzVG9Eb20iLCJpZENvdW50TWFwIiwiaWRlbnRpZmllcnMiLCJiYXNlIiwiY291bnQiLCJpbmRleEJ5SWRlbnRpZmllciIsIm9iaiIsImNzcyIsInNvdXJjZU1hcCIsInJlZmVyZW5jZXMiLCJ1cGRhdGVyIiwiYWRkRWxlbWVudFN0eWxlIiwiYnlJbmRleCIsInNwbGljZSIsImFwaSIsImRvbUFQSSIsInVwZGF0ZSIsIm5ld09iaiIsInJlbW92ZSIsImxhc3RJZGVudGlmaWVycyIsIm5ld0xpc3QiLCJpbmRleCIsIm5ld0xhc3RJZGVudGlmaWVycyIsIl9pIiwiX2luZGV4IiwibWVtbyIsImluc2VydCIsInN0eWxlIiwidGFyZ2V0Iiwic3R5bGVUYXJnZXQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ3aW5kb3ciLCJIVE1MSUZyYW1lRWxlbWVudCIsImNvbnRlbnREb2N1bWVudCIsImhlYWQiLCJlIiwiZ2V0VGFyZ2V0IiwiRXJyb3IiLCJhcHBlbmRDaGlsZCIsImVsZW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlcyIsImF0dHJpYnV0ZXMiLCJzdHlsZUVsZW1lbnQiLCJub25jZSIsInNldEF0dHJpYnV0ZSIsImluc2VydFN0eWxlRWxlbWVudCIsInN0eWxlVGFnVHJhbnNmb3JtIiwiYXBwbHkiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJyZW1vdmVTdHlsZUVsZW1lbnQiLCJzdHlsZVNoZWV0IiwiY3NzVGV4dCIsImZpcnN0Q2hpbGQiLCJjcmVhdGVUZXh0Tm9kZSIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJtIiwibiIsImdldHRlciIsImQiLCJhIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJnIiwiZ2xvYmFsVGhpcyIsIkZ1bmN0aW9uIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInNjcmlwdFVybCIsImltcG9ydFNjcmlwdHMiLCJsb2NhdGlvbiIsImN1cnJlbnRTY3JpcHQiLCJzcmMiLCJzY3JpcHRzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJwIiwiYiIsImJhc2VVUkkiLCJzZWxmIiwiaHJlZiIsIm5jIiwibG9jYWxzIiwiYXNzZXJ0aW9uIiwibWVzc2FnZSIsImFzc2VydGlvbkVycm9yIiwic3RyaW5nVG9CeXRlQXJyYXkkMSIsInN0ciIsIm91dCIsImMiLCJjaGFyQ29kZUF0IiwiYnl0ZVRvQ2hhck1hcF8iLCJjaGFyVG9CeXRlTWFwXyIsImJ5dGVUb0NoYXJNYXBXZWJTYWZlXyIsImNoYXJUb0J5dGVNYXBXZWJTYWZlXyIsIkVOQ09ERURfVkFMU19CQVNFIiwiRU5DT0RFRF9WQUxTIiwiRU5DT0RFRF9WQUxTX1dFQlNBRkUiLCJIQVNfTkFUSVZFX1NVUFBPUlQiLCJhdG9iIiwiZW5jb2RlQnl0ZUFycmF5IiwiaW5wdXQiLCJ3ZWJTYWZlIiwiQXJyYXkiLCJpc0FycmF5IiwiaW5pdF8iLCJieXRlVG9DaGFyTWFwIiwib3V0cHV0IiwiYnl0ZTEiLCJoYXZlQnl0ZTIiLCJieXRlMiIsImhhdmVCeXRlMyIsImJ5dGUzIiwib3V0Qnl0ZTEiLCJvdXRCeXRlMiIsIm91dEJ5dGUzIiwib3V0Qnl0ZTQiLCJlbmNvZGVTdHJpbmciLCJkZWNvZGVTdHJpbmciLCJieXRlcyIsInBvcyIsImMxIiwiZnJvbUNoYXJDb2RlIiwiYzIiLCJ1IiwiYzMiLCJieXRlQXJyYXlUb1N0cmluZyIsImRlY29kZVN0cmluZ1RvQnl0ZUFycmF5IiwiY2hhclRvQnl0ZU1hcCIsImNoYXJBdCIsImJ5dGU0IiwiRGVjb2RlQmFzZTY0U3RyaW5nRXJyb3IiLCJjb25zdHJ1Y3RvciIsInN1cGVyIiwiYXJndW1lbnRzIiwibmFtZSIsImJhc2U2NEVuY29kZSIsInV0ZjhCeXRlcyIsImJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nIiwiYmFzZTY0RGVjb2RlIiwiY29uc29sZSIsImVycm9yIiwiZGVlcENvcHkiLCJ2YWx1ZSIsImRlZXBFeHRlbmQiLCJzb3VyY2UiLCJEYXRlIiwiZ2V0VGltZSIsImdldERlZmF1bHRzIiwiZ2V0R2xvYmFsIiwiX19GSVJFQkFTRV9ERUZBVUxUU19fIiwicHJvY2VzcyIsImVudiIsImRlZmF1bHRzSnNvblN0cmluZyIsInBhcnNlIiwiZ2V0RGVmYXVsdHNGcm9tRW52VmFyaWFibGUiLCJtYXRjaCIsImNvb2tpZSIsImRlY29kZWQiLCJnZXREZWZhdWx0c0Zyb21Db29raWUiLCJpbmZvIiwiZ2V0RGVmYXVsdEFwcENvbmZpZyIsIl9hIiwiY29uZmlnIiwicmVqZWN0IiwicmVzb2x2ZSIsInByb21pc2UiLCJQcm9taXNlIiwid3JhcENhbGxiYWNrIiwiY2FsbGJhY2siLCJjYXRjaCIsImlzTW9iaWxlQ29yZG92YSIsIm5hdmlnYXRvciIsIkZpcmViYXNlRXJyb3IiLCJjb2RlIiwiY3VzdG9tRGF0YSIsInNldFByb3RvdHlwZU9mIiwiY2FwdHVyZVN0YWNrVHJhY2UiLCJFcnJvckZhY3RvcnkiLCJjcmVhdGUiLCJzZXJ2aWNlIiwic2VydmljZU5hbWUiLCJlcnJvcnMiLCJmdWxsQ29kZSIsInRlbXBsYXRlIiwiUEFUVEVSTiIsIl8iLCJyZXBsYWNlVGVtcGxhdGUiLCJmdWxsTWVzc2FnZSIsImpzb25FdmFsIiwiZGVjb2RlIiwidG9rZW4iLCJoZWFkZXIiLCJjbGFpbXMiLCJzaWduYXR1cmUiLCJwYXJ0cyIsInNwbGl0IiwiZm4iLCJjb250ZXh0T2JqIiwicmVzIiwiZGVlcEVxdWFsIiwiYUtleXMiLCJrZXlzIiwiYktleXMiLCJpbmNsdWRlcyIsImFQcm9wIiwiYlByb3AiLCJpc09iamVjdCIsInRoaW5nIiwiU2hhMSIsImNoYWluXyIsImJ1Zl8iLCJXXyIsInBhZF8iLCJpbmJ1Zl8iLCJ0b3RhbF8iLCJibG9ja1NpemUiLCJyZXNldCIsImNvbXByZXNzXyIsImJ1ZiIsIm9mZnNldCIsIlciLCJ0IiwiZiIsImxlbmd0aE1pbnVzQmxvY2siLCJpbmJ1ZiIsImRpZ2VzdCIsInRvdGFsQml0cyIsImoiLCJmbk5hbWUiLCJhcmdOYW1lIiwic3RyaW5nTGVuZ3RoIiwiX2RlbGVnYXRlIiwiaW5zdGFuY2VGYWN0b3J5IiwidHlwZSIsIm11bHRpcGxlSW5zdGFuY2VzIiwic2VydmljZVByb3BzIiwiaW5zdGFudGlhdGlvbk1vZGUiLCJvbkluc3RhbmNlQ3JlYXRlZCIsInNldEluc3RhbnRpYXRpb25Nb2RlIiwibW9kZSIsInNldE11bHRpcGxlSW5zdGFuY2VzIiwic2V0U2VydmljZVByb3BzIiwicHJvcHMiLCJzZXRJbnN0YW5jZUNyZWF0ZWRDYWxsYmFjayIsIkRFRkFVTFRfRU5UUllfTkFNRSIsImNvbnRhaW5lciIsImNvbXBvbmVudCIsImluc3RhbmNlcyIsIk1hcCIsImluc3RhbmNlc0RlZmVycmVkIiwiaW5zdGFuY2VzT3B0aW9ucyIsIm9uSW5pdENhbGxiYWNrcyIsIm5vcm1hbGl6ZWRJZGVudGlmaWVyIiwibm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyIiwiaGFzIiwiZGVmZXJyZWQiLCJzZXQiLCJpc0luaXRpYWxpemVkIiwic2hvdWxkQXV0b0luaXRpYWxpemUiLCJpbnN0YW5jZSIsImdldE9ySW5pdGlhbGl6ZVNlcnZpY2UiLCJpbnN0YW5jZUlkZW50aWZpZXIiLCJnZXRJbW1lZGlhdGUiLCJvcHRpb25hbCIsImdldENvbXBvbmVudCIsInNldENvbXBvbmVudCIsImlzQ29tcG9uZW50RWFnZXIiLCJpbnN0YW5jZURlZmVycmVkIiwiZW50cmllcyIsImNsZWFySW5zdGFuY2UiLCJkZWxldGUiLCJzZXJ2aWNlcyIsImZyb20iLCJ2YWx1ZXMiLCJhbGwiLCJmaWx0ZXIiLCJJTlRFUk5BTCIsIl9kZWxldGUiLCJpc0NvbXBvbmVudFNldCIsImdldE9wdGlvbnMiLCJpbml0aWFsaXplIiwib3B0cyIsIm9uSW5pdCIsImV4aXN0aW5nQ2FsbGJhY2tzIiwiU2V0IiwiYWRkIiwiZXhpc3RpbmdJbnN0YW5jZSIsImludm9rZU9uSW5pdENhbGxiYWNrcyIsImNhbGxiYWNrcyIsInByb3ZpZGVycyIsImFkZENvbXBvbmVudCIsInByb3ZpZGVyIiwiZ2V0UHJvdmlkZXIiLCJhZGRPck92ZXJ3cml0ZUNvbXBvbmVudCIsImdldFByb3ZpZGVycyIsIkxvZ0xldmVsIiwibGV2ZWxTdHJpbmdUb0VudW0iLCJERUJVRyIsIlZFUkJPU0UiLCJJTkZPIiwiV0FSTiIsIkVSUk9SIiwiU0lMRU5UIiwiZGVmYXVsdExvZ0xldmVsIiwiQ29uc29sZU1ldGhvZCIsImRlZmF1bHRMb2dIYW5kbGVyIiwibG9nVHlwZSIsImFyZ3MiLCJsb2dMZXZlbCIsIm5vdyIsInRvSVNPU3RyaW5nIiwibWV0aG9kIiwiTG9nZ2VyIiwiX2xvZ0xldmVsIiwiX2xvZ0hhbmRsZXIiLCJfdXNlckxvZ0hhbmRsZXIiLCJ2YWwiLCJUeXBlRXJyb3IiLCJzZXRMb2dMZXZlbCIsImxvZ0hhbmRsZXIiLCJ1c2VyTG9nSGFuZGxlciIsImRlYnVnIiwibG9nIiwid2FybiIsImluc3RhbmNlT2ZBbnkiLCJvYmplY3QiLCJjb25zdHJ1Y3RvcnMiLCJzb21lIiwiaWRiUHJveHlhYmxlVHlwZXMiLCJjdXJzb3JBZHZhbmNlTWV0aG9kcyIsImN1cnNvclJlcXVlc3RNYXAiLCJXZWFrTWFwIiwidHJhbnNhY3Rpb25Eb25lTWFwIiwidHJhbnNhY3Rpb25TdG9yZU5hbWVzTWFwIiwidHJhbnNmb3JtQ2FjaGUiLCJyZXZlcnNlVHJhbnNmb3JtQ2FjaGUiLCJpZGJQcm94eVRyYXBzIiwicmVjZWl2ZXIiLCJJREJUcmFuc2FjdGlvbiIsIm9iamVjdFN0b3JlTmFtZXMiLCJvYmplY3RTdG9yZSIsInRyYW5zZm9ybUNhY2hhYmxlVmFsdWUiLCJmdW5jIiwiSURCRGF0YWJhc2UiLCJ0cmFuc2FjdGlvbiIsIklEQkN1cnNvciIsImFkdmFuY2UiLCJjb250aW51ZSIsImNvbnRpbnVlUHJpbWFyeUtleSIsInVud3JhcCIsInN0b3JlTmFtZXMiLCJ0eCIsInNvcnQiLCJkb25lIiwidW5saXN0ZW4iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY29tcGxldGUiLCJET01FeGNlcHRpb24iLCJhZGRFdmVudExpc3RlbmVyIiwiY2FjaGVEb25lUHJvbWlzZUZvclRyYW5zYWN0aW9uIiwiSURCT2JqZWN0U3RvcmUiLCJJREJJbmRleCIsIlByb3h5IiwiSURCUmVxdWVzdCIsInJlcXVlc3QiLCJzdWNjZXNzIiwidGhlbiIsInByb21pc2lmeVJlcXVlc3QiLCJuZXdWYWx1ZSIsInJlYWRNZXRob2RzIiwid3JpdGVNZXRob2RzIiwiY2FjaGVkTWV0aG9kcyIsImdldE1ldGhvZCIsInRhcmdldEZ1bmNOYW1lIiwidXNlSW5kZXgiLCJpc1dyaXRlIiwiYXN5bmMiLCJzdG9yZU5hbWUiLCJzdG9yZSIsInNoaWZ0Iiwib2xkVHJhcHMiLCJQbGF0Zm9ybUxvZ2dlclNlcnZpY2VJbXBsIiwiZ2V0UGxhdGZvcm1JbmZvU3RyaW5nIiwiaXNWZXJzaW9uU2VydmljZVByb3ZpZGVyIiwibGlicmFyeSIsInZlcnNpb24iLCJsb2dTdHJpbmciLCJuYW1lJHEiLCJ2ZXJzaW9uJDEiLCJsb2dnZXIiLCJuYW1lJHAiLCJuYW1lJG8iLCJuYW1lJG4iLCJuYW1lJG0iLCJuYW1lJGwiLCJuYW1lJGsiLCJuYW1lJGoiLCJuYW1lJGkiLCJuYW1lJGgiLCJuYW1lJGciLCJuYW1lJGYiLCJuYW1lJGUiLCJuYW1lJGQiLCJuYW1lJGMiLCJuYW1lJGIiLCJuYW1lJGEiLCJuYW1lJDkiLCJuYW1lJDgiLCJuYW1lJDciLCJuYW1lJDYiLCJuYW1lJDUiLCJuYW1lJDQiLCJuYW1lJDMiLCJuYW1lJDIiLCJuYW1lJDEiLCJQTEFURk9STV9MT0dfU1RSSU5HIiwiX2FwcHMiLCJfc2VydmVyQXBwcyIsIl9jb21wb25lbnRzIiwiX2FkZENvbXBvbmVudCIsImFwcCIsIl9yZWdpc3RlckNvbXBvbmVudCIsImNvbXBvbmVudE5hbWUiLCJzZXJ2ZXJBcHAiLCJFUlJPUl9GQUNUT1JZIiwiRmlyZWJhc2VBcHBJbXBsIiwiX2lzRGVsZXRlZCIsIl9vcHRpb25zIiwiYXNzaWduIiwiX2NvbmZpZyIsIl9uYW1lIiwiX2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCIsImF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCIsIl9jb250YWluZXIiLCJjaGVja0Rlc3Ryb3llZCIsImlzRGVsZXRlZCIsImFwcE5hbWUiLCJpbml0aWFsaXplQXBwIiwicmF3Q29uZmlnIiwiZXhpc3RpbmdBcHAiLCJuZXdBcHAiLCJyZWdpc3RlclZlcnNpb24iLCJsaWJyYXJ5S2V5T3JOYW1lIiwidmFyaWFudCIsImxpYnJhcnlNaXNtYXRjaCIsInZlcnNpb25NaXNtYXRjaCIsIndhcm5pbmciLCJEQl9OQU1FIiwiREJfVkVSU0lPTiIsIlNUT1JFX05BTUUiLCJkYlByb21pc2UiLCJnZXREYlByb21pc2UiLCJibG9ja2VkIiwidXBncmFkZSIsImJsb2NraW5nIiwidGVybWluYXRlZCIsImluZGV4ZWREQiIsIm9wZW4iLCJvcGVuUHJvbWlzZSIsImV2ZW50Iiwib2xkVmVyc2lvbiIsIm5ld1ZlcnNpb24iLCJkYiIsIm9wZW5EQiIsImNyZWF0ZU9iamVjdFN0b3JlIiwib3JpZ2luYWxFcnJvck1lc3NhZ2UiLCJ3cml0ZUhlYXJ0YmVhdHNUb0luZGV4ZWREQiIsImhlYXJ0YmVhdE9iamVjdCIsInB1dCIsImNvbXB1dGVLZXkiLCJpZGJHZXRFcnJvciIsImFwcElkIiwiSGVhcnRiZWF0U2VydmljZUltcGwiLCJfaGVhcnRiZWF0c0NhY2hlIiwiX3N0b3JhZ2UiLCJIZWFydGJlYXRTdG9yYWdlSW1wbCIsIl9oZWFydGJlYXRzQ2FjaGVQcm9taXNlIiwicmVhZCIsInRyaWdnZXJIZWFydGJlYXQiLCJfYiIsImFnZW50IiwiZGF0ZSIsImdldFVUQ0RhdGVTdHJpbmciLCJoZWFydGJlYXRzIiwibGFzdFNlbnRIZWFydGJlYXREYXRlIiwic2luZ2xlRGF0ZUhlYXJ0YmVhdCIsImhiVGltZXN0YW1wIiwidmFsdWVPZiIsIm92ZXJ3cml0ZSIsImdldEhlYXJ0YmVhdHNIZWFkZXIiLCJoZWFydGJlYXRzVG9TZW5kIiwidW5zZW50RW50cmllcyIsImhlYXJ0YmVhdHNDYWNoZSIsIm1heFNpemUiLCJoZWFydGJlYXRFbnRyeSIsImZpbmQiLCJoYiIsImRhdGVzIiwiY291bnRCeXRlcyIsInBvcCIsImV4dHJhY3RIZWFydGJlYXRzRm9ySGVhZGVyIiwiaGVhZGVyU3RyaW5nIiwic3Vic3RyaW5nIiwiX2NhblVzZUluZGV4ZWREQlByb21pc2UiLCJydW5JbmRleGVkREJFbnZpcm9ubWVudENoZWNrIiwiaXNJbmRleGVkREJBdmFpbGFibGUiLCJwcmVFeGlzdCIsIkRCX0NIRUNLX05BTUUiLCJvbnN1Y2Nlc3MiLCJjbG9zZSIsImRlbGV0ZURhdGFiYXNlIiwib251cGdyYWRlbmVlZGVkIiwib25lcnJvciIsImlkYkhlYXJ0YmVhdE9iamVjdCIsInJlYWRIZWFydGJlYXRzRnJvbUluZGV4ZWREQiIsImhlYXJ0YmVhdHNPYmplY3QiLCJleGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QiLCJhcGlLZXkiLCJhdXRoRG9tYWluIiwiZGF0YWJhc2VVUkwiLCJwcm9qZWN0SWQiLCJzdG9yYWdlQnVja2V0IiwibWVzc2FnaW5nU2VuZGVySWQiLCJET01TdG9yYWdlV3JhcHBlciIsImRvbVN0b3JhZ2VfIiwicHJlZml4XyIsInJlbW92ZUl0ZW0iLCJwcmVmaXhlZE5hbWVfIiwic2V0SXRlbSIsInN0b3JlZFZhbCIsImdldEl0ZW0iLCJNZW1vcnlTdG9yYWdlIiwiY2FjaGVfIiwiaXNJbk1lbW9yeVN0b3JhZ2UiLCJjcmVhdGVTdG9yYWdlZm9yIiwiZG9tU3RvcmFnZU5hbWUiLCJkb21TdG9yYWdlIiwiUGVyc2lzdGVudFN0b3JhZ2UiLCJTZXNzaW9uU3RvcmFnZSIsImxvZ0NsaWVudCIsIkxVSURHZW5lcmF0b3IiLCJzaGExIiwiaGlnaCIsInN0cmluZ1RvQnl0ZUFycmF5Iiwic2hhMUJ5dGVzIiwiYnVpbGRMb2dNZXNzYWdlXyIsInZhckFyZ3MiLCJhcmciLCJmaXJzdExvZ18iLCJsb2dnZXJfIiwicGVyc2lzdGVudCIsImJpbmQiLCJsb2dXcmFwcGVyIiwicHJlZml4IiwiZmF0YWwiLCJpc0ludmFsaWRKU09OTnVtYmVyIiwiTnVtYmVyIiwiUE9TSVRJVkVfSU5GSU5JVFkiLCJORUdBVElWRV9JTkZJTklUWSIsIk1JTl9OQU1FIiwiTUFYX05BTUUiLCJuYW1lQ29tcGFyZSIsImFBc0ludCIsInRyeVBhcnNlSW50IiwiYkFzSW50Iiwic3RyaW5nQ29tcGFyZSIsInJlcXVpcmVLZXkiLCJPYmplY3RUb1VuaXF1ZUtleSIsInNwbGl0U3RyaW5nQnlTaXplIiwic2Vnc2l6ZSIsImxlbiIsImRhdGFTZWdzIiwiZWFjaCIsImRvdWJsZVRvSUVFRTc1NFN0cmluZyIsInYiLCJzIiwibG4iLCJNYXRoIiwiYWJzIiwicG93IiwibWluIiwiZmxvb3IiLCJMTjIiLCJyb3VuZCIsImJpdHMiLCJyZXZlcnNlIiwiaGV4Qnl0ZVN0cmluZyIsImhleEJ5dGUiLCJwYXJzZUludCIsInN1YnN0ciIsInRvTG93ZXJDYXNlIiwiSU5URUdFUl9SRUdFWFBfIiwiUmVnRXhwIiwiaW50VmFsIiwiZXhjZXB0aW9uR3VhcmQiLCJzZXRUaW1lb3V0Iiwic3RhY2siLCJzZXRUaW1lb3V0Tm9uQmxvY2tpbmciLCJ0aW1lIiwidGltZW91dCIsIkRlbm8iLCJ1bnJlZlRpbWVyIiwiQXBwQ2hlY2tUb2tlblByb3ZpZGVyIiwiYXBwTmFtZV8iLCJhcHBDaGVja1Byb3ZpZGVyIiwiYXBwQ2hlY2siLCJnZXRUb2tlbiIsImZvcmNlUmVmcmVzaCIsImFkZFRva2VuQ2hhbmdlTGlzdGVuZXIiLCJsaXN0ZW5lciIsImFkZFRva2VuTGlzdGVuZXIiLCJub3RpZnlGb3JJbnZhbGlkVG9rZW4iLCJGaXJlYmFzZUF1dGhUb2tlblByb3ZpZGVyIiwiZmlyZWJhc2VPcHRpb25zXyIsImF1dGhQcm92aWRlcl8iLCJhdXRoXyIsImF1dGgiLCJhZGRBdXRoVG9rZW5MaXN0ZW5lciIsInJlbW92ZVRva2VuQ2hhbmdlTGlzdGVuZXIiLCJyZW1vdmVBdXRoVG9rZW5MaXN0ZW5lciIsImVycm9yTWVzc2FnZSIsIkVtdWxhdG9yVG9rZW5Qcm92aWRlciIsImFjY2Vzc1Rva2VuIiwiT1dORVIiLCJQUk9UT0NPTF9WRVJTSU9OIiwiRk9SR0VfRE9NQUlOX1JFIiwiQVBQX0NIRUNLX1RPS0VOX1BBUkFNIiwiV0VCU09DS0VUIiwiTE9OR19QT0xMSU5HIiwiUmVwb0luZm8iLCJob3N0Iiwic2VjdXJlIiwibmFtZXNwYWNlIiwid2ViU29ja2V0T25seSIsIm5vZGVBZG1pbiIsInBlcnNpc3RlbmNlS2V5IiwiaW5jbHVkZU5hbWVzcGFjZUluUXVlcnlQYXJhbXMiLCJpc1VzaW5nRW11bGF0b3IiLCJfaG9zdCIsIl9kb21haW4iLCJpbmRleE9mIiwiaW50ZXJuYWxIb3N0IiwiaXNDYWNoZWFibGVIb3N0IiwiaXNDdXN0b21Ib3N0IiwibmV3SG9zdCIsInRvVVJMU3RyaW5nIiwicHJvdG9jb2wiLCJxdWVyeSIsInJlcG9JbmZvQ29ubmVjdGlvblVSTCIsInJlcG9JbmZvIiwicGFyYW1zIiwiY29ublVSTCIsInJlcG9JbmZvTmVlZHNRdWVyeVBhcmFtIiwicGFpcnMiLCJTdGF0c0NvbGxlY3Rpb24iLCJjb3VudGVyc18iLCJpbmNyZW1lbnRDb3VudGVyIiwiYW1vdW50IiwiY29sbGVjdGlvbnMiLCJyZXBvcnRlcnMiLCJzdGF0c01hbmFnZXJHZXRDb2xsZWN0aW9uIiwiaGFzaFN0cmluZyIsIlBhY2tldFJlY2VpdmVyIiwib25NZXNzYWdlXyIsInBlbmRpbmdSZXNwb25zZXMiLCJjdXJyZW50UmVzcG9uc2VOdW0iLCJjbG9zZUFmdGVyUmVzcG9uc2UiLCJvbkNsb3NlIiwiY2xvc2VBZnRlciIsInJlc3BvbnNlTnVtIiwiaGFuZGxlUmVzcG9uc2UiLCJyZXF1ZXN0TnVtIiwidG9Qcm9jZXNzIiwiRklSRUJBU0VfTE9OR1BPTExfU1RBUlRfUEFSQU0iLCJCcm93c2VyUG9sbENvbm5lY3Rpb24iLCJjb25uSWQiLCJhcHBsaWNhdGlvbklkIiwiYXBwQ2hlY2tUb2tlbiIsImF1dGhUb2tlbiIsInRyYW5zcG9ydFNlc3Npb25JZCIsImxhc3RTZXNzaW9uSWQiLCJieXRlc1NlbnQiLCJieXRlc1JlY2VpdmVkIiwiZXZlckNvbm5lY3RlZF8iLCJsb2dfIiwic3RhdHNfIiwidXJsRm4iLCJvbk1lc3NhZ2UiLCJvbkRpc2Nvbm5lY3QiLCJjdXJTZWdtZW50TnVtIiwib25EaXNjb25uZWN0XyIsIm15UGFja2V0T3JkZXJlciIsImlzQ2xvc2VkXyIsImNvbm5lY3RUaW1lb3V0VGltZXJfIiwib25DbG9zZWRfIiwicmVhZHlTdGF0ZSIsImNhbGxlZCIsIndyYXBwZWRGbiIsImJvZHkiLCJhdHRhY2hFdmVudCIsImV4ZWN1dGVXaGVuRE9NUmVhZHkiLCJzY3JpcHRUYWdIb2xkZXIiLCJGaXJlYmFzZUlGcmFtZVNjcmlwdEhvbGRlciIsImNvbW1hbmQiLCJhcmcxIiwiYXJnMiIsImFyZzMiLCJhcmc0IiwiaW5jcmVtZW50SW5jb21pbmdCeXRlc18iLCJjbGVhclRpbWVvdXQiLCJwYXNzd29yZCIsInNlbmROZXdQb2xscyIsInBOIiwidXJsUGFyYW1zIiwicmFuZG9tIiwidW5pcXVlQ2FsbGJhY2tJZGVudGlmaWVyIiwiaG9zdG5hbWUiLCJjb25uZWN0VVJMIiwiYWRkVGFnIiwic3RhcnQiLCJzdGFydExvbmdQb2xsIiwiYWRkRGlzY29ubmVjdFBpbmdGcmFtZSIsImZvcmNlQWxsb3ciLCJmb3JjZUFsbG93XyIsImZvcmNlRGlzYWxsb3ciLCJmb3JjZURpc2FsbG93XyIsImlzQXZhaWxhYmxlIiwiV2luZG93cyIsIlVJIiwibWFya0Nvbm5lY3Rpb25IZWFsdGh5Iiwic2h1dGRvd25fIiwibXlEaXNjb25uRnJhbWUiLCJzZW5kIiwiZGF0YVN0ciIsImJhc2U2NGRhdGEiLCJNQVhfVVJMX0RBVEFfU0laRSIsImVucXVldWVTZWdtZW50IiwicHciLCJkaXNwbGF5IiwiY29tbWFuZENCIiwib25NZXNzYWdlQ0IiLCJvdXRzdGFuZGluZ1JlcXVlc3RzIiwicGVuZGluZ1NlZ3MiLCJjdXJyZW50U2VyaWFsIiwibXlJRnJhbWUiLCJjcmVhdGVJRnJhbWVfIiwic2NyaXB0IiwiZG9tYWluIiwiaWZyYW1lQ29udGVudHMiLCJkb2MiLCJ3cml0ZSIsImlmcmFtZSIsImNvbnRlbnRXaW5kb3ciLCJhbGl2ZSIsInRleHRDb250ZW50IiwibXlJRCIsIm15UFciLCJuZXdSZXF1ZXN0XyIsInNpemUiLCJ0aGVVUkwiLCJjdXJEYXRhU3RyaW5nIiwidGhlU2VnIiwic2VnIiwidHMiLCJhZGRMb25nUG9sbFRhZ18iLCJzZWdudW0iLCJ0b3RhbHNlZ3MiLCJzZXJpYWwiLCJkb05ld1JlcXVlc3QiLCJrZWVwYWxpdmVUaW1lb3V0IiwibG9hZENCIiwibmV3U2NyaXB0Iiwib25sb2FkIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicnN0YXRlIiwiV2ViU29ja2V0SW1wbCIsIk1veldlYlNvY2tldCIsIldlYlNvY2tldCIsIldlYlNvY2tldENvbm5lY3Rpb24iLCJrZWVwYWxpdmVUaW1lciIsImZyYW1lcyIsInRvdGFsRnJhbWVzIiwiY29ubmVjdGlvblVSTF8iLCJDT05TVEFOVFMiLCJteVNvY2siLCJvbm9wZW4iLCJvbmNsb3NlIiwib25tZXNzYWdlIiwiaGFuZGxlSW5jb21pbmdGcmFtZSIsImlzT2xkQW5kcm9pZCIsInVzZXJBZ2VudCIsIm9sZEFuZHJvaWRSZWdleCIsIm9sZEFuZHJvaWRNYXRjaCIsInBhcnNlRmxvYXQiLCJwcmV2aW91c2x5RmFpbGVkIiwiYXBwZW5kRnJhbWVfIiwiZnVsbE1lc3MiLCJqc29uTWVzcyIsImhhbmRsZU5ld0ZyYW1lQ291bnRfIiwiZnJhbWVDb3VudCIsImV4dHJhY3RGcmFtZUNvdW50XyIsImlzTmFOIiwibWVzcyIsInJlc2V0S2VlcEFsaXZlIiwicmVtYWluaW5nRGF0YSIsInNlbmRTdHJpbmdfIiwiY2xlYXJJbnRlcnZhbCIsInNldEludGVydmFsIiwicmVzcG9uc2VzUmVxdWlyZWRUb0JlSGVhbHRoeSIsImhlYWx0aHlUaW1lb3V0IiwiVHJhbnNwb3J0TWFuYWdlciIsIkFMTF9UUkFOU1BPUlRTIiwiSVNfVFJBTlNQT1JUX0lOSVRJQUxJWkVEIiwiZ2xvYmFsVHJhbnNwb3J0SW5pdGlhbGl6ZWRfIiwiaW5pdFRyYW5zcG9ydHNfIiwiaXNXZWJTb2NrZXRzQXZhaWxhYmxlIiwiaXNTa2lwUG9sbENvbm5lY3Rpb24iLCJ0cmFuc3BvcnRzXyIsInRyYW5zcG9ydHMiLCJ0cmFuc3BvcnQiLCJpbml0aWFsVHJhbnNwb3J0IiwidXBncmFkZVRyYW5zcG9ydCIsIkNvbm5lY3Rpb24iLCJyZXBvSW5mb18iLCJhcHBsaWNhdGlvbklkXyIsImFwcENoZWNrVG9rZW5fIiwiYXV0aFRva2VuXyIsIm9uUmVhZHlfIiwib25LaWxsXyIsImNvbm5lY3Rpb25Db3VudCIsInBlbmRpbmdEYXRhTWVzc2FnZXMiLCJzdGF0ZV8iLCJ0cmFuc3BvcnRNYW5hZ2VyXyIsInN0YXJ0XyIsImNvbm4iLCJjb25uXyIsIm5leHRUcmFuc3BvcnRJZF8iLCJwcmltYXJ5UmVzcG9uc2VzUmVxdWlyZWRfIiwib25NZXNzYWdlUmVjZWl2ZWQiLCJjb25uUmVjZWl2ZXJfIiwib25Db25uZWN0aW9uTG9zdCIsImRpc2Nvbm5SZWNlaXZlcl8iLCJ0eF8iLCJyeF8iLCJzZWNvbmRhcnlDb25uXyIsImlzSGVhbHRoeV8iLCJoZWFsdGh5VGltZW91dE1TIiwiaGVhbHRoeVRpbWVvdXRfIiwiZXZlckNvbm5lY3RlZCIsIm9uQ29ubmVjdGlvbkxvc3RfIiwib25TZWNvbmRhcnlDb25uZWN0aW9uTG9zdF8iLCJvblByaW1hcnlNZXNzYWdlUmVjZWl2ZWRfIiwib25TZWNvbmRhcnlNZXNzYWdlUmVjZWl2ZWRfIiwic2VuZFJlcXVlc3QiLCJkYXRhTXNnIiwibXNnIiwic2VuZERhdGFfIiwidHJ5Q2xlYW51cENvbm5lY3Rpb24iLCJvblNlY29uZGFyeUNvbnRyb2xfIiwiY29udHJvbERhdGEiLCJjbWQiLCJ1cGdyYWRlSWZTZWNvbmRhcnlIZWFsdGh5XyIsInNlY29uZGFyeVJlc3BvbnNlc1JlcXVpcmVkXyIsInBhcnNlZERhdGEiLCJwcm9jZWVkV2l0aFVwZ3JhZGVfIiwib25Db250cm9sXyIsIm9uRGF0YU1lc3NhZ2VfIiwib25QcmltYXJ5UmVzcG9uc2VfIiwicGF5bG9hZCIsImhhbmRzaGFrZVBheWxvYWQiLCJoIiwib25IYW5kc2hha2VfIiwib25Db25uZWN0aW9uU2h1dGRvd25fIiwib25SZXNldF8iLCJzZW5kUGluZ09uUHJpbWFyeUlmTmVjZXNzYXJ5XyIsImhhbmRzaGFrZSIsInRpbWVzdGFtcCIsInNlc3Npb25JZCIsIm9uQ29ubmVjdGlvbkVzdGFibGlzaGVkXyIsInRyeVN0YXJ0VXBncmFkZV8iLCJzdGFydFVwZ3JhZGVfIiwiY2xvc2VDb25uZWN0aW9uc18iLCJyZWFzb24iLCJTZXJ2ZXJBY3Rpb25zIiwicGF0aFN0cmluZyIsIm9uQ29tcGxldGUiLCJtZXJnZSIsInJlZnJlc2hBdXRoVG9rZW4iLCJyZWZyZXNoQXBwQ2hlY2tUb2tlbiIsIm9uRGlzY29ubmVjdFB1dCIsIm9uRGlzY29ubmVjdE1lcmdlIiwib25EaXNjb25uZWN0Q2FuY2VsIiwicmVwb3J0U3RhdHMiLCJzdGF0cyIsIkV2ZW50RW1pdHRlciIsImFsbG93ZWRFdmVudHNfIiwibGlzdGVuZXJzXyIsInRyaWdnZXIiLCJldmVudFR5cGUiLCJsaXN0ZW5lcnMiLCJjb250ZXh0Iiwib24iLCJ2YWxpZGF0ZUV2ZW50VHlwZV8iLCJldmVudERhdGEiLCJnZXRJbml0aWFsRXZlbnQiLCJvZmYiLCJldCIsIk9ubGluZU1vbml0b3IiLCJnZXRJbnN0YW5jZSIsIm9ubGluZV8iLCJjdXJyZW50bHlPbmxpbmUiLCJQYXRoIiwicGF0aE9yU3RyaW5nIiwicGllY2VOdW0iLCJwaWVjZXNfIiwiY29weVRvIiwicGllY2VOdW1fIiwibmV3RW1wdHlQYXRoIiwicGF0aEdldEZyb250IiwicGF0aCIsInBhdGhHZXRMZW5ndGgiLCJwYXRoUG9wRnJvbnQiLCJwYXRoR2V0QmFjayIsInBhdGhTbGljZSIsImJlZ2luIiwicGF0aFBhcmVudCIsInBpZWNlcyIsInBhdGhDaGlsZCIsImNoaWxkUGF0aE9iaiIsImNoaWxkUGllY2VzIiwicGF0aElzRW1wdHkiLCJuZXdSZWxhdGl2ZVBhdGgiLCJvdXRlclBhdGgiLCJpbm5lclBhdGgiLCJvdXRlciIsImlubmVyIiwicGF0aEVxdWFscyIsIm90aGVyIiwicGF0aENvbnRhaW5zIiwiVmFsaWRhdGlvblBhdGgiLCJlcnJvclByZWZpeF8iLCJwYXJ0c18iLCJieXRlTGVuZ3RoXyIsIm1heCIsInZhbGlkYXRpb25QYXRoQ2hlY2tWYWxpZCIsInZhbGlkYXRpb25QYXRoIiwidmFsaWRhdGlvblBhdGhUb0Vycm9yU3RyaW5nIiwiVmlzaWJpbGl0eU1vbml0b3IiLCJoaWRkZW4iLCJ2aXNpYmlsaXR5Q2hhbmdlIiwidmlzaWJsZV8iLCJ2aXNpYmxlIiwiUkVDT05ORUNUX01JTl9ERUxBWSIsIlBlcnNpc3RlbnRDb25uZWN0aW9uIiwib25EYXRhVXBkYXRlXyIsIm9uQ29ubmVjdFN0YXR1c18iLCJvblNlcnZlckluZm9VcGRhdGVfIiwiYXV0aFRva2VuUHJvdmlkZXJfIiwiYXBwQ2hlY2tUb2tlblByb3ZpZGVyXyIsImF1dGhPdmVycmlkZV8iLCJuZXh0UGVyc2lzdGVudENvbm5lY3Rpb25JZF8iLCJpbnRlcnJ1cHRSZWFzb25zXyIsImxpc3RlbnMiLCJvdXRzdGFuZGluZ1B1dHNfIiwib3V0c3RhbmRpbmdHZXRzXyIsIm91dHN0YW5kaW5nUHV0Q291bnRfIiwib3V0c3RhbmRpbmdHZXRDb3VudF8iLCJvbkRpc2Nvbm5lY3RSZXF1ZXN0UXVldWVfIiwiY29ubmVjdGVkXyIsInJlY29ubmVjdERlbGF5XyIsIm1heFJlY29ubmVjdERlbGF5XyIsInNlY3VyaXR5RGVidWdDYWxsYmFja18iLCJlc3RhYmxpc2hDb25uZWN0aW9uVGltZXJfIiwicmVxdWVzdENCSGFzaF8iLCJyZXF1ZXN0TnVtYmVyXyIsInJlYWx0aW1lXyIsImZvcmNlVG9rZW5SZWZyZXNoXyIsImludmFsaWRBdXRoVG9rZW5Db3VudF8iLCJpbnZhbGlkQXBwQ2hlY2tUb2tlbkNvdW50XyIsImZpcnN0Q29ubmVjdGlvbl8iLCJsYXN0Q29ubmVjdGlvbkF0dGVtcHRUaW1lXyIsImxhc3RDb25uZWN0aW9uRXN0YWJsaXNoZWRUaW1lXyIsIm9uVmlzaWJsZV8iLCJvbk9ubGluZV8iLCJhY3Rpb24iLCJvblJlc3BvbnNlIiwiY3VyUmVxTnVtIiwiciIsImluaXRDb25uZWN0aW9uXyIsIm91dHN0YW5kaW5nR2V0IiwiX3BhdGgiLCJxIiwiX3F1ZXJ5T2JqZWN0Iiwic2VuZEdldF8iLCJsaXN0ZW4iLCJjdXJyZW50SGFzaEZuIiwidGFnIiwicXVlcnlJZCIsIl9xdWVyeUlkZW50aWZpZXIiLCJfcXVlcnlQYXJhbXMiLCJpc0RlZmF1bHQiLCJsb2Fkc0FsbERhdGEiLCJsaXN0ZW5TcGVjIiwiaGFzaEZuIiwic2VuZExpc3Rlbl8iLCJyZXEiLCJzdGF0dXMiLCJ3YXJuT25MaXN0ZW5XYXJuaW5nc18iLCJyZW1vdmVMaXN0ZW5fIiwid2FybmluZ3MiLCJpbmRleFNwZWMiLCJnZXRJbmRleCIsImluZGV4UGF0aCIsInRyeUF1dGgiLCJyZWR1Y2VSZWNvbm5lY3REZWxheUlmQWRtaW5DcmVkZW50aWFsXyIsImNyZWRlbnRpYWwiLCJpc0FkbWluIiwidHJ5QXBwQ2hlY2siLCJhdXRoTWV0aG9kIiwiaXNWYWxpZEZvcm1hdCIsInJlcXVlc3REYXRhIiwiY3JlZCIsIm9uQXV0aFJldm9rZWRfIiwib25BcHBDaGVja1Jldm9rZWRfIiwic2VuZFVubGlzdGVuXyIsInF1ZXJ5T2JqIiwic2VuZE9uRGlzY29ubmVjdF8iLCJyZXNwb25zZSIsInB1dEludGVybmFsIiwic2VuZFB1dF8iLCJxdWV1ZWQiLCJlcnJvclJlYXNvbiIsInJlcU51bSIsIm9uRGF0YVB1c2hfIiwib25MaXN0ZW5SZXZva2VkXyIsIm9uU2VjdXJpdHlEZWJ1Z1BhY2tldF8iLCJoYW5kbGVUaW1lc3RhbXBfIiwic2VuZENvbm5lY3RTdGF0c18iLCJyZXN0b3JlU3RhdGVfIiwic2NoZWR1bGVDb25uZWN0XyIsImVzdGFibGlzaENvbm5lY3Rpb25fIiwib25saW5lIiwib25SZWFsdGltZURpc2Nvbm5lY3RfIiwiY2FuY2VsU2VudFRyYW5zYWN0aW9uc18iLCJzaG91bGRSZWNvbm5lY3RfIiwidGltZVNpbmNlTGFzdENvbm5lY3RBdHRlbXB0IiwicmVjb25uZWN0RGVsYXkiLCJvbkRhdGFNZXNzYWdlIiwib25SZWFkeSIsIm5leHRDb25uZWN0aW9uSWRfIiwiY2FuY2VsZWQiLCJjb25uZWN0aW9uIiwiY2xvc2VGbiIsInNlbmRSZXF1ZXN0Rm4iLCJpbnRlcnJ1cHQiLCJyZXN1bWUiLCJkZWx0YSIsInNlcnZlclRpbWVPZmZzZXQiLCJub3JtYWxpemVkUGF0aFN0cmluZyIsInN0YXR1c0NvZGUiLCJleHBsYW5hdGlvbiIsInF1ZXJpZXMiLCJjbGllbnROYW1lIiwiTmFtZWROb2RlIiwibm9kZSIsIldyYXAiLCJJbmRleCIsImdldENvbXBhcmUiLCJjb21wYXJlIiwiaW5kZXhlZFZhbHVlQ2hhbmdlZCIsIm9sZE5vZGUiLCJuZXdOb2RlIiwib2xkV3JhcHBlZCIsIm5ld1dyYXBwZWQiLCJtaW5Qb3N0IiwiTUlOIiwiX19FTVBUWV9OT0RFIiwiS2V5SW5kZXgiLCJpc0RlZmluZWRPbiIsIm1heFBvc3QiLCJtYWtlUG9zdCIsImluZGV4VmFsdWUiLCJLRVlfSU5ERVgiLCJTb3J0ZWRNYXBJdGVyYXRvciIsInN0YXJ0S2V5IiwiY29tcGFyYXRvciIsImlzUmV2ZXJzZV8iLCJyZXN1bHRHZW5lcmF0b3JfIiwibm9kZVN0YWNrXyIsImNtcCIsImlzRW1wdHkiLCJsZWZ0IiwicmlnaHQiLCJnZXROZXh0IiwiaGFzTmV4dCIsInBlZWsiLCJMTFJCTm9kZSIsImNvbG9yIiwiUkVEIiwiU29ydGVkTWFwIiwiRU1QVFlfTk9ERSIsImNvcHkiLCJpbm9yZGVyVHJhdmVyc2FsIiwicmV2ZXJzZVRyYXZlcnNhbCIsIm1pbl8iLCJtaW5LZXkiLCJtYXhLZXkiLCJmaXhVcF8iLCJyZW1vdmVNaW5fIiwiaXNSZWRfIiwibW92ZVJlZExlZnRfIiwic21hbGxlc3QiLCJyb3RhdGVSaWdodF8iLCJtb3ZlUmVkUmlnaHRfIiwicm90YXRlTGVmdF8iLCJjb2xvckZsaXBfIiwibmwiLCJuciIsImNoZWNrTWF4RGVwdGhfIiwiYmxhY2tEZXB0aCIsImNoZWNrXyIsIkJMQUNLIiwiY29tcGFyYXRvcl8iLCJyb290XyIsImdldFByZWRlY2Vzc29yS2V5IiwicmlnaHRQYXJlbnQiLCJnZXRJdGVyYXRvciIsInJlc3VsdEdlbmVyYXRvciIsImdldEl0ZXJhdG9yRnJvbSIsImdldFJldmVyc2VJdGVyYXRvckZyb20iLCJnZXRSZXZlcnNlSXRlcmF0b3IiLCJOQU1FX09OTFlfQ09NUEFSQVRPUiIsIk5BTUVfQ09NUEFSQVRPUiIsIk1BWF9OT0RFJDIiLCJwcmlvcml0eUhhc2hUZXh0IiwicHJpb3JpdHkiLCJ2YWxpZGF0ZVByaW9yaXR5Tm9kZSIsInByaW9yaXR5Tm9kZSIsImlzTGVhZk5vZGUiLCJnZXRQcmlvcml0eSIsIl9fY2hpbGRyZW5Ob2RlQ29uc3RydWN0b3IiLCJub2RlRnJvbUpTT04kMSIsIk1BWF9OT0RFJDEiLCJMZWFmTm9kZSIsInZhbHVlXyIsInByaW9yaXR5Tm9kZV8iLCJsYXp5SGFzaF8iLCJ1cGRhdGVQcmlvcml0eSIsIm5ld1ByaW9yaXR5Tm9kZSIsImdldEltbWVkaWF0ZUNoaWxkIiwiY2hpbGROYW1lIiwiZ2V0Q2hpbGQiLCJoYXNDaGlsZCIsImdldFByZWRlY2Vzc29yQ2hpbGROYW1lIiwiY2hpbGROb2RlIiwidXBkYXRlSW1tZWRpYXRlQ2hpbGQiLCJuZXdDaGlsZE5vZGUiLCJ1cGRhdGVDaGlsZCIsImZyb250IiwibnVtQ2hpbGRyZW4iLCJmb3JFYWNoQ2hpbGQiLCJleHBvcnRGb3JtYXQiLCJnZXRWYWx1ZSIsInRvSGFzaCIsImNvbXBhcmVUbyIsImNvbXBhcmVUb0xlYWZOb2RlXyIsIm90aGVyTGVhZiIsIm90aGVyTGVhZlR5cGUiLCJ0aGlzTGVhZlR5cGUiLCJvdGhlckluZGV4IiwiVkFMVUVfVFlQRV9PUkRFUiIsInRoaXNJbmRleCIsIndpdGhJbmRleCIsImlzSW5kZXhlZCIsImVxdWFscyIsIlBSSU9SSVRZX0lOREVYIiwiYVByaW9yaXR5IiwiYlByaW9yaXR5IiwiaW5kZXhDbXAiLCJMT0dfMiIsIkJhc2UxMk51bSIsIm51bSIsImN1cnJlbnRfIiwibWFzayIsImJpdHNfIiwibmV4dEJpdElzT25lIiwiYnVpbGRDaGlsZFNldCIsImNoaWxkTGlzdCIsImtleUZuIiwibWFwU29ydEZuIiwiYnVpbGRCYWxhbmNlZFRyZWUiLCJsb3ciLCJuYW1lZE5vZGUiLCJtaWRkbGUiLCJyb290IiwiYmFzZTEyIiwiYnVpbGRQZW5uYW50IiwiY2h1bmtTaXplIiwiY2hpbGRUcmVlIiwiYXR0YWNoUGVubmFudCIsInBlbm5hbnQiLCJpc09uZSIsImJ1aWxkRnJvbTEyQXJyYXkiLCJfZGVmYXVsdEluZGV4TWFwIiwiZmFsbGJhY2tPYmplY3QiLCJJbmRleE1hcCIsIkRlZmF1bHQiLCJpbmRleGVzXyIsImluZGV4U2V0XyIsImluZGV4S2V5Iiwic29ydGVkTWFwIiwiaGFzSW5kZXgiLCJpbmRleERlZmluaXRpb24iLCJhZGRJbmRleCIsImV4aXN0aW5nQ2hpbGRyZW4iLCJzYXdJbmRleGVkVmFsdWUiLCJpdGVyIiwibmV3SW5kZXgiLCJuZXh0IiwiaW5kZXhOYW1lIiwibmV3SW5kZXhTZXQiLCJuZXdJbmRleGVzIiwiYWRkVG9JbmRleGVzIiwiaW5kZXhlZENoaWxkcmVuIiwiZXhpc3RpbmdTbmFwIiwibmV3Q2hpbGRyZW4iLCJyZW1vdmVGcm9tSW5kZXhlcyIsIkNoaWxkcmVuTm9kZSIsImNoaWxkcmVuXyIsImluZGV4TWFwXyIsImNoaWxkIiwibmV3SW5kZXhNYXAiLCJuZXdQcmlvcml0eSIsIm5ld0ltbWVkaWF0ZUNoaWxkIiwibnVtS2V5cyIsImFsbEludGVnZXJLZXlzIiwiYXJyYXkiLCJjaGlsZEhhc2giLCJpZHgiLCJyZXNvbHZlSW5kZXhfIiwicHJlZGVjZXNzb3IiLCJnZXRGaXJzdENoaWxkTmFtZSIsImdldEZpcnN0Q2hpbGQiLCJnZXRMYXN0Q2hpbGROYW1lIiwiZ2V0TGFzdENoaWxkIiwid3JhcHBlZE5vZGUiLCJzdGFydFBvc3QiLCJpdGVyYXRvciIsImVuZFBvc3QiLCJNQVhfTk9ERSIsIm90aGVyQ2hpbGRyZW5Ob2RlIiwidGhpc0l0ZXIiLCJvdGhlckl0ZXIiLCJ0aGlzQ3VycmVudCIsIm90aGVyQ3VycmVudCIsImRlZmluZVByb3BlcnRpZXMiLCJNQVgiLCJVU0VfSElOWkUiLCJub2RlRnJvbUpTT04iLCJqc29uIiwiY2hpbGREYXRhIiwiY2hpbGRyZW4iLCJjaGlsZHJlbkhhdmVQcmlvcml0eSIsImNoaWxkU2V0Iiwic29ydGVkQ2hpbGRTZXQiLCJzZXROb2RlRnJvbUpTT04iLCJQYXRoSW5kZXgiLCJpbmRleFBhdGhfIiwiZXh0cmFjdENoaWxkIiwic25hcCIsImFDaGlsZCIsImJDaGlsZCIsInZhbHVlTm9kZSIsIlZBTFVFX0lOREVYIiwiY2hhbmdlVmFsdWUiLCJzbmFwc2hvdE5vZGUiLCJjaGFuZ2VDaGlsZEFkZGVkIiwiY2hhbmdlQ2hpbGRSZW1vdmVkIiwiY2hhbmdlQ2hpbGRDaGFuZ2VkIiwib2xkU25hcCIsIkluZGV4ZWRGaWx0ZXIiLCJpbmRleF8iLCJuZXdDaGlsZCIsImFmZmVjdGVkUGF0aCIsIm9wdENoYW5nZUFjY3VtdWxhdG9yIiwib2xkQ2hpbGQiLCJ0cmFja0NoaWxkQ2hhbmdlIiwidXBkYXRlRnVsbE5vZGUiLCJuZXdTbmFwIiwiZmlsdGVyc05vZGVzIiwiZ2V0SW5kZXhlZEZpbHRlciIsIlJhbmdlZEZpbHRlciIsImluZGV4ZWRGaWx0ZXJfIiwic3RhcnRQb3N0XyIsImdldFN0YXJ0UG9zdF8iLCJlbmRQb3N0XyIsImdldEVuZFBvc3RfIiwic3RhcnRJc0luY2x1c2l2ZV8iLCJzdGFydEFmdGVyU2V0XyIsImVuZElzSW5jbHVzaXZlXyIsImVuZEJlZm9yZVNldF8iLCJnZXRTdGFydFBvc3QiLCJnZXRFbmRQb3N0IiwibWF0Y2hlcyIsImlzV2l0aGluU3RhcnQiLCJpc1dpdGhpbkVuZCIsImZpbHRlcmVkIiwiaGFzU3RhcnQiLCJzdGFydE5hbWUiLCJnZXRJbmRleFN0YXJ0TmFtZSIsImdldEluZGV4U3RhcnRWYWx1ZSIsImhhc0VuZCIsImVuZE5hbWUiLCJnZXRJbmRleEVuZE5hbWUiLCJnZXRJbmRleEVuZFZhbHVlIiwiTGltaXRlZEZpbHRlciIsIndpdGhpbkRpcmVjdGlvbmFsU3RhcnQiLCJyZXZlcnNlXyIsIndpdGhpbkVuZFBvc3QiLCJ3aXRoaW5TdGFydFBvc3QiLCJ3aXRoaW5EaXJlY3Rpb25hbEVuZCIsImNvbXBhcmVSZXMiLCJyYW5nZWRGaWx0ZXJfIiwibGltaXRfIiwiZ2V0TGltaXQiLCJpc1ZpZXdGcm9tTGVmdCIsImZ1bGxMaW1pdFVwZGF0ZUNoaWxkXyIsImNoaWxkS2V5IiwiY2hpbGRTbmFwIiwiY2hhbmdlQWNjdW11bGF0b3IiLCJvbGRFdmVudENhY2hlIiwibmV3Q2hpbGROYW1lZE5vZGUiLCJ3aW5kb3dCb3VuZGFyeSIsImluUmFuZ2UiLCJvbGRDaGlsZFNuYXAiLCJuZXh0Q2hpbGQiLCJnZXRDaGlsZEFmdGVyQ2hpbGQiLCJjb21wYXJlTmV4dCIsIm5ld0V2ZW50Q2FjaGUiLCJRdWVyeVBhcmFtcyIsImxpbWl0U2V0XyIsInN0YXJ0U2V0XyIsInN0YXJ0TmFtZVNldF8iLCJlbmRTZXRfIiwiZW5kTmFtZVNldF8iLCJ2aWV3RnJvbV8iLCJpbmRleFN0YXJ0VmFsdWVfIiwiaW5kZXhTdGFydE5hbWVfIiwiaW5kZXhFbmRWYWx1ZV8iLCJpbmRleEVuZE5hbWVfIiwiaGFzTGltaXQiLCJoYXNBbmNob3JlZExpbWl0IiwicXVlcnlQYXJhbXNUb1Jlc3RRdWVyeVN0cmluZ1BhcmFtZXRlcnMiLCJxdWVyeVBhcmFtcyIsInFzIiwib3JkZXJCeSIsInN0YXJ0UGFyYW0iLCJlbmRQYXJhbSIsInF1ZXJ5UGFyYW1zR2V0UXVlcnlPYmplY3QiLCJ2aWV3RnJvbSIsIlJlYWRvbmx5UmVzdENsaWVudCIsImdldExpc3RlbklkXyIsImxpc3RlbnNfIiwibGlzdGVuSWQiLCJ0aGlzTGlzdGVuIiwicXVlcnlTdHJpbmdQYXJhbWV0ZXJzIiwicmVzdFJlcXVlc3RfIiwicXVlcnlzdHJpbmdQYXJhbXMiLCJmb3JFYWNoIiwiYXJyYXlWYWwiLCJxdWVyeXN0cmluZyIsInhociIsIlhNTEh0dHBSZXF1ZXN0IiwicmVzcG9uc2VUZXh0IiwiU25hcHNob3RIb2xkZXIiLCJyb290Tm9kZV8iLCJnZXROb2RlIiwidXBkYXRlU25hcHNob3QiLCJuZXdTbmFwc2hvdE5vZGUiLCJuZXdTcGFyc2VTbmFwc2hvdFRyZWUiLCJzcGFyc2VTbmFwc2hvdFRyZWVSZW1lbWJlciIsInNwYXJzZVNuYXBzaG90VHJlZSIsImNsZWFyIiwic3BhcnNlU25hcHNob3RUcmVlRm9yRWFjaFRyZWUiLCJwcmVmaXhQYXRoIiwidHJlZSIsInNwYXJzZVNuYXBzaG90VHJlZUZvckVhY2hDaGlsZCIsIlN0YXRzTGlzdGVuZXIiLCJjb2xsZWN0aW9uXyIsImxhc3RfIiwibmV3U3RhdHMiLCJzdGF0IiwiU3RhdHNSZXBvcnRlciIsImNvbGxlY3Rpb24iLCJzZXJ2ZXJfIiwic3RhdHNUb1JlcG9ydF8iLCJzdGF0c0xpc3RlbmVyXyIsInJlcG9ydFN0YXRzXyIsInJlcG9ydGVkU3RhdHMiLCJoYXZlU3RhdHNUb1JlcG9ydCIsIk9wZXJhdGlvblR5cGUiLCJuZXdPcGVyYXRpb25Tb3VyY2VTZXJ2ZXJUYWdnZWRRdWVyeSIsImZyb21Vc2VyIiwiZnJvbVNlcnZlciIsInRhZ2dlZCIsIkFja1VzZXJXcml0ZSIsImFmZmVjdGVkVHJlZSIsInJldmVydCIsIkFDS19VU0VSX1dSSVRFIiwib3BlcmF0aW9uRm9yQ2hpbGQiLCJzdWJ0cmVlIiwiTGlzdGVuQ29tcGxldGUiLCJMSVNURU5fQ09NUExFVEUiLCJPdmVyd3JpdGUiLCJPVkVSV1JJVEUiLCJNZXJnZSIsIk1FUkdFIiwiQ2FjaGVOb2RlIiwibm9kZV8iLCJmdWxseUluaXRpYWxpemVkXyIsImZpbHRlcmVkXyIsImlzRnVsbHlJbml0aWFsaXplZCIsImlzRmlsdGVyZWQiLCJpc0NvbXBsZXRlRm9yUGF0aCIsImlzQ29tcGxldGVGb3JDaGlsZCIsIkV2ZW50R2VuZXJhdG9yIiwicXVlcnlfIiwiZXZlbnRHZW5lcmF0b3JHZW5lcmF0ZUV2ZW50c0ZvclR5cGUiLCJldmVudEdlbmVyYXRvciIsImV2ZW50cyIsImNoYW5nZXMiLCJyZWdpc3RyYXRpb25zIiwiZXZlbnRDYWNoZSIsImZpbHRlcmVkQ2hhbmdlcyIsImNoYW5nZSIsImFXcmFwcGVkIiwiYldyYXBwZWQiLCJldmVudEdlbmVyYXRvckNvbXBhcmVDaGFuZ2VzIiwibWF0ZXJpYWxpemVkQ2hhbmdlIiwicHJldk5hbWUiLCJldmVudEdlbmVyYXRvck1hdGVyaWFsaXplU2luZ2xlQ2hhbmdlIiwicmVnaXN0cmF0aW9uIiwicmVzcG9uZHNUbyIsImNyZWF0ZUV2ZW50IiwibmV3Vmlld0NhY2hlIiwic2VydmVyQ2FjaGUiLCJ2aWV3Q2FjaGVVcGRhdGVFdmVudFNuYXAiLCJ2aWV3Q2FjaGUiLCJldmVudFNuYXAiLCJ2aWV3Q2FjaGVVcGRhdGVTZXJ2ZXJTbmFwIiwic2VydmVyU25hcCIsInZpZXdDYWNoZUdldENvbXBsZXRlRXZlbnRTbmFwIiwidmlld0NhY2hlR2V0Q29tcGxldGVTZXJ2ZXJTbmFwIiwiZW1wdHlDaGlsZHJlblNpbmdsZXRvbiIsIkltbXV0YWJsZVRyZWUiLCJmcm9tT2JqZWN0IiwiY2hpbGRQYXRoIiwiRW1wdHlDaGlsZHJlbiIsImZpbmRSb290TW9zdE1hdGNoaW5nUGF0aEFuZFZhbHVlIiwicmVsYXRpdmVQYXRoIiwicHJlZGljYXRlIiwiY2hpbGRFeGlzdGluZ1BhdGhBbmRWYWx1ZSIsImZpbmRSb290TW9zdFZhbHVlQW5kUGF0aCIsInRvU2V0Iiwic2V0VHJlZSIsIm5ld1RyZWUiLCJmb2xkIiwiZm9sZF8iLCJwYXRoU29GYXIiLCJhY2N1bSIsImZpbmRPblBhdGgiLCJmaW5kT25QYXRoXyIsInBhdGhUb0ZvbGxvdyIsImZvcmVhY2hPblBhdGgiLCJmb3JlYWNoT25QYXRoXyIsImN1cnJlbnRSZWxhdGl2ZVBhdGgiLCJmb3JlYWNoIiwiZm9yZWFjaF8iLCJmb3JlYWNoQ2hpbGQiLCJDb21wb3VuZFdyaXRlIiwid3JpdGVUcmVlXyIsImVtcHR5IiwiY29tcG91bmRXcml0ZUFkZFdyaXRlIiwiY29tcG91bmRXcml0ZSIsInJvb3Rtb3N0Iiwicm9vdE1vc3RQYXRoIiwibmV3V3JpdGVUcmVlIiwiY29tcG91bmRXcml0ZUFkZFdyaXRlcyIsInVwZGF0ZXMiLCJuZXdXcml0ZSIsImNvbXBvdW5kV3JpdGVSZW1vdmVXcml0ZSIsImNvbXBvdW5kV3JpdGVIYXNDb21wbGV0ZVdyaXRlIiwiY29tcG91bmRXcml0ZUdldENvbXBsZXRlTm9kZSIsImNvbXBvdW5kV3JpdGVHZXRDb21wbGV0ZUNoaWxkcmVuIiwiY29tcG91bmRXcml0ZUNoaWxkQ29tcG91bmRXcml0ZSIsInNoYWRvd2luZ05vZGUiLCJjb21wb3VuZFdyaXRlSXNFbXB0eSIsImNvbXBvdW5kV3JpdGVBcHBseSIsImFwcGx5U3VidHJlZVdyaXRlIiwid3JpdGVUcmVlIiwicHJpb3JpdHlXcml0ZSIsIndyaXRlVHJlZUNoaWxkV3JpdGVzIiwibmV3V3JpdGVUcmVlUmVmIiwid3JpdGVUcmVlUmVjb3JkQ29udGFpbnNQYXRoXyIsIndyaXRlUmVjb3JkIiwid3JpdGVUcmVlRGVmYXVsdEZpbHRlcl8iLCJ3cml0ZVRyZWVMYXllclRyZWVfIiwid3JpdGVzIiwidHJlZVJvb3QiLCJ3cml0ZVBhdGgiLCJkZWVwTm9kZSIsIndyaXRlVHJlZUNhbGNDb21wbGV0ZUV2ZW50Q2FjaGUiLCJ0cmVlUGF0aCIsImNvbXBsZXRlU2VydmVyQ2FjaGUiLCJ3cml0ZUlkc1RvRXhjbHVkZSIsImluY2x1ZGVIaWRkZW5Xcml0ZXMiLCJ2aXNpYmxlV3JpdGVzIiwid3JpdGVJZCIsImFsbFdyaXRlcyIsInN1Yk1lcmdlIiwid3JpdGVUcmVlUmVmQ2FsY0NvbXBsZXRlRXZlbnRDYWNoZSIsIndyaXRlVHJlZVJlZiIsIndyaXRlVHJlZVJlZkNhbGNDb21wbGV0ZUV2ZW50Q2hpbGRyZW4iLCJjb21wbGV0ZVNlcnZlckNoaWxkcmVuIiwiY29tcGxldGVDaGlsZHJlbiIsInRvcExldmVsU2V0Iiwid3JpdGVUcmVlQ2FsY0NvbXBsZXRlRXZlbnRDaGlsZHJlbiIsIndyaXRlVHJlZVJlZkNhbGNFdmVudENhY2hlQWZ0ZXJTZXJ2ZXJPdmVyd3JpdGUiLCJleGlzdGluZ0V2ZW50U25hcCIsImV4aXN0aW5nU2VydmVyU25hcCIsImNoaWxkTWVyZ2UiLCJ3cml0ZVRyZWVDYWxjRXZlbnRDYWNoZUFmdGVyU2VydmVyT3ZlcndyaXRlIiwid3JpdGVUcmVlUmVmU2hhZG93aW5nV3JpdGUiLCJ3cml0ZVRyZWVTaGFkb3dpbmdXcml0ZSIsIndyaXRlVHJlZVJlZkNhbGNDb21wbGV0ZUNoaWxkIiwiZXhpc3RpbmdTZXJ2ZXJDYWNoZSIsIndyaXRlVHJlZUNhbGNDb21wbGV0ZUNoaWxkIiwid3JpdGVUcmVlUmVmQ2hpbGQiLCJDaGlsZENoYW5nZUFjY3VtdWxhdG9yIiwiY2hhbmdlTWFwIiwib2xkQ2hhbmdlIiwib2xkVHlwZSIsImdldENoYW5nZXMiLCJOT19DT01QTEVURV9DSElMRF9TT1VSQ0UiLCJnZXRDb21wbGV0ZUNoaWxkIiwiV3JpdGVUcmVlQ29tcGxldGVDaGlsZFNvdXJjZSIsIndyaXRlc18iLCJ2aWV3Q2FjaGVfIiwib3B0Q29tcGxldGVTZXJ2ZXJDYWNoZV8iLCJzZXJ2ZXJOb2RlIiwiY29tcGxldGVTZXJ2ZXJEYXRhIiwibm9kZXMiLCJ0b0l0ZXJhdGUiLCJ3cml0ZVRyZWVDYWxjSW5kZXhlZFNsaWNlIiwid3JpdGVUcmVlUmVmQ2FsY0luZGV4ZWRTbGljZSIsInZpZXdQcm9jZXNzb3JHZW5lcmF0ZUV2ZW50Q2FjaGVBZnRlclNlcnZlckV2ZW50Iiwidmlld1Byb2Nlc3NvciIsImNoYW5nZVBhdGgiLCJ3cml0ZXNDYWNoZSIsImFjY3VtdWxhdG9yIiwib2xkRXZlbnRTbmFwIiwiY29tcGxldGVFdmVudENoaWxkcmVuIiwiY29tcGxldGVOb2RlIiwib2xkRXZlbnROb2RlIiwidXBkYXRlZFByaW9yaXR5IiwiY2hpbGRDaGFuZ2VQYXRoIiwibmV3RXZlbnRDaGlsZCIsImV2ZW50Q2hpbGRVcGRhdGUiLCJ2aWV3UHJvY2Vzc29yQXBwbHlTZXJ2ZXJPdmVyd3JpdGUiLCJvbGRWaWV3Q2FjaGUiLCJjaGFuZ2VkU25hcCIsImNvbXBsZXRlQ2FjaGUiLCJmaWx0ZXJTZXJ2ZXJOb2RlIiwib2xkU2VydmVyU25hcCIsIm5ld1NlcnZlckNhY2hlIiwic2VydmVyRmlsdGVyIiwibmV3U2VydmVyTm9kZSIsInZpZXdQcm9jZXNzb3JBcHBseVVzZXJPdmVyd3JpdGUiLCJ2aWV3UHJvY2Vzc29yQ2FjaGVIYXNDaGlsZCIsInZpZXdQcm9jZXNzb3JBcHBseU1lcmdlIiwidmlld1Byb2Nlc3NvckFwcGx5U2VydmVyTWVyZ2UiLCJjaGFuZ2VkQ2hpbGRyZW4iLCJ2aWV3TWVyZ2VUcmVlIiwiY3VyVmlld0NhY2hlIiwiY2hpbGRNZXJnZVRyZWUiLCJpc1Vua25vd25EZWVwTWVyZ2UiLCJWaWV3IiwiaW5pdGlhbFZpZXdDYWNoZSIsImV2ZW50UmVnaXN0cmF0aW9uc18iLCJpbmRleEZpbHRlciIsInByb2Nlc3Nvcl8iLCJuZXdWaWV3UHJvY2Vzc29yIiwiaW5pdGlhbFNlcnZlckNhY2hlIiwiaW5pdGlhbEV2ZW50Q2FjaGUiLCJldmVudEdlbmVyYXRvcl8iLCJ2aWV3R2V0Q29tcGxldGVTZXJ2ZXJDYWNoZSIsInZpZXciLCJjYWNoZSIsInZpZXdJc0VtcHR5Iiwidmlld1JlbW92ZUV2ZW50UmVnaXN0cmF0aW9uIiwiZXZlbnRSZWdpc3RyYXRpb24iLCJjYW5jZWxFcnJvciIsImNhbmNlbEV2ZW50cyIsIm1heWJlRXZlbnQiLCJjcmVhdGVDYW5jZWxFdmVudCIsInJlbWFpbmluZyIsImV4aXN0aW5nIiwiaGFzQW55Q2FsbGJhY2siLCJ2aWV3QXBwbHlPcGVyYXRpb24iLCJvcGVyYXRpb24iLCJ2aWV3UHJvY2Vzc29yQXBwbHlVc2VyTWVyZ2UiLCJhY2tVc2VyV3JpdGUiLCJzZXJ2ZXJDaGlsZHJlbiIsInZpZXdQcm9jZXNzb3JSZXZlcnRVc2VyV3JpdGUiLCJhY2tQYXRoIiwibWVyZ2VQYXRoIiwic2VydmVyQ2FjaGVQYXRoIiwidmlld1Byb2Nlc3NvckFja1VzZXJXcml0ZSIsIm9sZFNlcnZlck5vZGUiLCJ2aWV3UHJvY2Vzc29yTGlzdGVuQ29tcGxldGUiLCJpc0xlYWZPckVtcHR5Iiwib2xkQ29tcGxldGVTbmFwIiwidmlld1Byb2Nlc3Nvck1heWJlQWRkVmFsdWVFdmVudCIsInZpZXdQcm9jZXNzb3JBcHBseU9wZXJhdGlvbiIsInZpZXdHZW5lcmF0ZUV2ZW50c0ZvckNoYW5nZXNfIiwiZXZlbnRSZWdpc3RyYXRpb25zIiwibW92ZXMiLCJldmVudEdlbmVyYXRvckdlbmVyYXRlRXZlbnRzRm9yQ2hhbmdlcyIsInJlZmVyZW5jZUNvbnN0cnVjdG9yJDEiLCJyZWZlcmVuY2VDb25zdHJ1Y3RvciIsIlN5bmNQb2ludCIsInZpZXdzIiwic3luY1BvaW50QXBwbHlPcGVyYXRpb24iLCJzeW5jUG9pbnQiLCJvcHRDb21wbGV0ZVNlcnZlckNhY2hlIiwic3luY1BvaW50R2V0VmlldyIsInNlcnZlckNhY2hlQ29tcGxldGUiLCJldmVudENhY2hlQ29tcGxldGUiLCJzeW5jUG9pbnRHZXRRdWVyeVZpZXdzIiwic3luY1BvaW50R2V0Q29tcGxldGVTZXJ2ZXJDYWNoZSIsInN5bmNQb2ludFZpZXdGb3JRdWVyeSIsInN5bmNQb2ludEdldENvbXBsZXRlVmlldyIsInN5bmNQb2ludFZpZXdFeGlzdHNGb3JRdWVyeSIsInN5bmNQb2ludEhhc0NvbXBsZXRlVmlldyIsInN5bmNUcmVlTmV4dFF1ZXJ5VGFnXyIsIlN5bmNUcmVlIiwibGlzdGVuUHJvdmlkZXJfIiwic3luY1BvaW50VHJlZV8iLCJwZW5kaW5nV3JpdGVUcmVlXyIsImxhc3RXcml0ZUlkIiwidGFnVG9RdWVyeU1hcCIsInF1ZXJ5VG9UYWdNYXAiLCJzeW5jVHJlZUFwcGx5VXNlck92ZXJ3cml0ZSIsInN5bmNUcmVlIiwibmV3RGF0YSIsIndyaXRlVHJlZUFkZE92ZXJ3cml0ZSIsInN5bmNUcmVlQXBwbHlPcGVyYXRpb25Ub1N5bmNQb2ludHNfIiwic3luY1RyZWVBY2tVc2VyV3JpdGUiLCJyZWNvcmQiLCJ3cml0ZVRyZWVHZXRXcml0ZSIsImZpbmRJbmRleCIsIndyaXRlVG9SZW1vdmUiLCJyZW1vdmVkV3JpdGVXYXNWaXNpYmxlIiwicmVtb3ZlZFdyaXRlT3ZlcmxhcHNXaXRoT3RoZXJXcml0ZXMiLCJjdXJyZW50V3JpdGUiLCJ3cml0ZVRyZWVSZXNldFRyZWVfIiwid3JpdGVUcmVlUmVtb3ZlV3JpdGUiLCJzeW5jVHJlZUFwcGx5U2VydmVyT3ZlcndyaXRlIiwic3luY1RyZWVSZW1vdmVFdmVudFJlZ2lzdHJhdGlvbiIsInNraXBMaXN0ZW5lckRlZHVwIiwibWF5YmVTeW5jUG9pbnQiLCJyZW1vdmVkQW5kRXZlbnRzIiwicmVtb3ZlZCIsImhhZENvbXBsZXRlVmlldyIsInZpZXdRdWVyeUlkIiwiX3JlcG8iLCJzeW5jUG9pbnRSZW1vdmVFdmVudFJlZ2lzdHJhdGlvbiIsInJlbW92aW5nRGVmYXVsdCIsImNvdmVyZWQiLCJwYXJlbnRTeW5jUG9pbnQiLCJuZXdWaWV3cyIsIm1heWJlQ2hpbGRTeW5jUG9pbnQiLCJjaGlsZE1hcCIsIl9rZXkiLCJjaGlsZFZpZXdzIiwic3luY1RyZWVDb2xsZWN0RGlzdGluY3RWaWV3c0ZvclN1YlRyZWVfIiwibmV3UXVlcnkiLCJzeW5jVHJlZUNyZWF0ZUxpc3RlbmVyRm9yVmlld18iLCJzdGFydExpc3RlbmluZyIsInN5bmNUcmVlUXVlcnlGb3JMaXN0ZW5pbmdfIiwic3luY1RyZWVUYWdGb3JRdWVyeSIsImRlZmF1bHRUYWciLCJzdG9wTGlzdGVuaW5nIiwicXVlcnlUb1JlbW92ZSIsInRhZ1RvUmVtb3ZlIiwic3luY1RyZWVNYWtlUXVlcnlLZXlfIiwicmVtb3ZlZFF1ZXJ5IiwicmVtb3ZlZFF1ZXJ5S2V5IiwicmVtb3ZlZFF1ZXJ5VGFnIiwic3luY1RyZWVSZW1vdmVUYWdzXyIsInN5bmNUcmVlQXBwbHlUYWdnZWRRdWVyeU92ZXJ3cml0ZSIsInF1ZXJ5S2V5Iiwic3luY1RyZWVRdWVyeUtleUZvclRhZ18iLCJzeW5jVHJlZVBhcnNlUXVlcnlLZXlfIiwicXVlcnlQYXRoIiwic3luY1RyZWVBcHBseVRhZ2dlZE9wZXJhdGlvbl8iLCJzeW5jVHJlZUFkZEV2ZW50UmVnaXN0cmF0aW9uIiwic2tpcFNldHVwTGlzdGVuZXIiLCJmb3VuZEFuY2VzdG9yRGVmYXVsdFZpZXciLCJwYXRoVG9TeW5jUG9pbnQiLCJzcCIsImNoaWxkU3luY1BvaW50Iiwidmlld0FscmVhZHlFeGlzdHMiLCJ2aWV3QWRkRXZlbnRSZWdpc3RyYXRpb24iLCJpbml0aWFsQ2hhbmdlcyIsInZpZXdHZXRJbml0aWFsRXZlbnRzIiwic3luY1BvaW50QWRkRXZlbnRSZWdpc3RyYXRpb24iLCJxdWVyaWVzVG9TdG9wIiwiY2hpbGRRdWVyaWVzIiwicXVlcnlUb1N0b3AiLCJzeW5jVHJlZVNldHVwTGlzdGVuZXJfIiwic3luY1RyZWVDYWxjQ29tcGxldGVFdmVudENhY2hlIiwic3luY1RyZWVBcHBseU9wZXJhdGlvbkhlbHBlcl8iLCJzeW5jUG9pbnRUcmVlIiwic3luY1RyZWVBcHBseU9wZXJhdGlvbkRlc2NlbmRhbnRzSGVscGVyXyIsImNoaWxkT3BlcmF0aW9uIiwiY2hpbGRTZXJ2ZXJDYWNoZSIsImNoaWxkV3JpdGVzQ2FjaGUiLCJ2aWV3R2V0U2VydmVyQ2FjaGUiLCJzeW5jVHJlZUFwcGx5VGFnZ2VkTGlzdGVuQ29tcGxldGUiLCJzeW5jVHJlZUFwcGx5TGlzdGVuQ29tcGxldGUiLCJ0b1VwcGVyQ2FzZSIsImVycm9yRm9yU2VydmVyQ29kZSIsInNwbGl0SW5kZXgiLCJFeGlzdGluZ1ZhbHVlUHJvdmlkZXIiLCJEZWZlcnJlZFZhbHVlUHJvdmlkZXIiLCJzeW5jVHJlZV8iLCJwYXRoXyIsImdlbmVyYXRlV2l0aFZhbHVlcyIsInJlc29sdmVEZWZlcnJlZExlYWZWYWx1ZSIsImV4aXN0aW5nVmFsIiwic2VydmVyVmFsdWVzIiwicmVzb2x2ZVNjYWxhckRlZmVycmVkVmFsdWUiLCJyZXNvbHZlQ29tcGxleERlZmVycmVkVmFsdWUiLCJvcCIsInVudXNlZCIsImV4aXN0aW5nTm9kZSIsInJlc29sdmVEZWZlcnJlZFZhbHVlVHJlZSIsInJlc29sdmVEZWZlcnJlZFZhbHVlIiwicmVzb2x2ZURlZmVycmVkVmFsdWVTbmFwc2hvdCIsInJhd1ByaSIsImxlYWZOb2RlIiwiY2hpbGRyZW5Ob2RlIiwiVHJlZSIsInBhcmVudCIsImNoaWxkQ291bnQiLCJ0cmVlU3ViVHJlZSIsInBhdGhPYmoiLCJ0cmVlR2V0VmFsdWUiLCJ0cmVlU2V0VmFsdWUiLCJ0cmVlVXBkYXRlUGFyZW50cyIsInRyZWVIYXNDaGlsZHJlbiIsInRyZWVGb3JFYWNoQ2hpbGQiLCJ0cmVlRm9yRWFjaERlc2NlbmRhbnQiLCJpbmNsdWRlU2VsZiIsImNoaWxkcmVuRmlyc3QiLCJ0cmVlR2V0UGF0aCIsImNoaWxkRW1wdHkiLCJ0cmVlSXNFbXB0eSIsImNoaWxkRXhpc3RzIiwidHJlZVVwZGF0ZUNoaWxkIiwiSU5WQUxJRF9LRVlfUkVHRVhfIiwiSU5WQUxJRF9QQVRIX1JFR0VYXyIsIk1BWF9MRUFGX1NJWkVfIiwiaXNWYWxpZFBhdGhTdHJpbmciLCJ2YWxpZGF0ZUZpcmViYXNlRGF0YUFyZyIsInZhbGlkYXRlRmlyZWJhc2VEYXRhIiwiZXJyb3JQcmVmaXgiLCJoYXNEb3RWYWx1ZSIsImhhc0FjdHVhbENoaWxkIiwidmFsaWRhdGlvblBhdGhQdXNoIiwibGFzdCIsInZhbGlkYXRpb25QYXRoUG9wIiwidmFsaWRhdGVQYXRoU3RyaW5nIiwiYXJndW1lbnROYW1lIiwidmFsaWRhdGVSb290UGF0aFN0cmluZyIsInZhbGlkYXRlV3JpdGFibGVQYXRoIiwiRXZlbnRRdWV1ZSIsImV2ZW50TGlzdHNfIiwicmVjdXJzaW9uRGVwdGhfIiwiZXZlbnRRdWV1ZVF1ZXVlRXZlbnRzIiwiZXZlbnRRdWV1ZSIsImV2ZW50RGF0YUxpc3QiLCJjdXJyTGlzdCIsImdldFBhdGgiLCJldmVudFF1ZXVlUmFpc2VFdmVudHNGb3JDaGFuZ2VkUGF0aCIsImNoYW5nZWRQYXRoIiwic2VudEFsbCIsImV2ZW50TGlzdCIsImV2ZW50TGlzdFJhaXNlIiwiZXZlbnRRdWV1ZVJhaXNlUXVldWVkRXZlbnRzTWF0Y2hpbmdQcmVkaWNhdGUiLCJldmVudFBhdGgiLCJldmVudEZuIiwiZ2V0RXZlbnRSdW5uZXIiLCJNQVhfVFJBTlNBQ1RJT05fUkVUUklFUyIsIlJlcG8iLCJmb3JjZVJlc3RDbGllbnRfIiwiYXBwQ2hlY2tQcm92aWRlcl8iLCJkYXRhVXBkYXRlQ291bnQiLCJldmVudFF1ZXVlXyIsIm5leHRXcml0ZUlkXyIsImludGVyY2VwdFNlcnZlckRhdGFDYWxsYmFja18iLCJ0cmFuc2FjdGlvblF1ZXVlVHJlZV8iLCJwZXJzaXN0ZW50Q29ubmVjdGlvbl8iLCJyZXBvU3RhcnQiLCJyZXBvIiwiYXV0aE92ZXJyaWRlIiwic2VhcmNoIiwiaXNNZXJnZSIsInJlcG9PbkRhdGFVcGRhdGUiLCJyZXBvT25Db25uZWN0U3RhdHVzIiwiY29ubmVjdFN0YXR1cyIsInJlcG9VcGRhdGVJbmZvIiwicmVwb09uU2VydmVySW5mb1VwZGF0ZSIsInN0YXRzUmVwb3J0ZXJfIiwiY3JlYXRvckZ1bmN0aW9uIiwic3RhdHNNYW5hZ2VyR2V0T3JDcmVhdGVSZXBvcnRlciIsImluZm9EYXRhXyIsImluZm9TeW5jVHJlZV8iLCJpbmZvRXZlbnRzIiwic2VydmVyU3luY1RyZWVfIiwicmVwb1NlcnZlclRpbWUiLCJyZXBvR2VuZXJhdGVTZXJ2ZXJWYWx1ZXMiLCJ0YWdnZWRDaGlsZHJlbiIsInJhdyIsImNoYW5nZVRyZWUiLCJzeW5jVHJlZUFwcGx5VGFnZ2VkUXVlcnlNZXJnZSIsInRhZ2dlZFNuYXAiLCJzeW5jVHJlZUFwcGx5U2VydmVyTWVyZ2UiLCJyZXBvUmVydW5UcmFuc2FjdGlvbnMiLCJyZXBvTG9nIiwicmVzb2x2ZWRPbkRpc2Nvbm5lY3RUcmVlIiwicmVzb2x2ZWQiLCJyZXBvQWJvcnRUcmFuc2FjdGlvbnMiLCJyZXBvUnVuT25EaXNjb25uZWN0RXZlbnRzIiwicmVwb0dldE5leHRXcml0ZUlkIiwicmVwb1NldFdpdGhQcmlvcml0eSIsIm5ld1ZhbCIsIm5ld05vZGVVbnJlc29sdmVkIiwiY2xlYXJFdmVudHMiLCJyZXBvQ2FsbE9uQ29tcGxldGVDYWxsYmFjayIsInJlcG9HZXRMYXRlc3RTdGF0ZSIsImV4Y2x1ZGVTZXRzIiwicmVwb1NlbmRSZWFkeVRyYW5zYWN0aW9ucyIsInJlcG9QcnVuZUNvbXBsZXRlZFRyYW5zYWN0aW9uc0JlbG93Tm9kZSIsInF1ZXVlIiwicmVwb0J1aWxkVHJhbnNhY3Rpb25RdWV1ZSIsImV2ZXJ5Iiwic2V0c1RvSWdub3JlIiwidHhuIiwiY3VycmVudFdyaXRlSWQiLCJsYXRlc3RTdGF0ZSIsInNuYXBUb1NlbmQiLCJsYXRlc3RIYXNoIiwicmV0cnlDb3VudCIsImN1cnJlbnRPdXRwdXRTbmFwc2hvdFJhdyIsImRhdGFUb1NlbmQiLCJwYXRoVG9TZW5kIiwiY3VycmVudE91dHB1dFNuYXBzaG90UmVzb2x2ZWQiLCJ1bndhdGNoZXIiLCJhYm9ydFJlYXNvbiIsInJlcG9TZW5kVHJhbnNhY3Rpb25RdWV1ZSIsInJvb3RNb3N0VHJhbnNhY3Rpb25Ob2RlIiwicmVwb0dldEFuY2VzdG9yVHJhbnNhY3Rpb25Ob2RlIiwiYWJvcnRUcmFuc2FjdGlvbiIsImN1cnJlbnROb2RlIiwiY3VycmVudElucHV0U25hcHNob3QiLCJuZXdEYXRhTm9kZSIsIm9sZFdyaXRlSWQiLCJuZXdOb2RlUmVzb2x2ZWQiLCJhcHBseUxvY2FsbHkiLCJyZXBvUmVydW5UcmFuc2FjdGlvblF1ZXVlIiwidHJhbnNhY3Rpb25Ob2RlIiwidHJhbnNhY3Rpb25RdWV1ZSIsInJlcG9BZ2dyZWdhdGVUcmFuc2FjdGlvblF1ZXVlc0Zvck5vZGUiLCJvcmRlciIsIm5vZGVRdWV1ZSIsInRvIiwidHJlZUZvckVhY2hBbmNlc3RvciIsInJlcG9BYm9ydFRyYW5zYWN0aW9uc09uTm9kZSIsImxhc3RTZW50IiwicGFyc2VSZXBvSW5mbyIsImRhdGFVUkwiLCJwYXJzZWRVcmwiLCJwYXJzZURhdGFiYXNlVVJMIiwic2NoZW1lIiwic3ViZG9tYWluIiwicG9ydCIsImNvbG9uSW5kIiwic2xhc2hJbmQiLCJxdWVzdGlvbk1hcmtJbmQiLCJwYXRoU3RyaW5nRGVjb2RlZCIsInBpZWNlIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiZGVjb2RlUGF0aCIsInF1ZXJ5U3RyaW5nIiwicmVzdWx0cyIsInNlZ21lbnQiLCJrdiIsImRlY29kZVF1ZXJ5IiwiaG9zdFdpdGhvdXRQb3J0IiwiZG90SW5kIiwiUFVTSF9DSEFSUyIsIm5leHRQdXNoSWQiLCJsYXN0UHVzaFRpbWUiLCJsYXN0UmFuZENoYXJzIiwiZHVwbGljYXRlVGltZSIsInRpbWVTdGFtcENoYXJzIiwiRGF0YUV2ZW50Iiwic25hcHNob3QiLCJyZWYiLCJnZXRFdmVudFR5cGUiLCJleHBvcnRWYWwiLCJDYW5jZWxFdmVudCIsIkNhbGxiYWNrQ29udGV4dCIsInNuYXBzaG90Q2FsbGJhY2siLCJjYW5jZWxDYWxsYmFjayIsIm9uVmFsdWUiLCJleHBEYXRhU25hcHNob3QiLCJwcmV2aW91c0NoaWxkTmFtZSIsIm9uQ2FuY2VsIiwiaGFzQ2FuY2VsQ2FsbGJhY2siLCJ1c2VyQ2FsbGJhY2siLCJRdWVyeUltcGwiLCJfb3JkZXJCeUNhbGxlZCIsIlJlZmVyZW5jZUltcGwiLCJpc0VxdWFsIiwic2FtZVJlcG8iLCJzYW1lUGF0aCIsInNhbWVRdWVyeUlkZW50aWZpZXIiLCJ0b0pTT04iLCJwYXRoVG9VcmxFbmNvZGVkU3RyaW5nIiwicGFyZW50UGF0aCIsIkRhdGFTbmFwc2hvdCIsIl9ub2RlIiwiY2hpbGRSZWYiLCJleGlzdHMiLCJoYXNDaGlsZHJlbiIsIl9jaGVja05vdERlbGV0ZWQiLCJfcm9vdCIsImNhbGxiYWNrQ29udGV4dCIsIlZhbHVlRXZlbnRSZWdpc3RyYXRpb24iLCJjYWNoZWQiLCJzZXJ2ZXJDYWNoZU5vZGUiLCJzeW5jVHJlZUdldFNlcnZlclZhbHVlIiwiZXJyIiwicmVwb0dldFZhbHVlIiwic3luY1BvaW50U2V0UmVmZXJlbmNlQ29uc3RydWN0b3IiLCJzeW5jVHJlZVNldFJlZmVyZW5jZUNvbnN0cnVjdG9yIiwicmVwb3MiLCJyZXBvTWFuYWdlckRhdGFiYXNlRnJvbUFwcCIsImF1dGhQcm92aWRlciIsImRiVXJsIiwiaXNFbXVsYXRvciIsImRiRW11bGF0b3JIb3N0IiwiYXV0aFRva2VuUHJvdmlkZXIiLCJpc1ZhbGlkUm9vdFBhdGhTdHJpbmciLCJ2YWxpZGF0ZVVybCIsImFwcFJlcG9zIiwicmVwb01hbmFnZXJDcmVhdGVSZXBvIiwiRGF0YWJhc2UiLCJfcmVwb0ludGVybmFsIiwiX2luc3RhbmNlU3RhcnRlZCIsIl9yb290SW50ZXJuYWwiLCJyZXBvSW50ZXJydXB0IiwicmVwb01hbmFnZXJEZWxldGVSZXBvIiwiYXBpTmFtZSIsImdldERhdGFiYXNlIiwiZ2V0QXBwIiwiaGVhcnRiZWF0Q29udHJvbGxlciIsIl9nZXRQcm92aWRlciIsImVtdWxhdG9yIiwicHJvZHVjdE5hbWUiLCJlbXVsYXRvckhvc3RzIiwiZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdCIsInNlcGFyYXRvckluZGV4IiwibGFzdEluZGV4T2YiLCJnZXREZWZhdWx0RW11bGF0b3JIb3N0bmFtZUFuZFBvcnQiLCJ0b2tlblByb3ZpZGVyIiwibW9ja1VzZXJUb2tlbiIsInVpZCIsInByb2plY3QiLCJpYXQiLCJzdWIiLCJ1c2VyX2lkIiwiaXNzIiwiYXVkIiwiZXhwIiwiYXV0aF90aW1lIiwiZmlyZWJhc2UiLCJzaWduX2luX3Byb3ZpZGVyIiwiaWRlbnRpdGllcyIsImFsZyIsImNyZWF0ZU1vY2tVc2VyVG9rZW4iLCJyZXBvTWFuYWdlckFwcGx5RW11bGF0b3JTZXR0aW5ncyIsImNvbm5lY3REYXRhYmFzZUVtdWxhdG9yIiwic2ltcGxlTGlzdGVuIiwiZWNobyIsIm9uRWNobyIsInJlZ2lzdGVyRGF0YWJhc2UiLCJiYXNrZXQiLCJmaXJlYmFzZUZldGNoIiwiZmV0Y2hEYXRhIiwiZGJSZWYiLCJyZXN1bHRBcnJheSIsInB1c2hEYXRhIiwidGhlbmFibGVQdXNoUmVmIiwicHVzaFJlZiIsInJlbW92ZURhdGEiLCJ1cGRhdGVEYXRhIiwidmFsaWRhdGlvbiIsImJhc2tldFZhbGlkYXRpb24iLCJldnQiLCJhZHVsdHNUaWNrZXRBbW91bnQiLCJjaGlsZHJlblRpY2tldEFtb3VudCIsImlzVGlja2V0SW5wdXRWYWxpZCIsInZhbGlkYXRlU3VibWl0VGlja2V0cyIsImlzQmFza2V0RnVsbCIsInZhbGlkYXRlQmFza2V0U2l6ZSIsImlzVmFsaWQiLCJyZWdleFZhbGlkYXRvciIsImFkdWx0c0lucHV0RXJyb3IiLCJjaGlsZHJlbklucHV0RXJyb3IiLCJpbm5lclRleHQiLCJzdWJtaXRUcmlwSUQiLCJwYXJlbnRFbGVtZW50IiwiZ2V0QXR0cmlidXRlIiwiYmFza2V0SXRlbSIsIm1heFRpY2tldHMiLCJzdW0iLCJ0b1N1bUxpc3QiLCJhbGVydCIsIm9yZGVyVmFsaWRhdGlvbiIsImlzT3JkZXJWYWxpZCIsImVtYWlsIiwib3JkZXJFcnJvck5hbWUiLCJvcmRlckVycm9yRW1haWwiLCJjcmVhdGVQbGFjZU9yZGVyVmFyaWFibGVzIiwiaXNDbGllbnROYW1lVmFsaWQiLCJpc0NsaWVudEVtYWlsVmFsaWQiLCJiYXNrZXRPcmRlciIsIm5hbWVJbnB1dCIsImVtYWlsSW5wdXQiLCJuYXZiYXJDU1MiLCJtYW5hZ2VOYXZiYXIiLCJjaGFuZ2VOYXZiYXJWaWV3cyIsImNoYW5nZU5hdmJhckJhY2tncm91bmRDb2xvciIsIm9uT2ZmQmFza2V0Iiwic2hvd0hpZGVOYXZiYXIiLCJuYXZiYXJNb2JpbGVWaWV3IiwibmF2YmFyIiwiYmFza2V0QnRuIiwibmF2YmFyVG9nZ2xlIiwic2Nyb2xsWSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImNoZWNrZWQiLCJvdmVyZmxvdyIsIm5hdmJhckNvbnRhaW5lck1vYmlsZSIsIm5hdmJhckJ0biIsIm5hdmJhckNvbnRhaW5lciIsIm5hdmJhckl0ZW0iLCJpbm5lcldpZHRoIiwiY2hhbmdlQ2xhc3NPZkVsZW1lbnRMaXN0IiwiZWxlbWVudENsYXNzIiwibmV3Q2xhc3MiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZWxlIiwibWFuYWdlQmFza2V0IiwicHJldmVudERlZmF1bHQiLCJwYW5lbEV4Y3Vyc2lvbnMiLCJoaWRlU3VibWl0VGlja2V0c0Vycm9yIiwic2VsZWN0ZWRFeGN1cnNpb24iLCJleGN1cnNpb25zTGlzdCIsImV4Y3Vyc2lvbklkIiwiZXhjdXJzaW9uIiwibWF0Y2hFeGN1cnNpb25zSUQiLCJnZXRUaWNrZXRBbW91bnQiLCJpc0V4Y3Vyc2lvbkluQmFza2V0IiwibmV3SXRlbSIsImFkdWx0c1ByaWNlIiwiY2hpbGRyZW5QcmljZSIsImFkZE5ld0l0ZW1Ub0Jhc2tldCIsImFkZEFkdWx0c1RpY2tldHMiLCJhZGRDaGlsZHJlblRpY2tldHMiLCJ1cGRhdGVCYXNrZXQiLCJhZGRJdGVtVG9CYXNrZXQiLCJzaG93SXRlbXNRdWFudGl0eSIsIml0ZW1zTGlzdCIsImNsZWFyU2hvd25TdW1tYXJ5IiwiaXRlbUxpc3RJdGVtVGVtcGxhdGUiLCJwcmljZXNBZHVsdHMiLCJwcmljZXNDaGlsZHJlbiIsIml0ZW1Ub3RhbFByaWNlIiwiY2xvbmVOb2RlIiwiaXRlbVByaWNlcyIsInVzZUl0ZW1MaXN0SXRlbVRlbXBsYXRlIiwicGFyc2VJbnRCYXNrZXREYXRhIiwiYWR1bHRzVGlja2V0VGV4dCIsImNoaWxkcmVuVGlja2V0VGV4dCIsIml0ZW1QcmljZXNUeHRUZW1wbGF0ZSIsInNob3dJdGVtUHJpY2VzIiwic2hvd0l0ZW1Ub3RhbFByaWNlIiwic2hvd0Jhc2tldEl0ZW1zIiwic2hvd09yZGVyVG90YWxQcmljZSIsInN1bW1hcnlJdGVtIiwiYmFza2V0SXRlbUluZGV4IiwicmVtb3ZlQmFza2V0SXRlbSIsImJhc2tldEJ0blF1YW50aXR5IiwiaXRlbXNRdWFudGl0eSIsIm9yZGVyVG90YWxQcmljZSIsInRvdGFsUHJpY2UiLCJwbGFjZU9yZGVyIiwib3JkZXJPYmoiLCJ1c2VyTmFtZSIsInVzZXJFbWFpbCIsImNyZWF0ZU9yZGVyT2JqIiwicmVsb2FkIiwiZXhjdXJzaW9uVGVtcGxhdGUiLCJkZXNjcmlwdGlvbiIsInByaWNlIiwidXNlRXhjdXJzaW9uVGVtcGxhdGUiLCJzaG93RXhjdXJzaW9ucyJdLCJzb3VyY2VSb290IjoiIn0=