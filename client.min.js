/*! For license information please see client.min.js.LICENSE.txt */
(()=>{"use strict";var e={609:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(354),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([e.id,".basket__header--medium {\n  font-weight: var(--font-weight-medium);\n}\n\n.total-price__value {\n  font-weight: var(--font-weight-semi-bold);\n}\n\n.basket__header {\n  font-size: 1.2rem;\n}\n\n.basket__header--main {\n  font-size: 1.6rem;\n}\n\n.basket__header--medium {\n  font-size: 1.3rem;\n}\n\n.item__total-price {\n  font-size: 1.3rem;\n}\n\n.basket__header--mobile,\n.item__prices {\n  font-size: 1rem;\n}\n\n.order__field-input {\n  font-size: 1.2rem;\n}\n\n@media (min-width: 650px) {\n  .basket__header {\n    font-size: 1.3rem;\n  }\n\n  .basket__header--main {\n    font-size: 2rem;\n  }\n\n  .basket__header--medium {\n    font-size: 1.5rem;\n  }\n\n  .item__total-price {\n    font-size: 1.5rem;\n  }\n\n  .item__prices {\n    font-size: 1.2rem;\n  }\n\n  .order__field-input {\n    font-size: 1.2rem;\n  }\n}\n\n@media (min-width: 950px) {\n\n  .basket__header {\n    font-size: 1.3rem;\n  }\n\n  .basket__header--main {\n    font-size: 2.5rem;\n  }\n\n  .basket__header--medium {\n    font-size: 1.5rem;\n  }\n\n  .order__field-input {\n    font-size: 1.3rem;\n  }\n}","",{version:3,sources:["webpack://./src/css/client/basket/basket-fonts.css"],names:[],mappings:"AAAA;EACE,sCAAsC;AACxC;;AAEA;EACE,yCAAyC;AAC3C;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;;EAEE,eAAe;AACjB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE;IACE,iBAAiB;EACnB;;EAEA;IACE,eAAe;EACjB;;EAEA;IACE,iBAAiB;EACnB;;EAEA;IACE,iBAAiB;EACnB;;EAEA;IACE,iBAAiB;EACnB;;EAEA;IACE,iBAAiB;EACnB;AACF;;AAEA;;EAEE;IACE,iBAAiB;EACnB;;EAEA;IACE,iBAAiB;EACnB;;EAEA;IACE,iBAAiB;EACnB;;EAEA;IACE,iBAAiB;EACnB;AACF",sourcesContent:[".basket__header--medium {\n  font-weight: var(--font-weight-medium);\n}\n\n.total-price__value {\n  font-weight: var(--font-weight-semi-bold);\n}\n\n.basket__header {\n  font-size: 1.2rem;\n}\n\n.basket__header--main {\n  font-size: 1.6rem;\n}\n\n.basket__header--medium {\n  font-size: 1.3rem;\n}\n\n.item__total-price {\n  font-size: 1.3rem;\n}\n\n.basket__header--mobile,\n.item__prices {\n  font-size: 1rem;\n}\n\n.order__field-input {\n  font-size: 1.2rem;\n}\n\n@media (min-width: 650px) {\n  .basket__header {\n    font-size: 1.3rem;\n  }\n\n  .basket__header--main {\n    font-size: 2rem;\n  }\n\n  .basket__header--medium {\n    font-size: 1.5rem;\n  }\n\n  .item__total-price {\n    font-size: 1.5rem;\n  }\n\n  .item__prices {\n    font-size: 1.2rem;\n  }\n\n  .order__field-input {\n    font-size: 1.2rem;\n  }\n}\n\n@media (min-width: 950px) {\n\n  .basket__header {\n    font-size: 1.3rem;\n  }\n\n  .basket__header--main {\n    font-size: 2.5rem;\n  }\n\n  .basket__header--medium {\n    font-size: 1.5rem;\n  }\n\n  .order__field-input {\n    font-size: 1.3rem;\n  }\n}"],sourceRoot:""}]);const a=o},420:(e,t,n)=>{n.d(t,{A:()=>u});var i=n(354),r=n.n(i),s=n(314),o=n.n(s),a=n(417),l=n.n(a),c=new URL(n(637),n.b),h=o()(r()),d=l()(c);h.push([e.id,`.basket {\n  position: fixed;\n  z-index: 998;\n  top: 0;\n  left: 0;\n  display: none;\n  align-items: start;\n  gap: 40px;\n  grid-template-areas: "items"\n    "total-price"\n    "order";\n  padding-top: 169px;\n  padding-inline: 20px;\n  padding-bottom: 40px;\n  width: 100vw;\n  height: 100vh;\n  background-color: var(--primary-color-bright);\n  overflow-y: auto;\n}\n\n.basket--open {\n  display: grid;\n}\n\n.basket__items,\n.total-price,\n.basket__order {\n  border-radius: 20px;\n  padding: 30px;\n  background-color: var(--primary-color);\n}\n\n.basket__items,\n.item-list__item {\n  display: grid;\n  gap: 20px;\n  grid-template-columns: 1fr 1fr 0.5fr 0.4fr;\n}\n\n.basket__items {\n  grid-area: items;\n  gap: 30px;\n}\n\n.total-price {\n  grid-area: total-price;\n}\n\n.order {\n  grid-area: order;\n}\n\n.basket__header--main {\n  grid-column: 1 / 5;\n  padding-bottom: 10px;\n  border-bottom: 3px solid var(--primary-color-stripe);\n}\n\n.basket__header--padding-left {\n  padding-left: 20px;\n}\n\n.basket__order>.order__field--submit {\n  text-align: center;\n}\n\n.basket__order>*:not(:last-child) {\n  margin-bottom: 10px;\n}\n\n.order__field-error {\n  color: red;\n}\n\n.order__field-input {\n  margin-top: 10px;\n  border: none;\n  color: white;\n  background-color: var(--primary-color-bright);\n}\n\n.order__field-submit {\n  padding: 20px;\n  margin-top: 30px;\n  width: 200px;\n  border: 4px solid white;\n  background-color: var(--secondary-color);\n}\n\n.order__field-name {\n  display: flex;\n  flex-direction: column;\n  gap: 5px;\n}\n\n.items-list {\n  grid-column: 1 / 5;\n}\n\n.item-list__item {\n  grid-column: 1 / 5;\n  align-items: center;\n  padding: 30px 20px;\n  border: 3px solid var(--primary-color-stripe);\n  border-radius: 20px;\n}\n\n.item__btn-remove {\n  content: url(${d});\n  margin-top: 30px;\n  margin-inline: auto;\n  padding: 10px;\n  border-radius: 100vw;\n  border: 3px solid var(--primary-color-stripe);\n}\n\n.item__prices {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n.basket__header--tablet {\n  display: none;\n}\n\n.basket__header--mobile {\n  padding-bottom: 10px;\n  border-bottom: 3px solid var(--primary-color-stripe);\n}\n\n.basket__header--mobile:not(:first-child) {\n  margin-top: 30px;\n}\n\n.item-list__item {\n  grid-template-columns: 1fr;\n}\n\n.basket__header--medium,\n.item__prices,\n.item__total-price {\n  text-align: center;\n}\n\n@media (max-width: 360px) {\n\n  .basket,\n  .basket__items,\n  .total-price,\n  .basket__order {\n    padding-inline: 10px;\n  }\n}\n\n@media (min-width: 650px) {\n\n  .basket {\n    padding-inline: 40px;\n  }\n}\n\n@media (min-width: 950px) {\n\n  .basket__header--medium,\n  .item__prices,\n  .item__total-price {\n    text-align: unset;\n  }\n\n  .item__btn-remove {\n    margin-top: unset;\n  }\n\n  .basket__header--mobile {\n    display: none;\n  }\n\n  .basket__header--tablet {\n    display: initial;\n  }\n\n  .basket {\n    grid-template-areas: "items items"\n      "total-price order";\n    grid-template-rows: 1fr 2fr;\n    padding-inline: 60px;\n  }\n\n  .item-list__item {\n    justify-items: start;\n    grid-template-columns: 1fr 1fr 0.5fr 0.4fr;\n  }\n\n}\n\n@media (min-width: 1200px) {\n  .basket {\n    grid-template-areas:\n      "items total-price"\n      "items order";\n    grid-template-columns: 1fr 0.5fr;\n    grid-template-rows: max-content;\n  }\n}`,"",{version:3,sources:["webpack://./src/css/client/basket/basket.css"],names:[],mappings:"AAAA;EACE,eAAe;EACf,YAAY;EACZ,MAAM;EACN,OAAO;EACP,aAAa;EACb,kBAAkB;EAClB,SAAS;EACT;;WAES;EACT,kBAAkB;EAClB,oBAAoB;EACpB,oBAAoB;EACpB,YAAY;EACZ,aAAa;EACb,6CAA6C;EAC7C,gBAAgB;AAClB;;AAEA;EACE,aAAa;AACf;;AAEA;;;EAGE,mBAAmB;EACnB,aAAa;EACb,sCAAsC;AACxC;;AAEA;;EAEE,aAAa;EACb,SAAS;EACT,0CAA0C;AAC5C;;AAEA;EACE,gBAAgB;EAChB,SAAS;AACX;;AAEA;EACE,sBAAsB;AACxB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,kBAAkB;EAClB,oBAAoB;EACpB,oDAAoD;AACtD;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,mBAAmB;AACrB;;AAEA;EACE,UAAU;AACZ;;AAEA;EACE,gBAAgB;EAChB,YAAY;EACZ,YAAY;EACZ,6CAA6C;AAC/C;;AAEA;EACE,aAAa;EACb,gBAAgB;EAChB,YAAY;EACZ,uBAAuB;EACvB,wCAAwC;AAC1C;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,QAAQ;AACV;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;EAClB,mBAAmB;EACnB,kBAAkB;EAClB,6CAA6C;EAC7C,mBAAmB;AACrB;;AAEA;EACE,gDAA2C;EAC3C,gBAAgB;EAChB,mBAAmB;EACnB,aAAa;EACb,oBAAoB;EACpB,6CAA6C;AAC/C;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,SAAS;AACX;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,oBAAoB;EACpB,oDAAoD;AACtD;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,0BAA0B;AAC5B;;AAEA;;;EAGE,kBAAkB;AACpB;;AAEA;;EAEE;;;;IAIE,oBAAoB;EACtB;AACF;;AAEA;;EAEE;IACE,oBAAoB;EACtB;AACF;;AAEA;;EAEE;;;IAGE,iBAAiB;EACnB;;EAEA;IACE,iBAAiB;EACnB;;EAEA;IACE,aAAa;EACf;;EAEA;IACE,gBAAgB;EAClB;;EAEA;IACE;yBACqB;IACrB,2BAA2B;IAC3B,oBAAoB;EACtB;;EAEA;IACE,oBAAoB;IACpB,0CAA0C;EAC5C;;AAEF;;AAEA;EACE;IACE;;mBAEe;IACf,gCAAgC;IAChC,+BAA+B;EACjC;AACF",sourcesContent:['.basket {\n  position: fixed;\n  z-index: 998;\n  top: 0;\n  left: 0;\n  display: none;\n  align-items: start;\n  gap: 40px;\n  grid-template-areas: "items"\n    "total-price"\n    "order";\n  padding-top: 169px;\n  padding-inline: 20px;\n  padding-bottom: 40px;\n  width: 100vw;\n  height: 100vh;\n  background-color: var(--primary-color-bright);\n  overflow-y: auto;\n}\n\n.basket--open {\n  display: grid;\n}\n\n.basket__items,\n.total-price,\n.basket__order {\n  border-radius: 20px;\n  padding: 30px;\n  background-color: var(--primary-color);\n}\n\n.basket__items,\n.item-list__item {\n  display: grid;\n  gap: 20px;\n  grid-template-columns: 1fr 1fr 0.5fr 0.4fr;\n}\n\n.basket__items {\n  grid-area: items;\n  gap: 30px;\n}\n\n.total-price {\n  grid-area: total-price;\n}\n\n.order {\n  grid-area: order;\n}\n\n.basket__header--main {\n  grid-column: 1 / 5;\n  padding-bottom: 10px;\n  border-bottom: 3px solid var(--primary-color-stripe);\n}\n\n.basket__header--padding-left {\n  padding-left: 20px;\n}\n\n.basket__order>.order__field--submit {\n  text-align: center;\n}\n\n.basket__order>*:not(:last-child) {\n  margin-bottom: 10px;\n}\n\n.order__field-error {\n  color: red;\n}\n\n.order__field-input {\n  margin-top: 10px;\n  border: none;\n  color: white;\n  background-color: var(--primary-color-bright);\n}\n\n.order__field-submit {\n  padding: 20px;\n  margin-top: 30px;\n  width: 200px;\n  border: 4px solid white;\n  background-color: var(--secondary-color);\n}\n\n.order__field-name {\n  display: flex;\n  flex-direction: column;\n  gap: 5px;\n}\n\n.items-list {\n  grid-column: 1 / 5;\n}\n\n.item-list__item {\n  grid-column: 1 / 5;\n  align-items: center;\n  padding: 30px 20px;\n  border: 3px solid var(--primary-color-stripe);\n  border-radius: 20px;\n}\n\n.item__btn-remove {\n  content: url(../../../assets/deleteBtn.svg);\n  margin-top: 30px;\n  margin-inline: auto;\n  padding: 10px;\n  border-radius: 100vw;\n  border: 3px solid var(--primary-color-stripe);\n}\n\n.item__prices {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n.basket__header--tablet {\n  display: none;\n}\n\n.basket__header--mobile {\n  padding-bottom: 10px;\n  border-bottom: 3px solid var(--primary-color-stripe);\n}\n\n.basket__header--mobile:not(:first-child) {\n  margin-top: 30px;\n}\n\n.item-list__item {\n  grid-template-columns: 1fr;\n}\n\n.basket__header--medium,\n.item__prices,\n.item__total-price {\n  text-align: center;\n}\n\n@media (max-width: 360px) {\n\n  .basket,\n  .basket__items,\n  .total-price,\n  .basket__order {\n    padding-inline: 10px;\n  }\n}\n\n@media (min-width: 650px) {\n\n  .basket {\n    padding-inline: 40px;\n  }\n}\n\n@media (min-width: 950px) {\n\n  .basket__header--medium,\n  .item__prices,\n  .item__total-price {\n    text-align: unset;\n  }\n\n  .item__btn-remove {\n    margin-top: unset;\n  }\n\n  .basket__header--mobile {\n    display: none;\n  }\n\n  .basket__header--tablet {\n    display: initial;\n  }\n\n  .basket {\n    grid-template-areas: "items items"\n      "total-price order";\n    grid-template-rows: 1fr 2fr;\n    padding-inline: 60px;\n  }\n\n  .item-list__item {\n    justify-items: start;\n    grid-template-columns: 1fr 1fr 0.5fr 0.4fr;\n  }\n\n}\n\n@media (min-width: 1200px) {\n  .basket {\n    grid-template-areas:\n      "items total-price"\n      "items order";\n    grid-template-columns: 1fr 0.5fr;\n    grid-template-rows: max-content;\n  }\n}'],sourceRoot:""}]);const u=h},751:(e,t,n)=>{n.d(t,{A:()=>u});var i=n(354),r=n.n(i),s=n(314),o=n.n(s),a=n(417),l=n.n(a),c=new URL(n(272),n.b),h=o()(r()),d=l()(c);h.push([e.id,`@media (min-width: 1200px) {\n  .navbar {\n    justify-content: space-evenly;\n  }\n\n  .navbar__container {\n    display: flex;\n  }\n\n  .navbar__item {\n    padding: 15px 25px;\n  }\n\n  .navbar__item:hover {\n    cursor: pointer;\n    background-color: #011e3f;\n  }\n\n  .wrapper--main::before {\n    content: "";\n    position: absolute;\n    top: 110px;\n    left: 8vw;\n    right: 8vw;\n    border-bottom: 3px solid var(--primary-color-stripe);\n  }\n\n  .mainpage {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    justify-items: center;\n    gap: 5vw;\n    padding-inline: 5vw;\n    margin-top: 60px;\n    margin-bottom: 7vh;\n  }\n\n  .mainpage__container {\n    justify-self: end;\n  }\n\n  .mainpage__container--img {\n    justify-self: start;\n  }\n\n  .mainpage__img {\n    min-width: 250px;\n    min-height: 400px;\n    max-height: 600px;\n    border-radius: 60px;\n    background-image: url(${d});\n  }\n\n  .header--panel {\n    display: block;\n    margin-bottom: 20px;\n    border-bottom: 3px solid var(--primary-color-stripe);\n  }\n\n  .panel {\n    padding: 0 60px;\n  }\n\n  .panel__container {\n    text-align: initial;\n  }\n\n  .panel__excursions {\n    justify-content: initial;\n    gap: 40px;\n    grid-template-columns: repeat(auto-fit, 330px);\n    padding-inline: unset;\n  }\n\n  .navbar__btn,\n  .header--logo::after,\n  .header--panel::after {\n    display: none;\n  }\n\n  .basket-btn__wrapper {\n    top: 40px;\n    right: calc(10px + 2vw);\n  }\n}\n`,"",{version:3,sources:["webpack://./src/css/client/desktop.css"],names:[],mappings:"AAAA;EACE;IACE,6BAA6B;EAC/B;;EAEA;IACE,aAAa;EACf;;EAEA;IACE,kBAAkB;EACpB;;EAEA;IACE,eAAe;IACf,yBAAyB;EAC3B;;EAEA;IACE,WAAW;IACX,kBAAkB;IAClB,UAAU;IACV,SAAS;IACT,UAAU;IACV,oDAAoD;EACtD;;EAEA;IACE,aAAa;IACb,8BAA8B;IAC9B,qBAAqB;IACrB,QAAQ;IACR,mBAAmB;IACnB,gBAAgB;IAChB,kBAAkB;EACpB;;EAEA;IACE,iBAAiB;EACnB;;EAEA;IACE,mBAAmB;EACrB;;EAEA;IACE,gBAAgB;IAChB,iBAAiB;IACjB,iBAAiB;IACjB,mBAAmB;IACnB,yDAAqD;EACvD;;EAEA;IACE,cAAc;IACd,mBAAmB;IACnB,oDAAoD;EACtD;;EAEA;IACE,eAAe;EACjB;;EAEA;IACE,mBAAmB;EACrB;;EAEA;IACE,wBAAwB;IACxB,SAAS;IACT,8CAA8C;IAC9C,qBAAqB;EACvB;;EAEA;;;IAGE,aAAa;EACf;;EAEA;IACE,SAAS;IACT,uBAAuB;EACzB;AACF",sourcesContent:['@media (min-width: 1200px) {\n  .navbar {\n    justify-content: space-evenly;\n  }\n\n  .navbar__container {\n    display: flex;\n  }\n\n  .navbar__item {\n    padding: 15px 25px;\n  }\n\n  .navbar__item:hover {\n    cursor: pointer;\n    background-color: #011e3f;\n  }\n\n  .wrapper--main::before {\n    content: "";\n    position: absolute;\n    top: 110px;\n    left: 8vw;\n    right: 8vw;\n    border-bottom: 3px solid var(--primary-color-stripe);\n  }\n\n  .mainpage {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    justify-items: center;\n    gap: 5vw;\n    padding-inline: 5vw;\n    margin-top: 60px;\n    margin-bottom: 7vh;\n  }\n\n  .mainpage__container {\n    justify-self: end;\n  }\n\n  .mainpage__container--img {\n    justify-self: start;\n  }\n\n  .mainpage__img {\n    min-width: 250px;\n    min-height: 400px;\n    max-height: 600px;\n    border-radius: 60px;\n    background-image: url(../../assets/mainpage__img.png);\n  }\n\n  .header--panel {\n    display: block;\n    margin-bottom: 20px;\n    border-bottom: 3px solid var(--primary-color-stripe);\n  }\n\n  .panel {\n    padding: 0 60px;\n  }\n\n  .panel__container {\n    text-align: initial;\n  }\n\n  .panel__excursions {\n    justify-content: initial;\n    gap: 40px;\n    grid-template-columns: repeat(auto-fit, 330px);\n    padding-inline: unset;\n  }\n\n  .navbar__btn,\n  .header--logo::after,\n  .header--panel::after {\n    display: none;\n  }\n\n  .basket-btn__wrapper {\n    top: 40px;\n    right: calc(10px + 2vw);\n  }\n}\n'],sourceRoot:""}]);const u=h},813:(e,t,n)=>{n.d(t,{A:()=>g});var i=n(354),r=n.n(i),s=n(314),o=n.n(s),a=n(417),l=n.n(a),c=new URL(n(77),n.b),h=new URL(n(990),n.b),d=new URL(n(208),n.b),u=new URL(n(622),n.b),p=o()(r()),A=l()(c),_=l()(h),m=l()(d),f=l()(u);p.push([e.id,`:root {\n  font-size: 16px;\n  --font-weight-normal: 400;\n  --font-weight-medium: 500;\n  --font-weight-semi-bold: 600;\n  --font-weight-bold: 700;\n}\n\n@font-face {\n  font-family: 'Montserrat';\n  src: url(${A});\n  font-weight: 400;\n}\n\n@font-face {\n  font-family: 'Montserrat';\n  src: url(${_});\n  font-weight: 500;\n}\n\n@font-face {\n  font-family: 'Montserrat';\n  src: url(${m});\n  font-weight: 600;\n}\n\n@font-face {\n  font-family: 'Montserrat';\n  src: url(${f});\n  font-weight: 700;\n}\n\n* {\n  font-family: 'Montserrat';\n  font-weight: var(--font-weight-normal);\n  color: white;\n}\n\n.text--navbar {\n  font-weight: var(--font-weight-medium);\n}\n\n.header--logo,\n.header--panel,\n.excursions__price {\n  font-weight: var(--font-weight-semi-bold);\n}\n\n.header--mainpage,\n.header__border {\n  font-weight: var(--font-weight-bold);\n}\n\n.header {\n  font-size: 1.5rem;\n}\n\n.header--mainpage {\n  font-size: 2.3rem;\n}\n\n.header--logo {\n  font-size: 1.2rem;\n}\n\n.text--navbar {\n  font-size: 1rem;\n}\n\n@media (min-width: 650px) {\n  .header {\n    font-size: 1.8rem;\n  }\n\n  .header--mainpage {\n    font-size: 3rem;\n  }\n\n  .header--logo {\n    font-size: 1.5rem;\n  }\n\n  .text--navbar {\n    font-size: 1.2rem;\n  }\n}\n\n@media (min-width: 950px) {\n  .header--mainpage {\n    font-size: 4rem;\n  }\n\n  .mainpage__text {\n    font-size: 1.2rem;\n  }\n}\n\n@media (min-width: 1200px) {\n  .header {\n    font-size: 2rem;\n  }\n\n  .header--mainpage {\n    font-size: 4.4rem;\n  }\n\n  .text--navbar {\n    font-size: 1rem;\n  }\n\n}`,"",{version:3,sources:["webpack://./src/css/client/fonts.css"],names:[],mappings:"AAAA;EACE,eAAe;EACf,yBAAyB;EACzB,yBAAyB;EACzB,4BAA4B;EAC5B,uBAAuB;AACzB;;AAEA;EACE,yBAAyB;EACzB,4CAAuD;EACvD,gBAAgB;AAClB;;AAEA;EACE,yBAAyB;EACzB,4CAAsD;EACtD,gBAAgB;AAClB;;AAEA;EACE,yBAAyB;EACzB,4CAAwD;EACxD,gBAAgB;AAClB;;AAEA;EACE,yBAAyB;EACzB,4CAAoD;EACpD,gBAAgB;AAClB;;AAEA;EACE,yBAAyB;EACzB,sCAAsC;EACtC,YAAY;AACd;;AAEA;EACE,sCAAsC;AACxC;;AAEA;;;EAGE,yCAAyC;AAC3C;;AAEA;;EAEE,oCAAoC;AACtC;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE;IACE,iBAAiB;EACnB;;EAEA;IACE,eAAe;EACjB;;EAEA;IACE,iBAAiB;EACnB;;EAEA;IACE,iBAAiB;EACnB;AACF;;AAEA;EACE;IACE,eAAe;EACjB;;EAEA;IACE,iBAAiB;EACnB;AACF;;AAEA;EACE;IACE,eAAe;EACjB;;EAEA;IACE,iBAAiB;EACnB;;EAEA;IACE,eAAe;EACjB;;AAEF",sourcesContent:[":root {\n  font-size: 16px;\n  --font-weight-normal: 400;\n  --font-weight-medium: 500;\n  --font-weight-semi-bold: 600;\n  --font-weight-bold: 700;\n}\n\n@font-face {\n  font-family: 'Montserrat';\n  src: url(../../fonts/Montserrat/Montserrat-Regular.ttf);\n  font-weight: 400;\n}\n\n@font-face {\n  font-family: 'Montserrat';\n  src: url(../../fonts/Montserrat/Montserrat-Medium.ttf);\n  font-weight: 500;\n}\n\n@font-face {\n  font-family: 'Montserrat';\n  src: url(../../fonts/Montserrat/Montserrat-SemiBold.ttf);\n  font-weight: 600;\n}\n\n@font-face {\n  font-family: 'Montserrat';\n  src: url(../../fonts/Montserrat/Montserrat-Bold.ttf);\n  font-weight: 700;\n}\n\n* {\n  font-family: 'Montserrat';\n  font-weight: var(--font-weight-normal);\n  color: white;\n}\n\n.text--navbar {\n  font-weight: var(--font-weight-medium);\n}\n\n.header--logo,\n.header--panel,\n.excursions__price {\n  font-weight: var(--font-weight-semi-bold);\n}\n\n.header--mainpage,\n.header__border {\n  font-weight: var(--font-weight-bold);\n}\n\n.header {\n  font-size: 1.5rem;\n}\n\n.header--mainpage {\n  font-size: 2.3rem;\n}\n\n.header--logo {\n  font-size: 1.2rem;\n}\n\n.text--navbar {\n  font-size: 1rem;\n}\n\n@media (min-width: 650px) {\n  .header {\n    font-size: 1.8rem;\n  }\n\n  .header--mainpage {\n    font-size: 3rem;\n  }\n\n  .header--logo {\n    font-size: 1.5rem;\n  }\n\n  .text--navbar {\n    font-size: 1.2rem;\n  }\n}\n\n@media (min-width: 950px) {\n  .header--mainpage {\n    font-size: 4rem;\n  }\n\n  .mainpage__text {\n    font-size: 1.2rem;\n  }\n}\n\n@media (min-width: 1200px) {\n  .header {\n    font-size: 2rem;\n  }\n\n  .header--mainpage {\n    font-size: 4.4rem;\n  }\n\n  .text--navbar {\n    font-size: 1rem;\n  }\n\n}"],sourceRoot:""}]);const g=p},446:(e,t,n)=>{n.d(t,{A:()=>u});var i=n(354),r=n.n(i),s=n(314),o=n.n(s),a=n(417),l=n.n(a),c=new URL(n(824),n.b),h=o()(r()),d=l()(c);h.push([e.id,`:root {\n  --primary-color: #517579;\n  --primary-color-bright: #658888;\n  --primary-color-stripe: #7a9e9e;\n  --secondary-color: #011E3F;\n}\n\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nul {\n  list-style: none;\n}\n\n.navbar {\n  position: fixed;\n  z-index: 999;\n  display: flex;\n  padding: 40px 60px;\n  width: 100vw;\n  height: 110px;\n  color: white;\n  background-color: transparent;\n}\n\n.navbar--background-scroll,\n.navbar--background-basket-btn,\n.navbar--background-navbar-btn {\n  background-color: var(--primary-color);\n}\n\n.navbar__item,\n.header--logo {\n  margin: auto 0;\n}\n\n.header--logo {\n  position: relative;\n}\n\n.wrapper--main {\n  min-height: 100vh;\n  padding-top: 130px;\n  background: linear-gradient(135deg, #517579 0%, #899280 100%);\n}\n.mainpage {\n  color: white;\n}\n\n.mainpage__container {\n  text-align: center;\n}\n\n.mainpage__text {\n  padding-inline: 5vw;\n}\n\n.header--mainpage {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n  margin-bottom: 20px;\n}\n\n\n\n.header__border {\n  padding-inline: 10px;\n  border: 5px solid #ECA222;\n  border-radius: 100vw;\n}\n\n.excursions__item ::-webkit-scrollbar {\n  width: 0.5em;\n}\n\n.excursions__item ::-webkit-scrollbar-thumb {\n  border-radius: 100vw;\n  background-color: var(--secondary-color);\n}\n\n.excursions__item ::-webkit-scrollbar-track {\n  margin-block: 0.5em;\n  border-radius: 100vw;\n  background-color: white;\n}\n\n.panel__excursions {\n  display: grid;\n  padding-bottom: 40px;\n}\n\n\n.excursions__item {\n  display: flex;\n  flex-direction: column;\n  padding: 20px 40px;\n  gap: 30px;\n  background: linear-gradient(80deg, #517579 40%, #a9a483 250%);\n}\n\n.excursions__item:nth-child(odd) {\n  background: linear-gradient(130deg, #517579 40%, #a9a483 160%);\n}\n\n.excursions__name {\n  display: inline-block;\n  margin-bottom: 10px;\n  border-bottom: 3px solid var(--primary-color-stripe);\n}\n\n.excursions__description {\n  max-height: 150px;\n  overflow-y: auto;\n  padding-bottom: 10px;\n  border-bottom: 3px solid var(--primary-color-stripe);\n}\n\n.excursions__field-error {\n  color: red;\n}\n\n.excursions__form {\n  margin-top: auto;\n}\n\n.excursions__field {\n  margin: auto 0;\n}\n\n.excursions__field-name {\n  display: grid;\n  justify-content: center;\n  gap: 10px;\n}\n\n.excursions__price-wrapper {\n  grid-column: 1 / 2;\n}\n\n.excursions__field-error {\n  grid-column: 1 / 3;\n  grid-row: 2 / 3\n}\n\n.excursions__field--submit {\n  text-align: center;\n}\n\n.excursions__field-input {\n  border: none;\n  color: white;\n  background-color: var(--primary-color-bright);\n}\n\n.excursions__field-input {\n  grid-column: 2 / 3;\n  justify-self: center;\n  text-align: center;\n}\n\n.excursions__field-input--submit {\n  padding: 20px;\n  margin-top: 30px;\n  border: 4px solid white;\n  background-color: var(--secondary-color);\n}\n\n\n.excursions__form> :first-child {\n  margin-bottom: 10px;\n}\n\n.navbar__toggle {\n  display: none;\n}\n\n.basket-btn {\n  display: none;\n}\n\n.basket-btn__wrapper {\n  position: absolute;\n  top: 37px;\n  right: 25px;\n  z-index: 999;\n}\n\n.basket-btn__icon {\n  content: url(${d});\n  width: 30px;\n  height: 30px;\n}\n\n.basket-btn__quantity {\n  position: absolute;\n  display: none;\n  justify-content: center;\n  align-items: center;\n  width: 30px;\n  height: 30px;\n}\n\n.excursions__item--prototype,\n.item-list__item--prototype {\n  display: none !important;\n}\n`,"",{version:3,sources:["webpack://./src/css/client/global.css"],names:[],mappings:"AAAA;EACE,wBAAwB;EACxB,+BAA+B;EAC/B,+BAA+B;EAC/B,0BAA0B;AAC5B;;AAEA;EACE,SAAS;EACT,UAAU;EACV,sBAAsB;AACxB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,eAAe;EACf,YAAY;EACZ,aAAa;EACb,kBAAkB;EAClB,YAAY;EACZ,aAAa;EACb,YAAY;EACZ,6BAA6B;AAC/B;;AAEA;;;EAGE,sCAAsC;AACxC;;AAEA;;EAEE,cAAc;AAChB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,iBAAiB;EACjB,kBAAkB;EAClB,6DAA6D;AAC/D;AACA;EACE,YAAY;AACd;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,mBAAmB;AACrB;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,mBAAmB;EACnB,SAAS;EACT,mBAAmB;AACrB;;;;AAIA;EACE,oBAAoB;EACpB,yBAAyB;EACzB,oBAAoB;AACtB;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,oBAAoB;EACpB,wCAAwC;AAC1C;;AAEA;EACE,mBAAmB;EACnB,oBAAoB;EACpB,uBAAuB;AACzB;;AAEA;EACE,aAAa;EACb,oBAAoB;AACtB;;;AAGA;EACE,aAAa;EACb,sBAAsB;EACtB,kBAAkB;EAClB,SAAS;EACT,6DAA6D;AAC/D;;AAEA;EACE,8DAA8D;AAChE;;AAEA;EACE,qBAAqB;EACrB,mBAAmB;EACnB,oDAAoD;AACtD;;AAEA;EACE,iBAAiB;EACjB,gBAAgB;EAChB,oBAAoB;EACpB,oDAAoD;AACtD;;AAEA;EACE,UAAU;AACZ;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,aAAa;EACb,uBAAuB;EACvB,SAAS;AACX;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;EAClB;AACF;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,YAAY;EACZ,YAAY;EACZ,6CAA6C;AAC/C;;AAEA;EACE,kBAAkB;EAClB,oBAAoB;EACpB,kBAAkB;AACpB;;AAEA;EACE,aAAa;EACb,gBAAgB;EAChB,uBAAuB;EACvB,wCAAwC;AAC1C;;;AAGA;EACE,mBAAmB;AACrB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,kBAAkB;EAClB,SAAS;EACT,WAAW;EACX,YAAY;AACd;;AAEA;EACE,gDAA0C;EAC1C,WAAW;EACX,YAAY;AACd;;AAEA;EACE,kBAAkB;EAClB,aAAa;EACb,uBAAuB;EACvB,mBAAmB;EACnB,WAAW;EACX,YAAY;AACd;;AAEA;;EAEE,wBAAwB;AAC1B",sourcesContent:[":root {\n  --primary-color: #517579;\n  --primary-color-bright: #658888;\n  --primary-color-stripe: #7a9e9e;\n  --secondary-color: #011E3F;\n}\n\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nul {\n  list-style: none;\n}\n\n.navbar {\n  position: fixed;\n  z-index: 999;\n  display: flex;\n  padding: 40px 60px;\n  width: 100vw;\n  height: 110px;\n  color: white;\n  background-color: transparent;\n}\n\n.navbar--background-scroll,\n.navbar--background-basket-btn,\n.navbar--background-navbar-btn {\n  background-color: var(--primary-color);\n}\n\n.navbar__item,\n.header--logo {\n  margin: auto 0;\n}\n\n.header--logo {\n  position: relative;\n}\n\n.wrapper--main {\n  min-height: 100vh;\n  padding-top: 130px;\n  background: linear-gradient(135deg, #517579 0%, #899280 100%);\n}\n.mainpage {\n  color: white;\n}\n\n.mainpage__container {\n  text-align: center;\n}\n\n.mainpage__text {\n  padding-inline: 5vw;\n}\n\n.header--mainpage {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n  margin-bottom: 20px;\n}\n\n\n\n.header__border {\n  padding-inline: 10px;\n  border: 5px solid #ECA222;\n  border-radius: 100vw;\n}\n\n.excursions__item ::-webkit-scrollbar {\n  width: 0.5em;\n}\n\n.excursions__item ::-webkit-scrollbar-thumb {\n  border-radius: 100vw;\n  background-color: var(--secondary-color);\n}\n\n.excursions__item ::-webkit-scrollbar-track {\n  margin-block: 0.5em;\n  border-radius: 100vw;\n  background-color: white;\n}\n\n.panel__excursions {\n  display: grid;\n  padding-bottom: 40px;\n}\n\n\n.excursions__item {\n  display: flex;\n  flex-direction: column;\n  padding: 20px 40px;\n  gap: 30px;\n  background: linear-gradient(80deg, #517579 40%, #a9a483 250%);\n}\n\n.excursions__item:nth-child(odd) {\n  background: linear-gradient(130deg, #517579 40%, #a9a483 160%);\n}\n\n.excursions__name {\n  display: inline-block;\n  margin-bottom: 10px;\n  border-bottom: 3px solid var(--primary-color-stripe);\n}\n\n.excursions__description {\n  max-height: 150px;\n  overflow-y: auto;\n  padding-bottom: 10px;\n  border-bottom: 3px solid var(--primary-color-stripe);\n}\n\n.excursions__field-error {\n  color: red;\n}\n\n.excursions__form {\n  margin-top: auto;\n}\n\n.excursions__field {\n  margin: auto 0;\n}\n\n.excursions__field-name {\n  display: grid;\n  justify-content: center;\n  gap: 10px;\n}\n\n.excursions__price-wrapper {\n  grid-column: 1 / 2;\n}\n\n.excursions__field-error {\n  grid-column: 1 / 3;\n  grid-row: 2 / 3\n}\n\n.excursions__field--submit {\n  text-align: center;\n}\n\n.excursions__field-input {\n  border: none;\n  color: white;\n  background-color: var(--primary-color-bright);\n}\n\n.excursions__field-input {\n  grid-column: 2 / 3;\n  justify-self: center;\n  text-align: center;\n}\n\n.excursions__field-input--submit {\n  padding: 20px;\n  margin-top: 30px;\n  border: 4px solid white;\n  background-color: var(--secondary-color);\n}\n\n\n.excursions__form> :first-child {\n  margin-bottom: 10px;\n}\n\n.navbar__toggle {\n  display: none;\n}\n\n.basket-btn {\n  display: none;\n}\n\n.basket-btn__wrapper {\n  position: absolute;\n  top: 37px;\n  right: 25px;\n  z-index: 999;\n}\n\n.basket-btn__icon {\n  content: url(../../assets/basket_icon.svg);\n  width: 30px;\n  height: 30px;\n}\n\n.basket-btn__quantity {\n  position: absolute;\n  display: none;\n  justify-content: center;\n  align-items: center;\n  width: 30px;\n  height: 30px;\n}\n\n.excursions__item--prototype,\n.item-list__item--prototype {\n  display: none !important;\n}\n"],sourceRoot:""}]);const u=h},461:(e,t,n)=>{n.d(t,{A:()=>A});var i=n(354),r=n.n(i),s=n(314),o=n.n(s),a=n(417),l=n.n(a),c=new URL(n(241),n.b),h=new URL(n(970),n.b),d=o()(r()),u=l()(c),p=l()(h);d.push([e.id,`.navbar {\n  justify-content: center;\n}\n\n  .navbar__container--mobile {\n    position: absolute;\n    top: 110px;\n    display: none;\n    flex-direction: column;\n    align-items: center;\n    gap: 20px;\n    padding-block: 20px 40px;\n    width: 100vw;\n    border-block: 3px solid var(--primary-color-stripe);\n    background-color: var(--primary-color);\n  }\n\n  .navbar__container--open {\n    display: flex;\n  }\n\n  .navbar__item--mobile {\n    text-align: center;\n    padding-block: 20px 15px;\n    padding-inline: 30px;\n    margin-bottom: 5px;\n    border-radius: 6px;\n    border-bottom: 3px solid var(--primary-color-stripe);\n  }\n\n  .navbar__item--mobile:hover {\n    padding-bottom: 20px;\n    margin-bottom: 0;\n    border-bottom: 3px solid transparent;\n    border-radius: 20px;\n    background-color: var(--secondary-color);\n  }\n\n\n.navbar__btn {\n  position: absolute;\n  top: 37px;\n  left: 10px;\n  content: url(${u});\n  width: 30px;\n  height: 30px;\n}\n\n.navbar__btn--checked {\n  content: url(${p});\n}\n\n.basket-btn__quantity {\n  top: 36px;\n  left: 0px;\n  border-radius: 100vw;\n  background-color: var(--primary-color-bright);\n  border: 3px solid var(--primary-color-stripe);\n}\n\n@media (min-width: 650px) {\n\n  .navbar__btn,\n  .basket-btn__icon {\n    width: 40px;\n    height: 40px;\n  }\n\n  .basket-btn__quantity {\n    top: 11px;\n    left: 5px;\n    border: unset;\n    background-color: unset;\n  }\n}\n\n.panel__container {\n  text-align: center;\n  margin-bottom: 40px;\n}\n\n.header--panel {\n  display: inline-block;\n  position: relative;\n}\n\n.header--panel::after {\n  content: '';\n  position: absolute;\n  top: 35px;\n  left: -20px;\n  right: -20px;\n  border-bottom: 3px solid var(--primary-color-stripe);\n}\n\n.text--mainpage {\n  padding-inline: 20px;\n}\n\n.header--logo::after {\n  content: '';\n  position: absolute;\n  top: 35px;\n  left: -20px;\n  right: -20px;\n  border-bottom: 3px solid var(--primary-color-stripe);\n}\n\n.mainpage {\n  display: flex;\n  flex-direction: column;\n  gap: 30px;\n  margin-top: 20px;\n}\n\n.text--mainpage {\n  padding-inline: 20px;\n}\n\n.panel__excursions {\n  justify-content: center;\n  column-gap: 60px;\n  row-gap: 40px;\n  grid-template-columns: minmax(260px, 360px);\n  padding-inline: unset;\n}\n\n.navbar__btn {\n  left: 10px;\n}\n\n.basket-btn__wrapper {\n  top: 30px;\n  right: 10px;\n}\n\n\n@media (min-width: 360px) {\n  .navbar__btn {\n    left: 25px;\n  }\n\n  .basket-btn__wrapper {\n    right: 25px;\n  }\n\n  .panel__excursions {\n    padding-inline: 10vw;\n  }\n\n}\n\n@media (min-width: 950px) {\n  .panel__excursions {\n    grid-template-columns: 360px 360px;\n    padding-inline: 10vw;\n  }\n}`,"",{version:3,sources:["webpack://./src/css/client/mobile.css"],names:[],mappings:"AAAA;EACE,uBAAuB;AACzB;;EAEE;IACE,kBAAkB;IAClB,UAAU;IACV,aAAa;IACb,sBAAsB;IACtB,mBAAmB;IACnB,SAAS;IACT,wBAAwB;IACxB,YAAY;IACZ,mDAAmD;IACnD,sCAAsC;EACxC;;EAEA;IACE,aAAa;EACf;;EAEA;IACE,kBAAkB;IAClB,wBAAwB;IACxB,oBAAoB;IACpB,kBAAkB;IAClB,kBAAkB;IAClB,oDAAoD;EACtD;;EAEA;IACE,oBAAoB;IACpB,gBAAgB;IAChB,oCAAoC;IACpC,mBAAmB;IACnB,wCAAwC;EAC1C;;;AAGF;EACE,kBAAkB;EAClB,SAAS;EACT,UAAU;EACV,gDAA6C;EAC7C,WAAW;EACX,YAAY;AACd;;AAEA;EACE,gDAAyC;AAC3C;;AAEA;EACE,SAAS;EACT,SAAS;EACT,oBAAoB;EACpB,6CAA6C;EAC7C,6CAA6C;AAC/C;;AAEA;;EAEE;;IAEE,WAAW;IACX,YAAY;EACd;;EAEA;IACE,SAAS;IACT,SAAS;IACT,aAAa;IACb,uBAAuB;EACzB;AACF;;AAEA;EACE,kBAAkB;EAClB,mBAAmB;AACrB;;AAEA;EACE,qBAAqB;EACrB,kBAAkB;AACpB;;AAEA;EACE,WAAW;EACX,kBAAkB;EAClB,SAAS;EACT,WAAW;EACX,YAAY;EACZ,oDAAoD;AACtD;;AAEA;EACE,oBAAoB;AACtB;;AAEA;EACE,WAAW;EACX,kBAAkB;EAClB,SAAS;EACT,WAAW;EACX,YAAY;EACZ,oDAAoD;AACtD;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,SAAS;EACT,gBAAgB;AAClB;;AAEA;EACE,oBAAoB;AACtB;;AAEA;EACE,uBAAuB;EACvB,gBAAgB;EAChB,aAAa;EACb,2CAA2C;EAC3C,qBAAqB;AACvB;;AAEA;EACE,UAAU;AACZ;;AAEA;EACE,SAAS;EACT,WAAW;AACb;;;AAGA;EACE;IACE,UAAU;EACZ;;EAEA;IACE,WAAW;EACb;;EAEA;IACE,oBAAoB;EACtB;;AAEF;;AAEA;EACE;IACE,kCAAkC;IAClC,oBAAoB;EACtB;AACF",sourcesContent:[".navbar {\n  justify-content: center;\n}\n\n  .navbar__container--mobile {\n    position: absolute;\n    top: 110px;\n    display: none;\n    flex-direction: column;\n    align-items: center;\n    gap: 20px;\n    padding-block: 20px 40px;\n    width: 100vw;\n    border-block: 3px solid var(--primary-color-stripe);\n    background-color: var(--primary-color);\n  }\n\n  .navbar__container--open {\n    display: flex;\n  }\n\n  .navbar__item--mobile {\n    text-align: center;\n    padding-block: 20px 15px;\n    padding-inline: 30px;\n    margin-bottom: 5px;\n    border-radius: 6px;\n    border-bottom: 3px solid var(--primary-color-stripe);\n  }\n\n  .navbar__item--mobile:hover {\n    padding-bottom: 20px;\n    margin-bottom: 0;\n    border-bottom: 3px solid transparent;\n    border-radius: 20px;\n    background-color: var(--secondary-color);\n  }\n\n\n.navbar__btn {\n  position: absolute;\n  top: 37px;\n  left: 10px;\n  content: url(../../assets/hamburger_icon.svg);\n  width: 30px;\n  height: 30px;\n}\n\n.navbar__btn--checked {\n  content: url(../../assets/cross_icon.svg);\n}\n\n.basket-btn__quantity {\n  top: 36px;\n  left: 0px;\n  border-radius: 100vw;\n  background-color: var(--primary-color-bright);\n  border: 3px solid var(--primary-color-stripe);\n}\n\n@media (min-width: 650px) {\n\n  .navbar__btn,\n  .basket-btn__icon {\n    width: 40px;\n    height: 40px;\n  }\n\n  .basket-btn__quantity {\n    top: 11px;\n    left: 5px;\n    border: unset;\n    background-color: unset;\n  }\n}\n\n.panel__container {\n  text-align: center;\n  margin-bottom: 40px;\n}\n\n.header--panel {\n  display: inline-block;\n  position: relative;\n}\n\n.header--panel::after {\n  content: '';\n  position: absolute;\n  top: 35px;\n  left: -20px;\n  right: -20px;\n  border-bottom: 3px solid var(--primary-color-stripe);\n}\n\n.text--mainpage {\n  padding-inline: 20px;\n}\n\n.header--logo::after {\n  content: '';\n  position: absolute;\n  top: 35px;\n  left: -20px;\n  right: -20px;\n  border-bottom: 3px solid var(--primary-color-stripe);\n}\n\n.mainpage {\n  display: flex;\n  flex-direction: column;\n  gap: 30px;\n  margin-top: 20px;\n}\n\n.text--mainpage {\n  padding-inline: 20px;\n}\n\n.panel__excursions {\n  justify-content: center;\n  column-gap: 60px;\n  row-gap: 40px;\n  grid-template-columns: minmax(260px, 360px);\n  padding-inline: unset;\n}\n\n.navbar__btn {\n  left: 10px;\n}\n\n.basket-btn__wrapper {\n  top: 30px;\n  right: 10px;\n}\n\n\n@media (min-width: 360px) {\n  .navbar__btn {\n    left: 25px;\n  }\n\n  .basket-btn__wrapper {\n    right: 25px;\n  }\n\n  .panel__excursions {\n    padding-inline: 10vw;\n  }\n\n}\n\n@media (min-width: 950px) {\n  .panel__excursions {\n    grid-template-columns: 360px 360px;\n    padding-inline: 10vw;\n  }\n}"],sourceRoot:""}]);const A=d},790:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(354),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([e.id,'html, body, body div, span, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, abbr, address, cite, code, del, dfn, em, img, ins, kbd, q, samp, small, strong, sub, sup, var, b, i, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, figure, footer, header, menu, nav, section, time, mark, audio, video, details, summary {margin: 0; padding: 0; border: 0; font-size: 100%; font-weight: normal; vertical-align: baseline; background: transparent;}\n\nmain, article, aside, figure, footer, header, nav, section, details, summary {display: block;}\n\nhtml {box-sizing: border-box;}\n\n*, *:before, *:after {box-sizing: inherit;}\n\nimg {max-width: 100%;}\n\nul {list-style: none;} /* we\'ll restore bullets as needed for content */\n\nblockquote, q {quotes: none;}\n\nblockquote:before, blockquote:after, q:before, q:after {content: \'\'; content: none;}\n\na {margin: 0; padding: 0; font-size: 100%; vertical-align: baseline; background: transparent;}\n\ndel {text-decoration: line-through;}\n\nabbr[title], dfn[title] {border-bottom: 1px dotted #000; cursor: help;}\n\ntable {border-collapse: separate; border-spacing: 0; text-align: left;}\nth {font-weight: bold; vertical-align: bottom;}\ntd {font-weight: normal; vertical-align: top;}\ntd img {vertical-align: top;}\n\nhr {display: block; height: 1px; border: 0; border-top: 1px solid #999; margin: 1rem 0; padding: 0;}\n\ninput, select {vertical-align: middle;}\n\npre {white-space: pre-line;}\n\ninput[type="radio"] {vertical-align: text-bottom;}\ninput[type="checkbox"] {vertical-align: bottom;}\n\nsmall {font-size: .8rem;}\n\nstrong {font-weight: bold;}\n\nsub, sup {font-size: .8rem; line-height: 0; position: relative;}\nsup {top: -0.5rem;}\nsub {bottom: -0.25rem;}\n\npre, code, kbd, samp {font-family: monospace, sans-serif;}\n\nlabel, input[type=button], input[type=submit], input[type=file], button {cursor: pointer;}\n\nbutton, input, select, textarea {margin: 0;}\n\nins {background-color: var(--highlight-color); color: #000; text-decoration: none;}\nmark {background-color: var(--highlight-color); color: #000; font-style: italic; font-weight: bold;}\n\nblockquote {padding: 2rem; border-left: 1px solid #333;}\n\n.clearfix:after {content: ""; display: table; clear: both;} /* https://css-tricks.com/snippets/css/clear-fix/ */\n\n/* ———— END THE GENERIC RESETS ———— */\n\n:root {\n\t--font-system: system-ui, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"; /* https://css-tricks.com/snippets/css/system-font-stack */\n\t--text-color: #333;\n\t--featured-color: #03f;\n\t--featured-color-hover: #69f;\n\t--highlight-color: #fcd700;\n}\n\nbody {font-size: 16px; font-family: var(--font-system); color: var(--text-color);}\n\na {color: var(--featured-color);}\na:hover {color: var(--featured-color-hover);}\n\n@media screen and (max-width: 480px) {\n\t\n}\n\n@media print {\n\t\n}',"",{version:3,sources:["webpack://./src/css/reset.css"],names:[],mappings:"AAAA,6YAA6Y,SAAS,EAAE,UAAU,EAAE,SAAS,EAAE,eAAe,EAAE,mBAAmB,EAAE,wBAAwB,EAAE,uBAAuB,CAAC;;AAEvgB,8EAA8E,cAAc,CAAC;;AAE7F,MAAM,sBAAsB,CAAC;;AAE7B,sBAAsB,mBAAmB,CAAC;;AAE1C,KAAK,eAAe,CAAC;;AAErB,IAAI,gBAAgB,CAAC,EAAE,gDAAgD;;AAEvE,eAAe,YAAY,CAAC;;AAE5B,wDAAwD,WAAW,EAAE,aAAa,CAAC;;AAEnF,GAAG,SAAS,EAAE,UAAU,EAAE,eAAe,EAAE,wBAAwB,EAAE,uBAAuB,CAAC;;AAE7F,KAAK,6BAA6B,CAAC;;AAEnC,yBAAyB,8BAA8B,EAAE,YAAY,CAAC;;AAEtE,OAAO,yBAAyB,EAAE,iBAAiB,EAAE,gBAAgB,CAAC;AACtE,IAAI,iBAAiB,EAAE,sBAAsB,CAAC;AAC9C,IAAI,mBAAmB,EAAE,mBAAmB,CAAC;AAC7C,QAAQ,mBAAmB,CAAC;;AAE5B,IAAI,cAAc,EAAE,WAAW,EAAE,SAAS,EAAE,0BAA0B,EAAE,cAAc,EAAE,UAAU,CAAC;;AAEnG,eAAe,sBAAsB,CAAC;;AAEtC,KAAK,qBAAqB,CAAC;;AAE3B,qBAAqB,2BAA2B,CAAC;AACjD,wBAAwB,sBAAsB,CAAC;;AAE/C,OAAO,gBAAgB,CAAC;;AAExB,QAAQ,iBAAiB,CAAC;;AAE1B,UAAU,gBAAgB,EAAE,cAAc,EAAE,kBAAkB,CAAC;AAC/D,KAAK,YAAY,CAAC;AAClB,KAAK,gBAAgB,CAAC;;AAEtB,sBAAsB,kCAAkC,CAAC;;AAEzD,yEAAyE,eAAe,CAAC;;AAEzF,iCAAiC,SAAS,CAAC;;AAE3C,KAAK,wCAAwC,EAAE,WAAW,EAAE,qBAAqB,CAAC;AAClF,MAAM,wCAAwC,EAAE,WAAW,EAAE,kBAAkB,EAAE,iBAAiB,CAAC;;AAEnG,YAAY,aAAa,EAAE,2BAA2B,CAAC;;AAEvD,iBAAiB,WAAW,EAAE,cAAc,EAAE,WAAW,CAAC,EAAE,mDAAmD;;AAE/G,qCAAqC;;AAErC;CACC,oIAAoI,EAAE,0DAA0D;CAChM,kBAAkB;CAClB,sBAAsB;CACtB,4BAA4B;CAC5B,0BAA0B;AAC3B;;AAEA,MAAM,eAAe,EAAE,+BAA+B,EAAE,wBAAwB,CAAC;;AAEjF,GAAG,4BAA4B,CAAC;AAChC,SAAS,kCAAkC,CAAC;;AAE5C;;AAEA;;AAEA;;AAEA",sourcesContent:['html, body, body div, span, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, abbr, address, cite, code, del, dfn, em, img, ins, kbd, q, samp, small, strong, sub, sup, var, b, i, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, figure, footer, header, menu, nav, section, time, mark, audio, video, details, summary {margin: 0; padding: 0; border: 0; font-size: 100%; font-weight: normal; vertical-align: baseline; background: transparent;}\n\nmain, article, aside, figure, footer, header, nav, section, details, summary {display: block;}\n\nhtml {box-sizing: border-box;}\n\n*, *:before, *:after {box-sizing: inherit;}\n\nimg {max-width: 100%;}\n\nul {list-style: none;} /* we\'ll restore bullets as needed for content */\n\nblockquote, q {quotes: none;}\n\nblockquote:before, blockquote:after, q:before, q:after {content: \'\'; content: none;}\n\na {margin: 0; padding: 0; font-size: 100%; vertical-align: baseline; background: transparent;}\n\ndel {text-decoration: line-through;}\n\nabbr[title], dfn[title] {border-bottom: 1px dotted #000; cursor: help;}\n\ntable {border-collapse: separate; border-spacing: 0; text-align: left;}\nth {font-weight: bold; vertical-align: bottom;}\ntd {font-weight: normal; vertical-align: top;}\ntd img {vertical-align: top;}\n\nhr {display: block; height: 1px; border: 0; border-top: 1px solid #999; margin: 1rem 0; padding: 0;}\n\ninput, select {vertical-align: middle;}\n\npre {white-space: pre-line;}\n\ninput[type="radio"] {vertical-align: text-bottom;}\ninput[type="checkbox"] {vertical-align: bottom;}\n\nsmall {font-size: .8rem;}\n\nstrong {font-weight: bold;}\n\nsub, sup {font-size: .8rem; line-height: 0; position: relative;}\nsup {top: -0.5rem;}\nsub {bottom: -0.25rem;}\n\npre, code, kbd, samp {font-family: monospace, sans-serif;}\n\nlabel, input[type=button], input[type=submit], input[type=file], button {cursor: pointer;}\n\nbutton, input, select, textarea {margin: 0;}\n\nins {background-color: var(--highlight-color); color: #000; text-decoration: none;}\nmark {background-color: var(--highlight-color); color: #000; font-style: italic; font-weight: bold;}\n\nblockquote {padding: 2rem; border-left: 1px solid #333;}\n\n.clearfix:after {content: ""; display: table; clear: both;} /* https://css-tricks.com/snippets/css/clear-fix/ */\n\n/* ———— END THE GENERIC RESETS ———— */\n\n:root {\n\t--font-system: system-ui, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"; /* https://css-tricks.com/snippets/css/system-font-stack */\n\t--text-color: #333;\n\t--featured-color: #03f;\n\t--featured-color-hover: #69f;\n\t--highlight-color: #fcd700;\n}\n\nbody {font-size: 16px; font-family: var(--font-system); color: var(--text-color);}\n\na {color: var(--featured-color);}\na:hover {color: var(--featured-color-hover);}\n\n@media screen and (max-width: 480px) {\n\t\n}\n\n@media print {\n\t\n}'],sourceRoot:""}]);const a=o},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",i=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),i&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),i&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,i,r,s){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(i)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var c=0;c<e.length;c++){var h=[].concat(e[c]);i&&o[h[0]]||(void 0!==s&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=s),n&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=n):h[2]=n),r&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=r):h[4]="".concat(r)),t.push(h))}},t}},417:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},354:e=>{e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"==typeof btoa){var i=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),s="/*# ".concat(r," */");return[t].concat([s]).join("\n")}return[t].join("\n")}},72:e=>{var t=[];function n(e){for(var n=-1,i=0;i<t.length;i++)if(t[i].identifier===e){n=i;break}return n}function i(e,i){for(var s={},o=[],a=0;a<e.length;a++){var l=e[a],c=i.base?l[0]+i.base:l[0],h=s[c]||0,d="".concat(c," ").concat(h);s[c]=h+1;var u=n(d),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==u)t[u].references++,t[u].updater(p);else{var A=r(p,i);i.byIndex=a,t.splice(a,0,{identifier:d,updater:A,references:1})}o.push(d)}return o}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var s=i(e=e||[],r=r||{});return function(e){e=e||[];for(var o=0;o<s.length;o++){var a=n(s[o]);t[a].references--}for(var l=i(e,r),c=0;c<s.length;c++){var h=n(s[c]);0===t[h].references&&(t[h].updater(),t.splice(h,1))}s=l}}},659:e=>{var t={};e.exports=function(e,n){var i=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,r&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},824:(e,t,n)=>{e.exports=n.p+"a0d0c97973b816dcc1b2.svg"},970:(e,t,n)=>{e.exports=n.p+"287ba5cd99810a2323d6.svg"},637:(e,t,n)=>{e.exports=n.p+"b83a848878554af35c1f.svg"},241:(e,t,n)=>{e.exports=n.p+"e0a03a53be72ddd29741.svg"},272:(e,t,n)=>{e.exports=n.p+"ec2321f42740e120f028.png"},622:(e,t,n)=>{e.exports=n.p+"50f0257aa1e905f4bfaf.ttf"},990:(e,t,n)=>{e.exports=n.p+"b8c6753baa964ccac1ba.ttf"},77:(e,t,n)=>{e.exports=n.p+"24785cc015b27a3e964b.ttf"},208:(e,t,n)=>{e.exports=n.p+"93b37a465fc4ec0d0415.ttf"}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={id:i,exports:{}};return e[i](s,s.exports,n),s.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var r=i.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=i[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.b=document.baseURI||self.location.href,n.nc=void 0,(()=>{var e=n(72),t=n.n(e),i=n(825),r=n.n(i),s=n(659),o=n.n(s),a=n(56),l=n.n(a),c=n(540),h=n.n(c),d=n(113),u=n.n(d),p=n(790),A={};A.styleTagTransform=u(),A.setAttributes=l(),A.insert=o().bind(null,"head"),A.domAPI=r(),A.insertStyleElement=h(),t()(p.A,A),p.A&&p.A.locals&&p.A.locals;var _=n(813),m={};m.styleTagTransform=u(),m.setAttributes=l(),m.insert=o().bind(null,"head"),m.domAPI=r(),m.insertStyleElement=h(),t()(_.A,m),_.A&&_.A.locals&&_.A.locals;var f=n(446),g={};g.styleTagTransform=u(),g.setAttributes=l(),g.insert=o().bind(null,"head"),g.domAPI=r(),g.insertStyleElement=h(),t()(f.A,g),f.A&&f.A.locals&&f.A.locals;var C=n(461),b={};b.styleTagTransform=u(),b.setAttributes=l(),b.insert=o().bind(null,"head"),b.domAPI=r(),b.insertStyleElement=h(),t()(C.A,b),C.A&&C.A.locals&&C.A.locals;var y=n(751),E={};E.styleTagTransform=u(),E.setAttributes=l(),E.insert=o().bind(null,"head"),E.domAPI=r(),E.insertStyleElement=h(),t()(y.A,E),y.A&&y.A.locals&&y.A.locals;var v=n(609),w={};w.styleTagTransform=u(),w.setAttributes=l(),w.insert=o().bind(null,"head"),w.domAPI=r(),w.insertStyleElement=h(),t()(v.A,w),v.A&&v.A.locals&&v.A.locals;var x=n(420),k={};k.styleTagTransform=u(),k.setAttributes=l(),k.insert=o().bind(null,"head"),k.domAPI=r(),k.insertStyleElement=h(),t()(x.A,k),x.A&&x.A.locals&&x.A.locals;const I=function(e,t){if(!e)throw B(t)},B=function(e){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+e)},T=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},S={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let t=0;t<e.length;t+=3){const r=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,l=a?e[t+2]:0,c=r>>2,h=(3&r)<<4|o>>4;let d=(15&o)<<2|l>>6,u=63&l;a||(u=64,s||(d=64)),i.push(n[c],n[h],n[d],n[u])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(T(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let t=0;t<e.length;){const r=n[e.charAt(t++)],s=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const a=t<e.length?n[e.charAt(t)]:64;if(++t,null==r||null==s||null==o||null==a)throw new N;const l=r<<2|s>>4;if(i.push(l),64!==o){const e=s<<4&240|o>>2;if(i.push(e),64!==a){const e=o<<6&192|a;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class N extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const P=function(e){const t=T(e);return S.encodeByteArray(t,!0)},D=function(e){return P(e).replace(/\./g,"")},R=function(e){try{return S.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function O(e){return M(void 0,e)}function M(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=M(e[n],t[n]));return e}const L=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&R(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},q=()=>{var e;return null===(e=L())||void 0===e?void 0:e.config};class F{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function z(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")}class U extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,U.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,W.prototype.create)}}class W{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,r=this.errors[e],s=r?function(e,t){return e.replace(j,((e,n)=>{const i=t[n];return null!=i?String(i):`<${n}?>`}))}(r,n):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new U(i,o,n)}}const j=/\{\$([^}]+)}/g;function H(e){return JSON.parse(e)}function $(e){return JSON.stringify(e)}const Y=function(e){let t={},n={},i={},r="";try{const s=e.split(".");t=H(R(s[0])||""),n=H(R(s[1])||""),r=s[2],i=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:i,signature:r}};function V(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function G(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function K(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Q(e,t,n){const i={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=t.call(n,e[r],r,e));return i}function X(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],s=t[r];if(Z(n)&&Z(s)){if(!X(n,s))return!1}else if(n!==s)return!1}for(const e of i)if(!n.includes(e))return!1;return!0}function Z(e){return null!==e&&"object"==typeof e}class J{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"==typeof e)for(let i=0;i<16;i++)n[i]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let e=16;e<80;e++){const t=n[e-3]^n[e-8]^n[e-14]^n[e-16];n[e]=4294967295&(t<<1|t>>>31)}let i,r,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let e=0;e<80;e++){e<40?e<20?(i=l^o&(a^l),r=1518500249):(i=o^a^l,r=1859775393):e<60?(i=o&a|l&(o|a),r=2400959708):(i=o^a^l,r=3395469782);const t=(s<<5|s>>>27)+i+c+r+n[e]&4294967295;c=l,l=a,a=4294967295&(o<<30|o>>>2),o=s,s=t}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let i=0;const r=this.buf_;let s=this.inbuf_;for(;i<t;){if(0===s)for(;i<=n;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<t;)if(r[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(r),s=0;break}}else for(;i<t;)if(r[s]=e[i],++s,++i,s===this.blockSize){this.compress_(r),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let e=this.blockSize-1;e>=56;e--)this.buf_[e]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let t=0;t<5;t++)for(let i=24;i>=0;i-=8)e[n]=this.chain_[t]>>i&255,++n;return e}}function ee(e,t){return`${e} failed: ${t} argument `}const te=function(e){let t=0;for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);i<128?t++:i<2048?t+=2:i>=55296&&i<=56319?(t+=4,n++):t+=3}return t};function ne(e){return e&&e._delegate?e._delegate:e}class ie{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const re="[DEFAULT]";class se{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new F;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(i)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:re})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=re){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=re){return this.instances.has(e)}getOptions(e=re){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(i);return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e,i===re?void 0:i),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var i;return n||null}normalizeInstanceIdentifier(e=re){return this.component?this.component.multipleInstances?e:re:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class oe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new se(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const ae=[];var le;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(le||(le={}));const ce={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},he=le.INFO,de={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},ue=(e,t,...n)=>{if(t<e.logLevel)return;const i=(new Date).toISOString(),r=de[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[r](`[${i}]  ${e.name}:`,...n)};class pe{constructor(e){this.name=e,this._logLevel=he,this._logHandler=ue,this._userLogHandler=null,ae.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?ce[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}}const Ae=(e,t)=>t.some((t=>e instanceof t));let _e,me;const fe=new WeakMap,ge=new WeakMap,Ce=new WeakMap,be=new WeakMap,ye=new WeakMap;let Ee={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ge.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ce.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return we(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function ve(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(me||(me=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(xe(this),e),we(fe.get(this))}:function(...e){return we(t.apply(xe(this),e))}:function(e,...n){const i=t.call(xe(this),e,...n);return Ce.set(i,e.sort?e.sort():[e]),we(i)}:(e instanceof IDBTransaction&&function(e){if(ge.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",s),e.removeEventListener("abort",s)},r=()=>{t(),i()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",s),e.addEventListener("abort",s)}));ge.set(e,t)}(e),Ae(e,_e||(_e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Ee):e);var t}function we(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",s)},r=()=>{t(we(e.result)),i()},s=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&fe.set(t,e)})).catch((()=>{})),ye.set(t,e),t}(e);if(be.has(e))return be.get(e);const t=ve(e);return t!==e&&(be.set(e,t),ye.set(t,e)),t}const xe=e=>ye.get(e),ke=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],Be=new Map;function Te(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Be.get(t))return Be.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=Ie.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!ke.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,r?"readwrite":"readonly");let o=s.store;return i&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),r&&s.done]))[0]};return Be.set(t,s),s}var Se;Se=Ee,Ee={...Se,get:(e,t,n)=>Te(e,t)||Se.get(e,t,n),has:(e,t)=>!!Te(e,t)||Se.has(e,t)};class Ne{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const Pe="@firebase/app",De="0.10.16",Re=new pe("@firebase/app"),Oe="@firebase/app-compat",Me="@firebase/analytics-compat",Le="@firebase/analytics",qe="@firebase/app-check-compat",Fe="@firebase/app-check",ze="@firebase/auth",Ue="@firebase/auth-compat",We="@firebase/database",je="@firebase/data-connect",He="@firebase/database-compat",$e="@firebase/functions",Ye="@firebase/functions-compat",Ve="@firebase/installations",Ge="@firebase/installations-compat",Ke="@firebase/messaging",Qe="@firebase/messaging-compat",Xe="@firebase/performance",Ze="@firebase/performance-compat",Je="@firebase/remote-config",et="@firebase/remote-config-compat",tt="@firebase/storage",nt="@firebase/storage-compat",it="@firebase/firestore",rt="@firebase/vertexai",st="@firebase/firestore-compat",ot="firebase",at="[DEFAULT]",lt={[Pe]:"fire-core",[Oe]:"fire-core-compat",[Le]:"fire-analytics",[Me]:"fire-analytics-compat",[Fe]:"fire-app-check",[qe]:"fire-app-check-compat",[ze]:"fire-auth",[Ue]:"fire-auth-compat",[We]:"fire-rtdb",[je]:"fire-data-connect",[He]:"fire-rtdb-compat",[$e]:"fire-fn",[Ye]:"fire-fn-compat",[Ve]:"fire-iid",[Ge]:"fire-iid-compat",[Ke]:"fire-fcm",[Qe]:"fire-fcm-compat",[Xe]:"fire-perf",[Ze]:"fire-perf-compat",[Je]:"fire-rc",[et]:"fire-rc-compat",[tt]:"fire-gcs",[nt]:"fire-gcs-compat",[it]:"fire-fst",[st]:"fire-fst-compat",[rt]:"fire-vertex","fire-js":"fire-js",[ot]:"fire-js-all"},ct=new Map,ht=new Map,dt=new Map;function ut(e,t){try{e.container.addComponent(t)}catch(n){Re.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function pt(e){const t=e.name;if(dt.has(t))return Re.debug(`There were multiple attempts to register component ${t}.`),!1;dt.set(t,e);for(const t of ct.values())ut(t,e);for(const t of ht.values())ut(t,e);return!0}const At=new W("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class _t{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ie("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw At.create("app-deleted",{appName:this._name})}}function mt(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const i=Object.assign({name:at,automaticDataCollectionEnabled:!1},t),r=i.name;if("string"!=typeof r||!r)throw At.create("bad-app-name",{appName:String(r)});if(n||(n=q()),!n)throw At.create("no-options");const s=ct.get(r);if(s){if(X(n,s.options)&&X(i,s.config))return s;throw At.create("duplicate-app",{appName:r})}const o=new oe(r);for(const e of dt.values())o.addComponent(e);const a=new _t(n,i,o);return ct.set(r,a),a}function ft(e,t,n){var i;let r=null!==(i=lt[e])&&void 0!==i?i:e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${r}" with version "${t}":`];return s&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Re.warn(e.join(" "))}pt(new ie(`${r}-version`,(()=>({library:r,version:t})),"VERSION"))}const gt="firebase-heartbeat-database",Ct=1,bt="firebase-heartbeat-store";let yt=null;function Et(){return yt||(yt=function(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(e,t),a=we(o);return i&&o.addEventListener("upgradeneeded",(e=>{i(we(o.result),e.oldVersion,e.newVersion,we(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),r&&e.addEventListener("versionchange",(e=>r(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(gt,Ct,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(bt)}catch(e){console.warn(e)}}}).catch((e=>{throw At.create("idb-open",{originalErrorMessage:e.message})}))),yt}async function vt(e,t){try{const n=(await Et()).transaction(bt,"readwrite"),i=n.objectStore(bt);await i.put(t,wt(e)),await n.done}catch(e){if(e instanceof U)Re.warn(e.message);else{const t=At.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});Re.warn(t.message)}}}function wt(e){return`${e.name}!${e.options.appId}`}class xt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new It(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=kt();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some((e=>e.date===i)))return;return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}catch(e){Re.warn(e)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=kt(),{heartbeatsToSend:n,unsentEntries:i}=function(e,t=1024){const n=[];let i=e.slice();for(const r of e){const e=n.find((e=>e.agent===r.agent));if(e){if(e.dates.push(r.date),Bt(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Bt(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=D(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Re.warn(e),""}}}function kt(){return(new Date).toISOString().substring(0,10)}class It{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(e){return!1}}()&&new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Et()).transaction(bt),n=await t.objectStore(bt).get(wt(e));return await t.done,n}catch(e){if(e instanceof U)Re.warn(e.message);else{const t=At.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});Re.warn(t.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return vt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return vt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Bt(e){return D(JSON.stringify({version:2,heartbeats:e})).length}pt(new ie("platform-logger",(e=>new Ne(e)),"PRIVATE")),pt(new ie("heartbeat",(e=>new xt(e)),"PRIVATE")),ft(Pe,De,""),ft(Pe,De,"esm2017"),ft("fire-js",""),ft("firebase","11.0.2","app");const Tt=mt({apiKey:"AIzaSyCGShHKbWgPSCOPVzoL8GvcP287Oyeczq0",authDomain:"travel-agency-javascript.firebaseapp.com",databaseURL:"https://travel-agency-javascript-default-rtdb.europe-west1.firebasedatabase.app/",projectId:"travel-agency-javascript",storageBucket:"travel-agency-javascript.firebasestorage.app",messagingSenderId:"628054712472",appId:"1:628054712472:web:a4a55f95cd8eedf02eb0ed"}),St="@firebase/database",Nt="1.0.10";let Pt="";class Dt{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),$(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:H(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Rt{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return V(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Ot=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Dt(t)}}catch(e){}return new Rt},Mt=Ot("localStorage"),Lt=Ot("sessionStorage"),qt=new pe("@firebase/database"),Ft=function(){let e=1;return function(){return e++}}(),zt=function(e){const t=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);if(r>=55296&&r<=56319){const t=r-55296;i++,I(i<e.length,"Surrogate pair missing trail surrogate."),r=65536+(t<<10)+(e.charCodeAt(i)-56320)}r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):r<65536?(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t}(e),n=new J;n.update(t);const i=n.digest();return S.encodeByteArray(i)},Ut=function(...e){let t="";for(let n=0;n<e.length;n++){const i=e[n];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=Ut.apply(null,i):t+="object"==typeof i?$(i):i,t+=" "}return t};let Wt=null,jt=!0;const Ht=function(...e){if(!0===jt&&(jt=!1,null===Wt&&!0===Lt.get("logging_enabled")&&(t=!0,I(!n||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(qt.logLevel=le.VERBOSE,Wt=qt.log.bind(qt),n&&Lt.set("logging_enabled",!0)):"function"==typeof t?Wt=t:(Wt=null,Lt.remove("logging_enabled")))),Wt){const t=Ut.apply(null,e);Wt(t)}var t,n},$t=function(e){return function(...t){Ht(e,...t)}},Yt=function(...e){const t="FIREBASE INTERNAL ERROR: "+Ut(...e);qt.error(t)},Vt=function(...e){const t=`FIREBASE FATAL ERROR: ${Ut(...e)}`;throw qt.error(t),new Error(t)},Gt=function(...e){const t="FIREBASE WARNING: "+Ut(...e);qt.warn(t)},Kt=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Qt="[MIN_NAME]",Xt="[MAX_NAME]",Zt=function(e,t){if(e===t)return 0;if(e===Qt||t===Xt)return-1;if(t===Qt||e===Xt)return 1;{const n=an(e),i=an(t);return null!==n?null!==i?n-i==0?e.length-t.length:n-i:-1:null!==i?1:e<t?-1:1}},Jt=function(e,t){return e===t?0:e<t?-1:1},en=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+$(t))},tn=function(e){if("object"!=typeof e||null===e)return $(e);const t=[];for(const n in e)t.push(n);t.sort();let n="{";for(let i=0;i<t.length;i++)0!==i&&(n+=","),n+=$(t[i]),n+=":",n+=tn(e[t[i]]);return n+="}",n},nn=function(e,t){const n=e.length;if(n<=t)return[e];const i=[];for(let r=0;r<n;r+=t)r+t>n?i.push(e.substring(r,n)):i.push(e.substring(r,r+t));return i};function rn(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const sn=function(e){I(!Kt(e),"Invalid JSON number");let t,n,i,r,s;0===e?(n=0,i=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(r=Math.min(Math.floor(Math.log(e)/Math.LN2),1023),n=r+1023,i=Math.round(e*Math.pow(2,52-r)-Math.pow(2,52))):(n=0,i=Math.round(e/Math.pow(2,-1074))));const o=[];for(s=52;s;s-=1)o.push(i%2?1:0),i=Math.floor(i/2);for(s=11;s;s-=1)o.push(n%2?1:0),n=Math.floor(n/2);o.push(t?1:0),o.reverse();const a=o.join("");let l="";for(s=0;s<64;s+=8){let e=parseInt(a.substr(s,8),2).toString(16);1===e.length&&(e="0"+e),l+=e}return l.toLowerCase()},on=new RegExp("^-?(0*)\\d{1,10}$"),an=function(e){if(on.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},ln=function(e){try{e()}catch(e){setTimeout((()=>{const t=e.stack||"";throw Gt("Exception was thrown by user callback.",t),e}),Math.floor(0))}},cn=function(e,t){const n=setTimeout(e,t);return"number"==typeof n&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"==typeof n&&n.unref&&n.unref(),n};class hn{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){Gt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class dn{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(Ht("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Gt(e)}}class un{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}un.OWNER="owner";const pn="5",An=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,_n="ac",mn="websocket",fn="long_polling";class gn{constructor(e,t,n,i,r=!1,s="",o=!1,a=!1){this.secure=t,this.namespace=n,this.webSocketOnly=i,this.nodeAdmin=r,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Mt.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Mt.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function Cn(e,t,n){let i;if(I("string"==typeof t,"typeof type must == string"),I("object"==typeof n,"typeof params must == object"),t===mn)i=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==fn)throw new Error("Unknown connection type: "+t);i=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const r=[];return rn(n,((e,t)=>{r.push(e+"="+t)})),i+r.join("&")}class bn{constructor(){this.counters_={}}incrementCounter(e,t=1){V(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return O(this.counters_)}}const yn={},En={};function vn(e){const t=e.toString();return yn[t]||(yn[t]=new bn),yn[t]}class wn{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&ln((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const xn="start";class kn{constructor(e,t,n,i,r,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=$t(e),this.stats_=vn(t),this.urlFn=e=>(this.appCheckToken&&(e[_n]=this.appCheckToken),Cn(t,fn,e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new wn(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if("complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new In(((...e)=>{const[t,n,i,r,s]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,t===xn)this.id=n,this.password=i;else{if("close"!==t)throw new Error("Unrecognized command received: "+t);n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,(()=>{this.onClosed_()}))):this.onClosed_()}}),((...e)=>{const[t,n]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,n)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[xn]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=pn,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[_n]=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&An.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){kn.forceAllow_=!0}static forceDisallow(){kn.forceDisallow_=!0}static isAvailable(){return!(!kn.forceAllow_&&(kn.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=$(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=P(t),i=nn(n,1840);for(let e=0;e<i.length;e++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[e]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=$(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class In{constructor(e,t,n,i){this.onDisconnect=n,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Ft(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=In.createIFrame_();let n="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(n='<script>document.domain="'+document.domain+'";<\/script>');const i="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(e){Ht("frame writing exception"),e.stack&&Ht(e.stack),Ht(e)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ht("No IE domain setting required")}catch(t){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){const e=this.pendingSegs.shift();n=n+"&seg"+i+"="+e.seg+"&ts"+i+"="+e.ts+"&d"+i+"="+e.d,i++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(i),n()}))}addTag(e,t){setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{Ht("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(e){}}),Math.floor(1))}}let Bn=null;"undefined"!=typeof MozWebSocket?Bn=MozWebSocket:"undefined"!=typeof WebSocket&&(Bn=WebSocket);class Tn{constructor(e,t,n,i,r,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=$t(this.connId),this.stats_=vn(t),this.connURL=Tn.connectionURL_(t,s,o,i,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,i,r){const s={};return s.v=pn,"undefined"!=typeof location&&location.hostname&&An.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),i&&(s[_n]=i),r&&(s.p=r),Cn(e,mn,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Mt.set("previous_websocket_failure",!0);try{let e;0,this.mySock=new Bn(this.connURL,[],e)}catch(e){this.log_("Error instantiating WebSocket.");const t=e.message||e.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){Tn.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Bn&&!Tn.forceDisallow_}static previouslyFailed(){return Mt.isInMemoryStorage||!0===Mt.get("previous_websocket_failure")}markConnectionHealthy(){Mt.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=H(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(I(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=$(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=nn(t,16384);n.length>1&&this.sendString_(String(n.length));for(let e=0;e<n.length;e++)this.sendString_(n[e])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Tn.responsesRequiredToBeHealthy=2,Tn.healthyTimeout=3e4;class Sn{static get ALL_TRANSPORTS(){return[kn,Tn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=Tn&&Tn.isAvailable();let n=t&&!Tn.previouslyFailed();if(e.webSocketOnly&&(t||Gt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Tn];else{const e=this.transports_=[];for(const t of Sn.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);Sn.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Sn.globalTransportInitialized_=!1;class Nn{constructor(e,t,n,i,r,s,o,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=i,this.authToken_=r,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=$t("c:"+this.id+":"),this.transportManager_=new Sn(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=cn((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=en("t",e),n=en("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=en("t",e),n=en("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=en("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Yt("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Yt("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),pn!==n&&Gt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),cn((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):cn((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Mt.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Pn{put(e,t,n,i){}merge(e,t,n,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class Dn{constructor(e){this.allowedEvents_=e,this.listeners_={},I(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let e=0;e<n.length;e++)n[e].callback.apply(n[e].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const i=this.getInitialEvent(e);i&&t.apply(n,i)}off(e,t,n){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let e=0;e<i.length;e++)if(i[e].callback===t&&(!n||n===i[e].context))return void i.splice(e,1)}validateEventType_(e){I(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class Rn extends Dn{static getInstance(){return new Rn}constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||z()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}getInitialEvent(e){return I("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class On{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Mn(){return new On("")}function Ln(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function qn(e){return e.pieces_.length-e.pieceNum_}function Fn(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new On(e.pieces_,t)}function zn(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Un(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function Wn(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new On(t,0)}function jn(e,t){const n=[];for(let t=e.pieceNum_;t<e.pieces_.length;t++)n.push(e.pieces_[t]);if(t instanceof On)for(let e=t.pieceNum_;e<t.pieces_.length;e++)n.push(t.pieces_[e]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new On(n,0)}function Hn(e){return e.pieceNum_>=e.pieces_.length}function $n(e,t){const n=Ln(e),i=Ln(t);if(null===n)return t;if(n===i)return $n(Fn(e),Fn(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Yn(e,t){if(qn(e)!==qn(t))return!1;for(let n=e.pieceNum_,i=t.pieceNum_;n<=e.pieces_.length;n++,i++)if(e.pieces_[n]!==t.pieces_[i])return!1;return!0}function Vn(e,t){let n=e.pieceNum_,i=t.pieceNum_;if(qn(e)>qn(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[i])return!1;++n,++i}return!0}class Gn{constructor(e,t){this.errorPrefix_=t,this.parts_=Un(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let e=0;e<this.parts_.length;e++)this.byteLength_+=te(this.parts_[e]);Kn(this)}}function Kn(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Qn(e))}function Qn(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class Xn extends Dn{static getInstance(){return new Xn}constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}getInitialEvent(e){return I("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Zn=1e3;class Jn extends Pn{constructor(e,t,n,i,r,s,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=i,this.onServerInfoUpdate_=r,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=Jn.nextPersistentConnectionId_++,this.log_=$t("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Zn,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Xn.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&Rn.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const i=++this.requestNumber_,r={r:i,a:e,b:t};this.log_($(r)),I(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),n&&(this.requestCBHash_[i]=n)}get(e){this.initConnection_();const t=new F,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),t.promise}listen(e,t,n,i){this.initConnection_();const r=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+r),this.listens.has(s)||this.listens.set(s,new Map),I(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),I(!this.listens.get(s).has(r),"listen() called twice for same path/queryId.");const o={onComplete:i,hashFn:t,query:e,tag:n};this.listens.get(s).set(r,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),i=t._queryIdentifier;this.log_("Listen on "+n+" for "+i);const r={p:n};e.tag&&(r.q=t._queryObject,r.t=e.tag),r.h=e.hashFn(),this.sendRequest("q",r,(r=>{const s=r.d,o=r.s;Jn.warnOnListenWarnings_(s,t),(this.listens.get(n)&&this.listens.get(n).get(i))===e&&(this.log_("listen response",r),"ok"!==o&&this.removeListen_(n,i),e.onComplete&&e.onComplete(o,s))}))}static warnOnListenWarnings_(e,t){if(e&&"object"==typeof e&&V(e,"w")){const n=G(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();Gt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=Y(e).claims;return"object"==typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=Y(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,i=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,i))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+i),I(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,i)&&this.connected_&&this.sendUnlisten_(n,i,e._queryObject,t)}sendUnlisten_(e,t,n,i){this.log_("Unlisten on "+e+" for "+t);const r={p:e};i&&(r.q=n,r.t=i),this.sendRequest("n",r)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,i){const r={p:t,d:n};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,(e=>{i&&setTimeout((()=>{i(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,i){this.putInternal("p",e,t,n,i)}merge(e,t,n,i){this.putInternal("m",e,t,n,i)}putInternal(e,t,n,i,r){this.initConnection_();const s={p:t,d:n};void 0!==r&&(s.h=r),this.outstandingPuts_.push({action:e,request:s,onComplete:i}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),i&&i(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+$(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Yt("Unrecognized action received from server: "+$(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){I(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Zn,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Zn,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Zn),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Jn.nextConnectionId_++,r=this.lastSessionId;let s=!1,o=null;const a=function(){o?o.close():(s=!0,n())},l=function(e){I(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)};this.realtime_={close:a,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);s?Ht("getToken() completed but was canceled"):(Ht("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=l&&l.token,o=new Nn(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{Gt(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),r))}catch(e){this.log_("Failed to get token: "+e),s||(this.repoInfo_.nodeAdmin&&Gt(e),a())}}}interrupt(e){Ht("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ht("Resuming connection for reason: "+e),delete this.interruptReasons_[e],K(this.interruptReasons_)&&(this.reconnectDelay_=Zn,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>tn(e))).join("$"):"default";const i=this.removeListen_(e,n);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,t){const n=new On(e).toString();let i;if(this.listens.has(n)){const e=this.listens.get(n);i=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else i=void 0;return i}onAuthRevoked_(e,t){Ht("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Ht("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+Pt.replace(/\./g,"-")]=1,z()?e["framework.cordova"]=1:"object"==typeof navigator&&"ReactNative"===navigator.product&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Rn.getInstance().currentlyOnline();return K(this.interruptReasons_)&&e}}Jn.nextPersistentConnectionId_=0,Jn.nextConnectionId_=0;class ei{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new ei(e,t)}}class ti{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new ei(Qt,e),i=new ei(Qt,t);return 0!==this.compare(n,i)}minPost(){return ei.MIN}}let ni;class ii extends ti{static get __EMPTY_NODE(){return ni}static set __EMPTY_NODE(e){ni=e}compare(e,t){return Zt(e.name,t.name)}isDefinedOn(e){throw B("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return ei.MIN}maxPost(){return new ei(Xt,ni)}makePost(e,t){return I("string"==typeof e,"KeyIndex indexValue must always be a string."),new ei(e,ni)}toString(){return".key"}}const ri=new ii;class si{constructor(e,t,n,i,r=null){this.isReverse_=i,this.resultGenerator_=r,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,i&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class oi{constructor(e,t,n,i,r){this.key=e,this.value=t,this.color=null!=n?n:oi.RED,this.left=null!=i?i:ai.EMPTY_NODE,this.right=null!=r?r:ai.EMPTY_NODE}copy(e,t,n,i,r){return new oi(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const r=n(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return ai.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,i;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return ai.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,oi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,oi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}oi.RED=!0,oi.BLACK=!1;class ai{constructor(e,t=ai.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ai(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,oi.BLACK,null,null))}remove(e){return new ai(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,oi.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,i=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return i?i.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(i=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new si(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new si(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new si(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new si(this.root_,null,this.comparator_,!0,e)}}function li(e,t){return Zt(e.name,t.name)}function ci(e,t){return Zt(e,t)}let hi;ai.EMPTY_NODE=new class{copy(e,t,n,i,r){return this}insert(e,t,n){return new oi(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const di=function(e){return"number"==typeof e?"number:"+sn(e):"string:"+e},ui=function(e){if(e.isLeafNode()){const t=e.val();I("string"==typeof t||"number"==typeof t||"object"==typeof t&&V(t,".sv"),"Priority must be a string or number.")}else I(e===hi||e.isEmpty(),"priority of unexpected type.");I(e===hi||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let pi,Ai,_i;class mi{static set __childrenNodeConstructor(e){pi=e}static get __childrenNodeConstructor(){return pi}constructor(e,t=mi.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,I(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),ui(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new mi(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:mi.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Hn(e)?this:".priority"===Ln(e)?this.priorityNode_:mi.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:mi.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=Ln(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(I(".priority"!==n||1===qn(e),".priority must be the last token in a path"),this.updateImmediateChild(n,mi.__childrenNodeConstructor.EMPTY_NODE.updateChild(Fn(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+di(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?sn(this.value_):this.value_,this.lazyHash_=zt(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===mi.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof mi.__childrenNodeConstructor?-1:(I(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,i=mi.VALUE_TYPE_ORDER.indexOf(t),r=mi.VALUE_TYPE_ORDER.indexOf(n);return I(i>=0,"Unknown leaf type: "+t),I(r>=0,"Unknown leaf type: "+n),i===r?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:r-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}mi.VALUE_TYPE_ORDER=["object","boolean","number","string"];const fi=new class extends ti{compare(e,t){const n=e.node.getPriority(),i=t.node.getPriority(),r=n.compareTo(i);return 0===r?Zt(e.name,t.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return ei.MIN}maxPost(){return new ei(Xt,new mi("[PRIORITY-POST]",_i))}makePost(e,t){const n=Ai(e);return new ei(t,new mi("[PRIORITY-POST]",n))}toString(){return".priority"}},gi=Math.log(2);class Ci{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/gi,10)),this.current_=this.count-1;const n=(i=this.count,parseInt(Array(i+1).join("1"),2));var i;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const bi=function(e,t,n,i){e.sort(t);const r=function(t,i){const s=i-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new oi(a,o.node,oi.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=r(t,l),h=r(l+1,i);return o=e[l],a=n?n(o):o,new oi(a,o.node,oi.BLACK,c,h)}},s=function(t){let i=null,s=null,o=e.length;const a=function(t,i){const s=o-t,a=o;o-=t;const c=r(s+1,a),h=e[s],d=n?n(h):h;l(new oi(d,h.node,i,null,c))},l=function(e){i?(i.left=e,i=e):(s=e,i=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),i=Math.pow(2,t.count-(e+1));n?a(i,oi.BLACK):(a(i,oi.BLACK),a(i,oi.RED))}return s}(new Ci(e.length));return new ai(i||t,s)};let yi;const Ei={};class vi{static get Default(){return I(Ei&&fi,"ChildrenNode.ts has not been loaded"),yi=yi||new vi({".priority":Ei},{".priority":fi}),yi}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=G(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ai?t:null}hasIndex(e){return V(this.indexSet_,e.toString())}addIndex(e,t){I(e!==ri,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let i=!1;const r=t.getIterator(ei.Wrap);let s,o=r.getNext();for(;o;)i=i||e.isDefinedOn(o.node),n.push(o),o=r.getNext();s=i?bi(n,e.getCompare()):Ei;const a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;const c=Object.assign({},this.indexes_);return c[a]=s,new vi(c,l)}addToIndexes(e,t){const n=Q(this.indexes_,((n,i)=>{const r=G(this.indexSet_,i);if(I(r,"Missing index implementation for "+i),n===Ei){if(r.isDefinedOn(e.node)){const n=[],i=t.getIterator(ei.Wrap);let s=i.getNext();for(;s;)s.name!==e.name&&n.push(s),s=i.getNext();return n.push(e),bi(n,r.getCompare())}return Ei}{const i=t.get(e.name);let r=n;return i&&(r=r.remove(new ei(e.name,i))),r.insert(e,e.node)}}));return new vi(n,this.indexSet_)}removeFromIndexes(e,t){const n=Q(this.indexes_,(n=>{if(n===Ei)return n;{const i=t.get(e.name);return i?n.remove(new ei(e.name,i)):n}}));return new vi(n,this.indexSet_)}}let wi;class xi{static get EMPTY_NODE(){return wi||(wi=new xi(new ai(ci),null,vi.Default))}constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&ui(this.priorityNode_),this.children_.isEmpty()&&I(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||wi}updatePriority(e){return this.children_.isEmpty()?this:new xi(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?wi:t}}getChild(e){const t=Ln(e);return null===t?this:this.getImmediateChild(t).getChild(Fn(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(I(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new ei(e,t);let i,r;t.isEmpty()?(i=this.children_.remove(e),r=this.indexMap_.removeFromIndexes(n,this.children_)):(i=this.children_.insert(e,t),r=this.indexMap_.addToIndexes(n,this.children_));const s=i.isEmpty()?wi:this.priorityNode_;return new xi(i,s,r)}}updateChild(e,t){const n=Ln(e);if(null===n)return t;{I(".priority"!==Ln(e)||1===qn(e),".priority must be the last token in a path");const i=this.getImmediateChild(n).updateChild(Fn(e),t);return this.updateImmediateChild(n,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,i=0,r=!0;if(this.forEachChild(fi,((s,o)=>{t[s]=o.val(e),n++,r&&xi.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):r=!1})),!e&&r&&i<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+di(this.getPriority().val())+":"),this.forEachChild(fi,((t,n)=>{const i=n.hash();""!==i&&(e+=":"+t+":"+i)})),this.lazyHash_=""===e?"":zt(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const i=this.resolveIndex_(n);if(i){const n=i.getPredecessorKey(new ei(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new ei(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new ei(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,ei.Wrap);let i=n.peek();for(;null!=i&&t.compare(i,e)<0;)n.getNext(),i=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,ei.Wrap);let i=n.peek();for(;null!=i&&t.compare(i,e)>0;)n.getNext(),i=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ki?-1:0}withIndex(e){if(e===ri||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new xi(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===ri||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(fi),n=t.getIterator(fi);let i=e.getNext(),r=n.getNext();for(;i&&r;){if(i.name!==r.name||!i.node.equals(r.node))return!1;i=e.getNext(),r=n.getNext()}return null===i&&null===r}return!1}return!1}}resolveIndex_(e){return e===ri?null:this.indexMap_.get(e.toString())}}xi.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const ki=new class extends xi{constructor(){super(new ai(ci),xi.EMPTY_NODE,vi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return xi.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(ei,{MIN:{value:new ei(Qt,xi.EMPTY_NODE)},MAX:{value:new ei(Xt,ki)}}),ii.__EMPTY_NODE=xi.EMPTY_NODE,mi.__childrenNodeConstructor=xi,hi=ki,_i=ki;const Ii=!0;function Bi(e,t=null){if(null===e)return xi.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),I(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new mi(e,Bi(t));if(e instanceof Array||!Ii){let n=xi.EMPTY_NODE;return rn(e,((t,i)=>{if(V(e,t)&&"."!==t.substring(0,1)){const e=Bi(i);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(Bi(t))}{const n=[];let i=!1;if(rn(e,((e,t)=>{if("."!==e.substring(0,1)){const r=Bi(t);r.isEmpty()||(i=i||!r.getPriority().isEmpty(),n.push(new ei(e,r)))}})),0===n.length)return xi.EMPTY_NODE;const r=bi(n,li,(e=>e.name),ci);if(i){const e=bi(n,fi.getCompare());return new xi(r,Bi(t),new vi({".priority":e},{".priority":fi}))}return new xi(r,Bi(t),vi.Default)}}!function(e){Ai=e}(Bi);class Ti extends ti{constructor(e){super(),this.indexPath_=e,I(!Hn(e)&&".priority"!==Ln(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),i=this.extractChild(t.node),r=n.compareTo(i);return 0===r?Zt(e.name,t.name):r}makePost(e,t){const n=Bi(e),i=xi.EMPTY_NODE.updateChild(this.indexPath_,n);return new ei(t,i)}maxPost(){const e=xi.EMPTY_NODE.updateChild(this.indexPath_,ki);return new ei(Xt,e)}toString(){return Un(this.indexPath_,0).join("/")}}const Si=new class extends ti{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?Zt(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return ei.MIN}maxPost(){return ei.MAX}makePost(e,t){const n=Bi(e);return new ei(t,n)}toString(){return".value"}};function Ni(e){return{type:"value",snapshotNode:e}}function Pi(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Di(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Ri(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class Oi{constructor(e){this.index_=e}updateChild(e,t,n,i,r,s){I(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(t);return o.getChild(i).equals(n.getChild(i))&&o.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(Di(t,o)):I(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?s.trackChildChange(Pi(t,n)):s.trackChildChange(Ri(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(fi,((e,i)=>{t.hasChild(e)||n.trackChildChange(Di(e,i))})),t.isLeafNode()||t.forEachChild(fi,((t,i)=>{if(e.hasChild(t)){const r=e.getImmediateChild(t);r.equals(i)||n.trackChildChange(Ri(t,i,r))}else n.trackChildChange(Pi(t,i))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?xi.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Mi{constructor(e){this.indexedFilter_=new Oi(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Mi.getStartPost_(e),this.endPost_=Mi.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,i,r,s){return this.matches(new ei(t,n))||(n=xi.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,i,r,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=xi.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(xi.EMPTY_NODE);const r=this;return t.forEachChild(fi,((e,t)=>{r.matches(new ei(e,t))||(i=i.updateImmediateChild(e,xi.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,i,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Li{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new Mi(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,i,r,s){return this.rangedFilter_.matches(new ei(t,n))||(n=xi.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,i,r,s):this.fullLimitUpdateChild_(e,t,n,r,s)}updateFullNode(e,t,n){let i;if(t.isLeafNode()||t.isEmpty())i=xi.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;i=xi.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;i=i.updateImmediateChild(t.name,t.node),n++}}}else{let e;i=t.withIndex(this.index_),i=i.updatePriority(xi.EMPTY_NODE),e=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:i=i.updateImmediateChild(t.name,xi.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,i,r){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const o=e;I(o.numChildren()===this.limit_,"");const a=new ei(t,n),l=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),c=this.rangedFilter_.matches(a);if(o.hasChild(t)){const e=o.getImmediateChild(t);let h=i.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=h&&(h.name===t||o.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);const d=null==h?1:s(h,a);if(c&&!n.isEmpty()&&d>=0)return null!=r&&r.trackChildChange(Ri(t,n,e)),o.updateImmediateChild(t,n);{null!=r&&r.trackChildChange(Di(t,e));const n=o.updateImmediateChild(t,xi.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(null!=r&&r.trackChildChange(Pi(h.name,h.node)),n.updateImmediateChild(h.name,h.node)):n}}return n.isEmpty()?e:c&&s(l,a)>=0?(null!=r&&(r.trackChildChange(Di(l.name,l.node)),r.trackChildChange(Pi(t,n))),o.updateImmediateChild(t,n).updateImmediateChild(l.name,xi.EMPTY_NODE)):e}}class qi{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=fi}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return I(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return I(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Qt}hasEnd(){return this.endSet_}getIndexEndValue(){return I(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return I(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Xt}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return I(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===fi}copy(){const e=new qi;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Fi(e){const t={};if(e.isDefault())return t;let n;if(e.index_===fi?n="$priority":e.index_===Si?n="$value":e.index_===ri?n="$key":(I(e.index_ instanceof Ti,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=$(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=$(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+$(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=$(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+$(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function zi(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==fi&&(t.i=e.index_.toString()),t}class Ui extends Pn{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(I(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,n,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=i,this.log_=$t("p:rest:"),this.listens_={}}listen(e,t,n,i){const r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);const s=Ui.getListenId_(e,n),o={};this.listens_[s]=o;const a=Fi(e._queryParams);this.restRequest_(r+".json",a,((e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(r,a,!1,n),G(this.listens_,s)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",i(t,null)}}))}unlisten(e,t){const n=Ui.getListenId_(e,t);delete this.listens_[n]}get(e){const t=Fi(e._queryParams),n=e._path.toString(),i=new F;return this.restRequest_(n+".json",t,((e,t)=>{let r=t;404===e&&(r=null,e=null),null===e?(this.onDataUpdate_(n,r,!1,null),i.resolve(r)):i.reject(new Error(r))})),i.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((([i,r])=>{i&&i.accessToken&&(t.auth=i.accessToken),r&&r.token&&(t.ac=r.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+function(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}(t);this.log_("Sending REST request for "+s);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(n&&4===o.readyState){this.log_("REST Response for "+s+" received. status:",o.status,"response:",o.responseText);let e=null;if(o.status>=200&&o.status<300){try{e=H(o.responseText)}catch(e){Gt("Failed to parse JSON response for "+s+": "+o.responseText)}n(null,e)}else 401!==o.status&&404!==o.status&&Gt("Got unsuccessful REST response for "+s+" Status: "+o.status),n(o.status);n=null}},o.open("GET",s,!0),o.send()}))}}class Wi{constructor(){this.rootNode_=xi.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function ji(){return{value:null,children:new Map}}function Hi(e,t,n){if(Hn(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const i=Ln(t);e.children.has(i)||e.children.set(i,ji()),Hi(e.children.get(i),t=Fn(t),n)}}function $i(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,i)=>{$i(i,new On(t.toString()+"/"+e),n)}))}class Yi{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&rn(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class Vi{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Yi(e);const n=1e4+2e4*Math.random();cn(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;rn(e,((e,i)=>{i>0&&V(this.statsToReport_,e)&&(t[e]=i,n=!0)})),n&&this.server_.reportStats(t),cn(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Gi;function Ki(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Gi||(Gi={}));class Qi{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Gi.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Hn(this.path)){if(null!=this.affectedTree.value)return I(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new On(e));return new Qi(Mn(),t,this.revert)}}return I(Ln(this.path)===e,"operationForChild called for unrelated child."),new Qi(Fn(this.path),this.affectedTree,this.revert)}}class Xi{constructor(e,t){this.source=e,this.path=t,this.type=Gi.LISTEN_COMPLETE}operationForChild(e){return Hn(this.path)?new Xi(this.source,Mn()):new Xi(this.source,Fn(this.path))}}class Zi{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Gi.OVERWRITE}operationForChild(e){return Hn(this.path)?new Zi(this.source,Mn(),this.snap.getImmediateChild(e)):new Zi(this.source,Fn(this.path),this.snap)}}class Ji{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Gi.MERGE}operationForChild(e){if(Hn(this.path)){const t=this.children.subtree(new On(e));return t.isEmpty()?null:t.value?new Zi(this.source,Mn(),t.value):new Ji(this.source,Mn(),t)}return I(Ln(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ji(this.source,Fn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class er{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Hn(e))return this.isFullyInitialized()&&!this.filtered_;const t=Ln(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class tr{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function nr(e,t,n,i,r,s){const o=i.filter((e=>e.type===n));o.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw B("Should only compare child_ events.");const i=new ei(t.childName,t.snapshotNode),r=new ei(n.childName,n.snapshotNode);return e.index_.compare(i,r)}(e,t,n))),o.forEach((n=>{const i=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);r.forEach((r=>{r.respondsTo(n.type)&&t.push(r.createEvent(i,e.query_))}))}))}function ir(e,t){return{eventCache:e,serverCache:t}}function rr(e,t,n,i){return ir(new er(t,n,i),e.serverCache)}function sr(e,t,n,i){return ir(e.eventCache,new er(t,n,i))}function or(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function ar(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let lr;class cr{static fromObject(e){let t=new cr(null);return rn(e,((e,n)=>{t=t.set(new On(e),n)})),t}constructor(e,t=(()=>(lr||(lr=new ai(Jt)),lr))()){this.value=e,this.children=t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Mn(),value:this.value};if(Hn(e))return null;{const n=Ln(e),i=this.children.get(n);if(null!==i){const r=i.findRootMostMatchingPathAndValue(Fn(e),t);return null!=r?{path:jn(new On(n),r.path),value:r.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(Hn(e))return this;{const t=Ln(e),n=this.children.get(t);return null!==n?n.subtree(Fn(e)):new cr(null)}}set(e,t){if(Hn(e))return new cr(t,this.children);{const n=Ln(e),i=(this.children.get(n)||new cr(null)).set(Fn(e),t),r=this.children.insert(n,i);return new cr(this.value,r)}}remove(e){if(Hn(e))return this.children.isEmpty()?new cr(null):new cr(null,this.children);{const t=Ln(e),n=this.children.get(t);if(n){const i=n.remove(Fn(e));let r;return r=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&r.isEmpty()?new cr(null):new cr(this.value,r)}return this}}get(e){if(Hn(e))return this.value;{const t=Ln(e),n=this.children.get(t);return n?n.get(Fn(e)):null}}setTree(e,t){if(Hn(e))return t;{const n=Ln(e),i=(this.children.get(n)||new cr(null)).setTree(Fn(e),t);let r;return r=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),new cr(this.value,r)}}fold(e){return this.fold_(Mn(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((i,r)=>{n[i]=r.fold_(jn(e,i),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,Mn(),t)}findOnPath_(e,t,n){const i=!!this.value&&n(t,this.value);if(i)return i;if(Hn(e))return null;{const i=Ln(e),r=this.children.get(i);return r?r.findOnPath_(Fn(e),jn(t,i),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Mn(),t)}foreachOnPath_(e,t,n){if(Hn(e))return this;{this.value&&n(t,this.value);const i=Ln(e),r=this.children.get(i);return r?r.foreachOnPath_(Fn(e),jn(t,i),n):new cr(null)}}foreach(e){this.foreach_(Mn(),e)}foreach_(e,t){this.children.inorderTraversal(((n,i)=>{i.foreach_(jn(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class hr{constructor(e){this.writeTree_=e}static empty(){return new hr(new cr(null))}}function dr(e,t,n){if(Hn(t))return new hr(new cr(n));{const i=e.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let s=i.value;const o=$n(r,t);return s=s.updateChild(o,n),new hr(e.writeTree_.set(r,s))}{const i=new cr(n),r=e.writeTree_.setTree(t,i);return new hr(r)}}}function ur(e,t,n){let i=e;return rn(n,((e,n)=>{i=dr(i,jn(t,e),n)})),i}function pr(e,t){if(Hn(t))return hr.empty();{const n=e.writeTree_.setTree(t,new cr(null));return new hr(n)}}function Ar(e,t){return null!=_r(e,t)}function _r(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild($n(n.path,t)):null}function mr(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(fi,((e,n)=>{t.push(new ei(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new ei(e,n.value))})),t}function fr(e,t){if(Hn(t))return e;{const n=_r(e,t);return new hr(null!=n?new cr(n):e.writeTree_.subtree(t))}}function gr(e){return e.writeTree_.isEmpty()}function Cr(e,t){return br(Mn(),e.writeTree_,t)}function br(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let i=null;return t.children.inorderTraversal(((t,r)=>{".priority"===t?(I(null!==r.value,"Priority writes must always be leaf nodes"),i=r.value):n=br(jn(e,t),r,n)})),n.getChild(e).isEmpty()||null===i||(n=n.updateChild(jn(e,".priority"),i)),n}}function yr(e,t){return Pr(t,e)}function Er(e,t){if(e.snap)return Vn(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Vn(jn(e.path,n),t))return!0;return!1}function vr(e){return e.visible}function wr(e,t,n){let i=hr.empty();for(let r=0;r<e.length;++r){const s=e[r];if(t(s)){const e=s.path;let t;if(s.snap)Vn(n,e)?(t=$n(n,e),i=dr(i,t,s.snap)):Vn(e,n)&&(t=$n(e,n),i=dr(i,Mn(),s.snap.getChild(t)));else{if(!s.children)throw B("WriteRecord should have .snap or .children");if(Vn(n,e))t=$n(n,e),i=ur(i,t,s.children);else if(Vn(e,n))if(t=$n(e,n),Hn(t))i=ur(i,Mn(),s.children);else{const e=G(s.children,Ln(t));if(e){const n=e.getChild(Fn(t));i=dr(i,Mn(),n)}}}}}return i}function xr(e,t,n,i,r){if(i||r){const s=fr(e.visibleWrites,t);if(!r&&gr(s))return n;if(r||null!=n||Ar(s,Mn())){const s=function(e){return(e.visible||r)&&(!i||!~i.indexOf(e.writeId))&&(Vn(e.path,t)||Vn(t,e.path))};return Cr(wr(e.allWrites,s,t),n||xi.EMPTY_NODE)}return null}{const i=_r(e.visibleWrites,t);if(null!=i)return i;{const i=fr(e.visibleWrites,t);return gr(i)?n:null!=n||Ar(i,Mn())?Cr(i,n||xi.EMPTY_NODE):null}}}function kr(e,t,n,i){return xr(e.writeTree,e.treePath,t,n,i)}function Ir(e,t){return function(e,t,n){let i=xi.EMPTY_NODE;const r=_r(e.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(fi,((e,t)=>{i=i.updateImmediateChild(e,t)})),i;if(n){const r=fr(e.visibleWrites,t);return n.forEachChild(fi,((e,t)=>{const n=Cr(fr(r,new On(e)),t);i=i.updateImmediateChild(e,n)})),mr(r).forEach((e=>{i=i.updateImmediateChild(e.name,e.node)})),i}return mr(fr(e.visibleWrites,t)).forEach((e=>{i=i.updateImmediateChild(e.name,e.node)})),i}(e.writeTree,e.treePath,t)}function Br(e,t,n,i){return function(e,t,n,i,r){I(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=jn(t,n);if(Ar(e.visibleWrites,s))return null;{const t=fr(e.visibleWrites,s);return gr(t)?r.getChild(n):Cr(t,r.getChild(n))}}(e.writeTree,e.treePath,t,n,i)}function Tr(e,t){return function(e,t){return _r(e.visibleWrites,t)}(e.writeTree,jn(e.treePath,t))}function Sr(e,t,n){return function(e,t,n,i){const r=jn(t,n),s=_r(e.visibleWrites,r);return null!=s?s:i.isCompleteForChild(n)?Cr(fr(e.visibleWrites,r),i.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function Nr(e,t){return Pr(jn(e.treePath,t),e.writeTree)}function Pr(e,t){return{treePath:e,writeTree:t}}class Dr{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;I("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),I(".priority"!==n,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(n);if(i){const r=i.type;if("child_added"===t&&"child_removed"===r)this.changeMap.set(n,Ri(n,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===r)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===r)this.changeMap.set(n,Di(n,i.oldSnap));else if("child_changed"===t&&"child_added"===r)this.changeMap.set(n,Pi(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==r)throw B("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(n,Ri(n,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const Rr=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class Or{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new er(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Sr(this.writes_,e,t)}}getChildAfterChild(e,t,n){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ar(this.viewCache_),r=function(e,t,n,i,r,s){return function(e,t,n,i,r,s,o){let a;const l=fr(e.visibleWrites,t),c=_r(l,Mn());if(null!=c)a=c;else{if(null==n)return[];a=Cr(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let l=n.getNext();for(;l&&e.length<r;)0!==t(l,i)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,i,r,s)}(this.writes_,i,t,1,n,e);return 0===r.length?null:r[0]}}function Mr(e,t,n,i,r,s){const o=t.eventCache;if(null!=Tr(i,n))return t;{let a,l;if(Hn(n))if(I(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=ar(t),r=Ir(i,n instanceof xi?n:xi.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),r,s)}else{const n=kr(i,ar(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const c=Ln(n);if(".priority"===c){I(1===qn(n),"Can't have a priority with additional path components");const r=o.getNode();l=t.serverCache.getNode();const s=Br(i,n,r,l);a=null!=s?e.filter.updatePriority(r,s):o.getNode()}else{const h=Fn(n);let d;if(o.isCompleteForChild(c)){l=t.serverCache.getNode();const e=Br(i,n,o.getNode(),l);d=null!=e?o.getNode().getImmediateChild(c).updateChild(h,e):o.getNode().getImmediateChild(c)}else d=Sr(i,c,t.serverCache);a=null!=d?e.filter.updateChild(o.getNode(),c,d,h,r,s):o.getNode()}}return rr(t,a,o.isFullyInitialized()||Hn(n),e.filter.filtersNodes())}}function Lr(e,t,n,i,r,s,o,a){const l=t.serverCache;let c;const h=o?e.filter:e.filter.getIndexedFilter();if(Hn(n))c=h.updateFullNode(l.getNode(),i,null);else if(h.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,i);c=h.updateFullNode(l.getNode(),e,null)}else{const e=Ln(n);if(!l.isCompleteForPath(n)&&qn(n)>1)return t;const r=Fn(n),s=l.getNode().getImmediateChild(e).updateChild(r,i);c=".priority"===e?h.updatePriority(l.getNode(),s):h.updateChild(l.getNode(),e,s,r,Rr,null)}const d=sr(t,c,l.isFullyInitialized()||Hn(n),h.filtersNodes());return Mr(e,d,n,r,new Or(r,d,s),a)}function qr(e,t,n,i,r,s,o){const a=t.eventCache;let l,c;const h=new Or(r,t,s);if(Hn(n))c=e.filter.updateFullNode(t.eventCache.getNode(),i,o),l=rr(t,c,!0,e.filter.filtersNodes());else{const r=Ln(n);if(".priority"===r)c=e.filter.updatePriority(t.eventCache.getNode(),i),l=rr(t,c,a.isFullyInitialized(),a.isFiltered());else{const s=Fn(n),c=a.getNode().getImmediateChild(r);let d;if(Hn(s))d=i;else{const e=h.getCompleteChild(r);d=null!=e?".priority"===zn(s)&&e.getChild(Wn(s)).isEmpty()?e:e.updateChild(s,i):xi.EMPTY_NODE}l=c.equals(d)?t:rr(t,e.filter.updateChild(a.getNode(),r,d,s,h,o),a.isFullyInitialized(),e.filter.filtersNodes())}}return l}function Fr(e,t){return e.eventCache.isCompleteForChild(t)}function zr(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function Ur(e,t,n,i,r,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=Hn(n)?i:new cr(null).setTree(n,i);const h=t.serverCache.getNode();return l.children.inorderTraversal(((n,i)=>{if(h.hasChild(n)){const l=zr(0,t.serverCache.getNode().getImmediateChild(n),i);c=Lr(e,c,new On(n),l,r,s,o,a)}})),l.children.inorderTraversal(((n,i)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===i.value;if(!h.hasChild(n)&&!l){const l=zr(0,t.serverCache.getNode().getImmediateChild(n),i);c=Lr(e,c,new On(n),l,r,s,o,a)}})),c}class Wr{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,i=new Oi(n.getIndex()),r=(s=n).loadsAllData()?new Oi(s.getIndex()):s.hasLimit()?new Li(s):new Mi(s);var s;this.processor_=function(e){return{filter:e}}(r);const o=t.serverCache,a=t.eventCache,l=i.updateFullNode(xi.EMPTY_NODE,o.getNode(),null),c=r.updateFullNode(xi.EMPTY_NODE,a.getNode(),null),h=new er(l,o.isFullyInitialized(),i.filtersNodes()),d=new er(c,a.isFullyInitialized(),r.filtersNodes());this.viewCache_=ir(d,h),this.eventGenerator_=new tr(this.query_)}get query(){return this.query_}}function jr(e,t){const n=ar(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Hn(t)&&!n.getImmediateChild(Ln(t)).isEmpty())?n.getChild(t):null}function Hr(e){return 0===e.eventRegistrations_.length}function $r(e,t,n){const i=[];if(n){I(null==t,"A cancel should cancel all event registrations.");const r=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,r);t&&i.push(t)}))}if(t){let n=[];for(let i=0;i<e.eventRegistrations_.length;++i){const r=e.eventRegistrations_[i];if(r.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(i+1));break}}else n.push(r)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return i}function Yr(e,t,n,i){t.type===Gi.MERGE&&null!==t.source.queryId&&(I(ar(e.viewCache_),"We should always have a full cache before handling merges"),I(or(e.viewCache_),"Missing event cache, even though we have a server cache"));const r=e.viewCache_,s=function(e,t,n,i,r){const s=new Dr;let o,a;if(n.type===Gi.OVERWRITE){const l=n;l.source.fromUser?o=qr(e,t,l.path,l.snap,i,r,s):(I(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!Hn(l.path),o=Lr(e,t,l.path,l.snap,i,r,a,s))}else if(n.type===Gi.MERGE){const l=n;l.source.fromUser?o=function(e,t,n,i,r,s,o){let a=t;return i.foreach(((i,l)=>{const c=jn(n,i);Fr(t,Ln(c))&&(a=qr(e,a,c,l,r,s,o))})),i.foreach(((i,l)=>{const c=jn(n,i);Fr(t,Ln(c))||(a=qr(e,a,c,l,r,s,o))})),a}(e,t,l.path,l.children,i,r,s):(I(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),o=Ur(e,t,l.path,l.children,i,r,a,s))}else if(n.type===Gi.ACK_USER_WRITE){const a=n;o=a.revert?function(e,t,n,i,r,s){let o;if(null!=Tr(i,n))return t;{const a=new Or(i,t,r),l=t.eventCache.getNode();let c;if(Hn(n)||".priority"===Ln(n)){let n;if(t.serverCache.isFullyInitialized())n=kr(i,ar(t));else{const e=t.serverCache.getNode();I(e instanceof xi,"serverChildren would be complete if leaf node"),n=Ir(i,e)}c=e.filter.updateFullNode(l,n,s)}else{const r=Ln(n);let h=Sr(i,r,t.serverCache);null==h&&t.serverCache.isCompleteForChild(r)&&(h=l.getImmediateChild(r)),c=null!=h?e.filter.updateChild(l,r,h,Fn(n),a,s):t.eventCache.getNode().hasChild(r)?e.filter.updateChild(l,r,xi.EMPTY_NODE,Fn(n),a,s):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=kr(i,ar(t)),o.isLeafNode()&&(c=e.filter.updateFullNode(c,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=Tr(i,Mn()),rr(t,c,o,e.filter.filtersNodes())}}(e,t,a.path,i,r,s):function(e,t,n,i,r,s,o){if(null!=Tr(r,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=i.value){if(Hn(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Lr(e,t,n,l.getNode().getChild(n),r,s,a,o);if(Hn(n)){let i=new cr(null);return l.getNode().forEachChild(ri,((e,t)=>{i=i.set(new On(e),t)})),Ur(e,t,n,i,r,s,a,o)}return t}{let c=new cr(null);return i.foreach(((e,t)=>{const i=jn(n,e);l.isCompleteForPath(i)&&(c=c.set(e,l.getNode().getChild(i)))})),Ur(e,t,n,c,r,s,a,o)}}(e,t,a.path,a.affectedTree,i,r,s)}else{if(n.type!==Gi.LISTEN_COMPLETE)throw B("Unknown operation type: "+n.type);o=function(e,t,n,i,r){const s=t.serverCache;return Mr(e,sr(t,s.getNode(),s.isFullyInitialized()||Hn(n),s.isFiltered()),n,i,Rr,r)}(e,t,n.path,i,s)}const l=s.getChanges();return function(e,t,n){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=or(e);(n.length>0||!e.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&n.push(Ni(or(t)))}}(t,o,l),{viewCache:o,changes:l}}(e.processor_,r,t,n,i);var o,a;return o=e.processor_,a=s.viewCache,I(a.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),I(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),I(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Vr(e,s.changes,s.viewCache.eventCache.getNode(),null)}function Vr(e,t,n,i){const r=i?[i]:e.eventRegistrations_;return function(e,t,n,i){const r=[],s=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),nr(e,r,"child_removed",t,i,n),nr(e,r,"child_added",t,i,n),nr(e,r,"child_moved",s,i,n),nr(e,r,"child_changed",t,i,n),nr(e,r,"value",t,i,n),r}(e.eventGenerator_,t,n,r)}let Gr,Kr;class Qr{constructor(){this.views=new Map}}function Xr(e,t,n,i){const r=t.source.queryId;if(null!==r){const s=e.views.get(r);return I(null!=s,"SyncTree gave us an op for an invalid query."),Yr(s,t,n,i)}{let r=[];for(const s of e.views.values())r=r.concat(Yr(s,t,n,i));return r}}function Zr(e,t,n,i,r){const s=t._queryIdentifier,o=e.views.get(s);if(!o){let e=kr(n,r?i:null),s=!1;e?s=!0:i instanceof xi?(e=Ir(n,i),s=!1):(e=xi.EMPTY_NODE,s=!1);const o=ir(new er(e,s,!1),new er(i,r,!1));return new Wr(t,o)}return o}function Jr(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function es(e,t){let n=null;for(const i of e.views.values())n=n||jr(i,t);return n}function ts(e,t){if(t._queryParams.loadsAllData())return rs(e);{const n=t._queryIdentifier;return e.views.get(n)}}function ns(e,t){return null!=ts(e,t)}function is(e){return null!=rs(e)}function rs(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let ss=1;class os{constructor(e){this.listenProvider_=e,this.syncPointTree_=new cr(null),this.pendingWriteTree_={visibleWrites:hr.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function as(e,t,n,i,r){return function(e,t,n,i,r){I(i>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),e.allWrites.push({path:t,snap:n,writeId:i,visible:r}),r&&(e.visibleWrites=dr(e.visibleWrites,t,n)),e.lastWriteId=i}(e.pendingWriteTree_,t,n,i,r),r?As(e,new Zi({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function ls(e,t,n=!1){const i=function(e,t){for(let n=0;n<e.allWrites.length;n++){const i=e.allWrites[n];if(i.writeId===t)return i}return null}(e.pendingWriteTree_,t);if(function(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));I(n>=0,"removeWrite called with nonexistent writeId.");const i=e.allWrites[n];e.allWrites.splice(n,1);let r=i.visible,s=!1,o=e.allWrites.length-1;for(;r&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=n&&Er(t,i.path)?r=!1:Vn(i.path,t.path)&&(s=!0)),o--}return!!r&&(s?(function(e){e.visibleWrites=wr(e.allWrites,vr,Mn()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0):(i.snap?e.visibleWrites=pr(e.visibleWrites,i.path):rn(i.children,(t=>{e.visibleWrites=pr(e.visibleWrites,jn(i.path,t))})),!0))}(e.pendingWriteTree_,t)){let t=new cr(null);return null!=i.snap?t=t.set(Mn(),!0):rn(i.children,(e=>{t=t.set(new On(e),!0)})),As(e,new Qi(i.path,t,n))}return[]}function cs(e,t,n){return As(e,new Zi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function hs(e,t,n,i,r=!1){const s=t._path,o=e.syncPointTree_.get(s);let a=[];if(o&&("default"===t._queryIdentifier||ns(o,t))){const l=function(e,t,n,i){const r=t._queryIdentifier,s=[];let o=[];const a=is(e);if("default"===r)for(const[t,r]of e.views.entries())o=o.concat($r(r,n,i)),Hr(r)&&(e.views.delete(t),r.query._queryParams.loadsAllData()||s.push(r.query));else{const t=e.views.get(r);t&&(o=o.concat($r(t,n,i)),Hr(t)&&(e.views.delete(r),t.query._queryParams.loadsAllData()||s.push(t.query)))}return a&&!is(e)&&s.push(new(I(Gr,"Reference.ts has not been loaded"),Gr)(t._repo,t._path)),{removed:s,events:o}}(o,t,n,i);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!r){const n=-1!==c.findIndex((e=>e._queryParams.loadsAllData())),r=e.syncPointTree_.findOnPath(s,((e,t)=>is(t)));if(n&&!r){const t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&is(t))return[rs(t)];{let e=[];return t&&(e=Jr(t)),rn(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const i=n[t],r=i.query,s=fs(e,i);e.listenProvider_.startListening(vs(r),gs(e,r),s.hashFn,s.onComplete)}}}if(!r&&c.length>0&&!i)if(n){const n=null;e.listenProvider_.stopListening(vs(t),n)}else c.forEach((t=>{const n=e.queryToTagMap.get(Cs(t));e.listenProvider_.stopListening(vs(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const i=t[n];if(!i._queryParams.loadsAllData()){const t=Cs(i),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return a}function ds(e,t,n,i){const r=bs(e,i);if(null!=r){const i=ys(r),s=i.path,o=i.queryId,a=$n(s,t);return Es(e,s,new Zi(Ki(o),a,n))}return[]}function us(e,t,n,i=!1){const r=t._path;let s=null,o=!1;e.syncPointTree_.foreachOnPath(r,((e,t)=>{const n=$n(e,r);s=s||es(t,n),o=o||is(t)}));let a,l=e.syncPointTree_.get(r);l?(o=o||is(l),s=s||es(l,Mn())):(l=new Qr,e.syncPointTree_=e.syncPointTree_.set(r,l)),null!=s?a=!0:(a=!1,s=xi.EMPTY_NODE,e.syncPointTree_.subtree(r).foreachChild(((e,t)=>{const n=es(t,Mn());n&&(s=s.updateImmediateChild(e,n))})));const c=ns(l,t);if(!c&&!t._queryParams.loadsAllData()){const n=Cs(t);I(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const i=ss++;e.queryToTagMap.set(n,i),e.tagToQueryMap.set(i,n)}let h=function(e,t,n,i,r,s){const o=Zr(e,t,i,r,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){const n=e.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(fi,((e,t)=>{i.push(Pi(e,t))})),n.isFullyInitialized()&&i.push(Ni(n.getNode())),Vr(e,i,n.getNode(),t)}(o,n)}(l,t,n,yr(e.pendingWriteTree_,r),s,a);if(!c&&!o&&!i){const n=ts(l,t);h=h.concat(function(e,t,n){const i=t._path,r=gs(e,t),s=fs(e,n),o=e.listenProvider_.startListening(vs(t),r,s.hashFn,s.onComplete),a=e.syncPointTree_.subtree(i);if(r)I(!is(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold(((e,t,n)=>{if(!Hn(e)&&t&&is(t))return[rs(t).query];{let e=[];return t&&(e=e.concat(Jr(t).map((e=>e.query)))),rn(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const i=t[n];e.listenProvider_.stopListening(vs(i),gs(e,i))}}return o}(e,t,n))}return h}function ps(e,t,n){const i=e.pendingWriteTree_,r=e.syncPointTree_.findOnPath(t,((e,n)=>{const i=es(n,$n(e,t));if(i)return i}));return xr(i,t,r,n,!0)}function As(e,t){return _s(t,e.syncPointTree_,null,yr(e.pendingWriteTree_,Mn()))}function _s(e,t,n,i){if(Hn(e.path))return ms(e,t,n,i);{const r=t.get(Mn());null==n&&null!=r&&(n=es(r,Mn()));let s=[];const o=Ln(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=Nr(i,o);s=s.concat(_s(a,l,e,t))}return r&&(s=s.concat(Xr(r,e,i,n))),s}}function ms(e,t,n,i){const r=t.get(Mn());null==n&&null!=r&&(n=es(r,Mn()));let s=[];return t.children.inorderTraversal(((t,r)=>{const o=n?n.getImmediateChild(t):null,a=Nr(i,t),l=e.operationForChild(t);l&&(s=s.concat(ms(l,r,o,a)))})),r&&(s=s.concat(Xr(r,e,i,n))),s}function fs(e,t){const n=t.query,i=gs(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||xi.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return i?function(e,t,n){const i=bs(e,n);if(i){const n=ys(i),r=n.path,s=n.queryId,o=$n(r,t);return Es(e,r,new Xi(Ki(s),o))}return[]}(e,n._path,i):function(e,t){return As(e,new Xi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const i=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const i=new Error(e+" at "+t._path.toString()+": "+n);return i.code=e.toUpperCase(),i}(t,n);return hs(e,n,null,i)}}}}function gs(e,t){const n=Cs(t);return e.queryToTagMap.get(n)}function Cs(e){return e._path.toString()+"$"+e._queryIdentifier}function bs(e,t){return e.tagToQueryMap.get(t)}function ys(e){const t=e.indexOf("$");return I(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new On(e.substr(0,t))}}function Es(e,t,n){const i=e.syncPointTree_.get(t);return I(i,"Missing sync point for query tag that we're tracking"),Xr(i,n,yr(e.pendingWriteTree_,t),null)}function vs(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(I(Kr,"Reference.ts has not been loaded"),Kr)(e._repo,e._path):e}class ws{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new ws(t)}node(){return this.node_}}class xs{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=jn(this.path_,e);return new xs(this.syncTree_,t)}node(){return ps(this.syncTree_,this.path_)}}const ks=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},Is=function(e,t,n){return e&&"object"==typeof e?(I(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?Bs(e[".sv"],t,n):"object"==typeof e[".sv"]?Ts(e[".sv"],t):void I(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Bs=function(e,t,n){if("timestamp"===e)return n.timestamp;I(!1,"Unexpected server value: "+e)},Ts=function(e,t,n){e.hasOwnProperty("increment")||I(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const i=e.increment;"number"!=typeof i&&I(!1,"Unexpected increment value: "+i);const r=t.node();if(I(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const s=r.getValue();return"number"!=typeof s?i:s+i},Ss=function(e,t,n,i){return Ps(t,new xs(n,e),i)},Ns=function(e,t,n){return Ps(e,new ws(t),n)};function Ps(e,t,n){const i=e.getPriority().val(),r=Is(i,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const i=e,s=Is(i.getValue(),t,n);return s!==i.getValue()||r!==i.getPriority().val()?new mi(s,Bi(r)):e}{const i=e;return s=i,r!==i.getPriority().val()&&(s=s.updatePriority(new mi(r))),i.forEachChild(fi,((e,i)=>{const r=Ps(i,t.getImmediateChild(e),n);r!==i&&(s=s.updateImmediateChild(e,r))})),s}}class Ds{constructor(e="",t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}}function Rs(e,t){let n=t instanceof On?t:new On(t),i=e,r=Ln(n);for(;null!==r;){const e=G(i.node.children,r)||{children:{},childCount:0};i=new Ds(r,i,e),n=Fn(n),r=Ln(n)}return i}function Os(e){return e.node.value}function Ms(e,t){e.node.value=t,Us(e)}function Ls(e){return e.node.childCount>0}function qs(e,t){rn(e.node.children,((n,i)=>{t(new Ds(n,e,i))}))}function Fs(e,t,n,i){n&&!i&&t(e),qs(e,(e=>{Fs(e,t,!0,i)})),n&&i&&t(e)}function zs(e){return new On(null===e.parent?e.name:zs(e.parent)+"/"+e.name)}function Us(e){null!==e.parent&&function(e,t,n){const i=function(e){return void 0===Os(e)&&!Ls(e)}(n),r=V(e.node.children,t);i&&r?(delete e.node.children[t],e.node.childCount--,Us(e)):i||r||(e.node.children[t]=n.node,e.node.childCount++,Us(e))}(e.parent,e.name,e)}const Ws=/[\[\].#$\/\u0000-\u001F\u007F]/,js=/[\[\].#$\u0000-\u001F\u007F]/,Hs=10485760,$s=function(e){return"string"==typeof e&&0!==e.length&&!Ws.test(e)},Ys=function(e){return"string"==typeof e&&0!==e.length&&!js.test(e)},Vs=function(e,t,n,i){i&&void 0===t||Gs(ee(e,"value"),t,n)},Gs=function(e,t,n){const i=n instanceof On?new Gn(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+Qn(i));if("function"==typeof t)throw new Error(e+"contains a function "+Qn(i)+" with contents = "+t.toString());if(Kt(t))throw new Error(e+"contains "+t.toString()+" "+Qn(i));if("string"==typeof t&&t.length>Hs/3&&te(t)>Hs)throw new Error(e+"contains a string greater than "+Hs+" utf8 bytes "+Qn(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let n=!1,r=!1;if(rn(t,((t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(r=!0,!$s(t)))throw new Error(e+" contains an invalid key ("+t+") "+Qn(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=te(t),Kn(e)}(i,t),Gs(e,s,i),function(e){const t=e.parts_.pop();e.byteLength_-=te(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),n&&r)throw new Error(e+' contains ".value" child '+Qn(i)+" in addition to actual children.")}},Ks=function(e,t,n,i){if(!(i&&void 0===n||Ys(n)))throw new Error(ee(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Qs=function(e,t,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Ks(e,t,n,i)},Xs=function(e,t){if(".info"===Ln(t))throw new Error(e+" failed = Can't modify data under /.info/")};class Zs{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Js(e,t){let n=null;for(let i=0;i<t.length;i++){const r=t[i],s=r.getPath();null===n||Yn(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(r)}n&&e.eventLists_.push(n)}function eo(e,t,n){Js(e,n),function(e,t){e.recursionDepth_++;let n=!0;for(let i=0;i<e.eventLists_.length;i++){const r=e.eventLists_[i];r&&(t(r.path)?(to(e.eventLists_[i]),e.eventLists_[i]=null):n=!1)}n&&(e.eventLists_=[]),e.recursionDepth_--}(e,(e=>Vn(e,t)||Vn(t,e)))}function to(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const i=n.getEventRunner();Wt&&Ht("event: "+n.toString()),ln(i)}}}const no=25;class io{constructor(e,t,n,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Zs,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ji(),this.transactionQueueTree_=new Ds,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ro(e,t,n){if(e.stats_=vn(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Ui(e.repoInfo_,((t,n,i,r)=>{ao(e,t,n,i,r)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>lo(e,!0)),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{$(n)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}e.persistentConnection_=new Jn(e.repoInfo_,t,((t,n,i,r)=>{ao(e,t,n,i,r)}),(t=>{lo(e,t)}),(t=>{!function(e,t){rn(t,((t,n)=>{co(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(t,n){const i=t.toString();return En[i]||(En[i]=new Vi(e.stats_,e.server_)),En[i]}(e.repoInfo_),e.infoData_=new Wi,e.infoSyncTree_=new os({startListening:(t,n,i,r)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=cs(e.infoSyncTree_,t._path,o),setTimeout((()=>{r("ok")}),0)),s},stopListening:()=>{}}),co(e,"connected",!1),e.serverSyncTree_=new os({startListening:(t,n,i,r)=>(e.server_.listen(t,i,n,((n,i)=>{const s=r(n,i);eo(e.eventQueue_,t._path,s)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function so(e){const t=e.infoData_.getNode(new On(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function oo(e){return ks({timestamp:so(e)})}function ao(e,t,n,i,r){e.dataUpdateCount++;const s=new On(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(r)if(i){const t=Q(n,(e=>Bi(e)));o=function(e,t,n,i){const r=bs(e,i);if(r){const i=ys(r),s=i.path,o=i.queryId,a=$n(s,t),l=cr.fromObject(n);return Es(e,s,new Ji(Ki(o),a,l))}return[]}(e.serverSyncTree_,s,t,r)}else{const t=Bi(n);o=ds(e.serverSyncTree_,s,t,r)}else if(i){const t=Q(n,(e=>Bi(e)));o=function(e,t,n){const i=cr.fromObject(n);return As(e,new Ji({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(e.serverSyncTree_,s,t)}else{const t=Bi(n);o=cs(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=mo(e,s)),eo(e.eventQueue_,a,o)}function lo(e,t){co(e,"connected",t),!1===t&&function(e){po(e,"onDisconnectEvents");const t=oo(e),n=ji();$i(e.onDisconnect_,Mn(),((i,r)=>{const s=Ss(i,r,e.serverSyncTree_,t);Hi(n,i,s)}));let i=[];$i(n,Mn(),((t,n)=>{i=i.concat(cs(e.serverSyncTree_,t,n));const r=yo(e,t);mo(e,r)})),e.onDisconnect_=ji(),eo(e.eventQueue_,Mn(),i)}(e)}function co(e,t,n){const i=new On("/.info/"+t),r=Bi(n);e.infoData_.updateSnapshot(i,r);const s=cs(e.infoSyncTree_,i,r);eo(e.eventQueue_,i,s)}function ho(e){return e.nextWriteId_++}function uo(e,t,n,i,r){po(e,"set",{path:t.toString(),value:n,priority:i});const s=oo(e),o=Bi(n,i),a=ps(e.serverSyncTree_,t),l=Ns(o,a,s),c=ho(e),h=as(e.serverSyncTree_,t,l,c,!0);Js(e.eventQueue_,h),e.server_.put(t.toString(),o.val(!0),((n,i)=>{const s="ok"===n;s||Gt("set at "+t+" failed: "+n);const o=ls(e.serverSyncTree_,c,!s);eo(e.eventQueue_,t,o),function(e,t,n,i){t&&ln((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let r=e;i&&(r+=": "+i);const s=new Error(r);s.code=e,t(s)}}))}(0,r,n,i)}));const d=yo(e,t);mo(e,d),eo(e.eventQueue_,d,[])}function po(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),Ht(n,...t)}function Ao(e,t,n){return ps(e.serverSyncTree_,t,n)||xi.EMPTY_NODE}function _o(e,t=e.transactionQueueTree_){if(t||bo(e,t),Os(t)){const n=go(e,t);I(n.length>0,"Sending zero length transaction queue"),n.every((e=>0===e.status))&&function(e,t,n){const i=n.map((e=>e.currentWriteId)),r=Ao(e,t,i);let s=r;const o=r.hash();for(let e=0;e<n.length;e++){const i=n[e];I(0===i.status,"tryToSendTransactionQueue_: items in queue should all be run."),i.status=1,i.retryCount++;const r=$n(t,i.path);s=s.updateChild(r,i.currentOutputSnapshotRaw)}const a=s.val(!0),l=t;e.server_.put(l.toString(),a,(i=>{po(e,"transaction put response",{path:l.toString(),status:i});let r=[];if("ok"===i){const i=[];for(let t=0;t<n.length;t++)n[t].status=2,r=r.concat(ls(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&i.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();bo(e,Rs(e.transactionQueueTree_,t)),_o(e,e.transactionQueueTree_),eo(e.eventQueue_,t,r);for(let e=0;e<i.length;e++)ln(i[e])}else{if("datastale"===i)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{Gt("transaction at "+l.toString()+" failed: "+i);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=i}mo(e,t)}}),o)}(e,zs(t),n)}else Ls(t)&&qs(t,(t=>{_o(e,t)}))}function mo(e,t){const n=fo(e,t),i=zs(n);return function(e,t,n){if(0===t.length)return;const i=[];let r=[];const s=t.filter((e=>0===e.status)).map((e=>e.currentWriteId));for(let a=0;a<t.length;a++){const l=t[a],c=$n(n,l.path);let h,d=!1;if(I(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)d=!0,h=l.abortReason,r=r.concat(ls(e.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=no)d=!0,h="maxretry",r=r.concat(ls(e.serverSyncTree_,l.currentWriteId,!0));else{const n=Ao(e,l.path,s);l.currentInputSnapshot=n;const i=t[a].update(n.val());if(void 0!==i){Gs("transaction failed: Data returned ",i,l.path);let t=Bi(i);"object"==typeof i&&null!=i&&V(i,".priority")||(t=t.updatePriority(n.getPriority()));const o=l.currentWriteId,a=oo(e),c=Ns(t,n,a);l.currentOutputSnapshotRaw=t,l.currentOutputSnapshotResolved=c,l.currentWriteId=ho(e),s.splice(s.indexOf(o),1),r=r.concat(as(e.serverSyncTree_,l.path,c,l.currentWriteId,l.applyLocally)),r=r.concat(ls(e.serverSyncTree_,o,!0))}else d=!0,h="nodata",r=r.concat(ls(e.serverSyncTree_,l.currentWriteId,!0))}eo(e.eventQueue_,n,r),r=[],d&&(t[a].status=2,o=t[a].unwatcher,setTimeout(o,Math.floor(0)),t[a].onComplete&&("nodata"===h?i.push((()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot))):i.push((()=>t[a].onComplete(new Error(h),!1,null)))))}var o;bo(e,e.transactionQueueTree_);for(let e=0;e<i.length;e++)ln(i[e]);_o(e,e.transactionQueueTree_)}(e,go(e,n),i),i}function fo(e,t){let n,i=e.transactionQueueTree_;for(n=Ln(t);null!==n&&void 0===Os(i);)i=Rs(i,n),n=Ln(t=Fn(t));return i}function go(e,t){const n=[];return Co(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function Co(e,t,n){const i=Os(t);if(i)for(let e=0;e<i.length;e++)n.push(i[e]);qs(t,(t=>{Co(e,t,n)}))}function bo(e,t){const n=Os(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,Ms(t,n.length>0?n:void 0)}qs(t,(t=>{bo(e,t)}))}function yo(e,t){const n=zs(fo(e,t)),i=Rs(e.transactionQueueTree_,t);return function(e,t,n){let i=e.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,(t=>{Eo(e,t)})),Eo(e,i),Fs(i,(t=>{Eo(e,t)})),n}function Eo(e,t){const n=Os(t);if(n){const i=[];let r=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(I(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(I(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),r=r.concat(ls(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&i.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?Ms(t,void 0):n.length=s+1,eo(e.eventQueue_,zs(t),r);for(let e=0;e<i.length;e++)ln(i[e])}}const vo=function(e,t){const n=wo(e),i=n.namespace;"firebase.com"===n.domain&&Vt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),i&&"undefined"!==i||"localhost"===n.domain||Vt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Gt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const r="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new gn(n.host,n.secure,i,r,t,"",i!==n.subdomain),path:new On(n.pathString)}},wo=function(e){let t="",n="",i="",r="",s="",o=!0,a="https",l=443;if("string"==typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let h=e.indexOf("/");-1===h&&(h=e.length);let d=e.indexOf("?");-1===d&&(d=e.length),t=e.substring(0,Math.min(h,d)),h<d&&(r=function(e){let t="";const n=e.split("/");for(let e=0;e<n.length;e++)if(n[e].length>0){let i=n[e];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(e){}t+="/"+i}return t}(e.substring(h,d)));const u=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const i=n.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Gt(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,d)));c=t.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const p=t.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{const e=t.indexOf(".");i=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=i}"ns"in u&&(s=u.ns)}return{host:t,port:l,domain:n,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}},xo="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ko=function(){let e=0;const t=[];return function(n){const i=n===e;let r;e=n;const s=new Array(8);for(r=7;r>=0;r--)s[r]=xo.charAt(n%64),n=Math.floor(n/64);I(0===n,"Cannot push at time == 0");let o=s.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=xo.charAt(t[r]);return I(20===o.length,"nextPushId: Length should be 20."),o}}();class Io{constructor(e,t,n,i){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+$(this.snapshot.exportVal())}}class Bo{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class To{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return I(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class So{constructor(e,t,n,i){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=i}get key(){return Hn(this._path)?null:zn(this._path)}get ref(){return new No(this._repo,this._path)}get _queryIdentifier(){const e=zi(this._queryParams),t=tn(e);return"{}"===t?"default":t}get _queryObject(){return zi(this._queryParams)}isEqual(e){if(!((e=ne(e))instanceof So))return!1;const t=this._repo===e._repo,n=Yn(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&n&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class No extends So{constructor(e,t){super(e,t,new qi,!1)}get parent(){const e=Wn(this._path);return null===e?null:new No(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Po{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new On(e),n=Ro(this.ref,e);return new Po(this._node.getChild(t),n,fi)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,((t,n)=>e(new Po(n,Ro(this.ref,t),fi))))}hasChild(e){const t=new On(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Do(e,t){return(e=ne(e))._checkNotDeleted("ref"),void 0!==t?Ro(e._root,t):e._root}function Ro(e,t){return null===Ln((e=ne(e))._path)?Qs("child","path",t,!1):Ks("child","path",t,!1),new No(e._repo,jn(e._path,t))}function Oo(e,t){e=ne(e),Xs("set",e._path),Vs("set",t,e._path,!1);const n=new F;return uo(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}function Mo(e){e=ne(e);const t=new To((()=>{})),n=new Lo(t);return function(e,t,n){const i=function(e,t){const n=t._path;let i=null;e.syncPointTree_.foreachOnPath(n,((e,t)=>{const r=$n(e,n);i=i||es(t,r)}));let r=e.syncPointTree_.get(n);r?i=i||es(r,Mn()):(r=new Qr,e.syncPointTree_=e.syncPointTree_.set(n,r));const s=null!=i,o=s?new er(i,!0,!1):null;return or(Zr(r,t,yr(e.pendingWriteTree_,t._path),s?o.getNode():xi.EMPTY_NODE,s).viewCache_)}(e.serverSyncTree_,t);return null!=i?Promise.resolve(i):e.server_.get(t).then((i=>{const r=Bi(i).withIndex(t._queryParams.getIndex());let s;if(us(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())s=cs(e.serverSyncTree_,t._path,r);else{const n=gs(e.serverSyncTree_,t);s=ds(e.serverSyncTree_,t._path,r,n)}return eo(e.eventQueue_,t._path,s),hs(e.serverSyncTree_,t,n,null,!0),r}),(n=>(po(e,"get for query "+$(t)+" failed: "+n),Promise.reject(new Error(n)))))}(e._repo,e,n).then((t=>new Po(t,new No(e._repo,e._path),e._queryParams.getIndex())))}class Lo{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new Io("value",this,new Po(e.snapshotNode,new No(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Bo(this,e,t):null}matches(e){return e instanceof Lo&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}!function(e){I(!Gr,"__referenceConstructor has already been defined"),Gr=e}(No),function(e){I(!Kr,"__referenceConstructor has already been defined"),Kr=e}(No);const qo={};function Fo(e,t,n,i,r){let s=i||e.options.databaseURL;void 0===s&&(e.options.projectId||Vt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ht("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o,a,l=vo(s,r),c=l.repoInfo;"undefined"!=typeof process&&process.env&&(a=process.env.FIREBASE_DATABASE_EMULATOR_HOST),a?(o=!0,s=`http://${a}?ns=${c.namespace}`,l=vo(s,r),c=l.repoInfo):o=!l.repoInfo.secure;const h=r&&o?new un(un.OWNER):new dn(e.name,e.options,t);(function(e,t){const n=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!$s(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Ys(e)}(n))throw new Error(ee(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",l),Hn(l.path)||Vt("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function(e,t,n,i){let r=qo[t.name];r||(r={},qo[t.name]=r);let s=r[e.toURLString()];return s&&Vt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new io(e,false,n,i),r[e.toURLString()]=s,s}(c,e,h,new hn(e.name,n));return new zo(d,e)}class zo{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(ro(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new No(this._repo,Mn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(e,t){const n=qo[t];n&&n[e.key]===e||Vt(`Database ${t}(${e.repoInfo_}) has already been deleted.`),function(e){e.persistentConnection_&&e.persistentConnection_.interrupt("repo_interrupt")}(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Vt("Cannot call "+e+" on a deleted database.")}}function Uo(e=function(e=at){const t=ct.get(e);if(!t&&e===at&&q())return mt();if(!t)throw At.create("no-app",{appName:e});return t}(),t){const n=function(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=(e=>{const t=(e=>{var t,n;return null===(n=null===(t=L())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),i]:[t.substring(0,n),i]})("database");e&&function(e,t,n,i={}){(e=ne(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&Vt("Cannot call useEmulator() after instance has already been initialized.");const r=e._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Vt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new un(un.OWNER);else if(i.mockUserToken){const t="string"==typeof i.mockUserToken?i.mockUserToken:function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[D(JSON.stringify({alg:"none",type:"JWT"})),D(JSON.stringify(s)),""].join(".")}(i.mockUserToken,e.app.options.projectId);s=new un(t)}!function(e,t,n,i){e.repoInfo_=new gn(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),i&&(e.authTokenProvider_=i)}(r,t,n,s)}(n,...e)}return n}Jn.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Jn.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},Pt="11.0.2",pt(new ie("database",((e,{instanceIdentifier:t})=>Fo(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t)),"PUBLIC").setMultipleInstances(!0)),ft(St,Nt,void 0),ft(St,Nt,"esm2017");const Wo=[],jo=new class{async fetchData(){const e=Do(Uo(Tt),"/excursions");let t=[];try{const n=(await Mo(e)).val();for(const e in n){const i={id:e,...n[e]};t.push(i)}console.log("Data fetched successfully!")}catch(e){throw new Error(`FETCH - failed, status: ${e}`)}return t}async pushData(e){const t=Do(Uo(Tt),"/excursions");try{await function(e,t){e=ne(e),Xs("push",e._path),Vs("push",t,e._path,!0);const n=so(e._repo),i=ko(n),r=Ro(e,i),s=Ro(e,i);let o;return o=null!=t?Oo(s,t).then((()=>s)):Promise.resolve(s),r.then=o.then.bind(o),r.catch=o.then.bind(o,void 0),r}(t,e),console.log("Data pushed successfully!")}catch(e){throw new Error(`PUSH - failed, status: ${e}`)}}async removeData(e){const t=Do(Uo(Tt),`/excursions/${e}`);try{await function(e){return Xs("remove",e._path),Oo(e,null)}(t)}catch(e){throw new Error(`REMOVE - failed, status: ${e}`)}}async updateData(e,t){const n=Do(Uo(Tt),`/excursions/${e}`);try{await Oo(n,t)}catch(e){throw new Error(`UPDATE - failed, status: ${e}`)}}},Ho=new class{constructor(e){this.basket=e}basketValidation=e=>{const t=e.target.querySelector('input[name = "adults"]').value,n=e.target.querySelector('input[name = "children"]').value,i=this.validateSubmitTickets(e,t,n),r=this.validateBasketSize(e,t,n);return!(!i||r)};validateSubmitTickets(e,t,n){let i=!0;const r=/^([1-9]|[1-9][0-9]|100)$/,s=e.target.querySelector('div[name = "adults"]'),o=e.target.querySelector('div[name = "children"]');return""===t&&""===n&&(s.innerText="Fill up the blank space!",i=!1),t&&!r.test(t)&&(s.innerText="Invalid data!",i=!1),n&&!r.test(n)&&(o.innerText="Invalid data!",i=!1),!!i}validateBasketSize(e,t,n){let i=!1;const r=e.target.parentElement.getAttribute("id");return this.basket.forEach((e=>{if(e.id===r){const r=100;let s=0;const o=[];e.adultsTicketAmount&&o.push(parseInt(e.adultsTicketAmount)),e.childrenTicketAmount&&o.push(parseInt(e.childrenTicketAmount)),t&&o.push(parseInt(t)),n&&o.push(parseInt(n));for(let e=0;e<o.length;e++)s+=o[e];s>r&&(i=!0,alert("The Basket is full!"))}})),i}orderValidation=()=>{if(0===this.basket.length)return alert("There're no items in the basket!"),!1;let e=!0;const{name:t,email:n,orderErrorName:i,orderErrorEmail:r}=this.createPlaceOrderVariables();return this.isClientNameValid(t)?i.innerText="":(i.innerText="Incorrect name.",e=!1),this.isClientEmailValid(n)?r.innerText="":(r.innerText="Incorrect email.",e=!1),!!e};createPlaceOrderVariables=()=>{const e=document.querySelector(".basket__order"),t=e.querySelector('input[name = "name"]'),n=t.value,i=e.querySelector('input[name = "email"]'),r=i.value,s=e.querySelector(".order__field-error--name"),o=e.querySelector(".order__field-error--email");return{basketOrder:e,nameInput:t,name:n,emailInput:i,email:r,orderErrorName:s,orderErrorEmail:o}};isClientNameValid(e){return!!/^[a-zA-ZąćęłńóśźżĄĆĘŁŃÓŚŹŻ\s]+$/.test(e)}isClientEmailValid(e){return!!/^\S+@\S+$/g.test(e)}}(Wo),$o=new class{manageNavbar(){window.addEventListener("DOMContentLoaded",(()=>{this.changeNavbarViews(),this.changeNavbarBackgroundColor(),this.onOffBasket(),this.showHideNavbar()}))}changeNavbarViews(){this.navbarMobileView(),window.addEventListener("resize",(()=>this.navbarMobileView()))}changeNavbarBackgroundColor(){const e=document.querySelector(".navbar"),t=document.querySelector(".basket-btn"),n=document.querySelector(".navbar__toggle");window.addEventListener("scroll",(()=>{window.scrollY>0?e.classList.add("navbar--background-scroll"):e.classList.remove("navbar--background-scroll")})),t.addEventListener("click",(()=>{e.classList.toggle("navbar--background-basket-btn")})),n.addEventListener("click",(()=>{e.classList.toggle("navbar--background-navbar-btn")}))}onOffBasket(){const e=document.querySelector(".basket-btn");e.addEventListener("click",(()=>{const t=document.querySelector(".basket"),n=document.querySelector("body");e.checked?(t.classList.add("basket--open"),n.style.overflow="hidden"):(t.classList.remove("basket--open"),n.style.overflow="initial")}))}showHideNavbar(){const e=document.querySelector(".navbar__toggle"),t=document.querySelector(".navbar__container--mobile"),n=document.querySelector(".navbar__btn");e.addEventListener("click",(()=>{t.classList.toggle("navbar__container--open"),n.classList.toggle("navbar__btn--checked")}))}navbarMobileView(){const e="navbar__container",t="navbar__item";window.innerWidth<1200?(this.changeClassOfElementList(`${t}`,`${t}--mobile`),this.changeClassOfElementList(`${e}`,`${e}--mobile`)):(this.changeClassOfElementList(`${t}--mobile`,`${t}`),this.changeClassOfElementList(`${e}--mobile`,`${e}`))}changeClassOfElementList(e,t){document.querySelectorAll(`.${e}`).forEach((n=>{n.classList.remove(`${e}`),n.classList.add(`${t}`)}))}};async function Yo(e){await async function(e){e.preventDefault();const{basketValidation:t}=Ho;if(!1===t(e))return;!function(){const e=document.querySelector(".panel__excursions");Array.from(e.querySelectorAll(".excursions__field-error")).forEach((e=>{e.innerText=""}))}();const{selectedExcursion:n}=await async function(e){const t=await jo.fetchData(),n=e.target.parentElement.id;return{selectedExcursion:t.find((e=>e.id===n))}}(e),{adultsTicketAmount:i,childrenTicketAmount:r}=function(e){let t=e.target.querySelector('input[name = "adults"]').value,n=e.target.querySelector('input[name = "children"]').value;return t?n?{adultsTicketAmount:t,childrenTicketAmount:n}:{adultsTicketAmount:t}:{childrenTicketAmount:n}}(e);!function(e){return Wo.some((t=>t.id===e.id))}(n)?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";const i={id:e.id,name:e.name,adultsPrice:e.adultsPrice,adultsTicketAmount:t,childrenPrice:e.childrenPrice,childrenTicketAmount:n};Wo.push(i)}(n,i,r):function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";Wo.forEach((i=>{i.id===e.id&&(function(e,t){e.adultsTicketAmount=(parseInt(e.adultsTicketAmount)+parseInt(t)).toString()}(i,t),function(e,t){e.childrenTicketAmount=(parseInt(e.childrenTicketAmount)+parseInt(t)).toString()}(i,n))}))}(n,i,r)}(e),Vo(),function(){const e=document.querySelector(".items-list");(function(e){for(;e.children[1];)e.removeChild(e.children[1])})(e),Wo.forEach((t=>{const{itemListItemTemplate:n,name:i,pricesAdults:r,pricesChildren:s,itemTotalPrice:o}=function(){const e=document.querySelector(".item-list__item--prototype").cloneNode(!0);e.classList.remove("item-list__item--prototype");const t=e.querySelector(".item__name"),n=e.querySelector(".item__prices"),i=n.querySelector(".prices__adults"),r=n.querySelector(".prices__children"),s=e.querySelector(".item__total-price");return{itemListItemTemplate:e,name:t,pricesAdults:i,pricesChildren:r,itemTotalPrice:s}}();n.setAttribute("id",t.id),i.innerText=t.name,function(e,t,n){const{adultsTicketAmount:i,childrenTicketAmount:r}=Qo(e),{adultsTicketText:s,childrenTicketText:o}=function(e){const{adultsTicketAmount:t,childrenTicketAmount:n,adultsPrice:i,childrenPrice:r}=e;return{adultsTicketText:`adults:\n   ${t} x ${i} PLN`,childrenTicketText:`children:\n   ${n} x ${r} PLN`}}(e);i&&r?(t.innerText=s,n.innerText=o):i?(t.innerText=s,n.innerText=""):r&&(n.innerText=o,t.innerText="")}(t,r,s),function(e,t){const{adultsTicketAmount:n,childrenTicketAmount:i,adultsPrice:r,childrenPrice:s}=Qo(e);t.innerText=n*r+i*s+" PLN"}(t,o),e.appendChild(n)}))}(),document.querySelector(".panel__excursions").querySelectorAll("input:not([type = 'submit'])").forEach((e=>{e.value=""})),Ko(),document.querySelector(".items-list").querySelectorAll(".item__btn-remove").forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),function(e){const t=e.target.parentElement,n=t.parentElement,i=Wo.findIndex((e=>t.id===e.id));Wo.splice(i,1),n.removeChild(t),Vo(),Ko()}(e)}))}))}function Vo(){const e=document.querySelector(".basket-btn__quantity");Wo.length>0?e.style.display="flex":e.style.display="none";const t=Wo.length;e.innerText=`${t}`}function Go(){let e=0;return Wo.forEach((t=>{const{adultsTicketAmount:n,childrenTicketAmount:i,adultsPrice:r,childrenPrice:s}=Qo(t);e+=n*r+i*s})),{totalPrice:e}}function Ko(){const{totalPrice:e}=Go();document.querySelector(".total-price__value").innerText=e+" PLN"}function Qo(e){let{adultsTicketAmount:t,childrenTicketAmount:n,adultsPrice:i,childrenPrice:r}=e;return t=parseInt(t),n=parseInt(n),i=parseInt(i),r=parseInt(r),{adultsTicketAmount:t,childrenTicketAmount:n,adultsPrice:i,childrenPrice:r}}async function Xo(e){e.preventDefault();const{orderValidation:t,createPlaceOrderVariables:n}=Ho;if(!1===t())return;const{name:i,email:r}=n(),{totalPrice:s}=Go(),{orderObj:o}=function(e,t,n){return{orderObj:{userName:t,userEmail:n,basket:e}}}(Wo,i,r);alert(`Thank you for placing an order worth ${s} PLN. The order details have been sent to the following email address: ${r}.\n    \n    This is a demo. No personal data was collected.\n    `),location.reload()}console.log("client"),document.addEventListener("DOMContentLoaded",(async function(){$o.manageNavbar(),function(e){const t=document.querySelector(".panel__excursions");e.forEach((e=>{const{excursionTemplate:n,name:i,description:r,adultsPrice:s,childrenPrice:o}=function(){const e=document.querySelector(".excursions__item--prototype").cloneNode(!0);e.classList.remove("excursions__item--prototype");const t=e.querySelector(".excursions__name"),n=e.querySelector(".excursions__description"),i=e.querySelectorAll(".excursions__price"),[r,s]=i;return{excursionTemplate:e,name:t,description:n,adultsPrice:r,childrenPrice:s}}();n.setAttribute("id",e.id),i.innerText=e.name,r.innerText=e.description,s.innerText=e.adultsPrice,o.innerText=e.childrenPrice,t.appendChild(n)}))}(await jo.fetchData()),document.querySelector(".excursions").addEventListener("submit",Yo),document.querySelector(".basket__order").addEventListener("submit",Xo)}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WmpULFNBQVNxVixpQkFBaUIsb0JBRTFCa0IsaUJBQ0U2b0QsR0FBVUMsZUFZWixTQUF3QjZCLEdBQ3RCLE1BQU1ILEVBQWtCL2dFLFNBQVNDLGNBQWMsc0JBRS9DaWhFLEVBQWUzc0IsU0FBUzZzQixJQUN0QixNQUFNLGtCQUFFMkMsRUFBaUIsS0FBRTE4RCxFQUFJLFlBQUUyOEQsRUFBVyxZQUFFdkMsRUFBVyxjQUFFQyxHQWEvRCxXQUNFLE1BQU1xQyxFQUFvQi9qRSxTQUN2QkMsY0FBYyxnQ0FDZHNpRSxXQUFVLEdBQ2J3QixFQUFrQmhFLFVBQVUzZ0UsT0FBTywrQkFDbkMsTUFBTWlJLEVBQU8wOEQsRUFBa0I5akUsY0FBYyxxQkFDdkMrakUsRUFBY0QsRUFBa0I5akUsY0FDcEMsNEJBRUlna0UsRUFBUUYsRUFBa0JwRCxpQkFBaUIsdUJBQzFDYyxFQUFhQyxHQUFpQnVDLEVBRXJDLE1BQU8sQ0FBRUYsb0JBQW1CMThELE9BQU0yOEQsY0FBYXZDLGNBQWFDLGdCQUM5RCxDQXpCTXdDLEdBRUZILEVBQWtCL2lFLGFBQWEsS0FBTW9nRSxFQUFVem1FLElBQy9DME0sRUFBSzIyRCxVQUFZb0QsRUFBVS81RCxLQUMzQjI4RCxFQUFZaEcsVUFBWW9ELEVBQVU0QyxZQUNsQ3ZDLEVBQVl6RCxVQUFZb0QsRUFBVUssWUFDbENDLEVBQWMxRCxVQUFZb0QsRUFBVU0sY0FFcENYLEVBQWdCdGdFLFlBQVlzakUsRUFBa0IsR0FFbEQsQ0F4QkVJLE9BRDZCekgsR0FBY0MsYUFHZjM4RCxTQUFTQyxjQUFjLGVBQy9Cb1YsaUJBQWlCLFNBQVV3ckQsSUFFM0I3Z0UsU0FBU0MsY0FBYyxrQkFDL0JvVixpQkFBaUIsU0FBVW91RCxHQUN6QyIsInNvdXJjZXMiOlsid2VicGFjazovL3Rhc2stZXhjdXNpb25zLWFwaS8uL3NyYy9jc3MvY2xpZW50L2Jhc2tldC9iYXNrZXQtZm9udHMuY3NzIiwid2VicGFjazovL3Rhc2stZXhjdXNpb25zLWFwaS8uL3NyYy9jc3MvY2xpZW50L2Jhc2tldC9iYXNrZXQuY3NzIiwid2VicGFjazovL3Rhc2stZXhjdXNpb25zLWFwaS8uL3NyYy9jc3MvY2xpZW50L2Rlc2t0b3AuY3NzIiwid2VicGFjazovL3Rhc2stZXhjdXNpb25zLWFwaS8uL3NyYy9jc3MvY2xpZW50L2ZvbnRzLmNzcyIsIndlYnBhY2s6Ly90YXNrLWV4Y3VzaW9ucy1hcGkvLi9zcmMvY3NzL2NsaWVudC9nbG9iYWwuY3NzIiwid2VicGFjazovL3Rhc2stZXhjdXNpb25zLWFwaS8uL3NyYy9jc3MvY2xpZW50L21vYmlsZS5jc3MiLCJ3ZWJwYWNrOi8vdGFzay1leGN1c2lvbnMtYXBpLy4vc3JjL2Nzcy9yZXNldC5jc3MiLCJ3ZWJwYWNrOi8vdGFzay1leGN1c2lvbnMtYXBpLy4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qcyIsIndlYnBhY2s6Ly90YXNrLWV4Y3VzaW9ucy1hcGkvLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvZ2V0VXJsLmpzIiwid2VicGFjazovL3Rhc2stZXhjdXNpb25zLWFwaS8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9zb3VyY2VNYXBzLmpzIiwid2VicGFjazovL3Rhc2stZXhjdXNpb25zLWFwaS8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qcyIsIndlYnBhY2s6Ly90YXNrLWV4Y3VzaW9ucy1hcGkvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRCeVNlbGVjdG9yLmpzIiwid2VicGFjazovL3Rhc2stZXhjdXNpb25zLWFwaS8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydFN0eWxlRWxlbWVudC5qcyIsIndlYnBhY2s6Ly90YXNrLWV4Y3VzaW9ucy1hcGkvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanMiLCJ3ZWJwYWNrOi8vdGFzay1leGN1c2lvbnMtYXBpLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVEb21BUEkuanMiLCJ3ZWJwYWNrOi8vdGFzay1leGN1c2lvbnMtYXBpLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanMiLCJ3ZWJwYWNrOi8vdGFzay1leGN1c2lvbnMtYXBpL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3Rhc2stZXhjdXNpb25zLWFwaS93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly90YXNrLWV4Y3VzaW9ucy1hcGkvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3Rhc2stZXhjdXNpb25zLWFwaS93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL3Rhc2stZXhjdXNpb25zLWFwaS93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3Rhc2stZXhjdXNpb25zLWFwaS93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly90YXNrLWV4Y3VzaW9ucy1hcGkvd2VicGFjay9ydW50aW1lL2pzb25wIGNodW5rIGxvYWRpbmciLCJ3ZWJwYWNrOi8vdGFzay1leGN1c2lvbnMtYXBpL3dlYnBhY2svcnVudGltZS9ub25jZSIsIndlYnBhY2s6Ly90YXNrLWV4Y3VzaW9ucy1hcGkvLi9zcmMvY3NzL3Jlc2V0LmNzcz8xNTJiIiwid2VicGFjazovL3Rhc2stZXhjdXNpb25zLWFwaS8uL3NyYy9jc3MvY2xpZW50L2ZvbnRzLmNzcz84Y2UwIiwid2VicGFjazovL3Rhc2stZXhjdXNpb25zLWFwaS8uL3NyYy9jc3MvY2xpZW50L2dsb2JhbC5jc3M/NDAzOCIsIndlYnBhY2s6Ly90YXNrLWV4Y3VzaW9ucy1hcGkvLi9zcmMvY3NzL2NsaWVudC9tb2JpbGUuY3NzP2E4ZTAiLCJ3ZWJwYWNrOi8vdGFzay1leGN1c2lvbnMtYXBpLy4vc3JjL2Nzcy9jbGllbnQvZGVza3RvcC5jc3M/MDkzNyIsIndlYnBhY2s6Ly90YXNrLWV4Y3VzaW9ucy1hcGkvLi9zcmMvY3NzL2NsaWVudC9iYXNrZXQvYmFza2V0LWZvbnRzLmNzcz9jMmI1Iiwid2VicGFjazovL3Rhc2stZXhjdXNpb25zLWFwaS8uL3NyYy9jc3MvY2xpZW50L2Jhc2tldC9iYXNrZXQuY3NzPzZkYjkiLCJ3ZWJwYWNrOi8vdGFzay1leGN1c2lvbnMtYXBpLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS91dGlsL2Rpc3QvaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly90YXNrLWV4Y3VzaW9ucy1hcGkvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2NvbXBvbmVudC9kaXN0L2VzbS9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL3Rhc2stZXhjdXNpb25zLWFwaS8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvbG9nZ2VyL2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vdGFzay1leGN1c2lvbnMtYXBpLy4vbm9kZV9tb2R1bGVzL2lkYi9idWlsZC93cmFwLWlkYi12YWx1ZS5qcyIsIndlYnBhY2s6Ly90YXNrLWV4Y3VzaW9ucy1hcGkvLi9ub2RlX21vZHVsZXMvaWRiL2J1aWxkL2luZGV4LmpzIiwid2VicGFjazovL3Rhc2stZXhjdXNpb25zLWFwaS8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvYXBwL2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vdGFzay1leGN1c2lvbnMtYXBpLy4vbm9kZV9tb2R1bGVzL2ZpcmViYXNlL2FwcC9kaXN0L2VzbS9pbmRleC5lc20uanMiLCJ3ZWJwYWNrOi8vdGFzay1leGN1c2lvbnMtYXBpLy4vc3JjL2ZpcmViYXNlQ29uZmlnLmpzIiwid2VicGFjazovL3Rhc2stZXhjdXNpb25zLWFwaS8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZGF0YWJhc2UvZGlzdC9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL3Rhc2stZXhjdXNpb25zLWFwaS8uL3NyYy9qcy9GaXJlYmFzZUZldGNoLmpzIiwid2VicGFjazovL3Rhc2stZXhjdXNpb25zLWFwaS8uL3NyYy9qcy9jbGllbnQuanMiLCJ3ZWJwYWNrOi8vdGFzay1leGN1c2lvbnMtYXBpLy4vc3JjL2pzL1ZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vdGFzay1leGN1c2lvbnMtYXBpLy4vc3JjL2pzL25hdmJhckNTUy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBJbXBvcnRzXG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyBmcm9tIFwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL3NvdXJjZU1hcHMuanNcIjtcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gZnJvbSBcIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIjtcbnZhciBfX19DU1NfTE9BREVSX0VYUE9SVF9fXyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fKTtcbi8vIE1vZHVsZVxuX19fQ1NTX0xPQURFUl9FWFBPUlRfX18ucHVzaChbbW9kdWxlLmlkLCBgLmJhc2tldF9faGVhZGVyLS1tZWRpdW0ge1xuICBmb250LXdlaWdodDogdmFyKC0tZm9udC13ZWlnaHQtbWVkaXVtKTtcbn1cblxuLnRvdGFsLXByaWNlX192YWx1ZSB7XG4gIGZvbnQtd2VpZ2h0OiB2YXIoLS1mb250LXdlaWdodC1zZW1pLWJvbGQpO1xufVxuXG4uYmFza2V0X19oZWFkZXIge1xuICBmb250LXNpemU6IDEuMnJlbTtcbn1cblxuLmJhc2tldF9faGVhZGVyLS1tYWluIHtcbiAgZm9udC1zaXplOiAxLjZyZW07XG59XG5cbi5iYXNrZXRfX2hlYWRlci0tbWVkaXVtIHtcbiAgZm9udC1zaXplOiAxLjNyZW07XG59XG5cbi5pdGVtX190b3RhbC1wcmljZSB7XG4gIGZvbnQtc2l6ZTogMS4zcmVtO1xufVxuXG4uYmFza2V0X19oZWFkZXItLW1vYmlsZSxcbi5pdGVtX19wcmljZXMge1xuICBmb250LXNpemU6IDFyZW07XG59XG5cbi5vcmRlcl9fZmllbGQtaW5wdXQge1xuICBmb250LXNpemU6IDEuMnJlbTtcbn1cblxuQG1lZGlhIChtaW4td2lkdGg6IDY1MHB4KSB7XG4gIC5iYXNrZXRfX2hlYWRlciB7XG4gICAgZm9udC1zaXplOiAxLjNyZW07XG4gIH1cblxuICAuYmFza2V0X19oZWFkZXItLW1haW4ge1xuICAgIGZvbnQtc2l6ZTogMnJlbTtcbiAgfVxuXG4gIC5iYXNrZXRfX2hlYWRlci0tbWVkaXVtIHtcbiAgICBmb250LXNpemU6IDEuNXJlbTtcbiAgfVxuXG4gIC5pdGVtX190b3RhbC1wcmljZSB7XG4gICAgZm9udC1zaXplOiAxLjVyZW07XG4gIH1cblxuICAuaXRlbV9fcHJpY2VzIHtcbiAgICBmb250LXNpemU6IDEuMnJlbTtcbiAgfVxuXG4gIC5vcmRlcl9fZmllbGQtaW5wdXQge1xuICAgIGZvbnQtc2l6ZTogMS4ycmVtO1xuICB9XG59XG5cbkBtZWRpYSAobWluLXdpZHRoOiA5NTBweCkge1xuXG4gIC5iYXNrZXRfX2hlYWRlciB7XG4gICAgZm9udC1zaXplOiAxLjNyZW07XG4gIH1cblxuICAuYmFza2V0X19oZWFkZXItLW1haW4ge1xuICAgIGZvbnQtc2l6ZTogMi41cmVtO1xuICB9XG5cbiAgLmJhc2tldF9faGVhZGVyLS1tZWRpdW0ge1xuICAgIGZvbnQtc2l6ZTogMS41cmVtO1xuICB9XG5cbiAgLm9yZGVyX19maWVsZC1pbnB1dCB7XG4gICAgZm9udC1zaXplOiAxLjNyZW07XG4gIH1cbn1gLCBcIlwiLHtcInZlcnNpb25cIjozLFwic291cmNlc1wiOltcIndlYnBhY2s6Ly8uL3NyYy9jc3MvY2xpZW50L2Jhc2tldC9iYXNrZXQtZm9udHMuY3NzXCJdLFwibmFtZXNcIjpbXSxcIm1hcHBpbmdzXCI6XCJBQUFBO0VBQ0Usc0NBQXNDO0FBQ3hDOztBQUVBO0VBQ0UseUNBQXlDO0FBQzNDOztBQUVBO0VBQ0UsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UsaUJBQWlCO0FBQ25COztBQUVBOztFQUVFLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxpQkFBaUI7QUFDbkI7O0FBRUE7RUFDRTtJQUNFLGlCQUFpQjtFQUNuQjs7RUFFQTtJQUNFLGVBQWU7RUFDakI7O0VBRUE7SUFDRSxpQkFBaUI7RUFDbkI7O0VBRUE7SUFDRSxpQkFBaUI7RUFDbkI7O0VBRUE7SUFDRSxpQkFBaUI7RUFDbkI7O0VBRUE7SUFDRSxpQkFBaUI7RUFDbkI7QUFDRjs7QUFFQTs7RUFFRTtJQUNFLGlCQUFpQjtFQUNuQjs7RUFFQTtJQUNFLGlCQUFpQjtFQUNuQjs7RUFFQTtJQUNFLGlCQUFpQjtFQUNuQjs7RUFFQTtJQUNFLGlCQUFpQjtFQUNuQjtBQUNGXCIsXCJzb3VyY2VzQ29udGVudFwiOltcIi5iYXNrZXRfX2hlYWRlci0tbWVkaXVtIHtcXG4gIGZvbnQtd2VpZ2h0OiB2YXIoLS1mb250LXdlaWdodC1tZWRpdW0pO1xcbn1cXG5cXG4udG90YWwtcHJpY2VfX3ZhbHVlIHtcXG4gIGZvbnQtd2VpZ2h0OiB2YXIoLS1mb250LXdlaWdodC1zZW1pLWJvbGQpO1xcbn1cXG5cXG4uYmFza2V0X19oZWFkZXIge1xcbiAgZm9udC1zaXplOiAxLjJyZW07XFxufVxcblxcbi5iYXNrZXRfX2hlYWRlci0tbWFpbiB7XFxuICBmb250LXNpemU6IDEuNnJlbTtcXG59XFxuXFxuLmJhc2tldF9faGVhZGVyLS1tZWRpdW0ge1xcbiAgZm9udC1zaXplOiAxLjNyZW07XFxufVxcblxcbi5pdGVtX190b3RhbC1wcmljZSB7XFxuICBmb250LXNpemU6IDEuM3JlbTtcXG59XFxuXFxuLmJhc2tldF9faGVhZGVyLS1tb2JpbGUsXFxuLml0ZW1fX3ByaWNlcyB7XFxuICBmb250LXNpemU6IDFyZW07XFxufVxcblxcbi5vcmRlcl9fZmllbGQtaW5wdXQge1xcbiAgZm9udC1zaXplOiAxLjJyZW07XFxufVxcblxcbkBtZWRpYSAobWluLXdpZHRoOiA2NTBweCkge1xcbiAgLmJhc2tldF9faGVhZGVyIHtcXG4gICAgZm9udC1zaXplOiAxLjNyZW07XFxuICB9XFxuXFxuICAuYmFza2V0X19oZWFkZXItLW1haW4ge1xcbiAgICBmb250LXNpemU6IDJyZW07XFxuICB9XFxuXFxuICAuYmFza2V0X19oZWFkZXItLW1lZGl1bSB7XFxuICAgIGZvbnQtc2l6ZTogMS41cmVtO1xcbiAgfVxcblxcbiAgLml0ZW1fX3RvdGFsLXByaWNlIHtcXG4gICAgZm9udC1zaXplOiAxLjVyZW07XFxuICB9XFxuXFxuICAuaXRlbV9fcHJpY2VzIHtcXG4gICAgZm9udC1zaXplOiAxLjJyZW07XFxuICB9XFxuXFxuICAub3JkZXJfX2ZpZWxkLWlucHV0IHtcXG4gICAgZm9udC1zaXplOiAxLjJyZW07XFxuICB9XFxufVxcblxcbkBtZWRpYSAobWluLXdpZHRoOiA5NTBweCkge1xcblxcbiAgLmJhc2tldF9faGVhZGVyIHtcXG4gICAgZm9udC1zaXplOiAxLjNyZW07XFxuICB9XFxuXFxuICAuYmFza2V0X19oZWFkZXItLW1haW4ge1xcbiAgICBmb250LXNpemU6IDIuNXJlbTtcXG4gIH1cXG5cXG4gIC5iYXNrZXRfX2hlYWRlci0tbWVkaXVtIHtcXG4gICAgZm9udC1zaXplOiAxLjVyZW07XFxuICB9XFxuXFxuICAub3JkZXJfX2ZpZWxkLWlucHV0IHtcXG4gICAgZm9udC1zaXplOiAxLjNyZW07XFxuICB9XFxufVwiXSxcInNvdXJjZVJvb3RcIjpcIlwifV0pO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgX19fQ1NTX0xPQURFUl9FWFBPUlRfX187XG4iLCIvLyBJbXBvcnRzXG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyBmcm9tIFwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL3NvdXJjZU1hcHMuanNcIjtcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gZnJvbSBcIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIjtcbmltcG9ydCBfX19DU1NfTE9BREVSX0dFVF9VUkxfSU1QT1JUX19fIGZyb20gXCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvZ2V0VXJsLmpzXCI7XG52YXIgX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzBfX18gPSBuZXcgVVJMKFwiLi4vLi4vLi4vYXNzZXRzL2RlbGV0ZUJ0bi5zdmdcIiwgaW1wb3J0Lm1ldGEudXJsKTtcbnZhciBfX19DU1NfTE9BREVSX0VYUE9SVF9fXyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fKTtcbnZhciBfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF8wX19fID0gX19fQ1NTX0xPQURFUl9HRVRfVVJMX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMF9fXyk7XG4vLyBNb2R1bGVcbl9fX0NTU19MT0FERVJfRVhQT1JUX19fLnB1c2goW21vZHVsZS5pZCwgYC5iYXNrZXQge1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIHotaW5kZXg6IDk5ODtcbiAgdG9wOiAwO1xuICBsZWZ0OiAwO1xuICBkaXNwbGF5OiBub25lO1xuICBhbGlnbi1pdGVtczogc3RhcnQ7XG4gIGdhcDogNDBweDtcbiAgZ3JpZC10ZW1wbGF0ZS1hcmVhczogXCJpdGVtc1wiXG4gICAgXCJ0b3RhbC1wcmljZVwiXG4gICAgXCJvcmRlclwiO1xuICBwYWRkaW5nLXRvcDogMTY5cHg7XG4gIHBhZGRpbmctaW5saW5lOiAyMHB4O1xuICBwYWRkaW5nLWJvdHRvbTogNDBweDtcbiAgd2lkdGg6IDEwMHZ3O1xuICBoZWlnaHQ6IDEwMHZoO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yLWJyaWdodCk7XG4gIG92ZXJmbG93LXk6IGF1dG87XG59XG5cbi5iYXNrZXQtLW9wZW4ge1xuICBkaXNwbGF5OiBncmlkO1xufVxuXG4uYmFza2V0X19pdGVtcyxcbi50b3RhbC1wcmljZSxcbi5iYXNrZXRfX29yZGVyIHtcbiAgYm9yZGVyLXJhZGl1czogMjBweDtcbiAgcGFkZGluZzogMzBweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvcik7XG59XG5cbi5iYXNrZXRfX2l0ZW1zLFxuLml0ZW0tbGlzdF9faXRlbSB7XG4gIGRpc3BsYXk6IGdyaWQ7XG4gIGdhcDogMjBweDtcbiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyIDAuNWZyIDAuNGZyO1xufVxuXG4uYmFza2V0X19pdGVtcyB7XG4gIGdyaWQtYXJlYTogaXRlbXM7XG4gIGdhcDogMzBweDtcbn1cblxuLnRvdGFsLXByaWNlIHtcbiAgZ3JpZC1hcmVhOiB0b3RhbC1wcmljZTtcbn1cblxuLm9yZGVyIHtcbiAgZ3JpZC1hcmVhOiBvcmRlcjtcbn1cblxuLmJhc2tldF9faGVhZGVyLS1tYWluIHtcbiAgZ3JpZC1jb2x1bW46IDEgLyA1O1xuICBwYWRkaW5nLWJvdHRvbTogMTBweDtcbiAgYm9yZGVyLWJvdHRvbTogM3B4IHNvbGlkIHZhcigtLXByaW1hcnktY29sb3Itc3RyaXBlKTtcbn1cblxuLmJhc2tldF9faGVhZGVyLS1wYWRkaW5nLWxlZnQge1xuICBwYWRkaW5nLWxlZnQ6IDIwcHg7XG59XG5cbi5iYXNrZXRfX29yZGVyPi5vcmRlcl9fZmllbGQtLXN1Ym1pdCB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cblxuLmJhc2tldF9fb3JkZXI+Kjpub3QoOmxhc3QtY2hpbGQpIHtcbiAgbWFyZ2luLWJvdHRvbTogMTBweDtcbn1cblxuLm9yZGVyX19maWVsZC1lcnJvciB7XG4gIGNvbG9yOiByZWQ7XG59XG5cbi5vcmRlcl9fZmllbGQtaW5wdXQge1xuICBtYXJnaW4tdG9wOiAxMHB4O1xuICBib3JkZXI6IG5vbmU7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvci1icmlnaHQpO1xufVxuXG4ub3JkZXJfX2ZpZWxkLXN1Ym1pdCB7XG4gIHBhZGRpbmc6IDIwcHg7XG4gIG1hcmdpbi10b3A6IDMwcHg7XG4gIHdpZHRoOiAyMDBweDtcbiAgYm9yZGVyOiA0cHggc29saWQgd2hpdGU7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXNlY29uZGFyeS1jb2xvcik7XG59XG5cbi5vcmRlcl9fZmllbGQtbmFtZSB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGdhcDogNXB4O1xufVxuXG4uaXRlbXMtbGlzdCB7XG4gIGdyaWQtY29sdW1uOiAxIC8gNTtcbn1cblxuLml0ZW0tbGlzdF9faXRlbSB7XG4gIGdyaWQtY29sdW1uOiAxIC8gNTtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgcGFkZGluZzogMzBweCAyMHB4O1xuICBib3JkZXI6IDNweCBzb2xpZCB2YXIoLS1wcmltYXJ5LWNvbG9yLXN0cmlwZSk7XG4gIGJvcmRlci1yYWRpdXM6IDIwcHg7XG59XG5cbi5pdGVtX19idG4tcmVtb3ZlIHtcbiAgY29udGVudDogdXJsKCR7X19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMF9fX30pO1xuICBtYXJnaW4tdG9wOiAzMHB4O1xuICBtYXJnaW4taW5saW5lOiBhdXRvO1xuICBwYWRkaW5nOiAxMHB4O1xuICBib3JkZXItcmFkaXVzOiAxMDB2dztcbiAgYm9yZGVyOiAzcHggc29saWQgdmFyKC0tcHJpbWFyeS1jb2xvci1zdHJpcGUpO1xufVxuXG4uaXRlbV9fcHJpY2VzIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgZ2FwOiAxMHB4O1xufVxuXG4uYmFza2V0X19oZWFkZXItLXRhYmxldCB7XG4gIGRpc3BsYXk6IG5vbmU7XG59XG5cbi5iYXNrZXRfX2hlYWRlci0tbW9iaWxlIHtcbiAgcGFkZGluZy1ib3R0b206IDEwcHg7XG4gIGJvcmRlci1ib3R0b206IDNweCBzb2xpZCB2YXIoLS1wcmltYXJ5LWNvbG9yLXN0cmlwZSk7XG59XG5cbi5iYXNrZXRfX2hlYWRlci0tbW9iaWxlOm5vdCg6Zmlyc3QtY2hpbGQpIHtcbiAgbWFyZ2luLXRvcDogMzBweDtcbn1cblxuLml0ZW0tbGlzdF9faXRlbSB7XG4gIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyO1xufVxuXG4uYmFza2V0X19oZWFkZXItLW1lZGl1bSxcbi5pdGVtX19wcmljZXMsXG4uaXRlbV9fdG90YWwtcHJpY2Uge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG5cbkBtZWRpYSAobWF4LXdpZHRoOiAzNjBweCkge1xuXG4gIC5iYXNrZXQsXG4gIC5iYXNrZXRfX2l0ZW1zLFxuICAudG90YWwtcHJpY2UsXG4gIC5iYXNrZXRfX29yZGVyIHtcbiAgICBwYWRkaW5nLWlubGluZTogMTBweDtcbiAgfVxufVxuXG5AbWVkaWEgKG1pbi13aWR0aDogNjUwcHgpIHtcblxuICAuYmFza2V0IHtcbiAgICBwYWRkaW5nLWlubGluZTogNDBweDtcbiAgfVxufVxuXG5AbWVkaWEgKG1pbi13aWR0aDogOTUwcHgpIHtcblxuICAuYmFza2V0X19oZWFkZXItLW1lZGl1bSxcbiAgLml0ZW1fX3ByaWNlcyxcbiAgLml0ZW1fX3RvdGFsLXByaWNlIHtcbiAgICB0ZXh0LWFsaWduOiB1bnNldDtcbiAgfVxuXG4gIC5pdGVtX19idG4tcmVtb3ZlIHtcbiAgICBtYXJnaW4tdG9wOiB1bnNldDtcbiAgfVxuXG4gIC5iYXNrZXRfX2hlYWRlci0tbW9iaWxlIHtcbiAgICBkaXNwbGF5OiBub25lO1xuICB9XG5cbiAgLmJhc2tldF9faGVhZGVyLS10YWJsZXQge1xuICAgIGRpc3BsYXk6IGluaXRpYWw7XG4gIH1cblxuICAuYmFza2V0IHtcbiAgICBncmlkLXRlbXBsYXRlLWFyZWFzOiBcIml0ZW1zIGl0ZW1zXCJcbiAgICAgIFwidG90YWwtcHJpY2Ugb3JkZXJcIjtcbiAgICBncmlkLXRlbXBsYXRlLXJvd3M6IDFmciAyZnI7XG4gICAgcGFkZGluZy1pbmxpbmU6IDYwcHg7XG4gIH1cblxuICAuaXRlbS1saXN0X19pdGVtIHtcbiAgICBqdXN0aWZ5LWl0ZW1zOiBzdGFydDtcbiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnIgMC41ZnIgMC40ZnI7XG4gIH1cblxufVxuXG5AbWVkaWEgKG1pbi13aWR0aDogMTIwMHB4KSB7XG4gIC5iYXNrZXQge1xuICAgIGdyaWQtdGVtcGxhdGUtYXJlYXM6XG4gICAgICBcIml0ZW1zIHRvdGFsLXByaWNlXCJcbiAgICAgIFwiaXRlbXMgb3JkZXJcIjtcbiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAwLjVmcjtcbiAgICBncmlkLXRlbXBsYXRlLXJvd3M6IG1heC1jb250ZW50O1xuICB9XG59YCwgXCJcIix7XCJ2ZXJzaW9uXCI6MyxcInNvdXJjZXNcIjpbXCJ3ZWJwYWNrOi8vLi9zcmMvY3NzL2NsaWVudC9iYXNrZXQvYmFza2V0LmNzc1wiXSxcIm5hbWVzXCI6W10sXCJtYXBwaW5nc1wiOlwiQUFBQTtFQUNFLGVBQWU7RUFDZixZQUFZO0VBQ1osTUFBTTtFQUNOLE9BQU87RUFDUCxhQUFhO0VBQ2Isa0JBQWtCO0VBQ2xCLFNBQVM7RUFDVDs7V0FFUztFQUNULGtCQUFrQjtFQUNsQixvQkFBb0I7RUFDcEIsb0JBQW9CO0VBQ3BCLFlBQVk7RUFDWixhQUFhO0VBQ2IsNkNBQTZDO0VBQzdDLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLGFBQWE7QUFDZjs7QUFFQTs7O0VBR0UsbUJBQW1CO0VBQ25CLGFBQWE7RUFDYixzQ0FBc0M7QUFDeEM7O0FBRUE7O0VBRUUsYUFBYTtFQUNiLFNBQVM7RUFDVCwwQ0FBMEM7QUFDNUM7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsU0FBUztBQUNYOztBQUVBO0VBQ0Usc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0UsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLG9CQUFvQjtFQUNwQixvREFBb0Q7QUFDdEQ7O0FBRUE7RUFDRSxrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxVQUFVO0FBQ1o7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsWUFBWTtFQUNaLFlBQVk7RUFDWiw2Q0FBNkM7QUFDL0M7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsZ0JBQWdCO0VBQ2hCLFlBQVk7RUFDWix1QkFBdUI7RUFDdkIsd0NBQXdDO0FBQzFDOztBQUVBO0VBQ0UsYUFBYTtFQUNiLHNCQUFzQjtFQUN0QixRQUFRO0FBQ1Y7O0FBRUE7RUFDRSxrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsbUJBQW1CO0VBQ25CLGtCQUFrQjtFQUNsQiw2Q0FBNkM7RUFDN0MsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsZ0RBQTJDO0VBQzNDLGdCQUFnQjtFQUNoQixtQkFBbUI7RUFDbkIsYUFBYTtFQUNiLG9CQUFvQjtFQUNwQiw2Q0FBNkM7QUFDL0M7O0FBRUE7RUFDRSxhQUFhO0VBQ2Isc0JBQXNCO0VBQ3RCLFNBQVM7QUFDWDs7QUFFQTtFQUNFLGFBQWE7QUFDZjs7QUFFQTtFQUNFLG9CQUFvQjtFQUNwQixvREFBb0Q7QUFDdEQ7O0FBRUE7RUFDRSxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSwwQkFBMEI7QUFDNUI7O0FBRUE7OztFQUdFLGtCQUFrQjtBQUNwQjs7QUFFQTs7RUFFRTs7OztJQUlFLG9CQUFvQjtFQUN0QjtBQUNGOztBQUVBOztFQUVFO0lBQ0Usb0JBQW9CO0VBQ3RCO0FBQ0Y7O0FBRUE7O0VBRUU7OztJQUdFLGlCQUFpQjtFQUNuQjs7RUFFQTtJQUNFLGlCQUFpQjtFQUNuQjs7RUFFQTtJQUNFLGFBQWE7RUFDZjs7RUFFQTtJQUNFLGdCQUFnQjtFQUNsQjs7RUFFQTtJQUNFO3lCQUNxQjtJQUNyQiwyQkFBMkI7SUFDM0Isb0JBQW9CO0VBQ3RCOztFQUVBO0lBQ0Usb0JBQW9CO0lBQ3BCLDBDQUEwQztFQUM1Qzs7QUFFRjs7QUFFQTtFQUNFO0lBQ0U7O21CQUVlO0lBQ2YsZ0NBQWdDO0lBQ2hDLCtCQUErQjtFQUNqQztBQUNGXCIsXCJzb3VyY2VzQ29udGVudFwiOltcIi5iYXNrZXQge1xcbiAgcG9zaXRpb246IGZpeGVkO1xcbiAgei1pbmRleDogOTk4O1xcbiAgdG9wOiAwO1xcbiAgbGVmdDogMDtcXG4gIGRpc3BsYXk6IG5vbmU7XFxuICBhbGlnbi1pdGVtczogc3RhcnQ7XFxuICBnYXA6IDQwcHg7XFxuICBncmlkLXRlbXBsYXRlLWFyZWFzOiBcXFwiaXRlbXNcXFwiXFxuICAgIFxcXCJ0b3RhbC1wcmljZVxcXCJcXG4gICAgXFxcIm9yZGVyXFxcIjtcXG4gIHBhZGRpbmctdG9wOiAxNjlweDtcXG4gIHBhZGRpbmctaW5saW5lOiAyMHB4O1xcbiAgcGFkZGluZy1ib3R0b206IDQwcHg7XFxuICB3aWR0aDogMTAwdnc7XFxuICBoZWlnaHQ6IDEwMHZoO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvci1icmlnaHQpO1xcbiAgb3ZlcmZsb3cteTogYXV0bztcXG59XFxuXFxuLmJhc2tldC0tb3BlbiB7XFxuICBkaXNwbGF5OiBncmlkO1xcbn1cXG5cXG4uYmFza2V0X19pdGVtcyxcXG4udG90YWwtcHJpY2UsXFxuLmJhc2tldF9fb3JkZXIge1xcbiAgYm9yZGVyLXJhZGl1czogMjBweDtcXG4gIHBhZGRpbmc6IDMwcHg7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTtcXG59XFxuXFxuLmJhc2tldF9faXRlbXMsXFxuLml0ZW0tbGlzdF9faXRlbSB7XFxuICBkaXNwbGF5OiBncmlkO1xcbiAgZ2FwOiAyMHB4O1xcbiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyIDAuNWZyIDAuNGZyO1xcbn1cXG5cXG4uYmFza2V0X19pdGVtcyB7XFxuICBncmlkLWFyZWE6IGl0ZW1zO1xcbiAgZ2FwOiAzMHB4O1xcbn1cXG5cXG4udG90YWwtcHJpY2Uge1xcbiAgZ3JpZC1hcmVhOiB0b3RhbC1wcmljZTtcXG59XFxuXFxuLm9yZGVyIHtcXG4gIGdyaWQtYXJlYTogb3JkZXI7XFxufVxcblxcbi5iYXNrZXRfX2hlYWRlci0tbWFpbiB7XFxuICBncmlkLWNvbHVtbjogMSAvIDU7XFxuICBwYWRkaW5nLWJvdHRvbTogMTBweDtcXG4gIGJvcmRlci1ib3R0b206IDNweCBzb2xpZCB2YXIoLS1wcmltYXJ5LWNvbG9yLXN0cmlwZSk7XFxufVxcblxcbi5iYXNrZXRfX2hlYWRlci0tcGFkZGluZy1sZWZ0IHtcXG4gIHBhZGRpbmctbGVmdDogMjBweDtcXG59XFxuXFxuLmJhc2tldF9fb3JkZXI+Lm9yZGVyX19maWVsZC0tc3VibWl0IHtcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXG59XFxuXFxuLmJhc2tldF9fb3JkZXI+Kjpub3QoOmxhc3QtY2hpbGQpIHtcXG4gIG1hcmdpbi1ib3R0b206IDEwcHg7XFxufVxcblxcbi5vcmRlcl9fZmllbGQtZXJyb3Ige1xcbiAgY29sb3I6IHJlZDtcXG59XFxuXFxuLm9yZGVyX19maWVsZC1pbnB1dCB7XFxuICBtYXJnaW4tdG9wOiAxMHB4O1xcbiAgYm9yZGVyOiBub25lO1xcbiAgY29sb3I6IHdoaXRlO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvci1icmlnaHQpO1xcbn1cXG5cXG4ub3JkZXJfX2ZpZWxkLXN1Ym1pdCB7XFxuICBwYWRkaW5nOiAyMHB4O1xcbiAgbWFyZ2luLXRvcDogMzBweDtcXG4gIHdpZHRoOiAyMDBweDtcXG4gIGJvcmRlcjogNHB4IHNvbGlkIHdoaXRlO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc2Vjb25kYXJ5LWNvbG9yKTtcXG59XFxuXFxuLm9yZGVyX19maWVsZC1uYW1lIHtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAgZ2FwOiA1cHg7XFxufVxcblxcbi5pdGVtcy1saXN0IHtcXG4gIGdyaWQtY29sdW1uOiAxIC8gNTtcXG59XFxuXFxuLml0ZW0tbGlzdF9faXRlbSB7XFxuICBncmlkLWNvbHVtbjogMSAvIDU7XFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xcbiAgcGFkZGluZzogMzBweCAyMHB4O1xcbiAgYm9yZGVyOiAzcHggc29saWQgdmFyKC0tcHJpbWFyeS1jb2xvci1zdHJpcGUpO1xcbiAgYm9yZGVyLXJhZGl1czogMjBweDtcXG59XFxuXFxuLml0ZW1fX2J0bi1yZW1vdmUge1xcbiAgY29udGVudDogdXJsKC4uLy4uLy4uL2Fzc2V0cy9kZWxldGVCdG4uc3ZnKTtcXG4gIG1hcmdpbi10b3A6IDMwcHg7XFxuICBtYXJnaW4taW5saW5lOiBhdXRvO1xcbiAgcGFkZGluZzogMTBweDtcXG4gIGJvcmRlci1yYWRpdXM6IDEwMHZ3O1xcbiAgYm9yZGVyOiAzcHggc29saWQgdmFyKC0tcHJpbWFyeS1jb2xvci1zdHJpcGUpO1xcbn1cXG5cXG4uaXRlbV9fcHJpY2VzIHtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAgZ2FwOiAxMHB4O1xcbn1cXG5cXG4uYmFza2V0X19oZWFkZXItLXRhYmxldCB7XFxuICBkaXNwbGF5OiBub25lO1xcbn1cXG5cXG4uYmFza2V0X19oZWFkZXItLW1vYmlsZSB7XFxuICBwYWRkaW5nLWJvdHRvbTogMTBweDtcXG4gIGJvcmRlci1ib3R0b206IDNweCBzb2xpZCB2YXIoLS1wcmltYXJ5LWNvbG9yLXN0cmlwZSk7XFxufVxcblxcbi5iYXNrZXRfX2hlYWRlci0tbW9iaWxlOm5vdCg6Zmlyc3QtY2hpbGQpIHtcXG4gIG1hcmdpbi10b3A6IDMwcHg7XFxufVxcblxcbi5pdGVtLWxpc3RfX2l0ZW0ge1xcbiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnI7XFxufVxcblxcbi5iYXNrZXRfX2hlYWRlci0tbWVkaXVtLFxcbi5pdGVtX19wcmljZXMsXFxuLml0ZW1fX3RvdGFsLXByaWNlIHtcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXG59XFxuXFxuQG1lZGlhIChtYXgtd2lkdGg6IDM2MHB4KSB7XFxuXFxuICAuYmFza2V0LFxcbiAgLmJhc2tldF9faXRlbXMsXFxuICAudG90YWwtcHJpY2UsXFxuICAuYmFza2V0X19vcmRlciB7XFxuICAgIHBhZGRpbmctaW5saW5lOiAxMHB4O1xcbiAgfVxcbn1cXG5cXG5AbWVkaWEgKG1pbi13aWR0aDogNjUwcHgpIHtcXG5cXG4gIC5iYXNrZXQge1xcbiAgICBwYWRkaW5nLWlubGluZTogNDBweDtcXG4gIH1cXG59XFxuXFxuQG1lZGlhIChtaW4td2lkdGg6IDk1MHB4KSB7XFxuXFxuICAuYmFza2V0X19oZWFkZXItLW1lZGl1bSxcXG4gIC5pdGVtX19wcmljZXMsXFxuICAuaXRlbV9fdG90YWwtcHJpY2Uge1xcbiAgICB0ZXh0LWFsaWduOiB1bnNldDtcXG4gIH1cXG5cXG4gIC5pdGVtX19idG4tcmVtb3ZlIHtcXG4gICAgbWFyZ2luLXRvcDogdW5zZXQ7XFxuICB9XFxuXFxuICAuYmFza2V0X19oZWFkZXItLW1vYmlsZSB7XFxuICAgIGRpc3BsYXk6IG5vbmU7XFxuICB9XFxuXFxuICAuYmFza2V0X19oZWFkZXItLXRhYmxldCB7XFxuICAgIGRpc3BsYXk6IGluaXRpYWw7XFxuICB9XFxuXFxuICAuYmFza2V0IHtcXG4gICAgZ3JpZC10ZW1wbGF0ZS1hcmVhczogXFxcIml0ZW1zIGl0ZW1zXFxcIlxcbiAgICAgIFxcXCJ0b3RhbC1wcmljZSBvcmRlclxcXCI7XFxuICAgIGdyaWQtdGVtcGxhdGUtcm93czogMWZyIDJmcjtcXG4gICAgcGFkZGluZy1pbmxpbmU6IDYwcHg7XFxuICB9XFxuXFxuICAuaXRlbS1saXN0X19pdGVtIHtcXG4gICAganVzdGlmeS1pdGVtczogc3RhcnQ7XFxuICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmciAwLjVmciAwLjRmcjtcXG4gIH1cXG5cXG59XFxuXFxuQG1lZGlhIChtaW4td2lkdGg6IDEyMDBweCkge1xcbiAgLmJhc2tldCB7XFxuICAgIGdyaWQtdGVtcGxhdGUtYXJlYXM6XFxuICAgICAgXFxcIml0ZW1zIHRvdGFsLXByaWNlXFxcIlxcbiAgICAgIFxcXCJpdGVtcyBvcmRlclxcXCI7XFxuICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDAuNWZyO1xcbiAgICBncmlkLXRlbXBsYXRlLXJvd3M6IG1heC1jb250ZW50O1xcbiAgfVxcbn1cIl0sXCJzb3VyY2VSb290XCI6XCJcIn1dKTtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IF9fX0NTU19MT0FERVJfRVhQT1JUX19fO1xuIiwiLy8gSW1wb3J0c1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18gZnJvbSBcIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9zb3VyY2VNYXBzLmpzXCI7XG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fIGZyb20gXCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCI7XG5pbXBvcnQgX19fQ1NTX0xPQURFUl9HRVRfVVJMX0lNUE9SVF9fXyBmcm9tIFwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2dldFVybC5qc1wiO1xudmFyIF9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8wX19fID0gbmV3IFVSTChcIi4uLy4uL2Fzc2V0cy9tYWlucGFnZV9faW1nLnBuZ1wiLCBpbXBvcnQubWV0YS51cmwpO1xudmFyIF9fX0NTU19MT0FERVJfRVhQT1JUX19fID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18pO1xudmFyIF9fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzBfX18gPSBfX19DU1NfTE9BREVSX0dFVF9VUkxfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8wX19fKTtcbi8vIE1vZHVsZVxuX19fQ1NTX0xPQURFUl9FWFBPUlRfX18ucHVzaChbbW9kdWxlLmlkLCBgQG1lZGlhIChtaW4td2lkdGg6IDEyMDBweCkge1xuICAubmF2YmFyIHtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWV2ZW5seTtcbiAgfVxuXG4gIC5uYXZiYXJfX2NvbnRhaW5lciB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgfVxuXG4gIC5uYXZiYXJfX2l0ZW0ge1xuICAgIHBhZGRpbmc6IDE1cHggMjVweDtcbiAgfVxuXG4gIC5uYXZiYXJfX2l0ZW06aG92ZXIge1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDExZTNmO1xuICB9XG5cbiAgLndyYXBwZXItLW1haW46OmJlZm9yZSB7XG4gICAgY29udGVudDogXCJcIjtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAxMTBweDtcbiAgICBsZWZ0OiA4dnc7XG4gICAgcmlnaHQ6IDh2dztcbiAgICBib3JkZXItYm90dG9tOiAzcHggc29saWQgdmFyKC0tcHJpbWFyeS1jb2xvci1zdHJpcGUpO1xuICB9XG5cbiAgLm1haW5wYWdlIHtcbiAgICBkaXNwbGF5OiBncmlkO1xuICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjtcbiAgICBqdXN0aWZ5LWl0ZW1zOiBjZW50ZXI7XG4gICAgZ2FwOiA1dnc7XG4gICAgcGFkZGluZy1pbmxpbmU6IDV2dztcbiAgICBtYXJnaW4tdG9wOiA2MHB4O1xuICAgIG1hcmdpbi1ib3R0b206IDd2aDtcbiAgfVxuXG4gIC5tYWlucGFnZV9fY29udGFpbmVyIHtcbiAgICBqdXN0aWZ5LXNlbGY6IGVuZDtcbiAgfVxuXG4gIC5tYWlucGFnZV9fY29udGFpbmVyLS1pbWcge1xuICAgIGp1c3RpZnktc2VsZjogc3RhcnQ7XG4gIH1cblxuICAubWFpbnBhZ2VfX2ltZyB7XG4gICAgbWluLXdpZHRoOiAyNTBweDtcbiAgICBtaW4taGVpZ2h0OiA0MDBweDtcbiAgICBtYXgtaGVpZ2h0OiA2MDBweDtcbiAgICBib3JkZXItcmFkaXVzOiA2MHB4O1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgke19fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzBfX199KTtcbiAgfVxuXG4gIC5oZWFkZXItLXBhbmVsIHtcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgIGJvcmRlci1ib3R0b206IDNweCBzb2xpZCB2YXIoLS1wcmltYXJ5LWNvbG9yLXN0cmlwZSk7XG4gIH1cblxuICAucGFuZWwge1xuICAgIHBhZGRpbmc6IDAgNjBweDtcbiAgfVxuXG4gIC5wYW5lbF9fY29udGFpbmVyIHtcbiAgICB0ZXh0LWFsaWduOiBpbml0aWFsO1xuICB9XG5cbiAgLnBhbmVsX19leGN1cnNpb25zIHtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGluaXRpYWw7XG4gICAgZ2FwOiA0MHB4O1xuICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZml0LCAzMzBweCk7XG4gICAgcGFkZGluZy1pbmxpbmU6IHVuc2V0O1xuICB9XG5cbiAgLm5hdmJhcl9fYnRuLFxuICAuaGVhZGVyLS1sb2dvOjphZnRlcixcbiAgLmhlYWRlci0tcGFuZWw6OmFmdGVyIHtcbiAgICBkaXNwbGF5OiBub25lO1xuICB9XG5cbiAgLmJhc2tldC1idG5fX3dyYXBwZXIge1xuICAgIHRvcDogNDBweDtcbiAgICByaWdodDogY2FsYygxMHB4ICsgMnZ3KTtcbiAgfVxufVxuYCwgXCJcIix7XCJ2ZXJzaW9uXCI6MyxcInNvdXJjZXNcIjpbXCJ3ZWJwYWNrOi8vLi9zcmMvY3NzL2NsaWVudC9kZXNrdG9wLmNzc1wiXSxcIm5hbWVzXCI6W10sXCJtYXBwaW5nc1wiOlwiQUFBQTtFQUNFO0lBQ0UsNkJBQTZCO0VBQy9COztFQUVBO0lBQ0UsYUFBYTtFQUNmOztFQUVBO0lBQ0Usa0JBQWtCO0VBQ3BCOztFQUVBO0lBQ0UsZUFBZTtJQUNmLHlCQUF5QjtFQUMzQjs7RUFFQTtJQUNFLFdBQVc7SUFDWCxrQkFBa0I7SUFDbEIsVUFBVTtJQUNWLFNBQVM7SUFDVCxVQUFVO0lBQ1Ysb0RBQW9EO0VBQ3REOztFQUVBO0lBQ0UsYUFBYTtJQUNiLDhCQUE4QjtJQUM5QixxQkFBcUI7SUFDckIsUUFBUTtJQUNSLG1CQUFtQjtJQUNuQixnQkFBZ0I7SUFDaEIsa0JBQWtCO0VBQ3BCOztFQUVBO0lBQ0UsaUJBQWlCO0VBQ25COztFQUVBO0lBQ0UsbUJBQW1CO0VBQ3JCOztFQUVBO0lBQ0UsZ0JBQWdCO0lBQ2hCLGlCQUFpQjtJQUNqQixpQkFBaUI7SUFDakIsbUJBQW1CO0lBQ25CLHlEQUFxRDtFQUN2RDs7RUFFQTtJQUNFLGNBQWM7SUFDZCxtQkFBbUI7SUFDbkIsb0RBQW9EO0VBQ3REOztFQUVBO0lBQ0UsZUFBZTtFQUNqQjs7RUFFQTtJQUNFLG1CQUFtQjtFQUNyQjs7RUFFQTtJQUNFLHdCQUF3QjtJQUN4QixTQUFTO0lBQ1QsOENBQThDO0lBQzlDLHFCQUFxQjtFQUN2Qjs7RUFFQTs7O0lBR0UsYUFBYTtFQUNmOztFQUVBO0lBQ0UsU0FBUztJQUNULHVCQUF1QjtFQUN6QjtBQUNGXCIsXCJzb3VyY2VzQ29udGVudFwiOltcIkBtZWRpYSAobWluLXdpZHRoOiAxMjAwcHgpIHtcXG4gIC5uYXZiYXIge1xcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWV2ZW5seTtcXG4gIH1cXG5cXG4gIC5uYXZiYXJfX2NvbnRhaW5lciB7XFxuICAgIGRpc3BsYXk6IGZsZXg7XFxuICB9XFxuXFxuICAubmF2YmFyX19pdGVtIHtcXG4gICAgcGFkZGluZzogMTVweCAyNXB4O1xcbiAgfVxcblxcbiAgLm5hdmJhcl9faXRlbTpob3ZlciB7XFxuICAgIGN1cnNvcjogcG9pbnRlcjtcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzAxMWUzZjtcXG4gIH1cXG5cXG4gIC53cmFwcGVyLS1tYWluOjpiZWZvcmUge1xcbiAgICBjb250ZW50OiBcXFwiXFxcIjtcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICB0b3A6IDExMHB4O1xcbiAgICBsZWZ0OiA4dnc7XFxuICAgIHJpZ2h0OiA4dnc7XFxuICAgIGJvcmRlci1ib3R0b206IDNweCBzb2xpZCB2YXIoLS1wcmltYXJ5LWNvbG9yLXN0cmlwZSk7XFxuICB9XFxuXFxuICAubWFpbnBhZ2Uge1xcbiAgICBkaXNwbGF5OiBncmlkO1xcbiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7XFxuICAgIGp1c3RpZnktaXRlbXM6IGNlbnRlcjtcXG4gICAgZ2FwOiA1dnc7XFxuICAgIHBhZGRpbmctaW5saW5lOiA1dnc7XFxuICAgIG1hcmdpbi10b3A6IDYwcHg7XFxuICAgIG1hcmdpbi1ib3R0b206IDd2aDtcXG4gIH1cXG5cXG4gIC5tYWlucGFnZV9fY29udGFpbmVyIHtcXG4gICAganVzdGlmeS1zZWxmOiBlbmQ7XFxuICB9XFxuXFxuICAubWFpbnBhZ2VfX2NvbnRhaW5lci0taW1nIHtcXG4gICAganVzdGlmeS1zZWxmOiBzdGFydDtcXG4gIH1cXG5cXG4gIC5tYWlucGFnZV9faW1nIHtcXG4gICAgbWluLXdpZHRoOiAyNTBweDtcXG4gICAgbWluLWhlaWdodDogNDAwcHg7XFxuICAgIG1heC1oZWlnaHQ6IDYwMHB4O1xcbiAgICBib3JkZXItcmFkaXVzOiA2MHB4O1xcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoLi4vLi4vYXNzZXRzL21haW5wYWdlX19pbWcucG5nKTtcXG4gIH1cXG5cXG4gIC5oZWFkZXItLXBhbmVsIHtcXG4gICAgZGlzcGxheTogYmxvY2s7XFxuICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XFxuICAgIGJvcmRlci1ib3R0b206IDNweCBzb2xpZCB2YXIoLS1wcmltYXJ5LWNvbG9yLXN0cmlwZSk7XFxuICB9XFxuXFxuICAucGFuZWwge1xcbiAgICBwYWRkaW5nOiAwIDYwcHg7XFxuICB9XFxuXFxuICAucGFuZWxfX2NvbnRhaW5lciB7XFxuICAgIHRleHQtYWxpZ246IGluaXRpYWw7XFxuICB9XFxuXFxuICAucGFuZWxfX2V4Y3Vyc2lvbnMge1xcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGluaXRpYWw7XFxuICAgIGdhcDogNDBweDtcXG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maXQsIDMzMHB4KTtcXG4gICAgcGFkZGluZy1pbmxpbmU6IHVuc2V0O1xcbiAgfVxcblxcbiAgLm5hdmJhcl9fYnRuLFxcbiAgLmhlYWRlci0tbG9nbzo6YWZ0ZXIsXFxuICAuaGVhZGVyLS1wYW5lbDo6YWZ0ZXIge1xcbiAgICBkaXNwbGF5OiBub25lO1xcbiAgfVxcblxcbiAgLmJhc2tldC1idG5fX3dyYXBwZXIge1xcbiAgICB0b3A6IDQwcHg7XFxuICAgIHJpZ2h0OiBjYWxjKDEwcHggKyAydncpO1xcbiAgfVxcbn1cXG5cIl0sXCJzb3VyY2VSb290XCI6XCJcIn1dKTtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IF9fX0NTU19MT0FERVJfRVhQT1JUX19fO1xuIiwiLy8gSW1wb3J0c1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18gZnJvbSBcIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9zb3VyY2VNYXBzLmpzXCI7XG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fIGZyb20gXCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCI7XG5pbXBvcnQgX19fQ1NTX0xPQURFUl9HRVRfVVJMX0lNUE9SVF9fXyBmcm9tIFwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2dldFVybC5qc1wiO1xudmFyIF9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8wX19fID0gbmV3IFVSTChcIi4uLy4uL2ZvbnRzL01vbnRzZXJyYXQvTW9udHNlcnJhdC1SZWd1bGFyLnR0ZlwiLCBpbXBvcnQubWV0YS51cmwpO1xudmFyIF9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8xX19fID0gbmV3IFVSTChcIi4uLy4uL2ZvbnRzL01vbnRzZXJyYXQvTW9udHNlcnJhdC1NZWRpdW0udHRmXCIsIGltcG9ydC5tZXRhLnVybCk7XG52YXIgX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzJfX18gPSBuZXcgVVJMKFwiLi4vLi4vZm9udHMvTW9udHNlcnJhdC9Nb250c2VycmF0LVNlbWlCb2xkLnR0ZlwiLCBpbXBvcnQubWV0YS51cmwpO1xudmFyIF9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8zX19fID0gbmV3IFVSTChcIi4uLy4uL2ZvbnRzL01vbnRzZXJyYXQvTW9udHNlcnJhdC1Cb2xkLnR0ZlwiLCBpbXBvcnQubWV0YS51cmwpO1xudmFyIF9fX0NTU19MT0FERVJfRVhQT1JUX19fID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18pO1xudmFyIF9fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzBfX18gPSBfX19DU1NfTE9BREVSX0dFVF9VUkxfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8wX19fKTtcbnZhciBfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF8xX19fID0gX19fQ1NTX0xPQURFUl9HRVRfVVJMX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMV9fXyk7XG52YXIgX19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMl9fXyA9IF9fX0NTU19MT0FERVJfR0VUX1VSTF9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzJfX18pO1xudmFyIF9fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzNfX18gPSBfX19DU1NfTE9BREVSX0dFVF9VUkxfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8zX19fKTtcbi8vIE1vZHVsZVxuX19fQ1NTX0xPQURFUl9FWFBPUlRfX18ucHVzaChbbW9kdWxlLmlkLCBgOnJvb3Qge1xuICBmb250LXNpemU6IDE2cHg7XG4gIC0tZm9udC13ZWlnaHQtbm9ybWFsOiA0MDA7XG4gIC0tZm9udC13ZWlnaHQtbWVkaXVtOiA1MDA7XG4gIC0tZm9udC13ZWlnaHQtc2VtaS1ib2xkOiA2MDA7XG4gIC0tZm9udC13ZWlnaHQtYm9sZDogNzAwO1xufVxuXG5AZm9udC1mYWNlIHtcbiAgZm9udC1mYW1pbHk6ICdNb250c2VycmF0JztcbiAgc3JjOiB1cmwoJHtfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF8wX19ffSk7XG4gIGZvbnQtd2VpZ2h0OiA0MDA7XG59XG5cbkBmb250LWZhY2Uge1xuICBmb250LWZhbWlseTogJ01vbnRzZXJyYXQnO1xuICBzcmM6IHVybCgke19fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzFfX199KTtcbiAgZm9udC13ZWlnaHQ6IDUwMDtcbn1cblxuQGZvbnQtZmFjZSB7XG4gIGZvbnQtZmFtaWx5OiAnTW9udHNlcnJhdCc7XG4gIHNyYzogdXJsKCR7X19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMl9fX30pO1xuICBmb250LXdlaWdodDogNjAwO1xufVxuXG5AZm9udC1mYWNlIHtcbiAgZm9udC1mYW1pbHk6ICdNb250c2VycmF0JztcbiAgc3JjOiB1cmwoJHtfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF8zX19ffSk7XG4gIGZvbnQtd2VpZ2h0OiA3MDA7XG59XG5cbioge1xuICBmb250LWZhbWlseTogJ01vbnRzZXJyYXQnO1xuICBmb250LXdlaWdodDogdmFyKC0tZm9udC13ZWlnaHQtbm9ybWFsKTtcbiAgY29sb3I6IHdoaXRlO1xufVxuXG4udGV4dC0tbmF2YmFyIHtcbiAgZm9udC13ZWlnaHQ6IHZhcigtLWZvbnQtd2VpZ2h0LW1lZGl1bSk7XG59XG5cbi5oZWFkZXItLWxvZ28sXG4uaGVhZGVyLS1wYW5lbCxcbi5leGN1cnNpb25zX19wcmljZSB7XG4gIGZvbnQtd2VpZ2h0OiB2YXIoLS1mb250LXdlaWdodC1zZW1pLWJvbGQpO1xufVxuXG4uaGVhZGVyLS1tYWlucGFnZSxcbi5oZWFkZXJfX2JvcmRlciB7XG4gIGZvbnQtd2VpZ2h0OiB2YXIoLS1mb250LXdlaWdodC1ib2xkKTtcbn1cblxuLmhlYWRlciB7XG4gIGZvbnQtc2l6ZTogMS41cmVtO1xufVxuXG4uaGVhZGVyLS1tYWlucGFnZSB7XG4gIGZvbnQtc2l6ZTogMi4zcmVtO1xufVxuXG4uaGVhZGVyLS1sb2dvIHtcbiAgZm9udC1zaXplOiAxLjJyZW07XG59XG5cbi50ZXh0LS1uYXZiYXIge1xuICBmb250LXNpemU6IDFyZW07XG59XG5cbkBtZWRpYSAobWluLXdpZHRoOiA2NTBweCkge1xuICAuaGVhZGVyIHtcbiAgICBmb250LXNpemU6IDEuOHJlbTtcbiAgfVxuXG4gIC5oZWFkZXItLW1haW5wYWdlIHtcbiAgICBmb250LXNpemU6IDNyZW07XG4gIH1cblxuICAuaGVhZGVyLS1sb2dvIHtcbiAgICBmb250LXNpemU6IDEuNXJlbTtcbiAgfVxuXG4gIC50ZXh0LS1uYXZiYXIge1xuICAgIGZvbnQtc2l6ZTogMS4ycmVtO1xuICB9XG59XG5cbkBtZWRpYSAobWluLXdpZHRoOiA5NTBweCkge1xuICAuaGVhZGVyLS1tYWlucGFnZSB7XG4gICAgZm9udC1zaXplOiA0cmVtO1xuICB9XG5cbiAgLm1haW5wYWdlX190ZXh0IHtcbiAgICBmb250LXNpemU6IDEuMnJlbTtcbiAgfVxufVxuXG5AbWVkaWEgKG1pbi13aWR0aDogMTIwMHB4KSB7XG4gIC5oZWFkZXIge1xuICAgIGZvbnQtc2l6ZTogMnJlbTtcbiAgfVxuXG4gIC5oZWFkZXItLW1haW5wYWdlIHtcbiAgICBmb250LXNpemU6IDQuNHJlbTtcbiAgfVxuXG4gIC50ZXh0LS1uYXZiYXIge1xuICAgIGZvbnQtc2l6ZTogMXJlbTtcbiAgfVxuXG59YCwgXCJcIix7XCJ2ZXJzaW9uXCI6MyxcInNvdXJjZXNcIjpbXCJ3ZWJwYWNrOi8vLi9zcmMvY3NzL2NsaWVudC9mb250cy5jc3NcIl0sXCJuYW1lc1wiOltdLFwibWFwcGluZ3NcIjpcIkFBQUE7RUFDRSxlQUFlO0VBQ2YseUJBQXlCO0VBQ3pCLHlCQUF5QjtFQUN6Qiw0QkFBNEI7RUFDNUIsdUJBQXVCO0FBQ3pCOztBQUVBO0VBQ0UseUJBQXlCO0VBQ3pCLDRDQUF1RDtFQUN2RCxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSx5QkFBeUI7RUFDekIsNENBQXNEO0VBQ3RELGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLHlCQUF5QjtFQUN6Qiw0Q0FBd0Q7RUFDeEQsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UseUJBQXlCO0VBQ3pCLDRDQUFvRDtFQUNwRCxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSx5QkFBeUI7RUFDekIsc0NBQXNDO0VBQ3RDLFlBQVk7QUFDZDs7QUFFQTtFQUNFLHNDQUFzQztBQUN4Qzs7QUFFQTs7O0VBR0UseUNBQXlDO0FBQzNDOztBQUVBOztFQUVFLG9DQUFvQztBQUN0Qzs7QUFFQTtFQUNFLGlCQUFpQjtBQUNuQjs7QUFFQTtFQUNFLGlCQUFpQjtBQUNuQjs7QUFFQTtFQUNFLGlCQUFpQjtBQUNuQjs7QUFFQTtFQUNFLGVBQWU7QUFDakI7O0FBRUE7RUFDRTtJQUNFLGlCQUFpQjtFQUNuQjs7RUFFQTtJQUNFLGVBQWU7RUFDakI7O0VBRUE7SUFDRSxpQkFBaUI7RUFDbkI7O0VBRUE7SUFDRSxpQkFBaUI7RUFDbkI7QUFDRjs7QUFFQTtFQUNFO0lBQ0UsZUFBZTtFQUNqQjs7RUFFQTtJQUNFLGlCQUFpQjtFQUNuQjtBQUNGOztBQUVBO0VBQ0U7SUFDRSxlQUFlO0VBQ2pCOztFQUVBO0lBQ0UsaUJBQWlCO0VBQ25COztFQUVBO0lBQ0UsZUFBZTtFQUNqQjs7QUFFRlwiLFwic291cmNlc0NvbnRlbnRcIjpbXCI6cm9vdCB7XFxuICBmb250LXNpemU6IDE2cHg7XFxuICAtLWZvbnQtd2VpZ2h0LW5vcm1hbDogNDAwO1xcbiAgLS1mb250LXdlaWdodC1tZWRpdW06IDUwMDtcXG4gIC0tZm9udC13ZWlnaHQtc2VtaS1ib2xkOiA2MDA7XFxuICAtLWZvbnQtd2VpZ2h0LWJvbGQ6IDcwMDtcXG59XFxuXFxuQGZvbnQtZmFjZSB7XFxuICBmb250LWZhbWlseTogJ01vbnRzZXJyYXQnO1xcbiAgc3JjOiB1cmwoLi4vLi4vZm9udHMvTW9udHNlcnJhdC9Nb250c2VycmF0LVJlZ3VsYXIudHRmKTtcXG4gIGZvbnQtd2VpZ2h0OiA0MDA7XFxufVxcblxcbkBmb250LWZhY2Uge1xcbiAgZm9udC1mYW1pbHk6ICdNb250c2VycmF0JztcXG4gIHNyYzogdXJsKC4uLy4uL2ZvbnRzL01vbnRzZXJyYXQvTW9udHNlcnJhdC1NZWRpdW0udHRmKTtcXG4gIGZvbnQtd2VpZ2h0OiA1MDA7XFxufVxcblxcbkBmb250LWZhY2Uge1xcbiAgZm9udC1mYW1pbHk6ICdNb250c2VycmF0JztcXG4gIHNyYzogdXJsKC4uLy4uL2ZvbnRzL01vbnRzZXJyYXQvTW9udHNlcnJhdC1TZW1pQm9sZC50dGYpO1xcbiAgZm9udC13ZWlnaHQ6IDYwMDtcXG59XFxuXFxuQGZvbnQtZmFjZSB7XFxuICBmb250LWZhbWlseTogJ01vbnRzZXJyYXQnO1xcbiAgc3JjOiB1cmwoLi4vLi4vZm9udHMvTW9udHNlcnJhdC9Nb250c2VycmF0LUJvbGQudHRmKTtcXG4gIGZvbnQtd2VpZ2h0OiA3MDA7XFxufVxcblxcbioge1xcbiAgZm9udC1mYW1pbHk6ICdNb250c2VycmF0JztcXG4gIGZvbnQtd2VpZ2h0OiB2YXIoLS1mb250LXdlaWdodC1ub3JtYWwpO1xcbiAgY29sb3I6IHdoaXRlO1xcbn1cXG5cXG4udGV4dC0tbmF2YmFyIHtcXG4gIGZvbnQtd2VpZ2h0OiB2YXIoLS1mb250LXdlaWdodC1tZWRpdW0pO1xcbn1cXG5cXG4uaGVhZGVyLS1sb2dvLFxcbi5oZWFkZXItLXBhbmVsLFxcbi5leGN1cnNpb25zX19wcmljZSB7XFxuICBmb250LXdlaWdodDogdmFyKC0tZm9udC13ZWlnaHQtc2VtaS1ib2xkKTtcXG59XFxuXFxuLmhlYWRlci0tbWFpbnBhZ2UsXFxuLmhlYWRlcl9fYm9yZGVyIHtcXG4gIGZvbnQtd2VpZ2h0OiB2YXIoLS1mb250LXdlaWdodC1ib2xkKTtcXG59XFxuXFxuLmhlYWRlciB7XFxuICBmb250LXNpemU6IDEuNXJlbTtcXG59XFxuXFxuLmhlYWRlci0tbWFpbnBhZ2Uge1xcbiAgZm9udC1zaXplOiAyLjNyZW07XFxufVxcblxcbi5oZWFkZXItLWxvZ28ge1xcbiAgZm9udC1zaXplOiAxLjJyZW07XFxufVxcblxcbi50ZXh0LS1uYXZiYXIge1xcbiAgZm9udC1zaXplOiAxcmVtO1xcbn1cXG5cXG5AbWVkaWEgKG1pbi13aWR0aDogNjUwcHgpIHtcXG4gIC5oZWFkZXIge1xcbiAgICBmb250LXNpemU6IDEuOHJlbTtcXG4gIH1cXG5cXG4gIC5oZWFkZXItLW1haW5wYWdlIHtcXG4gICAgZm9udC1zaXplOiAzcmVtO1xcbiAgfVxcblxcbiAgLmhlYWRlci0tbG9nbyB7XFxuICAgIGZvbnQtc2l6ZTogMS41cmVtO1xcbiAgfVxcblxcbiAgLnRleHQtLW5hdmJhciB7XFxuICAgIGZvbnQtc2l6ZTogMS4ycmVtO1xcbiAgfVxcbn1cXG5cXG5AbWVkaWEgKG1pbi13aWR0aDogOTUwcHgpIHtcXG4gIC5oZWFkZXItLW1haW5wYWdlIHtcXG4gICAgZm9udC1zaXplOiA0cmVtO1xcbiAgfVxcblxcbiAgLm1haW5wYWdlX190ZXh0IHtcXG4gICAgZm9udC1zaXplOiAxLjJyZW07XFxuICB9XFxufVxcblxcbkBtZWRpYSAobWluLXdpZHRoOiAxMjAwcHgpIHtcXG4gIC5oZWFkZXIge1xcbiAgICBmb250LXNpemU6IDJyZW07XFxuICB9XFxuXFxuICAuaGVhZGVyLS1tYWlucGFnZSB7XFxuICAgIGZvbnQtc2l6ZTogNC40cmVtO1xcbiAgfVxcblxcbiAgLnRleHQtLW5hdmJhciB7XFxuICAgIGZvbnQtc2l6ZTogMXJlbTtcXG4gIH1cXG5cXG59XCJdLFwic291cmNlUm9vdFwiOlwiXCJ9XSk7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBfX19DU1NfTE9BREVSX0VYUE9SVF9fXztcbiIsIi8vIEltcG9ydHNcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fIGZyb20gXCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvc291cmNlTWFwcy5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyBmcm9tIFwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfR0VUX1VSTF9JTVBPUlRfX18gZnJvbSBcIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9nZXRVcmwuanNcIjtcbnZhciBfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMF9fXyA9IG5ldyBVUkwoXCIuLi8uLi9hc3NldHMvYmFza2V0X2ljb24uc3ZnXCIsIGltcG9ydC5tZXRhLnVybCk7XG52YXIgX19fQ1NTX0xPQURFUl9FWFBPUlRfX18gPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyk7XG52YXIgX19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMF9fXyA9IF9fX0NTU19MT0FERVJfR0VUX1VSTF9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzBfX18pO1xuLy8gTW9kdWxlXG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5wdXNoKFttb2R1bGUuaWQsIGA6cm9vdCB7XG4gIC0tcHJpbWFyeS1jb2xvcjogIzUxNzU3OTtcbiAgLS1wcmltYXJ5LWNvbG9yLWJyaWdodDogIzY1ODg4ODtcbiAgLS1wcmltYXJ5LWNvbG9yLXN0cmlwZTogIzdhOWU5ZTtcbiAgLS1zZWNvbmRhcnktY29sb3I6ICMwMTFFM0Y7XG59XG5cbioge1xuICBtYXJnaW46IDA7XG4gIHBhZGRpbmc6IDA7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG59XG5cbnVsIHtcbiAgbGlzdC1zdHlsZTogbm9uZTtcbn1cblxuLm5hdmJhciB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgei1pbmRleDogOTk5O1xuICBkaXNwbGF5OiBmbGV4O1xuICBwYWRkaW5nOiA0MHB4IDYwcHg7XG4gIHdpZHRoOiAxMDB2dztcbiAgaGVpZ2h0OiAxMTBweDtcbiAgY29sb3I6IHdoaXRlO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbn1cblxuLm5hdmJhci0tYmFja2dyb3VuZC1zY3JvbGwsXG4ubmF2YmFyLS1iYWNrZ3JvdW5kLWJhc2tldC1idG4sXG4ubmF2YmFyLS1iYWNrZ3JvdW5kLW5hdmJhci1idG4ge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTtcbn1cblxuLm5hdmJhcl9faXRlbSxcbi5oZWFkZXItLWxvZ28ge1xuICBtYXJnaW46IGF1dG8gMDtcbn1cblxuLmhlYWRlci0tbG9nbyB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbn1cblxuLndyYXBwZXItLW1haW4ge1xuICBtaW4taGVpZ2h0OiAxMDB2aDtcbiAgcGFkZGluZy10b3A6IDEzMHB4O1xuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjNTE3NTc5IDAlLCAjODk5MjgwIDEwMCUpO1xufVxuLm1haW5wYWdlIHtcbiAgY29sb3I6IHdoaXRlO1xufVxuXG4ubWFpbnBhZ2VfX2NvbnRhaW5lciB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cblxuLm1haW5wYWdlX190ZXh0IHtcbiAgcGFkZGluZy1pbmxpbmU6IDV2dztcbn1cblxuLmhlYWRlci0tbWFpbnBhZ2Uge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBnYXA6IDEwcHg7XG4gIG1hcmdpbi1ib3R0b206IDIwcHg7XG59XG5cblxuXG4uaGVhZGVyX19ib3JkZXIge1xuICBwYWRkaW5nLWlubGluZTogMTBweDtcbiAgYm9yZGVyOiA1cHggc29saWQgI0VDQTIyMjtcbiAgYm9yZGVyLXJhZGl1czogMTAwdnc7XG59XG5cbi5leGN1cnNpb25zX19pdGVtIDo6LXdlYmtpdC1zY3JvbGxiYXIge1xuICB3aWR0aDogMC41ZW07XG59XG5cbi5leGN1cnNpb25zX19pdGVtIDo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWIge1xuICBib3JkZXItcmFkaXVzOiAxMDB2dztcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc2Vjb25kYXJ5LWNvbG9yKTtcbn1cblxuLmV4Y3Vyc2lvbnNfX2l0ZW0gOjotd2Via2l0LXNjcm9sbGJhci10cmFjayB7XG4gIG1hcmdpbi1ibG9jazogMC41ZW07XG4gIGJvcmRlci1yYWRpdXM6IDEwMHZ3O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbn1cblxuLnBhbmVsX19leGN1cnNpb25zIHtcbiAgZGlzcGxheTogZ3JpZDtcbiAgcGFkZGluZy1ib3R0b206IDQwcHg7XG59XG5cblxuLmV4Y3Vyc2lvbnNfX2l0ZW0ge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBwYWRkaW5nOiAyMHB4IDQwcHg7XG4gIGdhcDogMzBweDtcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDgwZGVnLCAjNTE3NTc5IDQwJSwgI2E5YTQ4MyAyNTAlKTtcbn1cblxuLmV4Y3Vyc2lvbnNfX2l0ZW06bnRoLWNoaWxkKG9kZCkge1xuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTMwZGVnLCAjNTE3NTc5IDQwJSwgI2E5YTQ4MyAxNjAlKTtcbn1cblxuLmV4Y3Vyc2lvbnNfX25hbWUge1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gIGJvcmRlci1ib3R0b206IDNweCBzb2xpZCB2YXIoLS1wcmltYXJ5LWNvbG9yLXN0cmlwZSk7XG59XG5cbi5leGN1cnNpb25zX19kZXNjcmlwdGlvbiB7XG4gIG1heC1oZWlnaHQ6IDE1MHB4O1xuICBvdmVyZmxvdy15OiBhdXRvO1xuICBwYWRkaW5nLWJvdHRvbTogMTBweDtcbiAgYm9yZGVyLWJvdHRvbTogM3B4IHNvbGlkIHZhcigtLXByaW1hcnktY29sb3Itc3RyaXBlKTtcbn1cblxuLmV4Y3Vyc2lvbnNfX2ZpZWxkLWVycm9yIHtcbiAgY29sb3I6IHJlZDtcbn1cblxuLmV4Y3Vyc2lvbnNfX2Zvcm0ge1xuICBtYXJnaW4tdG9wOiBhdXRvO1xufVxuXG4uZXhjdXJzaW9uc19fZmllbGQge1xuICBtYXJnaW46IGF1dG8gMDtcbn1cblxuLmV4Y3Vyc2lvbnNfX2ZpZWxkLW5hbWUge1xuICBkaXNwbGF5OiBncmlkO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgZ2FwOiAxMHB4O1xufVxuXG4uZXhjdXJzaW9uc19fcHJpY2Utd3JhcHBlciB7XG4gIGdyaWQtY29sdW1uOiAxIC8gMjtcbn1cblxuLmV4Y3Vyc2lvbnNfX2ZpZWxkLWVycm9yIHtcbiAgZ3JpZC1jb2x1bW46IDEgLyAzO1xuICBncmlkLXJvdzogMiAvIDNcbn1cblxuLmV4Y3Vyc2lvbnNfX2ZpZWxkLS1zdWJtaXQge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG5cbi5leGN1cnNpb25zX19maWVsZC1pbnB1dCB7XG4gIGJvcmRlcjogbm9uZTtcbiAgY29sb3I6IHdoaXRlO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yLWJyaWdodCk7XG59XG5cbi5leGN1cnNpb25zX19maWVsZC1pbnB1dCB7XG4gIGdyaWQtY29sdW1uOiAyIC8gMztcbiAganVzdGlmeS1zZWxmOiBjZW50ZXI7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cblxuLmV4Y3Vyc2lvbnNfX2ZpZWxkLWlucHV0LS1zdWJtaXQge1xuICBwYWRkaW5nOiAyMHB4O1xuICBtYXJnaW4tdG9wOiAzMHB4O1xuICBib3JkZXI6IDRweCBzb2xpZCB3aGl0ZTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc2Vjb25kYXJ5LWNvbG9yKTtcbn1cblxuXG4uZXhjdXJzaW9uc19fZm9ybT4gOmZpcnN0LWNoaWxkIHtcbiAgbWFyZ2luLWJvdHRvbTogMTBweDtcbn1cblxuLm5hdmJhcl9fdG9nZ2xlIHtcbiAgZGlzcGxheTogbm9uZTtcbn1cblxuLmJhc2tldC1idG4ge1xuICBkaXNwbGF5OiBub25lO1xufVxuXG4uYmFza2V0LWJ0bl9fd3JhcHBlciB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAzN3B4O1xuICByaWdodDogMjVweDtcbiAgei1pbmRleDogOTk5O1xufVxuXG4uYmFza2V0LWJ0bl9faWNvbiB7XG4gIGNvbnRlbnQ6IHVybCgke19fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzBfX199KTtcbiAgd2lkdGg6IDMwcHg7XG4gIGhlaWdodDogMzBweDtcbn1cblxuLmJhc2tldC1idG5fX3F1YW50aXR5IHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBkaXNwbGF5OiBub25lO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgd2lkdGg6IDMwcHg7XG4gIGhlaWdodDogMzBweDtcbn1cblxuLmV4Y3Vyc2lvbnNfX2l0ZW0tLXByb3RvdHlwZSxcbi5pdGVtLWxpc3RfX2l0ZW0tLXByb3RvdHlwZSB7XG4gIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDtcbn1cbmAsIFwiXCIse1widmVyc2lvblwiOjMsXCJzb3VyY2VzXCI6W1wid2VicGFjazovLy4vc3JjL2Nzcy9jbGllbnQvZ2xvYmFsLmNzc1wiXSxcIm5hbWVzXCI6W10sXCJtYXBwaW5nc1wiOlwiQUFBQTtFQUNFLHdCQUF3QjtFQUN4QiwrQkFBK0I7RUFDL0IsK0JBQStCO0VBQy9CLDBCQUEwQjtBQUM1Qjs7QUFFQTtFQUNFLFNBQVM7RUFDVCxVQUFVO0VBQ1Ysc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0UsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UsZUFBZTtFQUNmLFlBQVk7RUFDWixhQUFhO0VBQ2Isa0JBQWtCO0VBQ2xCLFlBQVk7RUFDWixhQUFhO0VBQ2IsWUFBWTtFQUNaLDZCQUE2QjtBQUMvQjs7QUFFQTs7O0VBR0Usc0NBQXNDO0FBQ3hDOztBQUVBOztFQUVFLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSxrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxpQkFBaUI7RUFDakIsa0JBQWtCO0VBQ2xCLDZEQUE2RDtBQUMvRDtBQUNBO0VBQ0UsWUFBWTtBQUNkOztBQUVBO0VBQ0Usa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsYUFBYTtFQUNiLHNCQUFzQjtFQUN0QixtQkFBbUI7RUFDbkIsU0FBUztFQUNULG1CQUFtQjtBQUNyQjs7OztBQUlBO0VBQ0Usb0JBQW9CO0VBQ3BCLHlCQUF5QjtFQUN6QixvQkFBb0I7QUFDdEI7O0FBRUE7RUFDRSxZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxvQkFBb0I7RUFDcEIsd0NBQXdDO0FBQzFDOztBQUVBO0VBQ0UsbUJBQW1CO0VBQ25CLG9CQUFvQjtFQUNwQix1QkFBdUI7QUFDekI7O0FBRUE7RUFDRSxhQUFhO0VBQ2Isb0JBQW9CO0FBQ3RCOzs7QUFHQTtFQUNFLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsa0JBQWtCO0VBQ2xCLFNBQVM7RUFDVCw2REFBNkQ7QUFDL0Q7O0FBRUE7RUFDRSw4REFBOEQ7QUFDaEU7O0FBRUE7RUFDRSxxQkFBcUI7RUFDckIsbUJBQW1CO0VBQ25CLG9EQUFvRDtBQUN0RDs7QUFFQTtFQUNFLGlCQUFpQjtFQUNqQixnQkFBZ0I7RUFDaEIsb0JBQW9CO0VBQ3BCLG9EQUFvRDtBQUN0RDs7QUFFQTtFQUNFLFVBQVU7QUFDWjs7QUFFQTtFQUNFLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsdUJBQXVCO0VBQ3ZCLFNBQVM7QUFDWDs7QUFFQTtFQUNFLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQjtBQUNGOztBQUVBO0VBQ0Usa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UsWUFBWTtFQUNaLFlBQVk7RUFDWiw2Q0FBNkM7QUFDL0M7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsb0JBQW9CO0VBQ3BCLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLGFBQWE7RUFDYixnQkFBZ0I7RUFDaEIsdUJBQXVCO0VBQ3ZCLHdDQUF3QztBQUMxQzs7O0FBR0E7RUFDRSxtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxhQUFhO0FBQ2Y7O0FBRUE7RUFDRSxhQUFhO0FBQ2Y7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsU0FBUztFQUNULFdBQVc7RUFDWCxZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxnREFBMEM7RUFDMUMsV0FBVztFQUNYLFlBQVk7QUFDZDs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixhQUFhO0VBQ2IsdUJBQXVCO0VBQ3ZCLG1CQUFtQjtFQUNuQixXQUFXO0VBQ1gsWUFBWTtBQUNkOztBQUVBOztFQUVFLHdCQUF3QjtBQUMxQlwiLFwic291cmNlc0NvbnRlbnRcIjpbXCI6cm9vdCB7XFxuICAtLXByaW1hcnktY29sb3I6ICM1MTc1Nzk7XFxuICAtLXByaW1hcnktY29sb3ItYnJpZ2h0OiAjNjU4ODg4O1xcbiAgLS1wcmltYXJ5LWNvbG9yLXN0cmlwZTogIzdhOWU5ZTtcXG4gIC0tc2Vjb25kYXJ5LWNvbG9yOiAjMDExRTNGO1xcbn1cXG5cXG4qIHtcXG4gIG1hcmdpbjogMDtcXG4gIHBhZGRpbmc6IDA7XFxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcbn1cXG5cXG51bCB7XFxuICBsaXN0LXN0eWxlOiBub25lO1xcbn1cXG5cXG4ubmF2YmFyIHtcXG4gIHBvc2l0aW9uOiBmaXhlZDtcXG4gIHotaW5kZXg6IDk5OTtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBwYWRkaW5nOiA0MHB4IDYwcHg7XFxuICB3aWR0aDogMTAwdnc7XFxuICBoZWlnaHQ6IDExMHB4O1xcbiAgY29sb3I6IHdoaXRlO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XFxufVxcblxcbi5uYXZiYXItLWJhY2tncm91bmQtc2Nyb2xsLFxcbi5uYXZiYXItLWJhY2tncm91bmQtYmFza2V0LWJ0bixcXG4ubmF2YmFyLS1iYWNrZ3JvdW5kLW5hdmJhci1idG4ge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvcik7XFxufVxcblxcbi5uYXZiYXJfX2l0ZW0sXFxuLmhlYWRlci0tbG9nbyB7XFxuICBtYXJnaW46IGF1dG8gMDtcXG59XFxuXFxuLmhlYWRlci0tbG9nbyB7XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxufVxcblxcbi53cmFwcGVyLS1tYWluIHtcXG4gIG1pbi1oZWlnaHQ6IDEwMHZoO1xcbiAgcGFkZGluZy10b3A6IDEzMHB4O1xcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzUxNzU3OSAwJSwgIzg5OTI4MCAxMDAlKTtcXG59XFxuLm1haW5wYWdlIHtcXG4gIGNvbG9yOiB3aGl0ZTtcXG59XFxuXFxuLm1haW5wYWdlX19jb250YWluZXIge1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbn1cXG5cXG4ubWFpbnBhZ2VfX3RleHQge1xcbiAgcGFkZGluZy1pbmxpbmU6IDV2dztcXG59XFxuXFxuLmhlYWRlci0tbWFpbnBhZ2Uge1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xcbiAgZ2FwOiAxMHB4O1xcbiAgbWFyZ2luLWJvdHRvbTogMjBweDtcXG59XFxuXFxuXFxuXFxuLmhlYWRlcl9fYm9yZGVyIHtcXG4gIHBhZGRpbmctaW5saW5lOiAxMHB4O1xcbiAgYm9yZGVyOiA1cHggc29saWQgI0VDQTIyMjtcXG4gIGJvcmRlci1yYWRpdXM6IDEwMHZ3O1xcbn1cXG5cXG4uZXhjdXJzaW9uc19faXRlbSA6Oi13ZWJraXQtc2Nyb2xsYmFyIHtcXG4gIHdpZHRoOiAwLjVlbTtcXG59XFxuXFxuLmV4Y3Vyc2lvbnNfX2l0ZW0gOjotd2Via2l0LXNjcm9sbGJhci10aHVtYiB7XFxuICBib3JkZXItcmFkaXVzOiAxMDB2dztcXG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXNlY29uZGFyeS1jb2xvcik7XFxufVxcblxcbi5leGN1cnNpb25zX19pdGVtIDo6LXdlYmtpdC1zY3JvbGxiYXItdHJhY2sge1xcbiAgbWFyZ2luLWJsb2NrOiAwLjVlbTtcXG4gIGJvcmRlci1yYWRpdXM6IDEwMHZ3O1xcbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XFxufVxcblxcbi5wYW5lbF9fZXhjdXJzaW9ucyB7XFxuICBkaXNwbGF5OiBncmlkO1xcbiAgcGFkZGluZy1ib3R0b206IDQwcHg7XFxufVxcblxcblxcbi5leGN1cnNpb25zX19pdGVtIHtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAgcGFkZGluZzogMjBweCA0MHB4O1xcbiAgZ2FwOiAzMHB4O1xcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDgwZGVnLCAjNTE3NTc5IDQwJSwgI2E5YTQ4MyAyNTAlKTtcXG59XFxuXFxuLmV4Y3Vyc2lvbnNfX2l0ZW06bnRoLWNoaWxkKG9kZCkge1xcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzMGRlZywgIzUxNzU3OSA0MCUsICNhOWE0ODMgMTYwJSk7XFxufVxcblxcbi5leGN1cnNpb25zX19uYW1lIHtcXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXG4gIG1hcmdpbi1ib3R0b206IDEwcHg7XFxuICBib3JkZXItYm90dG9tOiAzcHggc29saWQgdmFyKC0tcHJpbWFyeS1jb2xvci1zdHJpcGUpO1xcbn1cXG5cXG4uZXhjdXJzaW9uc19fZGVzY3JpcHRpb24ge1xcbiAgbWF4LWhlaWdodDogMTUwcHg7XFxuICBvdmVyZmxvdy15OiBhdXRvO1xcbiAgcGFkZGluZy1ib3R0b206IDEwcHg7XFxuICBib3JkZXItYm90dG9tOiAzcHggc29saWQgdmFyKC0tcHJpbWFyeS1jb2xvci1zdHJpcGUpO1xcbn1cXG5cXG4uZXhjdXJzaW9uc19fZmllbGQtZXJyb3Ige1xcbiAgY29sb3I6IHJlZDtcXG59XFxuXFxuLmV4Y3Vyc2lvbnNfX2Zvcm0ge1xcbiAgbWFyZ2luLXRvcDogYXV0bztcXG59XFxuXFxuLmV4Y3Vyc2lvbnNfX2ZpZWxkIHtcXG4gIG1hcmdpbjogYXV0byAwO1xcbn1cXG5cXG4uZXhjdXJzaW9uc19fZmllbGQtbmFtZSB7XFxuICBkaXNwbGF5OiBncmlkO1xcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XFxuICBnYXA6IDEwcHg7XFxufVxcblxcbi5leGN1cnNpb25zX19wcmljZS13cmFwcGVyIHtcXG4gIGdyaWQtY29sdW1uOiAxIC8gMjtcXG59XFxuXFxuLmV4Y3Vyc2lvbnNfX2ZpZWxkLWVycm9yIHtcXG4gIGdyaWQtY29sdW1uOiAxIC8gMztcXG4gIGdyaWQtcm93OiAyIC8gM1xcbn1cXG5cXG4uZXhjdXJzaW9uc19fZmllbGQtLXN1Ym1pdCB7XFxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxufVxcblxcbi5leGN1cnNpb25zX19maWVsZC1pbnB1dCB7XFxuICBib3JkZXI6IG5vbmU7XFxuICBjb2xvcjogd2hpdGU7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yLWJyaWdodCk7XFxufVxcblxcbi5leGN1cnNpb25zX19maWVsZC1pbnB1dCB7XFxuICBncmlkLWNvbHVtbjogMiAvIDM7XFxuICBqdXN0aWZ5LXNlbGY6IGNlbnRlcjtcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXG59XFxuXFxuLmV4Y3Vyc2lvbnNfX2ZpZWxkLWlucHV0LS1zdWJtaXQge1xcbiAgcGFkZGluZzogMjBweDtcXG4gIG1hcmdpbi10b3A6IDMwcHg7XFxuICBib3JkZXI6IDRweCBzb2xpZCB3aGl0ZTtcXG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXNlY29uZGFyeS1jb2xvcik7XFxufVxcblxcblxcbi5leGN1cnNpb25zX19mb3JtPiA6Zmlyc3QtY2hpbGQge1xcbiAgbWFyZ2luLWJvdHRvbTogMTBweDtcXG59XFxuXFxuLm5hdmJhcl9fdG9nZ2xlIHtcXG4gIGRpc3BsYXk6IG5vbmU7XFxufVxcblxcbi5iYXNrZXQtYnRuIHtcXG4gIGRpc3BsYXk6IG5vbmU7XFxufVxcblxcbi5iYXNrZXQtYnRuX193cmFwcGVyIHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIHRvcDogMzdweDtcXG4gIHJpZ2h0OiAyNXB4O1xcbiAgei1pbmRleDogOTk5O1xcbn1cXG5cXG4uYmFza2V0LWJ0bl9faWNvbiB7XFxuICBjb250ZW50OiB1cmwoLi4vLi4vYXNzZXRzL2Jhc2tldF9pY29uLnN2Zyk7XFxuICB3aWR0aDogMzBweDtcXG4gIGhlaWdodDogMzBweDtcXG59XFxuXFxuLmJhc2tldC1idG5fX3F1YW50aXR5IHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIGRpc3BsYXk6IG5vbmU7XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxuICB3aWR0aDogMzBweDtcXG4gIGhlaWdodDogMzBweDtcXG59XFxuXFxuLmV4Y3Vyc2lvbnNfX2l0ZW0tLXByb3RvdHlwZSxcXG4uaXRlbS1saXN0X19pdGVtLS1wcm90b3R5cGUge1xcbiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O1xcbn1cXG5cIl0sXCJzb3VyY2VSb290XCI6XCJcIn1dKTtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IF9fX0NTU19MT0FERVJfRVhQT1JUX19fO1xuIiwiLy8gSW1wb3J0c1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18gZnJvbSBcIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9zb3VyY2VNYXBzLmpzXCI7XG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fIGZyb20gXCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCI7XG5pbXBvcnQgX19fQ1NTX0xPQURFUl9HRVRfVVJMX0lNUE9SVF9fXyBmcm9tIFwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2dldFVybC5qc1wiO1xudmFyIF9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8wX19fID0gbmV3IFVSTChcIi4uLy4uL2Fzc2V0cy9oYW1idXJnZXJfaWNvbi5zdmdcIiwgaW1wb3J0Lm1ldGEudXJsKTtcbnZhciBfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMV9fXyA9IG5ldyBVUkwoXCIuLi8uLi9hc3NldHMvY3Jvc3NfaWNvbi5zdmdcIiwgaW1wb3J0Lm1ldGEudXJsKTtcbnZhciBfX19DU1NfTE9BREVSX0VYUE9SVF9fXyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fKTtcbnZhciBfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF8wX19fID0gX19fQ1NTX0xPQURFUl9HRVRfVVJMX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMF9fXyk7XG52YXIgX19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMV9fXyA9IF9fX0NTU19MT0FERVJfR0VUX1VSTF9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzFfX18pO1xuLy8gTW9kdWxlXG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5wdXNoKFttb2R1bGUuaWQsIGAubmF2YmFyIHtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbiAgLm5hdmJhcl9fY29udGFpbmVyLS1tb2JpbGUge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDExMHB4O1xuICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGdhcDogMjBweDtcbiAgICBwYWRkaW5nLWJsb2NrOiAyMHB4IDQwcHg7XG4gICAgd2lkdGg6IDEwMHZ3O1xuICAgIGJvcmRlci1ibG9jazogM3B4IHNvbGlkIHZhcigtLXByaW1hcnktY29sb3Itc3RyaXBlKTtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTtcbiAgfVxuXG4gIC5uYXZiYXJfX2NvbnRhaW5lci0tb3BlbiB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgfVxuXG4gIC5uYXZiYXJfX2l0ZW0tLW1vYmlsZSB7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIHBhZGRpbmctYmxvY2s6IDIwcHggMTVweDtcbiAgICBwYWRkaW5nLWlubGluZTogMzBweDtcbiAgICBtYXJnaW4tYm90dG9tOiA1cHg7XG4gICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgIGJvcmRlci1ib3R0b206IDNweCBzb2xpZCB2YXIoLS1wcmltYXJ5LWNvbG9yLXN0cmlwZSk7XG4gIH1cblxuICAubmF2YmFyX19pdGVtLS1tb2JpbGU6aG92ZXIge1xuICAgIHBhZGRpbmctYm90dG9tOiAyMHB4O1xuICAgIG1hcmdpbi1ib3R0b206IDA7XG4gICAgYm9yZGVyLWJvdHRvbTogM3B4IHNvbGlkIHRyYW5zcGFyZW50O1xuICAgIGJvcmRlci1yYWRpdXM6IDIwcHg7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc2Vjb25kYXJ5LWNvbG9yKTtcbiAgfVxuXG5cbi5uYXZiYXJfX2J0biB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAzN3B4O1xuICBsZWZ0OiAxMHB4O1xuICBjb250ZW50OiB1cmwoJHtfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF8wX19ffSk7XG4gIHdpZHRoOiAzMHB4O1xuICBoZWlnaHQ6IDMwcHg7XG59XG5cbi5uYXZiYXJfX2J0bi0tY2hlY2tlZCB7XG4gIGNvbnRlbnQ6IHVybCgke19fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzFfX199KTtcbn1cblxuLmJhc2tldC1idG5fX3F1YW50aXR5IHtcbiAgdG9wOiAzNnB4O1xuICBsZWZ0OiAwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDEwMHZ3O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yLWJyaWdodCk7XG4gIGJvcmRlcjogM3B4IHNvbGlkIHZhcigtLXByaW1hcnktY29sb3Itc3RyaXBlKTtcbn1cblxuQG1lZGlhIChtaW4td2lkdGg6IDY1MHB4KSB7XG5cbiAgLm5hdmJhcl9fYnRuLFxuICAuYmFza2V0LWJ0bl9faWNvbiB7XG4gICAgd2lkdGg6IDQwcHg7XG4gICAgaGVpZ2h0OiA0MHB4O1xuICB9XG5cbiAgLmJhc2tldC1idG5fX3F1YW50aXR5IHtcbiAgICB0b3A6IDExcHg7XG4gICAgbGVmdDogNXB4O1xuICAgIGJvcmRlcjogdW5zZXQ7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdW5zZXQ7XG4gIH1cbn1cblxuLnBhbmVsX19jb250YWluZXIge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIG1hcmdpbi1ib3R0b206IDQwcHg7XG59XG5cbi5oZWFkZXItLXBhbmVsIHtcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG59XG5cbi5oZWFkZXItLXBhbmVsOjphZnRlciB7XG4gIGNvbnRlbnQ6ICcnO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMzVweDtcbiAgbGVmdDogLTIwcHg7XG4gIHJpZ2h0OiAtMjBweDtcbiAgYm9yZGVyLWJvdHRvbTogM3B4IHNvbGlkIHZhcigtLXByaW1hcnktY29sb3Itc3RyaXBlKTtcbn1cblxuLnRleHQtLW1haW5wYWdlIHtcbiAgcGFkZGluZy1pbmxpbmU6IDIwcHg7XG59XG5cbi5oZWFkZXItLWxvZ286OmFmdGVyIHtcbiAgY29udGVudDogJyc7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAzNXB4O1xuICBsZWZ0OiAtMjBweDtcbiAgcmlnaHQ6IC0yMHB4O1xuICBib3JkZXItYm90dG9tOiAzcHggc29saWQgdmFyKC0tcHJpbWFyeS1jb2xvci1zdHJpcGUpO1xufVxuXG4ubWFpbnBhZ2Uge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBnYXA6IDMwcHg7XG4gIG1hcmdpbi10b3A6IDIwcHg7XG59XG5cbi50ZXh0LS1tYWlucGFnZSB7XG4gIHBhZGRpbmctaW5saW5lOiAyMHB4O1xufVxuXG4ucGFuZWxfX2V4Y3Vyc2lvbnMge1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgY29sdW1uLWdhcDogNjBweDtcbiAgcm93LWdhcDogNDBweDtcbiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiBtaW5tYXgoMjYwcHgsIDM2MHB4KTtcbiAgcGFkZGluZy1pbmxpbmU6IHVuc2V0O1xufVxuXG4ubmF2YmFyX19idG4ge1xuICBsZWZ0OiAxMHB4O1xufVxuXG4uYmFza2V0LWJ0bl9fd3JhcHBlciB7XG4gIHRvcDogMzBweDtcbiAgcmlnaHQ6IDEwcHg7XG59XG5cblxuQG1lZGlhIChtaW4td2lkdGg6IDM2MHB4KSB7XG4gIC5uYXZiYXJfX2J0biB7XG4gICAgbGVmdDogMjVweDtcbiAgfVxuXG4gIC5iYXNrZXQtYnRuX193cmFwcGVyIHtcbiAgICByaWdodDogMjVweDtcbiAgfVxuXG4gIC5wYW5lbF9fZXhjdXJzaW9ucyB7XG4gICAgcGFkZGluZy1pbmxpbmU6IDEwdnc7XG4gIH1cblxufVxuXG5AbWVkaWEgKG1pbi13aWR0aDogOTUwcHgpIHtcbiAgLnBhbmVsX19leGN1cnNpb25zIHtcbiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDM2MHB4IDM2MHB4O1xuICAgIHBhZGRpbmctaW5saW5lOiAxMHZ3O1xuICB9XG59YCwgXCJcIix7XCJ2ZXJzaW9uXCI6MyxcInNvdXJjZXNcIjpbXCJ3ZWJwYWNrOi8vLi9zcmMvY3NzL2NsaWVudC9tb2JpbGUuY3NzXCJdLFwibmFtZXNcIjpbXSxcIm1hcHBpbmdzXCI6XCJBQUFBO0VBQ0UsdUJBQXVCO0FBQ3pCOztFQUVFO0lBQ0Usa0JBQWtCO0lBQ2xCLFVBQVU7SUFDVixhQUFhO0lBQ2Isc0JBQXNCO0lBQ3RCLG1CQUFtQjtJQUNuQixTQUFTO0lBQ1Qsd0JBQXdCO0lBQ3hCLFlBQVk7SUFDWixtREFBbUQ7SUFDbkQsc0NBQXNDO0VBQ3hDOztFQUVBO0lBQ0UsYUFBYTtFQUNmOztFQUVBO0lBQ0Usa0JBQWtCO0lBQ2xCLHdCQUF3QjtJQUN4QixvQkFBb0I7SUFDcEIsa0JBQWtCO0lBQ2xCLGtCQUFrQjtJQUNsQixvREFBb0Q7RUFDdEQ7O0VBRUE7SUFDRSxvQkFBb0I7SUFDcEIsZ0JBQWdCO0lBQ2hCLG9DQUFvQztJQUNwQyxtQkFBbUI7SUFDbkIsd0NBQXdDO0VBQzFDOzs7QUFHRjtFQUNFLGtCQUFrQjtFQUNsQixTQUFTO0VBQ1QsVUFBVTtFQUNWLGdEQUE2QztFQUM3QyxXQUFXO0VBQ1gsWUFBWTtBQUNkOztBQUVBO0VBQ0UsZ0RBQXlDO0FBQzNDOztBQUVBO0VBQ0UsU0FBUztFQUNULFNBQVM7RUFDVCxvQkFBb0I7RUFDcEIsNkNBQTZDO0VBQzdDLDZDQUE2QztBQUMvQzs7QUFFQTs7RUFFRTs7SUFFRSxXQUFXO0lBQ1gsWUFBWTtFQUNkOztFQUVBO0lBQ0UsU0FBUztJQUNULFNBQVM7SUFDVCxhQUFhO0lBQ2IsdUJBQXVCO0VBQ3pCO0FBQ0Y7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UscUJBQXFCO0VBQ3JCLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLFdBQVc7RUFDWCxrQkFBa0I7RUFDbEIsU0FBUztFQUNULFdBQVc7RUFDWCxZQUFZO0VBQ1osb0RBQW9EO0FBQ3REOztBQUVBO0VBQ0Usb0JBQW9CO0FBQ3RCOztBQUVBO0VBQ0UsV0FBVztFQUNYLGtCQUFrQjtFQUNsQixTQUFTO0VBQ1QsV0FBVztFQUNYLFlBQVk7RUFDWixvREFBb0Q7QUFDdEQ7O0FBRUE7RUFDRSxhQUFhO0VBQ2Isc0JBQXNCO0VBQ3RCLFNBQVM7RUFDVCxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxvQkFBb0I7QUFDdEI7O0FBRUE7RUFDRSx1QkFBdUI7RUFDdkIsZ0JBQWdCO0VBQ2hCLGFBQWE7RUFDYiwyQ0FBMkM7RUFDM0MscUJBQXFCO0FBQ3ZCOztBQUVBO0VBQ0UsVUFBVTtBQUNaOztBQUVBO0VBQ0UsU0FBUztFQUNULFdBQVc7QUFDYjs7O0FBR0E7RUFDRTtJQUNFLFVBQVU7RUFDWjs7RUFFQTtJQUNFLFdBQVc7RUFDYjs7RUFFQTtJQUNFLG9CQUFvQjtFQUN0Qjs7QUFFRjs7QUFFQTtFQUNFO0lBQ0Usa0NBQWtDO0lBQ2xDLG9CQUFvQjtFQUN0QjtBQUNGXCIsXCJzb3VyY2VzQ29udGVudFwiOltcIi5uYXZiYXIge1xcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XFxufVxcblxcbiAgLm5hdmJhcl9fY29udGFpbmVyLS1tb2JpbGUge1xcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICAgIHRvcDogMTEwcHg7XFxuICAgIGRpc3BsYXk6IG5vbmU7XFxuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XFxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxuICAgIGdhcDogMjBweDtcXG4gICAgcGFkZGluZy1ibG9jazogMjBweCA0MHB4O1xcbiAgICB3aWR0aDogMTAwdnc7XFxuICAgIGJvcmRlci1ibG9jazogM3B4IHNvbGlkIHZhcigtLXByaW1hcnktY29sb3Itc3RyaXBlKTtcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvcik7XFxuICB9XFxuXFxuICAubmF2YmFyX19jb250YWluZXItLW9wZW4ge1xcbiAgICBkaXNwbGF5OiBmbGV4O1xcbiAgfVxcblxcbiAgLm5hdmJhcl9faXRlbS0tbW9iaWxlIHtcXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgICBwYWRkaW5nLWJsb2NrOiAyMHB4IDE1cHg7XFxuICAgIHBhZGRpbmctaW5saW5lOiAzMHB4O1xcbiAgICBtYXJnaW4tYm90dG9tOiA1cHg7XFxuICAgIGJvcmRlci1yYWRpdXM6IDZweDtcXG4gICAgYm9yZGVyLWJvdHRvbTogM3B4IHNvbGlkIHZhcigtLXByaW1hcnktY29sb3Itc3RyaXBlKTtcXG4gIH1cXG5cXG4gIC5uYXZiYXJfX2l0ZW0tLW1vYmlsZTpob3ZlciB7XFxuICAgIHBhZGRpbmctYm90dG9tOiAyMHB4O1xcbiAgICBtYXJnaW4tYm90dG9tOiAwO1xcbiAgICBib3JkZXItYm90dG9tOiAzcHggc29saWQgdHJhbnNwYXJlbnQ7XFxuICAgIGJvcmRlci1yYWRpdXM6IDIwcHg7XFxuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXNlY29uZGFyeS1jb2xvcik7XFxuICB9XFxuXFxuXFxuLm5hdmJhcl9fYnRuIHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIHRvcDogMzdweDtcXG4gIGxlZnQ6IDEwcHg7XFxuICBjb250ZW50OiB1cmwoLi4vLi4vYXNzZXRzL2hhbWJ1cmdlcl9pY29uLnN2Zyk7XFxuICB3aWR0aDogMzBweDtcXG4gIGhlaWdodDogMzBweDtcXG59XFxuXFxuLm5hdmJhcl9fYnRuLS1jaGVja2VkIHtcXG4gIGNvbnRlbnQ6IHVybCguLi8uLi9hc3NldHMvY3Jvc3NfaWNvbi5zdmcpO1xcbn1cXG5cXG4uYmFza2V0LWJ0bl9fcXVhbnRpdHkge1xcbiAgdG9wOiAzNnB4O1xcbiAgbGVmdDogMHB4O1xcbiAgYm9yZGVyLXJhZGl1czogMTAwdnc7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yLWJyaWdodCk7XFxuICBib3JkZXI6IDNweCBzb2xpZCB2YXIoLS1wcmltYXJ5LWNvbG9yLXN0cmlwZSk7XFxufVxcblxcbkBtZWRpYSAobWluLXdpZHRoOiA2NTBweCkge1xcblxcbiAgLm5hdmJhcl9fYnRuLFxcbiAgLmJhc2tldC1idG5fX2ljb24ge1xcbiAgICB3aWR0aDogNDBweDtcXG4gICAgaGVpZ2h0OiA0MHB4O1xcbiAgfVxcblxcbiAgLmJhc2tldC1idG5fX3F1YW50aXR5IHtcXG4gICAgdG9wOiAxMXB4O1xcbiAgICBsZWZ0OiA1cHg7XFxuICAgIGJvcmRlcjogdW5zZXQ7XFxuICAgIGJhY2tncm91bmQtY29sb3I6IHVuc2V0O1xcbiAgfVxcbn1cXG5cXG4ucGFuZWxfX2NvbnRhaW5lciB7XFxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxuICBtYXJnaW4tYm90dG9tOiA0MHB4O1xcbn1cXG5cXG4uaGVhZGVyLS1wYW5lbCB7XFxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxufVxcblxcbi5oZWFkZXItLXBhbmVsOjphZnRlciB7XFxuICBjb250ZW50OiAnJztcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIHRvcDogMzVweDtcXG4gIGxlZnQ6IC0yMHB4O1xcbiAgcmlnaHQ6IC0yMHB4O1xcbiAgYm9yZGVyLWJvdHRvbTogM3B4IHNvbGlkIHZhcigtLXByaW1hcnktY29sb3Itc3RyaXBlKTtcXG59XFxuXFxuLnRleHQtLW1haW5wYWdlIHtcXG4gIHBhZGRpbmctaW5saW5lOiAyMHB4O1xcbn1cXG5cXG4uaGVhZGVyLS1sb2dvOjphZnRlciB7XFxuICBjb250ZW50OiAnJztcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIHRvcDogMzVweDtcXG4gIGxlZnQ6IC0yMHB4O1xcbiAgcmlnaHQ6IC0yMHB4O1xcbiAgYm9yZGVyLWJvdHRvbTogM3B4IHNvbGlkIHZhcigtLXByaW1hcnktY29sb3Itc3RyaXBlKTtcXG59XFxuXFxuLm1haW5wYWdlIHtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAgZ2FwOiAzMHB4O1xcbiAgbWFyZ2luLXRvcDogMjBweDtcXG59XFxuXFxuLnRleHQtLW1haW5wYWdlIHtcXG4gIHBhZGRpbmctaW5saW5lOiAyMHB4O1xcbn1cXG5cXG4ucGFuZWxfX2V4Y3Vyc2lvbnMge1xcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XFxuICBjb2x1bW4tZ2FwOiA2MHB4O1xcbiAgcm93LWdhcDogNDBweDtcXG4gIGdyaWQtdGVtcGxhdGUtY29sdW1uczogbWlubWF4KDI2MHB4LCAzNjBweCk7XFxuICBwYWRkaW5nLWlubGluZTogdW5zZXQ7XFxufVxcblxcbi5uYXZiYXJfX2J0biB7XFxuICBsZWZ0OiAxMHB4O1xcbn1cXG5cXG4uYmFza2V0LWJ0bl9fd3JhcHBlciB7XFxuICB0b3A6IDMwcHg7XFxuICByaWdodDogMTBweDtcXG59XFxuXFxuXFxuQG1lZGlhIChtaW4td2lkdGg6IDM2MHB4KSB7XFxuICAubmF2YmFyX19idG4ge1xcbiAgICBsZWZ0OiAyNXB4O1xcbiAgfVxcblxcbiAgLmJhc2tldC1idG5fX3dyYXBwZXIge1xcbiAgICByaWdodDogMjVweDtcXG4gIH1cXG5cXG4gIC5wYW5lbF9fZXhjdXJzaW9ucyB7XFxuICAgIHBhZGRpbmctaW5saW5lOiAxMHZ3O1xcbiAgfVxcblxcbn1cXG5cXG5AbWVkaWEgKG1pbi13aWR0aDogOTUwcHgpIHtcXG4gIC5wYW5lbF9fZXhjdXJzaW9ucyB7XFxuICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMzYwcHggMzYwcHg7XFxuICAgIHBhZGRpbmctaW5saW5lOiAxMHZ3O1xcbiAgfVxcbn1cIl0sXCJzb3VyY2VSb290XCI6XCJcIn1dKTtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IF9fX0NTU19MT0FERVJfRVhQT1JUX19fO1xuIiwiLy8gSW1wb3J0c1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18gZnJvbSBcIi4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9zb3VyY2VNYXBzLmpzXCI7XG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fIGZyb20gXCIuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCI7XG52YXIgX19fQ1NTX0xPQURFUl9FWFBPUlRfX18gPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyk7XG4vLyBNb2R1bGVcbl9fX0NTU19MT0FERVJfRVhQT1JUX19fLnB1c2goW21vZHVsZS5pZCwgYGh0bWwsIGJvZHksIGJvZHkgZGl2LCBzcGFuLCBvYmplY3QsIGlmcmFtZSwgaDEsIGgyLCBoMywgaDQsIGg1LCBoNiwgcCwgYmxvY2txdW90ZSwgcHJlLCBhYmJyLCBhZGRyZXNzLCBjaXRlLCBjb2RlLCBkZWwsIGRmbiwgZW0sIGltZywgaW5zLCBrYmQsIHEsIHNhbXAsIHNtYWxsLCBzdHJvbmcsIHN1Yiwgc3VwLCB2YXIsIGIsIGksIGRsLCBkdCwgZGQsIG9sLCB1bCwgbGksIGZpZWxkc2V0LCBmb3JtLCBsYWJlbCwgbGVnZW5kLCB0YWJsZSwgY2FwdGlvbiwgdGJvZHksIHRmb290LCB0aGVhZCwgdHIsIHRoLCB0ZCwgYXJ0aWNsZSwgYXNpZGUsIGZpZ3VyZSwgZm9vdGVyLCBoZWFkZXIsIG1lbnUsIG5hdiwgc2VjdGlvbiwgdGltZSwgbWFyaywgYXVkaW8sIHZpZGVvLCBkZXRhaWxzLCBzdW1tYXJ5IHttYXJnaW46IDA7IHBhZGRpbmc6IDA7IGJvcmRlcjogMDsgZm9udC1zaXplOiAxMDAlOyBmb250LXdlaWdodDogbm9ybWFsOyB2ZXJ0aWNhbC1hbGlnbjogYmFzZWxpbmU7IGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O31cblxubWFpbiwgYXJ0aWNsZSwgYXNpZGUsIGZpZ3VyZSwgZm9vdGVyLCBoZWFkZXIsIG5hdiwgc2VjdGlvbiwgZGV0YWlscywgc3VtbWFyeSB7ZGlzcGxheTogYmxvY2s7fVxuXG5odG1sIHtib3gtc2l6aW5nOiBib3JkZXItYm94O31cblxuKiwgKjpiZWZvcmUsICo6YWZ0ZXIge2JveC1zaXppbmc6IGluaGVyaXQ7fVxuXG5pbWcge21heC13aWR0aDogMTAwJTt9XG5cbnVsIHtsaXN0LXN0eWxlOiBub25lO30gLyogd2UnbGwgcmVzdG9yZSBidWxsZXRzIGFzIG5lZWRlZCBmb3IgY29udGVudCAqL1xuXG5ibG9ja3F1b3RlLCBxIHtxdW90ZXM6IG5vbmU7fVxuXG5ibG9ja3F1b3RlOmJlZm9yZSwgYmxvY2txdW90ZTphZnRlciwgcTpiZWZvcmUsIHE6YWZ0ZXIge2NvbnRlbnQ6ICcnOyBjb250ZW50OiBub25lO31cblxuYSB7bWFyZ2luOiAwOyBwYWRkaW5nOiAwOyBmb250LXNpemU6IDEwMCU7IHZlcnRpY2FsLWFsaWduOiBiYXNlbGluZTsgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7fVxuXG5kZWwge3RleHQtZGVjb3JhdGlvbjogbGluZS10aHJvdWdoO31cblxuYWJiclt0aXRsZV0sIGRmblt0aXRsZV0ge2JvcmRlci1ib3R0b206IDFweCBkb3R0ZWQgIzAwMDsgY3Vyc29yOiBoZWxwO31cblxudGFibGUge2JvcmRlci1jb2xsYXBzZTogc2VwYXJhdGU7IGJvcmRlci1zcGFjaW5nOiAwOyB0ZXh0LWFsaWduOiBsZWZ0O31cbnRoIHtmb250LXdlaWdodDogYm9sZDsgdmVydGljYWwtYWxpZ246IGJvdHRvbTt9XG50ZCB7Zm9udC13ZWlnaHQ6IG5vcm1hbDsgdmVydGljYWwtYWxpZ246IHRvcDt9XG50ZCBpbWcge3ZlcnRpY2FsLWFsaWduOiB0b3A7fVxuXG5ociB7ZGlzcGxheTogYmxvY2s7IGhlaWdodDogMXB4OyBib3JkZXI6IDA7IGJvcmRlci10b3A6IDFweCBzb2xpZCAjOTk5OyBtYXJnaW46IDFyZW0gMDsgcGFkZGluZzogMDt9XG5cbmlucHV0LCBzZWxlY3Qge3ZlcnRpY2FsLWFsaWduOiBtaWRkbGU7fVxuXG5wcmUge3doaXRlLXNwYWNlOiBwcmUtbGluZTt9XG5cbmlucHV0W3R5cGU9XCJyYWRpb1wiXSB7dmVydGljYWwtYWxpZ246IHRleHQtYm90dG9tO31cbmlucHV0W3R5cGU9XCJjaGVja2JveFwiXSB7dmVydGljYWwtYWxpZ246IGJvdHRvbTt9XG5cbnNtYWxsIHtmb250LXNpemU6IC44cmVtO31cblxuc3Ryb25nIHtmb250LXdlaWdodDogYm9sZDt9XG5cbnN1Yiwgc3VwIHtmb250LXNpemU6IC44cmVtOyBsaW5lLWhlaWdodDogMDsgcG9zaXRpb246IHJlbGF0aXZlO31cbnN1cCB7dG9wOiAtMC41cmVtO31cbnN1YiB7Ym90dG9tOiAtMC4yNXJlbTt9XG5cbnByZSwgY29kZSwga2JkLCBzYW1wIHtmb250LWZhbWlseTogbW9ub3NwYWNlLCBzYW5zLXNlcmlmO31cblxubGFiZWwsIGlucHV0W3R5cGU9YnV0dG9uXSwgaW5wdXRbdHlwZT1zdWJtaXRdLCBpbnB1dFt0eXBlPWZpbGVdLCBidXR0b24ge2N1cnNvcjogcG9pbnRlcjt9XG5cbmJ1dHRvbiwgaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEge21hcmdpbjogMDt9XG5cbmlucyB7YmFja2dyb3VuZC1jb2xvcjogdmFyKC0taGlnaGxpZ2h0LWNvbG9yKTsgY29sb3I6ICMwMDA7IHRleHQtZGVjb3JhdGlvbjogbm9uZTt9XG5tYXJrIHtiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1oaWdobGlnaHQtY29sb3IpOyBjb2xvcjogIzAwMDsgZm9udC1zdHlsZTogaXRhbGljOyBmb250LXdlaWdodDogYm9sZDt9XG5cbmJsb2NrcXVvdGUge3BhZGRpbmc6IDJyZW07IGJvcmRlci1sZWZ0OiAxcHggc29saWQgIzMzMzt9XG5cbi5jbGVhcmZpeDphZnRlciB7Y29udGVudDogXCJcIjsgZGlzcGxheTogdGFibGU7IGNsZWFyOiBib3RoO30gLyogaHR0cHM6Ly9jc3MtdHJpY2tzLmNvbS9zbmlwcGV0cy9jc3MvY2xlYXItZml4LyAqL1xuXG4vKiDigJTigJTigJTigJQgRU5EIFRIRSBHRU5FUklDIFJFU0VUUyDigJTigJTigJTigJQgKi9cblxuOnJvb3Qge1xuXHQtLWZvbnQtc3lzdGVtOiBzeXN0ZW0tdWksIFwiU2Vnb2UgVUlcIiwgUm9ib3RvLCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmLCBcIkFwcGxlIENvbG9yIEVtb2ppXCIsIFwiU2Vnb2UgVUkgRW1vamlcIiwgXCJTZWdvZSBVSSBTeW1ib2xcIjsgLyogaHR0cHM6Ly9jc3MtdHJpY2tzLmNvbS9zbmlwcGV0cy9jc3Mvc3lzdGVtLWZvbnQtc3RhY2sgKi9cblx0LS10ZXh0LWNvbG9yOiAjMzMzO1xuXHQtLWZlYXR1cmVkLWNvbG9yOiAjMDNmO1xuXHQtLWZlYXR1cmVkLWNvbG9yLWhvdmVyOiAjNjlmO1xuXHQtLWhpZ2hsaWdodC1jb2xvcjogI2ZjZDcwMDtcbn1cblxuYm9keSB7Zm9udC1zaXplOiAxNnB4OyBmb250LWZhbWlseTogdmFyKC0tZm9udC1zeXN0ZW0pOyBjb2xvcjogdmFyKC0tdGV4dC1jb2xvcik7fVxuXG5hIHtjb2xvcjogdmFyKC0tZmVhdHVyZWQtY29sb3IpO31cbmE6aG92ZXIge2NvbG9yOiB2YXIoLS1mZWF0dXJlZC1jb2xvci1ob3Zlcik7fVxuXG5AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA0ODBweCkge1xuXHRcbn1cblxuQG1lZGlhIHByaW50IHtcblx0XG59YCwgXCJcIix7XCJ2ZXJzaW9uXCI6MyxcInNvdXJjZXNcIjpbXCJ3ZWJwYWNrOi8vLi9zcmMvY3NzL3Jlc2V0LmNzc1wiXSxcIm5hbWVzXCI6W10sXCJtYXBwaW5nc1wiOlwiQUFBQSw2WUFBNlksU0FBUyxFQUFFLFVBQVUsRUFBRSxTQUFTLEVBQUUsZUFBZSxFQUFFLG1CQUFtQixFQUFFLHdCQUF3QixFQUFFLHVCQUF1QixDQUFDOztBQUV2Z0IsOEVBQThFLGNBQWMsQ0FBQzs7QUFFN0YsTUFBTSxzQkFBc0IsQ0FBQzs7QUFFN0Isc0JBQXNCLG1CQUFtQixDQUFDOztBQUUxQyxLQUFLLGVBQWUsQ0FBQzs7QUFFckIsSUFBSSxnQkFBZ0IsQ0FBQyxFQUFFLGdEQUFnRDs7QUFFdkUsZUFBZSxZQUFZLENBQUM7O0FBRTVCLHdEQUF3RCxXQUFXLEVBQUUsYUFBYSxDQUFDOztBQUVuRixHQUFHLFNBQVMsRUFBRSxVQUFVLEVBQUUsZUFBZSxFQUFFLHdCQUF3QixFQUFFLHVCQUF1QixDQUFDOztBQUU3RixLQUFLLDZCQUE2QixDQUFDOztBQUVuQyx5QkFBeUIsOEJBQThCLEVBQUUsWUFBWSxDQUFDOztBQUV0RSxPQUFPLHlCQUF5QixFQUFFLGlCQUFpQixFQUFFLGdCQUFnQixDQUFDO0FBQ3RFLElBQUksaUJBQWlCLEVBQUUsc0JBQXNCLENBQUM7QUFDOUMsSUFBSSxtQkFBbUIsRUFBRSxtQkFBbUIsQ0FBQztBQUM3QyxRQUFRLG1CQUFtQixDQUFDOztBQUU1QixJQUFJLGNBQWMsRUFBRSxXQUFXLEVBQUUsU0FBUyxFQUFFLDBCQUEwQixFQUFFLGNBQWMsRUFBRSxVQUFVLENBQUM7O0FBRW5HLGVBQWUsc0JBQXNCLENBQUM7O0FBRXRDLEtBQUsscUJBQXFCLENBQUM7O0FBRTNCLHFCQUFxQiwyQkFBMkIsQ0FBQztBQUNqRCx3QkFBd0Isc0JBQXNCLENBQUM7O0FBRS9DLE9BQU8sZ0JBQWdCLENBQUM7O0FBRXhCLFFBQVEsaUJBQWlCLENBQUM7O0FBRTFCLFVBQVUsZ0JBQWdCLEVBQUUsY0FBYyxFQUFFLGtCQUFrQixDQUFDO0FBQy9ELEtBQUssWUFBWSxDQUFDO0FBQ2xCLEtBQUssZ0JBQWdCLENBQUM7O0FBRXRCLHNCQUFzQixrQ0FBa0MsQ0FBQzs7QUFFekQseUVBQXlFLGVBQWUsQ0FBQzs7QUFFekYsaUNBQWlDLFNBQVMsQ0FBQzs7QUFFM0MsS0FBSyx3Q0FBd0MsRUFBRSxXQUFXLEVBQUUscUJBQXFCLENBQUM7QUFDbEYsTUFBTSx3Q0FBd0MsRUFBRSxXQUFXLEVBQUUsa0JBQWtCLEVBQUUsaUJBQWlCLENBQUM7O0FBRW5HLFlBQVksYUFBYSxFQUFFLDJCQUEyQixDQUFDOztBQUV2RCxpQkFBaUIsV0FBVyxFQUFFLGNBQWMsRUFBRSxXQUFXLENBQUMsRUFBRSxtREFBbUQ7O0FBRS9HLHFDQUFxQzs7QUFFckM7Q0FDQyxvSUFBb0ksRUFBRSwwREFBMEQ7Q0FDaE0sa0JBQWtCO0NBQ2xCLHNCQUFzQjtDQUN0Qiw0QkFBNEI7Q0FDNUIsMEJBQTBCO0FBQzNCOztBQUVBLE1BQU0sZUFBZSxFQUFFLCtCQUErQixFQUFFLHdCQUF3QixDQUFDOztBQUVqRixHQUFHLDRCQUE0QixDQUFDO0FBQ2hDLFNBQVMsa0NBQWtDLENBQUM7O0FBRTVDOztBQUVBOztBQUVBOztBQUVBXCIsXCJzb3VyY2VzQ29udGVudFwiOltcImh0bWwsIGJvZHksIGJvZHkgZGl2LCBzcGFuLCBvYmplY3QsIGlmcmFtZSwgaDEsIGgyLCBoMywgaDQsIGg1LCBoNiwgcCwgYmxvY2txdW90ZSwgcHJlLCBhYmJyLCBhZGRyZXNzLCBjaXRlLCBjb2RlLCBkZWwsIGRmbiwgZW0sIGltZywgaW5zLCBrYmQsIHEsIHNhbXAsIHNtYWxsLCBzdHJvbmcsIHN1Yiwgc3VwLCB2YXIsIGIsIGksIGRsLCBkdCwgZGQsIG9sLCB1bCwgbGksIGZpZWxkc2V0LCBmb3JtLCBsYWJlbCwgbGVnZW5kLCB0YWJsZSwgY2FwdGlvbiwgdGJvZHksIHRmb290LCB0aGVhZCwgdHIsIHRoLCB0ZCwgYXJ0aWNsZSwgYXNpZGUsIGZpZ3VyZSwgZm9vdGVyLCBoZWFkZXIsIG1lbnUsIG5hdiwgc2VjdGlvbiwgdGltZSwgbWFyaywgYXVkaW8sIHZpZGVvLCBkZXRhaWxzLCBzdW1tYXJ5IHttYXJnaW46IDA7IHBhZGRpbmc6IDA7IGJvcmRlcjogMDsgZm9udC1zaXplOiAxMDAlOyBmb250LXdlaWdodDogbm9ybWFsOyB2ZXJ0aWNhbC1hbGlnbjogYmFzZWxpbmU7IGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O31cXG5cXG5tYWluLCBhcnRpY2xlLCBhc2lkZSwgZmlndXJlLCBmb290ZXIsIGhlYWRlciwgbmF2LCBzZWN0aW9uLCBkZXRhaWxzLCBzdW1tYXJ5IHtkaXNwbGF5OiBibG9jazt9XFxuXFxuaHRtbCB7Ym94LXNpemluZzogYm9yZGVyLWJveDt9XFxuXFxuKiwgKjpiZWZvcmUsICo6YWZ0ZXIge2JveC1zaXppbmc6IGluaGVyaXQ7fVxcblxcbmltZyB7bWF4LXdpZHRoOiAxMDAlO31cXG5cXG51bCB7bGlzdC1zdHlsZTogbm9uZTt9IC8qIHdlJ2xsIHJlc3RvcmUgYnVsbGV0cyBhcyBuZWVkZWQgZm9yIGNvbnRlbnQgKi9cXG5cXG5ibG9ja3F1b3RlLCBxIHtxdW90ZXM6IG5vbmU7fVxcblxcbmJsb2NrcXVvdGU6YmVmb3JlLCBibG9ja3F1b3RlOmFmdGVyLCBxOmJlZm9yZSwgcTphZnRlciB7Y29udGVudDogJyc7IGNvbnRlbnQ6IG5vbmU7fVxcblxcbmEge21hcmdpbjogMDsgcGFkZGluZzogMDsgZm9udC1zaXplOiAxMDAlOyB2ZXJ0aWNhbC1hbGlnbjogYmFzZWxpbmU7IGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O31cXG5cXG5kZWwge3RleHQtZGVjb3JhdGlvbjogbGluZS10aHJvdWdoO31cXG5cXG5hYmJyW3RpdGxlXSwgZGZuW3RpdGxlXSB7Ym9yZGVyLWJvdHRvbTogMXB4IGRvdHRlZCAjMDAwOyBjdXJzb3I6IGhlbHA7fVxcblxcbnRhYmxlIHtib3JkZXItY29sbGFwc2U6IHNlcGFyYXRlOyBib3JkZXItc3BhY2luZzogMDsgdGV4dC1hbGlnbjogbGVmdDt9XFxudGgge2ZvbnQtd2VpZ2h0OiBib2xkOyB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tO31cXG50ZCB7Zm9udC13ZWlnaHQ6IG5vcm1hbDsgdmVydGljYWwtYWxpZ246IHRvcDt9XFxudGQgaW1nIHt2ZXJ0aWNhbC1hbGlnbjogdG9wO31cXG5cXG5ociB7ZGlzcGxheTogYmxvY2s7IGhlaWdodDogMXB4OyBib3JkZXI6IDA7IGJvcmRlci10b3A6IDFweCBzb2xpZCAjOTk5OyBtYXJnaW46IDFyZW0gMDsgcGFkZGluZzogMDt9XFxuXFxuaW5wdXQsIHNlbGVjdCB7dmVydGljYWwtYWxpZ246IG1pZGRsZTt9XFxuXFxucHJlIHt3aGl0ZS1zcGFjZTogcHJlLWxpbmU7fVxcblxcbmlucHV0W3R5cGU9XFxcInJhZGlvXFxcIl0ge3ZlcnRpY2FsLWFsaWduOiB0ZXh0LWJvdHRvbTt9XFxuaW5wdXRbdHlwZT1cXFwiY2hlY2tib3hcXFwiXSB7dmVydGljYWwtYWxpZ246IGJvdHRvbTt9XFxuXFxuc21hbGwge2ZvbnQtc2l6ZTogLjhyZW07fVxcblxcbnN0cm9uZyB7Zm9udC13ZWlnaHQ6IGJvbGQ7fVxcblxcbnN1Yiwgc3VwIHtmb250LXNpemU6IC44cmVtOyBsaW5lLWhlaWdodDogMDsgcG9zaXRpb246IHJlbGF0aXZlO31cXG5zdXAge3RvcDogLTAuNXJlbTt9XFxuc3ViIHtib3R0b206IC0wLjI1cmVtO31cXG5cXG5wcmUsIGNvZGUsIGtiZCwgc2FtcCB7Zm9udC1mYW1pbHk6IG1vbm9zcGFjZSwgc2Fucy1zZXJpZjt9XFxuXFxubGFiZWwsIGlucHV0W3R5cGU9YnV0dG9uXSwgaW5wdXRbdHlwZT1zdWJtaXRdLCBpbnB1dFt0eXBlPWZpbGVdLCBidXR0b24ge2N1cnNvcjogcG9pbnRlcjt9XFxuXFxuYnV0dG9uLCBpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYSB7bWFyZ2luOiAwO31cXG5cXG5pbnMge2JhY2tncm91bmQtY29sb3I6IHZhcigtLWhpZ2hsaWdodC1jb2xvcik7IGNvbG9yOiAjMDAwOyB0ZXh0LWRlY29yYXRpb246IG5vbmU7fVxcbm1hcmsge2JhY2tncm91bmQtY29sb3I6IHZhcigtLWhpZ2hsaWdodC1jb2xvcik7IGNvbG9yOiAjMDAwOyBmb250LXN0eWxlOiBpdGFsaWM7IGZvbnQtd2VpZ2h0OiBib2xkO31cXG5cXG5ibG9ja3F1b3RlIHtwYWRkaW5nOiAycmVtOyBib3JkZXItbGVmdDogMXB4IHNvbGlkICMzMzM7fVxcblxcbi5jbGVhcmZpeDphZnRlciB7Y29udGVudDogXFxcIlxcXCI7IGRpc3BsYXk6IHRhYmxlOyBjbGVhcjogYm90aDt9IC8qIGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vc25pcHBldHMvY3NzL2NsZWFyLWZpeC8gKi9cXG5cXG4vKiDigJTigJTigJTigJQgRU5EIFRIRSBHRU5FUklDIFJFU0VUUyDigJTigJTigJTigJQgKi9cXG5cXG46cm9vdCB7XFxuXFx0LS1mb250LXN5c3RlbTogc3lzdGVtLXVpLCBcXFwiU2Vnb2UgVUlcXFwiLCBSb2JvdG8sIEhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWYsIFxcXCJBcHBsZSBDb2xvciBFbW9qaVxcXCIsIFxcXCJTZWdvZSBVSSBFbW9qaVxcXCIsIFxcXCJTZWdvZSBVSSBTeW1ib2xcXFwiOyAvKiBodHRwczovL2Nzcy10cmlja3MuY29tL3NuaXBwZXRzL2Nzcy9zeXN0ZW0tZm9udC1zdGFjayAqL1xcblxcdC0tdGV4dC1jb2xvcjogIzMzMztcXG5cXHQtLWZlYXR1cmVkLWNvbG9yOiAjMDNmO1xcblxcdC0tZmVhdHVyZWQtY29sb3ItaG92ZXI6ICM2OWY7XFxuXFx0LS1oaWdobGlnaHQtY29sb3I6ICNmY2Q3MDA7XFxufVxcblxcbmJvZHkge2ZvbnQtc2l6ZTogMTZweDsgZm9udC1mYW1pbHk6IHZhcigtLWZvbnQtc3lzdGVtKTsgY29sb3I6IHZhcigtLXRleHQtY29sb3IpO31cXG5cXG5hIHtjb2xvcjogdmFyKC0tZmVhdHVyZWQtY29sb3IpO31cXG5hOmhvdmVyIHtjb2xvcjogdmFyKC0tZmVhdHVyZWQtY29sb3ItaG92ZXIpO31cXG5cXG5AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA0ODBweCkge1xcblxcdFxcbn1cXG5cXG5AbWVkaWEgcHJpbnQge1xcblxcdFxcbn1cIl0sXCJzb3VyY2VSb290XCI6XCJcIn1dKTtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IF9fX0NTU19MT0FERVJfRVhQT1JUX19fO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qXG4gIE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG4gIEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcbiovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKSB7XG4gIHZhciBsaXN0ID0gW107XG5cbiAgLy8gcmV0dXJuIHRoZSBsaXN0IG9mIG1vZHVsZXMgYXMgY3NzIHN0cmluZ1xuICBsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICB2YXIgY29udGVudCA9IFwiXCI7XG4gICAgICB2YXIgbmVlZExheWVyID0gdHlwZW9mIGl0ZW1bNV0gIT09IFwidW5kZWZpbmVkXCI7XG4gICAgICBpZiAoaXRlbVs0XSkge1xuICAgICAgICBjb250ZW50ICs9IFwiQHN1cHBvcnRzIChcIi5jb25jYXQoaXRlbVs0XSwgXCIpIHtcIik7XG4gICAgICB9XG4gICAgICBpZiAoaXRlbVsyXSkge1xuICAgICAgICBjb250ZW50ICs9IFwiQG1lZGlhIFwiLmNvbmNhdChpdGVtWzJdLCBcIiB7XCIpO1xuICAgICAgfVxuICAgICAgaWYgKG5lZWRMYXllcikge1xuICAgICAgICBjb250ZW50ICs9IFwiQGxheWVyXCIuY29uY2F0KGl0ZW1bNV0ubGVuZ3RoID4gMCA/IFwiIFwiLmNvbmNhdChpdGVtWzVdKSA6IFwiXCIsIFwiIHtcIik7XG4gICAgICB9XG4gICAgICBjb250ZW50ICs9IGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSk7XG4gICAgICBpZiAobmVlZExheWVyKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJ9XCI7XG4gICAgICB9XG4gICAgICBpZiAoaXRlbVsyXSkge1xuICAgICAgICBjb250ZW50ICs9IFwifVwiO1xuICAgICAgfVxuICAgICAgaWYgKGl0ZW1bNF0pIHtcbiAgICAgICAgY29udGVudCArPSBcIn1cIjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH0pLmpvaW4oXCJcIik7XG4gIH07XG5cbiAgLy8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3RcbiAgbGlzdC5pID0gZnVuY3Rpb24gaShtb2R1bGVzLCBtZWRpYSwgZGVkdXBlLCBzdXBwb3J0cywgbGF5ZXIpIHtcbiAgICBpZiAodHlwZW9mIG1vZHVsZXMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIG1vZHVsZXMgPSBbW251bGwsIG1vZHVsZXMsIHVuZGVmaW5lZF1dO1xuICAgIH1cbiAgICB2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xuICAgIGlmIChkZWR1cGUpIHtcbiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgdGhpcy5sZW5ndGg7IGsrKykge1xuICAgICAgICB2YXIgaWQgPSB0aGlzW2tdWzBdO1xuICAgICAgICBpZiAoaWQgIT0gbnVsbCkge1xuICAgICAgICAgIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaWRdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKHZhciBfayA9IDA7IF9rIDwgbW9kdWxlcy5sZW5ndGg7IF9rKyspIHtcbiAgICAgIHZhciBpdGVtID0gW10uY29uY2F0KG1vZHVsZXNbX2tdKTtcbiAgICAgIGlmIChkZWR1cGUgJiYgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgbGF5ZXIgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpdGVtWzVdID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgaXRlbVs1XSA9IGxheWVyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1bMV0gPSBcIkBsYXllclwiLmNvbmNhdChpdGVtWzVdLmxlbmd0aCA+IDAgPyBcIiBcIi5jb25jYXQoaXRlbVs1XSkgOiBcIlwiLCBcIiB7XCIpLmNvbmNhdChpdGVtWzFdLCBcIn1cIik7XG4gICAgICAgICAgaXRlbVs1XSA9IGxheWVyO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAobWVkaWEpIHtcbiAgICAgICAgaWYgKCFpdGVtWzJdKSB7XG4gICAgICAgICAgaXRlbVsyXSA9IG1lZGlhO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1bMV0gPSBcIkBtZWRpYSBcIi5jb25jYXQoaXRlbVsyXSwgXCIge1wiKS5jb25jYXQoaXRlbVsxXSwgXCJ9XCIpO1xuICAgICAgICAgIGl0ZW1bMl0gPSBtZWRpYTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHN1cHBvcnRzKSB7XG4gICAgICAgIGlmICghaXRlbVs0XSkge1xuICAgICAgICAgIGl0ZW1bNF0gPSBcIlwiLmNvbmNhdChzdXBwb3J0cyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbVsxXSA9IFwiQHN1cHBvcnRzIChcIi5jb25jYXQoaXRlbVs0XSwgXCIpIHtcIikuY29uY2F0KGl0ZW1bMV0sIFwifVwiKTtcbiAgICAgICAgICBpdGVtWzRdID0gc3VwcG9ydHM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGxpc3QucHVzaChpdGVtKTtcbiAgICB9XG4gIH07XG4gIHJldHVybiBsaXN0O1xufTsiLCJcInVzZSBzdHJpY3RcIjtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodXJsLCBvcHRpb25zKSB7XG4gIGlmICghb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgfVxuICBpZiAoIXVybCkge1xuICAgIHJldHVybiB1cmw7XG4gIH1cbiAgdXJsID0gU3RyaW5nKHVybC5fX2VzTW9kdWxlID8gdXJsLmRlZmF1bHQgOiB1cmwpO1xuXG4gIC8vIElmIHVybCBpcyBhbHJlYWR5IHdyYXBwZWQgaW4gcXVvdGVzLCByZW1vdmUgdGhlbVxuICBpZiAoL15bJ1wiXS4qWydcIl0kLy50ZXN0KHVybCkpIHtcbiAgICB1cmwgPSB1cmwuc2xpY2UoMSwgLTEpO1xuICB9XG4gIGlmIChvcHRpb25zLmhhc2gpIHtcbiAgICB1cmwgKz0gb3B0aW9ucy5oYXNoO1xuICB9XG5cbiAgLy8gU2hvdWxkIHVybCBiZSB3cmFwcGVkP1xuICAvLyBTZWUgaHR0cHM6Ly9kcmFmdHMuY3Nzd2cub3JnL2Nzcy12YWx1ZXMtMy8jdXJsc1xuICBpZiAoL1tcIicoKSBcXHRcXG5dfCglMjApLy50ZXN0KHVybCkgfHwgb3B0aW9ucy5uZWVkUXVvdGVzKSB7XG4gICAgcmV0dXJuIFwiXFxcIlwiLmNvbmNhdCh1cmwucmVwbGFjZSgvXCIvZywgJ1xcXFxcIicpLnJlcGxhY2UoL1xcbi9nLCBcIlxcXFxuXCIpLCBcIlxcXCJcIik7XG4gIH1cbiAgcmV0dXJuIHVybDtcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgdmFyIGNvbnRlbnQgPSBpdGVtWzFdO1xuICB2YXIgY3NzTWFwcGluZyA9IGl0ZW1bM107XG4gIGlmICghY3NzTWFwcGluZykge1xuICAgIHJldHVybiBjb250ZW50O1xuICB9XG4gIGlmICh0eXBlb2YgYnRvYSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgdmFyIGJhc2U2NCA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KGNzc01hcHBpbmcpKSkpO1xuICAgIHZhciBkYXRhID0gXCJzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxcIi5jb25jYXQoYmFzZTY0KTtcbiAgICB2YXIgc291cmNlTWFwcGluZyA9IFwiLyojIFwiLmNvbmNhdChkYXRhLCBcIiAqL1wiKTtcbiAgICByZXR1cm4gW2NvbnRlbnRdLmNvbmNhdChbc291cmNlTWFwcGluZ10pLmpvaW4oXCJcXG5cIik7XG4gIH1cbiAgcmV0dXJuIFtjb250ZW50XS5qb2luKFwiXFxuXCIpO1xufTsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIHN0eWxlc0luRE9NID0gW107XG5mdW5jdGlvbiBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKSB7XG4gIHZhciByZXN1bHQgPSAtMTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXNJbkRPTS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChzdHlsZXNJbkRPTVtpXS5pZGVudGlmaWVyID09PSBpZGVudGlmaWVyKSB7XG4gICAgICByZXN1bHQgPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBtb2R1bGVzVG9Eb20obGlzdCwgb3B0aW9ucykge1xuICB2YXIgaWRDb3VudE1hcCA9IHt9O1xuICB2YXIgaWRlbnRpZmllcnMgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBsaXN0W2ldO1xuICAgIHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xuICAgIHZhciBjb3VudCA9IGlkQ291bnRNYXBbaWRdIHx8IDA7XG4gICAgdmFyIGlkZW50aWZpZXIgPSBcIlwiLmNvbmNhdChpZCwgXCIgXCIpLmNvbmNhdChjb3VudCk7XG4gICAgaWRDb3VudE1hcFtpZF0gPSBjb3VudCArIDE7XG4gICAgdmFyIGluZGV4QnlJZGVudGlmaWVyID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgdmFyIG9iaiA9IHtcbiAgICAgIGNzczogaXRlbVsxXSxcbiAgICAgIG1lZGlhOiBpdGVtWzJdLFxuICAgICAgc291cmNlTWFwOiBpdGVtWzNdLFxuICAgICAgc3VwcG9ydHM6IGl0ZW1bNF0sXG4gICAgICBsYXllcjogaXRlbVs1XVxuICAgIH07XG4gICAgaWYgKGluZGV4QnlJZGVudGlmaWVyICE9PSAtMSkge1xuICAgICAgc3R5bGVzSW5ET01baW5kZXhCeUlkZW50aWZpZXJdLnJlZmVyZW5jZXMrKztcbiAgICAgIHN0eWxlc0luRE9NW2luZGV4QnlJZGVudGlmaWVyXS51cGRhdGVyKG9iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciB1cGRhdGVyID0gYWRkRWxlbWVudFN0eWxlKG9iaiwgb3B0aW9ucyk7XG4gICAgICBvcHRpb25zLmJ5SW5kZXggPSBpO1xuICAgICAgc3R5bGVzSW5ET00uc3BsaWNlKGksIDAsIHtcbiAgICAgICAgaWRlbnRpZmllcjogaWRlbnRpZmllcixcbiAgICAgICAgdXBkYXRlcjogdXBkYXRlcixcbiAgICAgICAgcmVmZXJlbmNlczogMVxuICAgICAgfSk7XG4gICAgfVxuICAgIGlkZW50aWZpZXJzLnB1c2goaWRlbnRpZmllcik7XG4gIH1cbiAgcmV0dXJuIGlkZW50aWZpZXJzO1xufVxuZnVuY3Rpb24gYWRkRWxlbWVudFN0eWxlKG9iaiwgb3B0aW9ucykge1xuICB2YXIgYXBpID0gb3B0aW9ucy5kb21BUEkob3B0aW9ucyk7XG4gIGFwaS51cGRhdGUob2JqKTtcbiAgdmFyIHVwZGF0ZXIgPSBmdW5jdGlvbiB1cGRhdGVyKG5ld09iaikge1xuICAgIGlmIChuZXdPYmopIHtcbiAgICAgIGlmIChuZXdPYmouY3NzID09PSBvYmouY3NzICYmIG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmIG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXAgJiYgbmV3T2JqLnN1cHBvcnRzID09PSBvYmouc3VwcG9ydHMgJiYgbmV3T2JqLmxheWVyID09PSBvYmoubGF5ZXIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgYXBpLnVwZGF0ZShvYmogPSBuZXdPYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICBhcGkucmVtb3ZlKCk7XG4gICAgfVxuICB9O1xuICByZXR1cm4gdXBkYXRlcjtcbn1cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGxpc3QsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIGxpc3QgPSBsaXN0IHx8IFtdO1xuICB2YXIgbGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlKG5ld0xpc3QpIHtcbiAgICBuZXdMaXN0ID0gbmV3TGlzdCB8fCBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGlkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbaV07XG4gICAgICB2YXIgaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcbiAgICAgIHN0eWxlc0luRE9NW2luZGV4XS5yZWZlcmVuY2VzLS07XG4gICAgfVxuICAgIHZhciBuZXdMYXN0SWRlbnRpZmllcnMgPSBtb2R1bGVzVG9Eb20obmV3TGlzdCwgb3B0aW9ucyk7XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBfaWRlbnRpZmllciA9IGxhc3RJZGVudGlmaWVyc1tfaV07XG4gICAgICB2YXIgX2luZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoX2lkZW50aWZpZXIpO1xuICAgICAgaWYgKHN0eWxlc0luRE9NW19pbmRleF0ucmVmZXJlbmNlcyA9PT0gMCkge1xuICAgICAgICBzdHlsZXNJbkRPTVtfaW5kZXhdLnVwZGF0ZXIoKTtcbiAgICAgICAgc3R5bGVzSW5ET00uc3BsaWNlKF9pbmRleCwgMSk7XG4gICAgICB9XG4gICAgfVxuICAgIGxhc3RJZGVudGlmaWVycyA9IG5ld0xhc3RJZGVudGlmaWVycztcbiAgfTtcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBtZW1vID0ge307XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gZ2V0VGFyZ2V0KHRhcmdldCkge1xuICBpZiAodHlwZW9mIG1lbW9bdGFyZ2V0XSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHZhciBzdHlsZVRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTtcblxuICAgIC8vIFNwZWNpYWwgY2FzZSB0byByZXR1cm4gaGVhZCBvZiBpZnJhbWUgaW5zdGVhZCBvZiBpZnJhbWUgaXRzZWxmXG4gICAgaWYgKHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCAmJiBzdHlsZVRhcmdldCBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gVGhpcyB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhY2Nlc3MgdG8gaWZyYW1lIGlzIGJsb2NrZWRcbiAgICAgICAgLy8gZHVlIHRvIGNyb3NzLW9yaWdpbiByZXN0cmljdGlvbnNcbiAgICAgICAgc3R5bGVUYXJnZXQgPSBzdHlsZVRhcmdldC5jb250ZW50RG9jdW1lbnQuaGVhZDtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gaXN0YW5idWwgaWdub3JlIG5leHRcbiAgICAgICAgc3R5bGVUYXJnZXQgPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgICBtZW1vW3RhcmdldF0gPSBzdHlsZVRhcmdldDtcbiAgfVxuICByZXR1cm4gbWVtb1t0YXJnZXRdO1xufVxuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIGluc2VydEJ5U2VsZWN0b3IoaW5zZXJ0LCBzdHlsZSkge1xuICB2YXIgdGFyZ2V0ID0gZ2V0VGFyZ2V0KGluc2VydCk7XG4gIGlmICghdGFyZ2V0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgZmluZCBhIHN0eWxlIHRhcmdldC4gVGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhlICdpbnNlcnQnIHBhcmFtZXRlciBpcyBpbnZhbGlkLlwiKTtcbiAgfVxuICB0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xufVxubW9kdWxlLmV4cG9ydHMgPSBpbnNlcnRCeVNlbGVjdG9yOyIsIlwidXNlIHN0cmljdFwiO1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKSB7XG4gIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuICBvcHRpb25zLnNldEF0dHJpYnV0ZXMoZWxlbWVudCwgb3B0aW9ucy5hdHRyaWJ1dGVzKTtcbiAgb3B0aW9ucy5pbnNlcnQoZWxlbWVudCwgb3B0aW9ucy5vcHRpb25zKTtcbiAgcmV0dXJuIGVsZW1lbnQ7XG59XG5tb2R1bGUuZXhwb3J0cyA9IGluc2VydFN0eWxlRWxlbWVudDsiLCJcInVzZSBzdHJpY3RcIjtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBzZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMoc3R5bGVFbGVtZW50KSB7XG4gIHZhciBub25jZSA9IHR5cGVvZiBfX3dlYnBhY2tfbm9uY2VfXyAhPT0gXCJ1bmRlZmluZWRcIiA/IF9fd2VicGFja19ub25jZV9fIDogbnVsbDtcbiAgaWYgKG5vbmNlKSB7XG4gICAgc3R5bGVFbGVtZW50LnNldEF0dHJpYnV0ZShcIm5vbmNlXCIsIG5vbmNlKTtcbiAgfVxufVxubW9kdWxlLmV4cG9ydHMgPSBzZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXM7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gYXBwbHkoc3R5bGVFbGVtZW50LCBvcHRpb25zLCBvYmopIHtcbiAgdmFyIGNzcyA9IFwiXCI7XG4gIGlmIChvYmouc3VwcG9ydHMpIHtcbiAgICBjc3MgKz0gXCJAc3VwcG9ydHMgKFwiLmNvbmNhdChvYmouc3VwcG9ydHMsIFwiKSB7XCIpO1xuICB9XG4gIGlmIChvYmoubWVkaWEpIHtcbiAgICBjc3MgKz0gXCJAbWVkaWEgXCIuY29uY2F0KG9iai5tZWRpYSwgXCIge1wiKTtcbiAgfVxuICB2YXIgbmVlZExheWVyID0gdHlwZW9mIG9iai5sYXllciAhPT0gXCJ1bmRlZmluZWRcIjtcbiAgaWYgKG5lZWRMYXllcikge1xuICAgIGNzcyArPSBcIkBsYXllclwiLmNvbmNhdChvYmoubGF5ZXIubGVuZ3RoID4gMCA/IFwiIFwiLmNvbmNhdChvYmoubGF5ZXIpIDogXCJcIiwgXCIge1wiKTtcbiAgfVxuICBjc3MgKz0gb2JqLmNzcztcbiAgaWYgKG5lZWRMYXllcikge1xuICAgIGNzcyArPSBcIn1cIjtcbiAgfVxuICBpZiAob2JqLm1lZGlhKSB7XG4gICAgY3NzICs9IFwifVwiO1xuICB9XG4gIGlmIChvYmouc3VwcG9ydHMpIHtcbiAgICBjc3MgKz0gXCJ9XCI7XG4gIH1cbiAgdmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XG4gIGlmIChzb3VyY2VNYXAgJiYgdHlwZW9mIGJ0b2EgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiLmNvbmNhdChidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpLCBcIiAqL1wiKTtcbiAgfVxuXG4gIC8vIEZvciBvbGQgSUVcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xuICBvcHRpb25zLnN0eWxlVGFnVHJhbnNmb3JtKGNzcywgc3R5bGVFbGVtZW50LCBvcHRpb25zLm9wdGlvbnMpO1xufVxuZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCkge1xuICAvLyBpc3RhbmJ1bCBpZ25vcmUgaWZcbiAgaWYgKHN0eWxlRWxlbWVudC5wYXJlbnROb2RlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHN0eWxlRWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudCk7XG59XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gZG9tQVBJKG9wdGlvbnMpIHtcbiAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHJldHVybiB7XG4gICAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHt9LFxuICAgICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7fVxuICAgIH07XG4gIH1cbiAgdmFyIHN0eWxlRWxlbWVudCA9IG9wdGlvbnMuaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuICByZXR1cm4ge1xuICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKG9iaikge1xuICAgICAgYXBwbHkoc3R5bGVFbGVtZW50LCBvcHRpb25zLCBvYmopO1xuICAgIH0sXG4gICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGVFbGVtZW50KTtcbiAgICB9XG4gIH07XG59XG5tb2R1bGUuZXhwb3J0cyA9IGRvbUFQSTsiLCJcInVzZSBzdHJpY3RcIjtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBzdHlsZVRhZ1RyYW5zZm9ybShjc3MsIHN0eWxlRWxlbWVudCkge1xuICBpZiAoc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZUVsZW1lbnQuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuICB9IGVsc2Uge1xuICAgIHdoaWxlIChzdHlsZUVsZW1lbnQuZmlyc3RDaGlsZCkge1xuICAgICAgc3R5bGVFbGVtZW50LnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKTtcbiAgICB9XG4gICAgc3R5bGVFbGVtZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IHN0eWxlVGFnVHJhbnNmb3JtOyIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0aWQ6IG1vZHVsZUlkLFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4vLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gX193ZWJwYWNrX21vZHVsZXNfXztcblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJ2YXIgc2NyaXB0VXJsO1xuaWYgKF9fd2VicGFja19yZXF1aXJlX18uZy5pbXBvcnRTY3JpcHRzKSBzY3JpcHRVcmwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcubG9jYXRpb24gKyBcIlwiO1xudmFyIGRvY3VtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmRvY3VtZW50O1xuaWYgKCFzY3JpcHRVcmwgJiYgZG9jdW1lbnQpIHtcblx0aWYgKGRvY3VtZW50LmN1cnJlbnRTY3JpcHQpXG5cdFx0c2NyaXB0VXJsID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmM7XG5cdGlmICghc2NyaXB0VXJsKSB7XG5cdFx0dmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcblx0XHRpZihzY3JpcHRzLmxlbmd0aCkge1xuXHRcdFx0dmFyIGkgPSBzY3JpcHRzLmxlbmd0aCAtIDE7XG5cdFx0XHR3aGlsZSAoaSA+IC0xICYmICghc2NyaXB0VXJsIHx8ICEvXmh0dHAocz8pOi8udGVzdChzY3JpcHRVcmwpKSkgc2NyaXB0VXJsID0gc2NyaXB0c1tpLS1dLnNyYztcblx0XHR9XG5cdH1cbn1cbi8vIFdoZW4gc3VwcG9ydGluZyBicm93c2VycyB3aGVyZSBhbiBhdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIHlvdSBtdXN0IHNwZWNpZnkgYW4gb3V0cHV0LnB1YmxpY1BhdGggbWFudWFsbHkgdmlhIGNvbmZpZ3VyYXRpb25cbi8vIG9yIHBhc3MgYW4gZW1wdHkgc3RyaW5nIChcIlwiKSBhbmQgc2V0IHRoZSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyB2YXJpYWJsZSBmcm9tIHlvdXIgY29kZSB0byB1c2UgeW91ciBvd24gbG9naWMuXG5pZiAoIXNjcmlwdFVybCkgdGhyb3cgbmV3IEVycm9yKFwiQXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXJcIik7XG5zY3JpcHRVcmwgPSBzY3JpcHRVcmwucmVwbGFjZSgvIy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcPy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcL1teXFwvXSskLywgXCIvXCIpO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gc2NyaXB0VXJsOyIsIl9fd2VicGFja19yZXF1aXJlX18uYiA9IGRvY3VtZW50LmJhc2VVUkkgfHwgc2VsZi5sb2NhdGlvbi5ocmVmO1xuXG4vLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuLy8gdW5kZWZpbmVkID0gY2h1bmsgbm90IGxvYWRlZCwgbnVsbCA9IGNodW5rIHByZWxvYWRlZC9wcmVmZXRjaGVkXG4vLyBbcmVzb2x2ZSwgcmVqZWN0LCBQcm9taXNlXSA9IGNodW5rIGxvYWRpbmcsIDAgPSBjaHVuayBsb2FkZWRcbnZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG5cdDgxODogMFxufTtcblxuLy8gbm8gY2h1bmsgb24gZGVtYW5kIGxvYWRpbmdcblxuLy8gbm8gcHJlZmV0Y2hpbmdcblxuLy8gbm8gcHJlbG9hZGVkXG5cbi8vIG5vIEhNUlxuXG4vLyBubyBITVIgbWFuaWZlc3RcblxuLy8gbm8gb24gY2h1bmtzIGxvYWRlZFxuXG4vLyBubyBqc29ucCBmdW5jdGlvbiIsIl9fd2VicGFja19yZXF1aXJlX18ubmMgPSB1bmRlZmluZWQ7IiwiXG4gICAgICBpbXBvcnQgQVBJIGZyb20gXCIhLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzXCI7XG4gICAgICBpbXBvcnQgZG9tQVBJIGZyb20gXCIhLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVEb21BUEkuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRGbiBmcm9tIFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydEJ5U2VsZWN0b3IuanNcIjtcbiAgICAgIGltcG9ydCBzZXRBdHRyaWJ1dGVzIGZyb20gXCIhLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc2V0QXR0cmlidXRlc1dpdGhvdXRBdHRyaWJ1dGVzLmpzXCI7XG4gICAgICBpbXBvcnQgaW5zZXJ0U3R5bGVFbGVtZW50IGZyb20gXCIhLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0U3R5bGVFbGVtZW50LmpzXCI7XG4gICAgICBpbXBvcnQgc3R5bGVUYWdUcmFuc2Zvcm1GbiBmcm9tIFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlVGFnVHJhbnNmb3JtLmpzXCI7XG4gICAgICBpbXBvcnQgY29udGVudCwgKiBhcyBuYW1lZEV4cG9ydCBmcm9tIFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL3Jlc2V0LmNzc1wiO1xuICAgICAgXG4gICAgICBcblxudmFyIG9wdGlvbnMgPSB7fTtcblxub3B0aW9ucy5zdHlsZVRhZ1RyYW5zZm9ybSA9IHN0eWxlVGFnVHJhbnNmb3JtRm47XG5vcHRpb25zLnNldEF0dHJpYnV0ZXMgPSBzZXRBdHRyaWJ1dGVzO1xuXG4gICAgICBvcHRpb25zLmluc2VydCA9IGluc2VydEZuLmJpbmQobnVsbCwgXCJoZWFkXCIpO1xuICAgIFxub3B0aW9ucy5kb21BUEkgPSBkb21BUEk7XG5vcHRpb25zLmluc2VydFN0eWxlRWxlbWVudCA9IGluc2VydFN0eWxlRWxlbWVudDtcblxudmFyIHVwZGF0ZSA9IEFQSShjb250ZW50LCBvcHRpb25zKTtcblxuXG5cbmV4cG9ydCAqIGZyb20gXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vcmVzZXQuY3NzXCI7XG4gICAgICAgZXhwb3J0IGRlZmF1bHQgY29udGVudCAmJiBjb250ZW50LmxvY2FscyA/IGNvbnRlbnQubG9jYWxzIDogdW5kZWZpbmVkO1xuIiwiXG4gICAgICBpbXBvcnQgQVBJIGZyb20gXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzXCI7XG4gICAgICBpbXBvcnQgZG9tQVBJIGZyb20gXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVEb21BUEkuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRGbiBmcm9tIFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydEJ5U2VsZWN0b3IuanNcIjtcbiAgICAgIGltcG9ydCBzZXRBdHRyaWJ1dGVzIGZyb20gXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc2V0QXR0cmlidXRlc1dpdGhvdXRBdHRyaWJ1dGVzLmpzXCI7XG4gICAgICBpbXBvcnQgaW5zZXJ0U3R5bGVFbGVtZW50IGZyb20gXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0U3R5bGVFbGVtZW50LmpzXCI7XG4gICAgICBpbXBvcnQgc3R5bGVUYWdUcmFuc2Zvcm1GbiBmcm9tIFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlVGFnVHJhbnNmb3JtLmpzXCI7XG4gICAgICBpbXBvcnQgY29udGVudCwgKiBhcyBuYW1lZEV4cG9ydCBmcm9tIFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL2ZvbnRzLmNzc1wiO1xuICAgICAgXG4gICAgICBcblxudmFyIG9wdGlvbnMgPSB7fTtcblxub3B0aW9ucy5zdHlsZVRhZ1RyYW5zZm9ybSA9IHN0eWxlVGFnVHJhbnNmb3JtRm47XG5vcHRpb25zLnNldEF0dHJpYnV0ZXMgPSBzZXRBdHRyaWJ1dGVzO1xuXG4gICAgICBvcHRpb25zLmluc2VydCA9IGluc2VydEZuLmJpbmQobnVsbCwgXCJoZWFkXCIpO1xuICAgIFxub3B0aW9ucy5kb21BUEkgPSBkb21BUEk7XG5vcHRpb25zLmluc2VydFN0eWxlRWxlbWVudCA9IGluc2VydFN0eWxlRWxlbWVudDtcblxudmFyIHVwZGF0ZSA9IEFQSShjb250ZW50LCBvcHRpb25zKTtcblxuXG5cbmV4cG9ydCAqIGZyb20gXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vZm9udHMuY3NzXCI7XG4gICAgICAgZXhwb3J0IGRlZmF1bHQgY29udGVudCAmJiBjb250ZW50LmxvY2FscyA/IGNvbnRlbnQubG9jYWxzIDogdW5kZWZpbmVkO1xuIiwiXG4gICAgICBpbXBvcnQgQVBJIGZyb20gXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzXCI7XG4gICAgICBpbXBvcnQgZG9tQVBJIGZyb20gXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVEb21BUEkuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRGbiBmcm9tIFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydEJ5U2VsZWN0b3IuanNcIjtcbiAgICAgIGltcG9ydCBzZXRBdHRyaWJ1dGVzIGZyb20gXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc2V0QXR0cmlidXRlc1dpdGhvdXRBdHRyaWJ1dGVzLmpzXCI7XG4gICAgICBpbXBvcnQgaW5zZXJ0U3R5bGVFbGVtZW50IGZyb20gXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0U3R5bGVFbGVtZW50LmpzXCI7XG4gICAgICBpbXBvcnQgc3R5bGVUYWdUcmFuc2Zvcm1GbiBmcm9tIFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlVGFnVHJhbnNmb3JtLmpzXCI7XG4gICAgICBpbXBvcnQgY29udGVudCwgKiBhcyBuYW1lZEV4cG9ydCBmcm9tIFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL2dsb2JhbC5jc3NcIjtcbiAgICAgIFxuICAgICAgXG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuc3R5bGVUYWdUcmFuc2Zvcm0gPSBzdHlsZVRhZ1RyYW5zZm9ybUZuO1xub3B0aW9ucy5zZXRBdHRyaWJ1dGVzID0gc2V0QXR0cmlidXRlcztcblxuICAgICAgb3B0aW9ucy5pbnNlcnQgPSBpbnNlcnRGbi5iaW5kKG51bGwsIFwiaGVhZFwiKTtcbiAgICBcbm9wdGlvbnMuZG9tQVBJID0gZG9tQVBJO1xub3B0aW9ucy5pbnNlcnRTdHlsZUVsZW1lbnQgPSBpbnNlcnRTdHlsZUVsZW1lbnQ7XG5cbnZhciB1cGRhdGUgPSBBUEkoY29udGVudCwgb3B0aW9ucyk7XG5cblxuXG5leHBvcnQgKiBmcm9tIFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL2dsb2JhbC5jc3NcIjtcbiAgICAgICBleHBvcnQgZGVmYXVsdCBjb250ZW50ICYmIGNvbnRlbnQubG9jYWxzID8gY29udGVudC5sb2NhbHMgOiB1bmRlZmluZWQ7XG4iLCJcbiAgICAgIGltcG9ydCBBUEkgZnJvbSBcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIjtcbiAgICAgIGltcG9ydCBkb21BUEkgZnJvbSBcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZURvbUFQSS5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydEZuIGZyb20gXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0QnlTZWxlY3Rvci5qc1wiO1xuICAgICAgaW1wb3J0IHNldEF0dHJpYnV0ZXMgZnJvbSBcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRTdHlsZUVsZW1lbnQgZnJvbSBcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanNcIjtcbiAgICAgIGltcG9ydCBzdHlsZVRhZ1RyYW5zZm9ybUZuIGZyb20gXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanNcIjtcbiAgICAgIGltcG9ydCBjb250ZW50LCAqIGFzIG5hbWVkRXhwb3J0IGZyb20gXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vbW9iaWxlLmNzc1wiO1xuICAgICAgXG4gICAgICBcblxudmFyIG9wdGlvbnMgPSB7fTtcblxub3B0aW9ucy5zdHlsZVRhZ1RyYW5zZm9ybSA9IHN0eWxlVGFnVHJhbnNmb3JtRm47XG5vcHRpb25zLnNldEF0dHJpYnV0ZXMgPSBzZXRBdHRyaWJ1dGVzO1xuXG4gICAgICBvcHRpb25zLmluc2VydCA9IGluc2VydEZuLmJpbmQobnVsbCwgXCJoZWFkXCIpO1xuICAgIFxub3B0aW9ucy5kb21BUEkgPSBkb21BUEk7XG5vcHRpb25zLmluc2VydFN0eWxlRWxlbWVudCA9IGluc2VydFN0eWxlRWxlbWVudDtcblxudmFyIHVwZGF0ZSA9IEFQSShjb250ZW50LCBvcHRpb25zKTtcblxuXG5cbmV4cG9ydCAqIGZyb20gXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vbW9iaWxlLmNzc1wiO1xuICAgICAgIGV4cG9ydCBkZWZhdWx0IGNvbnRlbnQgJiYgY29udGVudC5sb2NhbHMgPyBjb250ZW50LmxvY2FscyA6IHVuZGVmaW5lZDtcbiIsIlxuICAgICAgaW1wb3J0IEFQSSBmcm9tIFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiO1xuICAgICAgaW1wb3J0IGRvbUFQSSBmcm9tIFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlRG9tQVBJLmpzXCI7XG4gICAgICBpbXBvcnQgaW5zZXJ0Rm4gZnJvbSBcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRCeVNlbGVjdG9yLmpzXCI7XG4gICAgICBpbXBvcnQgc2V0QXR0cmlidXRlcyBmcm9tIFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3NldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlcy5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydFN0eWxlRWxlbWVudCBmcm9tIFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydFN0eWxlRWxlbWVudC5qc1wiO1xuICAgICAgaW1wb3J0IHN0eWxlVGFnVHJhbnNmb3JtRm4gZnJvbSBcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZVRhZ1RyYW5zZm9ybS5qc1wiO1xuICAgICAgaW1wb3J0IGNvbnRlbnQsICogYXMgbmFtZWRFeHBvcnQgZnJvbSBcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9kZXNrdG9wLmNzc1wiO1xuICAgICAgXG4gICAgICBcblxudmFyIG9wdGlvbnMgPSB7fTtcblxub3B0aW9ucy5zdHlsZVRhZ1RyYW5zZm9ybSA9IHN0eWxlVGFnVHJhbnNmb3JtRm47XG5vcHRpb25zLnNldEF0dHJpYnV0ZXMgPSBzZXRBdHRyaWJ1dGVzO1xuXG4gICAgICBvcHRpb25zLmluc2VydCA9IGluc2VydEZuLmJpbmQobnVsbCwgXCJoZWFkXCIpO1xuICAgIFxub3B0aW9ucy5kb21BUEkgPSBkb21BUEk7XG5vcHRpb25zLmluc2VydFN0eWxlRWxlbWVudCA9IGluc2VydFN0eWxlRWxlbWVudDtcblxudmFyIHVwZGF0ZSA9IEFQSShjb250ZW50LCBvcHRpb25zKTtcblxuXG5cbmV4cG9ydCAqIGZyb20gXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vZGVza3RvcC5jc3NcIjtcbiAgICAgICBleHBvcnQgZGVmYXVsdCBjb250ZW50ICYmIGNvbnRlbnQubG9jYWxzID8gY29udGVudC5sb2NhbHMgOiB1bmRlZmluZWQ7XG4iLCJcbiAgICAgIGltcG9ydCBBUEkgZnJvbSBcIiEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIjtcbiAgICAgIGltcG9ydCBkb21BUEkgZnJvbSBcIiEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZURvbUFQSS5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydEZuIGZyb20gXCIhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0QnlTZWxlY3Rvci5qc1wiO1xuICAgICAgaW1wb3J0IHNldEF0dHJpYnV0ZXMgZnJvbSBcIiEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRTdHlsZUVsZW1lbnQgZnJvbSBcIiEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanNcIjtcbiAgICAgIGltcG9ydCBzdHlsZVRhZ1RyYW5zZm9ybUZuIGZyb20gXCIhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanNcIjtcbiAgICAgIGltcG9ydCBjb250ZW50LCAqIGFzIG5hbWVkRXhwb3J0IGZyb20gXCIhIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vYmFza2V0LWZvbnRzLmNzc1wiO1xuICAgICAgXG4gICAgICBcblxudmFyIG9wdGlvbnMgPSB7fTtcblxub3B0aW9ucy5zdHlsZVRhZ1RyYW5zZm9ybSA9IHN0eWxlVGFnVHJhbnNmb3JtRm47XG5vcHRpb25zLnNldEF0dHJpYnV0ZXMgPSBzZXRBdHRyaWJ1dGVzO1xuXG4gICAgICBvcHRpb25zLmluc2VydCA9IGluc2VydEZuLmJpbmQobnVsbCwgXCJoZWFkXCIpO1xuICAgIFxub3B0aW9ucy5kb21BUEkgPSBkb21BUEk7XG5vcHRpb25zLmluc2VydFN0eWxlRWxlbWVudCA9IGluc2VydFN0eWxlRWxlbWVudDtcblxudmFyIHVwZGF0ZSA9IEFQSShjb250ZW50LCBvcHRpb25zKTtcblxuXG5cbmV4cG9ydCAqIGZyb20gXCIhIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vYmFza2V0LWZvbnRzLmNzc1wiO1xuICAgICAgIGV4cG9ydCBkZWZhdWx0IGNvbnRlbnQgJiYgY29udGVudC5sb2NhbHMgPyBjb250ZW50LmxvY2FscyA6IHVuZGVmaW5lZDtcbiIsIlxuICAgICAgaW1wb3J0IEFQSSBmcm9tIFwiIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiO1xuICAgICAgaW1wb3J0IGRvbUFQSSBmcm9tIFwiIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlRG9tQVBJLmpzXCI7XG4gICAgICBpbXBvcnQgaW5zZXJ0Rm4gZnJvbSBcIiEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRCeVNlbGVjdG9yLmpzXCI7XG4gICAgICBpbXBvcnQgc2V0QXR0cmlidXRlcyBmcm9tIFwiIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3NldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlcy5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydFN0eWxlRWxlbWVudCBmcm9tIFwiIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydFN0eWxlRWxlbWVudC5qc1wiO1xuICAgICAgaW1wb3J0IHN0eWxlVGFnVHJhbnNmb3JtRm4gZnJvbSBcIiEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZVRhZ1RyYW5zZm9ybS5qc1wiO1xuICAgICAgaW1wb3J0IGNvbnRlbnQsICogYXMgbmFtZWRFeHBvcnQgZnJvbSBcIiEhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9iYXNrZXQuY3NzXCI7XG4gICAgICBcbiAgICAgIFxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLnN0eWxlVGFnVHJhbnNmb3JtID0gc3R5bGVUYWdUcmFuc2Zvcm1Gbjtcbm9wdGlvbnMuc2V0QXR0cmlidXRlcyA9IHNldEF0dHJpYnV0ZXM7XG5cbiAgICAgIG9wdGlvbnMuaW5zZXJ0ID0gaW5zZXJ0Rm4uYmluZChudWxsLCBcImhlYWRcIik7XG4gICAgXG5vcHRpb25zLmRvbUFQSSA9IGRvbUFQSTtcbm9wdGlvbnMuaW5zZXJ0U3R5bGVFbGVtZW50ID0gaW5zZXJ0U3R5bGVFbGVtZW50O1xuXG52YXIgdXBkYXRlID0gQVBJKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cblxuZXhwb3J0ICogZnJvbSBcIiEhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9iYXNrZXQuY3NzXCI7XG4gICAgICAgZXhwb3J0IGRlZmF1bHQgY29udGVudCAmJiBjb250ZW50LmxvY2FscyA/IGNvbnRlbnQubG9jYWxzIDogdW5kZWZpbmVkO1xuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQGZpbGVvdmVydmlldyBGaXJlYmFzZSBjb25zdGFudHMuICBTb21lIG9mIHRoZXNlIChAZGVmaW5lcykgY2FuIGJlIG92ZXJyaWRkZW4gYXQgY29tcGlsZS10aW1lLlxuICovXG5jb25zdCBDT05TVEFOVFMgPSB7XG4gICAgLyoqXG4gICAgICogQGRlZmluZSB7Ym9vbGVhbn0gV2hldGhlciB0aGlzIGlzIHRoZSBjbGllbnQgTm9kZS5qcyBTREsuXG4gICAgICovXG4gICAgTk9ERV9DTElFTlQ6IGZhbHNlLFxuICAgIC8qKlxuICAgICAqIEBkZWZpbmUge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBpcyB0aGUgQWRtaW4gTm9kZS5qcyBTREsuXG4gICAgICovXG4gICAgTk9ERV9BRE1JTjogZmFsc2UsXG4gICAgLyoqXG4gICAgICogRmlyZWJhc2UgU0RLIFZlcnNpb25cbiAgICAgKi9cbiAgICBTREtfVkVSU0lPTjogJyR7SlNDT1JFX1ZFUlNJT059J1xufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVGhyb3dzIGFuIGVycm9yIGlmIHRoZSBwcm92aWRlZCBhc3NlcnRpb24gaXMgZmFsc3lcbiAqL1xuY29uc3QgYXNzZXJ0ID0gZnVuY3Rpb24gKGFzc2VydGlvbiwgbWVzc2FnZSkge1xuICAgIGlmICghYXNzZXJ0aW9uKSB7XG4gICAgICAgIHRocm93IGFzc2VydGlvbkVycm9yKG1lc3NhZ2UpO1xuICAgIH1cbn07XG4vKipcbiAqIFJldHVybnMgYW4gRXJyb3Igb2JqZWN0IHN1aXRhYmxlIGZvciB0aHJvd2luZy5cbiAqL1xuY29uc3QgYXNzZXJ0aW9uRXJyb3IgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgIHJldHVybiBuZXcgRXJyb3IoJ0ZpcmViYXNlIERhdGFiYXNlICgnICtcbiAgICAgICAgQ09OU1RBTlRTLlNES19WRVJTSU9OICtcbiAgICAgICAgJykgSU5URVJOQUwgQVNTRVJUIEZBSUxFRDogJyArXG4gICAgICAgIG1lc3NhZ2UpO1xufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNvbnN0IHN0cmluZ1RvQnl0ZUFycmF5JDEgPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgLy8gVE9ETyh1c2VyKTogVXNlIG5hdGl2ZSBpbXBsZW1lbnRhdGlvbnMgaWYvd2hlbiBhdmFpbGFibGVcbiAgICBjb25zdCBvdXQgPSBbXTtcbiAgICBsZXQgcCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IGMgPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgICAgICAgaWYgKGMgPCAxMjgpIHtcbiAgICAgICAgICAgIG91dFtwKytdID0gYztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjIDwgMjA0OCkge1xuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiA2KSB8IDE5MjtcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoKGMgJiAweGZjMDApID09PSAweGQ4MDAgJiZcbiAgICAgICAgICAgIGkgKyAxIDwgc3RyLmxlbmd0aCAmJlxuICAgICAgICAgICAgKHN0ci5jaGFyQ29kZUF0KGkgKyAxKSAmIDB4ZmMwMCkgPT09IDB4ZGMwMCkge1xuICAgICAgICAgICAgLy8gU3Vycm9nYXRlIFBhaXJcbiAgICAgICAgICAgIGMgPSAweDEwMDAwICsgKChjICYgMHgwM2ZmKSA8PCAxMCkgKyAoc3RyLmNoYXJDb2RlQXQoKytpKSAmIDB4MDNmZik7XG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDE4KSB8IDI0MDtcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDEyKSAmIDYzKSB8IDEyODtcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTIpIHwgMjI0O1xuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvdXQ7XG59O1xuLyoqXG4gKiBUdXJucyBhbiBhcnJheSBvZiBudW1iZXJzIGludG8gdGhlIHN0cmluZyBnaXZlbiBieSB0aGUgY29uY2F0ZW5hdGlvbiBvZiB0aGVcbiAqIGNoYXJhY3RlcnMgdG8gd2hpY2ggdGhlIG51bWJlcnMgY29ycmVzcG9uZC5cbiAqIEBwYXJhbSBieXRlcyBBcnJheSBvZiBudW1iZXJzIHJlcHJlc2VudGluZyBjaGFyYWN0ZXJzLlxuICogQHJldHVybiBTdHJpbmdpZmljYXRpb24gb2YgdGhlIGFycmF5LlxuICovXG5jb25zdCBieXRlQXJyYXlUb1N0cmluZyA9IGZ1bmN0aW9uIChieXRlcykge1xuICAgIC8vIFRPRE8odXNlcik6IFVzZSBuYXRpdmUgaW1wbGVtZW50YXRpb25zIGlmL3doZW4gYXZhaWxhYmxlXG4gICAgY29uc3Qgb3V0ID0gW107XG4gICAgbGV0IHBvcyA9IDAsIGMgPSAwO1xuICAgIHdoaWxlIChwb3MgPCBieXRlcy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgYzEgPSBieXRlc1twb3MrK107XG4gICAgICAgIGlmIChjMSA8IDEyOCkge1xuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGMxKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjMSA+IDE5MSAmJiBjMSA8IDIyNCkge1xuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjMSAmIDMxKSA8PCA2KSB8IChjMiAmIDYzKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYzEgPiAyMzkgJiYgYzEgPCAzNjUpIHtcbiAgICAgICAgICAgIC8vIFN1cnJvZ2F0ZSBQYWlyXG4gICAgICAgICAgICBjb25zdCBjMiA9IGJ5dGVzW3BvcysrXTtcbiAgICAgICAgICAgIGNvbnN0IGMzID0gYnl0ZXNbcG9zKytdO1xuICAgICAgICAgICAgY29uc3QgYzQgPSBieXRlc1twb3MrK107XG4gICAgICAgICAgICBjb25zdCB1ID0gKCgoYzEgJiA3KSA8PCAxOCkgfCAoKGMyICYgNjMpIDw8IDEyKSB8ICgoYzMgJiA2MykgPDwgNikgfCAoYzQgJiA2MykpIC1cbiAgICAgICAgICAgICAgICAweDEwMDAwO1xuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ZDgwMCArICh1ID4+IDEwKSk7XG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHhkYzAwICsgKHUgJiAxMDIzKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBjMiA9IGJ5dGVzW3BvcysrXTtcbiAgICAgICAgICAgIGNvbnN0IGMzID0gYnl0ZXNbcG9zKytdO1xuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgoYzEgJiAxNSkgPDwgMTIpIHwgKChjMiAmIDYzKSA8PCA2KSB8IChjMyAmIDYzKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG91dC5qb2luKCcnKTtcbn07XG4vLyBXZSBkZWZpbmUgaXQgYXMgYW4gb2JqZWN0IGxpdGVyYWwgaW5zdGVhZCBvZiBhIGNsYXNzIGJlY2F1c2UgYSBjbGFzcyBjb21waWxlZCBkb3duIHRvIGVzNSBjYW4ndFxuLy8gYmUgdHJlZXNoYWtlZC4gaHR0cHM6Ly9naXRodWIuY29tL3JvbGx1cC9yb2xsdXAvaXNzdWVzLzE2OTFcbi8vIFN0YXRpYyBsb29rdXAgbWFwcywgbGF6aWx5IHBvcHVsYXRlZCBieSBpbml0XygpXG4vLyBUT0RPKGRsYXJvY3F1ZSk6IERlZmluZSB0aGlzIGFzIGEgY2xhc3MsIHNpbmNlIHdlIG5vIGxvbmdlciB0YXJnZXQgRVM1LlxuY29uc3QgYmFzZTY0ID0ge1xuICAgIC8qKlxuICAgICAqIE1hcHMgYnl0ZXMgdG8gY2hhcmFjdGVycy5cbiAgICAgKi9cbiAgICBieXRlVG9DaGFyTWFwXzogbnVsbCxcbiAgICAvKipcbiAgICAgKiBNYXBzIGNoYXJhY3RlcnMgdG8gYnl0ZXMuXG4gICAgICovXG4gICAgY2hhclRvQnl0ZU1hcF86IG51bGwsXG4gICAgLyoqXG4gICAgICogTWFwcyBieXRlcyB0byB3ZWJzYWZlIGNoYXJhY3RlcnMuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBieXRlVG9DaGFyTWFwV2ViU2FmZV86IG51bGwsXG4gICAgLyoqXG4gICAgICogTWFwcyB3ZWJzYWZlIGNoYXJhY3RlcnMgdG8gYnl0ZXMuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBjaGFyVG9CeXRlTWFwV2ViU2FmZV86IG51bGwsXG4gICAgLyoqXG4gICAgICogT3VyIGRlZmF1bHQgYWxwaGFiZXQsIHNoYXJlZCBiZXR3ZWVuXG4gICAgICogRU5DT0RFRF9WQUxTIGFuZCBFTkNPREVEX1ZBTFNfV0VCU0FGRVxuICAgICAqL1xuICAgIEVOQ09ERURfVkFMU19CQVNFOiAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVonICsgJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6JyArICcwMTIzNDU2Nzg5JyxcbiAgICAvKipcbiAgICAgKiBPdXIgZGVmYXVsdCBhbHBoYWJldC4gVmFsdWUgNjQgKD0pIGlzIHNwZWNpYWw7IGl0IG1lYW5zIFwibm90aGluZy5cIlxuICAgICAqL1xuICAgIGdldCBFTkNPREVEX1ZBTFMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkVOQ09ERURfVkFMU19CQVNFICsgJysvPSc7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBPdXIgd2Vic2FmZSBhbHBoYWJldC5cbiAgICAgKi9cbiAgICBnZXQgRU5DT0RFRF9WQUxTX1dFQlNBRkUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkVOQ09ERURfVkFMU19CQVNFICsgJy1fLic7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoaXMgYnJvd3NlciBzdXBwb3J0cyB0aGUgYXRvYiBhbmQgYnRvYSBmdW5jdGlvbnMuIFRoaXMgZXh0ZW5zaW9uXG4gICAgICogc3RhcnRlZCBhdCBNb3ppbGxhIGJ1dCBpcyBub3cgaW1wbGVtZW50ZWQgYnkgbWFueSBicm93c2Vycy4gV2UgdXNlIHRoZVxuICAgICAqIEFTU1VNRV8qIHZhcmlhYmxlcyB0byBhdm9pZCBwdWxsaW5nIGluIHRoZSBmdWxsIHVzZXJhZ2VudCBkZXRlY3Rpb24gbGlicmFyeVxuICAgICAqIGJ1dCBzdGlsbCBhbGxvd2luZyB0aGUgc3RhbmRhcmQgcGVyLWJyb3dzZXIgY29tcGlsYXRpb25zLlxuICAgICAqXG4gICAgICovXG4gICAgSEFTX05BVElWRV9TVVBQT1JUOiB0eXBlb2YgYXRvYiA9PT0gJ2Z1bmN0aW9uJyxcbiAgICAvKipcbiAgICAgKiBCYXNlNjQtZW5jb2RlIGFuIGFycmF5IG9mIGJ5dGVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGlucHV0IEFuIGFycmF5IG9mIGJ5dGVzIChudW1iZXJzIHdpdGhcbiAgICAgKiAgICAgdmFsdWUgaW4gWzAsIDI1NV0pIHRvIGVuY29kZS5cbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBCb29sZWFuIGluZGljYXRpbmcgd2Ugc2hvdWxkIHVzZSB0aGVcbiAgICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXG4gICAgICogQHJldHVybiBUaGUgYmFzZTY0IGVuY29kZWQgc3RyaW5nLlxuICAgICAqL1xuICAgIGVuY29kZUJ5dGVBcnJheShpbnB1dCwgd2ViU2FmZSkge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcignZW5jb2RlQnl0ZUFycmF5IHRha2VzIGFuIGFycmF5IGFzIGEgcGFyYW1ldGVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbml0XygpO1xuICAgICAgICBjb25zdCBieXRlVG9DaGFyTWFwID0gd2ViU2FmZVxuICAgICAgICAgICAgPyB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1xuICAgICAgICAgICAgOiB0aGlzLmJ5dGVUb0NoYXJNYXBfO1xuICAgICAgICBjb25zdCBvdXRwdXQgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkgKz0gMykge1xuICAgICAgICAgICAgY29uc3QgYnl0ZTEgPSBpbnB1dFtpXTtcbiAgICAgICAgICAgIGNvbnN0IGhhdmVCeXRlMiA9IGkgKyAxIDwgaW5wdXQubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgYnl0ZTIgPSBoYXZlQnl0ZTIgPyBpbnB1dFtpICsgMV0gOiAwO1xuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUzID0gaSArIDIgPCBpbnB1dC5sZW5ndGg7XG4gICAgICAgICAgICBjb25zdCBieXRlMyA9IGhhdmVCeXRlMyA/IGlucHV0W2kgKyAyXSA6IDA7XG4gICAgICAgICAgICBjb25zdCBvdXRCeXRlMSA9IGJ5dGUxID4+IDI7XG4gICAgICAgICAgICBjb25zdCBvdXRCeXRlMiA9ICgoYnl0ZTEgJiAweDAzKSA8PCA0KSB8IChieXRlMiA+PiA0KTtcbiAgICAgICAgICAgIGxldCBvdXRCeXRlMyA9ICgoYnl0ZTIgJiAweDBmKSA8PCAyKSB8IChieXRlMyA+PiA2KTtcbiAgICAgICAgICAgIGxldCBvdXRCeXRlNCA9IGJ5dGUzICYgMHgzZjtcbiAgICAgICAgICAgIGlmICghaGF2ZUJ5dGUzKSB7XG4gICAgICAgICAgICAgICAgb3V0Qnl0ZTQgPSA2NDtcbiAgICAgICAgICAgICAgICBpZiAoIWhhdmVCeXRlMikge1xuICAgICAgICAgICAgICAgICAgICBvdXRCeXRlMyA9IDY0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG91dHB1dC5wdXNoKGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTFdLCBieXRlVG9DaGFyTWFwW291dEJ5dGUyXSwgYnl0ZVRvQ2hhck1hcFtvdXRCeXRlM10sIGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTRdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0cHV0LmpvaW4oJycpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQmFzZTY0LWVuY29kZSBhIHN0cmluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbnB1dCBBIHN0cmluZyB0byBlbmNvZGUuXG4gICAgICogQHBhcmFtIHdlYlNhZmUgSWYgdHJ1ZSwgd2Ugc2hvdWxkIHVzZSB0aGVcbiAgICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXG4gICAgICogQHJldHVybiBUaGUgYmFzZTY0IGVuY29kZWQgc3RyaW5nLlxuICAgICAqL1xuICAgIGVuY29kZVN0cmluZyhpbnB1dCwgd2ViU2FmZSkge1xuICAgICAgICAvLyBTaG9ydGN1dCBmb3IgTW96aWxsYSBicm93c2VycyB0aGF0IGltcGxlbWVudFxuICAgICAgICAvLyBhIG5hdGl2ZSBiYXNlNjQgZW5jb2RlciBpbiB0aGUgZm9ybSBvZiBcImJ0b2EvYXRvYlwiXG4gICAgICAgIGlmICh0aGlzLkhBU19OQVRJVkVfU1VQUE9SVCAmJiAhd2ViU2FmZSkge1xuICAgICAgICAgICAgcmV0dXJuIGJ0b2EoaW5wdXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmVuY29kZUJ5dGVBcnJheShzdHJpbmdUb0J5dGVBcnJheSQxKGlucHV0KSwgd2ViU2FmZSk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBCYXNlNjQtZGVjb2RlIGEgc3RyaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIGlucHV0IHRvIGRlY29kZS5cbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBUcnVlIGlmIHdlIHNob3VsZCB1c2UgdGhlXG4gICAgICogICAgIGFsdGVybmF0aXZlIGFscGhhYmV0LlxuICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZGVjb2RlZCB2YWx1ZS5cbiAgICAgKi9cbiAgICBkZWNvZGVTdHJpbmcoaW5wdXQsIHdlYlNhZmUpIHtcbiAgICAgICAgLy8gU2hvcnRjdXQgZm9yIE1vemlsbGEgYnJvd3NlcnMgdGhhdCBpbXBsZW1lbnRcbiAgICAgICAgLy8gYSBuYXRpdmUgYmFzZTY0IGVuY29kZXIgaW4gdGhlIGZvcm0gb2YgXCJidG9hL2F0b2JcIlxuICAgICAgICBpZiAodGhpcy5IQVNfTkFUSVZFX1NVUFBPUlQgJiYgIXdlYlNhZmUpIHtcbiAgICAgICAgICAgIHJldHVybiBhdG9iKGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYnl0ZUFycmF5VG9TdHJpbmcodGhpcy5kZWNvZGVTdHJpbmdUb0J5dGVBcnJheShpbnB1dCwgd2ViU2FmZSkpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQmFzZTY0LWRlY29kZSBhIHN0cmluZy5cbiAgICAgKlxuICAgICAqIEluIGJhc2UtNjQgZGVjb2RpbmcsIGdyb3VwcyBvZiBmb3VyIGNoYXJhY3RlcnMgYXJlIGNvbnZlcnRlZCBpbnRvIHRocmVlXG4gICAgICogYnl0ZXMuICBJZiB0aGUgZW5jb2RlciBkaWQgbm90IGFwcGx5IHBhZGRpbmcsIHRoZSBpbnB1dCBsZW5ndGggbWF5IG5vdFxuICAgICAqIGJlIGEgbXVsdGlwbGUgb2YgNC5cbiAgICAgKlxuICAgICAqIEluIHRoaXMgY2FzZSwgdGhlIGxhc3QgZ3JvdXAgd2lsbCBoYXZlIGZld2VyIHRoYW4gNCBjaGFyYWN0ZXJzLCBhbmRcbiAgICAgKiBwYWRkaW5nIHdpbGwgYmUgaW5mZXJyZWQuICBJZiB0aGUgZ3JvdXAgaGFzIG9uZSBvciB0d28gY2hhcmFjdGVycywgaXQgZGVjb2Rlc1xuICAgICAqIHRvIG9uZSBieXRlLiAgSWYgdGhlIGdyb3VwIGhhcyB0aHJlZSBjaGFyYWN0ZXJzLCBpdCBkZWNvZGVzIHRvIHR3byBieXRlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbnB1dCBJbnB1dCB0byBkZWNvZGUuXG4gICAgICogQHBhcmFtIHdlYlNhZmUgVHJ1ZSBpZiB3ZSBzaG91bGQgdXNlIHRoZSB3ZWItc2FmZSBhbHBoYWJldC5cbiAgICAgKiBAcmV0dXJuIGJ5dGVzIHJlcHJlc2VudGluZyB0aGUgZGVjb2RlZCB2YWx1ZS5cbiAgICAgKi9cbiAgICBkZWNvZGVTdHJpbmdUb0J5dGVBcnJheShpbnB1dCwgd2ViU2FmZSkge1xuICAgICAgICB0aGlzLmluaXRfKCk7XG4gICAgICAgIGNvbnN0IGNoYXJUb0J5dGVNYXAgPSB3ZWJTYWZlXG4gICAgICAgICAgICA/IHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfXG4gICAgICAgICAgICA6IHRoaXMuY2hhclRvQnl0ZU1hcF87XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDspIHtcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUxID0gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSsrKV07XG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTIgPSBpIDwgaW5wdXQubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgYnl0ZTIgPSBoYXZlQnl0ZTIgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiAwO1xuICAgICAgICAgICAgKytpO1xuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUzID0gaSA8IGlucHV0Lmxlbmd0aDtcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUzID0gaGF2ZUJ5dGUzID8gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSldIDogNjQ7XG4gICAgICAgICAgICArK2k7XG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTQgPSBpIDwgaW5wdXQubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgYnl0ZTQgPSBoYXZlQnl0ZTQgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiA2NDtcbiAgICAgICAgICAgICsraTtcbiAgICAgICAgICAgIGlmIChieXRlMSA9PSBudWxsIHx8IGJ5dGUyID09IG51bGwgfHwgYnl0ZTMgPT0gbnVsbCB8fCBieXRlNCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IERlY29kZUJhc2U2NFN0cmluZ0Vycm9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBvdXRCeXRlMSA9IChieXRlMSA8PCAyKSB8IChieXRlMiA+PiA0KTtcbiAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUxKTtcbiAgICAgICAgICAgIGlmIChieXRlMyAhPT0gNjQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRCeXRlMiA9ICgoYnl0ZTIgPDwgNCkgJiAweGYwKSB8IChieXRlMyA+PiAyKTtcbiAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChvdXRCeXRlMik7XG4gICAgICAgICAgICAgICAgaWYgKGJ5dGU0ICE9PSA2NCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvdXRCeXRlMyA9ICgoYnl0ZTMgPDwgNikgJiAweGMwKSB8IGJ5dGU0O1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChvdXRCeXRlMyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBMYXp5IHN0YXRpYyBpbml0aWFsaXphdGlvbiBmdW5jdGlvbi4gQ2FsbGVkIGJlZm9yZVxuICAgICAqIGFjY2Vzc2luZyBhbnkgb2YgdGhlIHN0YXRpYyBtYXAgdmFyaWFibGVzLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgaW5pdF8oKSB7XG4gICAgICAgIGlmICghdGhpcy5ieXRlVG9DaGFyTWFwXykge1xuICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwXyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwXyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV8gPSB7fTtcbiAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfID0ge307XG4gICAgICAgICAgICAvLyBXZSB3YW50IHF1aWNrIG1hcHBpbmdzIGJhY2sgYW5kIGZvcnRoLCBzbyB3ZSBwcmVjb21wdXRlIHR3byBtYXBzLlxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLkVOQ09ERURfVkFMUy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcF9baV0gPSB0aGlzLkVOQ09ERURfVkFMUy5jaGFyQXQoaSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwX1t0aGlzLmJ5dGVUb0NoYXJNYXBfW2ldXSA9IGk7XG4gICAgICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9baV0gPSB0aGlzLkVOQ09ERURfVkFMU19XRUJTQUZFLmNoYXJBdChpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlX1t0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1tpXV0gPSBpO1xuICAgICAgICAgICAgICAgIC8vIEJlIGZvcmdpdmluZyB3aGVuIGRlY29kaW5nIGFuZCBjb3JyZWN0bHkgZGVjb2RlIGJvdGggZW5jb2RpbmdzLlxuICAgICAgICAgICAgICAgIGlmIChpID49IHRoaXMuRU5DT0RFRF9WQUxTX0JBU0UubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcF9bdGhpcy5FTkNPREVEX1ZBTFNfV0VCU0FGRS5jaGFyQXQoaSldID0gaTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9bdGhpcy5FTkNPREVEX1ZBTFMuY2hhckF0KGkpXSA9IGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcbi8qKlxuICogQW4gZXJyb3IgZW5jb3VudGVyZWQgd2hpbGUgZGVjb2RpbmcgYmFzZTY0IHN0cmluZy5cbiAqL1xuY2xhc3MgRGVjb2RlQmFzZTY0U3RyaW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMubmFtZSA9ICdEZWNvZGVCYXNlNjRTdHJpbmdFcnJvcic7XG4gICAgfVxufVxuLyoqXG4gKiBVUkwtc2FmZSBiYXNlNjQgZW5jb2RpbmdcbiAqL1xuY29uc3QgYmFzZTY0RW5jb2RlID0gZnVuY3Rpb24gKHN0cikge1xuICAgIGNvbnN0IHV0ZjhCeXRlcyA9IHN0cmluZ1RvQnl0ZUFycmF5JDEoc3RyKTtcbiAgICByZXR1cm4gYmFzZTY0LmVuY29kZUJ5dGVBcnJheSh1dGY4Qnl0ZXMsIHRydWUpO1xufTtcbi8qKlxuICogVVJMLXNhZmUgYmFzZTY0IGVuY29kaW5nICh3aXRob3V0IFwiLlwiIHBhZGRpbmcgaW4gdGhlIGVuZCkuXG4gKiBlLmcuIFVzZWQgaW4gSlNPTiBXZWIgVG9rZW4gKEpXVCkgcGFydHMuXG4gKi9cbmNvbnN0IGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nID0gZnVuY3Rpb24gKHN0cikge1xuICAgIC8vIFVzZSBiYXNlNjR1cmwgZW5jb2RpbmcgYW5kIHJlbW92ZSBwYWRkaW5nIGluIHRoZSBlbmQgKGRvdCBjaGFyYWN0ZXJzKS5cbiAgICByZXR1cm4gYmFzZTY0RW5jb2RlKHN0cikucmVwbGFjZSgvXFwuL2csICcnKTtcbn07XG4vKipcbiAqIFVSTC1zYWZlIGJhc2U2NCBkZWNvZGluZ1xuICpcbiAqIE5PVEU6IERPIE5PVCB1c2UgdGhlIGdsb2JhbCBhdG9iKCkgZnVuY3Rpb24gLSBpdCBkb2VzIE5PVCBzdXBwb3J0IHRoZVxuICogYmFzZTY0VXJsIHZhcmlhbnQgZW5jb2RpbmcuXG4gKlxuICogQHBhcmFtIHN0ciBUbyBiZSBkZWNvZGVkXG4gKiBAcmV0dXJuIERlY29kZWQgcmVzdWx0LCBpZiBwb3NzaWJsZVxuICovXG5jb25zdCBiYXNlNjREZWNvZGUgPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGJhc2U2NC5kZWNvZGVTdHJpbmcoc3RyLCB0cnVlKTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignYmFzZTY0RGVjb2RlIGZhaWxlZDogJywgZSk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRG8gYSBkZWVwLWNvcHkgb2YgYmFzaWMgSmF2YVNjcmlwdCBPYmplY3RzIG9yIEFycmF5cy5cbiAqL1xuZnVuY3Rpb24gZGVlcENvcHkodmFsdWUpIHtcbiAgICByZXR1cm4gZGVlcEV4dGVuZCh1bmRlZmluZWQsIHZhbHVlKTtcbn1cbi8qKlxuICogQ29weSBwcm9wZXJ0aWVzIGZyb20gc291cmNlIHRvIHRhcmdldCAocmVjdXJzaXZlbHkgYWxsb3dzIGV4dGVuc2lvblxuICogb2YgT2JqZWN0cyBhbmQgQXJyYXlzKS4gIFNjYWxhciB2YWx1ZXMgaW4gdGhlIHRhcmdldCBhcmUgb3Zlci13cml0dGVuLlxuICogSWYgdGFyZ2V0IGlzIHVuZGVmaW5lZCwgYW4gb2JqZWN0IG9mIHRoZSBhcHByb3ByaWF0ZSB0eXBlIHdpbGwgYmUgY3JlYXRlZFxuICogKGFuZCByZXR1cm5lZCkuXG4gKlxuICogV2UgcmVjdXJzaXZlbHkgY29weSBhbGwgY2hpbGQgcHJvcGVydGllcyBvZiBwbGFpbiBPYmplY3RzIGluIHRoZSBzb3VyY2UtIHNvXG4gKiB0aGF0IG5hbWVzcGFjZS0gbGlrZSBkaWN0aW9uYXJpZXMgYXJlIG1lcmdlZC5cbiAqXG4gKiBOb3RlIHRoYXQgdGhlIHRhcmdldCBjYW4gYmUgYSBmdW5jdGlvbiwgaW4gd2hpY2ggY2FzZSB0aGUgcHJvcGVydGllcyBpblxuICogdGhlIHNvdXJjZSBPYmplY3QgYXJlIGNvcGllZCBvbnRvIGl0IGFzIHN0YXRpYyBwcm9wZXJ0aWVzIG9mIHRoZSBGdW5jdGlvbi5cbiAqXG4gKiBOb3RlOiB3ZSBkb24ndCBtZXJnZSBfX3Byb3RvX18gdG8gcHJldmVudCBwcm90b3R5cGUgcG9sbHV0aW9uXG4gKi9cbmZ1bmN0aW9uIGRlZXBFeHRlbmQodGFyZ2V0LCBzb3VyY2UpIHtcbiAgICBpZiAoIShzb3VyY2UgaW5zdGFuY2VvZiBPYmplY3QpKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2U7XG4gICAgfVxuICAgIHN3aXRjaCAoc291cmNlLmNvbnN0cnVjdG9yKSB7XG4gICAgICAgIGNhc2UgRGF0ZTpcbiAgICAgICAgICAgIC8vIFRyZWF0IERhdGVzIGxpa2Ugc2NhbGFyczsgaWYgdGhlIHRhcmdldCBkYXRlIG9iamVjdCBoYWQgYW55IGNoaWxkXG4gICAgICAgICAgICAvLyBwcm9wZXJ0aWVzIC0gdGhleSB3aWxsIGJlIGxvc3QhXG4gICAgICAgICAgICBjb25zdCBkYXRlVmFsdWUgPSBzb3VyY2U7XG4gICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZVZhbHVlLmdldFRpbWUoKSk7XG4gICAgICAgIGNhc2UgT2JqZWN0OlxuICAgICAgICAgICAgaWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0ge307XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBBcnJheTpcbiAgICAgICAgICAgIC8vIEFsd2F5cyBjb3B5IHRoZSBhcnJheSBzb3VyY2UgYW5kIG92ZXJ3cml0ZSB0aGUgdGFyZ2V0LlxuICAgICAgICAgICAgdGFyZ2V0ID0gW107XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIC8vIE5vdCBhIHBsYWluIE9iamVjdCAtIHRyZWF0IGl0IGFzIGEgc2NhbGFyLlxuICAgICAgICAgICAgcmV0dXJuIHNvdXJjZTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBwcm9wIGluIHNvdXJjZSkge1xuICAgICAgICAvLyB1c2UgaXNWYWxpZEtleSB0byBndWFyZCBhZ2FpbnN0IHByb3RvdHlwZSBwb2xsdXRpb24uIFNlZSBodHRwczovL3NueWsuaW8vdnVsbi9TTllLLUpTLUxPREFTSC00NTAyMDJcbiAgICAgICAgaWYgKCFzb3VyY2UuaGFzT3duUHJvcGVydHkocHJvcCkgfHwgIWlzVmFsaWRLZXkocHJvcCkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHRhcmdldFtwcm9wXSA9IGRlZXBFeHRlbmQodGFyZ2V0W3Byb3BdLCBzb3VyY2VbcHJvcF0pO1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xufVxuZnVuY3Rpb24gaXNWYWxpZEtleShrZXkpIHtcbiAgICByZXR1cm4ga2V5ICE9PSAnX19wcm90b19fJztcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUG9seWZpbGwgZm9yIGBnbG9iYWxUaGlzYCBvYmplY3QuXG4gKiBAcmV0dXJucyB0aGUgYGdsb2JhbFRoaXNgIG9iamVjdCBmb3IgdGhlIGdpdmVuIGVudmlyb25tZW50LlxuICogQHB1YmxpY1xuICovXG5mdW5jdGlvbiBnZXRHbG9iYWwoKSB7XG4gICAgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiB3aW5kb3c7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gZ2xvYmFsO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBsb2NhdGUgZ2xvYmFsIG9iamVjdC4nKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNvbnN0IGdldERlZmF1bHRzRnJvbUdsb2JhbCA9ICgpID0+IGdldEdsb2JhbCgpLl9fRklSRUJBU0VfREVGQVVMVFNfXztcbi8qKlxuICogQXR0ZW1wdCB0byByZWFkIGRlZmF1bHRzIGZyb20gYSBKU09OIHN0cmluZyBwcm92aWRlZCB0b1xuICogcHJvY2VzcyguKWVudiguKV9fRklSRUJBU0VfREVGQVVMVFNfXyBvciBhIEpTT04gZmlsZSB3aG9zZSBwYXRoIGlzIGluXG4gKiBwcm9jZXNzKC4pZW52KC4pX19GSVJFQkFTRV9ERUZBVUxUU19QQVRIX19cbiAqIFRoZSBkb3RzIGFyZSBpbiBwYXJlbnMgYmVjYXVzZSBjZXJ0YWluIGNvbXBpbGVycyAoVml0ZT8pIGNhbm5vdFxuICogaGFuZGxlIHNlZWluZyB0aGF0IHZhcmlhYmxlIGluIGNvbW1lbnRzLlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvaXNzdWVzLzY4MzhcbiAqL1xuY29uc3QgZ2V0RGVmYXVsdHNGcm9tRW52VmFyaWFibGUgPSAoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBwcm9jZXNzID09PSAndW5kZWZpbmVkJyB8fCB0eXBlb2YgcHJvY2Vzcy5lbnYgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZGVmYXVsdHNKc29uU3RyaW5nID0gcHJvY2Vzcy5lbnYuX19GSVJFQkFTRV9ERUZBVUxUU19fO1xuICAgIGlmIChkZWZhdWx0c0pzb25TdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoZGVmYXVsdHNKc29uU3RyaW5nKTtcbiAgICB9XG59O1xuY29uc3QgZ2V0RGVmYXVsdHNGcm9tQ29va2llID0gKCkgPT4ge1xuICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IG1hdGNoO1xuICAgIHRyeSB7XG4gICAgICAgIG1hdGNoID0gZG9jdW1lbnQuY29va2llLm1hdGNoKC9fX0ZJUkVCQVNFX0RFRkFVTFRTX189KFteO10rKS8pO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICAvLyBTb21lIGVudmlyb25tZW50cyBzdWNoIGFzIEFuZ3VsYXIgVW5pdmVyc2FsIFNTUiBoYXZlIGFcbiAgICAgICAgLy8gYGRvY3VtZW50YCBvYmplY3QgYnV0IGVycm9yIG9uIGFjY2Vzc2luZyBgZG9jdW1lbnQuY29va2llYC5cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBkZWNvZGVkID0gbWF0Y2ggJiYgYmFzZTY0RGVjb2RlKG1hdGNoWzFdKTtcbiAgICByZXR1cm4gZGVjb2RlZCAmJiBKU09OLnBhcnNlKGRlY29kZWQpO1xufTtcbi8qKlxuICogR2V0IHRoZSBfX0ZJUkVCQVNFX0RFRkFVTFRTX18gb2JqZWN0LiBJdCBjaGVja3MgaW4gb3JkZXI6XG4gKiAoMSkgaWYgc3VjaCBhbiBvYmplY3QgZXhpc3RzIGFzIGEgcHJvcGVydHkgb2YgYGdsb2JhbFRoaXNgXG4gKiAoMikgaWYgc3VjaCBhbiBvYmplY3Qgd2FzIHByb3ZpZGVkIG9uIGEgc2hlbGwgZW52aXJvbm1lbnQgdmFyaWFibGVcbiAqICgzKSBpZiBzdWNoIGFuIG9iamVjdCBleGlzdHMgaW4gYSBjb29raWVcbiAqIEBwdWJsaWNcbiAqL1xuY29uc3QgZ2V0RGVmYXVsdHMgPSAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIChnZXREZWZhdWx0c0Zyb21HbG9iYWwoKSB8fFxuICAgICAgICAgICAgZ2V0RGVmYXVsdHNGcm9tRW52VmFyaWFibGUoKSB8fFxuICAgICAgICAgICAgZ2V0RGVmYXVsdHNGcm9tQ29va2llKCkpO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICAvKipcbiAgICAgICAgICogQ2F0Y2gtYWxsIGZvciBiZWluZyB1bmFibGUgdG8gZ2V0IF9fRklSRUJBU0VfREVGQVVMVFNfXyBkdWVcbiAgICAgICAgICogdG8gYW55IGVudmlyb25tZW50IGNhc2Ugd2UgaGF2ZSBub3QgYWNjb3VudGVkIGZvci4gTG9nIHRvXG4gICAgICAgICAqIGluZm8gaW5zdGVhZCBvZiBzd2FsbG93aW5nIHNvIHdlIGNhbiBmaW5kIHRoZXNlIHVua25vd24gY2FzZXNcbiAgICAgICAgICogYW5kIGFkZCBwYXRocyBmb3IgdGhlbSBpZiBuZWVkZWQuXG4gICAgICAgICAqL1xuICAgICAgICBjb25zb2xlLmluZm8oYFVuYWJsZSB0byBnZXQgX19GSVJFQkFTRV9ERUZBVUxUU19fIGR1ZSB0bzogJHtlfWApO1xuICAgICAgICByZXR1cm47XG4gICAgfVxufTtcbi8qKlxuICogUmV0dXJucyBlbXVsYXRvciBob3N0IHN0b3JlZCBpbiB0aGUgX19GSVJFQkFTRV9ERUZBVUxUU19fIG9iamVjdFxuICogZm9yIHRoZSBnaXZlbiBwcm9kdWN0LlxuICogQHJldHVybnMgYSBVUkwgaG9zdCBmb3JtYXR0ZWQgbGlrZSBgMTI3LjAuMC4xOjk5OTlgIG9yIGBbOjoxXTo0MDAwYCBpZiBhdmFpbGFibGVcbiAqIEBwdWJsaWNcbiAqL1xuY29uc3QgZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdCA9IChwcm9kdWN0TmFtZSkgPT4geyB2YXIgX2EsIF9iOyByZXR1cm4gKF9iID0gKF9hID0gZ2V0RGVmYXVsdHMoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmVtdWxhdG9ySG9zdHMpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYltwcm9kdWN0TmFtZV07IH07XG4vKipcbiAqIFJldHVybnMgZW11bGF0b3IgaG9zdG5hbWUgYW5kIHBvcnQgc3RvcmVkIGluIHRoZSBfX0ZJUkVCQVNFX0RFRkFVTFRTX18gb2JqZWN0XG4gKiBmb3IgdGhlIGdpdmVuIHByb2R1Y3QuXG4gKiBAcmV0dXJucyBhIHBhaXIgb2YgaG9zdG5hbWUgYW5kIHBvcnQgbGlrZSBgW1wiOjoxXCIsIDQwMDBdYCBpZiBhdmFpbGFibGVcbiAqIEBwdWJsaWNcbiAqL1xuY29uc3QgZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdG5hbWVBbmRQb3J0ID0gKHByb2R1Y3ROYW1lKSA9PiB7XG4gICAgY29uc3QgaG9zdCA9IGdldERlZmF1bHRFbXVsYXRvckhvc3QocHJvZHVjdE5hbWUpO1xuICAgIGlmICghaG9zdCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBzZXBhcmF0b3JJbmRleCA9IGhvc3QubGFzdEluZGV4T2YoJzonKTsgLy8gRmluZGluZyB0aGUgbGFzdCBzaW5jZSBJUHY2IGFkZHIgYWxzbyBoYXMgY29sb25zLlxuICAgIGlmIChzZXBhcmF0b3JJbmRleCA8PSAwIHx8IHNlcGFyYXRvckluZGV4ICsgMSA9PT0gaG9zdC5sZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGhvc3QgJHtob3N0fSB3aXRoIG5vIHNlcGFyYXRlIGhvc3RuYW1lIGFuZCBwb3J0IWApO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzXG4gICAgY29uc3QgcG9ydCA9IHBhcnNlSW50KGhvc3Quc3Vic3RyaW5nKHNlcGFyYXRvckluZGV4ICsgMSksIDEwKTtcbiAgICBpZiAoaG9zdFswXSA9PT0gJ1snKSB7XG4gICAgICAgIC8vIEJyYWNrZXQtcXVvdGVkIGBbaXB2NmFkZHJdOnBvcnRgID0+IHJldHVybiBcImlwdjZhZGRyXCIgKHdpdGhvdXQgYnJhY2tldHMpLlxuICAgICAgICByZXR1cm4gW2hvc3Quc3Vic3RyaW5nKDEsIHNlcGFyYXRvckluZGV4IC0gMSksIHBvcnRdO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFtob3N0LnN1YnN0cmluZygwLCBzZXBhcmF0b3JJbmRleCksIHBvcnRdO1xuICAgIH1cbn07XG4vKipcbiAqIFJldHVybnMgRmlyZWJhc2UgYXBwIGNvbmZpZyBzdG9yZWQgaW4gdGhlIF9fRklSRUJBU0VfREVGQVVMVFNfXyBvYmplY3QuXG4gKiBAcHVibGljXG4gKi9cbmNvbnN0IGdldERlZmF1bHRBcHBDb25maWcgPSAoKSA9PiB7IHZhciBfYTsgcmV0dXJuIChfYSA9IGdldERlZmF1bHRzKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jb25maWc7IH07XG4vKipcbiAqIFJldHVybnMgYW4gZXhwZXJpbWVudGFsIHNldHRpbmcgb24gdGhlIF9fRklSRUJBU0VfREVGQVVMVFNfXyBvYmplY3QgKHByb3BlcnRpZXNcbiAqIHByZWZpeGVkIGJ5IFwiX1wiKVxuICogQHB1YmxpY1xuICovXG5jb25zdCBnZXRFeHBlcmltZW50YWxTZXR0aW5nID0gKG5hbWUpID0+IHsgdmFyIF9hOyByZXR1cm4gKF9hID0gZ2V0RGVmYXVsdHMoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hW2BfJHtuYW1lfWBdOyB9O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY2xhc3MgRGVmZXJyZWQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnJlamVjdCA9ICgpID0+IHsgfTtcbiAgICAgICAgdGhpcy5yZXNvbHZlID0gKCkgPT4geyB9O1xuICAgICAgICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmUgPSByZXNvbHZlO1xuICAgICAgICAgICAgdGhpcy5yZWplY3QgPSByZWplY3Q7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBPdXIgQVBJIGludGVybmFscyBhcmUgbm90IHByb21pc2lmaWVkIGFuZCBjYW5ub3QgYmVjYXVzZSBvdXIgY2FsbGJhY2sgQVBJcyBoYXZlIHN1YnRsZSBleHBlY3RhdGlvbnMgYXJvdW5kXG4gICAgICogaW52b2tpbmcgcHJvbWlzZXMgaW5saW5lLCB3aGljaCBQcm9taXNlcyBhcmUgZm9yYmlkZGVuIHRvIGRvLiBUaGlzIG1ldGhvZCBhY2NlcHRzIGFuIG9wdGlvbmFsIG5vZGUtc3R5bGUgY2FsbGJhY2tcbiAgICAgKiBhbmQgcmV0dXJucyBhIG5vZGUtc3R5bGUgY2FsbGJhY2sgd2hpY2ggd2lsbCByZXNvbHZlIG9yIHJlamVjdCB0aGUgRGVmZXJyZWQncyBwcm9taXNlLlxuICAgICAqL1xuICAgIHdyYXBDYWxsYmFjayhjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gKGVycm9yLCB2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXNvbHZlKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAvLyBBdHRhY2hpbmcgbm9vcCBoYW5kbGVyIGp1c3QgaW4gY2FzZSBkZXZlbG9wZXIgd2Fzbid0IGV4cGVjdGluZ1xuICAgICAgICAgICAgICAgIC8vIHByb21pc2VzXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9taXNlLmNhdGNoKCgpID0+IHsgfSk7XG4gICAgICAgICAgICAgICAgLy8gU29tZSBvZiBvdXIgY2FsbGJhY2tzIGRvbid0IGV4cGVjdCBhIHZhbHVlIGFuZCBvdXIgb3duIHRlc3RzXG4gICAgICAgICAgICAgICAgLy8gYXNzZXJ0IHRoYXQgdGhlIHBhcmFtZXRlciBsZW5ndGggaXMgMVxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjay5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlTW9ja1VzZXJUb2tlbih0b2tlbiwgcHJvamVjdElkKSB7XG4gICAgaWYgKHRva2VuLnVpZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBcInVpZFwiIGZpZWxkIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQgYnkgbW9ja1VzZXJUb2tlbi4gUGxlYXNlIHVzZSBcInN1YlwiIGluc3RlYWQgZm9yIEZpcmViYXNlIEF1dGggVXNlciBJRC4nKTtcbiAgICB9XG4gICAgLy8gVW5zZWN1cmVkIEpXVHMgdXNlIFwibm9uZVwiIGFzIHRoZSBhbGdvcml0aG0uXG4gICAgY29uc3QgaGVhZGVyID0ge1xuICAgICAgICBhbGc6ICdub25lJyxcbiAgICAgICAgdHlwZTogJ0pXVCdcbiAgICB9O1xuICAgIGNvbnN0IHByb2plY3QgPSBwcm9qZWN0SWQgfHwgJ2RlbW8tcHJvamVjdCc7XG4gICAgY29uc3QgaWF0ID0gdG9rZW4uaWF0IHx8IDA7XG4gICAgY29uc3Qgc3ViID0gdG9rZW4uc3ViIHx8IHRva2VuLnVzZXJfaWQ7XG4gICAgaWYgKCFzdWIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwibW9ja1VzZXJUb2tlbiBtdXN0IGNvbnRhaW4gJ3N1Yicgb3IgJ3VzZXJfaWQnIGZpZWxkIVwiKTtcbiAgICB9XG4gICAgY29uc3QgcGF5bG9hZCA9IE9iamVjdC5hc3NpZ24oeyBcbiAgICAgICAgLy8gU2V0IGFsbCByZXF1aXJlZCBmaWVsZHMgdG8gZGVjZW50IGRlZmF1bHRzXG4gICAgICAgIGlzczogYGh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS8ke3Byb2plY3R9YCwgYXVkOiBwcm9qZWN0LCBpYXQsIGV4cDogaWF0ICsgMzYwMCwgYXV0aF90aW1lOiBpYXQsIHN1YiwgdXNlcl9pZDogc3ViLCBmaXJlYmFzZToge1xuICAgICAgICAgICAgc2lnbl9pbl9wcm92aWRlcjogJ2N1c3RvbScsXG4gICAgICAgICAgICBpZGVudGl0aWVzOiB7fVxuICAgICAgICB9IH0sIHRva2VuKTtcbiAgICAvLyBVbnNlY3VyZWQgSldUcyB1c2UgdGhlIGVtcHR5IHN0cmluZyBhcyBhIHNpZ25hdHVyZS5cbiAgICBjb25zdCBzaWduYXR1cmUgPSAnJztcbiAgICByZXR1cm4gW1xuICAgICAgICBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhKU09OLnN0cmluZ2lmeShoZWFkZXIpKSxcbiAgICAgICAgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcoSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkpLFxuICAgICAgICBzaWduYXR1cmVcbiAgICBdLmpvaW4oJy4nKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmV0dXJucyBuYXZpZ2F0b3IudXNlckFnZW50IHN0cmluZyBvciAnJyBpZiBpdCdzIG5vdCBkZWZpbmVkLlxuICogQHJldHVybiB1c2VyIGFnZW50IHN0cmluZ1xuICovXG5mdW5jdGlvbiBnZXRVQSgpIHtcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgdHlwZW9mIG5hdmlnYXRvclsndXNlckFnZW50J10gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBuYXZpZ2F0b3JbJ3VzZXJBZ2VudCddO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbn1cbi8qKlxuICogRGV0ZWN0IENvcmRvdmEgLyBQaG9uZUdhcCAvIElvbmljIGZyYW1ld29ya3Mgb24gYSBtb2JpbGUgZGV2aWNlLlxuICpcbiAqIERlbGliZXJhdGVseSBkb2VzIG5vdCByZWx5IG9uIGNoZWNraW5nIGBmaWxlOi8vYCBVUkxzIChhcyB0aGlzIGZhaWxzIFBob25lR2FwXG4gKiBpbiB0aGUgUmlwcGxlIGVtdWxhdG9yKSBub3IgQ29yZG92YSBgb25EZXZpY2VSZWFkeWAsIHdoaWNoIHdvdWxkIG5vcm1hbGx5XG4gKiB3YWl0IGZvciBhIGNhbGxiYWNrLlxuICovXG5mdW5jdGlvbiBpc01vYmlsZUNvcmRvdmEoKSB7XG4gICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAvLyBAdHMtaWdub3JlIFNldHRpbmcgdXAgYW4gYnJvYWRseSBhcHBsaWNhYmxlIGluZGV4IHNpZ25hdHVyZSBmb3IgV2luZG93XG4gICAgICAgIC8vIGp1c3QgdG8gZGVhbCB3aXRoIHRoaXMgY2FzZSB3b3VsZCBwcm9iYWJseSBiZSBhIGJhZCBpZGVhLlxuICAgICAgICAhISh3aW5kb3dbJ2NvcmRvdmEnXSB8fCB3aW5kb3dbJ3Bob25lZ2FwJ10gfHwgd2luZG93WydQaG9uZUdhcCddKSAmJlxuICAgICAgICAvaW9zfGlwaG9uZXxpcG9kfGlwYWR8YW5kcm9pZHxibGFja2JlcnJ5fGllbW9iaWxlL2kudGVzdChnZXRVQSgpKSk7XG59XG4vKipcbiAqIERldGVjdCBOb2RlLmpzLlxuICpcbiAqIEByZXR1cm4gdHJ1ZSBpZiBOb2RlLmpzIGVudmlyb25tZW50IGlzIGRldGVjdGVkIG9yIHNwZWNpZmllZC5cbiAqL1xuLy8gTm9kZSBkZXRlY3Rpb24gbG9naWMgZnJvbTogaHR0cHM6Ly9naXRodWIuY29tL2lsaWFrYW4vZGV0ZWN0LW5vZGUvXG5mdW5jdGlvbiBpc05vZGUoKSB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IGZvcmNlRW52aXJvbm1lbnQgPSAoX2EgPSBnZXREZWZhdWx0cygpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZm9yY2VFbnZpcm9ubWVudDtcbiAgICBpZiAoZm9yY2VFbnZpcm9ubWVudCA9PT0gJ25vZGUnKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBlbHNlIGlmIChmb3JjZUVudmlyb25tZW50ID09PSAnYnJvd3NlcicpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChnbG9iYWwucHJvY2VzcykgPT09ICdbb2JqZWN0IHByb2Nlc3NdJyk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG4vKipcbiAqIERldGVjdCBCcm93c2VyIEVudmlyb25tZW50LlxuICogTm90ZTogVGhpcyB3aWxsIHJldHVybiB0cnVlIGZvciBjZXJ0YWluIHRlc3QgZnJhbWV3b3JrcyB0aGF0IGFyZSBpbmNvbXBsZXRlbHlcbiAqIG1pbWlja2luZyBhIGJyb3dzZXIsIGFuZCBzaG91bGQgbm90IGxlYWQgdG8gYXNzdW1pbmcgYWxsIGJyb3dzZXIgQVBJcyBhcmVcbiAqIGF2YWlsYWJsZS5cbiAqL1xuZnVuY3Rpb24gaXNCcm93c2VyKCkge1xuICAgIHJldHVybiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyB8fCBpc1dlYldvcmtlcigpO1xufVxuLyoqXG4gKiBEZXRlY3QgV2ViIFdvcmtlciBjb250ZXh0LlxuICovXG5mdW5jdGlvbiBpc1dlYldvcmtlcigpIHtcbiAgICByZXR1cm4gKHR5cGVvZiBXb3JrZXJHbG9iYWxTY29wZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIHNlbGYgaW5zdGFuY2VvZiBXb3JrZXJHbG9iYWxTY29wZSk7XG59XG4vKipcbiAqIERldGVjdCBDbG91ZGZsYXJlIFdvcmtlciBjb250ZXh0LlxuICovXG5mdW5jdGlvbiBpc0Nsb3VkZmxhcmVXb3JrZXIoKSB7XG4gICAgcmV0dXJuICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICBuYXZpZ2F0b3IudXNlckFnZW50ID09PSAnQ2xvdWRmbGFyZS1Xb3JrZXJzJyk7XG59XG5mdW5jdGlvbiBpc0Jyb3dzZXJFeHRlbnNpb24oKSB7XG4gICAgY29uc3QgcnVudGltZSA9IHR5cGVvZiBjaHJvbWUgPT09ICdvYmplY3QnXG4gICAgICAgID8gY2hyb21lLnJ1bnRpbWVcbiAgICAgICAgOiB0eXBlb2YgYnJvd3NlciA9PT0gJ29iamVjdCdcbiAgICAgICAgICAgID8gYnJvd3Nlci5ydW50aW1lXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gdHlwZW9mIHJ1bnRpbWUgPT09ICdvYmplY3QnICYmIHJ1bnRpbWUuaWQgIT09IHVuZGVmaW5lZDtcbn1cbi8qKlxuICogRGV0ZWN0IFJlYWN0IE5hdGl2ZS5cbiAqXG4gKiBAcmV0dXJuIHRydWUgaWYgUmVhY3ROYXRpdmUgZW52aXJvbm1lbnQgaXMgZGV0ZWN0ZWQuXG4gKi9cbmZ1bmN0aW9uIGlzUmVhY3ROYXRpdmUoKSB7XG4gICAgcmV0dXJuICh0eXBlb2YgbmF2aWdhdG9yID09PSAnb2JqZWN0JyAmJiBuYXZpZ2F0b3JbJ3Byb2R1Y3QnXSA9PT0gJ1JlYWN0TmF0aXZlJyk7XG59XG4vKiogRGV0ZWN0cyBFbGVjdHJvbiBhcHBzLiAqL1xuZnVuY3Rpb24gaXNFbGVjdHJvbigpIHtcbiAgICByZXR1cm4gZ2V0VUEoKS5pbmRleE9mKCdFbGVjdHJvbi8nKSA+PSAwO1xufVxuLyoqIERldGVjdHMgSW50ZXJuZXQgRXhwbG9yZXIuICovXG5mdW5jdGlvbiBpc0lFKCkge1xuICAgIGNvbnN0IHVhID0gZ2V0VUEoKTtcbiAgICByZXR1cm4gdWEuaW5kZXhPZignTVNJRSAnKSA+PSAwIHx8IHVhLmluZGV4T2YoJ1RyaWRlbnQvJykgPj0gMDtcbn1cbi8qKiBEZXRlY3RzIFVuaXZlcnNhbCBXaW5kb3dzIFBsYXRmb3JtIGFwcHMuICovXG5mdW5jdGlvbiBpc1VXUCgpIHtcbiAgICByZXR1cm4gZ2V0VUEoKS5pbmRleE9mKCdNU0FwcEhvc3QvJykgPj0gMDtcbn1cbi8qKlxuICogRGV0ZWN0IHdoZXRoZXIgdGhlIGN1cnJlbnQgU0RLIGJ1aWxkIGlzIHRoZSBOb2RlIHZlcnNpb24uXG4gKlxuICogQHJldHVybiB0cnVlIGlmIGl0J3MgdGhlIE5vZGUgU0RLIGJ1aWxkLlxuICovXG5mdW5jdGlvbiBpc05vZGVTZGsoKSB7XG4gICAgcmV0dXJuIENPTlNUQU5UUy5OT0RFX0NMSUVOVCA9PT0gdHJ1ZSB8fCBDT05TVEFOVFMuTk9ERV9BRE1JTiA9PT0gdHJ1ZTtcbn1cbi8qKiBSZXR1cm5zIHRydWUgaWYgd2UgYXJlIHJ1bm5pbmcgaW4gU2FmYXJpLiAqL1xuZnVuY3Rpb24gaXNTYWZhcmkoKSB7XG4gICAgcmV0dXJuICghaXNOb2RlKCkgJiZcbiAgICAgICAgISFuYXZpZ2F0b3IudXNlckFnZW50ICYmXG4gICAgICAgIG5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ1NhZmFyaScpICYmXG4gICAgICAgICFuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdDaHJvbWUnKSk7XG59XG4vKipcbiAqIFRoaXMgbWV0aG9kIGNoZWNrcyBpZiBpbmRleGVkREIgaXMgc3VwcG9ydGVkIGJ5IGN1cnJlbnQgYnJvd3Nlci9zZXJ2aWNlIHdvcmtlciBjb250ZXh0XG4gKiBAcmV0dXJuIHRydWUgaWYgaW5kZXhlZERCIGlzIHN1cHBvcnRlZCBieSBjdXJyZW50IGJyb3dzZXIvc2VydmljZSB3b3JrZXIgY29udGV4dFxuICovXG5mdW5jdGlvbiBpc0luZGV4ZWREQkF2YWlsYWJsZSgpIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGluZGV4ZWREQiA9PT0gJ29iamVjdCc7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG4vKipcbiAqIFRoaXMgbWV0aG9kIHZhbGlkYXRlcyBicm93c2VyL3N3IGNvbnRleHQgZm9yIGluZGV4ZWREQiBieSBvcGVuaW5nIGEgZHVtbXkgaW5kZXhlZERCIGRhdGFiYXNlIGFuZCByZWplY3RcbiAqIGlmIGVycm9ycyBvY2N1ciBkdXJpbmcgdGhlIGRhdGFiYXNlIG9wZW4gb3BlcmF0aW9uLlxuICpcbiAqIEB0aHJvd3MgZXhjZXB0aW9uIGlmIGN1cnJlbnQgYnJvd3Nlci9zdyBjb250ZXh0IGNhbid0IHJ1biBpZGIub3BlbiAoZXg6IFNhZmFyaSBpZnJhbWUsIEZpcmVmb3hcbiAqIHByaXZhdGUgYnJvd3NpbmcpXG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUoKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxldCBwcmVFeGlzdCA9IHRydWU7XG4gICAgICAgICAgICBjb25zdCBEQl9DSEVDS19OQU1FID0gJ3ZhbGlkYXRlLWJyb3dzZXItY29udGV4dC1mb3ItaW5kZXhlZGRiLWFuYWx5dGljcy1tb2R1bGUnO1xuICAgICAgICAgICAgY29uc3QgcmVxdWVzdCA9IHNlbGYuaW5kZXhlZERCLm9wZW4oREJfQ0hFQ0tfTkFNRSk7XG4gICAgICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0LnJlc3VsdC5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSBkYXRhYmFzZSBvbmx5IHdoZW4gaXQgZG9lc24ndCBwcmUtZXhpc3RcbiAgICAgICAgICAgICAgICBpZiAoIXByZUV4aXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKERCX0NIRUNLX05BTUUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHByZUV4aXN0ID0gZmFsc2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmVxdWVzdC5vbmVycm9yID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICByZWplY3QoKChfYSA9IHJlcXVlc3QuZXJyb3IpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tZXNzYWdlKSB8fCAnJyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLyoqXG4gKlxuICogVGhpcyBtZXRob2QgY2hlY2tzIHdoZXRoZXIgY29va2llIGlzIGVuYWJsZWQgd2l0aGluIGN1cnJlbnQgYnJvd3NlclxuICogQHJldHVybiB0cnVlIGlmIGNvb2tpZSBpcyBlbmFibGVkIHdpdGhpbiBjdXJyZW50IGJyb3dzZXJcbiAqL1xuZnVuY3Rpb24gYXJlQ29va2llc0VuYWJsZWQoKSB7XG4gICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICd1bmRlZmluZWQnIHx8ICFuYXZpZ2F0b3IuY29va2llRW5hYmxlZCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IFN0YW5kYXJkaXplZCBGaXJlYmFzZSBFcnJvci5cbiAqXG4gKiBVc2FnZTpcbiAqXG4gKiAgIC8vIFR5cGVTY3JpcHQgc3RyaW5nIGxpdGVyYWxzIGZvciB0eXBlLXNhZmUgY29kZXNcbiAqICAgdHlwZSBFcnIgPVxuICogICAgICd1bmtub3duJyB8XG4gKiAgICAgJ29iamVjdC1ub3QtZm91bmQnXG4gKiAgICAgO1xuICpcbiAqICAgLy8gQ2xvc3VyZSBlbnVtIGZvciB0eXBlLXNhZmUgZXJyb3IgY29kZXNcbiAqICAgLy8gYXQtZW51bSB7c3RyaW5nfVxuICogICB2YXIgRXJyID0ge1xuICogICAgIFVOS05PV046ICd1bmtub3duJyxcbiAqICAgICBPQkpFQ1RfTk9UX0ZPVU5EOiAnb2JqZWN0LW5vdC1mb3VuZCcsXG4gKiAgIH1cbiAqXG4gKiAgIGxldCBlcnJvcnM6IE1hcDxFcnIsIHN0cmluZz4gPSB7XG4gKiAgICAgJ2dlbmVyaWMtZXJyb3InOiBcIlVua25vd24gZXJyb3JcIixcbiAqICAgICAnZmlsZS1ub3QtZm91bmQnOiBcIkNvdWxkIG5vdCBmaW5kIGZpbGU6IHskZmlsZX1cIixcbiAqICAgfTtcbiAqXG4gKiAgIC8vIFR5cGUtc2FmZSBmdW5jdGlvbiAtIG11c3QgcGFzcyBhIHZhbGlkIGVycm9yIGNvZGUgYXMgcGFyYW0uXG4gKiAgIGxldCBlcnJvciA9IG5ldyBFcnJvckZhY3Rvcnk8RXJyPignc2VydmljZScsICdTZXJ2aWNlJywgZXJyb3JzKTtcbiAqXG4gKiAgIC4uLlxuICogICB0aHJvdyBlcnJvci5jcmVhdGUoRXJyLkdFTkVSSUMpO1xuICogICAuLi5cbiAqICAgdGhyb3cgZXJyb3IuY3JlYXRlKEVyci5GSUxFX05PVF9GT1VORCwgeydmaWxlJzogZmlsZU5hbWV9KTtcbiAqICAgLi4uXG4gKiAgIC8vIFNlcnZpY2U6IENvdWxkIG5vdCBmaWxlIGZpbGU6IGZvby50eHQgKHNlcnZpY2UvZmlsZS1ub3QtZm91bmQpLlxuICpcbiAqICAgY2F0Y2ggKGUpIHtcbiAqICAgICBhc3NlcnQoZS5tZXNzYWdlID09PSBcIkNvdWxkIG5vdCBmaW5kIGZpbGU6IGZvby50eHQuXCIpO1xuICogICAgIGlmICgoZSBhcyBGaXJlYmFzZUVycm9yKT8uY29kZSA9PT0gJ3NlcnZpY2UvZmlsZS1ub3QtZm91bmQnKSB7XG4gKiAgICAgICBjb25zb2xlLmxvZyhcIkNvdWxkIG5vdCByZWFkIGZpbGU6IFwiICsgZVsnZmlsZSddKTtcbiAqICAgICB9XG4gKiAgIH1cbiAqL1xuY29uc3QgRVJST1JfTkFNRSA9ICdGaXJlYmFzZUVycm9yJztcbi8vIEJhc2VkIG9uIGNvZGUgZnJvbTpcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0Vycm9yI0N1c3RvbV9FcnJvcl9UeXBlc1xuY2xhc3MgRmlyZWJhc2VFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIGVycm9yIGNvZGUgZm9yIHRoaXMgZXJyb3IuICovXG4gICAgY29kZSwgbWVzc2FnZSwgXG4gICAgLyoqIEN1c3RvbSBkYXRhIGZvciB0aGlzIGVycm9yLiAqL1xuICAgIGN1c3RvbURhdGEpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgICAgIHRoaXMuY29kZSA9IGNvZGU7XG4gICAgICAgIHRoaXMuY3VzdG9tRGF0YSA9IGN1c3RvbURhdGE7XG4gICAgICAgIC8qKiBUaGUgY3VzdG9tIG5hbWUgZm9yIGFsbCBGaXJlYmFzZUVycm9ycy4gKi9cbiAgICAgICAgdGhpcy5uYW1lID0gRVJST1JfTkFNRTtcbiAgICAgICAgLy8gRml4IEZvciBFUzVcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL01pY3Jvc29mdC9UeXBlU2NyaXB0LXdpa2kvYmxvYi9tYXN0ZXIvQnJlYWtpbmctQ2hhbmdlcy5tZCNleHRlbmRpbmctYnVpbHQtaW5zLWxpa2UtZXJyb3ItYXJyYXktYW5kLW1hcC1tYXktbm8tbG9uZ2VyLXdvcmtcbiAgICAgICAgLy8gVE9ETyhkbGFyb2NxdWUpOiBSZXBsYWNlIHRoaXMgd2l0aCBgbmV3LnRhcmdldGA6IGh0dHBzOi8vd3d3LnR5cGVzY3JpcHRsYW5nLm9yZy9kb2NzL2hhbmRib29rL3JlbGVhc2Utbm90ZXMvdHlwZXNjcmlwdC0yLTIuaHRtbCNzdXBwb3J0LWZvci1uZXd0YXJnZXRcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgd2hpY2ggd2UgY2FuIG5vdyB1c2Ugc2luY2Ugd2Ugbm8gbG9uZ2VyIHRhcmdldCBFUzUuXG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBGaXJlYmFzZUVycm9yLnByb3RvdHlwZSk7XG4gICAgICAgIC8vIE1haW50YWlucyBwcm9wZXIgc3RhY2sgdHJhY2UgZm9yIHdoZXJlIG91ciBlcnJvciB3YXMgdGhyb3duLlxuICAgICAgICAvLyBPbmx5IGF2YWlsYWJsZSBvbiBWOC5cbiAgICAgICAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XG4gICAgICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBFcnJvckZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5jbGFzcyBFcnJvckZhY3Rvcnkge1xuICAgIGNvbnN0cnVjdG9yKHNlcnZpY2UsIHNlcnZpY2VOYW1lLCBlcnJvcnMpIHtcbiAgICAgICAgdGhpcy5zZXJ2aWNlID0gc2VydmljZTtcbiAgICAgICAgdGhpcy5zZXJ2aWNlTmFtZSA9IHNlcnZpY2VOYW1lO1xuICAgICAgICB0aGlzLmVycm9ycyA9IGVycm9ycztcbiAgICB9XG4gICAgY3JlYXRlKGNvZGUsIC4uLmRhdGEpIHtcbiAgICAgICAgY29uc3QgY3VzdG9tRGF0YSA9IGRhdGFbMF0gfHwge307XG4gICAgICAgIGNvbnN0IGZ1bGxDb2RlID0gYCR7dGhpcy5zZXJ2aWNlfS8ke2NvZGV9YDtcbiAgICAgICAgY29uc3QgdGVtcGxhdGUgPSB0aGlzLmVycm9yc1tjb2RlXTtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IHRlbXBsYXRlID8gcmVwbGFjZVRlbXBsYXRlKHRlbXBsYXRlLCBjdXN0b21EYXRhKSA6ICdFcnJvcic7XG4gICAgICAgIC8vIFNlcnZpY2UgTmFtZTogRXJyb3IgbWVzc2FnZSAoc2VydmljZS9jb2RlKS5cbiAgICAgICAgY29uc3QgZnVsbE1lc3NhZ2UgPSBgJHt0aGlzLnNlcnZpY2VOYW1lfTogJHttZXNzYWdlfSAoJHtmdWxsQ29kZX0pLmA7XG4gICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEZpcmViYXNlRXJyb3IoZnVsbENvZGUsIGZ1bGxNZXNzYWdlLCBjdXN0b21EYXRhKTtcbiAgICAgICAgcmV0dXJuIGVycm9yO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHJlcGxhY2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgZGF0YSkge1xuICAgIHJldHVybiB0ZW1wbGF0ZS5yZXBsYWNlKFBBVFRFUk4sIChfLCBrZXkpID0+IHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBkYXRhW2tleV07XG4gICAgICAgIHJldHVybiB2YWx1ZSAhPSBudWxsID8gU3RyaW5nKHZhbHVlKSA6IGA8JHtrZXl9Pz5gO1xuICAgIH0pO1xufVxuY29uc3QgUEFUVEVSTiA9IC9cXHtcXCQoW159XSspfS9nO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBFdmFsdWF0ZXMgYSBKU09OIHN0cmluZyBpbnRvIGEgamF2YXNjcmlwdCBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHN0ciBBIHN0cmluZyBjb250YWluaW5nIEpTT04uXG4gKiBAcmV0dXJuIHsqfSBUaGUgamF2YXNjcmlwdCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzcGVjaWZpZWQgSlNPTi5cbiAqL1xuZnVuY3Rpb24ganNvbkV2YWwoc3RyKSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2Uoc3RyKTtcbn1cbi8qKlxuICogUmV0dXJucyBKU09OIHJlcHJlc2VudGluZyBhIGphdmFzY3JpcHQgb2JqZWN0LlxuICogQHBhcmFtIHsqfSBkYXRhIEphdmFTY3JpcHQgb2JqZWN0IHRvIGJlIHN0cmluZ2lmaWVkLlxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgSlNPTiBjb250ZW50cyBvZiB0aGUgb2JqZWN0LlxuICovXG5mdW5jdGlvbiBzdHJpbmdpZnkoZGF0YSkge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShkYXRhKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGludG8gY29uc3RpdHVlbnQgcGFydHMuXG4gKlxuICogTm90ZXM6XG4gKiAtIE1heSByZXR1cm4gd2l0aCBpbnZhbGlkIC8gaW5jb21wbGV0ZSBjbGFpbXMgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxuICovXG5jb25zdCBkZWNvZGUgPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICBsZXQgaGVhZGVyID0ge30sIGNsYWltcyA9IHt9LCBkYXRhID0ge30sIHNpZ25hdHVyZSA9ICcnO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHBhcnRzID0gdG9rZW4uc3BsaXQoJy4nKTtcbiAgICAgICAgaGVhZGVyID0ganNvbkV2YWwoYmFzZTY0RGVjb2RlKHBhcnRzWzBdKSB8fCAnJyk7XG4gICAgICAgIGNsYWltcyA9IGpzb25FdmFsKGJhc2U2NERlY29kZShwYXJ0c1sxXSkgfHwgJycpO1xuICAgICAgICBzaWduYXR1cmUgPSBwYXJ0c1syXTtcbiAgICAgICAgZGF0YSA9IGNsYWltc1snZCddIHx8IHt9O1xuICAgICAgICBkZWxldGUgY2xhaW1zWydkJ107XG4gICAgfVxuICAgIGNhdGNoIChlKSB7IH1cbiAgICByZXR1cm4ge1xuICAgICAgICBoZWFkZXIsXG4gICAgICAgIGNsYWltcyxcbiAgICAgICAgZGF0YSxcbiAgICAgICAgc2lnbmF0dXJlXG4gICAgfTtcbn07XG4vKipcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgY2hlY2tzIHRoZSB2YWxpZGl0eSBvZiBpdHMgdGltZS1iYXNlZCBjbGFpbXMuIFdpbGwgcmV0dXJuIHRydWUgaWYgdGhlXG4gKiB0b2tlbiBpcyB3aXRoaW4gdGhlIHRpbWUgd2luZG93IGF1dGhvcml6ZWQgYnkgdGhlICduYmYnIChub3QtYmVmb3JlKSBhbmQgJ2lhdCcgKGlzc3VlZC1hdCkgY2xhaW1zLlxuICpcbiAqIE5vdGVzOlxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxuICovXG5jb25zdCBpc1ZhbGlkVGltZXN0YW1wID0gZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgY29uc3QgY2xhaW1zID0gZGVjb2RlKHRva2VuKS5jbGFpbXM7XG4gICAgY29uc3Qgbm93ID0gTWF0aC5mbG9vcihuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDApO1xuICAgIGxldCB2YWxpZFNpbmNlID0gMCwgdmFsaWRVbnRpbCA9IDA7XG4gICAgaWYgKHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGlmIChjbGFpbXMuaGFzT3duUHJvcGVydHkoJ25iZicpKSB7XG4gICAgICAgICAgICB2YWxpZFNpbmNlID0gY2xhaW1zWyduYmYnXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2lhdCcpKSB7XG4gICAgICAgICAgICB2YWxpZFNpbmNlID0gY2xhaW1zWydpYXQnXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCdleHAnKSkge1xuICAgICAgICAgICAgdmFsaWRVbnRpbCA9IGNsYWltc1snZXhwJ107XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyB0b2tlbiB3aWxsIGV4cGlyZSBhZnRlciAyNGggYnkgZGVmYXVsdFxuICAgICAgICAgICAgdmFsaWRVbnRpbCA9IHZhbGlkU2luY2UgKyA4NjQwMDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gKCEhbm93ICYmXG4gICAgICAgICEhdmFsaWRTaW5jZSAmJlxuICAgICAgICAhIXZhbGlkVW50aWwgJiZcbiAgICAgICAgbm93ID49IHZhbGlkU2luY2UgJiZcbiAgICAgICAgbm93IDw9IHZhbGlkVW50aWwpO1xufTtcbi8qKlxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGFuZCByZXR1cm5zIGl0cyBpc3N1ZWQgYXQgdGltZSBpZiB2YWxpZCwgbnVsbCBvdGhlcndpc2UuXG4gKlxuICogTm90ZXM6XG4gKiAtIE1heSByZXR1cm4gbnVsbCBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXG4gKi9cbmNvbnN0IGlzc3VlZEF0VGltZSA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgIGNvbnN0IGNsYWltcyA9IGRlY29kZSh0b2tlbikuY2xhaW1zO1xuICAgIGlmICh0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0JyAmJiBjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2lhdCcpKSB7XG4gICAgICAgIHJldHVybiBjbGFpbXNbJ2lhdCddO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn07XG4vKipcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgY2hlY2tzIHRoZSB2YWxpZGl0eSBvZiBpdHMgZm9ybWF0LiBFeHBlY3RzIGEgdmFsaWQgaXNzdWVkLWF0IHRpbWUuXG4gKlxuICogTm90ZXM6XG4gKiAtIE1heSByZXR1cm4gYSBmYWxzZSBuZWdhdGl2ZSBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXG4gKi9cbmNvbnN0IGlzVmFsaWRGb3JtYXQgPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICBjb25zdCBkZWNvZGVkID0gZGVjb2RlKHRva2VuKSwgY2xhaW1zID0gZGVjb2RlZC5jbGFpbXM7XG4gICAgcmV0dXJuICEhY2xhaW1zICYmIHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnICYmIGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnaWF0Jyk7XG59O1xuLyoqXG4gKiBBdHRlbXB0cyB0byBwZWVyIGludG8gYW4gYXV0aCB0b2tlbiBhbmQgZGV0ZXJtaW5lIGlmIGl0J3MgYW4gYWRtaW4gYXV0aCB0b2tlbiBieSBsb29raW5nIGF0IHRoZSBjbGFpbXMgcG9ydGlvbi5cbiAqXG4gKiBOb3RlczpcbiAqIC0gTWF5IHJldHVybiBhIGZhbHNlIG5lZ2F0aXZlIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cbiAqL1xuY29uc3QgaXNBZG1pbiA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgIGNvbnN0IGNsYWltcyA9IGRlY29kZSh0b2tlbikuY2xhaW1zO1xuICAgIHJldHVybiB0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0JyAmJiBjbGFpbXNbJ2FkbWluJ10gPT09IHRydWU7XG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuZnVuY3Rpb24gY29udGFpbnMob2JqLCBrZXkpIHtcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcbn1cbmZ1bmN0aW9uIHNhZmVHZXQob2JqLCBrZXkpIHtcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xuICAgICAgICByZXR1cm4gb2JqW2tleV07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGlzRW1wdHkob2JqKSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBtYXAob2JqLCBmbiwgY29udGV4dE9iaikge1xuICAgIGNvbnN0IHJlcyA9IHt9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xuICAgICAgICAgICAgcmVzW2tleV0gPSBmbi5jYWxsKGNvbnRleHRPYmosIG9ialtrZXldLCBrZXksIG9iaik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cbi8qKlxuICogRGVlcCBlcXVhbCB0d28gb2JqZWN0cy4gU3VwcG9ydCBBcnJheXMgYW5kIE9iamVjdHMuXG4gKi9cbmZ1bmN0aW9uIGRlZXBFcXVhbChhLCBiKSB7XG4gICAgaWYgKGEgPT09IGIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNvbnN0IGFLZXlzID0gT2JqZWN0LmtleXMoYSk7XG4gICAgY29uc3QgYktleXMgPSBPYmplY3Qua2V5cyhiKTtcbiAgICBmb3IgKGNvbnN0IGsgb2YgYUtleXMpIHtcbiAgICAgICAgaWYgKCFiS2V5cy5pbmNsdWRlcyhrKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFQcm9wID0gYVtrXTtcbiAgICAgICAgY29uc3QgYlByb3AgPSBiW2tdO1xuICAgICAgICBpZiAoaXNPYmplY3QoYVByb3ApICYmIGlzT2JqZWN0KGJQcm9wKSkge1xuICAgICAgICAgICAgaWYgKCFkZWVwRXF1YWwoYVByb3AsIGJQcm9wKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChhUHJvcCAhPT0gYlByb3ApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGsgb2YgYktleXMpIHtcbiAgICAgICAgaWYgKCFhS2V5cy5pbmNsdWRlcyhrKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gaXNPYmplY3QodGhpbmcpIHtcbiAgICByZXR1cm4gdGhpbmcgIT09IG51bGwgJiYgdHlwZW9mIHRoaW5nID09PSAnb2JqZWN0Jztcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVqZWN0cyBpZiB0aGUgZ2l2ZW4gcHJvbWlzZSBkb2Vzbid0IHJlc29sdmUgaW4gdGltZUluTVMgbWlsbGlzZWNvbmRzLlxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIHByb21pc2VXaXRoVGltZW91dChwcm9taXNlLCB0aW1lSW5NUyA9IDIwMDApIHtcbiAgICBjb25zdCBkZWZlcnJlZFByb21pc2UgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IGRlZmVycmVkUHJvbWlzZS5yZWplY3QoJ3RpbWVvdXQhJyksIHRpbWVJbk1TKTtcbiAgICBwcm9taXNlLnRoZW4oZGVmZXJyZWRQcm9taXNlLnJlc29sdmUsIGRlZmVycmVkUHJvbWlzZS5yZWplY3QpO1xuICAgIHJldHVybiBkZWZlcnJlZFByb21pc2UucHJvbWlzZTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmV0dXJucyBhIHF1ZXJ5c3RyaW5nLWZvcm1hdHRlZCBzdHJpbmcgKGUuZy4gJmFyZz12YWwmYXJnMj12YWwyKSBmcm9tIGFcbiAqIHBhcmFtcyBvYmplY3QgKGUuZy4ge2FyZzogJ3ZhbCcsIGFyZzI6ICd2YWwyJ30pXG4gKiBOb3RlOiBZb3UgbXVzdCBwcmVwZW5kIGl0IHdpdGggPyB3aGVuIGFkZGluZyBpdCB0byBhIFVSTC5cbiAqL1xuZnVuY3Rpb24gcXVlcnlzdHJpbmcocXVlcnlzdHJpbmdQYXJhbXMpIHtcbiAgICBjb25zdCBwYXJhbXMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhxdWVyeXN0cmluZ1BhcmFtcykpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICB2YWx1ZS5mb3JFYWNoKGFycmF5VmFsID0+IHtcbiAgICAgICAgICAgICAgICBwYXJhbXMucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChhcnJheVZhbCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwYXJhbXMucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwYXJhbXMubGVuZ3RoID8gJyYnICsgcGFyYW1zLmpvaW4oJyYnKSA6ICcnO1xufVxuLyoqXG4gKiBEZWNvZGVzIGEgcXVlcnlzdHJpbmcgKGUuZy4gP2FyZz12YWwmYXJnMj12YWwyKSBpbnRvIGEgcGFyYW1zIG9iamVjdFxuICogKGUuZy4ge2FyZzogJ3ZhbCcsIGFyZzI6ICd2YWwyJ30pXG4gKi9cbmZ1bmN0aW9uIHF1ZXJ5c3RyaW5nRGVjb2RlKHF1ZXJ5c3RyaW5nKSB7XG4gICAgY29uc3Qgb2JqID0ge307XG4gICAgY29uc3QgdG9rZW5zID0gcXVlcnlzdHJpbmcucmVwbGFjZSgvXlxcPy8sICcnKS5zcGxpdCgnJicpO1xuICAgIHRva2Vucy5mb3JFYWNoKHRva2VuID0+IHtcbiAgICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSB0b2tlbi5zcGxpdCgnPScpO1xuICAgICAgICAgICAgb2JqW2RlY29kZVVSSUNvbXBvbmVudChrZXkpXSA9IGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gb2JqO1xufVxuLyoqXG4gKiBFeHRyYWN0IHRoZSBxdWVyeSBzdHJpbmcgcGFydCBvZiBhIFVSTCwgaW5jbHVkaW5nIHRoZSBsZWFkaW5nIHF1ZXN0aW9uIG1hcmsgKGlmIHByZXNlbnQpLlxuICovXG5mdW5jdGlvbiBleHRyYWN0UXVlcnlzdHJpbmcodXJsKSB7XG4gICAgY29uc3QgcXVlcnlTdGFydCA9IHVybC5pbmRleE9mKCc/Jyk7XG4gICAgaWYgKCFxdWVyeVN0YXJ0KSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgY29uc3QgZnJhZ21lbnRTdGFydCA9IHVybC5pbmRleE9mKCcjJywgcXVlcnlTdGFydCk7XG4gICAgcmV0dXJuIHVybC5zdWJzdHJpbmcocXVlcnlTdGFydCwgZnJhZ21lbnRTdGFydCA+IDAgPyBmcmFnbWVudFN0YXJ0IDogdW5kZWZpbmVkKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQGZpbGVvdmVydmlldyBTSEEtMSBjcnlwdG9ncmFwaGljIGhhc2guXG4gKiBWYXJpYWJsZSBuYW1lcyBmb2xsb3cgdGhlIG5vdGF0aW9uIGluIEZJUFMgUFVCIDE4MC0zOlxuICogaHR0cDovL2NzcmMubmlzdC5nb3YvcHVibGljYXRpb25zL2ZpcHMvZmlwczE4MC0zL2ZpcHMxODAtM19maW5hbC5wZGYuXG4gKlxuICogVXNhZ2U6XG4gKiAgIHZhciBzaGExID0gbmV3IHNoYTEoKTtcbiAqICAgc2hhMS51cGRhdGUoYnl0ZXMpO1xuICogICB2YXIgaGFzaCA9IHNoYTEuZGlnZXN0KCk7XG4gKlxuICogUGVyZm9ybWFuY2U6XG4gKiAgIENocm9tZSAyMzogICB+NDAwIE1iaXQvc1xuICogICBGaXJlZm94IDE2OiAgfjI1MCBNYml0L3NcbiAqXG4gKi9cbi8qKlxuICogU0hBLTEgY3J5cHRvZ3JhcGhpYyBoYXNoIGNvbnN0cnVjdG9yLlxuICpcbiAqIFRoZSBwcm9wZXJ0aWVzIGRlY2xhcmVkIGhlcmUgYXJlIGRpc2N1c3NlZCBpbiB0aGUgYWJvdmUgYWxnb3JpdGhtIGRvY3VtZW50LlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZmluYWxcbiAqIEBzdHJ1Y3RcbiAqL1xuY2xhc3MgU2hhMSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBIb2xkcyB0aGUgcHJldmlvdXMgdmFsdWVzIG9mIGFjY3VtdWxhdGVkIHZhcmlhYmxlcyBhLWUgaW4gdGhlIGNvbXByZXNzX1xuICAgICAgICAgKiBmdW5jdGlvbi5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2hhaW5fID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGJ1ZmZlciBob2xkaW5nIHRoZSBwYXJ0aWFsbHkgY29tcHV0ZWQgaGFzaCByZXN1bHQuXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmJ1Zl8gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFuIGFycmF5IG9mIDgwIGJ5dGVzLCBlYWNoIGEgcGFydCBvZiB0aGUgbWVzc2FnZSB0byBiZSBoYXNoZWQuICBSZWZlcnJlZCB0b1xuICAgICAgICAgKiBhcyB0aGUgbWVzc2FnZSBzY2hlZHVsZSBpbiB0aGUgZG9jcy5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuV18gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnRhaW5zIGRhdGEgbmVlZGVkIHRvIHBhZCBtZXNzYWdlcyBsZXNzIHRoYW4gNjQgYnl0ZXMuXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnBhZF8gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmluYnVmXyA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50b3RhbF8gPSAwO1xuICAgICAgICB0aGlzLmJsb2NrU2l6ZSA9IDUxMiAvIDg7XG4gICAgICAgIHRoaXMucGFkX1swXSA9IDEyODtcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLmJsb2NrU2l6ZTsgKytpKSB7XG4gICAgICAgICAgICB0aGlzLnBhZF9baV0gPSAwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICB9XG4gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuY2hhaW5fWzBdID0gMHg2NzQ1MjMwMTtcbiAgICAgICAgdGhpcy5jaGFpbl9bMV0gPSAweGVmY2RhYjg5O1xuICAgICAgICB0aGlzLmNoYWluX1syXSA9IDB4OThiYWRjZmU7XG4gICAgICAgIHRoaXMuY2hhaW5fWzNdID0gMHgxMDMyNTQ3NjtcbiAgICAgICAgdGhpcy5jaGFpbl9bNF0gPSAweGMzZDJlMWYwO1xuICAgICAgICB0aGlzLmluYnVmXyA9IDA7XG4gICAgICAgIHRoaXMudG90YWxfID0gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgY29tcHJlc3MgaGVscGVyIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSBidWYgQmxvY2sgdG8gY29tcHJlc3MuXG4gICAgICogQHBhcmFtIG9mZnNldCBPZmZzZXQgb2YgdGhlIGJsb2NrIGluIHRoZSBidWZmZXIuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBjb21wcmVzc18oYnVmLCBvZmZzZXQpIHtcbiAgICAgICAgaWYgKCFvZmZzZXQpIHtcbiAgICAgICAgICAgIG9mZnNldCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgVyA9IHRoaXMuV187XG4gICAgICAgIC8vIGdldCAxNiBiaWcgZW5kaWFuIHdvcmRzXG4gICAgICAgIGlmICh0eXBlb2YgYnVmID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyh1c2VyKTogW2J1ZyA4MTQwMTIyXSBSZWNlbnQgdmVyc2lvbnMgb2YgU2FmYXJpIGZvciBNYWMgT1MgYW5kIGlPU1xuICAgICAgICAgICAgICAgIC8vIGhhdmUgYSBidWcgdGhhdCB0dXJucyB0aGUgcG9zdC1pbmNyZW1lbnQgKysgb3BlcmF0b3IgaW50byBwcmUtaW5jcmVtZW50XG4gICAgICAgICAgICAgICAgLy8gZHVyaW5nIEpJVCBjb21waWxhdGlvbi4gIFdlIGhhdmUgY29kZSB0aGF0IGRlcGVuZHMgaGVhdmlseSBvbiBTSEEtMSBmb3JcbiAgICAgICAgICAgICAgICAvLyBjb3JyZWN0bmVzcyBhbmQgd2hpY2ggaXMgYWZmZWN0ZWQgYnkgdGhpcyBidWcsIHNvIEkndmUgcmVtb3ZlZCBhbGwgdXNlc1xuICAgICAgICAgICAgICAgIC8vIG9mIHBvc3QtaW5jcmVtZW50ICsrIGluIHdoaWNoIHRoZSByZXN1bHQgdmFsdWUgaXMgdXNlZC4gIFdlIGNhbiByZXZlcnRcbiAgICAgICAgICAgICAgICAvLyB0aGlzIGNoYW5nZSBvbmNlIHRoZSBTYWZhcmkgYnVnXG4gICAgICAgICAgICAgICAgLy8gKGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xMDkwMzYpIGhhcyBiZWVuIGZpeGVkIGFuZFxuICAgICAgICAgICAgICAgIC8vIG1vc3QgY2xpZW50cyBoYXZlIGJlZW4gdXBkYXRlZC5cbiAgICAgICAgICAgICAgICBXW2ldID1cbiAgICAgICAgICAgICAgICAgICAgKGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCkgPDwgMjQpIHxcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQgKyAxKSA8PCAxNikgfFxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCArIDIpIDw8IDgpIHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCArIDMpO1xuICAgICAgICAgICAgICAgIG9mZnNldCArPSA0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgV1tpXSA9XG4gICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0XSA8PCAyNCkgfFxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1ZltvZmZzZXQgKyAxXSA8PCAxNikgfFxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1ZltvZmZzZXQgKyAyXSA8PCA4KSB8XG4gICAgICAgICAgICAgICAgICAgICAgICBidWZbb2Zmc2V0ICsgM107XG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gZXhwYW5kIHRvIDgwIHdvcmRzXG4gICAgICAgIGZvciAobGV0IGkgPSAxNjsgaSA8IDgwOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBXW2kgLSAzXSBeIFdbaSAtIDhdIF4gV1tpIC0gMTRdIF4gV1tpIC0gMTZdO1xuICAgICAgICAgICAgV1tpXSA9ICgodCA8PCAxKSB8ICh0ID4+PiAzMSkpICYgMHhmZmZmZmZmZjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgYSA9IHRoaXMuY2hhaW5fWzBdO1xuICAgICAgICBsZXQgYiA9IHRoaXMuY2hhaW5fWzFdO1xuICAgICAgICBsZXQgYyA9IHRoaXMuY2hhaW5fWzJdO1xuICAgICAgICBsZXQgZCA9IHRoaXMuY2hhaW5fWzNdO1xuICAgICAgICBsZXQgZSA9IHRoaXMuY2hhaW5fWzRdO1xuICAgICAgICBsZXQgZiwgaztcbiAgICAgICAgLy8gVE9ETyh1c2VyKTogVHJ5IHRvIHVucm9sbCB0aGlzIGxvb3AgdG8gc3BlZWQgdXAgdGhlIGNvbXB1dGF0aW9uLlxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDgwOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChpIDwgNDApIHtcbiAgICAgICAgICAgICAgICBpZiAoaSA8IDIwKSB7XG4gICAgICAgICAgICAgICAgICAgIGYgPSBkIF4gKGIgJiAoYyBeIGQpKTtcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4NWE4Mjc5OTk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmID0gYiBeIGMgXiBkO1xuICAgICAgICAgICAgICAgICAgICBrID0gMHg2ZWQ5ZWJhMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoaSA8IDYwKSB7XG4gICAgICAgICAgICAgICAgICAgIGYgPSAoYiAmIGMpIHwgKGQgJiAoYiB8IGMpKTtcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4OGYxYmJjZGM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmID0gYiBeIGMgXiBkO1xuICAgICAgICAgICAgICAgICAgICBrID0gMHhjYTYyYzFkNjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB0ID0gKCgoYSA8PCA1KSB8IChhID4+PiAyNykpICsgZiArIGUgKyBrICsgV1tpXSkgJiAweGZmZmZmZmZmO1xuICAgICAgICAgICAgZSA9IGQ7XG4gICAgICAgICAgICBkID0gYztcbiAgICAgICAgICAgIGMgPSAoKGIgPDwgMzApIHwgKGIgPj4+IDIpKSAmIDB4ZmZmZmZmZmY7XG4gICAgICAgICAgICBiID0gYTtcbiAgICAgICAgICAgIGEgPSB0O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2hhaW5fWzBdID0gKHRoaXMuY2hhaW5fWzBdICsgYSkgJiAweGZmZmZmZmZmO1xuICAgICAgICB0aGlzLmNoYWluX1sxXSA9ICh0aGlzLmNoYWluX1sxXSArIGIpICYgMHhmZmZmZmZmZjtcbiAgICAgICAgdGhpcy5jaGFpbl9bMl0gPSAodGhpcy5jaGFpbl9bMl0gKyBjKSAmIDB4ZmZmZmZmZmY7XG4gICAgICAgIHRoaXMuY2hhaW5fWzNdID0gKHRoaXMuY2hhaW5fWzNdICsgZCkgJiAweGZmZmZmZmZmO1xuICAgICAgICB0aGlzLmNoYWluX1s0XSA9ICh0aGlzLmNoYWluX1s0XSArIGUpICYgMHhmZmZmZmZmZjtcbiAgICB9XG4gICAgdXBkYXRlKGJ5dGVzLCBsZW5ndGgpIHtcbiAgICAgICAgLy8gVE9ETyhqb2hubGVueik6IHRpZ2h0ZW4gdGhlIGZ1bmN0aW9uIHNpZ25hdHVyZSBhbmQgcmVtb3ZlIHRoaXMgY2hlY2tcbiAgICAgICAgaWYgKGJ5dGVzID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsZW5ndGhNaW51c0Jsb2NrID0gbGVuZ3RoIC0gdGhpcy5ibG9ja1NpemU7XG4gICAgICAgIGxldCBuID0gMDtcbiAgICAgICAgLy8gVXNpbmcgbG9jYWwgaW5zdGVhZCBvZiBtZW1iZXIgdmFyaWFibGVzIGdpdmVzIH41JSBzcGVlZHVwIG9uIEZpcmVmb3ggMTYuXG4gICAgICAgIGNvbnN0IGJ1ZiA9IHRoaXMuYnVmXztcbiAgICAgICAgbGV0IGluYnVmID0gdGhpcy5pbmJ1Zl87XG4gICAgICAgIC8vIFRoZSBvdXRlciB3aGlsZSBsb29wIHNob3VsZCBleGVjdXRlIGF0IG1vc3QgdHdpY2UuXG4gICAgICAgIHdoaWxlIChuIDwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGhhdmUgbm8gZGF0YSBpbiB0aGUgYmxvY2sgdG8gdG9wIHVwLCB3ZSBjYW4gZGlyZWN0bHkgcHJvY2VzcyB0aGVcbiAgICAgICAgICAgIC8vIGlucHV0IGJ1ZmZlciAoYXNzdW1pbmcgaXQgY29udGFpbnMgc3VmZmljaWVudCBkYXRhKS4gVGhpcyBnaXZlcyB+MjUlXG4gICAgICAgICAgICAvLyBzcGVlZHVwIG9uIENocm9tZSAyMyBhbmQgfjE1JSBzcGVlZHVwIG9uIEZpcmVmb3ggMTYsIGJ1dCByZXF1aXJlcyB0aGF0XG4gICAgICAgICAgICAvLyB0aGUgZGF0YSBpcyBwcm92aWRlZCBpbiBsYXJnZSBjaHVua3MgKG9yIGluIG11bHRpcGxlcyBvZiA2NCBieXRlcykuXG4gICAgICAgICAgICBpZiAoaW5idWYgPT09IDApIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAobiA8PSBsZW5ndGhNaW51c0Jsb2NrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ5dGVzLCBuKTtcbiAgICAgICAgICAgICAgICAgICAgbiArPSB0aGlzLmJsb2NrU2l6ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIGJ5dGVzID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHdoaWxlIChuIDwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1ZltpbmJ1Zl0gPSBieXRlcy5jaGFyQ29kZUF0KG4pO1xuICAgICAgICAgICAgICAgICAgICArK2luYnVmO1xuICAgICAgICAgICAgICAgICAgICArK247XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gdGhpcy5ibG9ja1NpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ1Zik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmJ1ZiA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBKdW1wIHRvIHRoZSBvdXRlciBsb29wIHNvIHdlIHVzZSB0aGUgZnVsbC1ibG9jayBvcHRpbWl6YXRpb24uXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHdoaWxlIChuIDwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1ZltpbmJ1Zl0gPSBieXRlc1tuXTtcbiAgICAgICAgICAgICAgICAgICAgKytpbmJ1ZjtcbiAgICAgICAgICAgICAgICAgICAgKytuO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5idWYgPT09IHRoaXMuYmxvY2tTaXplKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXByZXNzXyhidWYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5idWYgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSnVtcCB0byB0aGUgb3V0ZXIgbG9vcCBzbyB3ZSB1c2UgdGhlIGZ1bGwtYmxvY2sgb3B0aW1pemF0aW9uLlxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbmJ1Zl8gPSBpbmJ1ZjtcbiAgICAgICAgdGhpcy50b3RhbF8gKz0gbGVuZ3RoO1xuICAgIH1cbiAgICAvKiogQG92ZXJyaWRlICovXG4gICAgZGlnZXN0KCkge1xuICAgICAgICBjb25zdCBkaWdlc3QgPSBbXTtcbiAgICAgICAgbGV0IHRvdGFsQml0cyA9IHRoaXMudG90YWxfICogODtcbiAgICAgICAgLy8gQWRkIHBhZCAweDgwIDB4MDAqLlxuICAgICAgICBpZiAodGhpcy5pbmJ1Zl8gPCA1Nikge1xuICAgICAgICAgICAgdGhpcy51cGRhdGUodGhpcy5wYWRfLCA1NiAtIHRoaXMuaW5idWZfKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKHRoaXMucGFkXywgdGhpcy5ibG9ja1NpemUgLSAodGhpcy5pbmJ1Zl8gLSA1NikpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEFkZCAjIGJpdHMuXG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLmJsb2NrU2l6ZSAtIDE7IGkgPj0gNTY7IGktLSkge1xuICAgICAgICAgICAgdGhpcy5idWZfW2ldID0gdG90YWxCaXRzICYgMjU1O1xuICAgICAgICAgICAgdG90YWxCaXRzIC89IDI1NjsgLy8gRG9uJ3QgdXNlIGJpdC1zaGlmdGluZyBoZXJlIVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29tcHJlc3NfKHRoaXMuYnVmXyk7XG4gICAgICAgIGxldCBuID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1OyBpKyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAyNDsgaiA+PSAwOyBqIC09IDgpIHtcbiAgICAgICAgICAgICAgICBkaWdlc3Rbbl0gPSAodGhpcy5jaGFpbl9baV0gPj4gaikgJiAyNTU7XG4gICAgICAgICAgICAgICAgKytuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkaWdlc3Q7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byBtYWtlIGEgU3Vic2NyaWJlIGZ1bmN0aW9uIChqdXN0IGxpa2UgUHJvbWlzZSBoZWxwcyBtYWtlIGFcbiAqIFRoZW5hYmxlKS5cbiAqXG4gKiBAcGFyYW0gZXhlY3V0b3IgRnVuY3Rpb24gd2hpY2ggY2FuIG1ha2UgY2FsbHMgdG8gYSBzaW5nbGUgT2JzZXJ2ZXJcbiAqICAgICBhcyBhIHByb3h5LlxuICogQHBhcmFtIG9uTm9PYnNlcnZlcnMgQ2FsbGJhY2sgd2hlbiBjb3VudCBvZiBPYnNlcnZlcnMgZ29lcyB0byB6ZXJvLlxuICovXG5mdW5jdGlvbiBjcmVhdGVTdWJzY3JpYmUoZXhlY3V0b3IsIG9uTm9PYnNlcnZlcnMpIHtcbiAgICBjb25zdCBwcm94eSA9IG5ldyBPYnNlcnZlclByb3h5KGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKTtcbiAgICByZXR1cm4gcHJveHkuc3Vic2NyaWJlLmJpbmQocHJveHkpO1xufVxuLyoqXG4gKiBJbXBsZW1lbnQgZmFuLW91dCBmb3IgYW55IG51bWJlciBvZiBPYnNlcnZlcnMgYXR0YWNoZWQgdmlhIGEgc3Vic2NyaWJlXG4gKiBmdW5jdGlvbi5cbiAqL1xuY2xhc3MgT2JzZXJ2ZXJQcm94eSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGV4ZWN1dG9yIEZ1bmN0aW9uIHdoaWNoIGNhbiBtYWtlIGNhbGxzIHRvIGEgc2luZ2xlIE9ic2VydmVyXG4gICAgICogICAgIGFzIGEgcHJveHkuXG4gICAgICogQHBhcmFtIG9uTm9PYnNlcnZlcnMgQ2FsbGJhY2sgd2hlbiBjb3VudCBvZiBPYnNlcnZlcnMgZ29lcyB0byB6ZXJvLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gW107XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVzID0gW107XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJDb3VudCA9IDA7XG4gICAgICAgIC8vIE1pY3JvLXRhc2sgc2NoZWR1bGluZyBieSBjYWxsaW5nIHRhc2sudGhlbigpLlxuICAgICAgICB0aGlzLnRhc2sgPSBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgdGhpcy5maW5hbGl6ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5vbk5vT2JzZXJ2ZXJzID0gb25Ob09ic2VydmVycztcbiAgICAgICAgLy8gQ2FsbCB0aGUgZXhlY3V0b3IgYXN5bmNocm9ub3VzbHkgc28gc3Vic2NyaWJlcnMgdGhhdCBhcmUgY2FsbGVkXG4gICAgICAgIC8vIHN5bmNocm9ub3VzbHkgYWZ0ZXIgdGhlIGNyZWF0aW9uIG9mIHRoZSBzdWJzY3JpYmUgZnVuY3Rpb25cbiAgICAgICAgLy8gY2FuIHN0aWxsIHJlY2VpdmUgdGhlIHZlcnkgZmlyc3QgdmFsdWUgZ2VuZXJhdGVkIGluIHRoZSBleGVjdXRvci5cbiAgICAgICAgdGhpcy50YXNrXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBleGVjdXRvcih0aGlzKTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChlID0+IHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3IoZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBuZXh0KHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKChvYnNlcnZlcikgPT4ge1xuICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dCh2YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlcnJvcihlcnJvcikge1xuICAgICAgICB0aGlzLmZvckVhY2hPYnNlcnZlcigob2JzZXJ2ZXIpID0+IHtcbiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY2xvc2UoZXJyb3IpO1xuICAgIH1cbiAgICBjb21wbGV0ZSgpIHtcbiAgICAgICAgdGhpcy5mb3JFYWNoT2JzZXJ2ZXIoKG9ic2VydmVyKSA9PiB7XG4gICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdWJzY3JpYmUgZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBhZGQgYW4gT2JzZXJ2ZXIgdG8gdGhlIGZhbi1vdXQgbGlzdC5cbiAgICAgKlxuICAgICAqIC0gV2UgcmVxdWlyZSB0aGF0IG5vIGV2ZW50IGlzIHNlbnQgdG8gYSBzdWJzY3JpYmVyIHN5bmNocm9ub3VzbHkgdG8gdGhlaXJcbiAgICAgKiAgIGNhbGwgdG8gc3Vic2NyaWJlKCkuXG4gICAgICovXG4gICAgc3Vic2NyaWJlKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGUpIHtcbiAgICAgICAgbGV0IG9ic2VydmVyO1xuICAgICAgICBpZiAobmV4dE9yT2JzZXJ2ZXIgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgZXJyb3IgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgY29tcGxldGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIE9ic2VydmVyLicpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEFzc2VtYmxlIGFuIE9ic2VydmVyIG9iamVjdCB3aGVuIHBhc3NlZCBhcyBjYWxsYmFjayBmdW5jdGlvbnMuXG4gICAgICAgIGlmIChpbXBsZW1lbnRzQW55TWV0aG9kcyhuZXh0T3JPYnNlcnZlciwgW1xuICAgICAgICAgICAgJ25leHQnLFxuICAgICAgICAgICAgJ2Vycm9yJyxcbiAgICAgICAgICAgICdjb21wbGV0ZSdcbiAgICAgICAgXSkpIHtcbiAgICAgICAgICAgIG9ic2VydmVyID0gbmV4dE9yT2JzZXJ2ZXI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYnNlcnZlciA9IHtcbiAgICAgICAgICAgICAgICBuZXh0OiBuZXh0T3JPYnNlcnZlcixcbiAgICAgICAgICAgICAgICBlcnJvcixcbiAgICAgICAgICAgICAgICBjb21wbGV0ZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob2JzZXJ2ZXIubmV4dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0ID0gbm9vcDtcbiAgICAgICAgfVxuICAgICAgICBpZiAob2JzZXJ2ZXIuZXJyb3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IgPSBub29wO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvYnNlcnZlci5jb21wbGV0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSA9IG5vb3A7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdW5zdWIgPSB0aGlzLnVuc3Vic2NyaWJlT25lLmJpbmQodGhpcywgdGhpcy5vYnNlcnZlcnMubGVuZ3RoKTtcbiAgICAgICAgLy8gQXR0ZW1wdCB0byBzdWJzY3JpYmUgdG8gYSB0ZXJtaW5hdGVkIE9ic2VydmFibGUgLSB3ZVxuICAgICAgICAvLyBqdXN0IHJlc3BvbmQgdG8gdGhlIE9ic2VydmVyIHdpdGggdGhlIGZpbmFsIGVycm9yIG9yIGNvbXBsZXRlXG4gICAgICAgIC8vIGV2ZW50LlxuICAgICAgICBpZiAodGhpcy5maW5hbGl6ZWQpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICAgICAgICAgIHRoaXMudGFzay50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5maW5hbEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5lcnJvcih0aGlzLmZpbmFsRXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBub3RoaW5nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpO1xuICAgICAgICByZXR1cm4gdW5zdWI7XG4gICAgfVxuICAgIC8vIFVuc3Vic2NyaWJlIGlzIHN5bmNocm9ub3VzIC0gd2UgZ3VhcmFudGVlIHRoYXQgbm8gZXZlbnRzIGFyZSBzZW50IHRvXG4gICAgLy8gYW55IHVuc3Vic2NyaWJlZCBPYnNlcnZlci5cbiAgICB1bnN1YnNjcmliZU9uZShpKSB7XG4gICAgICAgIGlmICh0aGlzLm9ic2VydmVycyA9PT0gdW5kZWZpbmVkIHx8IHRoaXMub2JzZXJ2ZXJzW2ldID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBkZWxldGUgdGhpcy5vYnNlcnZlcnNbaV07XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJDb3VudCAtPSAxO1xuICAgICAgICBpZiAodGhpcy5vYnNlcnZlckNvdW50ID09PSAwICYmIHRoaXMub25Ob09ic2VydmVycyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLm9uTm9PYnNlcnZlcnModGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yRWFjaE9ic2VydmVyKGZuKSB7XG4gICAgICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xuICAgICAgICAgICAgLy8gQWxyZWFkeSBjbG9zZWQgYnkgcHJldmlvdXMgZXZlbnQuLi4uanVzdCBlYXQgdGhlIGFkZGl0aW9uYWwgdmFsdWVzLlxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFNpbmNlIHNlbmRPbmUgY2FsbHMgYXN5bmNocm9ub3VzbHkgLSB0aGVyZSBpcyBubyBjaGFuY2UgdGhhdFxuICAgICAgICAvLyB0aGlzLm9ic2VydmVycyB3aWxsIGJlY29tZSB1bmRlZmluZWQuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5vYnNlcnZlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZE9uZShpLCBmbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gQ2FsbCB0aGUgT2JzZXJ2ZXIgdmlhIG9uZSBvZiBpdCdzIGNhbGxiYWNrIGZ1bmN0aW9uLiBXZSBhcmUgY2FyZWZ1bCB0b1xuICAgIC8vIGNvbmZpcm0gdGhhdCB0aGUgb2JzZXJ2ZSBoYXMgbm90IGJlZW4gdW5zdWJzY3JpYmVkIHNpbmNlIHRoaXMgYXN5bmNocm9ub3VzXG4gICAgLy8gZnVuY3Rpb24gaGFkIGJlZW4gcXVldWVkLlxuICAgIHNlbmRPbmUoaSwgZm4pIHtcbiAgICAgICAgLy8gRXhlY3V0ZSB0aGUgY2FsbGJhY2sgYXN5bmNocm9ub3VzbHlcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgICAgICB0aGlzLnRhc2sudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5vYnNlcnZlcnMgIT09IHVuZGVmaW5lZCAmJiB0aGlzLm9ic2VydmVyc1tpXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgZm4odGhpcy5vYnNlcnZlcnNbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgZXhjZXB0aW9ucyByYWlzZWQgaW4gT2JzZXJ2ZXJzIG9yIG1pc3NpbmcgbWV0aG9kcyBvZiBhblxuICAgICAgICAgICAgICAgICAgICAvLyBPYnNlcnZlci5cbiAgICAgICAgICAgICAgICAgICAgLy8gTG9nIGVycm9yIHRvIGNvbnNvbGUuIGIvMzE0MDQ4MDZcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJiBjb25zb2xlLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2xvc2UoZXJyKSB7XG4gICAgICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZmluYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKGVyciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmZpbmFsRXJyb3IgPSBlcnI7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUHJveHkgaXMgbm8gbG9uZ2VyIG5lZWRlZCAtIGdhcmJhZ2UgY29sbGVjdCByZWZlcmVuY2VzXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICAgICAgdGhpcy50YXNrLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5vYnNlcnZlcnMgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLm9uTm9PYnNlcnZlcnMgPSB1bmRlZmluZWQ7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8qKiBUdXJuIHN5bmNocm9ub3VzIGZ1bmN0aW9uIGludG8gb25lIGNhbGxlZCBhc3luY2hyb25vdXNseS4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXR5cGVzXG5mdW5jdGlvbiBhc3luYyhmbiwgb25FcnJvcikge1xuICAgIHJldHVybiAoLi4uYXJncykgPT4ge1xuICAgICAgICBQcm9taXNlLnJlc29sdmUodHJ1ZSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGZuKC4uLmFyZ3MpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgaWYgKG9uRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBvbkVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbn1cbi8qKlxuICogUmV0dXJuIHRydWUgaWYgdGhlIG9iamVjdCBwYXNzZWQgaW4gaW1wbGVtZW50cyBhbnkgb2YgdGhlIG5hbWVkIG1ldGhvZHMuXG4gKi9cbmZ1bmN0aW9uIGltcGxlbWVudHNBbnlNZXRob2RzKG9iaiwgbWV0aG9kcykge1xuICAgIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JyB8fCBvYmogPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IG1ldGhvZCBvZiBtZXRob2RzKSB7XG4gICAgICAgIGlmIChtZXRob2QgaW4gb2JqICYmIHR5cGVvZiBvYmpbbWV0aG9kXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gbm9vcCgpIHtcbiAgICAvLyBkbyBub3RoaW5nXG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENoZWNrIHRvIG1ha2Ugc3VyZSB0aGUgYXBwcm9wcmlhdGUgbnVtYmVyIG9mIGFyZ3VtZW50cyBhcmUgcHJvdmlkZWQgZm9yIGEgcHVibGljIGZ1bmN0aW9uLlxuICogVGhyb3dzIGFuIGVycm9yIGlmIGl0IGZhaWxzLlxuICpcbiAqIEBwYXJhbSBmbk5hbWUgVGhlIGZ1bmN0aW9uIG5hbWVcbiAqIEBwYXJhbSBtaW5Db3VudCBUaGUgbWluaW11bSBudW1iZXIgb2YgYXJndW1lbnRzIHRvIGFsbG93IGZvciB0aGUgZnVuY3Rpb24gY2FsbFxuICogQHBhcmFtIG1heENvdW50IFRoZSBtYXhpbXVtIG51bWJlciBvZiBhcmd1bWVudCB0byBhbGxvdyBmb3IgdGhlIGZ1bmN0aW9uIGNhbGxcbiAqIEBwYXJhbSBhcmdDb3VudCBUaGUgYWN0dWFsIG51bWJlciBvZiBhcmd1bWVudHMgcHJvdmlkZWQuXG4gKi9cbmNvbnN0IHZhbGlkYXRlQXJnQ291bnQgPSBmdW5jdGlvbiAoZm5OYW1lLCBtaW5Db3VudCwgbWF4Q291bnQsIGFyZ0NvdW50KSB7XG4gICAgbGV0IGFyZ0Vycm9yO1xuICAgIGlmIChhcmdDb3VudCA8IG1pbkNvdW50KSB7XG4gICAgICAgIGFyZ0Vycm9yID0gJ2F0IGxlYXN0ICcgKyBtaW5Db3VudDtcbiAgICB9XG4gICAgZWxzZSBpZiAoYXJnQ291bnQgPiBtYXhDb3VudCkge1xuICAgICAgICBhcmdFcnJvciA9IG1heENvdW50ID09PSAwID8gJ25vbmUnIDogJ25vIG1vcmUgdGhhbiAnICsgbWF4Q291bnQ7XG4gICAgfVxuICAgIGlmIChhcmdFcnJvcikge1xuICAgICAgICBjb25zdCBlcnJvciA9IGZuTmFtZSArXG4gICAgICAgICAgICAnIGZhaWxlZDogV2FzIGNhbGxlZCB3aXRoICcgK1xuICAgICAgICAgICAgYXJnQ291bnQgK1xuICAgICAgICAgICAgKGFyZ0NvdW50ID09PSAxID8gJyBhcmd1bWVudC4nIDogJyBhcmd1bWVudHMuJykgK1xuICAgICAgICAgICAgJyBFeHBlY3RzICcgK1xuICAgICAgICAgICAgYXJnRXJyb3IgK1xuICAgICAgICAgICAgJy4nO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xuICAgIH1cbn07XG4vKipcbiAqIEdlbmVyYXRlcyBhIHN0cmluZyB0byBwcmVmaXggYW4gZXJyb3IgbWVzc2FnZSBhYm91dCBmYWlsZWQgYXJndW1lbnQgdmFsaWRhdGlvblxuICpcbiAqIEBwYXJhbSBmbk5hbWUgVGhlIGZ1bmN0aW9uIG5hbWVcbiAqIEBwYXJhbSBhcmdOYW1lIFRoZSBuYW1lIG9mIHRoZSBhcmd1bWVudFxuICogQHJldHVybiBUaGUgcHJlZml4IHRvIGFkZCB0byB0aGUgZXJyb3IgdGhyb3duIGZvciB2YWxpZGF0aW9uLlxuICovXG5mdW5jdGlvbiBlcnJvclByZWZpeChmbk5hbWUsIGFyZ05hbWUpIHtcbiAgICByZXR1cm4gYCR7Zm5OYW1lfSBmYWlsZWQ6ICR7YXJnTmFtZX0gYXJndW1lbnQgYDtcbn1cbi8qKlxuICogQHBhcmFtIGZuTmFtZVxuICogQHBhcmFtIGFyZ3VtZW50TnVtYmVyXG4gKiBAcGFyYW0gbmFtZXNwYWNlXG4gKiBAcGFyYW0gb3B0aW9uYWxcbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGVOYW1lc3BhY2UoZm5OYW1lLCBuYW1lc3BhY2UsIG9wdGlvbmFsKSB7XG4gICAgaWYgKG9wdGlvbmFsICYmICFuYW1lc3BhY2UpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG5hbWVzcGFjZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgLy9UT0RPOiBJIHNob3VsZCBkbyBtb3JlIHZhbGlkYXRpb24gaGVyZS4gV2Ugb25seSBhbGxvdyBjZXJ0YWluIGNoYXJzIGluIG5hbWVzcGFjZXMuXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsICduYW1lc3BhY2UnKSArICdtdXN0IGJlIGEgdmFsaWQgZmlyZWJhc2UgbmFtZXNwYWNlLicpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHZhbGlkYXRlQ2FsbGJhY2soZm5OYW1lLCBhcmd1bWVudE5hbWUsIFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHlwZXNcbmNhbGxiYWNrLCBvcHRpb25hbCkge1xuICAgIGlmIChvcHRpb25hbCAmJiAhY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsIGFyZ3VtZW50TmFtZSkgKyAnbXVzdCBiZSBhIHZhbGlkIGZ1bmN0aW9uLicpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHZhbGlkYXRlQ29udGV4dE9iamVjdChmbk5hbWUsIGFyZ3VtZW50TmFtZSwgY29udGV4dCwgb3B0aW9uYWwpIHtcbiAgICBpZiAob3B0aW9uYWwgJiYgIWNvbnRleHQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGNvbnRleHQgIT09ICdvYmplY3QnIHx8IGNvbnRleHQgPT09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yUHJlZml4KGZuTmFtZSwgYXJndW1lbnROYW1lKSArICdtdXN0IGJlIGEgdmFsaWQgY29udGV4dCBvYmplY3QuJyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gQ29kZSBvcmlnaW5hbGx5IGNhbWUgZnJvbSBnb29nLmNyeXB0LnN0cmluZ1RvVXRmOEJ5dGVBcnJheSwgYnV0IGZvciBzb21lIHJlYXNvbiB0aGV5XG4vLyBhdXRvbWF0aWNhbGx5IHJlcGxhY2VkICdcXHJcXG4nIHdpdGggJ1xcbicsIGFuZCB0aGV5IGRpZG4ndCBoYW5kbGUgc3Vycm9nYXRlIHBhaXJzLFxuLy8gc28gaXQncyBiZWVuIG1vZGlmaWVkLlxuLy8gTm90ZSB0aGF0IG5vdCBhbGwgVW5pY29kZSBjaGFyYWN0ZXJzIGFwcGVhciBhcyBzaW5nbGUgY2hhcmFjdGVycyBpbiBKYXZhU2NyaXB0IHN0cmluZ3MuXG4vLyBmcm9tQ2hhckNvZGUgcmV0dXJucyB0aGUgVVRGLTE2IGVuY29kaW5nIG9mIGEgY2hhcmFjdGVyIC0gc28gc29tZSBVbmljb2RlIGNoYXJhY3RlcnNcbi8vIHVzZSAyIGNoYXJhY3RlcnMgaW4gSmF2YVNjcmlwdC4gIEFsbCA0LWJ5dGUgVVRGLTggY2hhcmFjdGVycyBiZWdpbiB3aXRoIGEgZmlyc3Rcbi8vIGNoYXJhY3RlciBpbiB0aGUgcmFuZ2UgMHhEODAwIC0gMHhEQkZGICh0aGUgZmlyc3QgY2hhcmFjdGVyIG9mIGEgc28tY2FsbGVkIHN1cnJvZ2F0ZVxuLy8gcGFpcikuXG4vLyBTZWUgaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzUuMS8jc2VjLTE1LjEuM1xuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqL1xuY29uc3Qgc3RyaW5nVG9CeXRlQXJyYXkgPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgY29uc3Qgb3V0ID0gW107XG4gICAgbGV0IHAgPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIC8vIElzIHRoaXMgdGhlIGxlYWQgc3Vycm9nYXRlIGluIGEgc3Vycm9nYXRlIHBhaXI/XG4gICAgICAgIGlmIChjID49IDB4ZDgwMCAmJiBjIDw9IDB4ZGJmZikge1xuICAgICAgICAgICAgY29uc3QgaGlnaCA9IGMgLSAweGQ4MDA7IC8vIHRoZSBoaWdoIDEwIGJpdHMuXG4gICAgICAgICAgICBpKys7XG4gICAgICAgICAgICBhc3NlcnQoaSA8IHN0ci5sZW5ndGgsICdTdXJyb2dhdGUgcGFpciBtaXNzaW5nIHRyYWlsIHN1cnJvZ2F0ZS4nKTtcbiAgICAgICAgICAgIGNvbnN0IGxvdyA9IHN0ci5jaGFyQ29kZUF0KGkpIC0gMHhkYzAwOyAvLyB0aGUgbG93IDEwIGJpdHMuXG4gICAgICAgICAgICBjID0gMHgxMDAwMCArIChoaWdoIDw8IDEwKSArIGxvdztcbiAgICAgICAgfVxuICAgICAgICBpZiAoYyA8IDEyOCkge1xuICAgICAgICAgICAgb3V0W3ArK10gPSBjO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KSB7XG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDYpIHwgMTkyO1xuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjIDwgNjU1MzYpIHtcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTIpIHwgMjI0O1xuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxOCkgfCAyNDA7XG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiAxMikgJiA2MykgfCAxMjg7XG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG91dDtcbn07XG4vKipcbiAqIENhbGN1bGF0ZSBsZW5ndGggd2l0aG91dCBhY3R1YWxseSBjb252ZXJ0aW5nOyB1c2VmdWwgZm9yIGRvaW5nIGNoZWFwZXIgdmFsaWRhdGlvbi5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuY29uc3Qgc3RyaW5nTGVuZ3RoID0gZnVuY3Rpb24gKHN0cikge1xuICAgIGxldCBwID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIGlmIChjIDwgMTI4KSB7XG4gICAgICAgICAgICBwKys7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYyA8IDIwNDgpIHtcbiAgICAgICAgICAgIHAgKz0gMjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjID49IDB4ZDgwMCAmJiBjIDw9IDB4ZGJmZikge1xuICAgICAgICAgICAgLy8gTGVhZCBzdXJyb2dhdGUgb2YgYSBzdXJyb2dhdGUgcGFpci4gIFRoZSBwYWlyIHRvZ2V0aGVyIHdpbGwgdGFrZSA0IGJ5dGVzIHRvIHJlcHJlc2VudC5cbiAgICAgICAgICAgIHAgKz0gNDtcbiAgICAgICAgICAgIGkrKzsgLy8gc2tpcCB0cmFpbCBzdXJyb2dhdGUuXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwICs9IDM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHA7XG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDb3BpZWQgZnJvbSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjExNzUyM1xuICogR2VuZXJhdGVzIGEgbmV3IHV1aWQuXG4gKiBAcHVibGljXG4gKi9cbmNvbnN0IHV1aWR2NCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCBjID0+IHtcbiAgICAgICAgY29uc3QgciA9IChNYXRoLnJhbmRvbSgpICogMTYpIHwgMCwgdiA9IGMgPT09ICd4JyA/IHIgOiAociAmIDB4MykgfCAweDg7XG4gICAgICAgIHJldHVybiB2LnRvU3RyaW5nKDE2KTtcbiAgICB9KTtcbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRoZSBhbW91bnQgb2YgbWlsbGlzZWNvbmRzIHRvIGV4cG9uZW50aWFsbHkgaW5jcmVhc2UuXG4gKi9cbmNvbnN0IERFRkFVTFRfSU5URVJWQUxfTUlMTElTID0gMTAwMDtcbi8qKlxuICogVGhlIGZhY3RvciB0byBiYWNrb2ZmIGJ5LlxuICogU2hvdWxkIGJlIGEgbnVtYmVyIGdyZWF0ZXIgdGhhbiAxLlxuICovXG5jb25zdCBERUZBVUxUX0JBQ0tPRkZfRkFDVE9SID0gMjtcbi8qKlxuICogVGhlIG1heGltdW0gbWlsbGlzZWNvbmRzIHRvIGluY3JlYXNlIHRvLlxuICpcbiAqIDxwPlZpc2libGUgZm9yIHRlc3RpbmdcbiAqL1xuY29uc3QgTUFYX1ZBTFVFX01JTExJUyA9IDQgKiA2MCAqIDYwICogMTAwMDsgLy8gRm91ciBob3VycywgbGlrZSBpT1MgYW5kIEFuZHJvaWQuXG4vKipcbiAqIFRoZSBwZXJjZW50YWdlIG9mIGJhY2tvZmYgdGltZSB0byByYW5kb21pemUgYnkuXG4gKiBTZWVcbiAqIGh0dHA6Ly9nby9zYWZlLWNsaWVudC1iZWhhdmlvciNzdGVwLTEtZGV0ZXJtaW5lLXRoZS1hcHByb3ByaWF0ZS1yZXRyeS1pbnRlcnZhbC10by1oYW5kbGUtc3Bpa2UtdHJhZmZpY1xuICogZm9yIGNvbnRleHQuXG4gKlxuICogPHA+VmlzaWJsZSBmb3IgdGVzdGluZ1xuICovXG5jb25zdCBSQU5ET01fRkFDVE9SID0gMC41O1xuLyoqXG4gKiBCYXNlZCBvbiB0aGUgYmFja29mZiBtZXRob2QgZnJvbVxuICogaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9jbG9zdXJlLWxpYnJhcnkvYmxvYi9tYXN0ZXIvY2xvc3VyZS9nb29nL21hdGgvZXhwb25lbnRpYWxiYWNrb2ZmLmpzLlxuICogRXh0cmFjdGVkIGhlcmUgc28gd2UgZG9uJ3QgbmVlZCB0byBwYXNzIG1ldGFkYXRhIGFuZCBhIHN0YXRlZnVsIEV4cG9uZW50aWFsQmFja29mZiBvYmplY3QgYXJvdW5kLlxuICovXG5mdW5jdGlvbiBjYWxjdWxhdGVCYWNrb2ZmTWlsbGlzKGJhY2tvZmZDb3VudCwgaW50ZXJ2YWxNaWxsaXMgPSBERUZBVUxUX0lOVEVSVkFMX01JTExJUywgYmFja29mZkZhY3RvciA9IERFRkFVTFRfQkFDS09GRl9GQUNUT1IpIHtcbiAgICAvLyBDYWxjdWxhdGVzIGFuIGV4cG9uZW50aWFsbHkgaW5jcmVhc2luZyB2YWx1ZS5cbiAgICAvLyBEZXZpYXRpb246IGNhbGN1bGF0ZXMgdmFsdWUgZnJvbSBjb3VudCBhbmQgYSBjb25zdGFudCBpbnRlcnZhbCwgc28gd2Ugb25seSBuZWVkIHRvIHNhdmUgdmFsdWVcbiAgICAvLyBhbmQgY291bnQgdG8gcmVzdG9yZSBzdGF0ZS5cbiAgICBjb25zdCBjdXJyQmFzZVZhbHVlID0gaW50ZXJ2YWxNaWxsaXMgKiBNYXRoLnBvdyhiYWNrb2ZmRmFjdG9yLCBiYWNrb2ZmQ291bnQpO1xuICAgIC8vIEEgcmFuZG9tIFwiZnV6elwiIHRvIGF2b2lkIHdhdmVzIG9mIHJldHJpZXMuXG4gICAgLy8gRGV2aWF0aW9uOiByYW5kb21GYWN0b3IgaXMgcmVxdWlyZWQuXG4gICAgY29uc3QgcmFuZG9tV2FpdCA9IE1hdGgucm91bmQoXG4gICAgLy8gQSBmcmFjdGlvbiBvZiB0aGUgYmFja29mZiB2YWx1ZSB0byBhZGQvc3VidHJhY3QuXG4gICAgLy8gRGV2aWF0aW9uOiBjaGFuZ2VzIG11bHRpcGxpY2F0aW9uIG9yZGVyIHRvIGltcHJvdmUgcmVhZGFiaWxpdHkuXG4gICAgUkFORE9NX0ZBQ1RPUiAqXG4gICAgICAgIGN1cnJCYXNlVmFsdWUgKlxuICAgICAgICAvLyBBIHJhbmRvbSBmbG9hdCAocm91bmRlZCB0byBpbnQgYnkgTWF0aC5yb3VuZCBhYm92ZSkgaW4gdGhlIHJhbmdlIFstMSwgMV0uIERldGVybWluZXNcbiAgICAgICAgLy8gaWYgd2UgYWRkIG9yIHN1YnRyYWN0LlxuICAgICAgICAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKlxuICAgICAgICAyKTtcbiAgICAvLyBMaW1pdHMgYmFja29mZiB0byBtYXggdG8gYXZvaWQgZWZmZWN0aXZlbHkgcGVybWFuZW50IGJhY2tvZmYuXG4gICAgcmV0dXJuIE1hdGgubWluKE1BWF9WQUxVRV9NSUxMSVMsIGN1cnJCYXNlVmFsdWUgKyByYW5kb21XYWl0KTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUHJvdmlkZSBFbmdsaXNoIG9yZGluYWwgbGV0dGVycyBhZnRlciBhIG51bWJlclxuICovXG5mdW5jdGlvbiBvcmRpbmFsKGkpIHtcbiAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShpKSkge1xuICAgICAgICByZXR1cm4gYCR7aX1gO1xuICAgIH1cbiAgICByZXR1cm4gaSArIGluZGljYXRvcihpKTtcbn1cbmZ1bmN0aW9uIGluZGljYXRvcihpKSB7XG4gICAgaSA9IE1hdGguYWJzKGkpO1xuICAgIGNvbnN0IGNlbnQgPSBpICUgMTAwO1xuICAgIGlmIChjZW50ID49IDEwICYmIGNlbnQgPD0gMjApIHtcbiAgICAgICAgcmV0dXJuICd0aCc7XG4gICAgfVxuICAgIGNvbnN0IGRlYyA9IGkgJSAxMDtcbiAgICBpZiAoZGVjID09PSAxKSB7XG4gICAgICAgIHJldHVybiAnc3QnO1xuICAgIH1cbiAgICBpZiAoZGVjID09PSAyKSB7XG4gICAgICAgIHJldHVybiAnbmQnO1xuICAgIH1cbiAgICBpZiAoZGVjID09PSAzKSB7XG4gICAgICAgIHJldHVybiAncmQnO1xuICAgIH1cbiAgICByZXR1cm4gJ3RoJztcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmZ1bmN0aW9uIGdldE1vZHVsYXJJbnN0YW5jZShzZXJ2aWNlKSB7XG4gICAgaWYgKHNlcnZpY2UgJiYgc2VydmljZS5fZGVsZWdhdGUpIHtcbiAgICAgICAgcmV0dXJuIHNlcnZpY2UuX2RlbGVnYXRlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNlcnZpY2U7XG4gICAgfVxufVxuXG5leHBvcnQgeyBDT05TVEFOVFMsIERlY29kZUJhc2U2NFN0cmluZ0Vycm9yLCBEZWZlcnJlZCwgRXJyb3JGYWN0b3J5LCBGaXJlYmFzZUVycm9yLCBNQVhfVkFMVUVfTUlMTElTLCBSQU5ET01fRkFDVE9SLCBTaGExLCBhcmVDb29raWVzRW5hYmxlZCwgYXNzZXJ0LCBhc3NlcnRpb25FcnJvciwgYXN5bmMsIGJhc2U2NCwgYmFzZTY0RGVjb2RlLCBiYXNlNjRFbmNvZGUsIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nLCBjYWxjdWxhdGVCYWNrb2ZmTWlsbGlzLCBjb250YWlucywgY3JlYXRlTW9ja1VzZXJUb2tlbiwgY3JlYXRlU3Vic2NyaWJlLCBkZWNvZGUsIGRlZXBDb3B5LCBkZWVwRXF1YWwsIGRlZXBFeHRlbmQsIGVycm9yUHJlZml4LCBleHRyYWN0UXVlcnlzdHJpbmcsIGdldERlZmF1bHRBcHBDb25maWcsIGdldERlZmF1bHRFbXVsYXRvckhvc3QsIGdldERlZmF1bHRFbXVsYXRvckhvc3RuYW1lQW5kUG9ydCwgZ2V0RGVmYXVsdHMsIGdldEV4cGVyaW1lbnRhbFNldHRpbmcsIGdldEdsb2JhbCwgZ2V0TW9kdWxhckluc3RhbmNlLCBnZXRVQSwgaXNBZG1pbiwgaXNCcm93c2VyLCBpc0Jyb3dzZXJFeHRlbnNpb24sIGlzQ2xvdWRmbGFyZVdvcmtlciwgaXNFbGVjdHJvbiwgaXNFbXB0eSwgaXNJRSwgaXNJbmRleGVkREJBdmFpbGFibGUsIGlzTW9iaWxlQ29yZG92YSwgaXNOb2RlLCBpc05vZGVTZGssIGlzUmVhY3ROYXRpdmUsIGlzU2FmYXJpLCBpc1VXUCwgaXNWYWxpZEZvcm1hdCwgaXNWYWxpZFRpbWVzdGFtcCwgaXNXZWJXb3JrZXIsIGlzc3VlZEF0VGltZSwganNvbkV2YWwsIG1hcCwgb3JkaW5hbCwgcHJvbWlzZVdpdGhUaW1lb3V0LCBxdWVyeXN0cmluZywgcXVlcnlzdHJpbmdEZWNvZGUsIHNhZmVHZXQsIHN0cmluZ0xlbmd0aCwgc3RyaW5nVG9CeXRlQXJyYXksIHN0cmluZ2lmeSwgdXVpZHY0LCB2YWxpZGF0ZUFyZ0NvdW50LCB2YWxpZGF0ZUNhbGxiYWNrLCB2YWxpZGF0ZUNvbnRleHRPYmplY3QsIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUsIHZhbGlkYXRlTmFtZXNwYWNlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiaW1wb3J0IHsgRGVmZXJyZWQgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5cbi8qKlxuICogQ29tcG9uZW50IGZvciBzZXJ2aWNlIG5hbWUgVCwgZS5nLiBgYXV0aGAsIGBhdXRoLWludGVybmFsYFxuICovXG5jbGFzcyBDb21wb25lbnQge1xuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIHB1YmxpYyBzZXJ2aWNlIG5hbWUsIGUuZy4gYXBwLCBhdXRoLCBmaXJlc3RvcmUsIGRhdGFiYXNlXG4gICAgICogQHBhcmFtIGluc3RhbmNlRmFjdG9yeSBTZXJ2aWNlIGZhY3RvcnkgcmVzcG9uc2libGUgZm9yIGNyZWF0aW5nIHRoZSBwdWJsaWMgaW50ZXJmYWNlXG4gICAgICogQHBhcmFtIHR5cGUgd2hldGhlciB0aGUgc2VydmljZSBwcm92aWRlZCBieSB0aGUgY29tcG9uZW50IGlzIHB1YmxpYyBvciBwcml2YXRlXG4gICAgICovXG4gICAgY29uc3RydWN0b3IobmFtZSwgaW5zdGFuY2VGYWN0b3J5LCB0eXBlKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuaW5zdGFuY2VGYWN0b3J5ID0gaW5zdGFuY2VGYWN0b3J5O1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLm11bHRpcGxlSW5zdGFuY2VzID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQcm9wZXJ0aWVzIHRvIGJlIGFkZGVkIHRvIHRoZSBzZXJ2aWNlIG5hbWVzcGFjZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zZXJ2aWNlUHJvcHMgPSB7fTtcbiAgICAgICAgdGhpcy5pbnN0YW50aWF0aW9uTW9kZSA9IFwiTEFaWVwiIC8qIEluc3RhbnRpYXRpb25Nb2RlLkxBWlkgKi87XG4gICAgICAgIHRoaXMub25JbnN0YW5jZUNyZWF0ZWQgPSBudWxsO1xuICAgIH1cbiAgICBzZXRJbnN0YW50aWF0aW9uTW9kZShtb2RlKSB7XG4gICAgICAgIHRoaXMuaW5zdGFudGlhdGlvbk1vZGUgPSBtb2RlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgc2V0TXVsdGlwbGVJbnN0YW5jZXMobXVsdGlwbGVJbnN0YW5jZXMpIHtcbiAgICAgICAgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyA9IG11bHRpcGxlSW5zdGFuY2VzO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgc2V0U2VydmljZVByb3BzKHByb3BzKSB7XG4gICAgICAgIHRoaXMuc2VydmljZVByb3BzID0gcHJvcHM7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBzZXRJbnN0YW5jZUNyZWF0ZWRDYWxsYmFjayhjYWxsYmFjaykge1xuICAgICAgICB0aGlzLm9uSW5zdGFuY2VDcmVhdGVkID0gY2FsbGJhY2s7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNvbnN0IERFRkFVTFRfRU5UUllfTkFNRSA9ICdbREVGQVVMVF0nO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBQcm92aWRlciBmb3IgaW5zdGFuY2UgZm9yIHNlcnZpY2UgbmFtZSBULCBlLmcuICdhdXRoJywgJ2F1dGgtaW50ZXJuYWwnXG4gKiBOYW1lU2VydmljZU1hcHBpbmdbVF0gaXMgYW4gYWxpYXMgZm9yIHRoZSB0eXBlIG9mIHRoZSBpbnN0YW5jZVxuICovXG5jbGFzcyBQcm92aWRlciB7XG4gICAgY29uc3RydWN0b3IobmFtZSwgY29udGFpbmVyKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuaW5zdGFuY2VzID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLmluc3RhbmNlc0RlZmVycmVkID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLmluc3RhbmNlc09wdGlvbnMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMub25Jbml0Q2FsbGJhY2tzID0gbmV3IE1hcCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gaWRlbnRpZmllciBBIHByb3ZpZGVyIGNhbiBwcm92aWRlIG11bHRpcGxlIGluc3RhbmNlcyBvZiBhIHNlcnZpY2VcbiAgICAgKiBpZiB0aGlzLmNvbXBvbmVudC5tdWx0aXBsZUluc3RhbmNlcyBpcyB0cnVlLlxuICAgICAqL1xuICAgIGdldChpZGVudGlmaWVyKSB7XG4gICAgICAgIC8vIGlmIG11bHRpcGxlSW5zdGFuY2VzIGlzIG5vdCBzdXBwb3J0ZWQsIHVzZSB0aGUgZGVmYXVsdCBuYW1lXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgICAgIGlmICghdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5oYXMobm9ybWFsaXplZElkZW50aWZpZXIpKSB7XG4gICAgICAgICAgICBjb25zdCBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpO1xuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5zZXQobm9ybWFsaXplZElkZW50aWZpZXIsIGRlZmVycmVkKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQobm9ybWFsaXplZElkZW50aWZpZXIpIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5zaG91bGRBdXRvSW5pdGlhbGl6ZSgpKSB7XG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6ZSB0aGUgc2VydmljZSBpZiBpdCBjYW4gYmUgYXV0by1pbml0aWFsaXplZFxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXJcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShpbnN0YW5jZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSB0aHJvd3MgYW4gZXhjZXB0aW9uIGR1cmluZyBnZXQoKSwgaXQgc2hvdWxkIG5vdCBjYXVzZVxuICAgICAgICAgICAgICAgICAgICAvLyBhIGZhdGFsIGVycm9yLiBXZSBqdXN0IHJldHVybiB0aGUgdW5yZXNvbHZlZCBwcm9taXNlIGluIHRoaXMgY2FzZS5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZ2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyKS5wcm9taXNlO1xuICAgIH1cbiAgICBnZXRJbW1lZGlhdGUob3B0aW9ucykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIC8vIGlmIG11bHRpcGxlSW5zdGFuY2VzIGlzIG5vdCBzdXBwb3J0ZWQsIHVzZSB0aGUgZGVmYXVsdCBuYW1lXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmlkZW50aWZpZXIpO1xuICAgICAgICBjb25zdCBvcHRpb25hbCA9IChfYSA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5vcHRpb25hbCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQobm9ybWFsaXplZElkZW50aWZpZXIpIHx8XG4gICAgICAgICAgICB0aGlzLnNob3VsZEF1dG9Jbml0aWFsaXplKCkpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBJbiBjYXNlIGEgY29tcG9uZW50IGlzIG5vdCBpbml0aWFsaXplZCBhbmQgc2hvdWxkL2Nhbm5vdCBiZSBhdXRvLWluaXRpYWxpemVkIGF0IHRoZSBtb21lbnQsIHJldHVybiBudWxsIGlmIHRoZSBvcHRpb25hbCBmbGFnIGlzIHNldCwgb3IgdGhyb3dcbiAgICAgICAgICAgIGlmIChvcHRpb25hbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoYFNlcnZpY2UgJHt0aGlzLm5hbWV9IGlzIG5vdCBhdmFpbGFibGVgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRDb21wb25lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudDtcbiAgICB9XG4gICAgc2V0Q29tcG9uZW50KGNvbXBvbmVudCkge1xuICAgICAgICBpZiAoY29tcG9uZW50Lm5hbWUgIT09IHRoaXMubmFtZSkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYE1pc21hdGNoaW5nIENvbXBvbmVudCAke2NvbXBvbmVudC5uYW1lfSBmb3IgUHJvdmlkZXIgJHt0aGlzLm5hbWV9LmApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNvbXBvbmVudCkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYENvbXBvbmVudCBmb3IgJHt0aGlzLm5hbWV9IGhhcyBhbHJlYWR5IGJlZW4gcHJvdmlkZWRgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IGNvbXBvbmVudDtcbiAgICAgICAgLy8gcmV0dXJuIGVhcmx5IHdpdGhvdXQgYXR0ZW1wdGluZyB0byBpbml0aWFsaXplIHRoZSBjb21wb25lbnQgaWYgdGhlIGNvbXBvbmVudCByZXF1aXJlcyBleHBsaWNpdCBpbml0aWFsaXphdGlvbiAoY2FsbGluZyBgUHJvdmlkZXIuaW5pdGlhbGl6ZSgpYClcbiAgICAgICAgaWYgKCF0aGlzLnNob3VsZEF1dG9Jbml0aWFsaXplKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBpZiB0aGUgc2VydmljZSBpcyBlYWdlciwgaW5pdGlhbGl6ZSB0aGUgZGVmYXVsdCBpbnN0YW5jZVxuICAgICAgICBpZiAoaXNDb21wb25lbnRFYWdlcihjb21wb25lbnQpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7IGluc3RhbmNlSWRlbnRpZmllcjogREVGQVVMVF9FTlRSWV9OQU1FIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBpbnN0YW5jZSBmYWN0b3J5IGZvciBhbiBlYWdlciBDb21wb25lbnQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBkdXJpbmcgdGhlIGVhZ2VyXG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6YXRpb24sIGl0IHNob3VsZCBub3QgY2F1c2UgYSBmYXRhbCBlcnJvci5cbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBJbnZlc3RpZ2F0ZSBpZiB3ZSBuZWVkIHRvIG1ha2UgaXQgY29uZmlndXJhYmxlLCBiZWNhdXNlIHNvbWUgY29tcG9uZW50IG1heSB3YW50IHRvIGNhdXNlXG4gICAgICAgICAgICAgICAgLy8gYSBmYXRhbCBlcnJvciBpbiB0aGlzIGNhc2U/XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ3JlYXRlIHNlcnZpY2UgaW5zdGFuY2VzIGZvciB0aGUgcGVuZGluZyBwcm9taXNlcyBhbmQgcmVzb2x2ZSB0aGVtXG4gICAgICAgIC8vIE5PVEU6IGlmIHRoaXMubXVsdGlwbGVJbnN0YW5jZXMgaXMgZmFsc2UsIG9ubHkgdGhlIGRlZmF1bHQgaW5zdGFuY2Ugd2lsbCBiZSBjcmVhdGVkXG4gICAgICAgIC8vIGFuZCBhbGwgcHJvbWlzZXMgd2l0aCByZXNvbHZlIHdpdGggaXQgcmVnYXJkbGVzcyBvZiB0aGUgaWRlbnRpZmllci5cbiAgICAgICAgZm9yIChjb25zdCBbaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZURlZmVycmVkXSBvZiB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpbnN0YW5jZUlkZW50aWZpZXIpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBgZ2V0T3JJbml0aWFsaXplU2VydmljZSgpYCBzaG91bGQgYWx3YXlzIHJldHVybiBhIHZhbGlkIGluc3RhbmNlIHNpbmNlIGEgY29tcG9uZW50IGlzIGd1YXJhbnRlZWQuIHVzZSAhIHRvIG1ha2UgdHlwZXNjcmlwdCBoYXBweS5cbiAgICAgICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpbnN0YW5jZURlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBpbnN0YW5jZSBmYWN0b3J5IHRocm93cyBhbiBleGNlcHRpb24sIGl0IHNob3VsZCBub3QgY2F1c2VcbiAgICAgICAgICAgICAgICAvLyBhIGZhdGFsIGVycm9yLiBXZSBqdXN0IGxlYXZlIHRoZSBwcm9taXNlIHVucmVzb2x2ZWQuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2xlYXJJbnN0YW5jZShpZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XG4gICAgICAgIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZGVsZXRlKGlkZW50aWZpZXIpO1xuICAgICAgICB0aGlzLmluc3RhbmNlc09wdGlvbnMuZGVsZXRlKGlkZW50aWZpZXIpO1xuICAgICAgICB0aGlzLmluc3RhbmNlcy5kZWxldGUoaWRlbnRpZmllcik7XG4gICAgfVxuICAgIC8vIGFwcC5kZWxldGUoKSB3aWxsIGNhbGwgdGhpcyBtZXRob2Qgb24gZXZlcnkgcHJvdmlkZXIgdG8gZGVsZXRlIHRoZSBzZXJ2aWNlc1xuICAgIC8vIFRPRE86IHNob3VsZCB3ZSBtYXJrIHRoZSBwcm92aWRlciBhcyBkZWxldGVkP1xuICAgIGFzeW5jIGRlbGV0ZSgpIHtcbiAgICAgICAgY29uc3Qgc2VydmljZXMgPSBBcnJheS5mcm9tKHRoaXMuaW5zdGFuY2VzLnZhbHVlcygpKTtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgLi4uc2VydmljZXNcbiAgICAgICAgICAgICAgICAuZmlsdGVyKHNlcnZpY2UgPT4gJ0lOVEVSTkFMJyBpbiBzZXJ2aWNlKSAvLyBsZWdhY3kgc2VydmljZXNcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgIC5tYXAoc2VydmljZSA9PiBzZXJ2aWNlLklOVEVSTkFMLmRlbGV0ZSgpKSxcbiAgICAgICAgICAgIC4uLnNlcnZpY2VzXG4gICAgICAgICAgICAgICAgLmZpbHRlcihzZXJ2aWNlID0+ICdfZGVsZXRlJyBpbiBzZXJ2aWNlKSAvLyBtb2R1bGFyaXplZCBzZXJ2aWNlc1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgLm1hcChzZXJ2aWNlID0+IHNlcnZpY2UuX2RlbGV0ZSgpKVxuICAgICAgICBdKTtcbiAgICB9XG4gICAgaXNDb21wb25lbnRTZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudCAhPSBudWxsO1xuICAgIH1cbiAgICBpc0luaXRpYWxpemVkKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VzLmhhcyhpZGVudGlmaWVyKTtcbiAgICB9XG4gICAgZ2V0T3B0aW9ucyhpZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlc09wdGlvbnMuZ2V0KGlkZW50aWZpZXIpIHx8IHt9O1xuICAgIH1cbiAgICBpbml0aWFsaXplKG9wdHMgPSB7fSkge1xuICAgICAgICBjb25zdCB7IG9wdGlvbnMgPSB7fSB9ID0gb3B0cztcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihvcHRzLmluc3RhbmNlSWRlbnRpZmllcik7XG4gICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQobm9ybWFsaXplZElkZW50aWZpZXIpKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgJHt0aGlzLm5hbWV9KCR7bm9ybWFsaXplZElkZW50aWZpZXJ9KSBoYXMgYWxyZWFkeSBiZWVuIGluaXRpYWxpemVkYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmlzQ29tcG9uZW50U2V0KCkpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKGBDb21wb25lbnQgJHt0aGlzLm5hbWV9IGhhcyBub3QgYmVlbiByZWdpc3RlcmVkIHlldGApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHtcbiAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXIsXG4gICAgICAgICAgICBvcHRpb25zXG4gICAgICAgIH0pO1xuICAgICAgICAvLyByZXNvbHZlIGFueSBwZW5kaW5nIHByb21pc2Ugd2FpdGluZyBmb3IgdGhlIHNlcnZpY2UgaW5zdGFuY2VcbiAgICAgICAgZm9yIChjb25zdCBbaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZURlZmVycmVkXSBvZiB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZERlZmVycmVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGluc3RhbmNlSWRlbnRpZmllcik7XG4gICAgICAgICAgICBpZiAobm9ybWFsaXplZElkZW50aWZpZXIgPT09IG5vcm1hbGl6ZWREZWZlcnJlZElkZW50aWZpZXIpIHtcbiAgICAgICAgICAgICAgICBpbnN0YW5jZURlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbnN0YW5jZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgLSBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBpbnZva2VkICBhZnRlciB0aGUgcHJvdmlkZXIgaGFzIGJlZW4gaW5pdGlhbGl6ZWQgYnkgY2FsbGluZyBwcm92aWRlci5pbml0aWFsaXplKCkuXG4gICAgICogVGhlIGZ1bmN0aW9uIGlzIGludm9rZWQgU1lOQ0hST05PVVNMWSwgc28gaXQgc2hvdWxkIG5vdCBleGVjdXRlIGFueSBsb25ncnVubmluZyB0YXNrcyBpbiBvcmRlciB0byBub3QgYmxvY2sgdGhlIHByb2dyYW0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaWRlbnRpZmllciBBbiBvcHRpb25hbCBpbnN0YW5jZSBpZGVudGlmaWVyXG4gICAgICogQHJldHVybnMgYSBmdW5jdGlvbiB0byB1bnJlZ2lzdGVyIHRoZSBjYWxsYmFja1xuICAgICAqL1xuICAgIG9uSW5pdChjYWxsYmFjaywgaWRlbnRpZmllcikge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nQ2FsbGJhY2tzID0gKF9hID0gdGhpcy5vbkluaXRDYWxsYmFja3MuZ2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyKSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogbmV3IFNldCgpO1xuICAgICAgICBleGlzdGluZ0NhbGxiYWNrcy5hZGQoY2FsbGJhY2spO1xuICAgICAgICB0aGlzLm9uSW5pdENhbGxiYWNrcy5zZXQobm9ybWFsaXplZElkZW50aWZpZXIsIGV4aXN0aW5nQ2FsbGJhY2tzKTtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdJbnN0YW5jZSA9IHRoaXMuaW5zdGFuY2VzLmdldChub3JtYWxpemVkSWRlbnRpZmllcik7XG4gICAgICAgIGlmIChleGlzdGluZ0luc3RhbmNlKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhleGlzdGluZ0luc3RhbmNlLCBub3JtYWxpemVkSWRlbnRpZmllcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGV4aXN0aW5nQ2FsbGJhY2tzLmRlbGV0ZShjYWxsYmFjayk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludm9rZSBvbkluaXQgY2FsbGJhY2tzIHN5bmNocm9ub3VzbHlcbiAgICAgKiBAcGFyYW0gaW5zdGFuY2UgdGhlIHNlcnZpY2UgaW5zdGFuY2VgXG4gICAgICovXG4gICAgaW52b2tlT25Jbml0Q2FsbGJhY2tzKGluc3RhbmNlLCBpZGVudGlmaWVyKSB7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrcyA9IHRoaXMub25Jbml0Q2FsbGJhY2tzLmdldChpZGVudGlmaWVyKTtcbiAgICAgICAgaWYgKCFjYWxsYmFja3MpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIGNhbGxiYWNrcykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhpbnN0YW5jZSwgaWRlbnRpZmllcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoX2EpIHtcbiAgICAgICAgICAgICAgICAvLyBpZ25vcmUgZXJyb3JzIGluIHRoZSBvbkluaXQgY2FsbGJhY2tcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRPckluaXRpYWxpemVTZXJ2aWNlKHsgaW5zdGFuY2VJZGVudGlmaWVyLCBvcHRpb25zID0ge30gfSkge1xuICAgICAgICBsZXQgaW5zdGFuY2UgPSB0aGlzLmluc3RhbmNlcy5nZXQoaW5zdGFuY2VJZGVudGlmaWVyKTtcbiAgICAgICAgaWYgKCFpbnN0YW5jZSAmJiB0aGlzLmNvbXBvbmVudCkge1xuICAgICAgICAgICAgaW5zdGFuY2UgPSB0aGlzLmNvbXBvbmVudC5pbnN0YW5jZUZhY3RvcnkodGhpcy5jb250YWluZXIsIHtcbiAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZUlkZW50aWZpZXJGb3JGYWN0b3J5KGluc3RhbmNlSWRlbnRpZmllciksXG4gICAgICAgICAgICAgICAgb3B0aW9uc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlcy5zZXQoaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZSk7XG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlc09wdGlvbnMuc2V0KGluc3RhbmNlSWRlbnRpZmllciwgb3B0aW9ucyk7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEludm9rZSBvbkluaXQgbGlzdGVuZXJzLlxuICAgICAgICAgICAgICogTm90ZSB0aGlzLmNvbXBvbmVudC5vbkluc3RhbmNlQ3JlYXRlZCBpcyBkaWZmZXJlbnQsIHdoaWNoIGlzIHVzZWQgYnkgdGhlIGNvbXBvbmVudCBjcmVhdG9yLFxuICAgICAgICAgICAgICogd2hpbGUgb25Jbml0IGxpc3RlbmVycyBhcmUgcmVnaXN0ZXJlZCBieSBjb25zdW1lcnMgb2YgdGhlIHByb3ZpZGVyLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB0aGlzLmludm9rZU9uSW5pdENhbGxiYWNrcyhpbnN0YW5jZSwgaW5zdGFuY2VJZGVudGlmaWVyKTtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogT3JkZXIgaXMgaW1wb3J0YW50XG4gICAgICAgICAgICAgKiBvbkluc3RhbmNlQ3JlYXRlZCgpIHNob3VsZCBiZSBjYWxsZWQgYWZ0ZXIgdGhpcy5pbnN0YW5jZXMuc2V0KGluc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2UpOyB3aGljaFxuICAgICAgICAgICAgICogbWFrZXMgYGlzSW5pdGlhbGl6ZWQoKWAgcmV0dXJuIHRydWUuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbXBvbmVudC5vbkluc3RhbmNlQ3JlYXRlZCkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50Lm9uSW5zdGFuY2VDcmVhdGVkKHRoaXMuY29udGFpbmVyLCBpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlnbm9yZSBlcnJvcnMgaW4gdGhlIG9uSW5zdGFuY2VDcmVhdGVkQ2FsbGJhY2tcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluc3RhbmNlIHx8IG51bGw7XG4gICAgfVxuICAgIG5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbXBvbmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50Lm11bHRpcGxlSW5zdGFuY2VzID8gaWRlbnRpZmllciA6IERFRkFVTFRfRU5UUllfTkFNRTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBpZGVudGlmaWVyOyAvLyBhc3N1bWUgbXVsdGlwbGUgaW5zdGFuY2VzIGFyZSBzdXBwb3J0ZWQgYmVmb3JlIHRoZSBjb21wb25lbnQgaXMgcHJvdmlkZWQuXG4gICAgICAgIH1cbiAgICB9XG4gICAgc2hvdWxkQXV0b0luaXRpYWxpemUoKSB7XG4gICAgICAgIHJldHVybiAoISF0aGlzLmNvbXBvbmVudCAmJlxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuaW5zdGFudGlhdGlvbk1vZGUgIT09IFwiRVhQTElDSVRcIiAvKiBJbnN0YW50aWF0aW9uTW9kZS5FWFBMSUNJVCAqLyk7XG4gICAgfVxufVxuLy8gdW5kZWZpbmVkIHNob3VsZCBiZSBwYXNzZWQgdG8gdGhlIHNlcnZpY2UgZmFjdG9yeSBmb3IgdGhlIGRlZmF1bHQgaW5zdGFuY2VcbmZ1bmN0aW9uIG5vcm1hbGl6ZUlkZW50aWZpZXJGb3JGYWN0b3J5KGlkZW50aWZpZXIpIHtcbiAgICByZXR1cm4gaWRlbnRpZmllciA9PT0gREVGQVVMVF9FTlRSWV9OQU1FID8gdW5kZWZpbmVkIDogaWRlbnRpZmllcjtcbn1cbmZ1bmN0aW9uIGlzQ29tcG9uZW50RWFnZXIoY29tcG9uZW50KSB7XG4gICAgcmV0dXJuIGNvbXBvbmVudC5pbnN0YW50aWF0aW9uTW9kZSA9PT0gXCJFQUdFUlwiIC8qIEluc3RhbnRpYXRpb25Nb2RlLkVBR0VSICovO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDb21wb25lbnRDb250YWluZXIgdGhhdCBwcm92aWRlcyBQcm92aWRlcnMgZm9yIHNlcnZpY2UgbmFtZSBULCBlLmcuIGBhdXRoYCwgYGF1dGgtaW50ZXJuYWxgXG4gKi9cbmNsYXNzIENvbXBvbmVudENvbnRhaW5lciB7XG4gICAgY29uc3RydWN0b3IobmFtZSkge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLnByb3ZpZGVycyA9IG5ldyBNYXAoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29tcG9uZW50IENvbXBvbmVudCBiZWluZyBhZGRlZFxuICAgICAqIEBwYXJhbSBvdmVyd3JpdGUgV2hlbiBhIGNvbXBvbmVudCB3aXRoIHRoZSBzYW1lIG5hbWUgaGFzIGFscmVhZHkgYmVlbiByZWdpc3RlcmVkLFxuICAgICAqIGlmIG92ZXJ3cml0ZSBpcyB0cnVlOiBvdmVyd3JpdGUgdGhlIGV4aXN0aW5nIGNvbXBvbmVudCB3aXRoIHRoZSBuZXcgY29tcG9uZW50IGFuZCBjcmVhdGUgYSBuZXdcbiAgICAgKiBwcm92aWRlciB3aXRoIHRoZSBuZXcgY29tcG9uZW50LiBJdCBjYW4gYmUgdXNlZnVsIGluIHRlc3RzIHdoZXJlIHlvdSB3YW50IHRvIHVzZSBkaWZmZXJlbnQgbW9ja3NcbiAgICAgKiBmb3IgZGlmZmVyZW50IHRlc3RzLlxuICAgICAqIGlmIG92ZXJ3cml0ZSBpcyBmYWxzZTogdGhyb3cgYW4gZXhjZXB0aW9uXG4gICAgICovXG4gICAgYWRkQ29tcG9uZW50KGNvbXBvbmVudCkge1xuICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMuZ2V0UHJvdmlkZXIoY29tcG9uZW50Lm5hbWUpO1xuICAgICAgICBpZiAocHJvdmlkZXIuaXNDb21wb25lbnRTZXQoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb21wb25lbnQgJHtjb21wb25lbnQubmFtZX0gaGFzIGFscmVhZHkgYmVlbiByZWdpc3RlcmVkIHdpdGggJHt0aGlzLm5hbWV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcHJvdmlkZXIuc2V0Q29tcG9uZW50KGNvbXBvbmVudCk7XG4gICAgfVxuICAgIGFkZE9yT3ZlcndyaXRlQ29tcG9uZW50KGNvbXBvbmVudCkge1xuICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMuZ2V0UHJvdmlkZXIoY29tcG9uZW50Lm5hbWUpO1xuICAgICAgICBpZiAocHJvdmlkZXIuaXNDb21wb25lbnRTZXQoKSkge1xuICAgICAgICAgICAgLy8gZGVsZXRlIHRoZSBleGlzdGluZyBwcm92aWRlciBmcm9tIHRoZSBjb250YWluZXIsIHNvIHdlIGNhbiByZWdpc3RlciB0aGUgbmV3IGNvbXBvbmVudFxuICAgICAgICAgICAgdGhpcy5wcm92aWRlcnMuZGVsZXRlKGNvbXBvbmVudC5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBnZXRQcm92aWRlciBwcm92aWRlcyBhIHR5cGUgc2FmZSBpbnRlcmZhY2Ugd2hlcmUgaXQgY2FuIG9ubHkgYmUgY2FsbGVkIHdpdGggYSBmaWVsZCBuYW1lXG4gICAgICogcHJlc2VudCBpbiBOYW1lU2VydmljZU1hcHBpbmcgaW50ZXJmYWNlLlxuICAgICAqXG4gICAgICogRmlyZWJhc2UgU0RLcyBwcm92aWRpbmcgc2VydmljZXMgc2hvdWxkIGV4dGVuZCBOYW1lU2VydmljZU1hcHBpbmcgaW50ZXJmYWNlIHRvIHJlZ2lzdGVyXG4gICAgICogdGhlbXNlbHZlcy5cbiAgICAgKi9cbiAgICBnZXRQcm92aWRlcihuYW1lKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3ZpZGVycy5oYXMobmFtZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3ZpZGVycy5nZXQobmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gY3JlYXRlIGEgUHJvdmlkZXIgZm9yIGEgc2VydmljZSB0aGF0IGhhc24ndCByZWdpc3RlcmVkIHdpdGggRmlyZWJhc2VcbiAgICAgICAgY29uc3QgcHJvdmlkZXIgPSBuZXcgUHJvdmlkZXIobmFtZSwgdGhpcyk7XG4gICAgICAgIHRoaXMucHJvdmlkZXJzLnNldChuYW1lLCBwcm92aWRlcik7XG4gICAgICAgIHJldHVybiBwcm92aWRlcjtcbiAgICB9XG4gICAgZ2V0UHJvdmlkZXJzKCkge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnByb3ZpZGVycy52YWx1ZXMoKSk7XG4gICAgfVxufVxuXG5leHBvcnQgeyBDb21wb25lbnQsIENvbXBvbmVudENvbnRhaW5lciwgUHJvdmlkZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGNvbnRhaW5lciBmb3IgYWxsIG9mIHRoZSBMb2dnZXIgaW5zdGFuY2VzXG4gKi9cbmNvbnN0IGluc3RhbmNlcyA9IFtdO1xuLyoqXG4gKiBUaGUgSlMgU0RLIHN1cHBvcnRzIDUgbG9nIGxldmVscyBhbmQgYWxzbyBhbGxvd3MgYSB1c2VyIHRoZSBhYmlsaXR5IHRvXG4gKiBzaWxlbmNlIHRoZSBsb2dzIGFsdG9nZXRoZXIuXG4gKlxuICogVGhlIG9yZGVyIGlzIGEgZm9sbG93czpcbiAqIERFQlVHIDwgVkVSQk9TRSA8IElORk8gPCBXQVJOIDwgRVJST1JcbiAqXG4gKiBBbGwgb2YgdGhlIGxvZyB0eXBlcyBhYm92ZSB0aGUgY3VycmVudCBsb2cgbGV2ZWwgd2lsbCBiZSBjYXB0dXJlZCAoaS5lLiBpZlxuICogeW91IHNldCB0aGUgbG9nIGxldmVsIHRvIGBJTkZPYCwgZXJyb3JzIHdpbGwgc3RpbGwgYmUgbG9nZ2VkLCBidXQgYERFQlVHYCBhbmRcbiAqIGBWRVJCT1NFYCBsb2dzIHdpbGwgbm90KVxuICovXG52YXIgTG9nTGV2ZWw7XG4oZnVuY3Rpb24gKExvZ0xldmVsKSB7XG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJERUJVR1wiXSA9IDBdID0gXCJERUJVR1wiO1xuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiVkVSQk9TRVwiXSA9IDFdID0gXCJWRVJCT1NFXCI7XG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJJTkZPXCJdID0gMl0gPSBcIklORk9cIjtcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIldBUk5cIl0gPSAzXSA9IFwiV0FSTlwiO1xuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiRVJST1JcIl0gPSA0XSA9IFwiRVJST1JcIjtcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIlNJTEVOVFwiXSA9IDVdID0gXCJTSUxFTlRcIjtcbn0pKExvZ0xldmVsIHx8IChMb2dMZXZlbCA9IHt9KSk7XG5jb25zdCBsZXZlbFN0cmluZ1RvRW51bSA9IHtcbiAgICAnZGVidWcnOiBMb2dMZXZlbC5ERUJVRyxcbiAgICAndmVyYm9zZSc6IExvZ0xldmVsLlZFUkJPU0UsXG4gICAgJ2luZm8nOiBMb2dMZXZlbC5JTkZPLFxuICAgICd3YXJuJzogTG9nTGV2ZWwuV0FSTixcbiAgICAnZXJyb3InOiBMb2dMZXZlbC5FUlJPUixcbiAgICAnc2lsZW50JzogTG9nTGV2ZWwuU0lMRU5UXG59O1xuLyoqXG4gKiBUaGUgZGVmYXVsdCBsb2cgbGV2ZWxcbiAqL1xuY29uc3QgZGVmYXVsdExvZ0xldmVsID0gTG9nTGV2ZWwuSU5GTztcbi8qKlxuICogQnkgZGVmYXVsdCwgYGNvbnNvbGUuZGVidWdgIGlzIG5vdCBkaXNwbGF5ZWQgaW4gdGhlIGRldmVsb3BlciBjb25zb2xlIChpblxuICogY2hyb21lKS4gVG8gYXZvaWQgZm9yY2luZyB1c2VycyB0byBoYXZlIHRvIG9wdC1pbiB0byB0aGVzZSBsb2dzIHR3aWNlXG4gKiAoaS5lLiBvbmNlIGZvciBmaXJlYmFzZSwgYW5kIG9uY2UgaW4gdGhlIGNvbnNvbGUpLCB3ZSBhcmUgc2VuZGluZyBgREVCVUdgXG4gKiBsb2dzIHRvIHRoZSBgY29uc29sZS5sb2dgIGZ1bmN0aW9uLlxuICovXG5jb25zdCBDb25zb2xlTWV0aG9kID0ge1xuICAgIFtMb2dMZXZlbC5ERUJVR106ICdsb2cnLFxuICAgIFtMb2dMZXZlbC5WRVJCT1NFXTogJ2xvZycsXG4gICAgW0xvZ0xldmVsLklORk9dOiAnaW5mbycsXG4gICAgW0xvZ0xldmVsLldBUk5dOiAnd2FybicsXG4gICAgW0xvZ0xldmVsLkVSUk9SXTogJ2Vycm9yJ1xufTtcbi8qKlxuICogVGhlIGRlZmF1bHQgbG9nIGhhbmRsZXIgd2lsbCBmb3J3YXJkIERFQlVHLCBWRVJCT1NFLCBJTkZPLCBXQVJOLCBhbmQgRVJST1JcbiAqIG1lc3NhZ2VzIG9uIHRvIHRoZWlyIGNvcnJlc3BvbmRpbmcgY29uc29sZSBjb3VudGVycGFydHMgKGlmIHRoZSBsb2cgbWV0aG9kXG4gKiBpcyBzdXBwb3J0ZWQgYnkgdGhlIGN1cnJlbnQgbG9nIGxldmVsKVxuICovXG5jb25zdCBkZWZhdWx0TG9nSGFuZGxlciA9IChpbnN0YW5jZSwgbG9nVHlwZSwgLi4uYXJncykgPT4ge1xuICAgIGlmIChsb2dUeXBlIDwgaW5zdGFuY2UubG9nTGV2ZWwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgY29uc3QgbWV0aG9kID0gQ29uc29sZU1ldGhvZFtsb2dUeXBlXTtcbiAgICBpZiAobWV0aG9kKSB7XG4gICAgICAgIGNvbnNvbGVbbWV0aG9kXShgWyR7bm93fV0gICR7aW5zdGFuY2UubmFtZX06YCwgLi4uYXJncyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEF0dGVtcHRlZCB0byBsb2cgYSBtZXNzYWdlIHdpdGggYW4gaW52YWxpZCBsb2dUeXBlICh2YWx1ZTogJHtsb2dUeXBlfSlgKTtcbiAgICB9XG59O1xuY2xhc3MgTG9nZ2VyIHtcbiAgICAvKipcbiAgICAgKiBHaXZlcyB5b3UgYW4gaW5zdGFuY2Ugb2YgYSBMb2dnZXIgdG8gY2FwdHVyZSBtZXNzYWdlcyBhY2NvcmRpbmcgdG9cbiAgICAgKiBGaXJlYmFzZSdzIGxvZ2dpbmcgc2NoZW1lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgdGhhdCB0aGUgbG9ncyB3aWxsIGJlIGFzc29jaWF0ZWQgd2l0aFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG5hbWUpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBsb2cgbGV2ZWwgb2YgdGhlIGdpdmVuIExvZ2dlciBpbnN0YW5jZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2xvZ0xldmVsID0gZGVmYXVsdExvZ0xldmVsO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG1haW4gKGludGVybmFsKSBsb2cgaGFuZGxlciBmb3IgdGhlIExvZ2dlciBpbnN0YW5jZS5cbiAgICAgICAgICogQ2FuIGJlIHNldCB0byBhIG5ldyBmdW5jdGlvbiBpbiBpbnRlcm5hbCBwYWNrYWdlIGNvZGUgYnV0IG5vdCBieSB1c2VyLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlciA9IGRlZmF1bHRMb2dIYW5kbGVyO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG9wdGlvbmFsLCBhZGRpdGlvbmFsLCB1c2VyLWRlZmluZWQgbG9nIGhhbmRsZXIgZm9yIHRoZSBMb2dnZXIgaW5zdGFuY2UuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYXB0dXJlIHRoZSBjdXJyZW50IGluc3RhbmNlIGZvciBsYXRlciB1c2VcbiAgICAgICAgICovXG4gICAgICAgIGluc3RhbmNlcy5wdXNoKHRoaXMpO1xuICAgIH1cbiAgICBnZXQgbG9nTGV2ZWwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sb2dMZXZlbDtcbiAgICB9XG4gICAgc2V0IGxvZ0xldmVsKHZhbCkge1xuICAgICAgICBpZiAoISh2YWwgaW4gTG9nTGV2ZWwpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIHZhbHVlIFwiJHt2YWx9XCIgYXNzaWduZWQgdG8gXFxgbG9nTGV2ZWxcXGBgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9sb2dMZXZlbCA9IHZhbDtcbiAgICB9XG4gICAgLy8gV29ya2Fyb3VuZCBmb3Igc2V0dGVyL2dldHRlciBoYXZpbmcgdG8gYmUgdGhlIHNhbWUgdHlwZS5cbiAgICBzZXRMb2dMZXZlbCh2YWwpIHtcbiAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSB0eXBlb2YgdmFsID09PSAnc3RyaW5nJyA/IGxldmVsU3RyaW5nVG9FbnVtW3ZhbF0gOiB2YWw7XG4gICAgfVxuICAgIGdldCBsb2dIYW5kbGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbG9nSGFuZGxlcjtcbiAgICB9XG4gICAgc2V0IGxvZ0hhbmRsZXIodmFsKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBhc3NpZ25lZCB0byBgbG9nSGFuZGxlcmAgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlciA9IHZhbDtcbiAgICB9XG4gICAgZ2V0IHVzZXJMb2dIYW5kbGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdXNlckxvZ0hhbmRsZXI7XG4gICAgfVxuICAgIHNldCB1c2VyTG9nSGFuZGxlcih2YWwpIHtcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgPSB2YWw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBmdW5jdGlvbnMgYmVsb3cgYXJlIGFsbCBiYXNlZCBvbiB0aGUgYGNvbnNvbGVgIGludGVyZmFjZVxuICAgICAqL1xuICAgIGRlYnVnKC4uLmFyZ3MpIHtcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuREVCVUcsIC4uLmFyZ3MpO1xuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLkRFQlVHLCAuLi5hcmdzKTtcbiAgICB9XG4gICAgbG9nKC4uLmFyZ3MpIHtcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiZcbiAgICAgICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLlZFUkJPU0UsIC4uLmFyZ3MpO1xuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLlZFUkJPU0UsIC4uLmFyZ3MpO1xuICAgIH1cbiAgICBpbmZvKC4uLmFyZ3MpIHtcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuSU5GTywgLi4uYXJncyk7XG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuSU5GTywgLi4uYXJncyk7XG4gICAgfVxuICAgIHdhcm4oLi4uYXJncykge1xuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5XQVJOLCAuLi5hcmdzKTtcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5XQVJOLCAuLi5hcmdzKTtcbiAgICB9XG4gICAgZXJyb3IoLi4uYXJncykge1xuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5FUlJPUiwgLi4uYXJncyk7XG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuRVJST1IsIC4uLmFyZ3MpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHNldExvZ0xldmVsKGxldmVsKSB7XG4gICAgaW5zdGFuY2VzLmZvckVhY2goaW5zdCA9PiB7XG4gICAgICAgIGluc3Quc2V0TG9nTGV2ZWwobGV2ZWwpO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gc2V0VXNlckxvZ0hhbmRsZXIobG9nQ2FsbGJhY2ssIG9wdGlvbnMpIHtcbiAgICBmb3IgKGNvbnN0IGluc3RhbmNlIG9mIGluc3RhbmNlcykge1xuICAgICAgICBsZXQgY3VzdG9tTG9nTGV2ZWwgPSBudWxsO1xuICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmxldmVsKSB7XG4gICAgICAgICAgICBjdXN0b21Mb2dMZXZlbCA9IGxldmVsU3RyaW5nVG9FbnVtW29wdGlvbnMubGV2ZWxdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsb2dDYWxsYmFjayA9PT0gbnVsbCkge1xuICAgICAgICAgICAgaW5zdGFuY2UudXNlckxvZ0hhbmRsZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaW5zdGFuY2UudXNlckxvZ0hhbmRsZXIgPSAoaW5zdGFuY2UsIGxldmVsLCAuLi5hcmdzKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGFyZ3NcbiAgICAgICAgICAgICAgICAgICAgLm1hcChhcmcgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXJnID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBhcmcgPT09ICdudW1iZXInIHx8IHR5cGVvZiBhcmcgPT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZy50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFyZyBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJnLm1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShhcmcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGlnbm9yZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoYXJnID0+IGFyZylcbiAgICAgICAgICAgICAgICAgICAgLmpvaW4oJyAnKTtcbiAgICAgICAgICAgICAgICBpZiAobGV2ZWwgPj0gKGN1c3RvbUxvZ0xldmVsICE9PSBudWxsICYmIGN1c3RvbUxvZ0xldmVsICE9PSB2b2lkIDAgPyBjdXN0b21Mb2dMZXZlbCA6IGluc3RhbmNlLmxvZ0xldmVsKSkge1xuICAgICAgICAgICAgICAgICAgICBsb2dDYWxsYmFjayh7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXZlbDogTG9nTGV2ZWxbbGV2ZWxdLnRvTG93ZXJDYXNlKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXJncyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGluc3RhbmNlLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IHsgTG9nTGV2ZWwsIExvZ2dlciwgc2V0TG9nTGV2ZWwsIHNldFVzZXJMb2dIYW5kbGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiY29uc3QgaW5zdGFuY2VPZkFueSA9IChvYmplY3QsIGNvbnN0cnVjdG9ycykgPT4gY29uc3RydWN0b3JzLnNvbWUoKGMpID0+IG9iamVjdCBpbnN0YW5jZW9mIGMpO1xuXG5sZXQgaWRiUHJveHlhYmxlVHlwZXM7XG5sZXQgY3Vyc29yQWR2YW5jZU1ldGhvZHM7XG4vLyBUaGlzIGlzIGEgZnVuY3Rpb24gdG8gcHJldmVudCBpdCB0aHJvd2luZyB1cCBpbiBub2RlIGVudmlyb25tZW50cy5cbmZ1bmN0aW9uIGdldElkYlByb3h5YWJsZVR5cGVzKCkge1xuICAgIHJldHVybiAoaWRiUHJveHlhYmxlVHlwZXMgfHxcbiAgICAgICAgKGlkYlByb3h5YWJsZVR5cGVzID0gW1xuICAgICAgICAgICAgSURCRGF0YWJhc2UsXG4gICAgICAgICAgICBJREJPYmplY3RTdG9yZSxcbiAgICAgICAgICAgIElEQkluZGV4LFxuICAgICAgICAgICAgSURCQ3Vyc29yLFxuICAgICAgICAgICAgSURCVHJhbnNhY3Rpb24sXG4gICAgICAgIF0pKTtcbn1cbi8vIFRoaXMgaXMgYSBmdW5jdGlvbiB0byBwcmV2ZW50IGl0IHRocm93aW5nIHVwIGluIG5vZGUgZW52aXJvbm1lbnRzLlxuZnVuY3Rpb24gZ2V0Q3Vyc29yQWR2YW5jZU1ldGhvZHMoKSB7XG4gICAgcmV0dXJuIChjdXJzb3JBZHZhbmNlTWV0aG9kcyB8fFxuICAgICAgICAoY3Vyc29yQWR2YW5jZU1ldGhvZHMgPSBbXG4gICAgICAgICAgICBJREJDdXJzb3IucHJvdG90eXBlLmFkdmFuY2UsXG4gICAgICAgICAgICBJREJDdXJzb3IucHJvdG90eXBlLmNvbnRpbnVlLFxuICAgICAgICAgICAgSURCQ3Vyc29yLnByb3RvdHlwZS5jb250aW51ZVByaW1hcnlLZXksXG4gICAgICAgIF0pKTtcbn1cbmNvbnN0IGN1cnNvclJlcXVlc3RNYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgdHJhbnNhY3Rpb25Eb25lTWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHRyYW5zYWN0aW9uU3RvcmVOYW1lc01hcCA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCB0cmFuc2Zvcm1DYWNoZSA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCByZXZlcnNlVHJhbnNmb3JtQ2FjaGUgPSBuZXcgV2Vha01hcCgpO1xuZnVuY3Rpb24gcHJvbWlzaWZ5UmVxdWVzdChyZXF1ZXN0KSB7XG4gICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgdW5saXN0ZW4gPSAoKSA9PiB7XG4gICAgICAgICAgICByZXF1ZXN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N1Y2Nlc3MnLCBzdWNjZXNzKTtcbiAgICAgICAgICAgIHJlcXVlc3QucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvcik7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKHdyYXAocmVxdWVzdC5yZXN1bHQpKTtcbiAgICAgICAgICAgIHVubGlzdGVuKCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGVycm9yID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVqZWN0KHJlcXVlc3QuZXJyb3IpO1xuICAgICAgICAgICAgdW5saXN0ZW4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdzdWNjZXNzJywgc3VjY2Vzcyk7XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvcik7XG4gICAgfSk7XG4gICAgcHJvbWlzZVxuICAgICAgICAudGhlbigodmFsdWUpID0+IHtcbiAgICAgICAgLy8gU2luY2UgY3Vyc29yaW5nIHJldXNlcyB0aGUgSURCUmVxdWVzdCAoKnNpZ2gqKSwgd2UgY2FjaGUgaXQgZm9yIGxhdGVyIHJldHJpZXZhbFxuICAgICAgICAvLyAoc2VlIHdyYXBGdW5jdGlvbikuXG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIElEQkN1cnNvcikge1xuICAgICAgICAgICAgY3Vyc29yUmVxdWVzdE1hcC5zZXQodmFsdWUsIHJlcXVlc3QpO1xuICAgICAgICB9XG4gICAgICAgIC8vIENhdGNoaW5nIHRvIGF2b2lkIFwiVW5jYXVnaHQgUHJvbWlzZSBleGNlcHRpb25zXCJcbiAgICB9KVxuICAgICAgICAuY2F0Y2goKCkgPT4geyB9KTtcbiAgICAvLyBUaGlzIG1hcHBpbmcgZXhpc3RzIGluIHJldmVyc2VUcmFuc2Zvcm1DYWNoZSBidXQgZG9lc24ndCBkb2Vzbid0IGV4aXN0IGluIHRyYW5zZm9ybUNhY2hlLiBUaGlzXG4gICAgLy8gaXMgYmVjYXVzZSB3ZSBjcmVhdGUgbWFueSBwcm9taXNlcyBmcm9tIGEgc2luZ2xlIElEQlJlcXVlc3QuXG4gICAgcmV2ZXJzZVRyYW5zZm9ybUNhY2hlLnNldChwcm9taXNlLCByZXF1ZXN0KTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cbmZ1bmN0aW9uIGNhY2hlRG9uZVByb21pc2VGb3JUcmFuc2FjdGlvbih0eCkge1xuICAgIC8vIEVhcmx5IGJhaWwgaWYgd2UndmUgYWxyZWFkeSBjcmVhdGVkIGEgZG9uZSBwcm9taXNlIGZvciB0aGlzIHRyYW5zYWN0aW9uLlxuICAgIGlmICh0cmFuc2FjdGlvbkRvbmVNYXAuaGFzKHR4KSlcbiAgICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IGRvbmUgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IHVubGlzdGVuID0gKCkgPT4ge1xuICAgICAgICAgICAgdHgucmVtb3ZlRXZlbnRMaXN0ZW5lcignY29tcGxldGUnLCBjb21wbGV0ZSk7XG4gICAgICAgICAgICB0eC5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIGVycm9yKTtcbiAgICAgICAgICAgIHR4LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgZXJyb3IpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBjb21wbGV0ZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIHVubGlzdGVuKCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGVycm9yID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVqZWN0KHR4LmVycm9yIHx8IG5ldyBET01FeGNlcHRpb24oJ0Fib3J0RXJyb3InLCAnQWJvcnRFcnJvcicpKTtcbiAgICAgICAgICAgIHVubGlzdGVuKCk7XG4gICAgICAgIH07XG4gICAgICAgIHR4LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbXBsZXRlJywgY29tcGxldGUpO1xuICAgICAgICB0eC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGVycm9yKTtcbiAgICAgICAgdHguYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBlcnJvcik7XG4gICAgfSk7XG4gICAgLy8gQ2FjaGUgaXQgZm9yIGxhdGVyIHJldHJpZXZhbC5cbiAgICB0cmFuc2FjdGlvbkRvbmVNYXAuc2V0KHR4LCBkb25lKTtcbn1cbmxldCBpZGJQcm94eVRyYXBzID0ge1xuICAgIGdldCh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSB7XG4gICAgICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBJREJUcmFuc2FjdGlvbikge1xuICAgICAgICAgICAgLy8gU3BlY2lhbCBoYW5kbGluZyBmb3IgdHJhbnNhY3Rpb24uZG9uZS5cbiAgICAgICAgICAgIGlmIChwcm9wID09PSAnZG9uZScpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zYWN0aW9uRG9uZU1hcC5nZXQodGFyZ2V0KTtcbiAgICAgICAgICAgIC8vIFBvbHlmaWxsIGZvciBvYmplY3RTdG9yZU5hbWVzIGJlY2F1c2Ugb2YgRWRnZS5cbiAgICAgICAgICAgIGlmIChwcm9wID09PSAnb2JqZWN0U3RvcmVOYW1lcycpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0Lm9iamVjdFN0b3JlTmFtZXMgfHwgdHJhbnNhY3Rpb25TdG9yZU5hbWVzTWFwLmdldCh0YXJnZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gTWFrZSB0eC5zdG9yZSByZXR1cm4gdGhlIG9ubHkgc3RvcmUgaW4gdGhlIHRyYW5zYWN0aW9uLCBvciB1bmRlZmluZWQgaWYgdGhlcmUgYXJlIG1hbnkuXG4gICAgICAgICAgICBpZiAocHJvcCA9PT0gJ3N0b3JlJykge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWNlaXZlci5vYmplY3RTdG9yZU5hbWVzWzFdXG4gICAgICAgICAgICAgICAgICAgID8gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgIDogcmVjZWl2ZXIub2JqZWN0U3RvcmUocmVjZWl2ZXIub2JqZWN0U3RvcmVOYW1lc1swXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gRWxzZSB0cmFuc2Zvcm0gd2hhdGV2ZXIgd2UgZ2V0IGJhY2suXG4gICAgICAgIHJldHVybiB3cmFwKHRhcmdldFtwcm9wXSk7XG4gICAgfSxcbiAgICBzZXQodGFyZ2V0LCBwcm9wLCB2YWx1ZSkge1xuICAgICAgICB0YXJnZXRbcHJvcF0gPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBoYXModGFyZ2V0LCBwcm9wKSB7XG4gICAgICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBJREJUcmFuc2FjdGlvbiAmJlxuICAgICAgICAgICAgKHByb3AgPT09ICdkb25lJyB8fCBwcm9wID09PSAnc3RvcmUnKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHByb3AgaW4gdGFyZ2V0O1xuICAgIH0sXG59O1xuZnVuY3Rpb24gcmVwbGFjZVRyYXBzKGNhbGxiYWNrKSB7XG4gICAgaWRiUHJveHlUcmFwcyA9IGNhbGxiYWNrKGlkYlByb3h5VHJhcHMpO1xufVxuZnVuY3Rpb24gd3JhcEZ1bmN0aW9uKGZ1bmMpIHtcbiAgICAvLyBEdWUgdG8gZXhwZWN0ZWQgb2JqZWN0IGVxdWFsaXR5ICh3aGljaCBpcyBlbmZvcmNlZCBieSB0aGUgY2FjaGluZyBpbiBgd3JhcGApLCB3ZVxuICAgIC8vIG9ubHkgY3JlYXRlIG9uZSBuZXcgZnVuYyBwZXIgZnVuYy5cbiAgICAvLyBFZGdlIGRvZXNuJ3Qgc3VwcG9ydCBvYmplY3RTdG9yZU5hbWVzIChib29vKSwgc28gd2UgcG9seWZpbGwgaXQgaGVyZS5cbiAgICBpZiAoZnVuYyA9PT0gSURCRGF0YWJhc2UucHJvdG90eXBlLnRyYW5zYWN0aW9uICYmXG4gICAgICAgICEoJ29iamVjdFN0b3JlTmFtZXMnIGluIElEQlRyYW5zYWN0aW9uLnByb3RvdHlwZSkpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzdG9yZU5hbWVzLCAuLi5hcmdzKSB7XG4gICAgICAgICAgICBjb25zdCB0eCA9IGZ1bmMuY2FsbCh1bndyYXAodGhpcyksIHN0b3JlTmFtZXMsIC4uLmFyZ3MpO1xuICAgICAgICAgICAgdHJhbnNhY3Rpb25TdG9yZU5hbWVzTWFwLnNldCh0eCwgc3RvcmVOYW1lcy5zb3J0ID8gc3RvcmVOYW1lcy5zb3J0KCkgOiBbc3RvcmVOYW1lc10pO1xuICAgICAgICAgICAgcmV0dXJuIHdyYXAodHgpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvLyBDdXJzb3IgbWV0aG9kcyBhcmUgc3BlY2lhbCwgYXMgdGhlIGJlaGF2aW91ciBpcyBhIGxpdHRsZSBtb3JlIGRpZmZlcmVudCB0byBzdGFuZGFyZCBJREIuIEluXG4gICAgLy8gSURCLCB5b3UgYWR2YW5jZSB0aGUgY3Vyc29yIGFuZCB3YWl0IGZvciBhIG5ldyAnc3VjY2Vzcycgb24gdGhlIElEQlJlcXVlc3QgdGhhdCBnYXZlIHlvdSB0aGVcbiAgICAvLyBjdXJzb3IuIEl0J3Mga2luZGEgbGlrZSBhIHByb21pc2UgdGhhdCBjYW4gcmVzb2x2ZSB3aXRoIG1hbnkgdmFsdWVzLiBUaGF0IGRvZXNuJ3QgbWFrZSBzZW5zZVxuICAgIC8vIHdpdGggcmVhbCBwcm9taXNlcywgc28gZWFjaCBhZHZhbmNlIG1ldGhvZHMgcmV0dXJucyBhIG5ldyBwcm9taXNlIGZvciB0aGUgY3Vyc29yIG9iamVjdCwgb3JcbiAgICAvLyB1bmRlZmluZWQgaWYgdGhlIGVuZCBvZiB0aGUgY3Vyc29yIGhhcyBiZWVuIHJlYWNoZWQuXG4gICAgaWYgKGdldEN1cnNvckFkdmFuY2VNZXRob2RzKCkuaW5jbHVkZXMoZnVuYykpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAvLyBDYWxsaW5nIHRoZSBvcmlnaW5hbCBmdW5jdGlvbiB3aXRoIHRoZSBwcm94eSBhcyAndGhpcycgY2F1c2VzIElMTEVHQUwgSU5WT0NBVElPTiwgc28gd2UgdXNlXG4gICAgICAgICAgICAvLyB0aGUgb3JpZ2luYWwgb2JqZWN0LlxuICAgICAgICAgICAgZnVuYy5hcHBseSh1bndyYXAodGhpcyksIGFyZ3MpO1xuICAgICAgICAgICAgcmV0dXJuIHdyYXAoY3Vyc29yUmVxdWVzdE1hcC5nZXQodGhpcykpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgLy8gQ2FsbGluZyB0aGUgb3JpZ2luYWwgZnVuY3Rpb24gd2l0aCB0aGUgcHJveHkgYXMgJ3RoaXMnIGNhdXNlcyBJTExFR0FMIElOVk9DQVRJT04sIHNvIHdlIHVzZVxuICAgICAgICAvLyB0aGUgb3JpZ2luYWwgb2JqZWN0LlxuICAgICAgICByZXR1cm4gd3JhcChmdW5jLmFwcGx5KHVud3JhcCh0aGlzKSwgYXJncykpO1xuICAgIH07XG59XG5mdW5jdGlvbiB0cmFuc2Zvcm1DYWNoYWJsZVZhbHVlKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgcmV0dXJuIHdyYXBGdW5jdGlvbih2YWx1ZSk7XG4gICAgLy8gVGhpcyBkb2Vzbid0IHJldHVybiwgaXQganVzdCBjcmVhdGVzIGEgJ2RvbmUnIHByb21pc2UgZm9yIHRoZSB0cmFuc2FjdGlvbixcbiAgICAvLyB3aGljaCBpcyBsYXRlciByZXR1cm5lZCBmb3IgdHJhbnNhY3Rpb24uZG9uZSAoc2VlIGlkYk9iamVjdEhhbmRsZXIpLlxuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIElEQlRyYW5zYWN0aW9uKVxuICAgICAgICBjYWNoZURvbmVQcm9taXNlRm9yVHJhbnNhY3Rpb24odmFsdWUpO1xuICAgIGlmIChpbnN0YW5jZU9mQW55KHZhbHVlLCBnZXRJZGJQcm94eWFibGVUeXBlcygpKSlcbiAgICAgICAgcmV0dXJuIG5ldyBQcm94eSh2YWx1ZSwgaWRiUHJveHlUcmFwcyk7XG4gICAgLy8gUmV0dXJuIHRoZSBzYW1lIHZhbHVlIGJhY2sgaWYgd2UncmUgbm90IGdvaW5nIHRvIHRyYW5zZm9ybSBpdC5cbiAgICByZXR1cm4gdmFsdWU7XG59XG5mdW5jdGlvbiB3cmFwKHZhbHVlKSB7XG4gICAgLy8gV2Ugc29tZXRpbWVzIGdlbmVyYXRlIG11bHRpcGxlIHByb21pc2VzIGZyb20gYSBzaW5nbGUgSURCUmVxdWVzdCAoZWcgd2hlbiBjdXJzb3JpbmcpLCBiZWNhdXNlXG4gICAgLy8gSURCIGlzIHdlaXJkIGFuZCBhIHNpbmdsZSBJREJSZXF1ZXN0IGNhbiB5aWVsZCBtYW55IHJlc3BvbnNlcywgc28gdGhlc2UgY2FuJ3QgYmUgY2FjaGVkLlxuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIElEQlJlcXVlc3QpXG4gICAgICAgIHJldHVybiBwcm9taXNpZnlSZXF1ZXN0KHZhbHVlKTtcbiAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IHRyYW5zZm9ybWVkIHRoaXMgdmFsdWUgYmVmb3JlLCByZXVzZSB0aGUgdHJhbnNmb3JtZWQgdmFsdWUuXG4gICAgLy8gVGhpcyBpcyBmYXN0ZXIsIGJ1dCBpdCBhbHNvIHByb3ZpZGVzIG9iamVjdCBlcXVhbGl0eS5cbiAgICBpZiAodHJhbnNmb3JtQ2FjaGUuaGFzKHZhbHVlKSlcbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybUNhY2hlLmdldCh2YWx1ZSk7XG4gICAgY29uc3QgbmV3VmFsdWUgPSB0cmFuc2Zvcm1DYWNoYWJsZVZhbHVlKHZhbHVlKTtcbiAgICAvLyBOb3QgYWxsIHR5cGVzIGFyZSB0cmFuc2Zvcm1lZC5cbiAgICAvLyBUaGVzZSBtYXkgYmUgcHJpbWl0aXZlIHR5cGVzLCBzbyB0aGV5IGNhbid0IGJlIFdlYWtNYXAga2V5cy5cbiAgICBpZiAobmV3VmFsdWUgIT09IHZhbHVlKSB7XG4gICAgICAgIHRyYW5zZm9ybUNhY2hlLnNldCh2YWx1ZSwgbmV3VmFsdWUpO1xuICAgICAgICByZXZlcnNlVHJhbnNmb3JtQ2FjaGUuc2V0KG5ld1ZhbHVlLCB2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiBuZXdWYWx1ZTtcbn1cbmNvbnN0IHVud3JhcCA9ICh2YWx1ZSkgPT4gcmV2ZXJzZVRyYW5zZm9ybUNhY2hlLmdldCh2YWx1ZSk7XG5cbmV4cG9ydCB7IHJldmVyc2VUcmFuc2Zvcm1DYWNoZSBhcyBhLCBpbnN0YW5jZU9mQW55IGFzIGksIHJlcGxhY2VUcmFwcyBhcyByLCB1bndyYXAgYXMgdSwgd3JhcCBhcyB3IH07XG4iLCJpbXBvcnQgeyB3IGFzIHdyYXAsIHIgYXMgcmVwbGFjZVRyYXBzIH0gZnJvbSAnLi93cmFwLWlkYi12YWx1ZS5qcyc7XG5leHBvcnQgeyB1IGFzIHVud3JhcCwgdyBhcyB3cmFwIH0gZnJvbSAnLi93cmFwLWlkYi12YWx1ZS5qcyc7XG5cbi8qKlxuICogT3BlbiBhIGRhdGFiYXNlLlxuICpcbiAqIEBwYXJhbSBuYW1lIE5hbWUgb2YgdGhlIGRhdGFiYXNlLlxuICogQHBhcmFtIHZlcnNpb24gU2NoZW1hIHZlcnNpb24uXG4gKiBAcGFyYW0gY2FsbGJhY2tzIEFkZGl0aW9uYWwgY2FsbGJhY2tzLlxuICovXG5mdW5jdGlvbiBvcGVuREIobmFtZSwgdmVyc2lvbiwgeyBibG9ja2VkLCB1cGdyYWRlLCBibG9ja2luZywgdGVybWluYXRlZCB9ID0ge30pIHtcbiAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLm9wZW4obmFtZSwgdmVyc2lvbik7XG4gICAgY29uc3Qgb3BlblByb21pc2UgPSB3cmFwKHJlcXVlc3QpO1xuICAgIGlmICh1cGdyYWRlKSB7XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcigndXBncmFkZW5lZWRlZCcsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdXBncmFkZSh3cmFwKHJlcXVlc3QucmVzdWx0KSwgZXZlbnQub2xkVmVyc2lvbiwgZXZlbnQubmV3VmVyc2lvbiwgd3JhcChyZXF1ZXN0LnRyYW5zYWN0aW9uKSwgZXZlbnQpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGJsb2NrZWQpIHtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdibG9ja2VkJywgKGV2ZW50KSA9PiBibG9ja2VkKFxuICAgICAgICAvLyBDYXN0aW5nIGR1ZSB0byBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQtRE9NLWxpYi1nZW5lcmF0b3IvcHVsbC8xNDA1XG4gICAgICAgIGV2ZW50Lm9sZFZlcnNpb24sIGV2ZW50Lm5ld1ZlcnNpb24sIGV2ZW50KSk7XG4gICAgfVxuICAgIG9wZW5Qcm9taXNlXG4gICAgICAgIC50aGVuKChkYikgPT4ge1xuICAgICAgICBpZiAodGVybWluYXRlZClcbiAgICAgICAgICAgIGRiLmFkZEV2ZW50TGlzdGVuZXIoJ2Nsb3NlJywgKCkgPT4gdGVybWluYXRlZCgpKTtcbiAgICAgICAgaWYgKGJsb2NraW5nKSB7XG4gICAgICAgICAgICBkYi5hZGRFdmVudExpc3RlbmVyKCd2ZXJzaW9uY2hhbmdlJywgKGV2ZW50KSA9PiBibG9ja2luZyhldmVudC5vbGRWZXJzaW9uLCBldmVudC5uZXdWZXJzaW9uLCBldmVudCkpO1xuICAgICAgICB9XG4gICAgfSlcbiAgICAgICAgLmNhdGNoKCgpID0+IHsgfSk7XG4gICAgcmV0dXJuIG9wZW5Qcm9taXNlO1xufVxuLyoqXG4gKiBEZWxldGUgYSBkYXRhYmFzZS5cbiAqXG4gKiBAcGFyYW0gbmFtZSBOYW1lIG9mIHRoZSBkYXRhYmFzZS5cbiAqL1xuZnVuY3Rpb24gZGVsZXRlREIobmFtZSwgeyBibG9ja2VkIH0gPSB7fSkge1xuICAgIGNvbnN0IHJlcXVlc3QgPSBpbmRleGVkREIuZGVsZXRlRGF0YWJhc2UobmFtZSk7XG4gICAgaWYgKGJsb2NrZWQpIHtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdibG9ja2VkJywgKGV2ZW50KSA9PiBibG9ja2VkKFxuICAgICAgICAvLyBDYXN0aW5nIGR1ZSB0byBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQtRE9NLWxpYi1nZW5lcmF0b3IvcHVsbC8xNDA1XG4gICAgICAgIGV2ZW50Lm9sZFZlcnNpb24sIGV2ZW50KSk7XG4gICAgfVxuICAgIHJldHVybiB3cmFwKHJlcXVlc3QpLnRoZW4oKCkgPT4gdW5kZWZpbmVkKTtcbn1cblxuY29uc3QgcmVhZE1ldGhvZHMgPSBbJ2dldCcsICdnZXRLZXknLCAnZ2V0QWxsJywgJ2dldEFsbEtleXMnLCAnY291bnQnXTtcbmNvbnN0IHdyaXRlTWV0aG9kcyA9IFsncHV0JywgJ2FkZCcsICdkZWxldGUnLCAnY2xlYXInXTtcbmNvbnN0IGNhY2hlZE1ldGhvZHMgPSBuZXcgTWFwKCk7XG5mdW5jdGlvbiBnZXRNZXRob2QodGFyZ2V0LCBwcm9wKSB7XG4gICAgaWYgKCEodGFyZ2V0IGluc3RhbmNlb2YgSURCRGF0YWJhc2UgJiZcbiAgICAgICAgIShwcm9wIGluIHRhcmdldCkgJiZcbiAgICAgICAgdHlwZW9mIHByb3AgPT09ICdzdHJpbmcnKSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChjYWNoZWRNZXRob2RzLmdldChwcm9wKSlcbiAgICAgICAgcmV0dXJuIGNhY2hlZE1ldGhvZHMuZ2V0KHByb3ApO1xuICAgIGNvbnN0IHRhcmdldEZ1bmNOYW1lID0gcHJvcC5yZXBsYWNlKC9Gcm9tSW5kZXgkLywgJycpO1xuICAgIGNvbnN0IHVzZUluZGV4ID0gcHJvcCAhPT0gdGFyZ2V0RnVuY05hbWU7XG4gICAgY29uc3QgaXNXcml0ZSA9IHdyaXRlTWV0aG9kcy5pbmNsdWRlcyh0YXJnZXRGdW5jTmFtZSk7XG4gICAgaWYgKFxuICAgIC8vIEJhaWwgaWYgdGhlIHRhcmdldCBkb2Vzbid0IGV4aXN0IG9uIHRoZSB0YXJnZXQuIEVnLCBnZXRBbGwgaXNuJ3QgaW4gRWRnZS5cbiAgICAhKHRhcmdldEZ1bmNOYW1lIGluICh1c2VJbmRleCA/IElEQkluZGV4IDogSURCT2JqZWN0U3RvcmUpLnByb3RvdHlwZSkgfHxcbiAgICAgICAgIShpc1dyaXRlIHx8IHJlYWRNZXRob2RzLmluY2x1ZGVzKHRhcmdldEZ1bmNOYW1lKSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBtZXRob2QgPSBhc3luYyBmdW5jdGlvbiAoc3RvcmVOYW1lLCAuLi5hcmdzKSB7XG4gICAgICAgIC8vIGlzV3JpdGUgPyAncmVhZHdyaXRlJyA6IHVuZGVmaW5lZCBnemlwcHMgYmV0dGVyLCBidXQgZmFpbHMgaW4gRWRnZSA6KFxuICAgICAgICBjb25zdCB0eCA9IHRoaXMudHJhbnNhY3Rpb24oc3RvcmVOYW1lLCBpc1dyaXRlID8gJ3JlYWR3cml0ZScgOiAncmVhZG9ubHknKTtcbiAgICAgICAgbGV0IHRhcmdldCA9IHR4LnN0b3JlO1xuICAgICAgICBpZiAodXNlSW5kZXgpXG4gICAgICAgICAgICB0YXJnZXQgPSB0YXJnZXQuaW5kZXgoYXJncy5zaGlmdCgpKTtcbiAgICAgICAgLy8gTXVzdCByZWplY3QgaWYgb3AgcmVqZWN0cy5cbiAgICAgICAgLy8gSWYgaXQncyBhIHdyaXRlIG9wZXJhdGlvbiwgbXVzdCByZWplY3QgaWYgdHguZG9uZSByZWplY3RzLlxuICAgICAgICAvLyBNdXN0IHJlamVjdCB3aXRoIG9wIHJlamVjdGlvbiBmaXJzdC5cbiAgICAgICAgLy8gTXVzdCByZXNvbHZlIHdpdGggb3AgdmFsdWUuXG4gICAgICAgIC8vIE11c3QgaGFuZGxlIGJvdGggcHJvbWlzZXMgKG5vIHVuaGFuZGxlZCByZWplY3Rpb25zKVxuICAgICAgICByZXR1cm4gKGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgIHRhcmdldFt0YXJnZXRGdW5jTmFtZV0oLi4uYXJncyksXG4gICAgICAgICAgICBpc1dyaXRlICYmIHR4LmRvbmUsXG4gICAgICAgIF0pKVswXTtcbiAgICB9O1xuICAgIGNhY2hlZE1ldGhvZHMuc2V0KHByb3AsIG1ldGhvZCk7XG4gICAgcmV0dXJuIG1ldGhvZDtcbn1cbnJlcGxhY2VUcmFwcygob2xkVHJhcHMpID0+ICh7XG4gICAgLi4ub2xkVHJhcHMsXG4gICAgZ2V0OiAodGFyZ2V0LCBwcm9wLCByZWNlaXZlcikgPT4gZ2V0TWV0aG9kKHRhcmdldCwgcHJvcCkgfHwgb2xkVHJhcHMuZ2V0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpLFxuICAgIGhhczogKHRhcmdldCwgcHJvcCkgPT4gISFnZXRNZXRob2QodGFyZ2V0LCBwcm9wKSB8fCBvbGRUcmFwcy5oYXModGFyZ2V0LCBwcm9wKSxcbn0pKTtcblxuZXhwb3J0IHsgZGVsZXRlREIsIG9wZW5EQiB9O1xuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBDb21wb25lbnRDb250YWluZXIgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcbmltcG9ydCB7IExvZ2dlciwgc2V0VXNlckxvZ0hhbmRsZXIsIHNldExvZ0xldmVsIGFzIHNldExvZ0xldmVsJDEgfSBmcm9tICdAZmlyZWJhc2UvbG9nZ2VyJztcbmltcG9ydCB7IEVycm9yRmFjdG9yeSwgZ2V0RGVmYXVsdEFwcENvbmZpZywgZGVlcEVxdWFsLCBpc0Jyb3dzZXIsIGlzV2ViV29ya2VyLCBGaXJlYmFzZUVycm9yLCBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZywgaXNJbmRleGVkREJBdmFpbGFibGUsIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5leHBvcnQgeyBGaXJlYmFzZUVycm9yIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgb3BlbkRCIH0gZnJvbSAnaWRiJztcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNsYXNzIFBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwge1xuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lcikge1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICB9XG4gICAgLy8gSW4gaW5pdGlhbCBpbXBsZW1lbnRhdGlvbiwgdGhpcyB3aWxsIGJlIGNhbGxlZCBieSBpbnN0YWxsYXRpb25zIG9uXG4gICAgLy8gYXV0aCB0b2tlbiByZWZyZXNoLCBhbmQgaW5zdGFsbGF0aW9ucyB3aWxsIHNlbmQgdGhpcyBzdHJpbmcuXG4gICAgZ2V0UGxhdGZvcm1JbmZvU3RyaW5nKCkge1xuICAgICAgICBjb25zdCBwcm92aWRlcnMgPSB0aGlzLmNvbnRhaW5lci5nZXRQcm92aWRlcnMoKTtcbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIHByb3ZpZGVycyBhbmQgZ2V0IGxpYnJhcnkvdmVyc2lvbiBwYWlycyBmcm9tIGFueSB0aGF0IGFyZVxuICAgICAgICAvLyB2ZXJzaW9uIGNvbXBvbmVudHMuXG4gICAgICAgIHJldHVybiBwcm92aWRlcnNcbiAgICAgICAgICAgIC5tYXAocHJvdmlkZXIgPT4ge1xuICAgICAgICAgICAgaWYgKGlzVmVyc2lvblNlcnZpY2VQcm92aWRlcihwcm92aWRlcikpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJ2aWNlID0gcHJvdmlkZXIuZ2V0SW1tZWRpYXRlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke3NlcnZpY2UubGlicmFyeX0vJHtzZXJ2aWNlLnZlcnNpb259YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAgICAgLmZpbHRlcihsb2dTdHJpbmcgPT4gbG9nU3RyaW5nKVxuICAgICAgICAgICAgLmpvaW4oJyAnKTtcbiAgICB9XG59XG4vKipcbiAqXG4gKiBAcGFyYW0gcHJvdmlkZXIgY2hlY2sgaWYgdGhpcyBwcm92aWRlciBwcm92aWRlcyBhIFZlcnNpb25TZXJ2aWNlXG4gKlxuICogTk9URTogVXNpbmcgUHJvdmlkZXI8J2FwcC12ZXJzaW9uJz4gaXMgYSBoYWNrIHRvIGluZGljYXRlIHRoYXQgdGhlIHByb3ZpZGVyXG4gKiBwcm92aWRlcyBWZXJzaW9uU2VydmljZS4gVGhlIHByb3ZpZGVyIGlzIG5vdCBuZWNlc3NhcmlseSBhICdhcHAtdmVyc2lvbidcbiAqIHByb3ZpZGVyLlxuICovXG5mdW5jdGlvbiBpc1ZlcnNpb25TZXJ2aWNlUHJvdmlkZXIocHJvdmlkZXIpIHtcbiAgICBjb25zdCBjb21wb25lbnQgPSBwcm92aWRlci5nZXRDb21wb25lbnQoKTtcbiAgICByZXR1cm4gKGNvbXBvbmVudCA9PT0gbnVsbCB8fCBjb21wb25lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNvbXBvbmVudC50eXBlKSA9PT0gXCJWRVJTSU9OXCIgLyogQ29tcG9uZW50VHlwZS5WRVJTSU9OICovO1xufVxuXG5jb25zdCBuYW1lJHEgPSBcIkBmaXJlYmFzZS9hcHBcIjtcbmNvbnN0IHZlcnNpb24kMSA9IFwiMC4xMC4xNlwiO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgbG9nZ2VyID0gbmV3IExvZ2dlcignQGZpcmViYXNlL2FwcCcpO1xuXG5jb25zdCBuYW1lJHAgPSBcIkBmaXJlYmFzZS9hcHAtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkbyA9IFwiQGZpcmViYXNlL2FuYWx5dGljcy1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRuID0gXCJAZmlyZWJhc2UvYW5hbHl0aWNzXCI7XG5cbmNvbnN0IG5hbWUkbSA9IFwiQGZpcmViYXNlL2FwcC1jaGVjay1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRsID0gXCJAZmlyZWJhc2UvYXBwLWNoZWNrXCI7XG5cbmNvbnN0IG5hbWUkayA9IFwiQGZpcmViYXNlL2F1dGhcIjtcblxuY29uc3QgbmFtZSRqID0gXCJAZmlyZWJhc2UvYXV0aC1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRpID0gXCJAZmlyZWJhc2UvZGF0YWJhc2VcIjtcblxuY29uc3QgbmFtZSRoID0gXCJAZmlyZWJhc2UvZGF0YS1jb25uZWN0XCI7XG5cbmNvbnN0IG5hbWUkZyA9IFwiQGZpcmViYXNlL2RhdGFiYXNlLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGYgPSBcIkBmaXJlYmFzZS9mdW5jdGlvbnNcIjtcblxuY29uc3QgbmFtZSRlID0gXCJAZmlyZWJhc2UvZnVuY3Rpb25zLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGQgPSBcIkBmaXJlYmFzZS9pbnN0YWxsYXRpb25zXCI7XG5cbmNvbnN0IG5hbWUkYyA9IFwiQGZpcmViYXNlL2luc3RhbGxhdGlvbnMtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkYiA9IFwiQGZpcmViYXNlL21lc3NhZ2luZ1wiO1xuXG5jb25zdCBuYW1lJGEgPSBcIkBmaXJlYmFzZS9tZXNzYWdpbmctY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkOSA9IFwiQGZpcmViYXNlL3BlcmZvcm1hbmNlXCI7XG5cbmNvbnN0IG5hbWUkOCA9IFwiQGZpcmViYXNlL3BlcmZvcm1hbmNlLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDcgPSBcIkBmaXJlYmFzZS9yZW1vdGUtY29uZmlnXCI7XG5cbmNvbnN0IG5hbWUkNiA9IFwiQGZpcmViYXNlL3JlbW90ZS1jb25maWctY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkNSA9IFwiQGZpcmViYXNlL3N0b3JhZ2VcIjtcblxuY29uc3QgbmFtZSQ0ID0gXCJAZmlyZWJhc2Uvc3RvcmFnZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSQzID0gXCJAZmlyZWJhc2UvZmlyZXN0b3JlXCI7XG5cbmNvbnN0IG5hbWUkMiA9IFwiQGZpcmViYXNlL3ZlcnRleGFpXCI7XG5cbmNvbnN0IG5hbWUkMSA9IFwiQGZpcmViYXNlL2ZpcmVzdG9yZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSA9IFwiZmlyZWJhc2VcIjtcbmNvbnN0IHZlcnNpb24gPSBcIjExLjAuMlwiO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgZGVmYXVsdCBhcHAgbmFtZVxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5jb25zdCBERUZBVUxUX0VOVFJZX05BTUUgPSAnW0RFRkFVTFRdJztcbmNvbnN0IFBMQVRGT1JNX0xPR19TVFJJTkcgPSB7XG4gICAgW25hbWUkcV06ICdmaXJlLWNvcmUnLFxuICAgIFtuYW1lJHBdOiAnZmlyZS1jb3JlLWNvbXBhdCcsXG4gICAgW25hbWUkbl06ICdmaXJlLWFuYWx5dGljcycsXG4gICAgW25hbWUkb106ICdmaXJlLWFuYWx5dGljcy1jb21wYXQnLFxuICAgIFtuYW1lJGxdOiAnZmlyZS1hcHAtY2hlY2snLFxuICAgIFtuYW1lJG1dOiAnZmlyZS1hcHAtY2hlY2stY29tcGF0JyxcbiAgICBbbmFtZSRrXTogJ2ZpcmUtYXV0aCcsXG4gICAgW25hbWUkal06ICdmaXJlLWF1dGgtY29tcGF0JyxcbiAgICBbbmFtZSRpXTogJ2ZpcmUtcnRkYicsXG4gICAgW25hbWUkaF06ICdmaXJlLWRhdGEtY29ubmVjdCcsXG4gICAgW25hbWUkZ106ICdmaXJlLXJ0ZGItY29tcGF0JyxcbiAgICBbbmFtZSRmXTogJ2ZpcmUtZm4nLFxuICAgIFtuYW1lJGVdOiAnZmlyZS1mbi1jb21wYXQnLFxuICAgIFtuYW1lJGRdOiAnZmlyZS1paWQnLFxuICAgIFtuYW1lJGNdOiAnZmlyZS1paWQtY29tcGF0JyxcbiAgICBbbmFtZSRiXTogJ2ZpcmUtZmNtJyxcbiAgICBbbmFtZSRhXTogJ2ZpcmUtZmNtLWNvbXBhdCcsXG4gICAgW25hbWUkOV06ICdmaXJlLXBlcmYnLFxuICAgIFtuYW1lJDhdOiAnZmlyZS1wZXJmLWNvbXBhdCcsXG4gICAgW25hbWUkN106ICdmaXJlLXJjJyxcbiAgICBbbmFtZSQ2XTogJ2ZpcmUtcmMtY29tcGF0JyxcbiAgICBbbmFtZSQ1XTogJ2ZpcmUtZ2NzJyxcbiAgICBbbmFtZSQ0XTogJ2ZpcmUtZ2NzLWNvbXBhdCcsXG4gICAgW25hbWUkM106ICdmaXJlLWZzdCcsXG4gICAgW25hbWUkMV06ICdmaXJlLWZzdC1jb21wYXQnLFxuICAgIFtuYW1lJDJdOiAnZmlyZS12ZXJ0ZXgnLFxuICAgICdmaXJlLWpzJzogJ2ZpcmUtanMnLCAvLyBQbGF0Zm9ybSBpZGVudGlmaWVyIGZvciBKUyBTREsuXG4gICAgW25hbWVdOiAnZmlyZS1qcy1hbGwnXG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuY29uc3QgX2FwcHMgPSBuZXcgTWFwKCk7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5jb25zdCBfc2VydmVyQXBwcyA9IG5ldyBNYXAoKTtcbi8qKlxuICogUmVnaXN0ZXJlZCBjb21wb25lbnRzLlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuY29uc3QgX2NvbXBvbmVudHMgPSBuZXcgTWFwKCk7XG4vKipcbiAqIEBwYXJhbSBjb21wb25lbnQgLSB0aGUgY29tcG9uZW50IGJlaW5nIGFkZGVkIHRvIHRoaXMgYXBwJ3MgY29udGFpbmVyXG4gKlxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIF9hZGRDb21wb25lbnQoYXBwLCBjb21wb25lbnQpIHtcbiAgICB0cnkge1xuICAgICAgICBhcHAuY29udGFpbmVyLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICBsb2dnZXIuZGVidWcoYENvbXBvbmVudCAke2NvbXBvbmVudC5uYW1lfSBmYWlsZWQgdG8gcmVnaXN0ZXIgd2l0aCBGaXJlYmFzZUFwcCAke2FwcC5uYW1lfWAsIGUpO1xuICAgIH1cbn1cbi8qKlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBfYWRkT3JPdmVyd3JpdGVDb21wb25lbnQoYXBwLCBjb21wb25lbnQpIHtcbiAgICBhcHAuY29udGFpbmVyLmFkZE9yT3ZlcndyaXRlQ29tcG9uZW50KGNvbXBvbmVudCk7XG59XG4vKipcbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50IC0gdGhlIGNvbXBvbmVudCB0byByZWdpc3RlclxuICogQHJldHVybnMgd2hldGhlciBvciBub3QgdGhlIGNvbXBvbmVudCBpcyByZWdpc3RlcmVkIHN1Y2Nlc3NmdWxseVxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBfcmVnaXN0ZXJDb21wb25lbnQoY29tcG9uZW50KSB7XG4gICAgY29uc3QgY29tcG9uZW50TmFtZSA9IGNvbXBvbmVudC5uYW1lO1xuICAgIGlmIChfY29tcG9uZW50cy5oYXMoY29tcG9uZW50TmFtZSkpIHtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBUaGVyZSB3ZXJlIG11bHRpcGxlIGF0dGVtcHRzIHRvIHJlZ2lzdGVyIGNvbXBvbmVudCAke2NvbXBvbmVudE5hbWV9LmApO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIF9jb21wb25lbnRzLnNldChjb21wb25lbnROYW1lLCBjb21wb25lbnQpO1xuICAgIC8vIGFkZCB0aGUgY29tcG9uZW50IHRvIGV4aXN0aW5nIGFwcCBpbnN0YW5jZXNcbiAgICBmb3IgKGNvbnN0IGFwcCBvZiBfYXBwcy52YWx1ZXMoKSkge1xuICAgICAgICBfYWRkQ29tcG9uZW50KGFwcCwgY29tcG9uZW50KTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBzZXJ2ZXJBcHAgb2YgX3NlcnZlckFwcHMudmFsdWVzKCkpIHtcbiAgICAgICAgX2FkZENvbXBvbmVudChzZXJ2ZXJBcHAsIGNvbXBvbmVudCk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuLyoqXG4gKlxuICogQHBhcmFtIGFwcCAtIEZpcmViYXNlQXBwIGluc3RhbmNlXG4gKiBAcGFyYW0gbmFtZSAtIHNlcnZpY2UgbmFtZVxuICpcbiAqIEByZXR1cm5zIHRoZSBwcm92aWRlciBmb3IgdGhlIHNlcnZpY2Ugd2l0aCB0aGUgbWF0Y2hpbmcgbmFtZVxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBfZ2V0UHJvdmlkZXIoYXBwLCBuYW1lKSB7XG4gICAgY29uc3QgaGVhcnRiZWF0Q29udHJvbGxlciA9IGFwcC5jb250YWluZXJcbiAgICAgICAgLmdldFByb3ZpZGVyKCdoZWFydGJlYXQnKVxuICAgICAgICAuZ2V0SW1tZWRpYXRlKHsgb3B0aW9uYWw6IHRydWUgfSk7XG4gICAgaWYgKGhlYXJ0YmVhdENvbnRyb2xsZXIpIHtcbiAgICAgICAgdm9pZCBoZWFydGJlYXRDb250cm9sbGVyLnRyaWdnZXJIZWFydGJlYXQoKTtcbiAgICB9XG4gICAgcmV0dXJuIGFwcC5jb250YWluZXIuZ2V0UHJvdmlkZXIobmFtZSk7XG59XG4vKipcbiAqXG4gKiBAcGFyYW0gYXBwIC0gRmlyZWJhc2VBcHAgaW5zdGFuY2VcbiAqIEBwYXJhbSBuYW1lIC0gc2VydmljZSBuYW1lXG4gKiBAcGFyYW0gaW5zdGFuY2VJZGVudGlmaWVyIC0gc2VydmljZSBpbnN0YW5jZSBpZGVudGlmaWVyIGluIGNhc2UgdGhlIHNlcnZpY2Ugc3VwcG9ydHMgbXVsdGlwbGUgaW5zdGFuY2VzXG4gKlxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UoYXBwLCBuYW1lLCBpbnN0YW5jZUlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcbiAgICBfZ2V0UHJvdmlkZXIoYXBwLCBuYW1lKS5jbGVhckluc3RhbmNlKGluc3RhbmNlSWRlbnRpZmllcik7XG59XG4vKipcbiAqXG4gKiBAcGFyYW0gb2JqIC0gYW4gb2JqZWN0IG9mIHR5cGUgRmlyZWJhc2VBcHAgb3IgRmlyZWJhc2VPcHRpb25zLlxuICpcbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGUgb2JqZWN0IGlzIG9mIHR5cGUgRmlyZWJhc2VBcHAuXG4gKlxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIF9pc0ZpcmViYXNlQXBwKG9iaikge1xuICAgIHJldHVybiBvYmoub3B0aW9ucyAhPT0gdW5kZWZpbmVkO1xufVxuLyoqXG4gKlxuICogQHBhcmFtIG9iaiAtIGFuIG9iamVjdCBvZiB0eXBlIEZpcmViYXNlQXBwLlxuICpcbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIG9iamVjdCBpcyBvZiB0eXBlIEZpcmViYXNlU2VydmVyQXBwSW1wbC5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gX2lzRmlyZWJhc2VTZXJ2ZXJBcHAob2JqKSB7XG4gICAgcmV0dXJuIG9iai5zZXR0aW5ncyAhPT0gdW5kZWZpbmVkO1xufVxuLyoqXG4gKiBUZXN0IG9ubHlcbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gX2NsZWFyQ29tcG9uZW50cygpIHtcbiAgICBfY29tcG9uZW50cy5jbGVhcigpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgRVJST1JTID0ge1xuICAgIFtcIm5vLWFwcFwiIC8qIEFwcEVycm9yLk5PX0FQUCAqL106IFwiTm8gRmlyZWJhc2UgQXBwICd7JGFwcE5hbWV9JyBoYXMgYmVlbiBjcmVhdGVkIC0gXCIgK1xuICAgICAgICAnY2FsbCBpbml0aWFsaXplQXBwKCkgZmlyc3QnLFxuICAgIFtcImJhZC1hcHAtbmFtZVwiIC8qIEFwcEVycm9yLkJBRF9BUFBfTkFNRSAqL106IFwiSWxsZWdhbCBBcHAgbmFtZTogJ3skYXBwTmFtZX0nXCIsXG4gICAgW1wiZHVwbGljYXRlLWFwcFwiIC8qIEFwcEVycm9yLkRVUExJQ0FURV9BUFAgKi9dOiBcIkZpcmViYXNlIEFwcCBuYW1lZCAneyRhcHBOYW1lfScgYWxyZWFkeSBleGlzdHMgd2l0aCBkaWZmZXJlbnQgb3B0aW9ucyBvciBjb25maWdcIixcbiAgICBbXCJhcHAtZGVsZXRlZFwiIC8qIEFwcEVycm9yLkFQUF9ERUxFVEVEICovXTogXCJGaXJlYmFzZSBBcHAgbmFtZWQgJ3skYXBwTmFtZX0nIGFscmVhZHkgZGVsZXRlZFwiLFxuICAgIFtcInNlcnZlci1hcHAtZGVsZXRlZFwiIC8qIEFwcEVycm9yLlNFUlZFUl9BUFBfREVMRVRFRCAqL106ICdGaXJlYmFzZSBTZXJ2ZXIgQXBwIGhhcyBiZWVuIGRlbGV0ZWQnLFxuICAgIFtcIm5vLW9wdGlvbnNcIiAvKiBBcHBFcnJvci5OT19PUFRJT05TICovXTogJ05lZWQgdG8gcHJvdmlkZSBvcHRpb25zLCB3aGVuIG5vdCBiZWluZyBkZXBsb3llZCB0byBob3N0aW5nIHZpYSBzb3VyY2UuJyxcbiAgICBbXCJpbnZhbGlkLWFwcC1hcmd1bWVudFwiIC8qIEFwcEVycm9yLklOVkFMSURfQVBQX0FSR1VNRU5UICovXTogJ2ZpcmViYXNlLnskYXBwTmFtZX0oKSB0YWtlcyBlaXRoZXIgbm8gYXJndW1lbnQgb3IgYSAnICtcbiAgICAgICAgJ0ZpcmViYXNlIEFwcCBpbnN0YW5jZS4nLFxuICAgIFtcImludmFsaWQtbG9nLWFyZ3VtZW50XCIgLyogQXBwRXJyb3IuSU5WQUxJRF9MT0dfQVJHVU1FTlQgKi9dOiAnRmlyc3QgYXJndW1lbnQgdG8gYG9uTG9nYCBtdXN0IGJlIG51bGwgb3IgYSBmdW5jdGlvbi4nLFxuICAgIFtcImlkYi1vcGVuXCIgLyogQXBwRXJyb3IuSURCX09QRU4gKi9dOiAnRXJyb3IgdGhyb3duIHdoZW4gb3BlbmluZyBJbmRleGVkREIuIE9yaWdpbmFsIGVycm9yOiB7JG9yaWdpbmFsRXJyb3JNZXNzYWdlfS4nLFxuICAgIFtcImlkYi1nZXRcIiAvKiBBcHBFcnJvci5JREJfR0VUICovXTogJ0Vycm9yIHRocm93biB3aGVuIHJlYWRpbmcgZnJvbSBJbmRleGVkREIuIE9yaWdpbmFsIGVycm9yOiB7JG9yaWdpbmFsRXJyb3JNZXNzYWdlfS4nLFxuICAgIFtcImlkYi1zZXRcIiAvKiBBcHBFcnJvci5JREJfV1JJVEUgKi9dOiAnRXJyb3IgdGhyb3duIHdoZW4gd3JpdGluZyB0byBJbmRleGVkREIuIE9yaWdpbmFsIGVycm9yOiB7JG9yaWdpbmFsRXJyb3JNZXNzYWdlfS4nLFxuICAgIFtcImlkYi1kZWxldGVcIiAvKiBBcHBFcnJvci5JREJfREVMRVRFICovXTogJ0Vycm9yIHRocm93biB3aGVuIGRlbGV0aW5nIGZyb20gSW5kZXhlZERCLiBPcmlnaW5hbCBlcnJvcjogeyRvcmlnaW5hbEVycm9yTWVzc2FnZX0uJyxcbiAgICBbXCJmaW5hbGl6YXRpb24tcmVnaXN0cnktbm90LXN1cHBvcnRlZFwiIC8qIEFwcEVycm9yLkZJTkFMSVpBVElPTl9SRUdJU1RSWV9OT1RfU1VQUE9SVEVEICovXTogJ0ZpcmViYXNlU2VydmVyQXBwIGRlbGV0ZU9uRGVyZWYgZmllbGQgZGVmaW5lZCBidXQgdGhlIEpTIHJ1bnRpbWUgZG9lcyBub3Qgc3VwcG9ydCBGaW5hbGl6YXRpb25SZWdpc3RyeS4nLFxuICAgIFtcImludmFsaWQtc2VydmVyLWFwcC1lbnZpcm9ubWVudFwiIC8qIEFwcEVycm9yLklOVkFMSURfU0VSVkVSX0FQUF9FTlZJUk9OTUVOVCAqL106ICdGaXJlYmFzZVNlcnZlckFwcCBpcyBub3QgZm9yIHVzZSBpbiBicm93c2VyIGVudmlyb25tZW50cy4nXG59O1xuY29uc3QgRVJST1JfRkFDVE9SWSA9IG5ldyBFcnJvckZhY3RvcnkoJ2FwcCcsICdGaXJlYmFzZScsIEVSUk9SUyk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jbGFzcyBGaXJlYmFzZUFwcEltcGwge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMsIGNvbmZpZywgY29udGFpbmVyKSB7XG4gICAgICAgIHRoaXMuX2lzRGVsZXRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMuX2NvbmZpZyA9IE9iamVjdC5hc3NpZ24oe30sIGNvbmZpZyk7XG4gICAgICAgIHRoaXMuX25hbWUgPSBjb25maWcubmFtZTtcbiAgICAgICAgdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkID1cbiAgICAgICAgICAgIGNvbmZpZy5hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQ7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ29tcG9uZW50KG5ldyBDb21wb25lbnQoJ2FwcCcsICgpID0+IHRoaXMsIFwiUFVCTElDXCIgLyogQ29tcG9uZW50VHlwZS5QVUJMSUMgKi8pKTtcbiAgICB9XG4gICAgZ2V0IGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCgpIHtcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkO1xuICAgIH1cbiAgICBzZXQgYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkKHZhbCkge1xuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XG4gICAgICAgIHRoaXMuX2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCA9IHZhbDtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX25hbWU7XG4gICAgfVxuICAgIGdldCBvcHRpb25zKCkge1xuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9vcHRpb25zO1xuICAgIH1cbiAgICBnZXQgY29uZmlnKCkge1xuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb25maWc7XG4gICAgfVxuICAgIGdldCBjb250YWluZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb250YWluZXI7XG4gICAgfVxuICAgIGdldCBpc0RlbGV0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pc0RlbGV0ZWQ7XG4gICAgfVxuICAgIHNldCBpc0RlbGV0ZWQodmFsKSB7XG4gICAgICAgIHRoaXMuX2lzRGVsZXRlZCA9IHZhbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiB3aWxsIHRocm93IGFuIEVycm9yIGlmIHRoZSBBcHAgaGFzIGFscmVhZHkgYmVlbiBkZWxldGVkIC1cbiAgICAgKiB1c2UgYmVmb3JlIHBlcmZvcm1pbmcgQVBJIGFjdGlvbnMgb24gdGhlIEFwcC5cbiAgICAgKi9cbiAgICBjaGVja0Rlc3Ryb3llZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNEZWxldGVkKSB7XG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFwcC1kZWxldGVkXCIgLyogQXBwRXJyb3IuQVBQX0RFTEVURUQgKi8sIHsgYXBwTmFtZTogdGhpcy5fbmFtZSB9KTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNsYXNzIEZpcmViYXNlU2VydmVyQXBwSW1wbCBleHRlbmRzIEZpcmViYXNlQXBwSW1wbCB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucywgc2VydmVyQ29uZmlnLCBuYW1lLCBjb250YWluZXIpIHtcbiAgICAgICAgLy8gQnVpbGQgY29uZmlndXJhdGlvbiBwYXJhbWV0ZXJzIGZvciB0aGUgRmlyZWJhc2VBcHBJbXBsIGJhc2UgY2xhc3MuXG4gICAgICAgIGNvbnN0IGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCA9IHNlcnZlckNvbmZpZy5hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBzZXJ2ZXJDb25maWcuYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkXG4gICAgICAgICAgICA6IGZhbHNlO1xuICAgICAgICAvLyBDcmVhdGUgdGhlIEZpcmViYXNlQXBwU2V0dGluZ3Mgb2JqZWN0IGZvciB0aGUgRmlyZWJhc2VBcHBJbXAgY29uc3RydWN0b3IuXG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IHtcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWRcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG9wdGlvbnMuYXBpS2V5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIENvbnN0cnVjdCB0aGUgcGFyZW50IEZpcmViYXNlQXBwSW1wIG9iamVjdC5cbiAgICAgICAgICAgIHN1cGVyKG9wdGlvbnMsIGNvbmZpZywgY29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGFwcEltcGwgPSBvcHRpb25zO1xuICAgICAgICAgICAgc3VwZXIoYXBwSW1wbC5vcHRpb25zLCBjb25maWcsIGNvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTm93IGNvbnN0cnVjdCB0aGUgZGF0YSBmb3IgdGhlIEZpcmViYXNlU2VydmVyQXBwSW1wbC5cbiAgICAgICAgdGhpcy5fc2VydmVyQ29uZmlnID0gT2JqZWN0LmFzc2lnbih7IGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCB9LCBzZXJ2ZXJDb25maWcpO1xuICAgICAgICB0aGlzLl9maW5hbGl6YXRpb25SZWdpc3RyeSA9IG51bGw7XG4gICAgICAgIGlmICh0eXBlb2YgRmluYWxpemF0aW9uUmVnaXN0cnkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aGlzLl9maW5hbGl6YXRpb25SZWdpc3RyeSA9IG5ldyBGaW5hbGl6YXRpb25SZWdpc3RyeSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hdXRvbWF0aWNDbGVhbnVwKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9yZWZDb3VudCA9IDA7XG4gICAgICAgIHRoaXMuaW5jUmVmQ291bnQodGhpcy5fc2VydmVyQ29uZmlnLnJlbGVhc2VPbkRlcmVmKTtcbiAgICAgICAgLy8gRG8gbm90IHJldGFpbiBhIGhhcmQgcmVmZXJlbmNlIHRvIHRoZSBkcmVmIG9iamVjdCwgb3RoZXJ3aXNlIHRoZSBGaW5hbGl6YXRpb25SZWdpc3RyeVxuICAgICAgICAvLyB3aWxsIG5ldmVyIHRyaWdnZXIuXG4gICAgICAgIHRoaXMuX3NlcnZlckNvbmZpZy5yZWxlYXNlT25EZXJlZiA9IHVuZGVmaW5lZDtcbiAgICAgICAgc2VydmVyQ29uZmlnLnJlbGVhc2VPbkRlcmVmID0gdW5kZWZpbmVkO1xuICAgICAgICByZWdpc3RlclZlcnNpb24obmFtZSRxLCB2ZXJzaW9uJDEsICdzZXJ2ZXJhcHAnKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBnZXQgcmVmQ291bnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWZDb3VudDtcbiAgICB9XG4gICAgLy8gSW5jcmVtZW50IHRoZSByZWZlcmVuY2UgY291bnQgb2YgdGhpcyBzZXJ2ZXIgYXBwLiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQsIHJlZ2lzdGVyIGl0XG4gICAgLy8gd2l0aCB0aGUgZmluYWxpemF0aW9uIHJlZ2lzdHJ5LlxuICAgIGluY1JlZkNvdW50KG9iaikge1xuICAgICAgICBpZiAodGhpcy5pc0RlbGV0ZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9yZWZDb3VudCsrO1xuICAgICAgICBpZiAob2JqICE9PSB1bmRlZmluZWQgJiYgdGhpcy5fZmluYWxpemF0aW9uUmVnaXN0cnkgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuX2ZpbmFsaXphdGlvblJlZ2lzdHJ5LnJlZ2lzdGVyKG9iaiwgdGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gRGVjcmVtZW50IHRoZSByZWZlcmVuY2UgY291bnQuXG4gICAgZGVjUmVmQ291bnQoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRGVsZXRlZCkge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIC0tdGhpcy5fcmVmQ291bnQ7XG4gICAgfVxuICAgIC8vIEludm9rZWQgYnkgdGhlIEZpbmFsaXphdGlvblJlZ2lzdHJ5IGNhbGxiYWNrIHRvIG5vdGUgdGhhdCB0aGlzIGFwcCBzaG91bGQgZ28gdGhyb3VnaCBpdHNcbiAgICAvLyByZWZlcmVuY2UgY291bnRzIGFuZCBkZWxldGUgaXRzZWxmIGlmIG5vIHJlZmVyZW5jZSBjb3VudCByZW1haW4uIFRoZSBjb29yZGluYXRpbmcgbG9naWMgdGhhdFxuICAgIC8vIGhhbmRsZXMgdGhpcyBpcyBpbiBkZWxldGVBcHAoLi4uKS5cbiAgICBhdXRvbWF0aWNDbGVhbnVwKCkge1xuICAgICAgICB2b2lkIGRlbGV0ZUFwcCh0aGlzKTtcbiAgICB9XG4gICAgZ2V0IHNldHRpbmdzKCkge1xuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZXJ2ZXJDb25maWc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gd2lsbCB0aHJvdyBhbiBFcnJvciBpZiB0aGUgQXBwIGhhcyBhbHJlYWR5IGJlZW4gZGVsZXRlZCAtXG4gICAgICogdXNlIGJlZm9yZSBwZXJmb3JtaW5nIEFQSSBhY3Rpb25zIG9uIHRoZSBBcHAuXG4gICAgICovXG4gICAgY2hlY2tEZXN0cm95ZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRGVsZXRlZCkge1xuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJzZXJ2ZXItYXBwLWRlbGV0ZWRcIiAvKiBBcHBFcnJvci5TRVJWRVJfQVBQX0RFTEVURUQgKi8pO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgY3VycmVudCBTREsgdmVyc2lvbi5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmNvbnN0IFNES19WRVJTSU9OID0gdmVyc2lvbjtcbmZ1bmN0aW9uIGluaXRpYWxpemVBcHAoX29wdGlvbnMsIHJhd0NvbmZpZyA9IHt9KSB7XG4gICAgbGV0IG9wdGlvbnMgPSBfb3B0aW9ucztcbiAgICBpZiAodHlwZW9mIHJhd0NvbmZpZyAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgY29uc3QgbmFtZSA9IHJhd0NvbmZpZztcbiAgICAgICAgcmF3Q29uZmlnID0geyBuYW1lIH07XG4gICAgfVxuICAgIGNvbnN0IGNvbmZpZyA9IE9iamVjdC5hc3NpZ24oeyBuYW1lOiBERUZBVUxUX0VOVFJZX05BTUUsIGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZDogZmFsc2UgfSwgcmF3Q29uZmlnKTtcbiAgICBjb25zdCBuYW1lID0gY29uZmlnLm5hbWU7XG4gICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJyB8fCAhbmFtZSkge1xuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImJhZC1hcHAtbmFtZVwiIC8qIEFwcEVycm9yLkJBRF9BUFBfTkFNRSAqLywge1xuICAgICAgICAgICAgYXBwTmFtZTogU3RyaW5nKG5hbWUpXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBvcHRpb25zIHx8IChvcHRpb25zID0gZ2V0RGVmYXVsdEFwcENvbmZpZygpKTtcbiAgICBpZiAoIW9wdGlvbnMpIHtcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJuby1vcHRpb25zXCIgLyogQXBwRXJyb3IuTk9fT1BUSU9OUyAqLyk7XG4gICAgfVxuICAgIGNvbnN0IGV4aXN0aW5nQXBwID0gX2FwcHMuZ2V0KG5hbWUpO1xuICAgIGlmIChleGlzdGluZ0FwcCkge1xuICAgICAgICAvLyByZXR1cm4gdGhlIGV4aXN0aW5nIGFwcCBpZiBvcHRpb25zIGFuZCBjb25maWcgZGVlcCBlcXVhbCB0aGUgb25lcyBpbiB0aGUgZXhpc3RpbmcgYXBwLlxuICAgICAgICBpZiAoZGVlcEVxdWFsKG9wdGlvbnMsIGV4aXN0aW5nQXBwLm9wdGlvbnMpICYmXG4gICAgICAgICAgICBkZWVwRXF1YWwoY29uZmlnLCBleGlzdGluZ0FwcC5jb25maWcpKSB7XG4gICAgICAgICAgICByZXR1cm4gZXhpc3RpbmdBcHA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImR1cGxpY2F0ZS1hcHBcIiAvKiBBcHBFcnJvci5EVVBMSUNBVEVfQVBQICovLCB7IGFwcE5hbWU6IG5hbWUgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgY29udGFpbmVyID0gbmV3IENvbXBvbmVudENvbnRhaW5lcihuYW1lKTtcbiAgICBmb3IgKGNvbnN0IGNvbXBvbmVudCBvZiBfY29tcG9uZW50cy52YWx1ZXMoKSkge1xuICAgICAgICBjb250YWluZXIuYWRkQ29tcG9uZW50KGNvbXBvbmVudCk7XG4gICAgfVxuICAgIGNvbnN0IG5ld0FwcCA9IG5ldyBGaXJlYmFzZUFwcEltcGwob3B0aW9ucywgY29uZmlnLCBjb250YWluZXIpO1xuICAgIF9hcHBzLnNldChuYW1lLCBuZXdBcHApO1xuICAgIHJldHVybiBuZXdBcHA7XG59XG5mdW5jdGlvbiBpbml0aWFsaXplU2VydmVyQXBwKF9vcHRpb25zLCBfc2VydmVyQXBwQ29uZmlnKSB7XG4gICAgaWYgKGlzQnJvd3NlcigpICYmICFpc1dlYldvcmtlcigpKSB7XG4gICAgICAgIC8vIEZpcmViYXNlU2VydmVyQXBwIGlzbid0IGRlc2lnbmVkIHRvIGJlIHJ1biBpbiBicm93c2Vycy5cbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpbnZhbGlkLXNlcnZlci1hcHAtZW52aXJvbm1lbnRcIiAvKiBBcHBFcnJvci5JTlZBTElEX1NFUlZFUl9BUFBfRU5WSVJPTk1FTlQgKi8pO1xuICAgIH1cbiAgICBpZiAoX3NlcnZlckFwcENvbmZpZy5hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBfc2VydmVyQXBwQ29uZmlnLmF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBsZXQgYXBwT3B0aW9ucztcbiAgICBpZiAoX2lzRmlyZWJhc2VBcHAoX29wdGlvbnMpKSB7XG4gICAgICAgIGFwcE9wdGlvbnMgPSBfb3B0aW9ucy5vcHRpb25zO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYXBwT3B0aW9ucyA9IF9vcHRpb25zO1xuICAgIH1cbiAgICAvLyBCdWlsZCBhbiBhcHAgbmFtZSBiYXNlZCBvbiBhIGhhc2ggb2YgdGhlIGNvbmZpZ3VyYXRpb24gb3B0aW9ucy5cbiAgICBjb25zdCBuYW1lT2JqID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBfc2VydmVyQXBwQ29uZmlnKSwgYXBwT3B0aW9ucyk7XG4gICAgLy8gSG93ZXZlciwgRG8gbm90IG1hbmdsZSB0aGUgbmFtZSBiYXNlZCBvbiByZWxlYXNlT25EZXJlZiwgc2luY2UgaXQgd2lsbCB2YXJ5IGJldHdlZW4gdGhlXG4gICAgLy8gY29uc3RydWN0aW9uIG9mIEZpcmViYXNlU2VydmVyQXBwIGluc3RhbmNlcy4gRm9yIGV4YW1wbGUsIGlmIHRoZSBvYmplY3QgaXMgdGhlIHJlcXVlc3QgaGVhZGVycy5cbiAgICBpZiAobmFtZU9iai5yZWxlYXNlT25EZXJlZiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGRlbGV0ZSBuYW1lT2JqLnJlbGVhc2VPbkRlcmVmO1xuICAgIH1cbiAgICBjb25zdCBoYXNoQ29kZSA9IChzKSA9PiB7XG4gICAgICAgIHJldHVybiBbLi4uc10ucmVkdWNlKChoYXNoLCBjKSA9PiAoTWF0aC5pbXVsKDMxLCBoYXNoKSArIGMuY2hhckNvZGVBdCgwKSkgfCAwLCAwKTtcbiAgICB9O1xuICAgIGlmIChfc2VydmVyQXBwQ29uZmlnLnJlbGVhc2VPbkRlcmVmICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBGaW5hbGl6YXRpb25SZWdpc3RyeSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiZmluYWxpemF0aW9uLXJlZ2lzdHJ5LW5vdC1zdXBwb3J0ZWRcIiAvKiBBcHBFcnJvci5GSU5BTElaQVRJT05fUkVHSVNUUllfTk9UX1NVUFBPUlRFRCAqLywge30pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG5hbWVTdHJpbmcgPSAnJyArIGhhc2hDb2RlKEpTT04uc3RyaW5naWZ5KG5hbWVPYmopKTtcbiAgICBjb25zdCBleGlzdGluZ0FwcCA9IF9zZXJ2ZXJBcHBzLmdldChuYW1lU3RyaW5nKTtcbiAgICBpZiAoZXhpc3RpbmdBcHApIHtcbiAgICAgICAgZXhpc3RpbmdBcHAuaW5jUmVmQ291bnQoX3NlcnZlckFwcENvbmZpZy5yZWxlYXNlT25EZXJlZik7XG4gICAgICAgIHJldHVybiBleGlzdGluZ0FwcDtcbiAgICB9XG4gICAgY29uc3QgY29udGFpbmVyID0gbmV3IENvbXBvbmVudENvbnRhaW5lcihuYW1lU3RyaW5nKTtcbiAgICBmb3IgKGNvbnN0IGNvbXBvbmVudCBvZiBfY29tcG9uZW50cy52YWx1ZXMoKSkge1xuICAgICAgICBjb250YWluZXIuYWRkQ29tcG9uZW50KGNvbXBvbmVudCk7XG4gICAgfVxuICAgIGNvbnN0IG5ld0FwcCA9IG5ldyBGaXJlYmFzZVNlcnZlckFwcEltcGwoYXBwT3B0aW9ucywgX3NlcnZlckFwcENvbmZpZywgbmFtZVN0cmluZywgY29udGFpbmVyKTtcbiAgICBfc2VydmVyQXBwcy5zZXQobmFtZVN0cmluZywgbmV3QXBwKTtcbiAgICByZXR1cm4gbmV3QXBwO1xufVxuLyoqXG4gKiBSZXRyaWV2ZXMgYSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gaW5zdGFuY2UuXG4gKlxuICogV2hlbiBjYWxsZWQgd2l0aCBubyBhcmd1bWVudHMsIHRoZSBkZWZhdWx0IGFwcCBpcyByZXR1cm5lZC4gV2hlbiBhbiBhcHAgbmFtZVxuICogaXMgcHJvdmlkZWQsIHRoZSBhcHAgY29ycmVzcG9uZGluZyB0byB0aGF0IG5hbWUgaXMgcmV0dXJuZWQuXG4gKlxuICogQW4gZXhjZXB0aW9uIGlzIHRocm93biBpZiB0aGUgYXBwIGJlaW5nIHJldHJpZXZlZCBoYXMgbm90IHlldCBiZWVuXG4gKiBpbml0aWFsaXplZC5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgamF2YXNjcmlwdFxuICogLy8gUmV0dXJuIHRoZSBkZWZhdWx0IGFwcFxuICogY29uc3QgYXBwID0gZ2V0QXBwKCk7XG4gKiBgYGBcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgamF2YXNjcmlwdFxuICogLy8gUmV0dXJuIGEgbmFtZWQgYXBwXG4gKiBjb25zdCBvdGhlckFwcCA9IGdldEFwcChcIm90aGVyQXBwXCIpO1xuICogYGBgXG4gKlxuICogQHBhcmFtIG5hbWUgLSBPcHRpb25hbCBuYW1lIG9mIHRoZSBhcHAgdG8gcmV0dXJuLiBJZiBubyBuYW1lIGlzXG4gKiAgIHByb3ZpZGVkLCB0aGUgZGVmYXVsdCBpcyBgXCJbREVGQVVMVF1cImAuXG4gKlxuICogQHJldHVybnMgVGhlIGFwcCBjb3JyZXNwb25kaW5nIHRvIHRoZSBwcm92aWRlZCBhcHAgbmFtZS5cbiAqICAgSWYgbm8gYXBwIG5hbWUgaXMgcHJvdmlkZWQsIHRoZSBkZWZhdWx0IGFwcCBpcyByZXR1cm5lZC5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmZ1bmN0aW9uIGdldEFwcChuYW1lID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XG4gICAgY29uc3QgYXBwID0gX2FwcHMuZ2V0KG5hbWUpO1xuICAgIGlmICghYXBwICYmIG5hbWUgPT09IERFRkFVTFRfRU5UUllfTkFNRSAmJiBnZXREZWZhdWx0QXBwQ29uZmlnKCkpIHtcbiAgICAgICAgcmV0dXJuIGluaXRpYWxpemVBcHAoKTtcbiAgICB9XG4gICAgaWYgKCFhcHApIHtcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJuby1hcHBcIiAvKiBBcHBFcnJvci5OT19BUFAgKi8sIHsgYXBwTmFtZTogbmFtZSB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGFwcDtcbn1cbi8qKlxuICogQSAocmVhZC1vbmx5KSBhcnJheSBvZiBhbGwgaW5pdGlhbGl6ZWQgYXBwcy5cbiAqIEBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gZ2V0QXBwcygpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShfYXBwcy52YWx1ZXMoKSk7XG59XG4vKipcbiAqIFJlbmRlcnMgdGhpcyBhcHAgdW51c2FibGUgYW5kIGZyZWVzIHRoZSByZXNvdXJjZXMgb2YgYWxsIGFzc29jaWF0ZWRcbiAqIHNlcnZpY2VzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiBkZWxldGVBcHAoYXBwKVxuICogICAudGhlbihmdW5jdGlvbigpIHtcbiAqICAgICBjb25zb2xlLmxvZyhcIkFwcCBkZWxldGVkIHN1Y2Nlc3NmdWxseVwiKTtcbiAqICAgfSlcbiAqICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG4gKiAgICAgY29uc29sZS5sb2coXCJFcnJvciBkZWxldGluZyBhcHA6XCIsIGVycm9yKTtcbiAqICAgfSk7XG4gKiBgYGBcbiAqXG4gKiBAcHVibGljXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUFwcChhcHApIHtcbiAgICBsZXQgY2xlYW51cFByb3ZpZGVycyA9IGZhbHNlO1xuICAgIGNvbnN0IG5hbWUgPSBhcHAubmFtZTtcbiAgICBpZiAoX2FwcHMuaGFzKG5hbWUpKSB7XG4gICAgICAgIGNsZWFudXBQcm92aWRlcnMgPSB0cnVlO1xuICAgICAgICBfYXBwcy5kZWxldGUobmFtZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKF9zZXJ2ZXJBcHBzLmhhcyhuYW1lKSkge1xuICAgICAgICBjb25zdCBmaXJlYmFzZVNlcnZlckFwcCA9IGFwcDtcbiAgICAgICAgaWYgKGZpcmViYXNlU2VydmVyQXBwLmRlY1JlZkNvdW50KCkgPD0gMCkge1xuICAgICAgICAgICAgX3NlcnZlckFwcHMuZGVsZXRlKG5hbWUpO1xuICAgICAgICAgICAgY2xlYW51cFByb3ZpZGVycyA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGNsZWFudXBQcm92aWRlcnMpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoYXBwLmNvbnRhaW5lclxuICAgICAgICAgICAgLmdldFByb3ZpZGVycygpXG4gICAgICAgICAgICAubWFwKHByb3ZpZGVyID0+IHByb3ZpZGVyLmRlbGV0ZSgpKSk7XG4gICAgICAgIGFwcC5pc0RlbGV0ZWQgPSB0cnVlO1xuICAgIH1cbn1cbi8qKlxuICogUmVnaXN0ZXJzIGEgbGlicmFyeSdzIG5hbWUgYW5kIHZlcnNpb24gZm9yIHBsYXRmb3JtIGxvZ2dpbmcgcHVycG9zZXMuXG4gKiBAcGFyYW0gbGlicmFyeSAtIE5hbWUgb2YgMXAgb3IgM3AgbGlicmFyeSAoZS5nLiBmaXJlc3RvcmUsIGFuZ3VsYXJmaXJlKVxuICogQHBhcmFtIHZlcnNpb24gLSBDdXJyZW50IHZlcnNpb24gb2YgdGhhdCBsaWJyYXJ5LlxuICogQHBhcmFtIHZhcmlhbnQgLSBCdW5kbGUgdmFyaWFudCwgZS5nLiwgbm9kZSwgcm4sIGV0Yy5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmZ1bmN0aW9uIHJlZ2lzdGVyVmVyc2lvbihsaWJyYXJ5S2V5T3JOYW1lLCB2ZXJzaW9uLCB2YXJpYW50KSB7XG4gICAgdmFyIF9hO1xuICAgIC8vIFRPRE86IFdlIGNhbiB1c2UgdGhpcyBjaGVjayB0byB3aGl0ZWxpc3Qgc3RyaW5ncyB3aGVuL2lmIHdlIHNldCB1cFxuICAgIC8vIGEgZ29vZCB3aGl0ZWxpc3Qgc3lzdGVtLlxuICAgIGxldCBsaWJyYXJ5ID0gKF9hID0gUExBVEZPUk1fTE9HX1NUUklOR1tsaWJyYXJ5S2V5T3JOYW1lXSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogbGlicmFyeUtleU9yTmFtZTtcbiAgICBpZiAodmFyaWFudCkge1xuICAgICAgICBsaWJyYXJ5ICs9IGAtJHt2YXJpYW50fWA7XG4gICAgfVxuICAgIGNvbnN0IGxpYnJhcnlNaXNtYXRjaCA9IGxpYnJhcnkubWF0Y2goL1xcc3xcXC8vKTtcbiAgICBjb25zdCB2ZXJzaW9uTWlzbWF0Y2ggPSB2ZXJzaW9uLm1hdGNoKC9cXHN8XFwvLyk7XG4gICAgaWYgKGxpYnJhcnlNaXNtYXRjaCB8fCB2ZXJzaW9uTWlzbWF0Y2gpIHtcbiAgICAgICAgY29uc3Qgd2FybmluZyA9IFtcbiAgICAgICAgICAgIGBVbmFibGUgdG8gcmVnaXN0ZXIgbGlicmFyeSBcIiR7bGlicmFyeX1cIiB3aXRoIHZlcnNpb24gXCIke3ZlcnNpb259XCI6YFxuICAgICAgICBdO1xuICAgICAgICBpZiAobGlicmFyeU1pc21hdGNoKSB7XG4gICAgICAgICAgICB3YXJuaW5nLnB1c2goYGxpYnJhcnkgbmFtZSBcIiR7bGlicmFyeX1cIiBjb250YWlucyBpbGxlZ2FsIGNoYXJhY3RlcnMgKHdoaXRlc3BhY2Ugb3IgXCIvXCIpYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxpYnJhcnlNaXNtYXRjaCAmJiB2ZXJzaW9uTWlzbWF0Y2gpIHtcbiAgICAgICAgICAgIHdhcm5pbmcucHVzaCgnYW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZlcnNpb25NaXNtYXRjaCkge1xuICAgICAgICAgICAgd2FybmluZy5wdXNoKGB2ZXJzaW9uIG5hbWUgXCIke3ZlcnNpb259XCIgY29udGFpbnMgaWxsZWdhbCBjaGFyYWN0ZXJzICh3aGl0ZXNwYWNlIG9yIFwiL1wiKWApO1xuICAgICAgICB9XG4gICAgICAgIGxvZ2dlci53YXJuKHdhcm5pbmcuam9pbignICcpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChgJHtsaWJyYXJ5fS12ZXJzaW9uYCwgKCkgPT4gKHsgbGlicmFyeSwgdmVyc2lvbiB9KSwgXCJWRVJTSU9OXCIgLyogQ29tcG9uZW50VHlwZS5WRVJTSU9OICovKSk7XG59XG4vKipcbiAqIFNldHMgbG9nIGhhbmRsZXIgZm9yIGFsbCBGaXJlYmFzZSBTREtzLlxuICogQHBhcmFtIGxvZ0NhbGxiYWNrIC0gQW4gb3B0aW9uYWwgY3VzdG9tIGxvZyBoYW5kbGVyIHRoYXQgZXhlY3V0ZXMgdXNlciBjb2RlIHdoZW5ldmVyXG4gKiB0aGUgRmlyZWJhc2UgU0RLIG1ha2VzIGEgbG9nZ2luZyBjYWxsLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gb25Mb2cobG9nQ2FsbGJhY2ssIG9wdGlvbnMpIHtcbiAgICBpZiAobG9nQ2FsbGJhY2sgIT09IG51bGwgJiYgdHlwZW9mIGxvZ0NhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaW52YWxpZC1sb2ctYXJndW1lbnRcIiAvKiBBcHBFcnJvci5JTlZBTElEX0xPR19BUkdVTUVOVCAqLyk7XG4gICAgfVxuICAgIHNldFVzZXJMb2dIYW5kbGVyKGxvZ0NhbGxiYWNrLCBvcHRpb25zKTtcbn1cbi8qKlxuICogU2V0cyBsb2cgbGV2ZWwgZm9yIGFsbCBGaXJlYmFzZSBTREtzLlxuICpcbiAqIEFsbCBvZiB0aGUgbG9nIHR5cGVzIGFib3ZlIHRoZSBjdXJyZW50IGxvZyBsZXZlbCBhcmUgY2FwdHVyZWQgKGkuZS4gaWZcbiAqIHlvdSBzZXQgdGhlIGxvZyBsZXZlbCB0byBgaW5mb2AsIGVycm9ycyBhcmUgbG9nZ2VkLCBidXQgYGRlYnVnYCBhbmRcbiAqIGB2ZXJib3NlYCBsb2dzIGFyZSBub3QpLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gc2V0TG9nTGV2ZWwobG9nTGV2ZWwpIHtcbiAgICBzZXRMb2dMZXZlbCQxKGxvZ0xldmVsKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNvbnN0IERCX05BTUUgPSAnZmlyZWJhc2UtaGVhcnRiZWF0LWRhdGFiYXNlJztcbmNvbnN0IERCX1ZFUlNJT04gPSAxO1xuY29uc3QgU1RPUkVfTkFNRSA9ICdmaXJlYmFzZS1oZWFydGJlYXQtc3RvcmUnO1xubGV0IGRiUHJvbWlzZSA9IG51bGw7XG5mdW5jdGlvbiBnZXREYlByb21pc2UoKSB7XG4gICAgaWYgKCFkYlByb21pc2UpIHtcbiAgICAgICAgZGJQcm9taXNlID0gb3BlbkRCKERCX05BTUUsIERCX1ZFUlNJT04sIHtcbiAgICAgICAgICAgIHVwZ3JhZGU6IChkYiwgb2xkVmVyc2lvbikgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFdlIGRvbid0IHVzZSAnYnJlYWsnIGluIHRoaXMgc3dpdGNoIHN0YXRlbWVudCwgdGhlIGZhbGwtdGhyb3VnaFxuICAgICAgICAgICAgICAgIC8vIGJlaGF2aW9yIGlzIHdoYXQgd2Ugd2FudCwgYmVjYXVzZSBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgdmVyc2lvbnMgYmV0d2VlblxuICAgICAgICAgICAgICAgIC8vIHRoZSBvbGQgdmVyc2lvbiBhbmQgdGhlIGN1cnJlbnQgdmVyc2lvbiwgd2Ugd2FudCBBTEwgdGhlIG1pZ3JhdGlvbnNcbiAgICAgICAgICAgICAgICAvLyB0aGF0IGNvcnJlc3BvbmQgdG8gdGhvc2UgdmVyc2lvbnMgdG8gcnVuLCBub3Qgb25seSB0aGUgbGFzdCBvbmUuXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlZmF1bHQtY2FzZVxuICAgICAgICAgICAgICAgIHN3aXRjaCAob2xkVmVyc2lvbikge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRiLmNyZWF0ZU9iamVjdFN0b3JlKFNUT1JFX05BTUUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTYWZhcmkvaU9TIGJyb3dzZXJzIHRocm93IG9jY2FzaW9uYWwgZXhjZXB0aW9ucyBvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRiLmNyZWF0ZU9iamVjdFN0b3JlKCkgdGhhdCBtYXkgYmUgYSBidWcuIEF2b2lkIGJsb2NraW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHJlc3Qgb2YgdGhlIGFwcCBmdW5jdGlvbmFsaXR5LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLmNhdGNoKGUgPT4ge1xuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpZGItb3BlblwiIC8qIEFwcEVycm9yLklEQl9PUEVOICovLCB7XG4gICAgICAgICAgICAgICAgb3JpZ2luYWxFcnJvck1lc3NhZ2U6IGUubWVzc2FnZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gZGJQcm9taXNlO1xufVxuYXN5bmMgZnVuY3Rpb24gcmVhZEhlYXJ0YmVhdHNGcm9tSW5kZXhlZERCKGFwcCkge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGJQcm9taXNlKCk7XG4gICAgICAgIGNvbnN0IHR4ID0gZGIudHJhbnNhY3Rpb24oU1RPUkVfTkFNRSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHR4Lm9iamVjdFN0b3JlKFNUT1JFX05BTUUpLmdldChjb21wdXRlS2V5KGFwcCkpO1xuICAgICAgICAvLyBXZSBhbHJlYWR5IGhhdmUgdGhlIHZhbHVlIGJ1dCB0eC5kb25lIGNhbiB0aHJvdyxcbiAgICAgICAgLy8gc28gd2UgbmVlZCB0byBhd2FpdCBpdCBoZXJlIHRvIGNhdGNoIGVycm9yc1xuICAgICAgICBhd2FpdCB0eC5kb25lO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGUubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBpZGJHZXRFcnJvciA9IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaWRiLWdldFwiIC8qIEFwcEVycm9yLklEQl9HRVQgKi8sIHtcbiAgICAgICAgICAgICAgICBvcmlnaW5hbEVycm9yTWVzc2FnZTogZSA9PT0gbnVsbCB8fCBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlLm1lc3NhZ2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oaWRiR2V0RXJyb3IubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5hc3luYyBmdW5jdGlvbiB3cml0ZUhlYXJ0YmVhdHNUb0luZGV4ZWREQihhcHAsIGhlYXJ0YmVhdE9iamVjdCkge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGJQcm9taXNlKCk7XG4gICAgICAgIGNvbnN0IHR4ID0gZGIudHJhbnNhY3Rpb24oU1RPUkVfTkFNRSwgJ3JlYWR3cml0ZScpO1xuICAgICAgICBjb25zdCBvYmplY3RTdG9yZSA9IHR4Lm9iamVjdFN0b3JlKFNUT1JFX05BTUUpO1xuICAgICAgICBhd2FpdCBvYmplY3RTdG9yZS5wdXQoaGVhcnRiZWF0T2JqZWN0LCBjb21wdXRlS2V5KGFwcCkpO1xuICAgICAgICBhd2FpdCB0eC5kb25lO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGUubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBpZGJHZXRFcnJvciA9IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaWRiLXNldFwiIC8qIEFwcEVycm9yLklEQl9XUklURSAqLywge1xuICAgICAgICAgICAgICAgIG9yaWdpbmFsRXJyb3JNZXNzYWdlOiBlID09PSBudWxsIHx8IGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGUubWVzc2FnZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBsb2dnZXIud2FybihpZGJHZXRFcnJvci5tZXNzYWdlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGNvbXB1dGVLZXkoYXBwKSB7XG4gICAgcmV0dXJuIGAke2FwcC5uYW1lfSEke2FwcC5vcHRpb25zLmFwcElkfWA7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jb25zdCBNQVhfSEVBREVSX0JZVEVTID0gMTAyNDtcbi8vIDMwIGRheXNcbmNvbnN0IFNUT1JFRF9IRUFSVEJFQVRfUkVURU5USU9OX01BWF9NSUxMSVMgPSAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDA7XG5jbGFzcyBIZWFydGJlYXRTZXJ2aWNlSW1wbCB7XG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyKSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgICAgICAvKipcbiAgICAgICAgICogSW4tbWVtb3J5IGNhY2hlIGZvciBoZWFydGJlYXRzLCB1c2VkIGJ5IGdldEhlYXJ0YmVhdHNIZWFkZXIoKSB0byBnZW5lcmF0ZVxuICAgICAgICAgKiB0aGUgaGVhZGVyIHN0cmluZy5cbiAgICAgICAgICogU3RvcmVzIG9uZSByZWNvcmQgcGVyIGRhdGUuIFRoaXMgd2lsbCBiZSBjb25zb2xpZGF0ZWQgaW50byB0aGUgc3RhbmRhcmRcbiAgICAgICAgICogZm9ybWF0IG9mIG9uZSByZWNvcmQgcGVyIHVzZXIgYWdlbnQgc3RyaW5nIGJlZm9yZSBiZWluZyBzZW50IGFzIGEgaGVhZGVyLlxuICAgICAgICAgKiBQb3B1bGF0ZWQgZnJvbSBpbmRleGVkREIgd2hlbiB0aGUgY29udHJvbGxlciBpcyBpbnN0YW50aWF0ZWQgYW5kIHNob3VsZFxuICAgICAgICAgKiBiZSBrZXB0IGluIHN5bmMgd2l0aCBpbmRleGVkREIuXG4gICAgICAgICAqIExlYXZlIHB1YmxpYyBmb3IgZWFzaWVyIHRlc3RpbmcuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPSBudWxsO1xuICAgICAgICBjb25zdCBhcHAgPSB0aGlzLmNvbnRhaW5lci5nZXRQcm92aWRlcignYXBwJykuZ2V0SW1tZWRpYXRlKCk7XG4gICAgICAgIHRoaXMuX3N0b3JhZ2UgPSBuZXcgSGVhcnRiZWF0U3RvcmFnZUltcGwoYXBwKTtcbiAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlUHJvbWlzZSA9IHRoaXMuX3N0b3JhZ2UucmVhZCgpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9IHJlc3VsdDtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgdG8gcmVwb3J0IGEgaGVhcnRiZWF0LiBUaGUgZnVuY3Rpb24gd2lsbCBnZW5lcmF0ZVxuICAgICAqIGEgSGVhcnRiZWF0c0J5VXNlckFnZW50IG9iamVjdCwgdXBkYXRlIGhlYXJ0YmVhdHNDYWNoZSwgYW5kIHBlcnNpc3QgaXRcbiAgICAgKiB0byBJbmRleGVkREIuXG4gICAgICogTm90ZSB0aGF0IHdlIG9ubHkgc3RvcmUgb25lIGhlYXJ0YmVhdCBwZXIgZGF5LiBTbyBpZiBhIGhlYXJ0YmVhdCBmb3IgdG9kYXkgaXNcbiAgICAgKiBhbHJlYWR5IGxvZ2dlZCwgc3Vic2VxdWVudCBjYWxscyB0byB0aGlzIGZ1bmN0aW9uIGluIHRoZSBzYW1lIGRheSB3aWxsIGJlIGlnbm9yZWQuXG4gICAgICovXG4gICAgYXN5bmMgdHJpZ2dlckhlYXJ0YmVhdCgpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHBsYXRmb3JtTG9nZ2VyID0gdGhpcy5jb250YWluZXJcbiAgICAgICAgICAgICAgICAuZ2V0UHJvdmlkZXIoJ3BsYXRmb3JtLWxvZ2dlcicpXG4gICAgICAgICAgICAgICAgLmdldEltbWVkaWF0ZSgpO1xuICAgICAgICAgICAgLy8gVGhpcyBpcyB0aGUgXCJGaXJlYmFzZSB1c2VyIGFnZW50XCIgc3RyaW5nIGZyb20gdGhlIHBsYXRmb3JtIGxvZ2dlclxuICAgICAgICAgICAgLy8gc2VydmljZSwgbm90IHRoZSBicm93c2VyIHVzZXIgYWdlbnQuXG4gICAgICAgICAgICBjb25zdCBhZ2VudCA9IHBsYXRmb3JtTG9nZ2VyLmdldFBsYXRmb3JtSW5mb1N0cmluZygpO1xuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IGdldFVUQ0RhdGVTdHJpbmcoKTtcbiAgICAgICAgICAgIGlmICgoKF9hID0gdGhpcy5faGVhcnRiZWF0c0NhY2hlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaGVhcnRiZWF0cykgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9IGF3YWl0IHRoaXMuX2hlYXJ0YmVhdHNDYWNoZVByb21pc2U7XG4gICAgICAgICAgICAgICAgLy8gSWYgd2UgZmFpbGVkIHRvIGNvbnN0cnVjdCBhIGhlYXJ0YmVhdHMgY2FjaGUsIHRoZW4gcmV0dXJuIGltbWVkaWF0ZWx5LlxuICAgICAgICAgICAgICAgIGlmICgoKF9iID0gdGhpcy5faGVhcnRiZWF0c0NhY2hlKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuaGVhcnRiZWF0cykgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRG8gbm90IHN0b3JlIGEgaGVhcnRiZWF0IGlmIG9uZSBpcyBhbHJlYWR5IHN0b3JlZCBmb3IgdGhpcyBkYXlcbiAgICAgICAgICAgIC8vIG9yIGlmIGEgaGVhZGVyIGhhcyBhbHJlYWR5IGJlZW4gc2VudCB0b2RheS5cbiAgICAgICAgICAgIGlmICh0aGlzLl9oZWFydGJlYXRzQ2FjaGUubGFzdFNlbnRIZWFydGJlYXREYXRlID09PSBkYXRlIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMuc29tZShzaW5nbGVEYXRlSGVhcnRiZWF0ID0+IHNpbmdsZURhdGVIZWFydGJlYXQuZGF0ZSA9PT0gZGF0ZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBUaGVyZSBpcyBubyBlbnRyeSBmb3IgdGhpcyBkYXRlLiBDcmVhdGUgb25lLlxuICAgICAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzLnB1c2goeyBkYXRlLCBhZ2VudCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFJlbW92ZSBlbnRyaWVzIG9sZGVyIHRoYW4gMzAgZGF5cy5cbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzID1cbiAgICAgICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cy5maWx0ZXIoc2luZ2xlRGF0ZUhlYXJ0YmVhdCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGhiVGltZXN0YW1wID0gbmV3IERhdGUoc2luZ2xlRGF0ZUhlYXJ0YmVhdC5kYXRlKS52YWx1ZU9mKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBub3cgLSBoYlRpbWVzdGFtcCA8PSBTVE9SRURfSEVBUlRCRUFUX1JFVEVOVElPTl9NQVhfTUlMTElTO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0b3JhZ2Uub3ZlcndyaXRlKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcgd2hpY2ggY2FuIGJlIGF0dGFjaGVkIHRvIHRoZSBoZWFydGJlYXQtc3BlY2lmaWMgaGVhZGVyIGRpcmVjdGx5LlxuICAgICAqIEl0IGFsc28gY2xlYXJzIGFsbCBoZWFydGJlYXRzIGZyb20gbWVtb3J5IGFzIHdlbGwgYXMgaW4gSW5kZXhlZERCLlxuICAgICAqXG4gICAgICogTk9URTogQ29uc3VtaW5nIHByb2R1Y3QgU0RLcyBzaG91bGQgbm90IHNlbmQgdGhlIGhlYWRlciBpZiB0aGlzIG1ldGhvZFxuICAgICAqIHJldHVybnMgYW4gZW1wdHkgc3RyaW5nLlxuICAgICAqL1xuICAgIGFzeW5jIGdldEhlYXJ0YmVhdHNIZWFkZXIoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLl9oZWFydGJlYXRzQ2FjaGVQcm9taXNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgaXQncyBzdGlsbCBudWxsIG9yIHRoZSBhcnJheSBpcyBlbXB0eSwgdGhlcmUgaXMgbm8gZGF0YSB0byBzZW5kLlxuICAgICAgICAgICAgaWYgKCgoX2EgPSB0aGlzLl9oZWFydGJlYXRzQ2FjaGUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5oZWFydGJlYXRzKSA9PSBudWxsIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IGdldFVUQ0RhdGVTdHJpbmcoKTtcbiAgICAgICAgICAgIC8vIEV4dHJhY3QgYXMgbWFueSBoZWFydGJlYXRzIGZyb20gdGhlIGNhY2hlIGFzIHdpbGwgZml0IHVuZGVyIHRoZSBzaXplIGxpbWl0LlxuICAgICAgICAgICAgY29uc3QgeyBoZWFydGJlYXRzVG9TZW5kLCB1bnNlbnRFbnRyaWVzIH0gPSBleHRyYWN0SGVhcnRiZWF0c0ZvckhlYWRlcih0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cyk7XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJTdHJpbmcgPSBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhKU09OLnN0cmluZ2lmeSh7IHZlcnNpb246IDIsIGhlYXJ0YmVhdHM6IGhlYXJ0YmVhdHNUb1NlbmQgfSkpO1xuICAgICAgICAgICAgLy8gU3RvcmUgbGFzdCBzZW50IGRhdGUgdG8gcHJldmVudCBhbm90aGVyIGJlaW5nIGxvZ2dlZC9zZW50IGZvciB0aGUgc2FtZSBkYXkuXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUubGFzdFNlbnRIZWFydGJlYXREYXRlID0gZGF0ZTtcbiAgICAgICAgICAgIGlmICh1bnNlbnRFbnRyaWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAvLyBTdG9yZSBhbnkgdW5zZW50IGVudHJpZXMgaWYgdGhleSBleGlzdC5cbiAgICAgICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cyA9IHVuc2VudEVudHJpZXM7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBzZWVtcyBtb3JlIGxpa2VseSB0aGFuIGVtcHR5aW5nIHRoZSBhcnJheSAoYmVsb3cpIHRvIGxlYWQgdG8gc29tZSBvZGQgc3RhdGVcbiAgICAgICAgICAgICAgICAvLyBzaW5jZSB0aGUgY2FjaGUgaXNuJ3QgZW1wdHkgYW5kIHRoaXMgd2lsbCBiZSBjYWxsZWQgYWdhaW4gb24gdGhlIG5leHQgcmVxdWVzdCxcbiAgICAgICAgICAgICAgICAvLyBhbmQgaXMgcHJvYmFibHkgc2FmZXN0IGlmIHdlIGF3YWl0IGl0LlxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX3N0b3JhZ2Uub3ZlcndyaXRlKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cyA9IFtdO1xuICAgICAgICAgICAgICAgIC8vIERvIG5vdCB3YWl0IGZvciB0aGlzLCB0byByZWR1Y2UgbGF0ZW5jeS5cbiAgICAgICAgICAgICAgICB2b2lkIHRoaXMuX3N0b3JhZ2Uub3ZlcndyaXRlKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaGVhZGVyU3RyaW5nO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybihlKTtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGdldFVUQ0RhdGVTdHJpbmcoKSB7XG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgIC8vIFJldHVybnMgZGF0ZSBmb3JtYXQgJ1lZWVktTU0tREQnXG4gICAgcmV0dXJuIHRvZGF5LnRvSVNPU3RyaW5nKCkuc3Vic3RyaW5nKDAsIDEwKTtcbn1cbmZ1bmN0aW9uIGV4dHJhY3RIZWFydGJlYXRzRm9ySGVhZGVyKGhlYXJ0YmVhdHNDYWNoZSwgbWF4U2l6ZSA9IE1BWF9IRUFERVJfQllURVMpIHtcbiAgICAvLyBIZWFydGJlYXRzIGdyb3VwZWQgYnkgdXNlciBhZ2VudCBpbiB0aGUgc3RhbmRhcmQgZm9ybWF0IHRvIGJlIHNlbnQgaW5cbiAgICAvLyB0aGUgaGVhZGVyLlxuICAgIGNvbnN0IGhlYXJ0YmVhdHNUb1NlbmQgPSBbXTtcbiAgICAvLyBTaW5nbGUgZGF0ZSBmb3JtYXQgaGVhcnRiZWF0cyB0aGF0IGFyZSBub3Qgc2VudC5cbiAgICBsZXQgdW5zZW50RW50cmllcyA9IGhlYXJ0YmVhdHNDYWNoZS5zbGljZSgpO1xuICAgIGZvciAoY29uc3Qgc2luZ2xlRGF0ZUhlYXJ0YmVhdCBvZiBoZWFydGJlYXRzQ2FjaGUpIHtcbiAgICAgICAgLy8gTG9vayBmb3IgYW4gZXhpc3RpbmcgZW50cnkgd2l0aCB0aGUgc2FtZSB1c2VyIGFnZW50LlxuICAgICAgICBjb25zdCBoZWFydGJlYXRFbnRyeSA9IGhlYXJ0YmVhdHNUb1NlbmQuZmluZChoYiA9PiBoYi5hZ2VudCA9PT0gc2luZ2xlRGF0ZUhlYXJ0YmVhdC5hZ2VudCk7XG4gICAgICAgIGlmICghaGVhcnRiZWF0RW50cnkpIHtcbiAgICAgICAgICAgIC8vIElmIG5vIGVudHJ5IGZvciB0aGlzIHVzZXIgYWdlbnQgZXhpc3RzLCBjcmVhdGUgb25lLlxuICAgICAgICAgICAgaGVhcnRiZWF0c1RvU2VuZC5wdXNoKHtcbiAgICAgICAgICAgICAgICBhZ2VudDogc2luZ2xlRGF0ZUhlYXJ0YmVhdC5hZ2VudCxcbiAgICAgICAgICAgICAgICBkYXRlczogW3NpbmdsZURhdGVIZWFydGJlYXQuZGF0ZV1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGNvdW50Qnl0ZXMoaGVhcnRiZWF0c1RvU2VuZCkgPiBtYXhTaXplKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIGhlYWRlciB3b3VsZCBleGNlZWQgbWF4IHNpemUsIHJlbW92ZSB0aGUgYWRkZWQgaGVhcnRiZWF0XG4gICAgICAgICAgICAgICAgLy8gZW50cnkgYW5kIHN0b3AgYWRkaW5nIHRvIHRoZSBoZWFkZXIuXG4gICAgICAgICAgICAgICAgaGVhcnRiZWF0c1RvU2VuZC5wb3AoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGhlYXJ0YmVhdEVudHJ5LmRhdGVzLnB1c2goc2luZ2xlRGF0ZUhlYXJ0YmVhdC5kYXRlKTtcbiAgICAgICAgICAgIC8vIElmIHRoZSBoZWFkZXIgd291bGQgZXhjZWVkIG1heCBzaXplLCByZW1vdmUgdGhlIGFkZGVkIGRhdGVcbiAgICAgICAgICAgIC8vIGFuZCBzdG9wIGFkZGluZyB0byB0aGUgaGVhZGVyLlxuICAgICAgICAgICAgaWYgKGNvdW50Qnl0ZXMoaGVhcnRiZWF0c1RvU2VuZCkgPiBtYXhTaXplKSB7XG4gICAgICAgICAgICAgICAgaGVhcnRiZWF0RW50cnkuZGF0ZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gUG9wIHVuc2VudCBlbnRyeSBmcm9tIHF1ZXVlLiAoU2tpcHBlZCBpZiBhZGRpbmcgdGhlIGVudHJ5IGV4Y2VlZGVkXG4gICAgICAgIC8vIHF1b3RhIGFuZCB0aGUgbG9vcCBicmVha3MgZWFybHkuKVxuICAgICAgICB1bnNlbnRFbnRyaWVzID0gdW5zZW50RW50cmllcy5zbGljZSgxKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaGVhcnRiZWF0c1RvU2VuZCxcbiAgICAgICAgdW5zZW50RW50cmllc1xuICAgIH07XG59XG5jbGFzcyBIZWFydGJlYXRTdG9yYWdlSW1wbCB7XG4gICAgY29uc3RydWN0b3IoYXBwKSB7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgICAgICB0aGlzLl9jYW5Vc2VJbmRleGVkREJQcm9taXNlID0gdGhpcy5ydW5JbmRleGVkREJFbnZpcm9ubWVudENoZWNrKCk7XG4gICAgfVxuICAgIGFzeW5jIHJ1bkluZGV4ZWREQkVudmlyb25tZW50Q2hlY2soKSB7XG4gICAgICAgIGlmICghaXNJbmRleGVkREJBdmFpbGFibGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUoKVxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHRydWUpXG4gICAgICAgICAgICAgICAgLmNhdGNoKCgpID0+IGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWFkIGFsbCBoZWFydGJlYXRzLlxuICAgICAqL1xuICAgIGFzeW5jIHJlYWQoKSB7XG4gICAgICAgIGNvbnN0IGNhblVzZUluZGV4ZWREQiA9IGF3YWl0IHRoaXMuX2NhblVzZUluZGV4ZWREQlByb21pc2U7XG4gICAgICAgIGlmICghY2FuVXNlSW5kZXhlZERCKSB7XG4gICAgICAgICAgICByZXR1cm4geyBoZWFydGJlYXRzOiBbXSB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgaWRiSGVhcnRiZWF0T2JqZWN0ID0gYXdhaXQgcmVhZEhlYXJ0YmVhdHNGcm9tSW5kZXhlZERCKHRoaXMuYXBwKTtcbiAgICAgICAgICAgIGlmIChpZGJIZWFydGJlYXRPYmplY3QgPT09IG51bGwgfHwgaWRiSGVhcnRiZWF0T2JqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpZGJIZWFydGJlYXRPYmplY3QuaGVhcnRiZWF0cykge1xuICAgICAgICAgICAgICAgIHJldHVybiBpZGJIZWFydGJlYXRPYmplY3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBoZWFydGJlYXRzOiBbXSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIG92ZXJ3cml0ZSB0aGUgc3RvcmFnZSB3aXRoIHRoZSBwcm92aWRlZCBoZWFydGJlYXRzXG4gICAgYXN5bmMgb3ZlcndyaXRlKGhlYXJ0YmVhdHNPYmplY3QpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCBjYW5Vc2VJbmRleGVkREIgPSBhd2FpdCB0aGlzLl9jYW5Vc2VJbmRleGVkREJQcm9taXNlO1xuICAgICAgICBpZiAoIWNhblVzZUluZGV4ZWREQikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0ID0gYXdhaXQgdGhpcy5yZWFkKCk7XG4gICAgICAgICAgICByZXR1cm4gd3JpdGVIZWFydGJlYXRzVG9JbmRleGVkREIodGhpcy5hcHAsIHtcbiAgICAgICAgICAgICAgICBsYXN0U2VudEhlYXJ0YmVhdERhdGU6IChfYSA9IGhlYXJ0YmVhdHNPYmplY3QubGFzdFNlbnRIZWFydGJlYXREYXRlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBleGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QubGFzdFNlbnRIZWFydGJlYXREYXRlLFxuICAgICAgICAgICAgICAgIGhlYXJ0YmVhdHM6IGhlYXJ0YmVhdHNPYmplY3QuaGVhcnRiZWF0c1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gYWRkIGhlYXJ0YmVhdHNcbiAgICBhc3luYyBhZGQoaGVhcnRiZWF0c09iamVjdCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnN0IGNhblVzZUluZGV4ZWREQiA9IGF3YWl0IHRoaXMuX2NhblVzZUluZGV4ZWREQlByb21pc2U7XG4gICAgICAgIGlmICghY2FuVXNlSW5kZXhlZERCKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QgPSBhd2FpdCB0aGlzLnJlYWQoKTtcbiAgICAgICAgICAgIHJldHVybiB3cml0ZUhlYXJ0YmVhdHNUb0luZGV4ZWREQih0aGlzLmFwcCwge1xuICAgICAgICAgICAgICAgIGxhc3RTZW50SGVhcnRiZWF0RGF0ZTogKF9hID0gaGVhcnRiZWF0c09iamVjdC5sYXN0U2VudEhlYXJ0YmVhdERhdGUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGV4aXN0aW5nSGVhcnRiZWF0c09iamVjdC5sYXN0U2VudEhlYXJ0YmVhdERhdGUsXG4gICAgICAgICAgICAgICAgaGVhcnRiZWF0czogW1xuICAgICAgICAgICAgICAgICAgICAuLi5leGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QuaGVhcnRiZWF0cyxcbiAgICAgICAgICAgICAgICAgICAgLi4uaGVhcnRiZWF0c09iamVjdC5oZWFydGJlYXRzXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIENhbGN1bGF0ZSBieXRlcyBvZiBhIEhlYXJ0YmVhdHNCeVVzZXJBZ2VudCBhcnJheSBhZnRlciBiZWluZyB3cmFwcGVkXG4gKiBpbiBhIHBsYXRmb3JtIGxvZ2dpbmcgaGVhZGVyIEpTT04gb2JqZWN0LCBzdHJpbmdpZmllZCwgYW5kIGNvbnZlcnRlZFxuICogdG8gYmFzZSA2NC5cbiAqL1xuZnVuY3Rpb24gY291bnRCeXRlcyhoZWFydGJlYXRzQ2FjaGUpIHtcbiAgICAvLyBiYXNlNjQgaGFzIGEgcmVzdHJpY3RlZCBzZXQgb2YgY2hhcmFjdGVycywgYWxsIG9mIHdoaWNoIHNob3VsZCBiZSAxIGJ5dGUuXG4gICAgcmV0dXJuIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nKFxuICAgIC8vIGhlYXJ0YmVhdHNDYWNoZSB3cmFwcGVyIHByb3BlcnRpZXNcbiAgICBKU09OLnN0cmluZ2lmeSh7IHZlcnNpb246IDIsIGhlYXJ0YmVhdHM6IGhlYXJ0YmVhdHNDYWNoZSB9KSkubGVuZ3RoO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuZnVuY3Rpb24gcmVnaXN0ZXJDb3JlQ29tcG9uZW50cyh2YXJpYW50KSB7XG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoJ3BsYXRmb3JtLWxvZ2dlcicsIGNvbnRhaW5lciA9PiBuZXcgUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlSW1wbChjb250YWluZXIpLCBcIlBSSVZBVEVcIiAvKiBDb21wb25lbnRUeXBlLlBSSVZBVEUgKi8pKTtcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudCgnaGVhcnRiZWF0JywgY29udGFpbmVyID0+IG5ldyBIZWFydGJlYXRTZXJ2aWNlSW1wbChjb250YWluZXIpLCBcIlBSSVZBVEVcIiAvKiBDb21wb25lbnRUeXBlLlBSSVZBVEUgKi8pKTtcbiAgICAvLyBSZWdpc3RlciBgYXBwYCBwYWNrYWdlLlxuICAgIHJlZ2lzdGVyVmVyc2lvbihuYW1lJHEsIHZlcnNpb24kMSwgdmFyaWFudCk7XG4gICAgLy8gQlVJTERfVEFSR0VUIHdpbGwgYmUgcmVwbGFjZWQgYnkgdmFsdWVzIGxpa2UgZXNtMjAxNywgY2pzMjAxNywgZXRjIGR1cmluZyB0aGUgY29tcGlsYXRpb25cbiAgICByZWdpc3RlclZlcnNpb24obmFtZSRxLCB2ZXJzaW9uJDEsICdlc20yMDE3Jyk7XG4gICAgLy8gUmVnaXN0ZXIgcGxhdGZvcm0gU0RLIGlkZW50aWZpZXIgKG5vIHZlcnNpb24pLlxuICAgIHJlZ2lzdGVyVmVyc2lvbignZmlyZS1qcycsICcnKTtcbn1cblxuLyoqXG4gKiBGaXJlYmFzZSBBcHBcbiAqXG4gKiBAcmVtYXJrcyBUaGlzIHBhY2thZ2UgY29vcmRpbmF0ZXMgdGhlIGNvbW11bmljYXRpb24gYmV0d2VlbiB0aGUgZGlmZmVyZW50IEZpcmViYXNlIGNvbXBvbmVudHNcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICovXG5yZWdpc3RlckNvcmVDb21wb25lbnRzKCcnKTtcblxuZXhwb3J0IHsgU0RLX1ZFUlNJT04sIERFRkFVTFRfRU5UUllfTkFNRSBhcyBfREVGQVVMVF9FTlRSWV9OQU1FLCBfYWRkQ29tcG9uZW50LCBfYWRkT3JPdmVyd3JpdGVDb21wb25lbnQsIF9hcHBzLCBfY2xlYXJDb21wb25lbnRzLCBfY29tcG9uZW50cywgX2dldFByb3ZpZGVyLCBfaXNGaXJlYmFzZUFwcCwgX2lzRmlyZWJhc2VTZXJ2ZXJBcHAsIF9yZWdpc3RlckNvbXBvbmVudCwgX3JlbW92ZVNlcnZpY2VJbnN0YW5jZSwgX3NlcnZlckFwcHMsIGRlbGV0ZUFwcCwgZ2V0QXBwLCBnZXRBcHBzLCBpbml0aWFsaXplQXBwLCBpbml0aWFsaXplU2VydmVyQXBwLCBvbkxvZywgcmVnaXN0ZXJWZXJzaW9uLCBzZXRMb2dMZXZlbCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsImltcG9ydCB7IHJlZ2lzdGVyVmVyc2lvbiB9IGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuZXhwb3J0ICogZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5cbnZhciBuYW1lID0gXCJmaXJlYmFzZVwiO1xudmFyIHZlcnNpb24gPSBcIjExLjAuMlwiO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xucmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24sICdhcHAnKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbS5qcy5tYXBcbiIsImltcG9ydCB7IGluaXRpYWxpemVBcHAgfSBmcm9tIFwiZmlyZWJhc2UvYXBwXCI7XG5cbmNvbnN0IGZpcmViYXNlQ29uZmlnID0ge1xuICBhcGlLZXk6IFwiQUl6YVN5Q0dTaEhLYldnUFNDT1BWem9MOEd2Y1AyODdPeWVjenEwXCIsXG4gIGF1dGhEb21haW46IFwidHJhdmVsLWFnZW5jeS1qYXZhc2NyaXB0LmZpcmViYXNlYXBwLmNvbVwiLFxuICBkYXRhYmFzZVVSTDpcbiAgICBcImh0dHBzOi8vdHJhdmVsLWFnZW5jeS1qYXZhc2NyaXB0LWRlZmF1bHQtcnRkYi5ldXJvcGUtd2VzdDEuZmlyZWJhc2VkYXRhYmFzZS5hcHAvXCIsXG4gIHByb2plY3RJZDogXCJ0cmF2ZWwtYWdlbmN5LWphdmFzY3JpcHRcIixcbiAgc3RvcmFnZUJ1Y2tldDogXCJ0cmF2ZWwtYWdlbmN5LWphdmFzY3JpcHQuZmlyZWJhc2VzdG9yYWdlLmFwcFwiLFxuICBtZXNzYWdpbmdTZW5kZXJJZDogXCI2MjgwNTQ3MTI0NzJcIixcbiAgYXBwSWQ6IFwiMTo2MjgwNTQ3MTI0NzI6d2ViOmE0YTU1Zjk1Y2Q4ZWVkZjAyZWIwZWRcIixcbn07XG5cbmNvbnN0IGFwcCA9IGluaXRpYWxpemVBcHAoZmlyZWJhc2VDb25maWcpO1xuXG5leHBvcnQgZGVmYXVsdCBhcHA7XG4iLCJpbXBvcnQgeyBfZ2V0UHJvdmlkZXIsIGdldEFwcCwgU0RLX1ZFUlNJT04gYXMgU0RLX1ZFUlNJT04kMSwgX3JlZ2lzdGVyQ29tcG9uZW50LCByZWdpc3RlclZlcnNpb24gfSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCB7IENvbXBvbmVudCwgQ29tcG9uZW50Q29udGFpbmVyLCBQcm92aWRlciB9IGZyb20gJ0BmaXJlYmFzZS9jb21wb25lbnQnO1xuaW1wb3J0IHsgc3RyaW5naWZ5LCBqc29uRXZhbCwgY29udGFpbnMsIGFzc2VydCwgaXNOb2RlU2RrLCBzdHJpbmdUb0J5dGVBcnJheSwgU2hhMSwgYmFzZTY0LCBkZWVwQ29weSwgYmFzZTY0RW5jb2RlLCBpc01vYmlsZUNvcmRvdmEsIHN0cmluZ0xlbmd0aCwgRGVmZXJyZWQsIHNhZmVHZXQsIGlzQWRtaW4sIGlzVmFsaWRGb3JtYXQsIGlzRW1wdHksIGlzUmVhY3ROYXRpdmUsIGFzc2VydGlvbkVycm9yLCBtYXAsIHF1ZXJ5c3RyaW5nLCBlcnJvclByZWZpeCwgZ2V0TW9kdWxhckluc3RhbmNlLCBnZXREZWZhdWx0RW11bGF0b3JIb3N0bmFtZUFuZFBvcnQsIGNyZWF0ZU1vY2tVc2VyVG9rZW4gfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBMb2dnZXIsIExvZ0xldmVsIH0gZnJvbSAnQGZpcmViYXNlL2xvZ2dlcic7XG5cbmNvbnN0IG5hbWUgPSBcIkBmaXJlYmFzZS9kYXRhYmFzZVwiO1xuY29uc3QgdmVyc2lvbiA9IFwiMS4wLjEwXCI7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogVGhlIHNlbXZlciAod3d3LnNlbXZlci5vcmcpIHZlcnNpb24gb2YgdGhlIFNESy4gKi9cbmxldCBTREtfVkVSU0lPTiA9ICcnO1xuLyoqXG4gKiBTREtfVkVSU0lPTiBzaG91bGQgYmUgc2V0IGJlZm9yZSBhbnkgZGF0YWJhc2UgaW5zdGFuY2UgaXMgY3JlYXRlZFxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIHNldFNES1ZlcnNpb24odmVyc2lvbikge1xuICAgIFNES19WRVJTSU9OID0gdmVyc2lvbjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogV3JhcHMgYSBET00gU3RvcmFnZSBvYmplY3QgYW5kOlxuICogLSBhdXRvbWF0aWNhbGx5IGVuY29kZSBvYmplY3RzIGFzIEpTT04gc3RyaW5ncyBiZWZvcmUgc3RvcmluZyB0aGVtIHRvIGFsbG93IHVzIHRvIHN0b3JlIGFyYml0cmFyeSB0eXBlcy5cbiAqIC0gcHJlZml4ZXMgbmFtZXMgd2l0aCBcImZpcmViYXNlOlwiIHRvIGF2b2lkIGNvbGxpc2lvbnMgd2l0aCBhcHAgZGF0YS5cbiAqXG4gKiBXZSBhdXRvbWF0aWNhbGx5IChzZWUgc3RvcmFnZS5qcykgY3JlYXRlIHR3byBzdWNoIHdyYXBwZXJzLCBvbmUgZm9yIHNlc3Npb25TdG9yYWdlLFxuICogYW5kIG9uZSBmb3IgbG9jYWxTdG9yYWdlLlxuICpcbiAqL1xuY2xhc3MgRE9NU3RvcmFnZVdyYXBwZXIge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBkb21TdG9yYWdlXyAtIFRoZSB1bmRlcmx5aW5nIHN0b3JhZ2Ugb2JqZWN0IChlLmcuIGxvY2FsU3RvcmFnZSBvciBzZXNzaW9uU3RvcmFnZSlcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihkb21TdG9yYWdlXykge1xuICAgICAgICB0aGlzLmRvbVN0b3JhZ2VfID0gZG9tU3RvcmFnZV87XG4gICAgICAgIC8vIFVzZSBhIHByZWZpeCB0byBhdm9pZCBjb2xsaXNpb25zIHdpdGggb3RoZXIgc3R1ZmYgc2F2ZWQgYnkgdGhlIGFwcC5cbiAgICAgICAgdGhpcy5wcmVmaXhfID0gJ2ZpcmViYXNlOic7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBrZXkgLSBUaGUga2V5IHRvIHNhdmUgdGhlIHZhbHVlIHVuZGVyXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIGJlaW5nIHN0b3JlZCwgb3IgbnVsbCB0byByZW1vdmUgdGhlIGtleS5cbiAgICAgKi9cbiAgICBzZXQoa2V5LCB2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5kb21TdG9yYWdlXy5yZW1vdmVJdGVtKHRoaXMucHJlZml4ZWROYW1lXyhrZXkpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZG9tU3RvcmFnZV8uc2V0SXRlbSh0aGlzLnByZWZpeGVkTmFtZV8oa2V5KSwgc3RyaW5naWZ5KHZhbHVlKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybnMgVGhlIHZhbHVlIHRoYXQgd2FzIHN0b3JlZCB1bmRlciB0aGlzIGtleSwgb3IgbnVsbFxuICAgICAqL1xuICAgIGdldChrZXkpIHtcbiAgICAgICAgY29uc3Qgc3RvcmVkVmFsID0gdGhpcy5kb21TdG9yYWdlXy5nZXRJdGVtKHRoaXMucHJlZml4ZWROYW1lXyhrZXkpKTtcbiAgICAgICAgaWYgKHN0b3JlZFZhbCA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBqc29uRXZhbChzdG9yZWRWYWwpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbW92ZShrZXkpIHtcbiAgICAgICAgdGhpcy5kb21TdG9yYWdlXy5yZW1vdmVJdGVtKHRoaXMucHJlZml4ZWROYW1lXyhrZXkpKTtcbiAgICB9XG4gICAgcHJlZml4ZWROYW1lXyhuYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByZWZpeF8gKyBuYW1lO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9tU3RvcmFnZV8udG9TdHJpbmcoKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGluLW1lbW9yeSBzdG9yYWdlIGltcGxlbWVudGF0aW9uIHRoYXQgbWF0Y2hlcyB0aGUgQVBJIG9mIERPTVN0b3JhZ2VXcmFwcGVyXG4gKiAoVE9ETzogY3JlYXRlIGludGVyZmFjZSBmb3IgYm90aCB0byBpbXBsZW1lbnQpLlxuICovXG5jbGFzcyBNZW1vcnlTdG9yYWdlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5jYWNoZV8gPSB7fTtcbiAgICAgICAgdGhpcy5pc0luTWVtb3J5U3RvcmFnZSA9IHRydWU7XG4gICAgfVxuICAgIHNldChrZXksIHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5jYWNoZV9ba2V5XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2FjaGVfW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQoa2V5KSB7XG4gICAgICAgIGlmIChjb250YWlucyh0aGlzLmNhY2hlXywga2V5KSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGVfW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJlbW92ZShrZXkpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuY2FjaGVfW2tleV07XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBIZWxwZXIgdG8gY3JlYXRlIGEgRE9NU3RvcmFnZVdyYXBwZXIgb3IgZWxzZSBmYWxsIGJhY2sgdG8gTWVtb3J5U3RvcmFnZS5cbiAqIFRPRE86IE9uY2UgTWVtb3J5U3RvcmFnZSBhbmQgRE9NU3RvcmFnZVdyYXBwZXIgaGF2ZSBhIHNoYXJlZCBpbnRlcmZhY2UgdGhpcyBtZXRob2QgYW5ub3RhdGlvbiBzaG91bGQgY2hhbmdlXG4gKiB0byByZWZsZWN0IHRoaXMgdHlwZVxuICpcbiAqIEBwYXJhbSBkb21TdG9yYWdlTmFtZSAtIE5hbWUgb2YgdGhlIHVuZGVybHlpbmcgc3RvcmFnZSBvYmplY3RcbiAqICAgKGUuZy4gJ2xvY2FsU3RvcmFnZScgb3IgJ3Nlc3Npb25TdG9yYWdlJykuXG4gKiBAcmV0dXJucyBUdXJuaW5nIG9mZiB0eXBlIGluZm9ybWF0aW9uIHVudGlsIGEgY29tbW9uIGludGVyZmFjZSBpcyBkZWZpbmVkLlxuICovXG5jb25zdCBjcmVhdGVTdG9yYWdlZm9yID0gZnVuY3Rpb24gKGRvbVN0b3JhZ2VOYW1lKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gTk9URToganVzdCBhY2Nlc3NpbmcgXCJsb2NhbFN0b3JhZ2VcIiBvciBcIndpbmRvd1snbG9jYWxTdG9yYWdlJ11cIiBtYXkgdGhyb3cgYSBzZWN1cml0eSBleGNlcHRpb24sXG4gICAgICAgIC8vIHNvIGl0IG11c3QgYmUgaW5zaWRlIHRoZSB0cnkvY2F0Y2guXG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgICAgdHlwZW9mIHdpbmRvd1tkb21TdG9yYWdlTmFtZV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAvLyBOZWVkIHRvIHRlc3QgY2FjaGUuIEp1c3QgYmVjYXVzZSBpdCdzIGhlcmUgZG9lc24ndCBtZWFuIGl0IHdvcmtzXG4gICAgICAgICAgICBjb25zdCBkb21TdG9yYWdlID0gd2luZG93W2RvbVN0b3JhZ2VOYW1lXTtcbiAgICAgICAgICAgIGRvbVN0b3JhZ2Uuc2V0SXRlbSgnZmlyZWJhc2U6c2VudGluZWwnLCAnY2FjaGUnKTtcbiAgICAgICAgICAgIGRvbVN0b3JhZ2UucmVtb3ZlSXRlbSgnZmlyZWJhc2U6c2VudGluZWwnKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRE9NU3RvcmFnZVdyYXBwZXIoZG9tU3RvcmFnZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2ggKGUpIHsgfVxuICAgIC8vIEZhaWxlZCB0byBjcmVhdGUgd3JhcHBlci4gIEp1c3QgcmV0dXJuIGluLW1lbW9yeSBzdG9yYWdlLlxuICAgIC8vIFRPRE86IGxvZz9cbiAgICByZXR1cm4gbmV3IE1lbW9yeVN0b3JhZ2UoKTtcbn07XG4vKiogQSBzdG9yYWdlIG9iamVjdCB0aGF0IGxhc3RzIGFjcm9zcyBzZXNzaW9ucyAqL1xuY29uc3QgUGVyc2lzdGVudFN0b3JhZ2UgPSBjcmVhdGVTdG9yYWdlZm9yKCdsb2NhbFN0b3JhZ2UnKTtcbi8qKiBBIHN0b3JhZ2Ugb2JqZWN0IHRoYXQgb25seSBsYXN0cyBvbmUgc2Vzc2lvbiAqL1xuY29uc3QgU2Vzc2lvblN0b3JhZ2UgPSBjcmVhdGVTdG9yYWdlZm9yKCdzZXNzaW9uU3RvcmFnZScpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgbG9nQ2xpZW50ID0gbmV3IExvZ2dlcignQGZpcmViYXNlL2RhdGFiYXNlJyk7XG4vKipcbiAqIFJldHVybnMgYSBsb2NhbGx5LXVuaXF1ZSBJRCAoZ2VuZXJhdGVkIGJ5IGp1c3QgaW5jcmVtZW50aW5nIHVwIGZyb20gMCBlYWNoIHRpbWUgaXRzIGNhbGxlZCkuXG4gKi9cbmNvbnN0IExVSURHZW5lcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGxldCBpZCA9IDE7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGlkKys7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIFNoYTEgaGFzaCBvZiB0aGUgaW5wdXQgc3RyaW5nXG4gKiBAcGFyYW0gc3RyIC0gVGhlIHN0cmluZyB0byBoYXNoXG4gKiBAcmV0dXJucyB7IXN0cmluZ30gVGhlIHJlc3VsdGluZyBoYXNoXG4gKi9cbmNvbnN0IHNoYTEgPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgY29uc3QgdXRmOEJ5dGVzID0gc3RyaW5nVG9CeXRlQXJyYXkoc3RyKTtcbiAgICBjb25zdCBzaGExID0gbmV3IFNoYTEoKTtcbiAgICBzaGExLnVwZGF0ZSh1dGY4Qnl0ZXMpO1xuICAgIGNvbnN0IHNoYTFCeXRlcyA9IHNoYTEuZGlnZXN0KCk7XG4gICAgcmV0dXJuIGJhc2U2NC5lbmNvZGVCeXRlQXJyYXkoc2hhMUJ5dGVzKTtcbn07XG5jb25zdCBidWlsZExvZ01lc3NhZ2VfID0gZnVuY3Rpb24gKC4uLnZhckFyZ3MpIHtcbiAgICBsZXQgbWVzc2FnZSA9ICcnO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFyQXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBhcmcgPSB2YXJBcmdzW2ldO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcmcpIHx8XG4gICAgICAgICAgICAoYXJnICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgIHR5cGVvZiBhcmcubGVuZ3RoID09PSAnbnVtYmVyJykpIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgKz0gYnVpbGRMb2dNZXNzYWdlXy5hcHBseShudWxsLCBhcmcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBhcmcgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBtZXNzYWdlICs9IHN0cmluZ2lmeShhcmcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbWVzc2FnZSArPSBhcmc7XG4gICAgICAgIH1cbiAgICAgICAgbWVzc2FnZSArPSAnICc7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xufTtcbi8qKlxuICogVXNlIHRoaXMgZm9yIGFsbCBkZWJ1ZyBtZXNzYWdlcyBpbiBGaXJlYmFzZS5cbiAqL1xubGV0IGxvZ2dlciA9IG51bGw7XG4vKipcbiAqIEZsYWcgdG8gY2hlY2sgZm9yIGxvZyBhdmFpbGFiaWxpdHkgb24gZmlyc3QgbG9nIG1lc3NhZ2VcbiAqL1xubGV0IGZpcnN0TG9nXyA9IHRydWU7XG4vKipcbiAqIFRoZSBpbXBsZW1lbnRhdGlvbiBvZiBGaXJlYmFzZS5lbmFibGVMb2dnaW5nIChkZWZpbmVkIGhlcmUgdG8gYnJlYWsgZGVwZW5kZW5jaWVzKVxuICogQHBhcmFtIGxvZ2dlcl8gLSBBIGZsYWcgdG8gdHVybiBvbiBsb2dnaW5nLCBvciBhIGN1c3RvbSBsb2dnZXJcbiAqIEBwYXJhbSBwZXJzaXN0ZW50IC0gV2hldGhlciBvciBub3QgdG8gcGVyc2lzdCBsb2dnaW5nIHNldHRpbmdzIGFjcm9zcyByZWZyZXNoZXNcbiAqL1xuY29uc3QgZW5hYmxlTG9nZ2luZyQxID0gZnVuY3Rpb24gKGxvZ2dlcl8sIHBlcnNpc3RlbnQpIHtcbiAgICBhc3NlcnQoIXBlcnNpc3RlbnQgfHwgbG9nZ2VyXyA9PT0gdHJ1ZSB8fCBsb2dnZXJfID09PSBmYWxzZSwgXCJDYW4ndCB0dXJuIG9uIGN1c3RvbSBsb2dnZXJzIHBlcnNpc3RlbnRseS5cIik7XG4gICAgaWYgKGxvZ2dlcl8gPT09IHRydWUpIHtcbiAgICAgICAgbG9nQ2xpZW50LmxvZ0xldmVsID0gTG9nTGV2ZWwuVkVSQk9TRTtcbiAgICAgICAgbG9nZ2VyID0gbG9nQ2xpZW50LmxvZy5iaW5kKGxvZ0NsaWVudCk7XG4gICAgICAgIGlmIChwZXJzaXN0ZW50KSB7XG4gICAgICAgICAgICBTZXNzaW9uU3RvcmFnZS5zZXQoJ2xvZ2dpbmdfZW5hYmxlZCcsIHRydWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBsb2dnZXJfID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGxvZ2dlciA9IGxvZ2dlcl87XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBsb2dnZXIgPSBudWxsO1xuICAgICAgICBTZXNzaW9uU3RvcmFnZS5yZW1vdmUoJ2xvZ2dpbmdfZW5hYmxlZCcpO1xuICAgIH1cbn07XG5jb25zdCBsb2cgPSBmdW5jdGlvbiAoLi4udmFyQXJncykge1xuICAgIGlmIChmaXJzdExvZ18gPT09IHRydWUpIHtcbiAgICAgICAgZmlyc3RMb2dfID0gZmFsc2U7XG4gICAgICAgIGlmIChsb2dnZXIgPT09IG51bGwgJiYgU2Vzc2lvblN0b3JhZ2UuZ2V0KCdsb2dnaW5nX2VuYWJsZWQnKSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgZW5hYmxlTG9nZ2luZyQxKHRydWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChsb2dnZXIpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGJ1aWxkTG9nTWVzc2FnZV8uYXBwbHkobnVsbCwgdmFyQXJncyk7XG4gICAgICAgIGxvZ2dlcihtZXNzYWdlKTtcbiAgICB9XG59O1xuY29uc3QgbG9nV3JhcHBlciA9IGZ1bmN0aW9uIChwcmVmaXgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKC4uLnZhckFyZ3MpIHtcbiAgICAgICAgbG9nKHByZWZpeCwgLi4udmFyQXJncyk7XG4gICAgfTtcbn07XG5jb25zdCBlcnJvciA9IGZ1bmN0aW9uICguLi52YXJBcmdzKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9ICdGSVJFQkFTRSBJTlRFUk5BTCBFUlJPUjogJyArIGJ1aWxkTG9nTWVzc2FnZV8oLi4udmFyQXJncyk7XG4gICAgbG9nQ2xpZW50LmVycm9yKG1lc3NhZ2UpO1xufTtcbmNvbnN0IGZhdGFsID0gZnVuY3Rpb24gKC4uLnZhckFyZ3MpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gYEZJUkVCQVNFIEZBVEFMIEVSUk9SOiAke2J1aWxkTG9nTWVzc2FnZV8oLi4udmFyQXJncyl9YDtcbiAgICBsb2dDbGllbnQuZXJyb3IobWVzc2FnZSk7XG4gICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xufTtcbmNvbnN0IHdhcm4gPSBmdW5jdGlvbiAoLi4udmFyQXJncykge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSAnRklSRUJBU0UgV0FSTklORzogJyArIGJ1aWxkTG9nTWVzc2FnZV8oLi4udmFyQXJncyk7XG4gICAgbG9nQ2xpZW50Lndhcm4obWVzc2FnZSk7XG59O1xuLyoqXG4gKiBMb2dzIGEgd2FybmluZyBpZiB0aGUgY29udGFpbmluZyBwYWdlIHVzZXMgaHR0cHMuIENhbGxlZCB3aGVuIGEgY2FsbCB0byBuZXcgRmlyZWJhc2VcbiAqIGRvZXMgbm90IHVzZSBodHRwcy5cbiAqL1xuY29uc3Qgd2FybklmUGFnZUlzU2VjdXJlID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIEJlIHZlcnkgY2FyZWZ1bCBhY2Nlc3NpbmcgYnJvd3NlciBnbG9iYWxzLiBXaG8ga25vd3Mgd2hhdCBtYXkgb3IgbWF5IG5vdCBleGlzdC5cbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgd2luZG93LmxvY2F0aW9uICYmXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCAmJlxuICAgICAgICB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wuaW5kZXhPZignaHR0cHM6JykgIT09IC0xKSB7XG4gICAgICAgIHdhcm4oJ0luc2VjdXJlIEZpcmViYXNlIGFjY2VzcyBmcm9tIGEgc2VjdXJlIHBhZ2UuICcgK1xuICAgICAgICAgICAgJ1BsZWFzZSB1c2UgaHR0cHMgaW4gY2FsbHMgdG8gbmV3IEZpcmViYXNlKCkuJyk7XG4gICAgfVxufTtcbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIGRhdGEgaXMgTmFOLCBvciArLy0gSW5maW5pdHkuXG4gKi9cbmNvbnN0IGlzSW52YWxpZEpTT05OdW1iZXIgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgIHJldHVybiAodHlwZW9mIGRhdGEgPT09ICdudW1iZXInICYmXG4gICAgICAgIChkYXRhICE9PSBkYXRhIHx8IC8vIE5hTlxuICAgICAgICAgICAgZGF0YSA9PT0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIHx8XG4gICAgICAgICAgICBkYXRhID09PSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkpKTtcbn07XG5jb25zdCBleGVjdXRlV2hlbkRPTVJlYWR5ID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgaWYgKGlzTm9kZVNkaygpIHx8IGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScpIHtcbiAgICAgICAgZm4oKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIE1vZGVsZWQgYWZ0ZXIgalF1ZXJ5LiBUcnkgRE9NQ29udGVudExvYWRlZCBhbmQgb25yZWFkeXN0YXRlY2hhbmdlICh3aGljaFxuICAgICAgICAvLyBmaXJlIGJlZm9yZSBvbmxvYWQpLCBidXQgZmFsbCBiYWNrIHRvIG9ubG9hZC5cbiAgICAgICAgbGV0IGNhbGxlZCA9IGZhbHNlO1xuICAgICAgICBjb25zdCB3cmFwcGVkRm4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIWRvY3VtZW50LmJvZHkpIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHdyYXBwZWRGbiwgTWF0aC5mbG9vcigxMCkpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghY2FsbGVkKSB7XG4gICAgICAgICAgICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBmbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpZiAoZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIHdyYXBwZWRGbiwgZmFsc2UpO1xuICAgICAgICAgICAgLy8gZmFsbGJhY2sgdG8gb25sb2FkLlxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCB3cmFwcGVkRm4sIGZhbHNlKTtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZG9jdW1lbnQuYXR0YWNoRXZlbnQpIHtcbiAgICAgICAgICAgIC8vIElFLlxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgIGRvY3VtZW50LmF0dGFjaEV2ZW50KCdvbnJlYWR5c3RhdGVjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgd3JhcHBlZEZuKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBmYWxsYmFjayB0byBvbmxvYWQuXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgd2luZG93LmF0dGFjaEV2ZW50KCdvbmxvYWQnLCB3cmFwcGVkRm4pO1xuICAgICAgICAgICAgLy8galF1ZXJ5IGhhcyBhbiBleHRyYSBoYWNrIGZvciBJRSB0aGF0IHdlIGNvdWxkIGVtcGxveSAoYmFzZWQgb25cbiAgICAgICAgICAgIC8vIGh0dHA6Ly9qYXZhc2NyaXB0Lm53Ym94LmNvbS9JRUNvbnRlbnRMb2FkZWQvKSBCdXQgaXQgbG9va3MgcmVhbGx5IG9sZC5cbiAgICAgICAgICAgIC8vIEknbSBob3Bpbmcgd2UgZG9uJ3QgbmVlZCBpdC5cbiAgICAgICAgfVxuICAgIH1cbn07XG4vKipcbiAqIE1pbmltdW0ga2V5IG5hbWUuIEludmFsaWQgZm9yIGFjdHVhbCBkYXRhLCB1c2VkIGFzIGEgbWFya2VyIHRvIHNvcnQgYmVmb3JlIGFueSB2YWxpZCBuYW1lc1xuICovXG5jb25zdCBNSU5fTkFNRSA9ICdbTUlOX05BTUVdJztcbi8qKlxuICogTWF4aW11bSBrZXkgbmFtZS4gSW52YWxpZCBmb3IgYWN0dWFsIGRhdGEsIHVzZWQgYXMgYSBtYXJrZXIgdG8gc29ydCBhYm92ZSBhbnkgdmFsaWQgbmFtZXNcbiAqL1xuY29uc3QgTUFYX05BTUUgPSAnW01BWF9OQU1FXSc7XG4vKipcbiAqIENvbXBhcmVzIHZhbGlkIEZpcmViYXNlIGtleSBuYW1lcywgcGx1cyBtaW4gYW5kIG1heCBuYW1lXG4gKi9cbmNvbnN0IG5hbWVDb21wYXJlID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICBpZiAoYSA9PT0gYikge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgZWxzZSBpZiAoYSA9PT0gTUlOX05BTUUgfHwgYiA9PT0gTUFYX05BTUUpIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICBlbHNlIGlmIChiID09PSBNSU5fTkFNRSB8fCBhID09PSBNQVhfTkFNRSkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IGFBc0ludCA9IHRyeVBhcnNlSW50KGEpLCBiQXNJbnQgPSB0cnlQYXJzZUludChiKTtcbiAgICAgICAgaWYgKGFBc0ludCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGJBc0ludCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhQXNJbnQgLSBiQXNJbnQgPT09IDAgPyBhLmxlbmd0aCAtIGIubGVuZ3RoIDogYUFzSW50IC0gYkFzSW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGJBc0ludCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gYSA8IGIgPyAtMSA6IDE7XG4gICAgICAgIH1cbiAgICB9XG59O1xuLyoqXG4gKiBAcmV0dXJucyB7IW51bWJlcn0gY29tcGFyaXNvbiByZXN1bHQuXG4gKi9cbmNvbnN0IHN0cmluZ0NvbXBhcmUgPSBmdW5jdGlvbiAoYSwgYikge1xuICAgIGlmIChhID09PSBiKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBlbHNlIGlmIChhIDwgYikge1xuICAgICAgICByZXR1cm4gLTE7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gMTtcbiAgICB9XG59O1xuY29uc3QgcmVxdWlyZUtleSA9IGZ1bmN0aW9uIChrZXksIG9iaikge1xuICAgIGlmIChvYmogJiYga2V5IGluIG9iaikge1xuICAgICAgICByZXR1cm4gb2JqW2tleV07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQga2V5ICgnICsga2V5ICsgJykgaW4gb2JqZWN0OiAnICsgc3RyaW5naWZ5KG9iaikpO1xuICAgIH1cbn07XG5jb25zdCBPYmplY3RUb1VuaXF1ZUtleSA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcgfHwgb2JqID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBzdHJpbmdpZnkob2JqKTtcbiAgICB9XG4gICAgY29uc3Qga2V5cyA9IFtdO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBndWFyZC1mb3ItaW5cbiAgICBmb3IgKGNvbnN0IGsgaW4gb2JqKSB7XG4gICAgICAgIGtleXMucHVzaChrKTtcbiAgICB9XG4gICAgLy8gRXhwb3J0IGFzIGpzb24sIGJ1dCB3aXRoIHRoZSBrZXlzIHNvcnRlZC5cbiAgICBrZXlzLnNvcnQoKTtcbiAgICBsZXQga2V5ID0gJ3snO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoaSAhPT0gMCkge1xuICAgICAgICAgICAga2V5ICs9ICcsJztcbiAgICAgICAgfVxuICAgICAgICBrZXkgKz0gc3RyaW5naWZ5KGtleXNbaV0pO1xuICAgICAgICBrZXkgKz0gJzonO1xuICAgICAgICBrZXkgKz0gT2JqZWN0VG9VbmlxdWVLZXkob2JqW2tleXNbaV1dKTtcbiAgICB9XG4gICAga2V5ICs9ICd9JztcbiAgICByZXR1cm4ga2V5O1xufTtcbi8qKlxuICogU3BsaXRzIGEgc3RyaW5nIGludG8gYSBudW1iZXIgb2Ygc21hbGxlciBzZWdtZW50cyBvZiBtYXhpbXVtIHNpemVcbiAqIEBwYXJhbSBzdHIgLSBUaGUgc3RyaW5nXG4gKiBAcGFyYW0gc2Vnc2l6ZSAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiBjaGFycyBpbiB0aGUgc3RyaW5nLlxuICogQHJldHVybnMgVGhlIHN0cmluZywgc3BsaXQgaW50byBhcHByb3ByaWF0ZWx5LXNpemVkIGNodW5rc1xuICovXG5jb25zdCBzcGxpdFN0cmluZ0J5U2l6ZSA9IGZ1bmN0aW9uIChzdHIsIHNlZ3NpemUpIHtcbiAgICBjb25zdCBsZW4gPSBzdHIubGVuZ3RoO1xuICAgIGlmIChsZW4gPD0gc2Vnc2l6ZSkge1xuICAgICAgICByZXR1cm4gW3N0cl07XG4gICAgfVxuICAgIGNvbnN0IGRhdGFTZWdzID0gW107XG4gICAgZm9yIChsZXQgYyA9IDA7IGMgPCBsZW47IGMgKz0gc2Vnc2l6ZSkge1xuICAgICAgICBpZiAoYyArIHNlZ3NpemUgPiBsZW4pIHtcbiAgICAgICAgICAgIGRhdGFTZWdzLnB1c2goc3RyLnN1YnN0cmluZyhjLCBsZW4pKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRhdGFTZWdzLnB1c2goc3RyLnN1YnN0cmluZyhjLCBjICsgc2Vnc2l6ZSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkYXRhU2Vncztcbn07XG4vKipcbiAqIEFwcGx5IGEgZnVuY3Rpb24gdG8gZWFjaCAoa2V5LCB2YWx1ZSkgcGFpciBpbiBhbiBvYmplY3Qgb3JcbiAqIGFwcGx5IGEgZnVuY3Rpb24gdG8gZWFjaCAoaW5kZXgsIHZhbHVlKSBwYWlyIGluIGFuIGFycmF5XG4gKiBAcGFyYW0gb2JqIC0gVGhlIG9iamVjdCBvciBhcnJheSB0byBpdGVyYXRlIG92ZXJcbiAqIEBwYXJhbSBmbiAtIFRoZSBmdW5jdGlvbiB0byBhcHBseVxuICovXG5mdW5jdGlvbiBlYWNoKG9iaiwgZm4pIHtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcbiAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICBmbihrZXksIG9ialtrZXldKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogQm9ycm93ZWQgZnJvbSBodHRwOi8vaGcuc2Vjb25kbGlmZS5jb20vbGxzZC9zcmMvdGlwL2pzL3R5cGVkYXJyYXkuanMgKE1JVCBMaWNlbnNlKVxuICogSSBtYWRlIG9uZSBtb2RpZmljYXRpb24gYXQgdGhlIGVuZCBhbmQgcmVtb3ZlZCB0aGUgTmFOIC8gSW5maW5pdHlcbiAqIGhhbmRsaW5nIChzaW5jZSBpdCBzZWVtZWQgYnJva2VuIFtjYXVzZWQgYW4gb3ZlcmZsb3ddIGFuZCB3ZSBkb24ndCBuZWVkIGl0KS4gIFNlZSBNSkwgY29tbWVudHMuXG4gKiBAcGFyYW0gdiAtIEEgZG91YmxlXG4gKlxuICovXG5jb25zdCBkb3VibGVUb0lFRUU3NTRTdHJpbmcgPSBmdW5jdGlvbiAodikge1xuICAgIGFzc2VydCghaXNJbnZhbGlkSlNPTk51bWJlcih2KSwgJ0ludmFsaWQgSlNPTiBudW1iZXInKTsgLy8gTUpMXG4gICAgY29uc3QgZWJpdHMgPSAxMSwgZmJpdHMgPSA1MjtcbiAgICBjb25zdCBiaWFzID0gKDEgPDwgKGViaXRzIC0gMSkpIC0gMTtcbiAgICBsZXQgcywgZSwgZiwgbG4sIGk7XG4gICAgLy8gQ29tcHV0ZSBzaWduLCBleHBvbmVudCwgZnJhY3Rpb25cbiAgICAvLyBTa2lwIE5hTiAvIEluZmluaXR5IGhhbmRsaW5nIC0tTUpMLlxuICAgIGlmICh2ID09PSAwKSB7XG4gICAgICAgIGUgPSAwO1xuICAgICAgICBmID0gMDtcbiAgICAgICAgcyA9IDEgLyB2ID09PSAtSW5maW5pdHkgPyAxIDogMDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHMgPSB2IDwgMDtcbiAgICAgICAgdiA9IE1hdGguYWJzKHYpO1xuICAgICAgICBpZiAodiA+PSBNYXRoLnBvdygyLCAxIC0gYmlhcykpIHtcbiAgICAgICAgICAgIC8vIE5vcm1hbGl6ZWRcbiAgICAgICAgICAgIGxuID0gTWF0aC5taW4oTWF0aC5mbG9vcihNYXRoLmxvZyh2KSAvIE1hdGguTE4yKSwgYmlhcyk7XG4gICAgICAgICAgICBlID0gbG4gKyBiaWFzO1xuICAgICAgICAgICAgZiA9IE1hdGgucm91bmQodiAqIE1hdGgucG93KDIsIGZiaXRzIC0gbG4pIC0gTWF0aC5wb3coMiwgZmJpdHMpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIERlbm9ybWFsaXplZFxuICAgICAgICAgICAgZSA9IDA7XG4gICAgICAgICAgICBmID0gTWF0aC5yb3VuZCh2IC8gTWF0aC5wb3coMiwgMSAtIGJpYXMgLSBmYml0cykpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFBhY2sgc2lnbiwgZXhwb25lbnQsIGZyYWN0aW9uXG4gICAgY29uc3QgYml0cyA9IFtdO1xuICAgIGZvciAoaSA9IGZiaXRzOyBpOyBpIC09IDEpIHtcbiAgICAgICAgYml0cy5wdXNoKGYgJSAyID8gMSA6IDApO1xuICAgICAgICBmID0gTWF0aC5mbG9vcihmIC8gMik7XG4gICAgfVxuICAgIGZvciAoaSA9IGViaXRzOyBpOyBpIC09IDEpIHtcbiAgICAgICAgYml0cy5wdXNoKGUgJSAyID8gMSA6IDApO1xuICAgICAgICBlID0gTWF0aC5mbG9vcihlIC8gMik7XG4gICAgfVxuICAgIGJpdHMucHVzaChzID8gMSA6IDApO1xuICAgIGJpdHMucmV2ZXJzZSgpO1xuICAgIGNvbnN0IHN0ciA9IGJpdHMuam9pbignJyk7XG4gICAgLy8gUmV0dXJuIHRoZSBkYXRhIGFzIGEgaGV4IHN0cmluZy4gLS1NSkxcbiAgICBsZXQgaGV4Qnl0ZVN0cmluZyA9ICcnO1xuICAgIGZvciAoaSA9IDA7IGkgPCA2NDsgaSArPSA4KSB7XG4gICAgICAgIGxldCBoZXhCeXRlID0gcGFyc2VJbnQoc3RyLnN1YnN0cihpLCA4KSwgMikudG9TdHJpbmcoMTYpO1xuICAgICAgICBpZiAoaGV4Qnl0ZS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIGhleEJ5dGUgPSAnMCcgKyBoZXhCeXRlO1xuICAgICAgICB9XG4gICAgICAgIGhleEJ5dGVTdHJpbmcgPSBoZXhCeXRlU3RyaW5nICsgaGV4Qnl0ZTtcbiAgICB9XG4gICAgcmV0dXJuIGhleEJ5dGVTdHJpbmcudG9Mb3dlckNhc2UoKTtcbn07XG4vKipcbiAqIFVzZWQgdG8gZGV0ZWN0IGlmIHdlJ3JlIGluIGEgQ2hyb21lIGNvbnRlbnQgc2NyaXB0ICh3aGljaCBleGVjdXRlcyBpbiBhblxuICogaXNvbGF0ZWQgZW52aXJvbm1lbnQgd2hlcmUgbG9uZy1wb2xsaW5nIGRvZXNuJ3Qgd29yaykuXG4gKi9cbmNvbnN0IGlzQ2hyb21lRXh0ZW5zaW9uQ29udGVudFNjcmlwdCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gISEodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgd2luZG93WydjaHJvbWUnXSAmJlxuICAgICAgICB3aW5kb3dbJ2Nocm9tZSddWydleHRlbnNpb24nXSAmJlxuICAgICAgICAhL15jaHJvbWUvLnRlc3Qod2luZG93LmxvY2F0aW9uLmhyZWYpKTtcbn07XG4vKipcbiAqIFVzZWQgdG8gZGV0ZWN0IGlmIHdlJ3JlIGluIGEgV2luZG93cyA4IFN0b3JlIGFwcC5cbiAqL1xuY29uc3QgaXNXaW5kb3dzU3RvcmVBcHAgPSBmdW5jdGlvbiAoKSB7XG4gICAgLy8gQ2hlY2sgZm9yIHRoZSBwcmVzZW5jZSBvZiBhIGNvdXBsZSBXaW5SVCBnbG9iYWxzXG4gICAgcmV0dXJuIHR5cGVvZiBXaW5kb3dzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgV2luZG93cy5VSSA9PT0gJ29iamVjdCc7XG59O1xuLyoqXG4gKiBDb252ZXJ0cyBhIHNlcnZlciBlcnJvciBjb2RlIHRvIGEgSmF2YVNjcmlwdCBFcnJvclxuICovXG5mdW5jdGlvbiBlcnJvckZvclNlcnZlckNvZGUoY29kZSwgcXVlcnkpIHtcbiAgICBsZXQgcmVhc29uID0gJ1Vua25vd24gRXJyb3InO1xuICAgIGlmIChjb2RlID09PSAndG9vX2JpZycpIHtcbiAgICAgICAgcmVhc29uID1cbiAgICAgICAgICAgICdUaGUgZGF0YSByZXF1ZXN0ZWQgZXhjZWVkcyB0aGUgbWF4aW11bSBzaXplICcgK1xuICAgICAgICAgICAgICAgICd0aGF0IGNhbiBiZSBhY2Nlc3NlZCB3aXRoIGEgc2luZ2xlIHJlcXVlc3QuJztcbiAgICB9XG4gICAgZWxzZSBpZiAoY29kZSA9PT0gJ3Blcm1pc3Npb25fZGVuaWVkJykge1xuICAgICAgICByZWFzb24gPSBcIkNsaWVudCBkb2Vzbid0IGhhdmUgcGVybWlzc2lvbiB0byBhY2Nlc3MgdGhlIGRlc2lyZWQgZGF0YS5cIjtcbiAgICB9XG4gICAgZWxzZSBpZiAoY29kZSA9PT0gJ3VuYXZhaWxhYmxlJykge1xuICAgICAgICByZWFzb24gPSAnVGhlIHNlcnZpY2UgaXMgdW5hdmFpbGFibGUnO1xuICAgIH1cbiAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihjb2RlICsgJyBhdCAnICsgcXVlcnkuX3BhdGgudG9TdHJpbmcoKSArICc6ICcgKyByZWFzb24pO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgZXJyb3IuY29kZSA9IGNvZGUudG9VcHBlckNhc2UoKTtcbiAgICByZXR1cm4gZXJyb3I7XG59XG4vKipcbiAqIFVzZWQgdG8gdGVzdCBmb3IgaW50ZWdlci1sb29raW5nIHN0cmluZ3NcbiAqL1xuY29uc3QgSU5URUdFUl9SRUdFWFBfID0gbmV3IFJlZ0V4cCgnXi0/KDAqKVxcXFxkezEsMTB9JCcpO1xuLyoqXG4gKiBGb3IgdXNlIGluIGtleXMsIHRoZSBtaW5pbXVtIHBvc3NpYmxlIDMyLWJpdCBpbnRlZ2VyLlxuICovXG5jb25zdCBJTlRFR0VSXzMyX01JTiA9IC0yMTQ3NDgzNjQ4O1xuLyoqXG4gKiBGb3IgdXNlIGluIGtleXMsIHRoZSBtYXhpbXVtIHBvc3NpYmxlIDMyLWJpdCBpbnRlZ2VyLlxuICovXG5jb25zdCBJTlRFR0VSXzMyX01BWCA9IDIxNDc0ODM2NDc7XG4vKipcbiAqIElmIHRoZSBzdHJpbmcgY29udGFpbnMgYSAzMi1iaXQgaW50ZWdlciwgcmV0dXJuIGl0LiAgRWxzZSByZXR1cm4gbnVsbC5cbiAqL1xuY29uc3QgdHJ5UGFyc2VJbnQgPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgaWYgKElOVEVHRVJfUkVHRVhQXy50ZXN0KHN0cikpIHtcbiAgICAgICAgY29uc3QgaW50VmFsID0gTnVtYmVyKHN0cik7XG4gICAgICAgIGlmIChpbnRWYWwgPj0gSU5URUdFUl8zMl9NSU4gJiYgaW50VmFsIDw9IElOVEVHRVJfMzJfTUFYKSB7XG4gICAgICAgICAgICByZXR1cm4gaW50VmFsO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufTtcbi8qKlxuICogSGVscGVyIHRvIHJ1biBzb21lIGNvZGUgYnV0IGNhdGNoIGFueSBleGNlcHRpb25zIGFuZCByZS10aHJvdyB0aGVtIGxhdGVyLlxuICogVXNlZnVsIGZvciBwcmV2ZW50aW5nIHVzZXIgY2FsbGJhY2tzIGZyb20gYnJlYWtpbmcgaW50ZXJuYWwgY29kZS5cbiAqXG4gKiBSZS10aHJvd2luZyB0aGUgZXhjZXB0aW9uIGZyb20gYSBzZXRUaW1lb3V0IGlzIGEgbGl0dGxlIGV2aWwsIGJ1dCBpdCdzIHZlcnlcbiAqIGNvbnZlbmllbnQgKHdlIGRvbid0IGhhdmUgdG8gdHJ5IHRvIGZpZ3VyZSBvdXQgd2hlbiBpcyBhIHNhZmUgcG9pbnQgdG9cbiAqIHJlLXRocm93IGl0KSwgYW5kIHRoZSBiZWhhdmlvciBzZWVtcyByZWFzb25hYmxlOlxuICpcbiAqICogSWYgeW91IGFyZW4ndCBwYXVzaW5nIG9uIGV4Y2VwdGlvbnMsIHlvdSBnZXQgYW4gZXJyb3IgaW4gdGhlIGNvbnNvbGUgd2l0aFxuICogICB0aGUgY29ycmVjdCBzdGFjayB0cmFjZS5cbiAqICogSWYgeW91J3JlIHBhdXNpbmcgb24gYWxsIGV4Y2VwdGlvbnMsIHRoZSBkZWJ1Z2dlciB3aWxsIHBhdXNlIG9uIHlvdXJcbiAqICAgZXhjZXB0aW9uIGFuZCB0aGVuIGFnYWluIHdoZW4gd2UgcmV0aHJvdyBpdC5cbiAqICogSWYgeW91J3JlIG9ubHkgcGF1c2luZyBvbiB1bmNhdWdodCBleGNlcHRpb25zLCB0aGUgZGVidWdnZXIgd2lsbCBvbmx5IHBhdXNlXG4gKiAgIG9uIHVzIHJlLXRocm93aW5nIGl0LlxuICpcbiAqIEBwYXJhbSBmbiAtIFRoZSBjb2RlIHRvIGd1YXJkLlxuICovXG5jb25zdCBleGNlcHRpb25HdWFyZCA9IGZ1bmN0aW9uIChmbikge1xuICAgIHRyeSB7XG4gICAgICAgIGZuKCk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIC8vIFJlLXRocm93IGV4Y2VwdGlvbiB3aGVuIGl0J3Mgc2FmZS5cbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBJdCB1c2VkIHRvIGJlIHRoYXQgXCJ0aHJvdyBlXCIgd291bGQgcmVzdWx0IGluIGEgZ29vZCBjb25zb2xlIGVycm9yIHdpdGhcbiAgICAgICAgICAgIC8vIHJlbGV2YW50IGNvbnRleHQsIGJ1dCBhcyBvZiBDaHJvbWUgMzksIHlvdSBqdXN0IGdldCB0aGUgZmlyZWJhc2UuanNcbiAgICAgICAgICAgIC8vIGZpbGUvbGluZSBudW1iZXIgd2hlcmUgd2UgcmUtdGhyb3cgaXQsIHdoaWNoIGlzIHVzZWxlc3MuIFNvIHdlIGxvZ1xuICAgICAgICAgICAgLy8gZS5zdGFjayBleHBsaWNpdGx5LlxuICAgICAgICAgICAgY29uc3Qgc3RhY2sgPSBlLnN0YWNrIHx8ICcnO1xuICAgICAgICAgICAgd2FybignRXhjZXB0aW9uIHdhcyB0aHJvd24gYnkgdXNlciBjYWxsYmFjay4nLCBzdGFjayk7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9LCBNYXRoLmZsb29yKDApKTtcbiAgICB9XG59O1xuLyoqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiB3ZSB0aGluayB3ZSdyZSBjdXJyZW50bHkgYmVpbmcgY3Jhd2xlZC5cbiAqL1xuY29uc3QgYmVpbmdDcmF3bGVkID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IHVzZXJBZ2VudCA9ICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyAmJlxuICAgICAgICB3aW5kb3dbJ25hdmlnYXRvciddICYmXG4gICAgICAgIHdpbmRvd1snbmF2aWdhdG9yJ11bJ3VzZXJBZ2VudCddKSB8fFxuICAgICAgICAnJztcbiAgICAvLyBGb3Igbm93IHdlIHdoaXRlbGlzdCB0aGUgbW9zdCBwb3B1bGFyIGNyYXdsZXJzLiAgV2Ugc2hvdWxkIHJlZmluZSB0aGlzIHRvIGJlIHRoZSBzZXQgb2YgY3Jhd2xlcnMgd2VcbiAgICAvLyBiZWxpZXZlIHRvIHN1cHBvcnQgSmF2YVNjcmlwdC9BSkFYIHJlbmRlcmluZy5cbiAgICAvLyBOT1RFOiBHb29nbGUgV2VibWFzdGVyIFRvb2xzIGRvZXNuJ3QgcmVhbGx5IGJlbG9uZywgYnV0IHRoZWlyIFwiVGhpcyBpcyBob3cgYSB2aXNpdG9yIHRvIHlvdXIgd2Vic2l0ZVxuICAgIC8vIHdvdWxkIGhhdmUgc2VlbiB0aGUgcGFnZVwiIGlzIGZsYWt5IGlmIHdlIGRvbid0IHRyZWF0IGl0IGFzIGEgY3Jhd2xlci5cbiAgICByZXR1cm4gKHVzZXJBZ2VudC5zZWFyY2goL2dvb2dsZWJvdHxnb29nbGUgd2VibWFzdGVyIHRvb2xzfGJpbmdib3R8eWFob28hIHNsdXJwfGJhaWR1c3BpZGVyfHlhbmRleGJvdHxkdWNrZHVja2JvdC9pKSA+PSAwKTtcbn07XG4vKipcbiAqIFNhbWUgYXMgc2V0VGltZW91dCgpIGV4Y2VwdCBvbiBOb2RlLkpTIGl0IHdpbGwgL25vdC8gcHJldmVudCB0aGUgcHJvY2VzcyBmcm9tIGV4aXRpbmcuXG4gKlxuICogSXQgaXMgcmVtb3ZlZCB3aXRoIGNsZWFyVGltZW91dCgpIGFzIG5vcm1hbC5cbiAqXG4gKiBAcGFyYW0gZm4gLSBGdW5jdGlvbiB0byBydW4uXG4gKiBAcGFyYW0gdGltZSAtIE1pbGxpc2Vjb25kcyB0byB3YWl0IGJlZm9yZSBydW5uaW5nLlxuICogQHJldHVybnMgVGhlIHNldFRpbWVvdXQoKSByZXR1cm4gdmFsdWUuXG4gKi9cbmNvbnN0IHNldFRpbWVvdXROb25CbG9ja2luZyA9IGZ1bmN0aW9uIChmbiwgdGltZSkge1xuICAgIGNvbnN0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KGZuLCB0aW1lKTtcbiAgICAvLyBOb3RlOiBhdCB0aGUgdGltZSBvZiB0aGlzIGNvbW1lbnQsIHVucmVmVGltZXIgaXMgdW5kZXIgdGhlIHVuc3RhYmxlIHNldCBvZiBBUElzLiBSdW4gd2l0aCAtLXVuc3RhYmxlIHRvIGVuYWJsZSB0aGUgQVBJLlxuICAgIGlmICh0eXBlb2YgdGltZW91dCA9PT0gJ251bWJlcicgJiZcbiAgICAgICAgLy8gQHRzLWlnbm9yZSBJcyBvbmx5IGRlZmluZWQgaW4gRGVubyBlbnZpcm9ubWVudHMuXG4gICAgICAgIHR5cGVvZiBEZW5vICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAvLyBAdHMtaWdub3JlIERlbm8gYW5kIHVucmVmVGltZXIgYXJlIG9ubHkgZGVmaW5lZCBpbiBEZW5vIGVudmlyb25tZW50cy5cbiAgICAgICAgRGVub1sndW5yZWZUaW1lciddKSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmUgRGVubyBhbmQgdW5yZWZUaW1lciBhcmUgb25seSBkZWZpbmVkIGluIERlbm8gZW52aXJvbm1lbnRzLlxuICAgICAgICBEZW5vLnVucmVmVGltZXIodGltZW91dCk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiB0aW1lb3V0ID09PSAnb2JqZWN0JyAmJiB0aW1lb3V0Wyd1bnJlZiddKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHRpbWVvdXRbJ3VucmVmJ10oKTtcbiAgICB9XG4gICAgcmV0dXJuIHRpbWVvdXQ7XG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBYnN0cmFjdGlvbiBhcm91bmQgQXBwQ2hlY2sncyB0b2tlbiBmZXRjaGluZyBjYXBhYmlsaXRpZXMuXG4gKi9cbmNsYXNzIEFwcENoZWNrVG9rZW5Qcm92aWRlciB7XG4gICAgY29uc3RydWN0b3IoYXBwTmFtZV8sIGFwcENoZWNrUHJvdmlkZXIpIHtcbiAgICAgICAgdGhpcy5hcHBOYW1lXyA9IGFwcE5hbWVfO1xuICAgICAgICB0aGlzLmFwcENoZWNrUHJvdmlkZXIgPSBhcHBDaGVja1Byb3ZpZGVyO1xuICAgICAgICB0aGlzLmFwcENoZWNrID0gYXBwQ2hlY2tQcm92aWRlciA9PT0gbnVsbCB8fCBhcHBDaGVja1Byb3ZpZGVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhcHBDaGVja1Byb3ZpZGVyLmdldEltbWVkaWF0ZSh7IG9wdGlvbmFsOiB0cnVlIH0pO1xuICAgICAgICBpZiAoIXRoaXMuYXBwQ2hlY2spIHtcbiAgICAgICAgICAgIGFwcENoZWNrUHJvdmlkZXIgPT09IG51bGwgfHwgYXBwQ2hlY2tQcm92aWRlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogYXBwQ2hlY2tQcm92aWRlci5nZXQoKS50aGVuKGFwcENoZWNrID0+ICh0aGlzLmFwcENoZWNrID0gYXBwQ2hlY2spKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRUb2tlbihmb3JjZVJlZnJlc2gpIHtcbiAgICAgICAgaWYgKCF0aGlzLmFwcENoZWNrKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFN1cHBvcnQgZGVsYXllZCBpbml0aWFsaXphdGlvbiBvZiBGaXJlYmFzZUFwcENoZWNrLiBUaGlzIGFsbG93cyBvdXJcbiAgICAgICAgICAgICAgICAvLyBjdXN0b21lcnMgdG8gaW5pdGlhbGl6ZSB0aGUgUlREQiBTREsgYmVmb3JlIGluaXRpYWxpemluZyBGaXJlYmFzZVxuICAgICAgICAgICAgICAgIC8vIEFwcENoZWNrIGFuZCBlbnN1cmVzIHRoYXQgYWxsIHJlcXVlc3RzIGFyZSBhdXRoZW50aWNhdGVkIGlmIGEgdG9rZW5cbiAgICAgICAgICAgICAgICAvLyBiZWNvbWVzIGF2YWlsYWJsZSBiZWZvcmUgdGhlIHRpbWVvdXQgYmVsb3cgZXhwaXJlcy5cbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYXBwQ2hlY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0VG9rZW4oZm9yY2VSZWZyZXNoKS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKG51bGwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5hcHBDaGVjay5nZXRUb2tlbihmb3JjZVJlZnJlc2gpO1xuICAgIH1cbiAgICBhZGRUb2tlbkNoYW5nZUxpc3RlbmVyKGxpc3RlbmVyKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgKF9hID0gdGhpcy5hcHBDaGVja1Byb3ZpZGVyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZ2V0KCkudGhlbihhcHBDaGVjayA9PiBhcHBDaGVjay5hZGRUb2tlbkxpc3RlbmVyKGxpc3RlbmVyKSk7XG4gICAgfVxuICAgIG5vdGlmeUZvckludmFsaWRUb2tlbigpIHtcbiAgICAgICAgd2FybihgUHJvdmlkZWQgQXBwQ2hlY2sgY3JlZGVudGlhbHMgZm9yIHRoZSBhcHAgbmFtZWQgXCIke3RoaXMuYXBwTmFtZV99XCIgYCArXG4gICAgICAgICAgICAnYXJlIGludmFsaWQuIFRoaXMgdXN1YWxseSBpbmRpY2F0ZXMgeW91ciBhcHAgd2FzIG5vdCBpbml0aWFsaXplZCBjb3JyZWN0bHkuJyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBYnN0cmFjdGlvbiBhcm91bmQgRmlyZWJhc2VBcHAncyB0b2tlbiBmZXRjaGluZyBjYXBhYmlsaXRpZXMuXG4gKi9cbmNsYXNzIEZpcmViYXNlQXV0aFRva2VuUHJvdmlkZXIge1xuICAgIGNvbnN0cnVjdG9yKGFwcE5hbWVfLCBmaXJlYmFzZU9wdGlvbnNfLCBhdXRoUHJvdmlkZXJfKSB7XG4gICAgICAgIHRoaXMuYXBwTmFtZV8gPSBhcHBOYW1lXztcbiAgICAgICAgdGhpcy5maXJlYmFzZU9wdGlvbnNfID0gZmlyZWJhc2VPcHRpb25zXztcbiAgICAgICAgdGhpcy5hdXRoUHJvdmlkZXJfID0gYXV0aFByb3ZpZGVyXztcbiAgICAgICAgdGhpcy5hdXRoXyA9IG51bGw7XG4gICAgICAgIHRoaXMuYXV0aF8gPSBhdXRoUHJvdmlkZXJfLmdldEltbWVkaWF0ZSh7IG9wdGlvbmFsOiB0cnVlIH0pO1xuICAgICAgICBpZiAoIXRoaXMuYXV0aF8pIHtcbiAgICAgICAgICAgIGF1dGhQcm92aWRlcl8ub25Jbml0KGF1dGggPT4gKHRoaXMuYXV0aF8gPSBhdXRoKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0VG9rZW4oZm9yY2VSZWZyZXNoKSB7XG4gICAgICAgIGlmICghdGhpcy5hdXRoXykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBTdXBwb3J0IGRlbGF5ZWQgaW5pdGlhbGl6YXRpb24gb2YgRmlyZWJhc2VBdXRoLiBUaGlzIGFsbG93cyBvdXJcbiAgICAgICAgICAgICAgICAvLyBjdXN0b21lcnMgdG8gaW5pdGlhbGl6ZSB0aGUgUlREQiBTREsgYmVmb3JlIGluaXRpYWxpemluZyBGaXJlYmFzZVxuICAgICAgICAgICAgICAgIC8vIEF1dGggYW5kIGVuc3VyZXMgdGhhdCBhbGwgcmVxdWVzdHMgYXJlIGF1dGhlbnRpY2F0ZWQgaWYgYSB0b2tlblxuICAgICAgICAgICAgICAgIC8vIGJlY29tZXMgYXZhaWxhYmxlIGJlZm9yZSB0aGUgdGltZW91dCBiZWxvdyBleHBpcmVzLlxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hdXRoXykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRUb2tlbihmb3JjZVJlZnJlc2gpLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmF1dGhfLmdldFRva2VuKGZvcmNlUmVmcmVzaCkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgICAgLy8gVE9ETzogTmVlZCB0byBmaWd1cmUgb3V0IGFsbCB0aGUgY2FzZXMgdGhpcyBpcyByYWlzZWQgYW5kIHdoZXRoZXJcbiAgICAgICAgICAgIC8vIHRoaXMgbWFrZXMgc2Vuc2UuXG4gICAgICAgICAgICBpZiAoZXJyb3IgJiYgZXJyb3IuY29kZSA9PT0gJ2F1dGgvdG9rZW4tbm90LWluaXRpYWxpemVkJykge1xuICAgICAgICAgICAgICAgIGxvZygnR290IGF1dGgvdG9rZW4tbm90LWluaXRpYWxpemVkIGVycm9yLiAgVHJlYXRpbmcgYXMgbnVsbCB0b2tlbi4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhZGRUb2tlbkNoYW5nZUxpc3RlbmVyKGxpc3RlbmVyKSB7XG4gICAgICAgIC8vIFRPRE86IFdlIG1pZ2h0IHdhbnQgdG8gd3JhcCB0aGUgbGlzdGVuZXIgYW5kIGNhbGwgaXQgd2l0aCBubyBhcmdzIHRvXG4gICAgICAgIC8vIGF2b2lkIGEgbGVha3kgYWJzdHJhY3Rpb24sIGJ1dCB0aGF0IG1ha2VzIHJlbW92aW5nIHRoZSBsaXN0ZW5lciBoYXJkZXIuXG4gICAgICAgIGlmICh0aGlzLmF1dGhfKSB7XG4gICAgICAgICAgICB0aGlzLmF1dGhfLmFkZEF1dGhUb2tlbkxpc3RlbmVyKGxpc3RlbmVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYXV0aFByb3ZpZGVyX1xuICAgICAgICAgICAgICAgIC5nZXQoKVxuICAgICAgICAgICAgICAgIC50aGVuKGF1dGggPT4gYXV0aC5hZGRBdXRoVG9rZW5MaXN0ZW5lcihsaXN0ZW5lcikpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbW92ZVRva2VuQ2hhbmdlTGlzdGVuZXIobGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5hdXRoUHJvdmlkZXJfXG4gICAgICAgICAgICAuZ2V0KClcbiAgICAgICAgICAgIC50aGVuKGF1dGggPT4gYXV0aC5yZW1vdmVBdXRoVG9rZW5MaXN0ZW5lcihsaXN0ZW5lcikpO1xuICAgIH1cbiAgICBub3RpZnlGb3JJbnZhbGlkVG9rZW4oKSB7XG4gICAgICAgIGxldCBlcnJvck1lc3NhZ2UgPSAnUHJvdmlkZWQgYXV0aGVudGljYXRpb24gY3JlZGVudGlhbHMgZm9yIHRoZSBhcHAgbmFtZWQgXCInICtcbiAgICAgICAgICAgIHRoaXMuYXBwTmFtZV8gK1xuICAgICAgICAgICAgJ1wiIGFyZSBpbnZhbGlkLiBUaGlzIHVzdWFsbHkgaW5kaWNhdGVzIHlvdXIgYXBwIHdhcyBub3QgJyArXG4gICAgICAgICAgICAnaW5pdGlhbGl6ZWQgY29ycmVjdGx5LiAnO1xuICAgICAgICBpZiAoJ2NyZWRlbnRpYWwnIGluIHRoaXMuZmlyZWJhc2VPcHRpb25zXykge1xuICAgICAgICAgICAgZXJyb3JNZXNzYWdlICs9XG4gICAgICAgICAgICAgICAgJ01ha2Ugc3VyZSB0aGUgXCJjcmVkZW50aWFsXCIgcHJvcGVydHkgcHJvdmlkZWQgdG8gaW5pdGlhbGl6ZUFwcCgpICcgK1xuICAgICAgICAgICAgICAgICAgICAnaXMgYXV0aG9yaXplZCB0byBhY2Nlc3MgdGhlIHNwZWNpZmllZCBcImRhdGFiYXNlVVJMXCIgYW5kIGlzIGZyb20gdGhlIGNvcnJlY3QgJyArXG4gICAgICAgICAgICAgICAgICAgICdwcm9qZWN0Lic7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoJ3NlcnZpY2VBY2NvdW50JyBpbiB0aGlzLmZpcmViYXNlT3B0aW9uc18pIHtcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZSArPVxuICAgICAgICAgICAgICAgICdNYWtlIHN1cmUgdGhlIFwic2VydmljZUFjY291bnRcIiBwcm9wZXJ0eSBwcm92aWRlZCB0byBpbml0aWFsaXplQXBwKCkgJyArXG4gICAgICAgICAgICAgICAgICAgICdpcyBhdXRob3JpemVkIHRvIGFjY2VzcyB0aGUgc3BlY2lmaWVkIFwiZGF0YWJhc2VVUkxcIiBhbmQgaXMgZnJvbSB0aGUgY29ycmVjdCAnICtcbiAgICAgICAgICAgICAgICAgICAgJ3Byb2plY3QuJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZSArPVxuICAgICAgICAgICAgICAgICdNYWtlIHN1cmUgdGhlIFwiYXBpS2V5XCIgYW5kIFwiZGF0YWJhc2VVUkxcIiBwcm9wZXJ0aWVzIHByb3ZpZGVkIHRvICcgK1xuICAgICAgICAgICAgICAgICAgICAnaW5pdGlhbGl6ZUFwcCgpIG1hdGNoIHRoZSB2YWx1ZXMgcHJvdmlkZWQgZm9yIHlvdXIgYXBwIGF0ICcgK1xuICAgICAgICAgICAgICAgICAgICAnaHR0cHM6Ly9jb25zb2xlLmZpcmViYXNlLmdvb2dsZS5jb20vLic7XG4gICAgICAgIH1cbiAgICAgICAgd2FybihlcnJvck1lc3NhZ2UpO1xuICAgIH1cbn1cbi8qIEF1dGhUb2tlblByb3ZpZGVyIHRoYXQgc3VwcGxpZXMgYSBjb25zdGFudCB0b2tlbi4gVXNlZCBieSBBZG1pbiBTREsgb3IgbW9ja1VzZXJUb2tlbiB3aXRoIGVtdWxhdG9ycy4gKi9cbmNsYXNzIEVtdWxhdG9yVG9rZW5Qcm92aWRlciB7XG4gICAgY29uc3RydWN0b3IoYWNjZXNzVG9rZW4pIHtcbiAgICAgICAgdGhpcy5hY2Nlc3NUb2tlbiA9IGFjY2Vzc1Rva2VuO1xuICAgIH1cbiAgICBnZXRUb2tlbihmb3JjZVJlZnJlc2gpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICBhY2Nlc3NUb2tlbjogdGhpcy5hY2Nlc3NUb2tlblxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYWRkVG9rZW5DaGFuZ2VMaXN0ZW5lcihsaXN0ZW5lcikge1xuICAgICAgICAvLyBJbnZva2UgdGhlIGxpc3RlbmVyIGltbWVkaWF0ZWx5IHRvIG1hdGNoIHRoZSBiZWhhdmlvciBpbiBGaXJlYmFzZSBBdXRoXG4gICAgICAgIC8vIChzZWUgcGFja2FnZXMvYXV0aC9zcmMvYXV0aC5qcyNMMTgwNylcbiAgICAgICAgbGlzdGVuZXIodGhpcy5hY2Nlc3NUb2tlbik7XG4gICAgfVxuICAgIHJlbW92ZVRva2VuQ2hhbmdlTGlzdGVuZXIobGlzdGVuZXIpIHsgfVxuICAgIG5vdGlmeUZvckludmFsaWRUb2tlbigpIHsgfVxufVxuLyoqIEEgc3RyaW5nIHRoYXQgaXMgdHJlYXRlZCBhcyBhbiBhZG1pbiBhY2Nlc3MgdG9rZW4gYnkgdGhlIFJUREIgZW11bGF0b3IuIFVzZWQgYnkgQWRtaW4gU0RLLiAqL1xuRW11bGF0b3JUb2tlblByb3ZpZGVyLk9XTkVSID0gJ293bmVyJztcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNvbnN0IFBST1RPQ09MX1ZFUlNJT04gPSAnNSc7XG5jb25zdCBWRVJTSU9OX1BBUkFNID0gJ3YnO1xuY29uc3QgVFJBTlNQT1JUX1NFU1NJT05fUEFSQU0gPSAncyc7XG5jb25zdCBSRUZFUkVSX1BBUkFNID0gJ3InO1xuY29uc3QgRk9SR0VfUkVGID0gJ2YnO1xuLy8gTWF0Y2hlcyBjb25zb2xlLmZpcmViYXNlLmdvb2dsZS5jb20sIGZpcmViYXNlLWNvbnNvbGUtKi5jb3JwLmdvb2dsZS5jb20gYW5kXG4vLyBmaXJlYmFzZS5jb3JwLmdvb2dsZS5jb21cbmNvbnN0IEZPUkdFX0RPTUFJTl9SRSA9IC8oY29uc29sZVxcLmZpcmViYXNlfGZpcmViYXNlLWNvbnNvbGUtXFx3K1xcLmNvcnB8ZmlyZWJhc2VcXC5jb3JwKVxcLmdvb2dsZVxcLmNvbS87XG5jb25zdCBMQVNUX1NFU1NJT05fUEFSQU0gPSAnbHMnO1xuY29uc3QgQVBQTElDQVRJT05fSURfUEFSQU0gPSAncCc7XG5jb25zdCBBUFBfQ0hFQ0tfVE9LRU5fUEFSQU0gPSAnYWMnO1xuY29uc3QgV0VCU09DS0VUID0gJ3dlYnNvY2tldCc7XG5jb25zdCBMT05HX1BPTExJTkcgPSAnbG9uZ19wb2xsaW5nJztcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBjbGFzcyB0aGF0IGhvbGRzIG1ldGFkYXRhIGFib3V0IGEgUmVwbyBvYmplY3RcbiAqL1xuY2xhc3MgUmVwb0luZm8ge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBob3N0IC0gSG9zdG5hbWUgcG9ydGlvbiBvZiB0aGUgdXJsIGZvciB0aGUgcmVwb1xuICAgICAqIEBwYXJhbSBzZWN1cmUgLSBXaGV0aGVyIG9yIG5vdCB0aGlzIHJlcG8gaXMgYWNjZXNzZWQgb3ZlciBzc2xcbiAgICAgKiBAcGFyYW0gbmFtZXNwYWNlIC0gVGhlIG5hbWVzcGFjZSByZXByZXNlbnRlZCBieSB0aGUgcmVwb1xuICAgICAqIEBwYXJhbSB3ZWJTb2NrZXRPbmx5IC0gV2hldGhlciB0byBwcmVmZXIgd2Vic29ja2V0cyBvdmVyIGFsbCBvdGhlciB0cmFuc3BvcnRzICh1c2VkIGJ5IE5lc3QpLlxuICAgICAqIEBwYXJhbSBub2RlQWRtaW4gLSBXaGV0aGVyIHRoaXMgaW5zdGFuY2UgdXNlcyBBZG1pbiBTREsgY3JlZGVudGlhbHNcbiAgICAgKiBAcGFyYW0gcGVyc2lzdGVuY2VLZXkgLSBPdmVycmlkZSB0aGUgZGVmYXVsdCBzZXNzaW9uIHBlcnNpc3RlbmNlIHN0b3JhZ2Uga2V5XG4gICAgICovXG4gICAgY29uc3RydWN0b3IoaG9zdCwgc2VjdXJlLCBuYW1lc3BhY2UsIHdlYlNvY2tldE9ubHksIG5vZGVBZG1pbiA9IGZhbHNlLCBwZXJzaXN0ZW5jZUtleSA9ICcnLCBpbmNsdWRlTmFtZXNwYWNlSW5RdWVyeVBhcmFtcyA9IGZhbHNlLCBpc1VzaW5nRW11bGF0b3IgPSBmYWxzZSkge1xuICAgICAgICB0aGlzLnNlY3VyZSA9IHNlY3VyZTtcbiAgICAgICAgdGhpcy5uYW1lc3BhY2UgPSBuYW1lc3BhY2U7XG4gICAgICAgIHRoaXMud2ViU29ja2V0T25seSA9IHdlYlNvY2tldE9ubHk7XG4gICAgICAgIHRoaXMubm9kZUFkbWluID0gbm9kZUFkbWluO1xuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlS2V5ID0gcGVyc2lzdGVuY2VLZXk7XG4gICAgICAgIHRoaXMuaW5jbHVkZU5hbWVzcGFjZUluUXVlcnlQYXJhbXMgPSBpbmNsdWRlTmFtZXNwYWNlSW5RdWVyeVBhcmFtcztcbiAgICAgICAgdGhpcy5pc1VzaW5nRW11bGF0b3IgPSBpc1VzaW5nRW11bGF0b3I7XG4gICAgICAgIHRoaXMuX2hvc3QgPSBob3N0LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHRoaXMuX2RvbWFpbiA9IHRoaXMuX2hvc3Quc3Vic3RyKHRoaXMuX2hvc3QuaW5kZXhPZignLicpICsgMSk7XG4gICAgICAgIHRoaXMuaW50ZXJuYWxIb3N0ID1cbiAgICAgICAgICAgIFBlcnNpc3RlbnRTdG9yYWdlLmdldCgnaG9zdDonICsgaG9zdCkgfHwgdGhpcy5faG9zdDtcbiAgICB9XG4gICAgaXNDYWNoZWFibGVIb3N0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbnRlcm5hbEhvc3Quc3Vic3RyKDAsIDIpID09PSAncy0nO1xuICAgIH1cbiAgICBpc0N1c3RvbUhvc3QoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5fZG9tYWluICE9PSAnZmlyZWJhc2Vpby5jb20nICYmXG4gICAgICAgICAgICB0aGlzLl9kb21haW4gIT09ICdmaXJlYmFzZWlvLWRlbW8uY29tJyk7XG4gICAgfVxuICAgIGdldCBob3N0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faG9zdDtcbiAgICB9XG4gICAgc2V0IGhvc3QobmV3SG9zdCkge1xuICAgICAgICBpZiAobmV3SG9zdCAhPT0gdGhpcy5pbnRlcm5hbEhvc3QpIHtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJuYWxIb3N0ID0gbmV3SG9zdDtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ2FjaGVhYmxlSG9zdCgpKSB7XG4gICAgICAgICAgICAgICAgUGVyc2lzdGVudFN0b3JhZ2Uuc2V0KCdob3N0OicgKyB0aGlzLl9ob3N0LCB0aGlzLmludGVybmFsSG9zdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGxldCBzdHIgPSB0aGlzLnRvVVJMU3RyaW5nKCk7XG4gICAgICAgIGlmICh0aGlzLnBlcnNpc3RlbmNlS2V5KSB7XG4gICAgICAgICAgICBzdHIgKz0gJzwnICsgdGhpcy5wZXJzaXN0ZW5jZUtleSArICc+JztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RyO1xuICAgIH1cbiAgICB0b1VSTFN0cmluZygpIHtcbiAgICAgICAgY29uc3QgcHJvdG9jb2wgPSB0aGlzLnNlY3VyZSA/ICdodHRwczovLycgOiAnaHR0cDovLyc7XG4gICAgICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy5pbmNsdWRlTmFtZXNwYWNlSW5RdWVyeVBhcmFtc1xuICAgICAgICAgICAgPyBgP25zPSR7dGhpcy5uYW1lc3BhY2V9YFxuICAgICAgICAgICAgOiAnJztcbiAgICAgICAgcmV0dXJuIGAke3Byb3RvY29sfSR7dGhpcy5ob3N0fS8ke3F1ZXJ5fWA7XG4gICAgfVxufVxuZnVuY3Rpb24gcmVwb0luZm9OZWVkc1F1ZXJ5UGFyYW0ocmVwb0luZm8pIHtcbiAgICByZXR1cm4gKHJlcG9JbmZvLmhvc3QgIT09IHJlcG9JbmZvLmludGVybmFsSG9zdCB8fFxuICAgICAgICByZXBvSW5mby5pc0N1c3RvbUhvc3QoKSB8fFxuICAgICAgICByZXBvSW5mby5pbmNsdWRlTmFtZXNwYWNlSW5RdWVyeVBhcmFtcyk7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIHdlYnNvY2tldCBVUkwgZm9yIHRoaXMgcmVwb1xuICogQHBhcmFtIHJlcG9JbmZvIC0gUmVwb0luZm8gb2JqZWN0XG4gKiBAcGFyYW0gdHlwZSAtIG9mIGNvbm5lY3Rpb25cbiAqIEBwYXJhbSBwYXJhbXMgLSBsaXN0XG4gKiBAcmV0dXJucyBUaGUgVVJMIGZvciB0aGlzIHJlcG9cbiAqL1xuZnVuY3Rpb24gcmVwb0luZm9Db25uZWN0aW9uVVJMKHJlcG9JbmZvLCB0eXBlLCBwYXJhbXMpIHtcbiAgICBhc3NlcnQodHlwZW9mIHR5cGUgPT09ICdzdHJpbmcnLCAndHlwZW9mIHR5cGUgbXVzdCA9PSBzdHJpbmcnKTtcbiAgICBhc3NlcnQodHlwZW9mIHBhcmFtcyA9PT0gJ29iamVjdCcsICd0eXBlb2YgcGFyYW1zIG11c3QgPT0gb2JqZWN0Jyk7XG4gICAgbGV0IGNvbm5VUkw7XG4gICAgaWYgKHR5cGUgPT09IFdFQlNPQ0tFVCkge1xuICAgICAgICBjb25uVVJMID1cbiAgICAgICAgICAgIChyZXBvSW5mby5zZWN1cmUgPyAnd3NzOi8vJyA6ICd3czovLycpICsgcmVwb0luZm8uaW50ZXJuYWxIb3N0ICsgJy8ud3M/JztcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSA9PT0gTE9OR19QT0xMSU5HKSB7XG4gICAgICAgIGNvbm5VUkwgPVxuICAgICAgICAgICAgKHJlcG9JbmZvLnNlY3VyZSA/ICdodHRwczovLycgOiAnaHR0cDovLycpICtcbiAgICAgICAgICAgICAgICByZXBvSW5mby5pbnRlcm5hbEhvc3QgK1xuICAgICAgICAgICAgICAgICcvLmxwPyc7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gY29ubmVjdGlvbiB0eXBlOiAnICsgdHlwZSk7XG4gICAgfVxuICAgIGlmIChyZXBvSW5mb05lZWRzUXVlcnlQYXJhbShyZXBvSW5mbykpIHtcbiAgICAgICAgcGFyYW1zWyducyddID0gcmVwb0luZm8ubmFtZXNwYWNlO1xuICAgIH1cbiAgICBjb25zdCBwYWlycyA9IFtdO1xuICAgIGVhY2gocGFyYW1zLCAoa2V5LCB2YWx1ZSkgPT4ge1xuICAgICAgICBwYWlycy5wdXNoKGtleSArICc9JyArIHZhbHVlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gY29ublVSTCArIHBhaXJzLmpvaW4oJyYnKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVHJhY2tzIGEgY29sbGVjdGlvbiBvZiBzdGF0cy5cbiAqL1xuY2xhc3MgU3RhdHNDb2xsZWN0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5jb3VudGVyc18gPSB7fTtcbiAgICB9XG4gICAgaW5jcmVtZW50Q291bnRlcihuYW1lLCBhbW91bnQgPSAxKSB7XG4gICAgICAgIGlmICghY29udGFpbnModGhpcy5jb3VudGVyc18sIG5hbWUpKSB7XG4gICAgICAgICAgICB0aGlzLmNvdW50ZXJzX1tuYW1lXSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb3VudGVyc19bbmFtZV0gKz0gYW1vdW50O1xuICAgIH1cbiAgICBnZXQoKSB7XG4gICAgICAgIHJldHVybiBkZWVwQ29weSh0aGlzLmNvdW50ZXJzXyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgY29sbGVjdGlvbnMgPSB7fTtcbmNvbnN0IHJlcG9ydGVycyA9IHt9O1xuZnVuY3Rpb24gc3RhdHNNYW5hZ2VyR2V0Q29sbGVjdGlvbihyZXBvSW5mbykge1xuICAgIGNvbnN0IGhhc2hTdHJpbmcgPSByZXBvSW5mby50b1N0cmluZygpO1xuICAgIGlmICghY29sbGVjdGlvbnNbaGFzaFN0cmluZ10pIHtcbiAgICAgICAgY29sbGVjdGlvbnNbaGFzaFN0cmluZ10gPSBuZXcgU3RhdHNDb2xsZWN0aW9uKCk7XG4gICAgfVxuICAgIHJldHVybiBjb2xsZWN0aW9uc1toYXNoU3RyaW5nXTtcbn1cbmZ1bmN0aW9uIHN0YXRzTWFuYWdlckdldE9yQ3JlYXRlUmVwb3J0ZXIocmVwb0luZm8sIGNyZWF0b3JGdW5jdGlvbikge1xuICAgIGNvbnN0IGhhc2hTdHJpbmcgPSByZXBvSW5mby50b1N0cmluZygpO1xuICAgIGlmICghcmVwb3J0ZXJzW2hhc2hTdHJpbmddKSB7XG4gICAgICAgIHJlcG9ydGVyc1toYXNoU3RyaW5nXSA9IGNyZWF0b3JGdW5jdGlvbigpO1xuICAgIH1cbiAgICByZXR1cm4gcmVwb3J0ZXJzW2hhc2hTdHJpbmddO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGlzIGNsYXNzIGVuc3VyZXMgdGhlIHBhY2tldHMgZnJvbSB0aGUgc2VydmVyIGFycml2ZSBpbiBvcmRlclxuICogVGhpcyBjbGFzcyB0YWtlcyBkYXRhIGZyb20gdGhlIHNlcnZlciBhbmQgZW5zdXJlcyBpdCBnZXRzIHBhc3NlZCBpbnRvIHRoZSBjYWxsYmFja3MgaW4gb3JkZXIuXG4gKi9cbmNsYXNzIFBhY2tldFJlY2VpdmVyIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gb25NZXNzYWdlX1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG9uTWVzc2FnZV8pIHtcbiAgICAgICAgdGhpcy5vbk1lc3NhZ2VfID0gb25NZXNzYWdlXztcbiAgICAgICAgdGhpcy5wZW5kaW5nUmVzcG9uc2VzID0gW107XG4gICAgICAgIHRoaXMuY3VycmVudFJlc3BvbnNlTnVtID0gMDtcbiAgICAgICAgdGhpcy5jbG9zZUFmdGVyUmVzcG9uc2UgPSAtMTtcbiAgICAgICAgdGhpcy5vbkNsb3NlID0gbnVsbDtcbiAgICB9XG4gICAgY2xvc2VBZnRlcihyZXNwb25zZU51bSwgY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5jbG9zZUFmdGVyUmVzcG9uc2UgPSByZXNwb25zZU51bTtcbiAgICAgICAgdGhpcy5vbkNsb3NlID0gY2FsbGJhY2s7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlQWZ0ZXJSZXNwb25zZSA8IHRoaXMuY3VycmVudFJlc3BvbnNlTnVtKSB7XG4gICAgICAgICAgICB0aGlzLm9uQ2xvc2UoKTtcbiAgICAgICAgICAgIHRoaXMub25DbG9zZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRWFjaCBtZXNzYWdlIGZyb20gdGhlIHNlcnZlciBjb21lcyB3aXRoIGEgcmVzcG9uc2UgbnVtYmVyLCBhbmQgYW4gYXJyYXkgb2YgZGF0YS4gVGhlIHJlc3BvbnNlTnVtYmVyXG4gICAgICogYWxsb3dzIHVzIHRvIGVuc3VyZSB0aGF0IHdlIHByb2Nlc3MgdGhlbSBpbiB0aGUgcmlnaHQgb3JkZXIsIHNpbmNlIHdlIGNhbid0IGJlIGd1YXJhbnRlZWQgdGhhdCBhbGxcbiAgICAgKiBicm93c2VycyB3aWxsIHJlc3BvbmQgaW4gdGhlIHNhbWUgb3JkZXIgYXMgdGhlIHJlcXVlc3RzIHdlIHNlbnRcbiAgICAgKi9cbiAgICBoYW5kbGVSZXNwb25zZShyZXF1ZXN0TnVtLCBkYXRhKSB7XG4gICAgICAgIHRoaXMucGVuZGluZ1Jlc3BvbnNlc1tyZXF1ZXN0TnVtXSA9IGRhdGE7XG4gICAgICAgIHdoaWxlICh0aGlzLnBlbmRpbmdSZXNwb25zZXNbdGhpcy5jdXJyZW50UmVzcG9uc2VOdW1dKSB7XG4gICAgICAgICAgICBjb25zdCB0b1Byb2Nlc3MgPSB0aGlzLnBlbmRpbmdSZXNwb25zZXNbdGhpcy5jdXJyZW50UmVzcG9uc2VOdW1dO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMucGVuZGluZ1Jlc3BvbnNlc1t0aGlzLmN1cnJlbnRSZXNwb25zZU51bV07XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRvUHJvY2Vzcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIGlmICh0b1Byb2Nlc3NbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgZXhjZXB0aW9uR3VhcmQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbk1lc3NhZ2VfKHRvUHJvY2Vzc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRSZXNwb25zZU51bSA9PT0gdGhpcy5jbG9zZUFmdGVyUmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vbkNsb3NlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25DbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQ2xvc2UgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY3VycmVudFJlc3BvbnNlTnVtKys7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBVUkwgcXVlcnkgcGFyYW1ldGVycyBhc3NvY2lhdGVkIHdpdGggbG9uZ3BvbGxpbmdcbmNvbnN0IEZJUkVCQVNFX0xPTkdQT0xMX1NUQVJUX1BBUkFNID0gJ3N0YXJ0JztcbmNvbnN0IEZJUkVCQVNFX0xPTkdQT0xMX0NMT1NFX0NPTU1BTkQgPSAnY2xvc2UnO1xuY29uc3QgRklSRUJBU0VfTE9OR1BPTExfQ09NTUFORF9DQl9OQU1FID0gJ3BMUENvbW1hbmQnO1xuY29uc3QgRklSRUJBU0VfTE9OR1BPTExfREFUQV9DQl9OQU1FID0gJ3BSVExQQ0InO1xuY29uc3QgRklSRUJBU0VfTE9OR1BPTExfSURfUEFSQU0gPSAnaWQnO1xuY29uc3QgRklSRUJBU0VfTE9OR1BPTExfUFdfUEFSQU0gPSAncHcnO1xuY29uc3QgRklSRUJBU0VfTE9OR1BPTExfU0VSSUFMX1BBUkFNID0gJ3Nlcic7XG5jb25zdCBGSVJFQkFTRV9MT05HUE9MTF9DQUxMQkFDS19JRF9QQVJBTSA9ICdjYic7XG5jb25zdCBGSVJFQkFTRV9MT05HUE9MTF9TRUdNRU5UX05VTV9QQVJBTSA9ICdzZWcnO1xuY29uc3QgRklSRUJBU0VfTE9OR1BPTExfU0VHTUVOVFNfSU5fUEFDS0VUID0gJ3RzJztcbmNvbnN0IEZJUkVCQVNFX0xPTkdQT0xMX0RBVEFfUEFSQU0gPSAnZCc7XG5jb25zdCBGSVJFQkFTRV9MT05HUE9MTF9ESVNDT05OX0ZSQU1FX1JFUVVFU1RfUEFSQU0gPSAnZGZyYW1lJztcbi8vRGF0YSBzaXplIGNvbnN0YW50cy5cbi8vVE9ETzogUGVyZjogdGhlIG1heGltdW0gbGVuZ3RoIGFjdHVhbGx5IGRpZmZlcnMgZnJvbSBicm93c2VyIHRvIGJyb3dzZXIuXG4vLyBXZSBzaG91bGQgY2hlY2sgd2hhdCBicm93c2VyIHdlJ3JlIG9uIGFuZCBzZXQgYWNjb3JkaW5nbHkuXG5jb25zdCBNQVhfVVJMX0RBVEFfU0laRSA9IDE4NzA7XG5jb25zdCBTRUdfSEVBREVSX1NJWkUgPSAzMDsgLy9pZTogJnNlZz04Mjk5MjM0JnRzPTk4MjM4OTEyMyZkPVxuY29uc3QgTUFYX1BBWUxPQURfU0laRSA9IE1BWF9VUkxfREFUQV9TSVpFIC0gU0VHX0hFQURFUl9TSVpFO1xuLyoqXG4gKiBLZWVwYWxpdmUgcGVyaW9kXG4gKiBzZW5kIGEgZnJlc2ggcmVxdWVzdCBhdCBtaW5pbXVtIGV2ZXJ5IDI1IHNlY29uZHMuIE9wZXJhIGhhcyBhIG1heGltdW0gcmVxdWVzdFxuICogbGVuZ3RoIG9mIDMwIHNlY29uZHMgdGhhdCB3ZSBjYW4ndCBleGNlZWQuXG4gKi9cbmNvbnN0IEtFRVBBTElWRV9SRVFVRVNUX0lOVEVSVkFMID0gMjUwMDA7XG4vKipcbiAqIEhvdyBsb25nIHRvIHdhaXQgYmVmb3JlIGFib3J0aW5nIGEgbG9uZy1wb2xsaW5nIGNvbm5lY3Rpb24gYXR0ZW1wdC5cbiAqL1xuY29uc3QgTFBfQ09OTkVDVF9USU1FT1VUID0gMzAwMDA7XG4vKipcbiAqIFRoaXMgY2xhc3MgbWFuYWdlcyBhIHNpbmdsZSBsb25nLXBvbGxpbmcgY29ubmVjdGlvbi5cbiAqL1xuY2xhc3MgQnJvd3NlclBvbGxDb25uZWN0aW9uIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gY29ubklkIEFuIGlkZW50aWZpZXIgZm9yIHRoaXMgY29ubmVjdGlvbiwgdXNlZCBmb3IgbG9nZ2luZ1xuICAgICAqIEBwYXJhbSByZXBvSW5mbyBUaGUgaW5mbyBmb3IgdGhlIGVuZHBvaW50IHRvIHNlbmQgZGF0YSB0by5cbiAgICAgKiBAcGFyYW0gYXBwbGljYXRpb25JZCBUaGUgRmlyZWJhc2UgQXBwIElEIGZvciB0aGlzIHByb2plY3QuXG4gICAgICogQHBhcmFtIGFwcENoZWNrVG9rZW4gVGhlIEFwcENoZWNrIHRva2VuIGZvciB0aGlzIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gYXV0aFRva2VuIFRoZSBBdXRoVG9rZW4gdG8gdXNlIGZvciB0aGlzIGNvbm5lY3Rpb24uXG4gICAgICogQHBhcmFtIHRyYW5zcG9ydFNlc3Npb25JZCBPcHRpb25hbCB0cmFuc3BvcnRTZXNzaW9uaWQgaWYgd2UgYXJlXG4gICAgICogcmVjb25uZWN0aW5nIGZvciBhbiBleGlzdGluZyB0cmFuc3BvcnQgc2Vzc2lvblxuICAgICAqIEBwYXJhbSBsYXN0U2Vzc2lvbklkIE9wdGlvbmFsIGxhc3RTZXNzaW9uSWQgaWYgdGhlIFBlcnNpc3RlbnRDb25uZWN0aW9uIGhhc1xuICAgICAqIGFscmVhZHkgY3JlYXRlZCBhIGNvbm5lY3Rpb24gcHJldmlvdXNseVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGNvbm5JZCwgcmVwb0luZm8sIGFwcGxpY2F0aW9uSWQsIGFwcENoZWNrVG9rZW4sIGF1dGhUb2tlbiwgdHJhbnNwb3J0U2Vzc2lvbklkLCBsYXN0U2Vzc2lvbklkKSB7XG4gICAgICAgIHRoaXMuY29ubklkID0gY29ubklkO1xuICAgICAgICB0aGlzLnJlcG9JbmZvID0gcmVwb0luZm87XG4gICAgICAgIHRoaXMuYXBwbGljYXRpb25JZCA9IGFwcGxpY2F0aW9uSWQ7XG4gICAgICAgIHRoaXMuYXBwQ2hlY2tUb2tlbiA9IGFwcENoZWNrVG9rZW47XG4gICAgICAgIHRoaXMuYXV0aFRva2VuID0gYXV0aFRva2VuO1xuICAgICAgICB0aGlzLnRyYW5zcG9ydFNlc3Npb25JZCA9IHRyYW5zcG9ydFNlc3Npb25JZDtcbiAgICAgICAgdGhpcy5sYXN0U2Vzc2lvbklkID0gbGFzdFNlc3Npb25JZDtcbiAgICAgICAgdGhpcy5ieXRlc1NlbnQgPSAwO1xuICAgICAgICB0aGlzLmJ5dGVzUmVjZWl2ZWQgPSAwO1xuICAgICAgICB0aGlzLmV2ZXJDb25uZWN0ZWRfID0gZmFsc2U7XG4gICAgICAgIHRoaXMubG9nXyA9IGxvZ1dyYXBwZXIoY29ubklkKTtcbiAgICAgICAgdGhpcy5zdGF0c18gPSBzdGF0c01hbmFnZXJHZXRDb2xsZWN0aW9uKHJlcG9JbmZvKTtcbiAgICAgICAgdGhpcy51cmxGbiA9IChwYXJhbXMpID0+IHtcbiAgICAgICAgICAgIC8vIEFsd2F5cyBhZGQgdGhlIHRva2VuIGlmIHdlIGhhdmUgb25lLlxuICAgICAgICAgICAgaWYgKHRoaXMuYXBwQ2hlY2tUb2tlbikge1xuICAgICAgICAgICAgICAgIHBhcmFtc1tBUFBfQ0hFQ0tfVE9LRU5fUEFSQU1dID0gdGhpcy5hcHBDaGVja1Rva2VuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlcG9JbmZvQ29ubmVjdGlvblVSTChyZXBvSW5mbywgTE9OR19QT0xMSU5HLCBwYXJhbXMpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gb25NZXNzYWdlIC0gQ2FsbGJhY2sgd2hlbiBtZXNzYWdlcyBhcnJpdmVcbiAgICAgKiBAcGFyYW0gb25EaXNjb25uZWN0IC0gQ2FsbGJhY2sgd2l0aCBjb25uZWN0aW9uIGxvc3QuXG4gICAgICovXG4gICAgb3Blbihvbk1lc3NhZ2UsIG9uRGlzY29ubmVjdCkge1xuICAgICAgICB0aGlzLmN1clNlZ21lbnROdW0gPSAwO1xuICAgICAgICB0aGlzLm9uRGlzY29ubmVjdF8gPSBvbkRpc2Nvbm5lY3Q7XG4gICAgICAgIHRoaXMubXlQYWNrZXRPcmRlcmVyID0gbmV3IFBhY2tldFJlY2VpdmVyKG9uTWVzc2FnZSk7XG4gICAgICAgIHRoaXMuaXNDbG9zZWRfID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY29ubmVjdFRpbWVvdXRUaW1lcl8gPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubG9nXygnVGltZWQgb3V0IHRyeWluZyB0byBjb25uZWN0LicpO1xuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHdlIGNsZWFyIHRoZSBob3N0IGNhY2hlXG4gICAgICAgICAgICB0aGlzLm9uQ2xvc2VkXygpO1xuICAgICAgICAgICAgdGhpcy5jb25uZWN0VGltZW91dFRpbWVyXyA9IG51bGw7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB9LCBNYXRoLmZsb29yKExQX0NPTk5FQ1RfVElNRU9VVCkpO1xuICAgICAgICAvLyBFbnN1cmUgd2UgZGVsYXkgdGhlIGNyZWF0aW9uIG9mIHRoZSBpZnJhbWUgdW50aWwgdGhlIERPTSBpcyBsb2FkZWQuXG4gICAgICAgIGV4ZWN1dGVXaGVuRE9NUmVhZHkoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNDbG9zZWRfKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy9TZXQgdXAgYSBjYWxsYmFjayB0aGF0IGdldHMgdHJpZ2dlcmVkIG9uY2UgYSBjb25uZWN0aW9uIGlzIHNldCB1cC5cbiAgICAgICAgICAgIHRoaXMuc2NyaXB0VGFnSG9sZGVyID0gbmV3IEZpcmViYXNlSUZyYW1lU2NyaXB0SG9sZGVyKCguLi5hcmdzKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgW2NvbW1hbmQsIGFyZzEsIGFyZzIsIGFyZzMsIGFyZzRdID0gYXJncztcbiAgICAgICAgICAgICAgICB0aGlzLmluY3JlbWVudEluY29taW5nQnl0ZXNfKGFyZ3MpO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5zY3JpcHRUYWdIb2xkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAvLyB3ZSBjbG9zZWQgdGhlIGNvbm5lY3Rpb24uXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbm5lY3RUaW1lb3V0VGltZXJfKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmNvbm5lY3RUaW1lb3V0VGltZXJfKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0VGltZW91dFRpbWVyXyA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZXZlckNvbm5lY3RlZF8gPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmIChjb21tYW5kID09PSBGSVJFQkFTRV9MT05HUE9MTF9TVEFSVF9QQVJBTSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlkID0gYXJnMTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXNzd29yZCA9IGFyZzI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvbW1hbmQgPT09IEZJUkVCQVNFX0xPTkdQT0xMX0NMT1NFX0NPTU1BTkQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRG9uJ3QgY2xlYXIgdGhlIGhvc3QgY2FjaGUuIFdlIGdvdCBhIHJlc3BvbnNlIGZyb20gdGhlIHNlcnZlciwgc28gd2Uga25vdyBpdCdzIHJlYWNoYWJsZVxuICAgICAgICAgICAgICAgICAgICBpZiAoYXJnMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgYXJlbid0IGV4cGVjdGluZyBhbnkgbW9yZSBkYXRhIChvdGhlciB0aGFuIHdoYXQgdGhlIHNlcnZlcidzIGFscmVhZHkgaW4gdGhlIHByb2Nlc3Mgb2Ygc2VuZGluZyB1c1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhyb3VnaCBvdXIgYWxyZWFkeSBvcGVuIHBvbGxzKSwgc28gZG9uJ3Qgc2VuZCBhbnkgbW9yZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2NyaXB0VGFnSG9sZGVyLnNlbmROZXdQb2xscyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXJnMSBpbiB0aGlzIGNhc2UgaXMgdGhlIGxhc3QgcmVzcG9uc2UgbnVtYmVyIHNlbnQgYnkgdGhlIHNlcnZlci4gV2Ugc2hvdWxkIHRyeSB0byByZWNlaXZlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhbGwgb2YgdGhlIHJlc3BvbnNlcyB1cCB0byB0aGlzIG9uZSBiZWZvcmUgY2xvc2luZ1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5teVBhY2tldE9yZGVyZXIuY2xvc2VBZnRlcihhcmcxLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkNsb3NlZF8oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkNsb3NlZF8oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnJlY29nbml6ZWQgY29tbWFuZCByZWNlaXZlZDogJyArIGNvbW1hbmQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sICguLi5hcmdzKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgW3BOLCBkYXRhXSA9IGFyZ3M7XG4gICAgICAgICAgICAgICAgdGhpcy5pbmNyZW1lbnRJbmNvbWluZ0J5dGVzXyhhcmdzKTtcbiAgICAgICAgICAgICAgICB0aGlzLm15UGFja2V0T3JkZXJlci5oYW5kbGVSZXNwb25zZShwTiwgZGF0YSk7XG4gICAgICAgICAgICB9LCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkNsb3NlZF8oKTtcbiAgICAgICAgICAgIH0sIHRoaXMudXJsRm4pO1xuICAgICAgICAgICAgLy9TZW5kIHRoZSBpbml0aWFsIHJlcXVlc3QgdG8gY29ubmVjdC4gVGhlIHNlcmlhbCBudW1iZXIgaXMgc2ltcGx5IHRvIGtlZXAgdGhlIGJyb3dzZXIgZnJvbSBwdWxsaW5nIHByZXZpb3VzIHJlc3VsdHNcbiAgICAgICAgICAgIC8vZnJvbSBjYWNoZS5cbiAgICAgICAgICAgIGNvbnN0IHVybFBhcmFtcyA9IHt9O1xuICAgICAgICAgICAgdXJsUGFyYW1zW0ZJUkVCQVNFX0xPTkdQT0xMX1NUQVJUX1BBUkFNXSA9ICd0JztcbiAgICAgICAgICAgIHVybFBhcmFtc1tGSVJFQkFTRV9MT05HUE9MTF9TRVJJQUxfUEFSQU1dID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDAwMDAwKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnNjcmlwdFRhZ0hvbGRlci51bmlxdWVDYWxsYmFja0lkZW50aWZpZXIpIHtcbiAgICAgICAgICAgICAgICB1cmxQYXJhbXNbRklSRUJBU0VfTE9OR1BPTExfQ0FMTEJBQ0tfSURfUEFSQU1dID1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JpcHRUYWdIb2xkZXIudW5pcXVlQ2FsbGJhY2tJZGVudGlmaWVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXJsUGFyYW1zW1ZFUlNJT05fUEFSQU1dID0gUFJPVE9DT0xfVkVSU0lPTjtcbiAgICAgICAgICAgIGlmICh0aGlzLnRyYW5zcG9ydFNlc3Npb25JZCkge1xuICAgICAgICAgICAgICAgIHVybFBhcmFtc1tUUkFOU1BPUlRfU0VTU0lPTl9QQVJBTV0gPSB0aGlzLnRyYW5zcG9ydFNlc3Npb25JZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmxhc3RTZXNzaW9uSWQpIHtcbiAgICAgICAgICAgICAgICB1cmxQYXJhbXNbTEFTVF9TRVNTSU9OX1BBUkFNXSA9IHRoaXMubGFzdFNlc3Npb25JZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmFwcGxpY2F0aW9uSWQpIHtcbiAgICAgICAgICAgICAgICB1cmxQYXJhbXNbQVBQTElDQVRJT05fSURfUEFSQU1dID0gdGhpcy5hcHBsaWNhdGlvbklkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYXBwQ2hlY2tUb2tlbikge1xuICAgICAgICAgICAgICAgIHVybFBhcmFtc1tBUFBfQ0hFQ0tfVE9LRU5fUEFSQU1dID0gdGhpcy5hcHBDaGVja1Rva2VuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBsb2NhdGlvbiAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICAgICAgICBsb2NhdGlvbi5ob3N0bmFtZSAmJlxuICAgICAgICAgICAgICAgIEZPUkdFX0RPTUFJTl9SRS50ZXN0KGxvY2F0aW9uLmhvc3RuYW1lKSkge1xuICAgICAgICAgICAgICAgIHVybFBhcmFtc1tSRUZFUkVSX1BBUkFNXSA9IEZPUkdFX1JFRjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNvbm5lY3RVUkwgPSB0aGlzLnVybEZuKHVybFBhcmFtcyk7XG4gICAgICAgICAgICB0aGlzLmxvZ18oJ0Nvbm5lY3RpbmcgdmlhIGxvbmctcG9sbCB0byAnICsgY29ubmVjdFVSTCk7XG4gICAgICAgICAgICB0aGlzLnNjcmlwdFRhZ0hvbGRlci5hZGRUYWcoY29ubmVjdFVSTCwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8qIGRvIG5vdGhpbmcgKi9cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbCB0aGlzIHdoZW4gYSBoYW5kc2hha2UgaGFzIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkgYW5kIHdlIHdhbnQgdG8gY29uc2lkZXIgdGhlIGNvbm5lY3Rpb24gZXN0YWJsaXNoZWRcbiAgICAgKi9cbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5zY3JpcHRUYWdIb2xkZXIuc3RhcnRMb25nUG9sbCh0aGlzLmlkLCB0aGlzLnBhc3N3b3JkKTtcbiAgICAgICAgdGhpcy5hZGREaXNjb25uZWN0UGluZ0ZyYW1lKHRoaXMuaWQsIHRoaXMucGFzc3dvcmQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3JjZXMgbG9uZyBwb2xsaW5nIHRvIGJlIGNvbnNpZGVyZWQgYXMgYSBwb3RlbnRpYWwgdHJhbnNwb3J0XG4gICAgICovXG4gICAgc3RhdGljIGZvcmNlQWxsb3coKSB7XG4gICAgICAgIEJyb3dzZXJQb2xsQ29ubmVjdGlvbi5mb3JjZUFsbG93XyA9IHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvcmNlcyBsb25ncG9sbGluZyB0byBub3QgYmUgY29uc2lkZXJlZCBhcyBhIHBvdGVudGlhbCB0cmFuc3BvcnRcbiAgICAgKi9cbiAgICBzdGF0aWMgZm9yY2VEaXNhbGxvdygpIHtcbiAgICAgICAgQnJvd3NlclBvbGxDb25uZWN0aW9uLmZvcmNlRGlzYWxsb3dfID0gdHJ1ZTtcbiAgICB9XG4gICAgLy8gU3RhdGljIG1ldGhvZCwgdXNlIHN0cmluZyBsaXRlcmFsIHNvIGl0IGNhbiBiZSBhY2Nlc3NlZCBpbiBhIGdlbmVyaWMgd2F5XG4gICAgc3RhdGljIGlzQXZhaWxhYmxlKCkge1xuICAgICAgICBpZiAoaXNOb2RlU2RrKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChCcm93c2VyUG9sbENvbm5lY3Rpb24uZm9yY2VBbGxvd18pIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gTk9URTogSW4gUmVhY3QtTmF0aXZlIHRoZXJlJ3Mgbm9ybWFsbHkgbm8gJ2RvY3VtZW50JywgYnV0IGlmIHlvdSBkZWJ1ZyBhIFJlYWN0LU5hdGl2ZSBhcHAgaW5cbiAgICAgICAgICAgIC8vIHRoZSBDaHJvbWUgZGVidWdnZXIsICdkb2N1bWVudCcgaXMgZGVmaW5lZCwgYnV0IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgaXMgbnVsbCAoMjAxNS8wNi8wOCkuXG4gICAgICAgICAgICByZXR1cm4gKCFCcm93c2VyUG9sbENvbm5lY3Rpb24uZm9yY2VEaXNhbGxvd18gJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCAhPSBudWxsICYmXG4gICAgICAgICAgICAgICAgIWlzQ2hyb21lRXh0ZW5zaW9uQ29udGVudFNjcmlwdCgpICYmXG4gICAgICAgICAgICAgICAgIWlzV2luZG93c1N0b3JlQXBwKCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5vLW9wIGZvciBwb2xsaW5nXG4gICAgICovXG4gICAgbWFya0Nvbm5lY3Rpb25IZWFsdGh5KCkgeyB9XG4gICAgLyoqXG4gICAgICogU3RvcHMgcG9sbGluZyBhbmQgY2xlYW5zIHVwIHRoZSBpZnJhbWVcbiAgICAgKi9cbiAgICBzaHV0ZG93bl8oKSB7XG4gICAgICAgIHRoaXMuaXNDbG9zZWRfID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMuc2NyaXB0VGFnSG9sZGVyKSB7XG4gICAgICAgICAgICB0aGlzLnNjcmlwdFRhZ0hvbGRlci5jbG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5zY3JpcHRUYWdIb2xkZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIC8vcmVtb3ZlIHRoZSBkaXNjb25uZWN0IGZyYW1lLCB3aGljaCB3aWxsIHRyaWdnZXIgYW4gWEhSIGNhbGwgdG8gdGhlIHNlcnZlciB0byB0ZWxsIGl0IHdlJ3JlIGxlYXZpbmcuXG4gICAgICAgIGlmICh0aGlzLm15RGlzY29ubkZyYW1lKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRoaXMubXlEaXNjb25uRnJhbWUpO1xuICAgICAgICAgICAgdGhpcy5teURpc2Nvbm5GcmFtZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdFRpbWVvdXRUaW1lcl8pIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmNvbm5lY3RUaW1lb3V0VGltZXJfKTtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdFRpbWVvdXRUaW1lcl8gPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIHRoaXMgdHJhbnNwb3J0IGlzIGNsb3NlZFxuICAgICAqL1xuICAgIG9uQ2xvc2VkXygpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzQ2xvc2VkXykge1xuICAgICAgICAgICAgdGhpcy5sb2dfKCdMb25ncG9sbCBpcyBjbG9zaW5nIGl0c2VsZicpO1xuICAgICAgICAgICAgdGhpcy5zaHV0ZG93bl8oKTtcbiAgICAgICAgICAgIGlmICh0aGlzLm9uRGlzY29ubmVjdF8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uRGlzY29ubmVjdF8odGhpcy5ldmVyQ29ubmVjdGVkXyk7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkRpc2Nvbm5lY3RfID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBFeHRlcm5hbC1mYWNpbmcgY2xvc2UgaGFuZGxlci4gUmVhbFRpbWUgaGFzIHJlcXVlc3RlZCB3ZSBzaHV0IGRvd24uIEtpbGwgb3VyIGNvbm5lY3Rpb24gYW5kIHRlbGwgdGhlIHNlcnZlclxuICAgICAqIHRoYXQgd2UndmUgbGVmdC5cbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzQ2xvc2VkXykge1xuICAgICAgICAgICAgdGhpcy5sb2dfKCdMb25ncG9sbCBpcyBiZWluZyBjbG9zZWQuJyk7XG4gICAgICAgICAgICB0aGlzLnNodXRkb3duXygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgdGhlIEpTT04gb2JqZWN0IGRvd24gdG8gdGhlIHNlcnZlci4gSXQgd2lsbCBuZWVkIHRvIGJlIHN0cmluZ2lmaWVkLCBiYXNlNjQgZW5jb2RlZCwgYW5kIHRoZW5cbiAgICAgKiBicm9rZW4gaW50byBjaHVua3MgKHNpbmNlIFVSTHMgaGF2ZSBhIHNtYWxsIG1heGltdW0gbGVuZ3RoKS5cbiAgICAgKiBAcGFyYW0gZGF0YSAtIFRoZSBKU09OIGRhdGEgdG8gdHJhbnNtaXQuXG4gICAgICovXG4gICAgc2VuZChkYXRhKSB7XG4gICAgICAgIGNvbnN0IGRhdGFTdHIgPSBzdHJpbmdpZnkoZGF0YSk7XG4gICAgICAgIHRoaXMuYnl0ZXNTZW50ICs9IGRhdGFTdHIubGVuZ3RoO1xuICAgICAgICB0aGlzLnN0YXRzXy5pbmNyZW1lbnRDb3VudGVyKCdieXRlc19zZW50JywgZGF0YVN0ci5sZW5ndGgpO1xuICAgICAgICAvL2ZpcnN0LCBsZXRzIGdldCB0aGUgYmFzZTY0LWVuY29kZWQgZGF0YVxuICAgICAgICBjb25zdCBiYXNlNjRkYXRhID0gYmFzZTY0RW5jb2RlKGRhdGFTdHIpO1xuICAgICAgICAvL1dlIGNhbiBvbmx5IGZpdCBhIGNlcnRhaW4gYW1vdW50IGluIGVhY2ggVVJMLCBzbyB3ZSBuZWVkIHRvIHNwbGl0IHRoaXMgcmVxdWVzdFxuICAgICAgICAvL3VwIGludG8gbXVsdGlwbGUgcGllY2VzIGlmIGl0IGRvZXNuJ3QgZml0IGluIG9uZSByZXF1ZXN0LlxuICAgICAgICBjb25zdCBkYXRhU2VncyA9IHNwbGl0U3RyaW5nQnlTaXplKGJhc2U2NGRhdGEsIE1BWF9QQVlMT0FEX1NJWkUpO1xuICAgICAgICAvL0VucXVldWUgZWFjaCBzZWdtZW50IGZvciB0cmFuc21pc3Npb24uIFdlIGFzc2lnbiBlYWNoIGNodW5rIGEgc2VxdWVudGlhbCBJRCBhbmQgYSB0b3RhbCBudW1iZXJcbiAgICAgICAgLy9vZiBzZWdtZW50cyBzbyB0aGF0IHdlIGNhbiByZWFzc2VtYmxlIHRoZSBwYWNrZXQgb24gdGhlIHNlcnZlci5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhU2Vncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5zY3JpcHRUYWdIb2xkZXIuZW5xdWV1ZVNlZ21lbnQodGhpcy5jdXJTZWdtZW50TnVtLCBkYXRhU2Vncy5sZW5ndGgsIGRhdGFTZWdzW2ldKTtcbiAgICAgICAgICAgIHRoaXMuY3VyU2VnbWVudE51bSsrO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgaXMgaG93IHdlIG5vdGlmeSB0aGUgc2VydmVyIHRoYXQgd2UncmUgbGVhdmluZy5cbiAgICAgKiBXZSBhcmVuJ3QgYWJsZSB0byBzZW5kIHJlcXVlc3RzIHdpdGggREhUTUwgb24gYSB3aW5kb3cgY2xvc2UgZXZlbnQsIGJ1dCB3ZSBjYW5cbiAgICAgKiB0cmlnZ2VyIFhIUiByZXF1ZXN0cyBpbiBzb21lIGJyb3dzZXJzIChldmVyeXRoaW5nIGJ1dCBPcGVyYSBiYXNpY2FsbHkpLlxuICAgICAqL1xuICAgIGFkZERpc2Nvbm5lY3RQaW5nRnJhbWUoaWQsIHB3KSB7XG4gICAgICAgIGlmIChpc05vZGVTZGsoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubXlEaXNjb25uRnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTtcbiAgICAgICAgY29uc3QgdXJsUGFyYW1zID0ge307XG4gICAgICAgIHVybFBhcmFtc1tGSVJFQkFTRV9MT05HUE9MTF9ESVNDT05OX0ZSQU1FX1JFUVVFU1RfUEFSQU1dID0gJ3QnO1xuICAgICAgICB1cmxQYXJhbXNbRklSRUJBU0VfTE9OR1BPTExfSURfUEFSQU1dID0gaWQ7XG4gICAgICAgIHVybFBhcmFtc1tGSVJFQkFTRV9MT05HUE9MTF9QV19QQVJBTV0gPSBwdztcbiAgICAgICAgdGhpcy5teURpc2Nvbm5GcmFtZS5zcmMgPSB0aGlzLnVybEZuKHVybFBhcmFtcyk7XG4gICAgICAgIHRoaXMubXlEaXNjb25uRnJhbWUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLm15RGlzY29ubkZyYW1lKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXNlZCB0byB0cmFjayB0aGUgYnl0ZXMgcmVjZWl2ZWQgYnkgdGhpcyBjbGllbnRcbiAgICAgKi9cbiAgICBpbmNyZW1lbnRJbmNvbWluZ0J5dGVzXyhhcmdzKSB7XG4gICAgICAgIC8vIFRPRE86IFRoaXMgaXMgYW4gYW5ub3lpbmcgcGVyZiBoaXQganVzdCB0byB0cmFjayB0aGUgbnVtYmVyIG9mIGluY29taW5nIGJ5dGVzLiAgTWF5YmUgaXQgc2hvdWxkIGJlIG9wdC1pbi5cbiAgICAgICAgY29uc3QgYnl0ZXNSZWNlaXZlZCA9IHN0cmluZ2lmeShhcmdzKS5sZW5ndGg7XG4gICAgICAgIHRoaXMuYnl0ZXNSZWNlaXZlZCArPSBieXRlc1JlY2VpdmVkO1xuICAgICAgICB0aGlzLnN0YXRzXy5pbmNyZW1lbnRDb3VudGVyKCdieXRlc19yZWNlaXZlZCcsIGJ5dGVzUmVjZWl2ZWQpO1xuICAgIH1cbn1cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAqIEEgd3JhcHBlciBhcm91bmQgYW4gaWZyYW1lIHRoYXQgaXMgdXNlZCBhcyBhIGxvbmctcG9sbGluZyBzY3JpcHQgaG9sZGVyLlxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbmNsYXNzIEZpcmViYXNlSUZyYW1lU2NyaXB0SG9sZGVyIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gY29tbWFuZENCIC0gVGhlIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCB3aGVuIGNvbnRyb2wgY29tbWFuZHMgYXJlIHJlY2VpdmVkIGZyb20gdGhlIHNlcnZlci5cbiAgICAgKiBAcGFyYW0gb25NZXNzYWdlQ0IgLSBUaGUgY2FsbGJhY2sgdG8gYmUgdHJpZ2dlcmVkIHdoZW4gcmVzcG9uc2VzIGFycml2ZSBmcm9tIHRoZSBzZXJ2ZXIuXG4gICAgICogQHBhcmFtIG9uRGlzY29ubmVjdCAtIFRoZSBjYWxsYmFjayB0byBiZSB0cmlnZ2VyZWQgd2hlbiB0aGlzIHRhZyBob2xkZXIgaXMgY2xvc2VkXG4gICAgICogQHBhcmFtIHVybEZuIC0gQSBmdW5jdGlvbiB0aGF0IHByb3ZpZGVzIHRoZSBVUkwgb2YgdGhlIGVuZHBvaW50IHRvIHNlbmQgZGF0YSB0by5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihjb21tYW5kQ0IsIG9uTWVzc2FnZUNCLCBvbkRpc2Nvbm5lY3QsIHVybEZuKSB7XG4gICAgICAgIHRoaXMub25EaXNjb25uZWN0ID0gb25EaXNjb25uZWN0O1xuICAgICAgICB0aGlzLnVybEZuID0gdXJsRm47XG4gICAgICAgIC8vV2UgbWFpbnRhaW4gYSBjb3VudCBvZiBhbGwgb2YgdGhlIG91dHN0YW5kaW5nIHJlcXVlc3RzLCBiZWNhdXNlIGlmIHdlIGhhdmUgdG9vIG1hbnkgYWN0aXZlIGF0IG9uY2UgaXQgY2FuIGNhdXNlXG4gICAgICAgIC8vcHJvYmxlbXMgaW4gc29tZSBicm93c2Vycy5cbiAgICAgICAgdGhpcy5vdXRzdGFuZGluZ1JlcXVlc3RzID0gbmV3IFNldCgpO1xuICAgICAgICAvL0EgcXVldWUgb2YgdGhlIHBlbmRpbmcgc2VnbWVudHMgd2FpdGluZyBmb3IgdHJhbnNtaXNzaW9uIHRvIHRoZSBzZXJ2ZXIuXG4gICAgICAgIHRoaXMucGVuZGluZ1NlZ3MgPSBbXTtcbiAgICAgICAgLy9BIHNlcmlhbCBudW1iZXIuIFdlIHVzZSB0aGlzIGZvciB0d28gdGhpbmdzOlxuICAgICAgICAvLyAxKSBBIHdheSB0byBlbnN1cmUgdGhlIGJyb3dzZXIgZG9lc24ndCBjYWNoZSByZXNwb25zZXMgdG8gcG9sbHNcbiAgICAgICAgLy8gMikgQSB3YXkgdG8gbWFrZSB0aGUgc2VydmVyIGF3YXJlIHdoZW4gbG9uZy1wb2xscyBhcnJpdmUgaW4gYSBkaWZmZXJlbnQgb3JkZXIgdGhhbiB3ZSBzdGFydGVkIHRoZW0uIFRoZVxuICAgICAgICAvLyAgICBzZXJ2ZXIgbmVlZHMgdG8gcmVsZWFzZSBib3RoIHBvbGxzIGluIHRoaXMgY2FzZSBvciBpdCB3aWxsIGNhdXNlIHByb2JsZW1zIGluIE9wZXJhIHNpbmNlIE9wZXJhIGNhbiBvbmx5IGV4ZWN1dGVcbiAgICAgICAgLy8gICAgSlNPTlAgY29kZSBpbiB0aGUgb3JkZXIgaXQgd2FzIGFkZGVkIHRvIHRoZSBpZnJhbWUuXG4gICAgICAgIHRoaXMuY3VycmVudFNlcmlhbCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwMDAwMCk7XG4gICAgICAgIC8vIFRoaXMgZ2V0cyBzZXQgdG8gZmFsc2Ugd2hlbiB3ZSdyZSBcImNsb3NpbmcgZG93blwiIHRoZSBjb25uZWN0aW9uIChlLmcuIHdlJ3JlIHN3aXRjaGluZyB0cmFuc3BvcnRzIGJ1dCB0aGVyZSdzIHN0aWxsXG4gICAgICAgIC8vIGluY29taW5nIGRhdGEgZnJvbSB0aGUgc2VydmVyIHRoYXQgd2UncmUgd2FpdGluZyBmb3IpLlxuICAgICAgICB0aGlzLnNlbmROZXdQb2xscyA9IHRydWU7XG4gICAgICAgIGlmICghaXNOb2RlU2RrKCkpIHtcbiAgICAgICAgICAgIC8vRWFjaCBzY3JpcHQgaG9sZGVyIHJlZ2lzdGVycyBhIGNvdXBsZSBvZiB1bmlxdWVseSBuYW1lZCBjYWxsYmFja3Mgd2l0aCB0aGUgd2luZG93LiBUaGVzZSBhcmUgY2FsbGVkIGZyb20gdGhlXG4gICAgICAgICAgICAvL2lmcmFtZXMgd2hlcmUgd2UgcHV0IHRoZSBsb25nLXBvbGxpbmcgc2NyaXB0IHRhZ3MuIFdlIGhhdmUgdHdvIGNhbGxiYWNrczpcbiAgICAgICAgICAgIC8vICAgMSkgQ29tbWFuZCBDYWxsYmFjayAtIFRyaWdnZXJlZCBmb3IgY29udHJvbCBpc3N1ZXMsIGxpa2Ugc3RhcnRpbmcgYSBjb25uZWN0aW9uLlxuICAgICAgICAgICAgLy8gICAyKSBNZXNzYWdlIENhbGxiYWNrIC0gVHJpZ2dlcmVkIHdoZW4gbmV3IGRhdGEgYXJyaXZlcy5cbiAgICAgICAgICAgIHRoaXMudW5pcXVlQ2FsbGJhY2tJZGVudGlmaWVyID0gTFVJREdlbmVyYXRvcigpO1xuICAgICAgICAgICAgd2luZG93W0ZJUkVCQVNFX0xPTkdQT0xMX0NPTU1BTkRfQ0JfTkFNRSArIHRoaXMudW5pcXVlQ2FsbGJhY2tJZGVudGlmaWVyXSA9IGNvbW1hbmRDQjtcbiAgICAgICAgICAgIHdpbmRvd1tGSVJFQkFTRV9MT05HUE9MTF9EQVRBX0NCX05BTUUgKyB0aGlzLnVuaXF1ZUNhbGxiYWNrSWRlbnRpZmllcl0gPVxuICAgICAgICAgICAgICAgIG9uTWVzc2FnZUNCO1xuICAgICAgICAgICAgLy9DcmVhdGUgYW4gaWZyYW1lIGZvciB1cyB0byBhZGQgc2NyaXB0IHRhZ3MgdG8uXG4gICAgICAgICAgICB0aGlzLm15SUZyYW1lID0gRmlyZWJhc2VJRnJhbWVTY3JpcHRIb2xkZXIuY3JlYXRlSUZyYW1lXygpO1xuICAgICAgICAgICAgLy8gU2V0IHRoZSBpZnJhbWUncyBjb250ZW50cy5cbiAgICAgICAgICAgIGxldCBzY3JpcHQgPSAnJztcbiAgICAgICAgICAgIC8vIGlmIHdlIHNldCBhIGphdmFzY3JpcHQgdXJsLCBpdCdzIElFIGFuZCB3ZSBuZWVkIHRvIHNldCB0aGUgZG9jdW1lbnQgZG9tYWluLiBUaGUgamF2YXNjcmlwdCB1cmwgaXMgc3VmZmljaWVudFxuICAgICAgICAgICAgLy8gZm9yIGllOSwgYnV0IGllOCBuZWVkcyB0byBkbyBpdCBhZ2FpbiBpbiB0aGUgZG9jdW1lbnQgaXRzZWxmLlxuICAgICAgICAgICAgaWYgKHRoaXMubXlJRnJhbWUuc3JjICYmXG4gICAgICAgICAgICAgICAgdGhpcy5teUlGcmFtZS5zcmMuc3Vic3RyKDAsICdqYXZhc2NyaXB0OicubGVuZ3RoKSA9PT0gJ2phdmFzY3JpcHQ6Jykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnREb21haW4gPSBkb2N1bWVudC5kb21haW47XG4gICAgICAgICAgICAgICAgc2NyaXB0ID0gJzxzY3JpcHQ+ZG9jdW1lbnQuZG9tYWluPVwiJyArIGN1cnJlbnREb21haW4gKyAnXCI7PC9zY3JpcHQ+JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGlmcmFtZUNvbnRlbnRzID0gJzxodG1sPjxib2R5PicgKyBzY3JpcHQgKyAnPC9ib2R5PjwvaHRtbD4nO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLm15SUZyYW1lLmRvYy5vcGVuKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5teUlGcmFtZS5kb2Mud3JpdGUoaWZyYW1lQ29udGVudHMpO1xuICAgICAgICAgICAgICAgIHRoaXMubXlJRnJhbWUuZG9jLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGxvZygnZnJhbWUgd3JpdGluZyBleGNlcHRpb24nKTtcbiAgICAgICAgICAgICAgICBpZiAoZS5zdGFjaykge1xuICAgICAgICAgICAgICAgICAgICBsb2coZS5zdGFjayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxvZyhlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY29tbWFuZENCID0gY29tbWFuZENCO1xuICAgICAgICAgICAgdGhpcy5vbk1lc3NhZ2VDQiA9IG9uTWVzc2FnZUNCO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVhY2ggYnJvd3NlciBoYXMgaXRzIG93biBmdW5ueSB3YXkgdG8gaGFuZGxlIGlmcmFtZXMuIEhlcmUgd2UgbXVzaCB0aGVtIGFsbCB0b2dldGhlciBpbnRvIG9uZSBvYmplY3QgdGhhdCBJIGNhblxuICAgICAqIGFjdHVhbGx5IHVzZS5cbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlSUZyYW1lXygpIHtcbiAgICAgICAgY29uc3QgaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7XG4gICAgICAgIGlmcmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAvLyBUaGlzIGlzIG5lY2Vzc2FyeSBpbiBvcmRlciB0byBpbml0aWFsaXplIHRoZSBkb2N1bWVudCBpbnNpZGUgdGhlIGlmcmFtZVxuICAgICAgICBpZiAoZG9jdW1lbnQuYm9keSkge1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpZnJhbWUpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBJZiBkb2N1bWVudC5kb21haW4gaGFzIGJlZW4gbW9kaWZpZWQgaW4gSUUsIHRoaXMgd2lsbCB0aHJvdyBhbiBlcnJvciwgYW5kIHdlIG5lZWQgdG8gc2V0IHRoZVxuICAgICAgICAgICAgICAgIC8vIGRvbWFpbiBvZiB0aGUgaWZyYW1lJ3MgZG9jdW1lbnQgbWFudWFsbHkuIFdlIGNhbiBkbyB0aGlzIHZpYSBhIGphdmFzY3JpcHQ6IHVybCBhcyB0aGUgc3JjIGF0dHJpYnV0ZVxuICAgICAgICAgICAgICAgIC8vIEFsc28gbm90ZSB0aGF0IHdlIG11c3QgZG8gdGhpcyAqYWZ0ZXIqIHRoZSBpZnJhbWUgaGFzIGJlZW4gYXBwZW5kZWQgdG8gdGhlIHBhZ2UuIE90aGVyd2lzZSBpdCBkb2Vzbid0IHdvcmsuXG4gICAgICAgICAgICAgICAgY29uc3QgYSA9IGlmcmFtZS5jb250ZW50V2luZG93LmRvY3VtZW50O1xuICAgICAgICAgICAgICAgIGlmICghYSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBBcG9sb2dpZXMgZm9yIHRoZSBsb2ctc3BhbSwgSSBuZWVkIHRvIGRvIHNvbWV0aGluZyB0byBrZWVwIGNsb3N1cmUgZnJvbSBvcHRpbWl6aW5nIG91dCB0aGUgYXNzaWdubWVudCBhYm92ZS5cbiAgICAgICAgICAgICAgICAgICAgbG9nKCdObyBJRSBkb21haW4gc2V0dGluZyByZXF1aXJlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZG9tYWluID0gZG9jdW1lbnQuZG9tYWluO1xuICAgICAgICAgICAgICAgIGlmcmFtZS5zcmMgPVxuICAgICAgICAgICAgICAgICAgICBcImphdmFzY3JpcHQ6dm9pZCgoZnVuY3Rpb24oKXtkb2N1bWVudC5vcGVuKCk7ZG9jdW1lbnQuZG9tYWluPSdcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBkb21haW4gK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCInO2RvY3VtZW50LmNsb3NlKCk7fSkoKSlcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIExvbmdQb2xsQ29ubmVjdGlvbiBhdHRlbXB0cyB0byBkZWxheSBpbml0aWFsaXphdGlvbiB1bnRpbCB0aGUgZG9jdW1lbnQgaXMgcmVhZHksIHNvIGhvcGVmdWxseSB0aGlzXG4gICAgICAgICAgICAvLyBuZXZlciBnZXRzIGhpdC5cbiAgICAgICAgICAgIHRocm93ICdEb2N1bWVudCBib2R5IGhhcyBub3QgaW5pdGlhbGl6ZWQuIFdhaXQgdG8gaW5pdGlhbGl6ZSBGaXJlYmFzZSB1bnRpbCBhZnRlciB0aGUgZG9jdW1lbnQgaXMgcmVhZHkuJztcbiAgICAgICAgfVxuICAgICAgICAvLyBHZXQgdGhlIGRvY3VtZW50IG9mIHRoZSBpZnJhbWUgaW4gYSBicm93c2VyLXNwZWNpZmljIHdheS5cbiAgICAgICAgaWYgKGlmcmFtZS5jb250ZW50RG9jdW1lbnQpIHtcbiAgICAgICAgICAgIGlmcmFtZS5kb2MgPSBpZnJhbWUuY29udGVudERvY3VtZW50OyAvLyBGaXJlZm94LCBPcGVyYSwgU2FmYXJpXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaWZyYW1lLmNvbnRlbnRXaW5kb3cpIHtcbiAgICAgICAgICAgIGlmcmFtZS5kb2MgPSBpZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudDsgLy8gSW50ZXJuZXQgRXhwbG9yZXJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaWZyYW1lLmRvY3VtZW50KSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgaWZyYW1lLmRvYyA9IGlmcmFtZS5kb2N1bWVudDsgLy9vdGhlcnM/XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlmcmFtZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FuY2VsIGFsbCBvdXRzdGFuZGluZyBxdWVyaWVzIGFuZCByZW1vdmUgdGhlIGZyYW1lLlxuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICAvL01hcmsgdGhpcyBpZnJhbWUgYXMgZGVhZCwgc28gbm8gbmV3IHJlcXVlc3RzIGFyZSBzZW50LlxuICAgICAgICB0aGlzLmFsaXZlID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLm15SUZyYW1lKSB7XG4gICAgICAgICAgICAvL1dlIGhhdmUgdG8gYWN0dWFsbHkgcmVtb3ZlIGFsbCBvZiB0aGUgaHRtbCBpbnNpZGUgdGhpcyBpZnJhbWUgYmVmb3JlIHJlbW92aW5nIGl0IGZyb20gdGhlXG4gICAgICAgICAgICAvL3dpbmRvdywgb3IgSUUgd2lsbCBjb250aW51ZSBsb2FkaW5nIGFuZCBleGVjdXRpbmcgdGhlIHNjcmlwdCB0YWdzIHdlJ3ZlIGFscmVhZHkgYWRkZWQsIHdoaWNoXG4gICAgICAgICAgICAvL2NhbiBsZWFkIHRvIHNvbWUgZXJyb3JzIGJlaW5nIHRocm93bi4gU2V0dGluZyB0ZXh0Q29udGVudCBzZWVtcyB0byBiZSB0aGUgc2FmZXN0IHdheSB0byBkbyB0aGlzLlxuICAgICAgICAgICAgdGhpcy5teUlGcmFtZS5kb2MuYm9keS50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubXlJRnJhbWUgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0aGlzLm15SUZyYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5teUlGcmFtZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgTWF0aC5mbG9vcigwKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUHJvdGVjdCBmcm9tIGJlaW5nIGNhbGxlZCByZWN1cnNpdmVseS5cbiAgICAgICAgY29uc3Qgb25EaXNjb25uZWN0ID0gdGhpcy5vbkRpc2Nvbm5lY3Q7XG4gICAgICAgIGlmIChvbkRpc2Nvbm5lY3QpIHtcbiAgICAgICAgICAgIHRoaXMub25EaXNjb25uZWN0ID0gbnVsbDtcbiAgICAgICAgICAgIG9uRGlzY29ubmVjdCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFjdHVhbGx5IHN0YXJ0IHRoZSBsb25nLXBvbGxpbmcgc2Vzc2lvbiBieSBhZGRpbmcgdGhlIGZpcnN0IHNjcmlwdCB0YWcocykgdG8gdGhlIGlmcmFtZS5cbiAgICAgKiBAcGFyYW0gaWQgLSBUaGUgSUQgb2YgdGhpcyBjb25uZWN0aW9uXG4gICAgICogQHBhcmFtIHB3IC0gVGhlIHBhc3N3b3JkIGZvciB0aGlzIGNvbm5lY3Rpb25cbiAgICAgKi9cbiAgICBzdGFydExvbmdQb2xsKGlkLCBwdykge1xuICAgICAgICB0aGlzLm15SUQgPSBpZDtcbiAgICAgICAgdGhpcy5teVBXID0gcHc7XG4gICAgICAgIHRoaXMuYWxpdmUgPSB0cnVlO1xuICAgICAgICAvL3NlbmQgdGhlIGluaXRpYWwgcmVxdWVzdC4gSWYgdGhlcmUgYXJlIHJlcXVlc3RzIHF1ZXVlZCwgbWFrZSBzdXJlIHRoYXQgd2UgdHJhbnNtaXQgYXMgbWFueSBhcyB3ZSBhcmUgY3VycmVudGx5IGFibGUgdG8uXG4gICAgICAgIHdoaWxlICh0aGlzLm5ld1JlcXVlc3RfKCkpIHsgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIGlzIGNhbGxlZCBhbnkgdGltZSBzb21lb25lIG1pZ2h0IHdhbnQgYSBzY3JpcHQgdGFnIHRvIGJlIGFkZGVkLiBJdCBhZGRzIGEgc2NyaXB0IHRhZyB3aGVuIHRoZXJlIGFyZW4ndFxuICAgICAqIHRvbyBtYW55IG91dHN0YW5kaW5nIHJlcXVlc3RzIGFuZCB3ZSBhcmUgc3RpbGwgYWxpdmUuXG4gICAgICpcbiAgICAgKiBJZiB0aGVyZSBhcmUgb3V0c3RhbmRpbmcgcGFja2V0IHNlZ21lbnRzIHRvIHNlbmQsIGl0IHNlbmRzIG9uZS4gSWYgdGhlcmUgYXJlbid0LCBpdCBzZW5kcyBhIGxvbmctcG9sbCBhbnl3YXlzIGlmXG4gICAgICogbmVlZGVkLlxuICAgICAqL1xuICAgIG5ld1JlcXVlc3RfKCkge1xuICAgICAgICAvLyBXZSBrZWVwIG9uZSBvdXRzdGFuZGluZyByZXF1ZXN0IG9wZW4gYWxsIHRoZSB0aW1lIHRvIHJlY2VpdmUgZGF0YSwgYnV0IGlmIHdlIG5lZWQgdG8gc2VuZCBkYXRhXG4gICAgICAgIC8vIChwZW5kaW5nU2Vncy5sZW5ndGggPiAwKSB0aGVuIHdlIGNyZWF0ZSBhIG5ldyByZXF1ZXN0IHRvIHNlbmQgdGhlIGRhdGEuICBUaGUgc2VydmVyIHdpbGwgYXV0b21hdGljYWxseVxuICAgICAgICAvLyBjbG9zZSB0aGUgb2xkIHJlcXVlc3QuXG4gICAgICAgIGlmICh0aGlzLmFsaXZlICYmXG4gICAgICAgICAgICB0aGlzLnNlbmROZXdQb2xscyAmJlxuICAgICAgICAgICAgdGhpcy5vdXRzdGFuZGluZ1JlcXVlc3RzLnNpemUgPCAodGhpcy5wZW5kaW5nU2Vncy5sZW5ndGggPiAwID8gMiA6IDEpKSB7XG4gICAgICAgICAgICAvL2NvbnN0cnVjdCBvdXIgdXJsXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRTZXJpYWwrKztcbiAgICAgICAgICAgIGNvbnN0IHVybFBhcmFtcyA9IHt9O1xuICAgICAgICAgICAgdXJsUGFyYW1zW0ZJUkVCQVNFX0xPTkdQT0xMX0lEX1BBUkFNXSA9IHRoaXMubXlJRDtcbiAgICAgICAgICAgIHVybFBhcmFtc1tGSVJFQkFTRV9MT05HUE9MTF9QV19QQVJBTV0gPSB0aGlzLm15UFc7XG4gICAgICAgICAgICB1cmxQYXJhbXNbRklSRUJBU0VfTE9OR1BPTExfU0VSSUFMX1BBUkFNXSA9IHRoaXMuY3VycmVudFNlcmlhbDtcbiAgICAgICAgICAgIGxldCB0aGVVUkwgPSB0aGlzLnVybEZuKHVybFBhcmFtcyk7XG4gICAgICAgICAgICAvL05vdyBhZGQgYXMgbXVjaCBkYXRhIGFzIHdlIGNhbi5cbiAgICAgICAgICAgIGxldCBjdXJEYXRhU3RyaW5nID0gJyc7XG4gICAgICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgICAgICB3aGlsZSAodGhpcy5wZW5kaW5nU2Vncy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgLy9maXJzdCwgbGV0cyBzZWUgaWYgdGhlIG5leHQgc2VnbWVudCB3aWxsIGZpdC5cbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0U2VnID0gdGhpcy5wZW5kaW5nU2Vnc1swXTtcbiAgICAgICAgICAgICAgICBpZiAobmV4dFNlZy5kLmxlbmd0aCArXG4gICAgICAgICAgICAgICAgICAgIFNFR19IRUFERVJfU0laRSArXG4gICAgICAgICAgICAgICAgICAgIGN1ckRhdGFTdHJpbmcubGVuZ3RoIDw9XG4gICAgICAgICAgICAgICAgICAgIE1BWF9VUkxfREFUQV9TSVpFKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vZ3JlYXQsIHRoZSBzZWdtZW50IHdpbGwgZml0LiBMZXRzIGFwcGVuZCBpdC5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGhlU2VnID0gdGhpcy5wZW5kaW5nU2Vncy5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICBjdXJEYXRhU3RyaW5nID1cbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckRhdGFTdHJpbmcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICcmJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRklSRUJBU0VfTE9OR1BPTExfU0VHTUVOVF9OVU1fUEFSQU0gK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc9JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlU2VnLnNlZyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJyYnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBGSVJFQkFTRV9MT05HUE9MTF9TRUdNRU5UU19JTl9QQUNLRVQgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc9JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlU2VnLnRzICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZJUkVCQVNFX0xPTkdQT0xMX0RBVEFfUEFSQU0gK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc9JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlU2VnLmQ7XG4gICAgICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoZVVSTCA9IHRoZVVSTCArIGN1ckRhdGFTdHJpbmc7XG4gICAgICAgICAgICB0aGlzLmFkZExvbmdQb2xsVGFnXyh0aGVVUkwsIHRoaXMuY3VycmVudFNlcmlhbCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBRdWV1ZSBhIHBhY2tldCBmb3IgdHJhbnNtaXNzaW9uIHRvIHRoZSBzZXJ2ZXIuXG4gICAgICogQHBhcmFtIHNlZ251bSAtIEEgc2VxdWVudGlhbCBpZCBmb3IgdGhpcyBwYWNrZXQgc2VnbWVudCB1c2VkIGZvciByZWFzc2VtYmx5XG4gICAgICogQHBhcmFtIHRvdGFsc2VncyAtIFRoZSB0b3RhbCBudW1iZXIgb2Ygc2VnbWVudHMgaW4gdGhpcyBwYWNrZXRcbiAgICAgKiBAcGFyYW0gZGF0YSAtIFRoZSBkYXRhIGZvciB0aGlzIHNlZ21lbnQuXG4gICAgICovXG4gICAgZW5xdWV1ZVNlZ21lbnQoc2VnbnVtLCB0b3RhbHNlZ3MsIGRhdGEpIHtcbiAgICAgICAgLy9hZGQgdGhpcyB0byB0aGUgcXVldWUgb2Ygc2VnbWVudHMgdG8gc2VuZC5cbiAgICAgICAgdGhpcy5wZW5kaW5nU2Vncy5wdXNoKHsgc2VnOiBzZWdudW0sIHRzOiB0b3RhbHNlZ3MsIGQ6IGRhdGEgfSk7XG4gICAgICAgIC8vc2VuZCB0aGUgZGF0YSBpbW1lZGlhdGVseSBpZiB0aGVyZSBpc24ndCBhbHJlYWR5IGRhdGEgYmVpbmcgdHJhbnNtaXR0ZWQsIHVubGVzc1xuICAgICAgICAvL3N0YXJ0TG9uZ1BvbGwgaGFzbid0IGJlZW4gY2FsbGVkIHlldC5cbiAgICAgICAgaWYgKHRoaXMuYWxpdmUpIHtcbiAgICAgICAgICAgIHRoaXMubmV3UmVxdWVzdF8oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGQgYSBzY3JpcHQgdGFnIGZvciBhIHJlZ3VsYXIgbG9uZy1wb2xsIHJlcXVlc3QuXG4gICAgICogQHBhcmFtIHVybCAtIFRoZSBVUkwgb2YgdGhlIHNjcmlwdCB0YWcuXG4gICAgICogQHBhcmFtIHNlcmlhbCAtIFRoZSBzZXJpYWwgbnVtYmVyIG9mIHRoZSByZXF1ZXN0LlxuICAgICAqL1xuICAgIGFkZExvbmdQb2xsVGFnXyh1cmwsIHNlcmlhbCkge1xuICAgICAgICAvL3JlbWVtYmVyIHRoYXQgd2Ugc2VudCB0aGlzIHJlcXVlc3QuXG4gICAgICAgIHRoaXMub3V0c3RhbmRpbmdSZXF1ZXN0cy5hZGQoc2VyaWFsKTtcbiAgICAgICAgY29uc3QgZG9OZXdSZXF1ZXN0ID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5vdXRzdGFuZGluZ1JlcXVlc3RzLmRlbGV0ZShzZXJpYWwpO1xuICAgICAgICAgICAgdGhpcy5uZXdSZXF1ZXN0XygpO1xuICAgICAgICB9O1xuICAgICAgICAvLyBJZiB0aGlzIHJlcXVlc3QgZG9lc24ndCByZXR1cm4gb24gaXRzIG93biBhY2NvcmQgKGJ5IHRoZSBzZXJ2ZXIgc2VuZGluZyB1cyBzb21lIGRhdGEpLCB3ZSdsbFxuICAgICAgICAvLyBjcmVhdGUgYSBuZXcgb25lIGFmdGVyIHRoZSBLRUVQQUxJVkUgaW50ZXJ2YWwgdG8gbWFrZSBzdXJlIHdlIGFsd2F5cyBrZWVwIGEgZnJlc2ggcmVxdWVzdCBvcGVuLlxuICAgICAgICBjb25zdCBrZWVwYWxpdmVUaW1lb3V0ID0gc2V0VGltZW91dChkb05ld1JlcXVlc3QsIE1hdGguZmxvb3IoS0VFUEFMSVZFX1JFUVVFU1RfSU5URVJWQUwpKTtcbiAgICAgICAgY29uc3QgcmVhZHlTdGF0ZUNCID0gKCkgPT4ge1xuICAgICAgICAgICAgLy8gUmVxdWVzdCBjb21wbGV0ZWQuICBDYW5jZWwgdGhlIGtlZXBhbGl2ZS5cbiAgICAgICAgICAgIGNsZWFyVGltZW91dChrZWVwYWxpdmVUaW1lb3V0KTtcbiAgICAgICAgICAgIC8vIFRyaWdnZXIgYSBuZXcgcmVxdWVzdCBzbyB3ZSBjYW4gY29udGludWUgcmVjZWl2aW5nIGRhdGEuXG4gICAgICAgICAgICBkb05ld1JlcXVlc3QoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5hZGRUYWcodXJsLCByZWFkeVN0YXRlQ0IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGQgYW4gYXJiaXRyYXJ5IHNjcmlwdCB0YWcgdG8gdGhlIGlmcmFtZS5cbiAgICAgKiBAcGFyYW0gdXJsIC0gVGhlIFVSTCBmb3IgdGhlIHNjcmlwdCB0YWcgc291cmNlLlxuICAgICAqIEBwYXJhbSBsb2FkQ0IgLSBBIGNhbGxiYWNrIHRvIGJlIHRyaWdnZXJlZCBvbmNlIHRoZSBzY3JpcHQgaGFzIGxvYWRlZC5cbiAgICAgKi9cbiAgICBhZGRUYWcodXJsLCBsb2FkQ0IpIHtcbiAgICAgICAgaWYgKGlzTm9kZVNkaygpKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgdGhpcy5kb05vZGVMb25nUG9sbCh1cmwsIGxvYWRDQik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiB3ZSdyZSBhbHJlYWR5IGNsb3NlZCwgZG9uJ3QgYWRkIHRoaXMgcG9sbFxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc2VuZE5ld1BvbGxzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3U2NyaXB0ID0gdGhpcy5teUlGcmFtZS5kb2MuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgICAgICAgICAgICAgICAgIG5ld1NjcmlwdC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7XG4gICAgICAgICAgICAgICAgICAgIG5ld1NjcmlwdC5hc3luYyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIG5ld1NjcmlwdC5zcmMgPSB1cmw7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgIG5ld1NjcmlwdC5vbmxvYWQgPSBuZXdTY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID1cbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJzdGF0ZSA9IG5ld1NjcmlwdC5yZWFkeVN0YXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcnN0YXRlIHx8IHJzdGF0ZSA9PT0gJ2xvYWRlZCcgfHwgcnN0YXRlID09PSAnY29tcGxldGUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1NjcmlwdC5vbmxvYWQgPSBuZXdTY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1NjcmlwdC5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTY3JpcHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChuZXdTY3JpcHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRDQigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIG5ld1NjcmlwdC5vbmVycm9yID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nKCdMb25nLXBvbGwgc2NyaXB0IGZhaWxlZCB0byBsb2FkOiAnICsgdXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VuZE5ld1BvbGxzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubXlJRnJhbWUuZG9jLmJvZHkuYXBwZW5kQ2hpbGQobmV3U2NyaXB0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogd2Ugc2hvdWxkIG1ha2UgdGhpcyBlcnJvciB2aXNpYmxlIHNvbWVob3dcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBNYXRoLmZsb29yKDEpKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNvbnN0IFdFQlNPQ0tFVF9NQVhfRlJBTUVfU0laRSA9IDE2Mzg0O1xuY29uc3QgV0VCU09DS0VUX0tFRVBBTElWRV9JTlRFUlZBTCA9IDQ1MDAwO1xubGV0IFdlYlNvY2tldEltcGwgPSBudWxsO1xuaWYgKHR5cGVvZiBNb3pXZWJTb2NrZXQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgV2ViU29ja2V0SW1wbCA9IE1veldlYlNvY2tldDtcbn1cbmVsc2UgaWYgKHR5cGVvZiBXZWJTb2NrZXQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgV2ViU29ja2V0SW1wbCA9IFdlYlNvY2tldDtcbn1cbi8qKlxuICogQ3JlYXRlIGEgbmV3IHdlYnNvY2tldCBjb25uZWN0aW9uIHdpdGggdGhlIGdpdmVuIGNhbGxiYWNrcy5cbiAqL1xuY2xhc3MgV2ViU29ja2V0Q29ubmVjdGlvbiB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGNvbm5JZCBpZGVudGlmaWVyIGZvciB0aGlzIHRyYW5zcG9ydFxuICAgICAqIEBwYXJhbSByZXBvSW5mbyBUaGUgaW5mbyBmb3IgdGhlIHdlYnNvY2tldCBlbmRwb2ludC5cbiAgICAgKiBAcGFyYW0gYXBwbGljYXRpb25JZCBUaGUgRmlyZWJhc2UgQXBwIElEIGZvciB0aGlzIHByb2plY3QuXG4gICAgICogQHBhcmFtIGFwcENoZWNrVG9rZW4gVGhlIEFwcCBDaGVjayBUb2tlbiBmb3IgdGhpcyBjbGllbnQuXG4gICAgICogQHBhcmFtIGF1dGhUb2tlbiBUaGUgQXV0aCBUb2tlbiBmb3IgdGhpcyBjbGllbnQuXG4gICAgICogQHBhcmFtIHRyYW5zcG9ydFNlc3Npb25JZCBPcHRpb25hbCB0cmFuc3BvcnRTZXNzaW9uSWQgaWYgdGhpcyBpcyBjb25uZWN0aW5nXG4gICAgICogdG8gYW4gZXhpc3RpbmcgdHJhbnNwb3J0IHNlc3Npb25cbiAgICAgKiBAcGFyYW0gbGFzdFNlc3Npb25JZCBPcHRpb25hbCBsYXN0U2Vzc2lvbklkIGlmIHRoZXJlIHdhcyBhIHByZXZpb3VzXG4gICAgICogY29ubmVjdGlvblxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGNvbm5JZCwgcmVwb0luZm8sIGFwcGxpY2F0aW9uSWQsIGFwcENoZWNrVG9rZW4sIGF1dGhUb2tlbiwgdHJhbnNwb3J0U2Vzc2lvbklkLCBsYXN0U2Vzc2lvbklkKSB7XG4gICAgICAgIHRoaXMuY29ubklkID0gY29ubklkO1xuICAgICAgICB0aGlzLmFwcGxpY2F0aW9uSWQgPSBhcHBsaWNhdGlvbklkO1xuICAgICAgICB0aGlzLmFwcENoZWNrVG9rZW4gPSBhcHBDaGVja1Rva2VuO1xuICAgICAgICB0aGlzLmF1dGhUb2tlbiA9IGF1dGhUb2tlbjtcbiAgICAgICAgdGhpcy5rZWVwYWxpdmVUaW1lciA9IG51bGw7XG4gICAgICAgIHRoaXMuZnJhbWVzID0gbnVsbDtcbiAgICAgICAgdGhpcy50b3RhbEZyYW1lcyA9IDA7XG4gICAgICAgIHRoaXMuYnl0ZXNTZW50ID0gMDtcbiAgICAgICAgdGhpcy5ieXRlc1JlY2VpdmVkID0gMDtcbiAgICAgICAgdGhpcy5sb2dfID0gbG9nV3JhcHBlcih0aGlzLmNvbm5JZCk7XG4gICAgICAgIHRoaXMuc3RhdHNfID0gc3RhdHNNYW5hZ2VyR2V0Q29sbGVjdGlvbihyZXBvSW5mbyk7XG4gICAgICAgIHRoaXMuY29ublVSTCA9IFdlYlNvY2tldENvbm5lY3Rpb24uY29ubmVjdGlvblVSTF8ocmVwb0luZm8sIHRyYW5zcG9ydFNlc3Npb25JZCwgbGFzdFNlc3Npb25JZCwgYXBwQ2hlY2tUb2tlbiwgYXBwbGljYXRpb25JZCk7XG4gICAgICAgIHRoaXMubm9kZUFkbWluID0gcmVwb0luZm8ubm9kZUFkbWluO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gcmVwb0luZm8gLSBUaGUgaW5mbyBmb3IgdGhlIHdlYnNvY2tldCBlbmRwb2ludC5cbiAgICAgKiBAcGFyYW0gdHJhbnNwb3J0U2Vzc2lvbklkIC0gT3B0aW9uYWwgdHJhbnNwb3J0U2Vzc2lvbklkIGlmIHRoaXMgaXMgY29ubmVjdGluZyB0byBhbiBleGlzdGluZyB0cmFuc3BvcnRcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvblxuICAgICAqIEBwYXJhbSBsYXN0U2Vzc2lvbklkIC0gT3B0aW9uYWwgbGFzdFNlc3Npb25JZCBpZiB0aGVyZSB3YXMgYSBwcmV2aW91cyBjb25uZWN0aW9uXG4gICAgICogQHJldHVybnMgY29ubmVjdGlvbiB1cmxcbiAgICAgKi9cbiAgICBzdGF0aWMgY29ubmVjdGlvblVSTF8ocmVwb0luZm8sIHRyYW5zcG9ydFNlc3Npb25JZCwgbGFzdFNlc3Npb25JZCwgYXBwQ2hlY2tUb2tlbiwgYXBwbGljYXRpb25JZCkge1xuICAgICAgICBjb25zdCB1cmxQYXJhbXMgPSB7fTtcbiAgICAgICAgdXJsUGFyYW1zW1ZFUlNJT05fUEFSQU1dID0gUFJPVE9DT0xfVkVSU0lPTjtcbiAgICAgICAgaWYgKCFpc05vZGVTZGsoKSAmJlxuICAgICAgICAgICAgdHlwZW9mIGxvY2F0aW9uICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgICAgbG9jYXRpb24uaG9zdG5hbWUgJiZcbiAgICAgICAgICAgIEZPUkdFX0RPTUFJTl9SRS50ZXN0KGxvY2F0aW9uLmhvc3RuYW1lKSkge1xuICAgICAgICAgICAgdXJsUGFyYW1zW1JFRkVSRVJfUEFSQU1dID0gRk9SR0VfUkVGO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmFuc3BvcnRTZXNzaW9uSWQpIHtcbiAgICAgICAgICAgIHVybFBhcmFtc1tUUkFOU1BPUlRfU0VTU0lPTl9QQVJBTV0gPSB0cmFuc3BvcnRTZXNzaW9uSWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxhc3RTZXNzaW9uSWQpIHtcbiAgICAgICAgICAgIHVybFBhcmFtc1tMQVNUX1NFU1NJT05fUEFSQU1dID0gbGFzdFNlc3Npb25JZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXBwQ2hlY2tUb2tlbikge1xuICAgICAgICAgICAgdXJsUGFyYW1zW0FQUF9DSEVDS19UT0tFTl9QQVJBTV0gPSBhcHBDaGVja1Rva2VuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhcHBsaWNhdGlvbklkKSB7XG4gICAgICAgICAgICB1cmxQYXJhbXNbQVBQTElDQVRJT05fSURfUEFSQU1dID0gYXBwbGljYXRpb25JZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVwb0luZm9Db25uZWN0aW9uVVJMKHJlcG9JbmZvLCBXRUJTT0NLRVQsIHVybFBhcmFtcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBvbk1lc3NhZ2UgLSBDYWxsYmFjayB3aGVuIG1lc3NhZ2VzIGFycml2ZVxuICAgICAqIEBwYXJhbSBvbkRpc2Nvbm5lY3QgLSBDYWxsYmFjayB3aXRoIGNvbm5lY3Rpb24gbG9zdC5cbiAgICAgKi9cbiAgICBvcGVuKG9uTWVzc2FnZSwgb25EaXNjb25uZWN0KSB7XG4gICAgICAgIHRoaXMub25EaXNjb25uZWN0ID0gb25EaXNjb25uZWN0O1xuICAgICAgICB0aGlzLm9uTWVzc2FnZSA9IG9uTWVzc2FnZTtcbiAgICAgICAgdGhpcy5sb2dfKCdXZWJzb2NrZXQgY29ubmVjdGluZyB0byAnICsgdGhpcy5jb25uVVJMKTtcbiAgICAgICAgdGhpcy5ldmVyQ29ubmVjdGVkXyA9IGZhbHNlO1xuICAgICAgICAvLyBBc3N1bWUgZmFpbHVyZSB1bnRpbCBwcm92ZW4gb3RoZXJ3aXNlLlxuICAgICAgICBQZXJzaXN0ZW50U3RvcmFnZS5zZXQoJ3ByZXZpb3VzX3dlYnNvY2tldF9mYWlsdXJlJywgdHJ1ZSk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsZXQgb3B0aW9ucztcbiAgICAgICAgICAgIGlmIChpc05vZGVTZGsoKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRldmljZSA9IHRoaXMubm9kZUFkbWluID8gJ0FkbWluTm9kZScgOiAnTm9kZSc7XG4gICAgICAgICAgICAgICAgLy8gVUEgRm9ybWF0OiBGaXJlYmFzZS88d2lyZV9wcm90b2NvbD4vPHNka192ZXJzaW9uPi88cGxhdGZvcm0+LzxkZXZpY2U+XG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1VzZXItQWdlbnQnOiBgRmlyZWJhc2UvJHtQUk9UT0NPTF9WRVJTSU9OfS8ke1NES19WRVJTSU9OfS8ke3Byb2Nlc3MucGxhdGZvcm19LyR7ZGV2aWNlfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAnWC1GaXJlYmFzZS1HTVBJRCc6IHRoaXMuYXBwbGljYXRpb25JZCB8fCAnJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAvLyBJZiB1c2luZyBOb2RlIHdpdGggYWRtaW4gY3JlZHMsIEFwcENoZWNrLXJlbGF0ZWQgY2hlY2tzIGFyZSB1bm5lY2Vzc2FyeS5cbiAgICAgICAgICAgICAgICAvLyBOb3RlIHRoYXQgd2Ugc2VuZCB0aGUgY3JlZGVudGlhbHMgaGVyZSBldmVuIGlmIHRoZXkgYXJlbid0IGFkbWluIGNyZWRlbnRpYWxzLCB3aGljaCBpc1xuICAgICAgICAgICAgICAgIC8vIG5vdCBhIHByb2JsZW0uXG4gICAgICAgICAgICAgICAgLy8gTm90ZSB0aGF0IHRoaXMgaGVhZGVyIGlzIGp1c3QgdXNlZCB0byBieXBhc3MgYXBwY2hlY2ssIGFuZCB0aGUgdG9rZW4gc2hvdWxkIHN0aWxsIGJlIHNlbnRcbiAgICAgICAgICAgICAgICAvLyB0aHJvdWdoIHRoZSB3ZWJzb2NrZXQgY29ubmVjdGlvbiBvbmNlIGl0IGlzIGVzdGFibGlzaGVkLlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmF1dGhUb2tlbikge1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9IGBCZWFyZXIgJHt0aGlzLmF1dGhUb2tlbn1gO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hcHBDaGVja1Rva2VuKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuaGVhZGVyc1snWC1GaXJlYmFzZS1BcHBDaGVjayddID0gdGhpcy5hcHBDaGVja1Rva2VuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBQbHVtYiBhcHByb3ByaWF0ZSBodHRwX3Byb3h5IGVudmlyb25tZW50IHZhcmlhYmxlIGludG8gZmF5ZS13ZWJzb2NrZXQgaWYgaXQgZXhpc3RzLlxuICAgICAgICAgICAgICAgIGNvbnN0IGVudiA9IHByb2Nlc3NbJ2VudiddO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb3h5ID0gdGhpcy5jb25uVVJMLmluZGV4T2YoJ3dzczovLycpID09PSAwXG4gICAgICAgICAgICAgICAgICAgID8gZW52WydIVFRQU19QUk9YWSddIHx8IGVudlsnaHR0cHNfcHJveHknXVxuICAgICAgICAgICAgICAgICAgICA6IGVudlsnSFRUUF9QUk9YWSddIHx8IGVudlsnaHR0cF9wcm94eSddO1xuICAgICAgICAgICAgICAgIGlmIChwcm94eSkge1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zWydwcm94eSddID0geyBvcmlnaW46IHByb3h5IH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5teVNvY2sgPSBuZXcgV2ViU29ja2V0SW1wbCh0aGlzLmNvbm5VUkwsIFtdLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhpcy5sb2dfKCdFcnJvciBpbnN0YW50aWF0aW5nIFdlYlNvY2tldC4nKTtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gZS5tZXNzYWdlIHx8IGUuZGF0YTtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nXyhlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9uQ2xvc2VkXygpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubXlTb2NrLm9ub3BlbiA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubG9nXygnV2Vic29ja2V0IGNvbm5lY3RlZC4nKTtcbiAgICAgICAgICAgIHRoaXMuZXZlckNvbm5lY3RlZF8gPSB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm15U29jay5vbmNsb3NlID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5sb2dfKCdXZWJzb2NrZXQgY29ubmVjdGlvbiB3YXMgZGlzY29ubmVjdGVkLicpO1xuICAgICAgICAgICAgdGhpcy5teVNvY2sgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5vbkNsb3NlZF8oKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5teVNvY2sub25tZXNzYWdlID0gbSA9PiB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUluY29taW5nRnJhbWUobSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMubXlTb2NrLm9uZXJyb3IgPSBlID0+IHtcbiAgICAgICAgICAgIHRoaXMubG9nXygnV2ViU29ja2V0IGVycm9yLiAgQ2xvc2luZyBjb25uZWN0aW9uLicpO1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gZS5tZXNzYWdlIHx8IGUuZGF0YTtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nXyhlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9uQ2xvc2VkXygpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBOby1vcCBmb3Igd2Vic29ja2V0cywgd2UgZG9uJ3QgbmVlZCB0byBkbyBhbnl0aGluZyBvbmNlIHRoZSBjb25uZWN0aW9uIGlzIGNvbmZpcm1lZCBhcyBvcGVuXG4gICAgICovXG4gICAgc3RhcnQoKSB7IH1cbiAgICBzdGF0aWMgZm9yY2VEaXNhbGxvdygpIHtcbiAgICAgICAgV2ViU29ja2V0Q29ubmVjdGlvbi5mb3JjZURpc2FsbG93XyA9IHRydWU7XG4gICAgfVxuICAgIHN0YXRpYyBpc0F2YWlsYWJsZSgpIHtcbiAgICAgICAgbGV0IGlzT2xkQW5kcm9pZCA9IGZhbHNlO1xuICAgICAgICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCkge1xuICAgICAgICAgICAgY29uc3Qgb2xkQW5kcm9pZFJlZ2V4ID0gL0FuZHJvaWQgKFswLTldezAsfVxcLlswLTldezAsfSkvO1xuICAgICAgICAgICAgY29uc3Qgb2xkQW5kcm9pZE1hdGNoID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaChvbGRBbmRyb2lkUmVnZXgpO1xuICAgICAgICAgICAgaWYgKG9sZEFuZHJvaWRNYXRjaCAmJiBvbGRBbmRyb2lkTWF0Y2gubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIGlmIChwYXJzZUZsb2F0KG9sZEFuZHJvaWRNYXRjaFsxXSkgPCA0LjQpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNPbGRBbmRyb2lkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICghaXNPbGRBbmRyb2lkICYmXG4gICAgICAgICAgICBXZWJTb2NrZXRJbXBsICE9PSBudWxsICYmXG4gICAgICAgICAgICAhV2ViU29ja2V0Q29ubmVjdGlvbi5mb3JjZURpc2FsbG93Xyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB3ZSBwcmV2aW91c2x5IGZhaWxlZCB0byBjb25uZWN0IHdpdGggdGhpcyB0cmFuc3BvcnQuXG4gICAgICovXG4gICAgc3RhdGljIHByZXZpb3VzbHlGYWlsZWQoKSB7XG4gICAgICAgIC8vIElmIG91ciBwZXJzaXN0ZW50IHN0b3JhZ2UgaXMgYWN0dWFsbHkgb25seSBpbi1tZW1vcnkgc3RvcmFnZSxcbiAgICAgICAgLy8gd2UgZGVmYXVsdCB0byBhc3N1bWluZyB0aGF0IGl0IHByZXZpb3VzbHkgZmFpbGVkIHRvIGJlIHNhZmUuXG4gICAgICAgIHJldHVybiAoUGVyc2lzdGVudFN0b3JhZ2UuaXNJbk1lbW9yeVN0b3JhZ2UgfHxcbiAgICAgICAgICAgIFBlcnNpc3RlbnRTdG9yYWdlLmdldCgncHJldmlvdXNfd2Vic29ja2V0X2ZhaWx1cmUnKSA9PT0gdHJ1ZSk7XG4gICAgfVxuICAgIG1hcmtDb25uZWN0aW9uSGVhbHRoeSgpIHtcbiAgICAgICAgUGVyc2lzdGVudFN0b3JhZ2UucmVtb3ZlKCdwcmV2aW91c193ZWJzb2NrZXRfZmFpbHVyZScpO1xuICAgIH1cbiAgICBhcHBlbmRGcmFtZV8oZGF0YSkge1xuICAgICAgICB0aGlzLmZyYW1lcy5wdXNoKGRhdGEpO1xuICAgICAgICBpZiAodGhpcy5mcmFtZXMubGVuZ3RoID09PSB0aGlzLnRvdGFsRnJhbWVzKSB7XG4gICAgICAgICAgICBjb25zdCBmdWxsTWVzcyA9IHRoaXMuZnJhbWVzLmpvaW4oJycpO1xuICAgICAgICAgICAgdGhpcy5mcmFtZXMgPSBudWxsO1xuICAgICAgICAgICAgY29uc3QganNvbk1lc3MgPSBqc29uRXZhbChmdWxsTWVzcyk7XG4gICAgICAgICAgICAvL2hhbmRsZSB0aGUgbWVzc2FnZVxuICAgICAgICAgICAgdGhpcy5vbk1lc3NhZ2UoanNvbk1lc3MpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBmcmFtZUNvdW50IC0gVGhlIG51bWJlciBvZiBmcmFtZXMgd2UgYXJlIGV4cGVjdGluZyBmcm9tIHRoZSBzZXJ2ZXJcbiAgICAgKi9cbiAgICBoYW5kbGVOZXdGcmFtZUNvdW50XyhmcmFtZUNvdW50KSB7XG4gICAgICAgIHRoaXMudG90YWxGcmFtZXMgPSBmcmFtZUNvdW50O1xuICAgICAgICB0aGlzLmZyYW1lcyA9IFtdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBdHRlbXB0cyB0byBwYXJzZSBhIGZyYW1lIGNvdW50IG91dCBvZiBzb21lIHRleHQuIElmIGl0IGNhbid0LCBhc3N1bWVzIGEgdmFsdWUgb2YgMVxuICAgICAqIEByZXR1cm5zIEFueSByZW1haW5pbmcgZGF0YSB0byBiZSBwcm9jZXNzLCBvciBudWxsIGlmIHRoZXJlIGlzIG5vbmVcbiAgICAgKi9cbiAgICBleHRyYWN0RnJhbWVDb3VudF8oZGF0YSkge1xuICAgICAgICBhc3NlcnQodGhpcy5mcmFtZXMgPT09IG51bGwsICdXZSBhbHJlYWR5IGhhdmUgYSBmcmFtZSBidWZmZXInKTtcbiAgICAgICAgLy8gVE9ETzogVGhlIHNlcnZlciBpcyBvbmx5IHN1cHBvc2VkIHRvIHNlbmQgdXAgdG8gOTk5OSBmcmFtZXMgKGkuZS4gbGVuZ3RoIDw9IDQpLCBidXQgdGhhdCBpc24ndCBiZWluZyBlbmZvcmNlZFxuICAgICAgICAvLyBjdXJyZW50bHkuICBTbyBhbGxvd2luZyBsYXJnZXIgZnJhbWUgY291bnRzIChsZW5ndGggPD0gNikuICBTZWUgaHR0cHM6Ly9hcHAuYXNhbmEuY29tLzAvc2VhcmNoLzg2ODg1OTg5OTgzODAvODIzNzYwODA0MjUwOFxuICAgICAgICBpZiAoZGF0YS5sZW5ndGggPD0gNikge1xuICAgICAgICAgICAgY29uc3QgZnJhbWVDb3VudCA9IE51bWJlcihkYXRhKTtcbiAgICAgICAgICAgIGlmICghaXNOYU4oZnJhbWVDb3VudCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZU5ld0ZyYW1lQ291bnRfKGZyYW1lQ291bnQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuaGFuZGxlTmV3RnJhbWVDb3VudF8oMSk7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzIGEgd2Vic29ja2V0IGZyYW1lIHRoYXQgaGFzIGFycml2ZWQgZnJvbSB0aGUgc2VydmVyLlxuICAgICAqIEBwYXJhbSBtZXNzIC0gVGhlIGZyYW1lIGRhdGFcbiAgICAgKi9cbiAgICBoYW5kbGVJbmNvbWluZ0ZyYW1lKG1lc3MpIHtcbiAgICAgICAgaWYgKHRoaXMubXlTb2NrID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47IC8vIENocm9tZSBhcHBhcmVudGx5IGRlbGl2ZXJzIGluY29taW5nIHBhY2tldHMgZXZlbiBhZnRlciB3ZSAuY2xvc2UoKSB0aGUgY29ubmVjdGlvbiBzb21ldGltZXMuXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGF0YSA9IG1lc3NbJ2RhdGEnXTtcbiAgICAgICAgdGhpcy5ieXRlc1JlY2VpdmVkICs9IGRhdGEubGVuZ3RoO1xuICAgICAgICB0aGlzLnN0YXRzXy5pbmNyZW1lbnRDb3VudGVyKCdieXRlc19yZWNlaXZlZCcsIGRhdGEubGVuZ3RoKTtcbiAgICAgICAgdGhpcy5yZXNldEtlZXBBbGl2ZSgpO1xuICAgICAgICBpZiAodGhpcy5mcmFtZXMgIT09IG51bGwpIHtcbiAgICAgICAgICAgIC8vIHdlJ3JlIGJ1ZmZlcmluZ1xuICAgICAgICAgICAgdGhpcy5hcHBlbmRGcmFtZV8oZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyB0cnkgdG8gcGFyc2Ugb3V0IGEgZnJhbWUgY291bnQsIG90aGVyd2lzZSwgYXNzdW1lIDEgYW5kIHByb2Nlc3MgaXRcbiAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZ0RhdGEgPSB0aGlzLmV4dHJhY3RGcmFtZUNvdW50XyhkYXRhKTtcbiAgICAgICAgICAgIGlmIChyZW1haW5pbmdEYXRhICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHBlbmRGcmFtZV8ocmVtYWluaW5nRGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhIG1lc3NhZ2UgdG8gdGhlIHNlcnZlclxuICAgICAqIEBwYXJhbSBkYXRhIC0gVGhlIEpTT04gb2JqZWN0IHRvIHRyYW5zbWl0XG4gICAgICovXG4gICAgc2VuZChkYXRhKSB7XG4gICAgICAgIHRoaXMucmVzZXRLZWVwQWxpdmUoKTtcbiAgICAgICAgY29uc3QgZGF0YVN0ciA9IHN0cmluZ2lmeShkYXRhKTtcbiAgICAgICAgdGhpcy5ieXRlc1NlbnQgKz0gZGF0YVN0ci5sZW5ndGg7XG4gICAgICAgIHRoaXMuc3RhdHNfLmluY3JlbWVudENvdW50ZXIoJ2J5dGVzX3NlbnQnLCBkYXRhU3RyLmxlbmd0aCk7XG4gICAgICAgIC8vV2UgY2FuIG9ubHkgZml0IGEgY2VydGFpbiBhbW91bnQgaW4gZWFjaCB3ZWJzb2NrZXQgZnJhbWUsIHNvIHdlIG5lZWQgdG8gc3BsaXQgdGhpcyByZXF1ZXN0XG4gICAgICAgIC8vdXAgaW50byBtdWx0aXBsZSBwaWVjZXMgaWYgaXQgZG9lc24ndCBmaXQgaW4gb25lIHJlcXVlc3QuXG4gICAgICAgIGNvbnN0IGRhdGFTZWdzID0gc3BsaXRTdHJpbmdCeVNpemUoZGF0YVN0ciwgV0VCU09DS0VUX01BWF9GUkFNRV9TSVpFKTtcbiAgICAgICAgLy9TZW5kIHRoZSBsZW5ndGggaGVhZGVyXG4gICAgICAgIGlmIChkYXRhU2Vncy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRTdHJpbmdfKFN0cmluZyhkYXRhU2Vncy5sZW5ndGgpKTtcbiAgICAgICAgfVxuICAgICAgICAvL1NlbmQgdGhlIGFjdHVhbCBkYXRhIGluIHNlZ21lbnRzLlxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGFTZWdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRTdHJpbmdfKGRhdGFTZWdzW2ldKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzaHV0ZG93bl8oKSB7XG4gICAgICAgIHRoaXMuaXNDbG9zZWRfID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMua2VlcGFsaXZlVGltZXIpIHtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5rZWVwYWxpdmVUaW1lcik7XG4gICAgICAgICAgICB0aGlzLmtlZXBhbGl2ZVRpbWVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5teVNvY2spIHtcbiAgICAgICAgICAgIHRoaXMubXlTb2NrLmNsb3NlKCk7XG4gICAgICAgICAgICB0aGlzLm15U29jayA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25DbG9zZWRfKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNDbG9zZWRfKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ18oJ1dlYlNvY2tldCBpcyBjbG9zaW5nIGl0c2VsZicpO1xuICAgICAgICAgICAgdGhpcy5zaHV0ZG93bl8oKTtcbiAgICAgICAgICAgIC8vIHNpbmNlIHRoaXMgaXMgYW4gaW50ZXJuYWwgY2xvc2UsIHRyaWdnZXIgdGhlIGNsb3NlIGxpc3RlbmVyXG4gICAgICAgICAgICBpZiAodGhpcy5vbkRpc2Nvbm5lY3QpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uRGlzY29ubmVjdCh0aGlzLmV2ZXJDb25uZWN0ZWRfKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9uRGlzY29ubmVjdCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRXh0ZXJuYWwtZmFjaW5nIGNsb3NlIGhhbmRsZXIuXG4gICAgICogQ2xvc2UgdGhlIHdlYnNvY2tldCBhbmQga2lsbCB0aGUgY29ubmVjdGlvbi5cbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzQ2xvc2VkXykge1xuICAgICAgICAgICAgdGhpcy5sb2dfKCdXZWJTb2NrZXQgaXMgYmVpbmcgY2xvc2VkJyk7XG4gICAgICAgICAgICB0aGlzLnNodXRkb3duXygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEtpbGwgdGhlIGN1cnJlbnQga2VlcGFsaXZlIHRpbWVyIGFuZCBzdGFydCBhIG5ldyBvbmUsIHRvIGVuc3VyZSB0aGF0IGl0IGFsd2F5cyBmaXJlcyBOIHNlY29uZHMgYWZ0ZXJcbiAgICAgKiB0aGUgbGFzdCBhY3Rpdml0eS5cbiAgICAgKi9cbiAgICByZXNldEtlZXBBbGl2ZSgpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmtlZXBhbGl2ZVRpbWVyKTtcbiAgICAgICAgdGhpcy5rZWVwYWxpdmVUaW1lciA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgIC8vSWYgdGhlcmUgaGFzIGJlZW4gbm8gd2Vic29ja2V0IGFjdGl2aXR5IGZvciBhIHdoaWxlLCBzZW5kIGEgbm8tb3BcbiAgICAgICAgICAgIGlmICh0aGlzLm15U29jaykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VuZFN0cmluZ18oJzAnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVzZXRLZWVwQWxpdmUoKTtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIH0sIE1hdGguZmxvb3IoV0VCU09DS0VUX0tFRVBBTElWRV9JTlRFUlZBTCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGEgc3RyaW5nIG92ZXIgdGhlIHdlYnNvY2tldC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzdHIgLSBTdHJpbmcgdG8gc2VuZC5cbiAgICAgKi9cbiAgICBzZW5kU3RyaW5nXyhzdHIpIHtcbiAgICAgICAgLy8gRmlyZWZveCBzZWVtcyB0byBzb21ldGltZXMgdGhyb3cgZXhjZXB0aW9ucyAoTlNfRVJST1JfVU5FWFBFQ1RFRCkgZnJvbSB3ZWJzb2NrZXQgLnNlbmQoKVxuICAgICAgICAvLyBjYWxscyBmb3Igc29tZSB1bmtub3duIHJlYXNvbi4gIFdlIHRyZWF0IHRoZXNlIGFzIGFuIGVycm9yIGFuZCBkaXNjb25uZWN0LlxuICAgICAgICAvLyBTZWUgaHR0cHM6Ly9hcHAuYXNhbmEuY29tLzAvNTg5MjYxMTE0MDIyOTIvNjgwMjEzNDAyNTA0MTBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMubXlTb2NrLnNlbmQoc3RyKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhpcy5sb2dfKCdFeGNlcHRpb24gdGhyb3duIGZyb20gV2ViU29ja2V0LnNlbmQoKTonLCBlLm1lc3NhZ2UgfHwgZS5kYXRhLCAnQ2xvc2luZyBjb25uZWN0aW9uLicpO1xuICAgICAgICAgICAgc2V0VGltZW91dCh0aGlzLm9uQ2xvc2VkXy5iaW5kKHRoaXMpLCAwKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogTnVtYmVyIG9mIHJlc3BvbnNlIGJlZm9yZSB3ZSBjb25zaWRlciB0aGUgY29ubmVjdGlvbiBcImhlYWx0aHkuXCJcbiAqL1xuV2ViU29ja2V0Q29ubmVjdGlvbi5yZXNwb25zZXNSZXF1aXJlZFRvQmVIZWFsdGh5ID0gMjtcbi8qKlxuICogVGltZSB0byB3YWl0IGZvciB0aGUgY29ubmVjdGlvbiB0ZSBiZWNvbWUgaGVhbHRoeSBiZWZvcmUgZ2l2aW5nIHVwLlxuICovXG5XZWJTb2NrZXRDb25uZWN0aW9uLmhlYWx0aHlUaW1lb3V0ID0gMzAwMDA7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEN1cnJlbnRseSBzaW1wbGlzdGljLCB0aGlzIGNsYXNzIG1hbmFnZXMgd2hhdCB0cmFuc3BvcnQgYSBDb25uZWN0aW9uIHNob3VsZCB1c2UgYXQgdmFyaW91cyBzdGFnZXMgb2YgaXRzXG4gKiBsaWZlY3ljbGUuXG4gKlxuICogSXQgc3RhcnRzIHdpdGggbG9uZ3BvbGxpbmcgaW4gYSBicm93c2VyLCBhbmQgaHR0cHBvbGxpbmcgb24gbm9kZS4gSXQgdGhlbiB1cGdyYWRlcyB0byB3ZWJzb2NrZXRzIGlmXG4gKiB0aGV5IGFyZSBhdmFpbGFibGUuXG4gKi9cbmNsYXNzIFRyYW5zcG9ydE1hbmFnZXIge1xuICAgIHN0YXRpYyBnZXQgQUxMX1RSQU5TUE9SVFMoKSB7XG4gICAgICAgIHJldHVybiBbQnJvd3NlclBvbGxDb25uZWN0aW9uLCBXZWJTb2NrZXRDb25uZWN0aW9uXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRyYW5zcG9ydCBoYXMgYmVlbiBzZWxlY3RlZCB0byBlbnN1cmUgV2ViU29ja2V0Q29ubmVjdGlvbiBvciBCcm93c2VyUG9sbENvbm5lY3Rpb24gYXJlIG5vdCBjYWxsZWQgYWZ0ZXJcbiAgICAgKiBUcmFuc3BvcnRNYW5hZ2VyIGhhcyBhbHJlYWR5IHNldCB1cCB0cmFuc3BvcnRzX1xuICAgICAqL1xuICAgIHN0YXRpYyBnZXQgSVNfVFJBTlNQT1JUX0lOSVRJQUxJWkVEKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nbG9iYWxUcmFuc3BvcnRJbml0aWFsaXplZF87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSByZXBvSW5mbyAtIE1ldGFkYXRhIGFyb3VuZCB0aGUgbmFtZXNwYWNlIHdlJ3JlIGNvbm5lY3RpbmcgdG9cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihyZXBvSW5mbykge1xuICAgICAgICB0aGlzLmluaXRUcmFuc3BvcnRzXyhyZXBvSW5mbyk7XG4gICAgfVxuICAgIGluaXRUcmFuc3BvcnRzXyhyZXBvSW5mbykge1xuICAgICAgICBjb25zdCBpc1dlYlNvY2tldHNBdmFpbGFibGUgPSBXZWJTb2NrZXRDb25uZWN0aW9uICYmIFdlYlNvY2tldENvbm5lY3Rpb25bJ2lzQXZhaWxhYmxlJ10oKTtcbiAgICAgICAgbGV0IGlzU2tpcFBvbGxDb25uZWN0aW9uID0gaXNXZWJTb2NrZXRzQXZhaWxhYmxlICYmICFXZWJTb2NrZXRDb25uZWN0aW9uLnByZXZpb3VzbHlGYWlsZWQoKTtcbiAgICAgICAgaWYgKHJlcG9JbmZvLndlYlNvY2tldE9ubHkpIHtcbiAgICAgICAgICAgIGlmICghaXNXZWJTb2NrZXRzQXZhaWxhYmxlKSB7XG4gICAgICAgICAgICAgICAgd2FybihcIndzczovLyBVUkwgdXNlZCwgYnV0IGJyb3dzZXIgaXNuJ3Qga25vd24gdG8gc3VwcG9ydCB3ZWJzb2NrZXRzLiAgVHJ5aW5nIGFueXdheS5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpc1NraXBQb2xsQ29ubmVjdGlvbiA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzU2tpcFBvbGxDb25uZWN0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLnRyYW5zcG9ydHNfID0gW1dlYlNvY2tldENvbm5lY3Rpb25dO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdHJhbnNwb3J0cyA9ICh0aGlzLnRyYW5zcG9ydHNfID0gW10pO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0cmFuc3BvcnQgb2YgVHJhbnNwb3J0TWFuYWdlci5BTExfVFJBTlNQT1JUUykge1xuICAgICAgICAgICAgICAgIGlmICh0cmFuc3BvcnQgJiYgdHJhbnNwb3J0Wydpc0F2YWlsYWJsZSddKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNwb3J0cy5wdXNoKHRyYW5zcG9ydCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgVHJhbnNwb3J0TWFuYWdlci5nbG9iYWxUcmFuc3BvcnRJbml0aWFsaXplZF8gPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIFRoZSBjb25zdHJ1Y3RvciBmb3IgdGhlIGluaXRpYWwgdHJhbnNwb3J0IHRvIHVzZVxuICAgICAqL1xuICAgIGluaXRpYWxUcmFuc3BvcnQoKSB7XG4gICAgICAgIGlmICh0aGlzLnRyYW5zcG9ydHNfLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRyYW5zcG9ydHNfWzBdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB0cmFuc3BvcnRzIGF2YWlsYWJsZScpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIFRoZSBjb25zdHJ1Y3RvciBmb3IgdGhlIG5leHQgdHJhbnNwb3J0LCBvciBudWxsXG4gICAgICovXG4gICAgdXBncmFkZVRyYW5zcG9ydCgpIHtcbiAgICAgICAgaWYgKHRoaXMudHJhbnNwb3J0c18ubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNwb3J0c19bMV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIEtlZXBzIHRyYWNrIG9mIHdoZXRoZXIgdGhlIFRyYW5zcG9ydE1hbmFnZXIgaGFzIGFscmVhZHkgY2hvc2VuIGEgdHJhbnNwb3J0IHRvIHVzZVxuVHJhbnNwb3J0TWFuYWdlci5nbG9iYWxUcmFuc3BvcnRJbml0aWFsaXplZF8gPSBmYWxzZTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIEFib3J0IHVwZ3JhZGUgYXR0ZW1wdCBpZiBpdCB0YWtlcyBsb25nZXIgdGhhbiA2MHMuXG5jb25zdCBVUEdSQURFX1RJTUVPVVQgPSA2MDAwMDtcbi8vIEZvciBzb21lIHRyYW5zcG9ydHMgKFdlYlNvY2tldHMpLCB3ZSBuZWVkIHRvIFwidmFsaWRhdGVcIiB0aGUgdHJhbnNwb3J0IGJ5IGV4Y2hhbmdpbmcgYSBmZXcgcmVxdWVzdHMgYW5kIHJlc3BvbnNlcy5cbi8vIElmIHdlIGhhdmVuJ3Qgc2VudCBlbm91Z2ggcmVxdWVzdHMgd2l0aGluIDVzLCB3ZSdsbCBzdGFydCBzZW5kaW5nIG5vb3AgcGluZyByZXF1ZXN0cy5cbmNvbnN0IERFTEFZX0JFRk9SRV9TRU5ESU5HX0VYVFJBX1JFUVVFU1RTID0gNTAwMDtcbi8vIElmIHRoZSBpbml0aWFsIGRhdGEgc2VudCB0cmlnZ2VycyBhIGxvdCBvZiBiYW5kd2lkdGggKGkuZS4gaXQncyBhIGxhcmdlIHB1dCBvciBhIGxpc3RlbiBmb3IgYSBsYXJnZSBhbW91bnQgb2YgZGF0YSlcbi8vIHRoZW4gd2UgbWF5IG5vdCBiZSBhYmxlIHRvIGV4Y2hhbmdlIG91ciBwaW5nL3BvbmcgcmVxdWVzdHMgd2l0aGluIHRoZSBoZWFsdGh5IHRpbWVvdXQuICBTbyBpZiB3ZSByZWFjaCB0aGUgdGltZW91dFxuLy8gYnV0IHdlJ3ZlIHNlbnQvcmVjZWl2ZWQgZW5vdWdoIGJ5dGVzLCB3ZSBkb24ndCBjYW5jZWwgdGhlIGNvbm5lY3Rpb24uXG5jb25zdCBCWVRFU19TRU5UX0hFQUxUSFlfT1ZFUlJJREUgPSAxMCAqIDEwMjQ7XG5jb25zdCBCWVRFU19SRUNFSVZFRF9IRUFMVEhZX09WRVJSSURFID0gMTAwICogMTAyNDtcbmNvbnN0IE1FU1NBR0VfVFlQRSA9ICd0JztcbmNvbnN0IE1FU1NBR0VfREFUQSA9ICdkJztcbmNvbnN0IENPTlRST0xfU0hVVERPV04gPSAncyc7XG5jb25zdCBDT05UUk9MX1JFU0VUID0gJ3InO1xuY29uc3QgQ09OVFJPTF9FUlJPUiA9ICdlJztcbmNvbnN0IENPTlRST0xfUE9ORyA9ICdvJztcbmNvbnN0IFNXSVRDSF9BQ0sgPSAnYSc7XG5jb25zdCBFTkRfVFJBTlNNSVNTSU9OID0gJ24nO1xuY29uc3QgUElORyA9ICdwJztcbmNvbnN0IFNFUlZFUl9IRUxMTyA9ICdoJztcbi8qKlxuICogQ3JlYXRlcyBhIG5ldyByZWFsLXRpbWUgY29ubmVjdGlvbiB0byB0aGUgc2VydmVyIHVzaW5nIHdoaWNoZXZlciBtZXRob2Qgd29ya3NcbiAqIGJlc3QgaW4gdGhlIGN1cnJlbnQgYnJvd3Nlci5cbiAqL1xuY2xhc3MgQ29ubmVjdGlvbiB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGlkIC0gYW4gaWQgZm9yIHRoaXMgY29ubmVjdGlvblxuICAgICAqIEBwYXJhbSByZXBvSW5mb18gLSB0aGUgaW5mbyBmb3IgdGhlIGVuZHBvaW50IHRvIGNvbm5lY3QgdG9cbiAgICAgKiBAcGFyYW0gYXBwbGljYXRpb25JZF8gLSB0aGUgRmlyZWJhc2UgQXBwIElEIGZvciB0aGlzIHByb2plY3RcbiAgICAgKiBAcGFyYW0gYXBwQ2hlY2tUb2tlbl8gLSBUaGUgQXBwIENoZWNrIFRva2VuIGZvciB0aGlzIGRldmljZS5cbiAgICAgKiBAcGFyYW0gYXV0aFRva2VuXyAtIFRoZSBhdXRoIHRva2VuIGZvciB0aGlzIHNlc3Npb24uXG4gICAgICogQHBhcmFtIG9uTWVzc2FnZV8gLSB0aGUgY2FsbGJhY2sgdG8gYmUgdHJpZ2dlcmVkIHdoZW4gYSBzZXJ2ZXItcHVzaCBtZXNzYWdlIGFycml2ZXNcbiAgICAgKiBAcGFyYW0gb25SZWFkeV8gLSB0aGUgY2FsbGJhY2sgdG8gYmUgdHJpZ2dlcmVkIHdoZW4gdGhpcyBjb25uZWN0aW9uIGlzIHJlYWR5IHRvIHNlbmQgbWVzc2FnZXMuXG4gICAgICogQHBhcmFtIG9uRGlzY29ubmVjdF8gLSB0aGUgY2FsbGJhY2sgdG8gYmUgdHJpZ2dlcmVkIHdoZW4gYSBjb25uZWN0aW9uIHdhcyBsb3N0XG4gICAgICogQHBhcmFtIG9uS2lsbF8gLSB0aGUgY2FsbGJhY2sgdG8gYmUgdHJpZ2dlcmVkIHdoZW4gdGhpcyBjb25uZWN0aW9uIGhhcyBwZXJtYW5lbnRseSBzaHV0IGRvd24uXG4gICAgICogQHBhcmFtIGxhc3RTZXNzaW9uSWQgLSBsYXN0IHNlc3Npb24gaWQgaW4gcGVyc2lzdGVudCBjb25uZWN0aW9uLiBpcyB1c2VkIHRvIGNsZWFuIHVwIG9sZCBzZXNzaW9uIGluIHJlYWwtdGltZSBzZXJ2ZXJcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihpZCwgcmVwb0luZm9fLCBhcHBsaWNhdGlvbklkXywgYXBwQ2hlY2tUb2tlbl8sIGF1dGhUb2tlbl8sIG9uTWVzc2FnZV8sIG9uUmVhZHlfLCBvbkRpc2Nvbm5lY3RfLCBvbktpbGxfLCBsYXN0U2Vzc2lvbklkKSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy5yZXBvSW5mb18gPSByZXBvSW5mb187XG4gICAgICAgIHRoaXMuYXBwbGljYXRpb25JZF8gPSBhcHBsaWNhdGlvbklkXztcbiAgICAgICAgdGhpcy5hcHBDaGVja1Rva2VuXyA9IGFwcENoZWNrVG9rZW5fO1xuICAgICAgICB0aGlzLmF1dGhUb2tlbl8gPSBhdXRoVG9rZW5fO1xuICAgICAgICB0aGlzLm9uTWVzc2FnZV8gPSBvbk1lc3NhZ2VfO1xuICAgICAgICB0aGlzLm9uUmVhZHlfID0gb25SZWFkeV87XG4gICAgICAgIHRoaXMub25EaXNjb25uZWN0XyA9IG9uRGlzY29ubmVjdF87XG4gICAgICAgIHRoaXMub25LaWxsXyA9IG9uS2lsbF87XG4gICAgICAgIHRoaXMubGFzdFNlc3Npb25JZCA9IGxhc3RTZXNzaW9uSWQ7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbkNvdW50ID0gMDtcbiAgICAgICAgdGhpcy5wZW5kaW5nRGF0YU1lc3NhZ2VzID0gW107XG4gICAgICAgIHRoaXMuc3RhdGVfID0gMCAvKiBSZWFsdGltZVN0YXRlLkNPTk5FQ1RJTkcgKi87XG4gICAgICAgIHRoaXMubG9nXyA9IGxvZ1dyYXBwZXIoJ2M6JyArIHRoaXMuaWQgKyAnOicpO1xuICAgICAgICB0aGlzLnRyYW5zcG9ydE1hbmFnZXJfID0gbmV3IFRyYW5zcG9ydE1hbmFnZXIocmVwb0luZm9fKTtcbiAgICAgICAgdGhpcy5sb2dfKCdDb25uZWN0aW9uIGNyZWF0ZWQnKTtcbiAgICAgICAgdGhpcy5zdGFydF8oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIGEgY29ubmVjdGlvbiBhdHRlbXB0XG4gICAgICovXG4gICAgc3RhcnRfKCkge1xuICAgICAgICBjb25zdCBjb25uID0gdGhpcy50cmFuc3BvcnRNYW5hZ2VyXy5pbml0aWFsVHJhbnNwb3J0KCk7XG4gICAgICAgIHRoaXMuY29ubl8gPSBuZXcgY29ubih0aGlzLm5leHRUcmFuc3BvcnRJZF8oKSwgdGhpcy5yZXBvSW5mb18sIHRoaXMuYXBwbGljYXRpb25JZF8sIHRoaXMuYXBwQ2hlY2tUb2tlbl8sIHRoaXMuYXV0aFRva2VuXywgbnVsbCwgdGhpcy5sYXN0U2Vzc2lvbklkKTtcbiAgICAgICAgLy8gRm9yIGNlcnRhaW4gdHJhbnNwb3J0cyAoV2ViU29ja2V0cyksIHdlIG5lZWQgdG8gc2VuZCBhbmQgcmVjZWl2ZSBzZXZlcmFsIG1lc3NhZ2VzIGJhY2sgYW5kIGZvcnRoIGJlZm9yZSB3ZVxuICAgICAgICAvLyBjYW4gY29uc2lkZXIgdGhlIHRyYW5zcG9ydCBoZWFsdGh5LlxuICAgICAgICB0aGlzLnByaW1hcnlSZXNwb25zZXNSZXF1aXJlZF8gPSBjb25uWydyZXNwb25zZXNSZXF1aXJlZFRvQmVIZWFsdGh5J10gfHwgMDtcbiAgICAgICAgY29uc3Qgb25NZXNzYWdlUmVjZWl2ZWQgPSB0aGlzLmNvbm5SZWNlaXZlcl8odGhpcy5jb25uXyk7XG4gICAgICAgIGNvbnN0IG9uQ29ubmVjdGlvbkxvc3QgPSB0aGlzLmRpc2Nvbm5SZWNlaXZlcl8odGhpcy5jb25uXyk7XG4gICAgICAgIHRoaXMudHhfID0gdGhpcy5jb25uXztcbiAgICAgICAgdGhpcy5yeF8gPSB0aGlzLmNvbm5fO1xuICAgICAgICB0aGlzLnNlY29uZGFyeUNvbm5fID0gbnVsbDtcbiAgICAgICAgdGhpcy5pc0hlYWx0aHlfID0gZmFsc2U7XG4gICAgICAgIC8qXG4gICAgICAgICAqIEZpcmVmb3ggZG9lc24ndCBsaWtlIHdoZW4gY29kZSBmcm9tIG9uZSBpZnJhbWUgdHJpZXMgdG8gY3JlYXRlIGFub3RoZXIgaWZyYW1lIGJ5IHdheSBvZiB0aGUgcGFyZW50IGZyYW1lLlxuICAgICAgICAgKiBUaGlzIGNhbiBvY2N1ciBpbiB0aGUgY2FzZSBvZiBhIHJlZGlyZWN0LCBpLmUuIHdlIGd1ZXNzZWQgd3Jvbmcgb24gd2hhdCBzZXJ2ZXIgdG8gY29ubmVjdCB0byBhbmQgcmVjZWl2ZWQgYSByZXNldC5cbiAgICAgICAgICogU29tZWhvdywgc2V0VGltZW91dCBzZWVtcyB0byBtYWtlIHRoaXMgb2suIFRoYXQgZG9lc24ndCBtYWtlIHNlbnNlIGZyb20gYSBzZWN1cml0eSBwZXJzcGVjdGl2ZSwgc2luY2UgeW91IHNob3VsZFxuICAgICAgICAgKiBzdGlsbCBoYXZlIHRoZSBjb250ZXh0IG9mIHlvdXIgb3JpZ2luYXRpbmcgZnJhbWUuXG4gICAgICAgICAqL1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIC8vIHRoaXMuY29ubl8gZ2V0cyBzZXQgdG8gbnVsbCBpbiBzb21lIG9mIHRoZSB0ZXN0cy4gQ2hlY2sgdG8gbWFrZSBzdXJlIGl0IHN0aWxsIGV4aXN0cyBiZWZvcmUgdXNpbmcgaXRcbiAgICAgICAgICAgIHRoaXMuY29ubl8gJiYgdGhpcy5jb25uXy5vcGVuKG9uTWVzc2FnZVJlY2VpdmVkLCBvbkNvbm5lY3Rpb25Mb3N0KTtcbiAgICAgICAgfSwgTWF0aC5mbG9vcigwKSk7XG4gICAgICAgIGNvbnN0IGhlYWx0aHlUaW1lb3V0TVMgPSBjb25uWydoZWFsdGh5VGltZW91dCddIHx8IDA7XG4gICAgICAgIGlmIChoZWFsdGh5VGltZW91dE1TID4gMCkge1xuICAgICAgICAgICAgdGhpcy5oZWFsdGh5VGltZW91dF8gPSBzZXRUaW1lb3V0Tm9uQmxvY2tpbmcoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaGVhbHRoeVRpbWVvdXRfID0gbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNIZWFsdGh5Xykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb25uXyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25uXy5ieXRlc1JlY2VpdmVkID4gQllURVNfUkVDRUlWRURfSEVBTFRIWV9PVkVSUklERSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dfKCdDb25uZWN0aW9uIGV4Y2VlZGVkIGhlYWx0aHkgdGltZW91dCBidXQgaGFzIHJlY2VpdmVkICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29ubl8uYnl0ZXNSZWNlaXZlZCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJyBieXRlcy4gIE1hcmtpbmcgY29ubmVjdGlvbiBoZWFsdGh5LicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0hlYWx0aHlfID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29ubl8ubWFya0Nvbm5lY3Rpb25IZWFsdGh5KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5jb25uXyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25uXy5ieXRlc1NlbnQgPiBCWVRFU19TRU5UX0hFQUxUSFlfT1ZFUlJJREUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nXygnQ29ubmVjdGlvbiBleGNlZWRlZCBoZWFsdGh5IHRpbWVvdXQgYnV0IGhhcyBzZW50ICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29ubl8uYnl0ZXNTZW50ICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIGJ5dGVzLiAgTGVhdmluZyBjb25uZWN0aW9uIGFsaXZlLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTk9URTogV2UgZG9uJ3Qgd2FudCB0byBtYXJrIGl0IGhlYWx0aHksIHNpbmNlIHdlIGhhdmUgbm8gZ3VhcmFudGVlIHRoYXQgdGhlIGJ5dGVzIGhhdmUgbWFkZSBpdCB0b1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHNlcnZlci5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nXygnQ2xvc2luZyB1bmhlYWx0aHkgY29ubmVjdGlvbiBhZnRlciB0aW1lb3V0LicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICB9LCBNYXRoLmZsb29yKGhlYWx0aHlUaW1lb3V0TVMpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBuZXh0VHJhbnNwb3J0SWRfKCkge1xuICAgICAgICByZXR1cm4gJ2M6JyArIHRoaXMuaWQgKyAnOicgKyB0aGlzLmNvbm5lY3Rpb25Db3VudCsrO1xuICAgIH1cbiAgICBkaXNjb25uUmVjZWl2ZXJfKGNvbm4pIHtcbiAgICAgICAgcmV0dXJuIGV2ZXJDb25uZWN0ZWQgPT4ge1xuICAgICAgICAgICAgaWYgKGNvbm4gPT09IHRoaXMuY29ubl8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uQ29ubmVjdGlvbkxvc3RfKGV2ZXJDb25uZWN0ZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY29ubiA9PT0gdGhpcy5zZWNvbmRhcnlDb25uXykge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nXygnU2Vjb25kYXJ5IGNvbm5lY3Rpb24gbG9zdC4nKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9uU2Vjb25kYXJ5Q29ubmVjdGlvbkxvc3RfKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ18oJ2Nsb3NpbmcgYW4gb2xkIGNvbm5lY3Rpb24nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29ublJlY2VpdmVyXyhjb25uKSB7XG4gICAgICAgIHJldHVybiAobWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGVfICE9PSAyIC8qIFJlYWx0aW1lU3RhdGUuRElTQ09OTkVDVEVEICovKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbm4gPT09IHRoaXMucnhfKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25QcmltYXJ5TWVzc2FnZVJlY2VpdmVkXyhtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY29ubiA9PT0gdGhpcy5zZWNvbmRhcnlDb25uXykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU2Vjb25kYXJ5TWVzc2FnZVJlY2VpdmVkXyhtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nXygnbWVzc2FnZSBvbiBvbGQgY29ubmVjdGlvbicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGRhdGFNc2cgLSBBbiBhcmJpdHJhcnkgZGF0YSBtZXNzYWdlIHRvIGJlIHNlbnQgdG8gdGhlIHNlcnZlclxuICAgICAqL1xuICAgIHNlbmRSZXF1ZXN0KGRhdGFNc2cpIHtcbiAgICAgICAgLy8gd3JhcCBpbiBhIGRhdGEgbWVzc2FnZSBlbnZlbG9wZSBhbmQgc2VuZCBpdCBvblxuICAgICAgICBjb25zdCBtc2cgPSB7IHQ6ICdkJywgZDogZGF0YU1zZyB9O1xuICAgICAgICB0aGlzLnNlbmREYXRhXyhtc2cpO1xuICAgIH1cbiAgICB0cnlDbGVhbnVwQ29ubmVjdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMudHhfID09PSB0aGlzLnNlY29uZGFyeUNvbm5fICYmIHRoaXMucnhfID09PSB0aGlzLnNlY29uZGFyeUNvbm5fKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ18oJ2NsZWFuaW5nIHVwIGFuZCBwcm9tb3RpbmcgYSBjb25uZWN0aW9uOiAnICsgdGhpcy5zZWNvbmRhcnlDb25uXy5jb25uSWQpO1xuICAgICAgICAgICAgdGhpcy5jb25uXyA9IHRoaXMuc2Vjb25kYXJ5Q29ubl87XG4gICAgICAgICAgICB0aGlzLnNlY29uZGFyeUNvbm5fID0gbnVsbDtcbiAgICAgICAgICAgIC8vIHRoZSBzZXJ2ZXIgd2lsbCBzaHV0ZG93biB0aGUgb2xkIGNvbm5lY3Rpb25cbiAgICAgICAgfVxuICAgIH1cbiAgICBvblNlY29uZGFyeUNvbnRyb2xfKGNvbnRyb2xEYXRhKSB7XG4gICAgICAgIGlmIChNRVNTQUdFX1RZUEUgaW4gY29udHJvbERhdGEpIHtcbiAgICAgICAgICAgIGNvbnN0IGNtZCA9IGNvbnRyb2xEYXRhW01FU1NBR0VfVFlQRV07XG4gICAgICAgICAgICBpZiAoY21kID09PSBTV0lUQ0hfQUNLKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGdyYWRlSWZTZWNvbmRhcnlIZWFsdGh5XygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY21kID09PSBDT05UUk9MX1JFU0VUKSB7XG4gICAgICAgICAgICAgICAgLy8gTW9zdCBsaWtlbHkgdGhlIHNlc3Npb24gd2Fzbid0IHZhbGlkLiBBYmFuZG9uIHRoZSBzd2l0Y2ggYXR0ZW1wdFxuICAgICAgICAgICAgICAgIHRoaXMubG9nXygnR290IGEgcmVzZXQgb24gc2Vjb25kYXJ5LCBjbG9zaW5nIGl0Jyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWNvbmRhcnlDb25uXy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIC8vIElmIHdlIHdlcmUgYWxyZWFkeSB1c2luZyB0aGlzIGNvbm5lY3Rpb24gZm9yIHNvbWV0aGluZywgdGhhbiB3ZSBuZWVkIHRvIGZ1bGx5IGNsb3NlXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudHhfID09PSB0aGlzLnNlY29uZGFyeUNvbm5fIHx8XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucnhfID09PSB0aGlzLnNlY29uZGFyeUNvbm5fKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjbWQgPT09IENPTlRST0xfUE9ORykge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nXygnZ290IHBvbmcgb24gc2Vjb25kYXJ5LicpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2Vjb25kYXJ5UmVzcG9uc2VzUmVxdWlyZWRfLS07XG4gICAgICAgICAgICAgICAgdGhpcy51cGdyYWRlSWZTZWNvbmRhcnlIZWFsdGh5XygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIG9uU2Vjb25kYXJ5TWVzc2FnZVJlY2VpdmVkXyhwYXJzZWREYXRhKSB7XG4gICAgICAgIGNvbnN0IGxheWVyID0gcmVxdWlyZUtleSgndCcsIHBhcnNlZERhdGEpO1xuICAgICAgICBjb25zdCBkYXRhID0gcmVxdWlyZUtleSgnZCcsIHBhcnNlZERhdGEpO1xuICAgICAgICBpZiAobGF5ZXIgPT09ICdjJykge1xuICAgICAgICAgICAgdGhpcy5vblNlY29uZGFyeUNvbnRyb2xfKGRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGxheWVyID09PSAnZCcpIHtcbiAgICAgICAgICAgIC8vIGdvdCBhIGRhdGEgbWVzc2FnZSwgYnV0IHdlJ3JlIHN0aWxsIHNlY29uZCBjb25uZWN0aW9uLiBOZWVkIHRvIGJ1ZmZlciBpdCB1cFxuICAgICAgICAgICAgdGhpcy5wZW5kaW5nRGF0YU1lc3NhZ2VzLnB1c2goZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gcHJvdG9jb2wgbGF5ZXI6ICcgKyBsYXllcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBncmFkZUlmU2Vjb25kYXJ5SGVhbHRoeV8oKSB7XG4gICAgICAgIGlmICh0aGlzLnNlY29uZGFyeVJlc3BvbnNlc1JlcXVpcmVkXyA8PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ18oJ1NlY29uZGFyeSBjb25uZWN0aW9uIGlzIGhlYWx0aHkuJyk7XG4gICAgICAgICAgICB0aGlzLmlzSGVhbHRoeV8gPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5zZWNvbmRhcnlDb25uXy5tYXJrQ29ubmVjdGlvbkhlYWx0aHkoKTtcbiAgICAgICAgICAgIHRoaXMucHJvY2VlZFdpdGhVcGdyYWRlXygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gU2VuZCBhIHBpbmcgdG8gbWFrZSBzdXJlIHRoZSBjb25uZWN0aW9uIGlzIGhlYWx0aHkuXG4gICAgICAgICAgICB0aGlzLmxvZ18oJ3NlbmRpbmcgcGluZyBvbiBzZWNvbmRhcnkuJyk7XG4gICAgICAgICAgICB0aGlzLnNlY29uZGFyeUNvbm5fLnNlbmQoeyB0OiAnYycsIGQ6IHsgdDogUElORywgZDoge30gfSB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwcm9jZWVkV2l0aFVwZ3JhZGVfKCkge1xuICAgICAgICAvLyB0ZWxsIHRoaXMgY29ubmVjdGlvbiB0byBjb25zaWRlciBpdHNlbGYgb3BlblxuICAgICAgICB0aGlzLnNlY29uZGFyeUNvbm5fLnN0YXJ0KCk7XG4gICAgICAgIC8vIHNlbmQgYWNrXG4gICAgICAgIHRoaXMubG9nXygnc2VuZGluZyBjbGllbnQgYWNrIG9uIHNlY29uZGFyeScpO1xuICAgICAgICB0aGlzLnNlY29uZGFyeUNvbm5fLnNlbmQoeyB0OiAnYycsIGQ6IHsgdDogU1dJVENIX0FDSywgZDoge30gfSB9KTtcbiAgICAgICAgLy8gc2VuZCBlbmQgcGFja2V0IG9uIHByaW1hcnkgdHJhbnNwb3J0LCBzd2l0Y2ggdG8gc2VuZGluZyBvbiB0aGlzIG9uZVxuICAgICAgICAvLyBjYW4gcmVjZWl2ZSBvbiB0aGlzIG9uZSwgYnVmZmVyIHJlc3BvbnNlcyB1bnRpbCBlbmQgcmVjZWl2ZWQgb24gcHJpbWFyeSB0cmFuc3BvcnRcbiAgICAgICAgdGhpcy5sb2dfKCdFbmRpbmcgdHJhbnNtaXNzaW9uIG9uIHByaW1hcnknKTtcbiAgICAgICAgdGhpcy5jb25uXy5zZW5kKHsgdDogJ2MnLCBkOiB7IHQ6IEVORF9UUkFOU01JU1NJT04sIGQ6IHt9IH0gfSk7XG4gICAgICAgIHRoaXMudHhfID0gdGhpcy5zZWNvbmRhcnlDb25uXztcbiAgICAgICAgdGhpcy50cnlDbGVhbnVwQ29ubmVjdGlvbigpO1xuICAgIH1cbiAgICBvblByaW1hcnlNZXNzYWdlUmVjZWl2ZWRfKHBhcnNlZERhdGEpIHtcbiAgICAgICAgLy8gTXVzdCByZWZlciB0byBwYXJzZWREYXRhIHByb3BlcnRpZXMgaW4gcXVvdGVzLCBzbyBjbG9zdXJlIGRvZXNuJ3QgdG91Y2ggdGhlbS5cbiAgICAgICAgY29uc3QgbGF5ZXIgPSByZXF1aXJlS2V5KCd0JywgcGFyc2VkRGF0YSk7XG4gICAgICAgIGNvbnN0IGRhdGEgPSByZXF1aXJlS2V5KCdkJywgcGFyc2VkRGF0YSk7XG4gICAgICAgIGlmIChsYXllciA9PT0gJ2MnKSB7XG4gICAgICAgICAgICB0aGlzLm9uQ29udHJvbF8oZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobGF5ZXIgPT09ICdkJykge1xuICAgICAgICAgICAgdGhpcy5vbkRhdGFNZXNzYWdlXyhkYXRhKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvbkRhdGFNZXNzYWdlXyhtZXNzYWdlKSB7XG4gICAgICAgIHRoaXMub25QcmltYXJ5UmVzcG9uc2VfKCk7XG4gICAgICAgIC8vIFdlIGRvbid0IGRvIGFueXRoaW5nIHdpdGggZGF0YSBtZXNzYWdlcywganVzdCBraWNrIHRoZW0gdXAgYSBsZXZlbFxuICAgICAgICB0aGlzLm9uTWVzc2FnZV8obWVzc2FnZSk7XG4gICAgfVxuICAgIG9uUHJpbWFyeVJlc3BvbnNlXygpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzSGVhbHRoeV8pIHtcbiAgICAgICAgICAgIHRoaXMucHJpbWFyeVJlc3BvbnNlc1JlcXVpcmVkXy0tO1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpbWFyeVJlc3BvbnNlc1JlcXVpcmVkXyA8PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dfKCdQcmltYXJ5IGNvbm5lY3Rpb24gaXMgaGVhbHRoeS4nKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzSGVhbHRoeV8gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuY29ubl8ubWFya0Nvbm5lY3Rpb25IZWFsdGh5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25Db250cm9sXyhjb250cm9sRGF0YSkge1xuICAgICAgICBjb25zdCBjbWQgPSByZXF1aXJlS2V5KE1FU1NBR0VfVFlQRSwgY29udHJvbERhdGEpO1xuICAgICAgICBpZiAoTUVTU0FHRV9EQVRBIGluIGNvbnRyb2xEYXRhKSB7XG4gICAgICAgICAgICBjb25zdCBwYXlsb2FkID0gY29udHJvbERhdGFbTUVTU0FHRV9EQVRBXTtcbiAgICAgICAgICAgIGlmIChjbWQgPT09IFNFUlZFUl9IRUxMTykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRzaGFrZVBheWxvYWQgPSBPYmplY3QuYXNzaWduKHt9LCBwYXlsb2FkKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5yZXBvSW5mb18uaXNVc2luZ0VtdWxhdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFVwb24gY29ubmVjdGluZywgdGhlIGVtdWxhdG9yIHdpbGwgcGFzcyB0aGUgaG9zdG5hbWUgdGhhdCBpdCdzIGF3YXJlIG9mLCBidXQgd2UgcHJlZmVyIHRoZSB1c2VyJ3Mgc2V0IGhvc3RuYW1lIHZpYSBgY29ubmVjdERhdGFiYXNlRW11bGF0b3JgIG92ZXIgd2hhdCB0aGUgZW11bGF0b3IgcGFzc2VzLlxuICAgICAgICAgICAgICAgICAgICBoYW5kc2hha2VQYXlsb2FkLmggPSB0aGlzLnJlcG9JbmZvXy5ob3N0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLm9uSGFuZHNoYWtlXyhoYW5kc2hha2VQYXlsb2FkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNtZCA9PT0gRU5EX1RSQU5TTUlTU0lPTikge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nXygncmVjdmQgZW5kIHRyYW5zbWlzc2lvbiBvbiBwcmltYXJ5Jyk7XG4gICAgICAgICAgICAgICAgdGhpcy5yeF8gPSB0aGlzLnNlY29uZGFyeUNvbm5fO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5wZW5kaW5nRGF0YU1lc3NhZ2VzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25EYXRhTWVzc2FnZV8odGhpcy5wZW5kaW5nRGF0YU1lc3NhZ2VzW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nRGF0YU1lc3NhZ2VzID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy50cnlDbGVhbnVwQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY21kID09PSBDT05UUk9MX1NIVVRET1dOKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyB3YXMgcHJldmlvdXNseSB0aGUgJ29uS2lsbCcgY2FsbGJhY2sgcGFzc2VkIHRvIHRoZSBsb3dlci1sZXZlbCBjb25uZWN0aW9uXG4gICAgICAgICAgICAgICAgLy8gcGF5bG9hZCBpbiB0aGlzIGNhc2UgaXMgdGhlIHJlYXNvbiBmb3IgdGhlIHNodXRkb3duLiBHZW5lcmFsbHkgYSBodW1hbi1yZWFkYWJsZSBlcnJvclxuICAgICAgICAgICAgICAgIHRoaXMub25Db25uZWN0aW9uU2h1dGRvd25fKHBheWxvYWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY21kID09PSBDT05UUk9MX1JFU0VUKSB7XG4gICAgICAgICAgICAgICAgLy8gcGF5bG9hZCBpbiB0aGlzIGNhc2UgaXMgdGhlIGhvc3Qgd2Ugc2hvdWxkIGNvbnRhY3RcbiAgICAgICAgICAgICAgICB0aGlzLm9uUmVzZXRfKHBheWxvYWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY21kID09PSBDT05UUk9MX0VSUk9SKSB7XG4gICAgICAgICAgICAgICAgZXJyb3IoJ1NlcnZlciBFcnJvcjogJyArIHBheWxvYWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY21kID09PSBDT05UUk9MX1BPTkcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ18oJ2dvdCBwb25nIG9uIHByaW1hcnkuJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5vblByaW1hcnlSZXNwb25zZV8oKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbmRQaW5nT25QcmltYXJ5SWZOZWNlc3NhcnlfKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlcnJvcignVW5rbm93biBjb250cm9sIHBhY2tldCBjb21tYW5kOiAnICsgY21kKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gaGFuZHNoYWtlIC0gVGhlIGhhbmRzaGFrZSBkYXRhIHJldHVybmVkIGZyb20gdGhlIHNlcnZlclxuICAgICAqL1xuICAgIG9uSGFuZHNoYWtlXyhoYW5kc2hha2UpIHtcbiAgICAgICAgY29uc3QgdGltZXN0YW1wID0gaGFuZHNoYWtlLnRzO1xuICAgICAgICBjb25zdCB2ZXJzaW9uID0gaGFuZHNoYWtlLnY7XG4gICAgICAgIGNvbnN0IGhvc3QgPSBoYW5kc2hha2UuaDtcbiAgICAgICAgdGhpcy5zZXNzaW9uSWQgPSBoYW5kc2hha2UucztcbiAgICAgICAgdGhpcy5yZXBvSW5mb18uaG9zdCA9IGhvc3Q7XG4gICAgICAgIC8vIGlmIHdlJ3ZlIGFscmVhZHkgY2xvc2VkIHRoZSBjb25uZWN0aW9uLCB0aGVuIGRvbid0IGJvdGhlciB0cnlpbmcgdG8gcHJvZ3Jlc3MgZnVydGhlclxuICAgICAgICBpZiAodGhpcy5zdGF0ZV8gPT09IDAgLyogUmVhbHRpbWVTdGF0ZS5DT05ORUNUSU5HICovKSB7XG4gICAgICAgICAgICB0aGlzLmNvbm5fLnN0YXJ0KCk7XG4gICAgICAgICAgICB0aGlzLm9uQ29ubmVjdGlvbkVzdGFibGlzaGVkXyh0aGlzLmNvbm5fLCB0aW1lc3RhbXApO1xuICAgICAgICAgICAgaWYgKFBST1RPQ09MX1ZFUlNJT04gIT09IHZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICB3YXJuKCdQcm90b2NvbCB2ZXJzaW9uIG1pc21hdGNoIGRldGVjdGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUT0RPOiBkbyB3ZSB3YW50IHRvIHVwZ3JhZGU/IHdoZW4/IG1heWJlIGEgZGVsYXk/XG4gICAgICAgICAgICB0aGlzLnRyeVN0YXJ0VXBncmFkZV8oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0cnlTdGFydFVwZ3JhZGVfKCkge1xuICAgICAgICBjb25zdCBjb25uID0gdGhpcy50cmFuc3BvcnRNYW5hZ2VyXy51cGdyYWRlVHJhbnNwb3J0KCk7XG4gICAgICAgIGlmIChjb25uKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0VXBncmFkZV8oY29ubik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhcnRVcGdyYWRlXyhjb25uKSB7XG4gICAgICAgIHRoaXMuc2Vjb25kYXJ5Q29ubl8gPSBuZXcgY29ubih0aGlzLm5leHRUcmFuc3BvcnRJZF8oKSwgdGhpcy5yZXBvSW5mb18sIHRoaXMuYXBwbGljYXRpb25JZF8sIHRoaXMuYXBwQ2hlY2tUb2tlbl8sIHRoaXMuYXV0aFRva2VuXywgdGhpcy5zZXNzaW9uSWQpO1xuICAgICAgICAvLyBGb3IgY2VydGFpbiB0cmFuc3BvcnRzIChXZWJTb2NrZXRzKSwgd2UgbmVlZCB0byBzZW5kIGFuZCByZWNlaXZlIHNldmVyYWwgbWVzc2FnZXMgYmFjayBhbmQgZm9ydGggYmVmb3JlIHdlXG4gICAgICAgIC8vIGNhbiBjb25zaWRlciB0aGUgdHJhbnNwb3J0IGhlYWx0aHkuXG4gICAgICAgIHRoaXMuc2Vjb25kYXJ5UmVzcG9uc2VzUmVxdWlyZWRfID1cbiAgICAgICAgICAgIGNvbm5bJ3Jlc3BvbnNlc1JlcXVpcmVkVG9CZUhlYWx0aHknXSB8fCAwO1xuICAgICAgICBjb25zdCBvbk1lc3NhZ2UgPSB0aGlzLmNvbm5SZWNlaXZlcl8odGhpcy5zZWNvbmRhcnlDb25uXyk7XG4gICAgICAgIGNvbnN0IG9uRGlzY29ubmVjdCA9IHRoaXMuZGlzY29ublJlY2VpdmVyXyh0aGlzLnNlY29uZGFyeUNvbm5fKTtcbiAgICAgICAgdGhpcy5zZWNvbmRhcnlDb25uXy5vcGVuKG9uTWVzc2FnZSwgb25EaXNjb25uZWN0KTtcbiAgICAgICAgLy8gSWYgd2UgaGF2ZW4ndCBzdWNjZXNzZnVsbHkgdXBncmFkZWQgYWZ0ZXIgVVBHUkFERV9USU1FT1VULCBnaXZlIHVwIGFuZCBraWxsIHRoZSBzZWNvbmRhcnkuXG4gICAgICAgIHNldFRpbWVvdXROb25CbG9ja2luZygoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5zZWNvbmRhcnlDb25uXykge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nXygnVGltZWQgb3V0IHRyeWluZyB0byB1cGdyYWRlLicpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2Vjb25kYXJ5Q29ubl8uY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgTWF0aC5mbG9vcihVUEdSQURFX1RJTUVPVVQpKTtcbiAgICB9XG4gICAgb25SZXNldF8oaG9zdCkge1xuICAgICAgICB0aGlzLmxvZ18oJ1Jlc2V0IHBhY2tldCByZWNlaXZlZC4gIE5ldyBob3N0OiAnICsgaG9zdCk7XG4gICAgICAgIHRoaXMucmVwb0luZm9fLmhvc3QgPSBob3N0O1xuICAgICAgICAvLyBUT0RPOiBpZiB3ZSdyZSBhbHJlYWR5IFwiY29ubmVjdGVkXCIsIHdlIG5lZWQgdG8gdHJpZ2dlciBhIGRpc2Nvbm5lY3QgYXQgdGhlIG5leHQgbGF5ZXIgdXAuXG4gICAgICAgIC8vIFdlIGRvbid0IGN1cnJlbnRseSBzdXBwb3J0IHJlc2V0cyBhZnRlciB0aGUgY29ubmVjdGlvbiBoYXMgYWxyZWFkeSBiZWVuIGVzdGFibGlzaGVkXG4gICAgICAgIGlmICh0aGlzLnN0YXRlXyA9PT0gMSAvKiBSZWFsdGltZVN0YXRlLkNPTk5FQ1RFRCAqLykge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gQ2xvc2Ugd2hhdGV2ZXIgY29ubmVjdGlvbnMgd2UgaGF2ZSBvcGVuIGFuZCBzdGFydCBhZ2Fpbi5cbiAgICAgICAgICAgIHRoaXMuY2xvc2VDb25uZWN0aW9uc18oKTtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRfKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25Db25uZWN0aW9uRXN0YWJsaXNoZWRfKGNvbm4sIHRpbWVzdGFtcCkge1xuICAgICAgICB0aGlzLmxvZ18oJ1JlYWx0aW1lIGNvbm5lY3Rpb24gZXN0YWJsaXNoZWQuJyk7XG4gICAgICAgIHRoaXMuY29ubl8gPSBjb25uO1xuICAgICAgICB0aGlzLnN0YXRlXyA9IDEgLyogUmVhbHRpbWVTdGF0ZS5DT05ORUNURUQgKi87XG4gICAgICAgIGlmICh0aGlzLm9uUmVhZHlfKSB7XG4gICAgICAgICAgICB0aGlzLm9uUmVhZHlfKHRpbWVzdGFtcCwgdGhpcy5zZXNzaW9uSWQpO1xuICAgICAgICAgICAgdGhpcy5vblJlYWR5XyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgYWZ0ZXIgNSBzZWNvbmRzIHdlIGhhdmVuJ3Qgc2VudCBlbm91Z2ggcmVxdWVzdHMgdG8gdGhlIHNlcnZlciB0byBnZXQgdGhlIGNvbm5lY3Rpb24gaGVhbHRoeSxcbiAgICAgICAgLy8gc2VuZCBzb21lIHBpbmdzLlxuICAgICAgICBpZiAodGhpcy5wcmltYXJ5UmVzcG9uc2VzUmVxdWlyZWRfID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ18oJ1ByaW1hcnkgY29ubmVjdGlvbiBpcyBoZWFsdGh5LicpO1xuICAgICAgICAgICAgdGhpcy5pc0hlYWx0aHlfID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXROb25CbG9ja2luZygoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kUGluZ09uUHJpbWFyeUlmTmVjZXNzYXJ5XygpO1xuICAgICAgICAgICAgfSwgTWF0aC5mbG9vcihERUxBWV9CRUZPUkVfU0VORElOR19FWFRSQV9SRVFVRVNUUykpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNlbmRQaW5nT25QcmltYXJ5SWZOZWNlc3NhcnlfKCkge1xuICAgICAgICAvLyBJZiB0aGUgY29ubmVjdGlvbiBpc24ndCBjb25zaWRlcmVkIGhlYWx0aHkgeWV0LCB3ZSdsbCBzZW5kIGEgbm9vcCBwaW5nIHBhY2tldCByZXF1ZXN0LlxuICAgICAgICBpZiAoIXRoaXMuaXNIZWFsdGh5XyAmJiB0aGlzLnN0YXRlXyA9PT0gMSAvKiBSZWFsdGltZVN0YXRlLkNPTk5FQ1RFRCAqLykge1xuICAgICAgICAgICAgdGhpcy5sb2dfKCdzZW5kaW5nIHBpbmcgb24gcHJpbWFyeS4nKTtcbiAgICAgICAgICAgIHRoaXMuc2VuZERhdGFfKHsgdDogJ2MnLCBkOiB7IHQ6IFBJTkcsIGQ6IHt9IH0gfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25TZWNvbmRhcnlDb25uZWN0aW9uTG9zdF8oKSB7XG4gICAgICAgIGNvbnN0IGNvbm4gPSB0aGlzLnNlY29uZGFyeUNvbm5fO1xuICAgICAgICB0aGlzLnNlY29uZGFyeUNvbm5fID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMudHhfID09PSBjb25uIHx8IHRoaXMucnhfID09PSBjb25uKSB7XG4gICAgICAgICAgICAvLyB3ZSBhcmUgcmVseWluZyBvbiB0aGlzIGNvbm5lY3Rpb24gYWxyZWFkeSBpbiBzb21lIGNhcGFjaXR5LiBUaGVyZWZvcmUsIGEgZmFpbHVyZSBpcyByZWFsXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGV2ZXJDb25uZWN0ZWQgLSBXaGV0aGVyIG9yIG5vdCB0aGUgY29ubmVjdGlvbiBldmVyIHJlYWNoZWQgYSBzZXJ2ZXIuIFVzZWQgdG8gZGV0ZXJtaW5lIGlmXG4gICAgICogd2Ugc2hvdWxkIGZsdXNoIHRoZSBob3N0IGNhY2hlXG4gICAgICovXG4gICAgb25Db25uZWN0aW9uTG9zdF8oZXZlckNvbm5lY3RlZCkge1xuICAgICAgICB0aGlzLmNvbm5fID0gbnVsbDtcbiAgICAgICAgLy8gTk9URTogSUYgeW91J3JlIHNlZWluZyBhIEZpcmVmb3ggZXJyb3IgZm9yIHRoaXMgbGluZSwgSSB0aGluayBpdCBtaWdodCBiZSBiZWNhdXNlIGl0J3MgZ2V0dGluZ1xuICAgICAgICAvLyBjYWxsZWQgb24gd2luZG93IGNsb3NlIGFuZCBSZWFsdGltZVN0YXRlLkNPTk5FQ1RJTkcgaXMgbm8gbG9uZ2VyIGRlZmluZWQuICBKdXN0IGEgZ3Vlc3MuXG4gICAgICAgIGlmICghZXZlckNvbm5lY3RlZCAmJiB0aGlzLnN0YXRlXyA9PT0gMCAvKiBSZWFsdGltZVN0YXRlLkNPTk5FQ1RJTkcgKi8pIHtcbiAgICAgICAgICAgIHRoaXMubG9nXygnUmVhbHRpbWUgY29ubmVjdGlvbiBmYWlsZWQuJyk7XG4gICAgICAgICAgICAvLyBTaW5jZSB3ZSBmYWlsZWQgdG8gY29ubmVjdCBhdCBhbGwsIGNsZWFyIGFueSBjYWNoZWQgZW50cnkgZm9yIHRoaXMgbmFtZXNwYWNlIGluIGNhc2UgdGhlIG1hY2hpbmUgd2VudCBhd2F5XG4gICAgICAgICAgICBpZiAodGhpcy5yZXBvSW5mb18uaXNDYWNoZWFibGVIb3N0KCkpIHtcbiAgICAgICAgICAgICAgICBQZXJzaXN0ZW50U3RvcmFnZS5yZW1vdmUoJ2hvc3Q6JyArIHRoaXMucmVwb0luZm9fLmhvc3QpO1xuICAgICAgICAgICAgICAgIC8vIHJlc2V0IHRoZSBpbnRlcm5hbCBob3N0IHRvIHdoYXQgd2Ugd291bGQgc2hvdyB0aGUgdXNlciwgaS5lLiA8bnM+LmZpcmViYXNlaW8uY29tXG4gICAgICAgICAgICAgICAgdGhpcy5yZXBvSW5mb18uaW50ZXJuYWxIb3N0ID0gdGhpcy5yZXBvSW5mb18uaG9zdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLnN0YXRlXyA9PT0gMSAvKiBSZWFsdGltZVN0YXRlLkNPTk5FQ1RFRCAqLykge1xuICAgICAgICAgICAgdGhpcy5sb2dfKCdSZWFsdGltZSBjb25uZWN0aW9uIGxvc3QuJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgICBvbkNvbm5lY3Rpb25TaHV0ZG93bl8ocmVhc29uKSB7XG4gICAgICAgIHRoaXMubG9nXygnQ29ubmVjdGlvbiBzaHV0ZG93biBjb21tYW5kIHJlY2VpdmVkLiBTaHV0dGluZyBkb3duLi4uJyk7XG4gICAgICAgIGlmICh0aGlzLm9uS2lsbF8pIHtcbiAgICAgICAgICAgIHRoaXMub25LaWxsXyhyZWFzb24pO1xuICAgICAgICAgICAgdGhpcy5vbktpbGxfID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICAvLyBXZSBpbnRlbnRpb25hbGx5IGRvbid0IHdhbnQgdG8gZmlyZSBvbkRpc2Nvbm5lY3QgKGtpbGwgaXMgYSBkaWZmZXJlbnQgY2FzZSksXG4gICAgICAgIC8vIHNvIGNsZWFyIHRoZSBjYWxsYmFjay5cbiAgICAgICAgdGhpcy5vbkRpc2Nvbm5lY3RfID0gbnVsbDtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgICBzZW5kRGF0YV8oZGF0YSkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZV8gIT09IDEgLyogUmVhbHRpbWVTdGF0ZS5DT05ORUNURUQgKi8pIHtcbiAgICAgICAgICAgIHRocm93ICdDb25uZWN0aW9uIGlzIG5vdCBjb25uZWN0ZWQnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy50eF8uc2VuZChkYXRhKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbGVhbnMgdXAgdGhpcyBjb25uZWN0aW9uLCBjYWxsaW5nIHRoZSBhcHByb3ByaWF0ZSBjYWxsYmFja3NcbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGVfICE9PSAyIC8qIFJlYWx0aW1lU3RhdGUuRElTQ09OTkVDVEVEICovKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ18oJ0Nsb3NpbmcgcmVhbHRpbWUgY29ubmVjdGlvbi4nKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGVfID0gMiAvKiBSZWFsdGltZVN0YXRlLkRJU0NPTk5FQ1RFRCAqLztcbiAgICAgICAgICAgIHRoaXMuY2xvc2VDb25uZWN0aW9uc18oKTtcbiAgICAgICAgICAgIGlmICh0aGlzLm9uRGlzY29ubmVjdF8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uRGlzY29ubmVjdF8oKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9uRGlzY29ubmVjdF8gPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNsb3NlQ29ubmVjdGlvbnNfKCkge1xuICAgICAgICB0aGlzLmxvZ18oJ1NodXR0aW5nIGRvd24gYWxsIGNvbm5lY3Rpb25zJyk7XG4gICAgICAgIGlmICh0aGlzLmNvbm5fKSB7XG4gICAgICAgICAgICB0aGlzLmNvbm5fLmNsb3NlKCk7XG4gICAgICAgICAgICB0aGlzLmNvbm5fID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zZWNvbmRhcnlDb25uXykge1xuICAgICAgICAgICAgdGhpcy5zZWNvbmRhcnlDb25uXy5jbG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5zZWNvbmRhcnlDb25uXyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaGVhbHRoeVRpbWVvdXRfKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5oZWFsdGh5VGltZW91dF8pO1xuICAgICAgICAgICAgdGhpcy5oZWFsdGh5VGltZW91dF8gPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBJbnRlcmZhY2UgZGVmaW5pbmcgdGhlIHNldCBvZiBhY3Rpb25zIHRoYXQgY2FuIGJlIHBlcmZvcm1lZCBhZ2FpbnN0IHRoZSBGaXJlYmFzZSBzZXJ2ZXJcbiAqIChiYXNpY2FsbHkgY29ycmVzcG9uZHMgdG8gb3VyIHdpcmUgcHJvdG9jb2wpLlxuICpcbiAqIEBpbnRlcmZhY2VcbiAqL1xuY2xhc3MgU2VydmVyQWN0aW9ucyB7XG4gICAgcHV0KHBhdGhTdHJpbmcsIGRhdGEsIG9uQ29tcGxldGUsIGhhc2gpIHsgfVxuICAgIG1lcmdlKHBhdGhTdHJpbmcsIGRhdGEsIG9uQ29tcGxldGUsIGhhc2gpIHsgfVxuICAgIC8qKlxuICAgICAqIFJlZnJlc2hlcyB0aGUgYXV0aCB0b2tlbiBmb3IgdGhlIGN1cnJlbnQgY29ubmVjdGlvbi5cbiAgICAgKiBAcGFyYW0gdG9rZW4gLSBUaGUgYXV0aGVudGljYXRpb24gdG9rZW5cbiAgICAgKi9cbiAgICByZWZyZXNoQXV0aFRva2VuKHRva2VuKSB7IH1cbiAgICAvKipcbiAgICAgKiBSZWZyZXNoZXMgdGhlIGFwcCBjaGVjayB0b2tlbiBmb3IgdGhlIGN1cnJlbnQgY29ubmVjdGlvbi5cbiAgICAgKiBAcGFyYW0gdG9rZW4gVGhlIGFwcCBjaGVjayB0b2tlblxuICAgICAqL1xuICAgIHJlZnJlc2hBcHBDaGVja1Rva2VuKHRva2VuKSB7IH1cbiAgICBvbkRpc2Nvbm5lY3RQdXQocGF0aFN0cmluZywgZGF0YSwgb25Db21wbGV0ZSkgeyB9XG4gICAgb25EaXNjb25uZWN0TWVyZ2UocGF0aFN0cmluZywgZGF0YSwgb25Db21wbGV0ZSkgeyB9XG4gICAgb25EaXNjb25uZWN0Q2FuY2VsKHBhdGhTdHJpbmcsIG9uQ29tcGxldGUpIHsgfVxuICAgIHJlcG9ydFN0YXRzKHN0YXRzKSB7IH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQmFzZSBjbGFzcyB0byBiZSB1c2VkIGlmIHlvdSB3YW50IHRvIGVtaXQgZXZlbnRzLiBDYWxsIHRoZSBjb25zdHJ1Y3RvciB3aXRoXG4gKiB0aGUgc2V0IG9mIGFsbG93ZWQgZXZlbnQgbmFtZXMuXG4gKi9cbmNsYXNzIEV2ZW50RW1pdHRlciB7XG4gICAgY29uc3RydWN0b3IoYWxsb3dlZEV2ZW50c18pIHtcbiAgICAgICAgdGhpcy5hbGxvd2VkRXZlbnRzXyA9IGFsbG93ZWRFdmVudHNfO1xuICAgICAgICB0aGlzLmxpc3RlbmVyc18gPSB7fTtcbiAgICAgICAgYXNzZXJ0KEFycmF5LmlzQXJyYXkoYWxsb3dlZEV2ZW50c18pICYmIGFsbG93ZWRFdmVudHNfLmxlbmd0aCA+IDAsICdSZXF1aXJlcyBhIG5vbi1lbXB0eSBhcnJheScpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUbyBiZSBjYWxsZWQgYnkgZGVyaXZlZCBjbGFzc2VzIHRvIHRyaWdnZXIgZXZlbnRzLlxuICAgICAqL1xuICAgIHRyaWdnZXIoZXZlbnRUeXBlLCAuLi52YXJBcmdzKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMubGlzdGVuZXJzX1tldmVudFR5cGVdKSkge1xuICAgICAgICAgICAgLy8gQ2xvbmUgdGhlIGxpc3QsIHNpbmNlIGNhbGxiYWNrcyBjb3VsZCBhZGQvcmVtb3ZlIGxpc3RlbmVycy5cbiAgICAgICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IFsuLi50aGlzLmxpc3RlbmVyc19bZXZlbnRUeXBlXV07XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3RlbmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGxpc3RlbmVyc1tpXS5jYWxsYmFjay5hcHBseShsaXN0ZW5lcnNbaV0uY29udGV4dCwgdmFyQXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgb24oZXZlbnRUeXBlLCBjYWxsYmFjaywgY29udGV4dCkge1xuICAgICAgICB0aGlzLnZhbGlkYXRlRXZlbnRUeXBlXyhldmVudFR5cGUpO1xuICAgICAgICB0aGlzLmxpc3RlbmVyc19bZXZlbnRUeXBlXSA9IHRoaXMubGlzdGVuZXJzX1tldmVudFR5cGVdIHx8IFtdO1xuICAgICAgICB0aGlzLmxpc3RlbmVyc19bZXZlbnRUeXBlXS5wdXNoKHsgY2FsbGJhY2ssIGNvbnRleHQgfSk7XG4gICAgICAgIGNvbnN0IGV2ZW50RGF0YSA9IHRoaXMuZ2V0SW5pdGlhbEV2ZW50KGV2ZW50VHlwZSk7XG4gICAgICAgIGlmIChldmVudERhdGEpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KGNvbnRleHQsIGV2ZW50RGF0YSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb2ZmKGV2ZW50VHlwZSwgY2FsbGJhY2ssIGNvbnRleHQpIHtcbiAgICAgICAgdGhpcy52YWxpZGF0ZUV2ZW50VHlwZV8oZXZlbnRUeXBlKTtcbiAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnNfW2V2ZW50VHlwZV0gfHwgW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAobGlzdGVuZXJzW2ldLmNhbGxiYWNrID09PSBjYWxsYmFjayAmJlxuICAgICAgICAgICAgICAgICghY29udGV4dCB8fCBjb250ZXh0ID09PSBsaXN0ZW5lcnNbaV0uY29udGV4dCkpIHtcbiAgICAgICAgICAgICAgICBsaXN0ZW5lcnMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICB2YWxpZGF0ZUV2ZW50VHlwZV8oZXZlbnRUeXBlKSB7XG4gICAgICAgIGFzc2VydCh0aGlzLmFsbG93ZWRFdmVudHNfLmZpbmQoZXQgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGV0ID09PSBldmVudFR5cGU7XG4gICAgICAgIH0pLCAnVW5rbm93biBldmVudDogJyArIGV2ZW50VHlwZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBNb25pdG9ycyBvbmxpbmUgc3RhdGUgKGFzIHJlcG9ydGVkIGJ5IHdpbmRvdy5vbmxpbmUvb2ZmbGluZSBldmVudHMpLlxuICpcbiAqIFRoZSBleHBlY3RhdGlvbiBpcyB0aGF0IHRoaXMgY291bGQgaGF2ZSBtYW55IGZhbHNlIHBvc2l0aXZlcyAodGhpbmtzIHdlIGFyZSBvbmxpbmVcbiAqIHdoZW4gd2UncmUgbm90KSwgYnV0IG5vIGZhbHNlIG5lZ2F0aXZlcy4gIFNvIHdlIGNhbiBzYWZlbHkgdXNlIGl0IHRvIGRldGVybWluZSB3aGVuXG4gKiB3ZSBkZWZpbml0ZWx5IGNhbm5vdCByZWFjaCB0aGUgaW50ZXJuZXQuXG4gKi9cbmNsYXNzIE9ubGluZU1vbml0b3IgZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICAgIHN0YXRpYyBnZXRJbnN0YW5jZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBPbmxpbmVNb25pdG9yKCk7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcihbJ29ubGluZSddKTtcbiAgICAgICAgdGhpcy5vbmxpbmVfID0gdHJ1ZTtcbiAgICAgICAgLy8gV2UndmUgaGFkIHJlcGVhdGVkIGNvbXBsYWludHMgdGhhdCBDb3Jkb3ZhIGFwcHMgY2FuIGdldCBzdHVjayBcIm9mZmxpbmVcIiwgZS5nLlxuICAgICAgICAvLyBodHRwczovL2ZvcnVtLmlvbmljZnJhbWV3b3JrLmNvbS90L2ZpcmViYXNlLWNvbm5lY3Rpb24taXMtbG9zdC1hbmQtbmV2ZXItY29tZS1iYWNrLzQzODEwXG4gICAgICAgIC8vIEl0IHdvdWxkIHNlZW0gdGhhdCB0aGUgJ29ubGluZScgZXZlbnQgZG9lcyBub3QgYWx3YXlzIGZpcmUgY29uc2lzdGVudGx5LiBTbyB3ZSBkaXNhYmxlIGl0XG4gICAgICAgIC8vIGZvciBDb3Jkb3ZhLlxuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICAgIHR5cGVvZiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICAgICFpc01vYmlsZUNvcmRvdmEoKSkge1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ29ubGluZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMub25saW5lXykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9ubGluZV8gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ29ubGluZScsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvZmZsaW5lJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9ubGluZV8pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbmxpbmVfID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignb25saW5lJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRJbml0aWFsRXZlbnQoZXZlbnRUeXBlKSB7XG4gICAgICAgIGFzc2VydChldmVudFR5cGUgPT09ICdvbmxpbmUnLCAnVW5rbm93biBldmVudCB0eXBlOiAnICsgZXZlbnRUeXBlKTtcbiAgICAgICAgcmV0dXJuIFt0aGlzLm9ubGluZV9dO1xuICAgIH1cbiAgICBjdXJyZW50bHlPbmxpbmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9ubGluZV87XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIE1heGltdW0ga2V5IGRlcHRoLiAqL1xuY29uc3QgTUFYX1BBVEhfREVQVEggPSAzMjtcbi8qKiBNYXhpbXVtIG51bWJlciBvZiAoVVRGOCkgYnl0ZXMgaW4gYSBGaXJlYmFzZSBwYXRoLiAqL1xuY29uc3QgTUFYX1BBVEhfTEVOR1RIX0JZVEVTID0gNzY4O1xuLyoqXG4gKiBBbiBpbW11dGFibGUgb2JqZWN0IHJlcHJlc2VudGluZyBhIHBhcnNlZCBwYXRoLiAgSXQncyBpbW11dGFibGUgc28gdGhhdCB5b3VcbiAqIGNhbiBwYXNzIHRoZW0gYXJvdW5kIHRvIG90aGVyIGZ1bmN0aW9ucyB3aXRob3V0IHdvcnJ5aW5nIGFib3V0IHRoZW0gY2hhbmdpbmdcbiAqIGl0LlxuICovXG5jbGFzcyBQYXRoIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gcGF0aE9yU3RyaW5nIC0gUGF0aCBzdHJpbmcgdG8gcGFyc2UsIG9yIGFub3RoZXIgcGF0aCwgb3IgdGhlIHJhd1xuICAgICAqIHRva2VucyBhcnJheVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHBhdGhPclN0cmluZywgcGllY2VOdW0pIHtcbiAgICAgICAgaWYgKHBpZWNlTnVtID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHRoaXMucGllY2VzXyA9IHBhdGhPclN0cmluZy5zcGxpdCgnLycpO1xuICAgICAgICAgICAgLy8gUmVtb3ZlIGVtcHR5IHBpZWNlcy5cbiAgICAgICAgICAgIGxldCBjb3B5VG8gPSAwO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnBpZWNlc18ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5waWVjZXNfW2ldLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5waWVjZXNfW2NvcHlUb10gPSB0aGlzLnBpZWNlc19baV07XG4gICAgICAgICAgICAgICAgICAgIGNvcHlUbysrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGllY2VzXy5sZW5ndGggPSBjb3B5VG87XG4gICAgICAgICAgICB0aGlzLnBpZWNlTnVtXyA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBpZWNlc18gPSBwYXRoT3JTdHJpbmc7XG4gICAgICAgICAgICB0aGlzLnBpZWNlTnVtXyA9IHBpZWNlTnVtO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBsZXQgcGF0aFN0cmluZyA9ICcnO1xuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5waWVjZU51bV87IGkgPCB0aGlzLnBpZWNlc18ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBpZWNlc19baV0gIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgcGF0aFN0cmluZyArPSAnLycgKyB0aGlzLnBpZWNlc19baV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhdGhTdHJpbmcgfHwgJy8nO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG5ld0VtcHR5UGF0aCgpIHtcbiAgICByZXR1cm4gbmV3IFBhdGgoJycpO1xufVxuZnVuY3Rpb24gcGF0aEdldEZyb250KHBhdGgpIHtcbiAgICBpZiAocGF0aC5waWVjZU51bV8gPj0gcGF0aC5waWVjZXNfLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHBhdGgucGllY2VzX1twYXRoLnBpZWNlTnVtX107XG59XG4vKipcbiAqIEByZXR1cm5zIFRoZSBudW1iZXIgb2Ygc2VnbWVudHMgaW4gdGhpcyBwYXRoXG4gKi9cbmZ1bmN0aW9uIHBhdGhHZXRMZW5ndGgocGF0aCkge1xuICAgIHJldHVybiBwYXRoLnBpZWNlc18ubGVuZ3RoIC0gcGF0aC5waWVjZU51bV87XG59XG5mdW5jdGlvbiBwYXRoUG9wRnJvbnQocGF0aCkge1xuICAgIGxldCBwaWVjZU51bSA9IHBhdGgucGllY2VOdW1fO1xuICAgIGlmIChwaWVjZU51bSA8IHBhdGgucGllY2VzXy5sZW5ndGgpIHtcbiAgICAgICAgcGllY2VOdW0rKztcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBQYXRoKHBhdGgucGllY2VzXywgcGllY2VOdW0pO1xufVxuZnVuY3Rpb24gcGF0aEdldEJhY2socGF0aCkge1xuICAgIGlmIChwYXRoLnBpZWNlTnVtXyA8IHBhdGgucGllY2VzXy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHBhdGgucGllY2VzX1twYXRoLnBpZWNlc18ubGVuZ3RoIC0gMV07XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gcGF0aFRvVXJsRW5jb2RlZFN0cmluZyhwYXRoKSB7XG4gICAgbGV0IHBhdGhTdHJpbmcgPSAnJztcbiAgICBmb3IgKGxldCBpID0gcGF0aC5waWVjZU51bV87IGkgPCBwYXRoLnBpZWNlc18ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHBhdGgucGllY2VzX1tpXSAhPT0gJycpIHtcbiAgICAgICAgICAgIHBhdGhTdHJpbmcgKz0gJy8nICsgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhwYXRoLnBpZWNlc19baV0pKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcGF0aFN0cmluZyB8fCAnLyc7XG59XG4vKipcbiAqIFNoYWxsb3cgY29weSBvZiB0aGUgcGFydHMgb2YgdGhlIHBhdGguXG4gKlxuICovXG5mdW5jdGlvbiBwYXRoU2xpY2UocGF0aCwgYmVnaW4gPSAwKSB7XG4gICAgcmV0dXJuIHBhdGgucGllY2VzXy5zbGljZShwYXRoLnBpZWNlTnVtXyArIGJlZ2luKTtcbn1cbmZ1bmN0aW9uIHBhdGhQYXJlbnQocGF0aCkge1xuICAgIGlmIChwYXRoLnBpZWNlTnVtXyA+PSBwYXRoLnBpZWNlc18ubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBwaWVjZXMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gcGF0aC5waWVjZU51bV87IGkgPCBwYXRoLnBpZWNlc18ubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgIHBpZWNlcy5wdXNoKHBhdGgucGllY2VzX1tpXSk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgUGF0aChwaWVjZXMsIDApO1xufVxuZnVuY3Rpb24gcGF0aENoaWxkKHBhdGgsIGNoaWxkUGF0aE9iaikge1xuICAgIGNvbnN0IHBpZWNlcyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSBwYXRoLnBpZWNlTnVtXzsgaSA8IHBhdGgucGllY2VzXy5sZW5ndGg7IGkrKykge1xuICAgICAgICBwaWVjZXMucHVzaChwYXRoLnBpZWNlc19baV0pO1xuICAgIH1cbiAgICBpZiAoY2hpbGRQYXRoT2JqIGluc3RhbmNlb2YgUGF0aCkge1xuICAgICAgICBmb3IgKGxldCBpID0gY2hpbGRQYXRoT2JqLnBpZWNlTnVtXzsgaSA8IGNoaWxkUGF0aE9iai5waWVjZXNfLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBwaWVjZXMucHVzaChjaGlsZFBhdGhPYmoucGllY2VzX1tpXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IGNoaWxkUGllY2VzID0gY2hpbGRQYXRoT2JqLnNwbGl0KCcvJyk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRQaWVjZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChjaGlsZFBpZWNlc1tpXS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgcGllY2VzLnB1c2goY2hpbGRQaWVjZXNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXcgUGF0aChwaWVjZXMsIDApO1xufVxuLyoqXG4gKiBAcmV0dXJucyBUcnVlIGlmIHRoZXJlIGFyZSBubyBzZWdtZW50cyBpbiB0aGlzIHBhdGhcbiAqL1xuZnVuY3Rpb24gcGF0aElzRW1wdHkocGF0aCkge1xuICAgIHJldHVybiBwYXRoLnBpZWNlTnVtXyA+PSBwYXRoLnBpZWNlc18ubGVuZ3RoO1xufVxuLyoqXG4gKiBAcmV0dXJucyBUaGUgcGF0aCBmcm9tIG91dGVyUGF0aCB0byBpbm5lclBhdGhcbiAqL1xuZnVuY3Rpb24gbmV3UmVsYXRpdmVQYXRoKG91dGVyUGF0aCwgaW5uZXJQYXRoKSB7XG4gICAgY29uc3Qgb3V0ZXIgPSBwYXRoR2V0RnJvbnQob3V0ZXJQYXRoKSwgaW5uZXIgPSBwYXRoR2V0RnJvbnQoaW5uZXJQYXRoKTtcbiAgICBpZiAob3V0ZXIgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGlubmVyUGF0aDtcbiAgICB9XG4gICAgZWxzZSBpZiAob3V0ZXIgPT09IGlubmVyKSB7XG4gICAgICAgIHJldHVybiBuZXdSZWxhdGl2ZVBhdGgocGF0aFBvcEZyb250KG91dGVyUGF0aCksIHBhdGhQb3BGcm9udChpbm5lclBhdGgpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSU5URVJOQUwgRVJST1I6IGlubmVyUGF0aCAoJyArXG4gICAgICAgICAgICBpbm5lclBhdGggK1xuICAgICAgICAgICAgJykgaXMgbm90IHdpdGhpbiAnICtcbiAgICAgICAgICAgICdvdXRlclBhdGggKCcgK1xuICAgICAgICAgICAgb3V0ZXJQYXRoICtcbiAgICAgICAgICAgICcpJyk7XG4gICAgfVxufVxuLyoqXG4gKiBAcmV0dXJucyAtMSwgMCwgMSBpZiBsZWZ0IGlzIGxlc3MsIGVxdWFsLCBvciBncmVhdGVyIHRoYW4gdGhlIHJpZ2h0LlxuICovXG5mdW5jdGlvbiBwYXRoQ29tcGFyZShsZWZ0LCByaWdodCkge1xuICAgIGNvbnN0IGxlZnRLZXlzID0gcGF0aFNsaWNlKGxlZnQsIDApO1xuICAgIGNvbnN0IHJpZ2h0S2V5cyA9IHBhdGhTbGljZShyaWdodCwgMCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZWZ0S2V5cy5sZW5ndGggJiYgaSA8IHJpZ2h0S2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBjbXAgPSBuYW1lQ29tcGFyZShsZWZ0S2V5c1tpXSwgcmlnaHRLZXlzW2ldKTtcbiAgICAgICAgaWYgKGNtcCAhPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGNtcDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAobGVmdEtleXMubGVuZ3RoID09PSByaWdodEtleXMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICByZXR1cm4gbGVmdEtleXMubGVuZ3RoIDwgcmlnaHRLZXlzLmxlbmd0aCA/IC0xIDogMTtcbn1cbi8qKlxuICogQHJldHVybnMgdHJ1ZSBpZiBwYXRocyBhcmUgdGhlIHNhbWUuXG4gKi9cbmZ1bmN0aW9uIHBhdGhFcXVhbHMocGF0aCwgb3RoZXIpIHtcbiAgICBpZiAocGF0aEdldExlbmd0aChwYXRoKSAhPT0gcGF0aEdldExlbmd0aChvdGhlcikpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gcGF0aC5waWVjZU51bV8sIGogPSBvdGhlci5waWVjZU51bV87IGkgPD0gcGF0aC5waWVjZXNfLmxlbmd0aDsgaSsrLCBqKyspIHtcbiAgICAgICAgaWYgKHBhdGgucGllY2VzX1tpXSAhPT0gb3RoZXIucGllY2VzX1tqXSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuLyoqXG4gKiBAcmV0dXJucyBUcnVlIGlmIHRoaXMgcGF0aCBpcyBhIHBhcmVudCBvZiAob3IgdGhlIHNhbWUgYXMpIG90aGVyXG4gKi9cbmZ1bmN0aW9uIHBhdGhDb250YWlucyhwYXRoLCBvdGhlcikge1xuICAgIGxldCBpID0gcGF0aC5waWVjZU51bV87XG4gICAgbGV0IGogPSBvdGhlci5waWVjZU51bV87XG4gICAgaWYgKHBhdGhHZXRMZW5ndGgocGF0aCkgPiBwYXRoR2V0TGVuZ3RoKG90aGVyKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHdoaWxlIChpIDwgcGF0aC5waWVjZXNfLmxlbmd0aCkge1xuICAgICAgICBpZiAocGF0aC5waWVjZXNfW2ldICE9PSBvdGhlci5waWVjZXNfW2pdKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgKytpO1xuICAgICAgICArK2o7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuLyoqXG4gKiBEeW5hbWljIChtdXRhYmxlKSBwYXRoIHVzZWQgdG8gY291bnQgcGF0aCBsZW5ndGhzLlxuICpcbiAqIFRoaXMgY2xhc3MgaXMgdXNlZCB0byBlZmZpY2llbnRseSBjaGVjayBwYXRocyBmb3IgdmFsaWRcbiAqIGxlbmd0aCAoaW4gVVRGOCBieXRlcykgYW5kIGRlcHRoICh1c2VkIGluIHBhdGggdmFsaWRhdGlvbikuXG4gKlxuICogVGhyb3dzIEVycm9yIGV4Y2VwdGlvbiBpZiBwYXRoIGlzIGV2ZXIgaW52YWxpZC5cbiAqXG4gKiBUaGUgZGVmaW5pdGlvbiBvZiBhIHBhdGggYWx3YXlzIGJlZ2lucyB3aXRoICcvJy5cbiAqL1xuY2xhc3MgVmFsaWRhdGlvblBhdGgge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBwYXRoIC0gSW5pdGlhbCBQYXRoLlxuICAgICAqIEBwYXJhbSBlcnJvclByZWZpeF8gLSBQcmVmaXggZm9yIGFueSBlcnJvciBtZXNzYWdlcy5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihwYXRoLCBlcnJvclByZWZpeF8pIHtcbiAgICAgICAgdGhpcy5lcnJvclByZWZpeF8gPSBlcnJvclByZWZpeF87XG4gICAgICAgIHRoaXMucGFydHNfID0gcGF0aFNsaWNlKHBhdGgsIDApO1xuICAgICAgICAvKiogSW5pdGlhbGl6ZSB0byBudW1iZXIgb2YgJy8nIGNoYXJzIG5lZWRlZCBpbiBwYXRoLiAqL1xuICAgICAgICB0aGlzLmJ5dGVMZW5ndGhfID0gTWF0aC5tYXgoMSwgdGhpcy5wYXJ0c18ubGVuZ3RoKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnBhcnRzXy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5ieXRlTGVuZ3RoXyArPSBzdHJpbmdMZW5ndGgodGhpcy5wYXJ0c19baV0pO1xuICAgICAgICB9XG4gICAgICAgIHZhbGlkYXRpb25QYXRoQ2hlY2tWYWxpZCh0aGlzKTtcbiAgICB9XG59XG5mdW5jdGlvbiB2YWxpZGF0aW9uUGF0aFB1c2godmFsaWRhdGlvblBhdGgsIGNoaWxkKSB7XG4gICAgLy8gQ291bnQgdGhlIG5lZWRlZCAnLydcbiAgICBpZiAodmFsaWRhdGlvblBhdGgucGFydHNfLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdmFsaWRhdGlvblBhdGguYnl0ZUxlbmd0aF8gKz0gMTtcbiAgICB9XG4gICAgdmFsaWRhdGlvblBhdGgucGFydHNfLnB1c2goY2hpbGQpO1xuICAgIHZhbGlkYXRpb25QYXRoLmJ5dGVMZW5ndGhfICs9IHN0cmluZ0xlbmd0aChjaGlsZCk7XG4gICAgdmFsaWRhdGlvblBhdGhDaGVja1ZhbGlkKHZhbGlkYXRpb25QYXRoKTtcbn1cbmZ1bmN0aW9uIHZhbGlkYXRpb25QYXRoUG9wKHZhbGlkYXRpb25QYXRoKSB7XG4gICAgY29uc3QgbGFzdCA9IHZhbGlkYXRpb25QYXRoLnBhcnRzXy5wb3AoKTtcbiAgICB2YWxpZGF0aW9uUGF0aC5ieXRlTGVuZ3RoXyAtPSBzdHJpbmdMZW5ndGgobGFzdCk7XG4gICAgLy8gVW4tY291bnQgdGhlIHByZXZpb3VzICcvJ1xuICAgIGlmICh2YWxpZGF0aW9uUGF0aC5wYXJ0c18ubGVuZ3RoID4gMCkge1xuICAgICAgICB2YWxpZGF0aW9uUGF0aC5ieXRlTGVuZ3RoXyAtPSAxO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHZhbGlkYXRpb25QYXRoQ2hlY2tWYWxpZCh2YWxpZGF0aW9uUGF0aCkge1xuICAgIGlmICh2YWxpZGF0aW9uUGF0aC5ieXRlTGVuZ3RoXyA+IE1BWF9QQVRIX0xFTkdUSF9CWVRFUykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IodmFsaWRhdGlvblBhdGguZXJyb3JQcmVmaXhfICtcbiAgICAgICAgICAgICdoYXMgYSBrZXkgcGF0aCBsb25nZXIgdGhhbiAnICtcbiAgICAgICAgICAgIE1BWF9QQVRIX0xFTkdUSF9CWVRFUyArXG4gICAgICAgICAgICAnIGJ5dGVzICgnICtcbiAgICAgICAgICAgIHZhbGlkYXRpb25QYXRoLmJ5dGVMZW5ndGhfICtcbiAgICAgICAgICAgICcpLicpO1xuICAgIH1cbiAgICBpZiAodmFsaWRhdGlvblBhdGgucGFydHNfLmxlbmd0aCA+IE1BWF9QQVRIX0RFUFRIKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcih2YWxpZGF0aW9uUGF0aC5lcnJvclByZWZpeF8gK1xuICAgICAgICAgICAgJ3BhdGggc3BlY2lmaWVkIGV4Y2VlZHMgdGhlIG1heGltdW0gZGVwdGggdGhhdCBjYW4gYmUgd3JpdHRlbiAoJyArXG4gICAgICAgICAgICBNQVhfUEFUSF9ERVBUSCArXG4gICAgICAgICAgICAnKSBvciBvYmplY3QgY29udGFpbnMgYSBjeWNsZSAnICtcbiAgICAgICAgICAgIHZhbGlkYXRpb25QYXRoVG9FcnJvclN0cmluZyh2YWxpZGF0aW9uUGF0aCkpO1xuICAgIH1cbn1cbi8qKlxuICogU3RyaW5nIGZvciB1c2UgaW4gZXJyb3IgbWVzc2FnZXMgLSB1c2VzICcuJyBub3RhdGlvbiBmb3IgcGF0aC5cbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGlvblBhdGhUb0Vycm9yU3RyaW5nKHZhbGlkYXRpb25QYXRoKSB7XG4gICAgaWYgKHZhbGlkYXRpb25QYXRoLnBhcnRzXy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICByZXR1cm4gXCJpbiBwcm9wZXJ0eSAnXCIgKyB2YWxpZGF0aW9uUGF0aC5wYXJ0c18uam9pbignLicpICsgXCInXCI7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jbGFzcyBWaXNpYmlsaXR5TW9uaXRvciBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gICAgc3RhdGljIGdldEluc3RhbmNlKCkge1xuICAgICAgICByZXR1cm4gbmV3IFZpc2liaWxpdHlNb25pdG9yKCk7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcihbJ3Zpc2libGUnXSk7XG4gICAgICAgIGxldCBoaWRkZW47XG4gICAgICAgIGxldCB2aXNpYmlsaXR5Q2hhbmdlO1xuICAgICAgICBpZiAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgICAgdHlwZW9mIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGRvY3VtZW50WydoaWRkZW4nXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAvLyBPcGVyYSAxMi4xMCBhbmQgRmlyZWZveCAxOCBhbmQgbGF0ZXIgc3VwcG9ydFxuICAgICAgICAgICAgICAgIHZpc2liaWxpdHlDaGFuZ2UgPSAndmlzaWJpbGl0eWNoYW5nZSc7XG4gICAgICAgICAgICAgICAgaGlkZGVuID0gJ2hpZGRlbic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgZG9jdW1lbnRbJ21vekhpZGRlbiddICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHZpc2liaWxpdHlDaGFuZ2UgPSAnbW96dmlzaWJpbGl0eWNoYW5nZSc7XG4gICAgICAgICAgICAgICAgaGlkZGVuID0gJ21vekhpZGRlbic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgZG9jdW1lbnRbJ21zSGlkZGVuJ10gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgdmlzaWJpbGl0eUNoYW5nZSA9ICdtc3Zpc2liaWxpdHljaGFuZ2UnO1xuICAgICAgICAgICAgICAgIGhpZGRlbiA9ICdtc0hpZGRlbic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgZG9jdW1lbnRbJ3dlYmtpdEhpZGRlbiddICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHZpc2liaWxpdHlDaGFuZ2UgPSAnd2Via2l0dmlzaWJpbGl0eWNoYW5nZSc7XG4gICAgICAgICAgICAgICAgaGlkZGVuID0gJ3dlYmtpdEhpZGRlbic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gSW5pdGlhbGx5LCB3ZSBhbHdheXMgYXNzdW1lIHdlIGFyZSB2aXNpYmxlLiBUaGlzIGVuc3VyZXMgdGhhdCBpbiBicm93c2Vyc1xuICAgICAgICAvLyB3aXRob3V0IHBhZ2UgdmlzaWJpbGl0eSBzdXBwb3J0IG9yIGluIGNhc2VzIHdoZXJlIHdlIGFyZSBuZXZlciB2aXNpYmxlXG4gICAgICAgIC8vIChlLmcuIGNocm9tZSBleHRlbnNpb24pLCB3ZSBhY3QgYXMgaWYgd2UgYXJlIHZpc2libGUsIGkuZS4gZG9uJ3QgZGVsYXlcbiAgICAgICAgLy8gcmVjb25uZWN0c1xuICAgICAgICB0aGlzLnZpc2libGVfID0gdHJ1ZTtcbiAgICAgICAgaWYgKHZpc2liaWxpdHlDaGFuZ2UpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIodmlzaWJpbGl0eUNoYW5nZSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZpc2libGUgPSAhZG9jdW1lbnRbaGlkZGVuXTtcbiAgICAgICAgICAgICAgICBpZiAodmlzaWJsZSAhPT0gdGhpcy52aXNpYmxlXykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpc2libGVfID0gdmlzaWJsZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCd2aXNpYmxlJywgdmlzaWJsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldEluaXRpYWxFdmVudChldmVudFR5cGUpIHtcbiAgICAgICAgYXNzZXJ0KGV2ZW50VHlwZSA9PT0gJ3Zpc2libGUnLCAnVW5rbm93biBldmVudCB0eXBlOiAnICsgZXZlbnRUeXBlKTtcbiAgICAgICAgcmV0dXJuIFt0aGlzLnZpc2libGVfXTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jb25zdCBSRUNPTk5FQ1RfTUlOX0RFTEFZID0gMTAwMDtcbmNvbnN0IFJFQ09OTkVDVF9NQVhfREVMQVlfREVGQVVMVCA9IDYwICogNSAqIDEwMDA7IC8vIDUgbWludXRlcyBpbiBtaWxsaXNlY29uZHMgKENhc2U6IDE4NTgpXG5jb25zdCBSRUNPTk5FQ1RfTUFYX0RFTEFZX0ZPUl9BRE1JTlMgPSAzMCAqIDEwMDA7IC8vIDMwIHNlY29uZHMgZm9yIGFkbWluIGNsaWVudHMgKGxpa2VseSB0byBiZSBhIGJhY2tlbmQgc2VydmVyKVxuY29uc3QgUkVDT05ORUNUX0RFTEFZX01VTFRJUExJRVIgPSAxLjM7XG5jb25zdCBSRUNPTk5FQ1RfREVMQVlfUkVTRVRfVElNRU9VVCA9IDMwMDAwOyAvLyBSZXNldCBkZWxheSBiYWNrIHRvIE1JTl9ERUxBWSBhZnRlciBiZWluZyBjb25uZWN0ZWQgZm9yIDMwc2VjLlxuY29uc3QgU0VSVkVSX0tJTExfSU5URVJSVVBUX1JFQVNPTiA9ICdzZXJ2ZXJfa2lsbCc7XG4vLyBJZiBhdXRoIGZhaWxzIHJlcGVhdGVkbHksIHdlJ2xsIGFzc3VtZSBzb21ldGhpbmcgaXMgd3JvbmcgYW5kIGxvZyBhIHdhcm5pbmcgLyBiYWNrIG9mZi5cbmNvbnN0IElOVkFMSURfVE9LRU5fVEhSRVNIT0xEID0gMztcbi8qKlxuICogRmlyZWJhc2UgY29ubmVjdGlvbi4gIEFic3RyYWN0cyB3aXJlIHByb3RvY29sIGFuZCBoYW5kbGVzIHJlY29ubmVjdGluZy5cbiAqXG4gKiBOT1RFOiBBbGwgSlNPTiBvYmplY3RzIHNlbnQgdG8gdGhlIHJlYWx0aW1lIGNvbm5lY3Rpb24gbXVzdCBoYXZlIHByb3BlcnR5IG5hbWVzIGVuY2xvc2VkXG4gKiBpbiBxdW90ZXMgdG8gbWFrZSBzdXJlIHRoZSBjbG9zdXJlIGNvbXBpbGVyIGRvZXMgbm90IG1pbmlmeSB0aGVtLlxuICovXG5jbGFzcyBQZXJzaXN0ZW50Q29ubmVjdGlvbiBleHRlbmRzIFNlcnZlckFjdGlvbnMge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSByZXBvSW5mb18gLSBEYXRhIGFib3V0IHRoZSBuYW1lc3BhY2Ugd2UgYXJlIGNvbm5lY3RpbmcgdG9cbiAgICAgKiBAcGFyYW0gYXBwbGljYXRpb25JZF8gLSBUaGUgRmlyZWJhc2UgQXBwIElEIGZvciB0aGlzIHByb2plY3RcbiAgICAgKiBAcGFyYW0gb25EYXRhVXBkYXRlXyAtIEEgY2FsbGJhY2sgZm9yIG5ldyBkYXRhIGZyb20gdGhlIHNlcnZlclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHJlcG9JbmZvXywgYXBwbGljYXRpb25JZF8sIG9uRGF0YVVwZGF0ZV8sIG9uQ29ubmVjdFN0YXR1c18sIG9uU2VydmVySW5mb1VwZGF0ZV8sIGF1dGhUb2tlblByb3ZpZGVyXywgYXBwQ2hlY2tUb2tlblByb3ZpZGVyXywgYXV0aE92ZXJyaWRlXykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJlcG9JbmZvXyA9IHJlcG9JbmZvXztcbiAgICAgICAgdGhpcy5hcHBsaWNhdGlvbklkXyA9IGFwcGxpY2F0aW9uSWRfO1xuICAgICAgICB0aGlzLm9uRGF0YVVwZGF0ZV8gPSBvbkRhdGFVcGRhdGVfO1xuICAgICAgICB0aGlzLm9uQ29ubmVjdFN0YXR1c18gPSBvbkNvbm5lY3RTdGF0dXNfO1xuICAgICAgICB0aGlzLm9uU2VydmVySW5mb1VwZGF0ZV8gPSBvblNlcnZlckluZm9VcGRhdGVfO1xuICAgICAgICB0aGlzLmF1dGhUb2tlblByb3ZpZGVyXyA9IGF1dGhUb2tlblByb3ZpZGVyXztcbiAgICAgICAgdGhpcy5hcHBDaGVja1Rva2VuUHJvdmlkZXJfID0gYXBwQ2hlY2tUb2tlblByb3ZpZGVyXztcbiAgICAgICAgdGhpcy5hdXRoT3ZlcnJpZGVfID0gYXV0aE92ZXJyaWRlXztcbiAgICAgICAgLy8gVXNlZCBmb3IgZGlhZ25vc3RpYyBsb2dnaW5nLlxuICAgICAgICB0aGlzLmlkID0gUGVyc2lzdGVudENvbm5lY3Rpb24ubmV4dFBlcnNpc3RlbnRDb25uZWN0aW9uSWRfKys7XG4gICAgICAgIHRoaXMubG9nXyA9IGxvZ1dyYXBwZXIoJ3A6JyArIHRoaXMuaWQgKyAnOicpO1xuICAgICAgICB0aGlzLmludGVycnVwdFJlYXNvbnNfID0ge307XG4gICAgICAgIHRoaXMubGlzdGVucyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5vdXRzdGFuZGluZ1B1dHNfID0gW107XG4gICAgICAgIHRoaXMub3V0c3RhbmRpbmdHZXRzXyA9IFtdO1xuICAgICAgICB0aGlzLm91dHN0YW5kaW5nUHV0Q291bnRfID0gMDtcbiAgICAgICAgdGhpcy5vdXRzdGFuZGluZ0dldENvdW50XyA9IDA7XG4gICAgICAgIHRoaXMub25EaXNjb25uZWN0UmVxdWVzdFF1ZXVlXyA9IFtdO1xuICAgICAgICB0aGlzLmNvbm5lY3RlZF8gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5yZWNvbm5lY3REZWxheV8gPSBSRUNPTk5FQ1RfTUlOX0RFTEFZO1xuICAgICAgICB0aGlzLm1heFJlY29ubmVjdERlbGF5XyA9IFJFQ09OTkVDVF9NQVhfREVMQVlfREVGQVVMVDtcbiAgICAgICAgdGhpcy5zZWN1cml0eURlYnVnQ2FsbGJhY2tfID0gbnVsbDtcbiAgICAgICAgdGhpcy5sYXN0U2Vzc2lvbklkID0gbnVsbDtcbiAgICAgICAgdGhpcy5lc3RhYmxpc2hDb25uZWN0aW9uVGltZXJfID0gbnVsbDtcbiAgICAgICAgdGhpcy52aXNpYmxlXyA9IGZhbHNlO1xuICAgICAgICAvLyBCZWZvcmUgd2UgZ2V0IGNvbm5lY3RlZCwgd2Uga2VlcCBhIHF1ZXVlIG9mIHBlbmRpbmcgbWVzc2FnZXMgdG8gc2VuZC5cbiAgICAgICAgdGhpcy5yZXF1ZXN0Q0JIYXNoXyA9IHt9O1xuICAgICAgICB0aGlzLnJlcXVlc3ROdW1iZXJfID0gMDtcbiAgICAgICAgdGhpcy5yZWFsdGltZV8gPSBudWxsO1xuICAgICAgICB0aGlzLmF1dGhUb2tlbl8gPSBudWxsO1xuICAgICAgICB0aGlzLmFwcENoZWNrVG9rZW5fID0gbnVsbDtcbiAgICAgICAgdGhpcy5mb3JjZVRva2VuUmVmcmVzaF8gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pbnZhbGlkQXV0aFRva2VuQ291bnRfID0gMDtcbiAgICAgICAgdGhpcy5pbnZhbGlkQXBwQ2hlY2tUb2tlbkNvdW50XyA9IDA7XG4gICAgICAgIHRoaXMuZmlyc3RDb25uZWN0aW9uXyA9IHRydWU7XG4gICAgICAgIHRoaXMubGFzdENvbm5lY3Rpb25BdHRlbXB0VGltZV8gPSBudWxsO1xuICAgICAgICB0aGlzLmxhc3RDb25uZWN0aW9uRXN0YWJsaXNoZWRUaW1lXyA9IG51bGw7XG4gICAgICAgIGlmIChhdXRoT3ZlcnJpZGVfICYmICFpc05vZGVTZGsoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBdXRoIG92ZXJyaWRlIHNwZWNpZmllZCBpbiBvcHRpb25zLCBidXQgbm90IHN1cHBvcnRlZCBvbiBub24gTm9kZS5qcyBwbGF0Zm9ybXMnKTtcbiAgICAgICAgfVxuICAgICAgICBWaXNpYmlsaXR5TW9uaXRvci5nZXRJbnN0YW5jZSgpLm9uKCd2aXNpYmxlJywgdGhpcy5vblZpc2libGVfLCB0aGlzKTtcbiAgICAgICAgaWYgKHJlcG9JbmZvXy5ob3N0LmluZGV4T2YoJ2ZibG9jYWwnKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIE9ubGluZU1vbml0b3IuZ2V0SW5zdGFuY2UoKS5vbignb25saW5lJywgdGhpcy5vbk9ubGluZV8sIHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNlbmRSZXF1ZXN0KGFjdGlvbiwgYm9keSwgb25SZXNwb25zZSkge1xuICAgICAgICBjb25zdCBjdXJSZXFOdW0gPSArK3RoaXMucmVxdWVzdE51bWJlcl87XG4gICAgICAgIGNvbnN0IG1zZyA9IHsgcjogY3VyUmVxTnVtLCBhOiBhY3Rpb24sIGI6IGJvZHkgfTtcbiAgICAgICAgdGhpcy5sb2dfKHN0cmluZ2lmeShtc2cpKTtcbiAgICAgICAgYXNzZXJ0KHRoaXMuY29ubmVjdGVkXywgXCJzZW5kUmVxdWVzdCBjYWxsIHdoZW4gd2UncmUgbm90IGNvbm5lY3RlZCBub3QgYWxsb3dlZC5cIik7XG4gICAgICAgIHRoaXMucmVhbHRpbWVfLnNlbmRSZXF1ZXN0KG1zZyk7XG4gICAgICAgIGlmIChvblJlc3BvbnNlKSB7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RDQkhhc2hfW2N1clJlcU51bV0gPSBvblJlc3BvbnNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldChxdWVyeSkge1xuICAgICAgICB0aGlzLmluaXRDb25uZWN0aW9uXygpO1xuICAgICAgICBjb25zdCBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpO1xuICAgICAgICBjb25zdCByZXF1ZXN0ID0ge1xuICAgICAgICAgICAgcDogcXVlcnkuX3BhdGgudG9TdHJpbmcoKSxcbiAgICAgICAgICAgIHE6IHF1ZXJ5Ll9xdWVyeU9iamVjdFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBvdXRzdGFuZGluZ0dldCA9IHtcbiAgICAgICAgICAgIGFjdGlvbjogJ2cnLFxuICAgICAgICAgICAgcmVxdWVzdCxcbiAgICAgICAgICAgIG9uQ29tcGxldGU6IChtZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGF5bG9hZCA9IG1lc3NhZ2VbJ2QnXTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZVsncyddID09PSAnb2snKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUocGF5bG9hZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QocGF5bG9hZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLm91dHN0YW5kaW5nR2V0c18ucHVzaChvdXRzdGFuZGluZ0dldCk7XG4gICAgICAgIHRoaXMub3V0c3RhbmRpbmdHZXRDb3VudF8rKztcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLm91dHN0YW5kaW5nR2V0c18ubGVuZ3RoIC0gMTtcbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdGVkXykge1xuICAgICAgICAgICAgdGhpcy5zZW5kR2V0XyhpbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfVxuICAgIGxpc3RlbihxdWVyeSwgY3VycmVudEhhc2hGbiwgdGFnLCBvbkNvbXBsZXRlKSB7XG4gICAgICAgIHRoaXMuaW5pdENvbm5lY3Rpb25fKCk7XG4gICAgICAgIGNvbnN0IHF1ZXJ5SWQgPSBxdWVyeS5fcXVlcnlJZGVudGlmaWVyO1xuICAgICAgICBjb25zdCBwYXRoU3RyaW5nID0gcXVlcnkuX3BhdGgudG9TdHJpbmcoKTtcbiAgICAgICAgdGhpcy5sb2dfKCdMaXN0ZW4gY2FsbGVkIGZvciAnICsgcGF0aFN0cmluZyArICcgJyArIHF1ZXJ5SWQpO1xuICAgICAgICBpZiAoIXRoaXMubGlzdGVucy5oYXMocGF0aFN0cmluZykpIHtcbiAgICAgICAgICAgIHRoaXMubGlzdGVucy5zZXQocGF0aFN0cmluZywgbmV3IE1hcCgpKTtcbiAgICAgICAgfVxuICAgICAgICBhc3NlcnQocXVlcnkuX3F1ZXJ5UGFyYW1zLmlzRGVmYXVsdCgpIHx8ICFxdWVyeS5fcXVlcnlQYXJhbXMubG9hZHNBbGxEYXRhKCksICdsaXN0ZW4oKSBjYWxsZWQgZm9yIG5vbi1kZWZhdWx0IGJ1dCBjb21wbGV0ZSBxdWVyeScpO1xuICAgICAgICBhc3NlcnQoIXRoaXMubGlzdGVucy5nZXQocGF0aFN0cmluZykuaGFzKHF1ZXJ5SWQpLCBgbGlzdGVuKCkgY2FsbGVkIHR3aWNlIGZvciBzYW1lIHBhdGgvcXVlcnlJZC5gKTtcbiAgICAgICAgY29uc3QgbGlzdGVuU3BlYyA9IHtcbiAgICAgICAgICAgIG9uQ29tcGxldGUsXG4gICAgICAgICAgICBoYXNoRm46IGN1cnJlbnRIYXNoRm4sXG4gICAgICAgICAgICBxdWVyeSxcbiAgICAgICAgICAgIHRhZ1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmxpc3RlbnMuZ2V0KHBhdGhTdHJpbmcpLnNldChxdWVyeUlkLCBsaXN0ZW5TcGVjKTtcbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdGVkXykge1xuICAgICAgICAgICAgdGhpcy5zZW5kTGlzdGVuXyhsaXN0ZW5TcGVjKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZW5kR2V0XyhpbmRleCkge1xuICAgICAgICBjb25zdCBnZXQgPSB0aGlzLm91dHN0YW5kaW5nR2V0c19baW5kZXhdO1xuICAgICAgICB0aGlzLnNlbmRSZXF1ZXN0KCdnJywgZ2V0LnJlcXVlc3QsIChtZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5vdXRzdGFuZGluZ0dldHNfW2luZGV4XTtcbiAgICAgICAgICAgIHRoaXMub3V0c3RhbmRpbmdHZXRDb3VudF8tLTtcbiAgICAgICAgICAgIGlmICh0aGlzLm91dHN0YW5kaW5nR2V0Q291bnRfID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vdXRzdGFuZGluZ0dldHNfID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ2V0Lm9uQ29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICBnZXQub25Db21wbGV0ZShtZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNlbmRMaXN0ZW5fKGxpc3RlblNwZWMpIHtcbiAgICAgICAgY29uc3QgcXVlcnkgPSBsaXN0ZW5TcGVjLnF1ZXJ5O1xuICAgICAgICBjb25zdCBwYXRoU3RyaW5nID0gcXVlcnkuX3BhdGgudG9TdHJpbmcoKTtcbiAgICAgICAgY29uc3QgcXVlcnlJZCA9IHF1ZXJ5Ll9xdWVyeUlkZW50aWZpZXI7XG4gICAgICAgIHRoaXMubG9nXygnTGlzdGVuIG9uICcgKyBwYXRoU3RyaW5nICsgJyBmb3IgJyArIHF1ZXJ5SWQpO1xuICAgICAgICBjb25zdCByZXEgPSB7IC8qcGF0aCovIHA6IHBhdGhTdHJpbmcgfTtcbiAgICAgICAgY29uc3QgYWN0aW9uID0gJ3EnO1xuICAgICAgICAvLyBPbmx5IGJvdGhlciB0byBzZW5kIHF1ZXJ5IGlmIGl0J3Mgbm9uLWRlZmF1bHQuXG4gICAgICAgIGlmIChsaXN0ZW5TcGVjLnRhZykge1xuICAgICAgICAgICAgcmVxWydxJ10gPSBxdWVyeS5fcXVlcnlPYmplY3Q7XG4gICAgICAgICAgICByZXFbJ3QnXSA9IGxpc3RlblNwZWMudGFnO1xuICAgICAgICB9XG4gICAgICAgIHJlcVsgLypoYXNoKi8naCddID0gbGlzdGVuU3BlYy5oYXNoRm4oKTtcbiAgICAgICAgdGhpcy5zZW5kUmVxdWVzdChhY3Rpb24sIHJlcSwgKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSBtZXNzYWdlWyAvKmRhdGEqLydkJ107XG4gICAgICAgICAgICBjb25zdCBzdGF0dXMgPSBtZXNzYWdlWyAvKnN0YXR1cyovJ3MnXTtcbiAgICAgICAgICAgIC8vIHByaW50IHdhcm5pbmdzIGluIGFueSBjYXNlLi4uXG4gICAgICAgICAgICBQZXJzaXN0ZW50Q29ubmVjdGlvbi53YXJuT25MaXN0ZW5XYXJuaW5nc18ocGF5bG9hZCwgcXVlcnkpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudExpc3RlblNwZWMgPSB0aGlzLmxpc3RlbnMuZ2V0KHBhdGhTdHJpbmcpICYmXG4gICAgICAgICAgICAgICAgdGhpcy5saXN0ZW5zLmdldChwYXRoU3RyaW5nKS5nZXQocXVlcnlJZCk7XG4gICAgICAgICAgICAvLyBvbmx5IHRyaWdnZXIgYWN0aW9ucyBpZiB0aGUgbGlzdGVuIGhhc24ndCBiZWVuIHJlbW92ZWQgYW5kIHJlYWRkZWRcbiAgICAgICAgICAgIGlmIChjdXJyZW50TGlzdGVuU3BlYyA9PT0gbGlzdGVuU3BlYykge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nXygnbGlzdGVuIHJlc3BvbnNlJywgbWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gJ29rJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUxpc3Rlbl8ocGF0aFN0cmluZywgcXVlcnlJZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChsaXN0ZW5TcGVjLm9uQ29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbGlzdGVuU3BlYy5vbkNvbXBsZXRlKHN0YXR1cywgcGF5bG9hZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIHdhcm5Pbkxpc3Rlbldhcm5pbmdzXyhwYXlsb2FkLCBxdWVyeSkge1xuICAgICAgICBpZiAocGF5bG9hZCAmJiB0eXBlb2YgcGF5bG9hZCA9PT0gJ29iamVjdCcgJiYgY29udGFpbnMocGF5bG9hZCwgJ3cnKSkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgIGNvbnN0IHdhcm5pbmdzID0gc2FmZUdldChwYXlsb2FkLCAndycpO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkod2FybmluZ3MpICYmIH53YXJuaW5ncy5pbmRleE9mKCdub19pbmRleCcpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXhTcGVjID0gJ1wiLmluZGV4T25cIjogXCInICsgcXVlcnkuX3F1ZXJ5UGFyYW1zLmdldEluZGV4KCkudG9TdHJpbmcoKSArICdcIic7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXhQYXRoID0gcXVlcnkuX3BhdGgudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB3YXJuKGBVc2luZyBhbiB1bnNwZWNpZmllZCBpbmRleC4gWW91ciBkYXRhIHdpbGwgYmUgZG93bmxvYWRlZCBhbmQgYCArXG4gICAgICAgICAgICAgICAgICAgIGBmaWx0ZXJlZCBvbiB0aGUgY2xpZW50LiBDb25zaWRlciBhZGRpbmcgJHtpbmRleFNwZWN9IGF0IGAgK1xuICAgICAgICAgICAgICAgICAgICBgJHtpbmRleFBhdGh9IHRvIHlvdXIgc2VjdXJpdHkgcnVsZXMgZm9yIGJldHRlciBwZXJmb3JtYW5jZS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZWZyZXNoQXV0aFRva2VuKHRva2VuKSB7XG4gICAgICAgIHRoaXMuYXV0aFRva2VuXyA9IHRva2VuO1xuICAgICAgICB0aGlzLmxvZ18oJ0F1dGggdG9rZW4gcmVmcmVzaGVkJyk7XG4gICAgICAgIGlmICh0aGlzLmF1dGhUb2tlbl8pIHtcbiAgICAgICAgICAgIHRoaXMudHJ5QXV0aCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy9JZiB3ZSdyZSBjb25uZWN0ZWQgd2Ugd2FudCB0byBsZXQgdGhlIHNlcnZlciBrbm93IHRvIHVuYXV0aGVudGljYXRlIHVzLiBJZiB3ZSdyZSBub3QgY29ubmVjdGVkLCBzaW1wbHkgZGVsZXRlXG4gICAgICAgICAgICAvL3RoZSBjcmVkZW50aWFsIHNvIHdlIGRvbnQgYmVjb21lIGF1dGhlbnRpY2F0ZWQgbmV4dCB0aW1lIHdlIGNvbm5lY3QuXG4gICAgICAgICAgICBpZiAodGhpcy5jb25uZWN0ZWRfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kUmVxdWVzdCgndW5hdXRoJywge30sICgpID0+IHsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZWR1Y2VSZWNvbm5lY3REZWxheUlmQWRtaW5DcmVkZW50aWFsXyh0b2tlbik7XG4gICAgfVxuICAgIHJlZHVjZVJlY29ubmVjdERlbGF5SWZBZG1pbkNyZWRlbnRpYWxfKGNyZWRlbnRpYWwpIHtcbiAgICAgICAgLy8gTk9URTogVGhpcyBpc24ndCBpbnRlbmRlZCB0byBiZSBidWxsZXRwcm9vZiAoYSBtYWxpY2lvdXMgZGV2ZWxvcGVyIGNhbiBhbHdheXMganVzdCBtb2RpZnkgdGhlIGNsaWVudCkuXG4gICAgICAgIC8vIEFkZGl0aW9uYWxseSwgd2UgZG9uJ3QgYm90aGVyIHJlc2V0dGluZyB0aGUgbWF4IGRlbGF5IGJhY2sgdG8gdGhlIGRlZmF1bHQgaWYgYXV0aCBmYWlscyAvIGV4cGlyZXMuXG4gICAgICAgIGNvbnN0IGlzRmlyZWJhc2VTZWNyZXQgPSBjcmVkZW50aWFsICYmIGNyZWRlbnRpYWwubGVuZ3RoID09PSA0MDtcbiAgICAgICAgaWYgKGlzRmlyZWJhc2VTZWNyZXQgfHwgaXNBZG1pbihjcmVkZW50aWFsKSkge1xuICAgICAgICAgICAgdGhpcy5sb2dfKCdBZG1pbiBhdXRoIGNyZWRlbnRpYWwgZGV0ZWN0ZWQuICBSZWR1Y2luZyBtYXggcmVjb25uZWN0IHRpbWUuJyk7XG4gICAgICAgICAgICB0aGlzLm1heFJlY29ubmVjdERlbGF5XyA9IFJFQ09OTkVDVF9NQVhfREVMQVlfRk9SX0FETUlOUztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZWZyZXNoQXBwQ2hlY2tUb2tlbih0b2tlbikge1xuICAgICAgICB0aGlzLmFwcENoZWNrVG9rZW5fID0gdG9rZW47XG4gICAgICAgIHRoaXMubG9nXygnQXBwIGNoZWNrIHRva2VuIHJlZnJlc2hlZCcpO1xuICAgICAgICBpZiAodGhpcy5hcHBDaGVja1Rva2VuXykge1xuICAgICAgICAgICAgdGhpcy50cnlBcHBDaGVjaygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy9JZiB3ZSdyZSBjb25uZWN0ZWQgd2Ugd2FudCB0byBsZXQgdGhlIHNlcnZlciBrbm93IHRvIHVuYXV0aGVudGljYXRlIHVzLlxuICAgICAgICAgICAgLy9JZiB3ZSdyZSBub3QgY29ubmVjdGVkLCBzaW1wbHkgZGVsZXRlIHRoZSBjcmVkZW50aWFsIHNvIHdlIGRvbnQgYmVjb21lXG4gICAgICAgICAgICAvLyBhdXRoZW50aWNhdGVkIG5leHQgdGltZSB3ZSBjb25uZWN0LlxuICAgICAgICAgICAgaWYgKHRoaXMuY29ubmVjdGVkXykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VuZFJlcXVlc3QoJ3VuYXBwZWNrJywge30sICgpID0+IHsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQXR0ZW1wdHMgdG8gYXV0aGVudGljYXRlIHdpdGggdGhlIGdpdmVuIGNyZWRlbnRpYWxzLiBJZiB0aGUgYXV0aGVudGljYXRpb24gYXR0ZW1wdCBmYWlscywgaXQncyB0cmlnZ2VyZWQgbGlrZVxuICAgICAqIGEgYXV0aCByZXZva2VkICh0aGUgY29ubmVjdGlvbiBpcyBjbG9zZWQpLlxuICAgICAqL1xuICAgIHRyeUF1dGgoKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbm5lY3RlZF8gJiYgdGhpcy5hdXRoVG9rZW5fKSB7XG4gICAgICAgICAgICBjb25zdCB0b2tlbiA9IHRoaXMuYXV0aFRva2VuXztcbiAgICAgICAgICAgIGNvbnN0IGF1dGhNZXRob2QgPSBpc1ZhbGlkRm9ybWF0KHRva2VuKSA/ICdhdXRoJyA6ICdnYXV0aCc7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0RGF0YSA9IHsgY3JlZDogdG9rZW4gfTtcbiAgICAgICAgICAgIGlmICh0aGlzLmF1dGhPdmVycmlkZV8gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0RGF0YVsnbm9hdXRoJ10gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHRoaXMuYXV0aE92ZXJyaWRlXyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0RGF0YVsnYXV0aHZhciddID0gdGhpcy5hdXRoT3ZlcnJpZGVfO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZW5kUmVxdWVzdChhdXRoTWV0aG9kLCByZXF1ZXN0RGF0YSwgKHJlcykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IHJlc1sgLypzdGF0dXMqLydzJ107XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHJlc1sgLypkYXRhKi8nZCddIHx8ICdlcnJvcic7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYXV0aFRva2VuXyA9PT0gdG9rZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gJ29rJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnZhbGlkQXV0aFRva2VuQ291bnRfID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyaWdnZXJzIHJlY29ubmVjdCBhbmQgZm9yY2UgcmVmcmVzaCBmb3IgYXV0aCB0b2tlblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkF1dGhSZXZva2VkXyhzdGF0dXMsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQXR0ZW1wdHMgdG8gYXV0aGVudGljYXRlIHdpdGggdGhlIGdpdmVuIHRva2VuLiBJZiB0aGUgYXV0aGVudGljYXRpb25cbiAgICAgKiBhdHRlbXB0IGZhaWxzLCBpdCdzIHRyaWdnZXJlZCBsaWtlIHRoZSB0b2tlbiB3YXMgcmV2b2tlZCAodGhlIGNvbm5lY3Rpb24gaXNcbiAgICAgKiBjbG9zZWQpLlxuICAgICAqL1xuICAgIHRyeUFwcENoZWNrKCkge1xuICAgICAgICBpZiAodGhpcy5jb25uZWN0ZWRfICYmIHRoaXMuYXBwQ2hlY2tUb2tlbl8pIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZFJlcXVlc3QoJ2FwcGNoZWNrJywgeyAndG9rZW4nOiB0aGlzLmFwcENoZWNrVG9rZW5fIH0sIChyZXMpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGF0dXMgPSByZXNbIC8qc3RhdHVzKi8ncyddO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSByZXNbIC8qZGF0YSovJ2QnXSB8fCAnZXJyb3InO1xuICAgICAgICAgICAgICAgIGlmIChzdGF0dXMgPT09ICdvaycpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnZhbGlkQXBwQ2hlY2tUb2tlbkNvdW50XyA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQXBwQ2hlY2tSZXZva2VkXyhzdGF0dXMsIGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbmhlcml0RG9jXG4gICAgICovXG4gICAgdW5saXN0ZW4ocXVlcnksIHRhZykge1xuICAgICAgICBjb25zdCBwYXRoU3RyaW5nID0gcXVlcnkuX3BhdGgudG9TdHJpbmcoKTtcbiAgICAgICAgY29uc3QgcXVlcnlJZCA9IHF1ZXJ5Ll9xdWVyeUlkZW50aWZpZXI7XG4gICAgICAgIHRoaXMubG9nXygnVW5saXN0ZW4gY2FsbGVkIGZvciAnICsgcGF0aFN0cmluZyArICcgJyArIHF1ZXJ5SWQpO1xuICAgICAgICBhc3NlcnQocXVlcnkuX3F1ZXJ5UGFyYW1zLmlzRGVmYXVsdCgpIHx8ICFxdWVyeS5fcXVlcnlQYXJhbXMubG9hZHNBbGxEYXRhKCksICd1bmxpc3RlbigpIGNhbGxlZCBmb3Igbm9uLWRlZmF1bHQgYnV0IGNvbXBsZXRlIHF1ZXJ5Jyk7XG4gICAgICAgIGNvbnN0IGxpc3RlbiA9IHRoaXMucmVtb3ZlTGlzdGVuXyhwYXRoU3RyaW5nLCBxdWVyeUlkKTtcbiAgICAgICAgaWYgKGxpc3RlbiAmJiB0aGlzLmNvbm5lY3RlZF8pIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZFVubGlzdGVuXyhwYXRoU3RyaW5nLCBxdWVyeUlkLCBxdWVyeS5fcXVlcnlPYmplY3QsIHRhZyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2VuZFVubGlzdGVuXyhwYXRoU3RyaW5nLCBxdWVyeUlkLCBxdWVyeU9iaiwgdGFnKSB7XG4gICAgICAgIHRoaXMubG9nXygnVW5saXN0ZW4gb24gJyArIHBhdGhTdHJpbmcgKyAnIGZvciAnICsgcXVlcnlJZCk7XG4gICAgICAgIGNvbnN0IHJlcSA9IHsgLypwYXRoKi8gcDogcGF0aFN0cmluZyB9O1xuICAgICAgICBjb25zdCBhY3Rpb24gPSAnbic7XG4gICAgICAgIC8vIE9ubHkgYm90aGVyIHNlbmRpbmcgcXVlcnlJZCBpZiBpdCdzIG5vbi1kZWZhdWx0LlxuICAgICAgICBpZiAodGFnKSB7XG4gICAgICAgICAgICByZXFbJ3EnXSA9IHF1ZXJ5T2JqO1xuICAgICAgICAgICAgcmVxWyd0J10gPSB0YWc7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZW5kUmVxdWVzdChhY3Rpb24sIHJlcSk7XG4gICAgfVxuICAgIG9uRGlzY29ubmVjdFB1dChwYXRoU3RyaW5nLCBkYXRhLCBvbkNvbXBsZXRlKSB7XG4gICAgICAgIHRoaXMuaW5pdENvbm5lY3Rpb25fKCk7XG4gICAgICAgIGlmICh0aGlzLmNvbm5lY3RlZF8pIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZE9uRGlzY29ubmVjdF8oJ28nLCBwYXRoU3RyaW5nLCBkYXRhLCBvbkNvbXBsZXRlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub25EaXNjb25uZWN0UmVxdWVzdFF1ZXVlXy5wdXNoKHtcbiAgICAgICAgICAgICAgICBwYXRoU3RyaW5nLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogJ28nLFxuICAgICAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25EaXNjb25uZWN0TWVyZ2UocGF0aFN0cmluZywgZGF0YSwgb25Db21wbGV0ZSkge1xuICAgICAgICB0aGlzLmluaXRDb25uZWN0aW9uXygpO1xuICAgICAgICBpZiAodGhpcy5jb25uZWN0ZWRfKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRPbkRpc2Nvbm5lY3RfKCdvbScsIHBhdGhTdHJpbmcsIGRhdGEsIG9uQ29tcGxldGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5vbkRpc2Nvbm5lY3RSZXF1ZXN0UXVldWVfLnB1c2goe1xuICAgICAgICAgICAgICAgIHBhdGhTdHJpbmcsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiAnb20nLFxuICAgICAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25EaXNjb25uZWN0Q2FuY2VsKHBhdGhTdHJpbmcsIG9uQ29tcGxldGUpIHtcbiAgICAgICAgdGhpcy5pbml0Q29ubmVjdGlvbl8oKTtcbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdGVkXykge1xuICAgICAgICAgICAgdGhpcy5zZW5kT25EaXNjb25uZWN0Xygnb2MnLCBwYXRoU3RyaW5nLCBudWxsLCBvbkNvbXBsZXRlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub25EaXNjb25uZWN0UmVxdWVzdFF1ZXVlXy5wdXNoKHtcbiAgICAgICAgICAgICAgICBwYXRoU3RyaW5nLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogJ29jJyxcbiAgICAgICAgICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICAgICAgICAgIG9uQ29tcGxldGVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNlbmRPbkRpc2Nvbm5lY3RfKGFjdGlvbiwgcGF0aFN0cmluZywgZGF0YSwgb25Db21wbGV0ZSkge1xuICAgICAgICBjb25zdCByZXF1ZXN0ID0geyAvKnBhdGgqLyBwOiBwYXRoU3RyaW5nLCAvKmRhdGEqLyBkOiBkYXRhIH07XG4gICAgICAgIHRoaXMubG9nXygnb25EaXNjb25uZWN0ICcgKyBhY3Rpb24sIHJlcXVlc3QpO1xuICAgICAgICB0aGlzLnNlbmRSZXF1ZXN0KGFjdGlvbiwgcmVxdWVzdCwgKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICBpZiAob25Db21wbGV0ZSkge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBvbkNvbXBsZXRlKHJlc3BvbnNlWyAvKnN0YXR1cyovJ3MnXSwgcmVzcG9uc2VbIC8qIGRhdGEgKi8nZCddKTtcbiAgICAgICAgICAgICAgICB9LCBNYXRoLmZsb29yKDApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHB1dChwYXRoU3RyaW5nLCBkYXRhLCBvbkNvbXBsZXRlLCBoYXNoKSB7XG4gICAgICAgIHRoaXMucHV0SW50ZXJuYWwoJ3AnLCBwYXRoU3RyaW5nLCBkYXRhLCBvbkNvbXBsZXRlLCBoYXNoKTtcbiAgICB9XG4gICAgbWVyZ2UocGF0aFN0cmluZywgZGF0YSwgb25Db21wbGV0ZSwgaGFzaCkge1xuICAgICAgICB0aGlzLnB1dEludGVybmFsKCdtJywgcGF0aFN0cmluZywgZGF0YSwgb25Db21wbGV0ZSwgaGFzaCk7XG4gICAgfVxuICAgIHB1dEludGVybmFsKGFjdGlvbiwgcGF0aFN0cmluZywgZGF0YSwgb25Db21wbGV0ZSwgaGFzaCkge1xuICAgICAgICB0aGlzLmluaXRDb25uZWN0aW9uXygpO1xuICAgICAgICBjb25zdCByZXF1ZXN0ID0ge1xuICAgICAgICAgICAgLypwYXRoKi8gcDogcGF0aFN0cmluZyxcbiAgICAgICAgICAgIC8qZGF0YSovIGQ6IGRhdGFcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGhhc2ggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmVxdWVzdFsgLypoYXNoKi8naCddID0gaGFzaDtcbiAgICAgICAgfVxuICAgICAgICAvLyBUT0RPOiBPbmx5IGtlZXAgdHJhY2sgb2YgdGhlIG1vc3QgcmVjZW50IHB1dCBmb3IgYSBnaXZlbiBwYXRoP1xuICAgICAgICB0aGlzLm91dHN0YW5kaW5nUHV0c18ucHVzaCh7XG4gICAgICAgICAgICBhY3Rpb24sXG4gICAgICAgICAgICByZXF1ZXN0LFxuICAgICAgICAgICAgb25Db21wbGV0ZVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5vdXRzdGFuZGluZ1B1dENvdW50XysrO1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMub3V0c3RhbmRpbmdQdXRzXy5sZW5ndGggLSAxO1xuICAgICAgICBpZiAodGhpcy5jb25uZWN0ZWRfKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRQdXRfKGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubG9nXygnQnVmZmVyaW5nIHB1dDogJyArIHBhdGhTdHJpbmcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNlbmRQdXRfKGluZGV4KSB7XG4gICAgICAgIGNvbnN0IGFjdGlvbiA9IHRoaXMub3V0c3RhbmRpbmdQdXRzX1tpbmRleF0uYWN0aW9uO1xuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5vdXRzdGFuZGluZ1B1dHNfW2luZGV4XS5yZXF1ZXN0O1xuICAgICAgICBjb25zdCBvbkNvbXBsZXRlID0gdGhpcy5vdXRzdGFuZGluZ1B1dHNfW2luZGV4XS5vbkNvbXBsZXRlO1xuICAgICAgICB0aGlzLm91dHN0YW5kaW5nUHV0c19baW5kZXhdLnF1ZXVlZCA9IHRoaXMuY29ubmVjdGVkXztcbiAgICAgICAgdGhpcy5zZW5kUmVxdWVzdChhY3Rpb24sIHJlcXVlc3QsIChtZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmxvZ18oYWN0aW9uICsgJyByZXNwb25zZScsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMub3V0c3RhbmRpbmdQdXRzX1tpbmRleF07XG4gICAgICAgICAgICB0aGlzLm91dHN0YW5kaW5nUHV0Q291bnRfLS07XG4gICAgICAgICAgICAvLyBDbGVhbiB1cCBhcnJheSBvY2Nhc2lvbmFsbHkuXG4gICAgICAgICAgICBpZiAodGhpcy5vdXRzdGFuZGluZ1B1dENvdW50XyA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMub3V0c3RhbmRpbmdQdXRzXyA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9uQ29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlKG1lc3NhZ2VbIC8qc3RhdHVzKi8ncyddLCBtZXNzYWdlWyAvKiBkYXRhICovJ2QnXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXBvcnRTdGF0cyhzdGF0cykge1xuICAgICAgICAvLyBJZiB3ZSdyZSBub3QgY29ubmVjdGVkLCB3ZSBqdXN0IGRyb3AgdGhlIHN0YXRzLlxuICAgICAgICBpZiAodGhpcy5jb25uZWN0ZWRfKSB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0ID0geyAvKmNvdW50ZXJzKi8gYzogc3RhdHMgfTtcbiAgICAgICAgICAgIHRoaXMubG9nXygncmVwb3J0U3RhdHMnLCByZXF1ZXN0KTtcbiAgICAgICAgICAgIHRoaXMuc2VuZFJlcXVlc3QoLypzdGF0cyovICdzJywgcmVxdWVzdCwgcmVzdWx0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGF0dXMgPSByZXN1bHRbIC8qc3RhdHVzKi8ncyddO1xuICAgICAgICAgICAgICAgIGlmIChzdGF0dXMgIT09ICdvaycpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyb3JSZWFzb24gPSByZXN1bHRbIC8qIGRhdGEgKi8nZCddO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ18oJ3JlcG9ydFN0YXRzJywgJ0Vycm9yIHNlbmRpbmcgc3RhdHM6ICcgKyBlcnJvclJlYXNvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25EYXRhTWVzc2FnZV8obWVzc2FnZSkge1xuICAgICAgICBpZiAoJ3InIGluIG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIC8vIHRoaXMgaXMgYSByZXNwb25zZVxuICAgICAgICAgICAgdGhpcy5sb2dfKCdmcm9tIHNlcnZlcjogJyArIHN0cmluZ2lmeShtZXNzYWdlKSk7XG4gICAgICAgICAgICBjb25zdCByZXFOdW0gPSBtZXNzYWdlWydyJ107XG4gICAgICAgICAgICBjb25zdCBvblJlc3BvbnNlID0gdGhpcy5yZXF1ZXN0Q0JIYXNoX1tyZXFOdW1dO1xuICAgICAgICAgICAgaWYgKG9uUmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5yZXF1ZXN0Q0JIYXNoX1tyZXFOdW1dO1xuICAgICAgICAgICAgICAgIG9uUmVzcG9uc2UobWVzc2FnZVsgLypib2R5Ki8nYiddKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgnZXJyb3InIGluIG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHRocm93ICdBIHNlcnZlci1zaWRlIGVycm9yIGhhcyBvY2N1cnJlZDogJyArIG1lc3NhZ2VbJ2Vycm9yJ107XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoJ2EnIGluIG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIC8vIGEgYW5kIGIgYXJlIGFjdGlvbiBhbmQgYm9keSwgcmVzcGVjdGl2ZWx5XG4gICAgICAgICAgICB0aGlzLm9uRGF0YVB1c2hfKG1lc3NhZ2VbJ2EnXSwgbWVzc2FnZVsnYiddKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvbkRhdGFQdXNoXyhhY3Rpb24sIGJvZHkpIHtcbiAgICAgICAgdGhpcy5sb2dfKCdoYW5kbGVTZXJ2ZXJNZXNzYWdlJywgYWN0aW9uLCBib2R5KTtcbiAgICAgICAgaWYgKGFjdGlvbiA9PT0gJ2QnKSB7XG4gICAgICAgICAgICB0aGlzLm9uRGF0YVVwZGF0ZV8oYm9keVsgLypwYXRoKi8ncCddLCBib2R5WyAvKmRhdGEqLydkJ10sIFxuICAgICAgICAgICAgLyppc01lcmdlKi8gZmFsc2UsIGJvZHlbJ3QnXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYWN0aW9uID09PSAnbScpIHtcbiAgICAgICAgICAgIHRoaXMub25EYXRhVXBkYXRlXyhib2R5WyAvKnBhdGgqLydwJ10sIGJvZHlbIC8qZGF0YSovJ2QnXSwgXG4gICAgICAgICAgICAvKmlzTWVyZ2U9Ki8gdHJ1ZSwgYm9keVsndCddKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChhY3Rpb24gPT09ICdjJykge1xuICAgICAgICAgICAgdGhpcy5vbkxpc3RlblJldm9rZWRfKGJvZHlbIC8qcGF0aCovJ3AnXSwgYm9keVsgLypxdWVyeSovJ3EnXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYWN0aW9uID09PSAnYWMnKSB7XG4gICAgICAgICAgICB0aGlzLm9uQXV0aFJldm9rZWRfKGJvZHlbIC8qc3RhdHVzIGNvZGUqLydzJ10sIGJvZHlbIC8qIGV4cGxhbmF0aW9uICovJ2QnXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYWN0aW9uID09PSAnYXBjJykge1xuICAgICAgICAgICAgdGhpcy5vbkFwcENoZWNrUmV2b2tlZF8oYm9keVsgLypzdGF0dXMgY29kZSovJ3MnXSwgYm9keVsgLyogZXhwbGFuYXRpb24gKi8nZCddKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChhY3Rpb24gPT09ICdzZCcpIHtcbiAgICAgICAgICAgIHRoaXMub25TZWN1cml0eURlYnVnUGFja2V0Xyhib2R5KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGVycm9yKCdVbnJlY29nbml6ZWQgYWN0aW9uIHJlY2VpdmVkIGZyb20gc2VydmVyOiAnICtcbiAgICAgICAgICAgICAgICBzdHJpbmdpZnkoYWN0aW9uKSArXG4gICAgICAgICAgICAgICAgJ1xcbkFyZSB5b3UgdXNpbmcgdGhlIGxhdGVzdCBjbGllbnQ/Jyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25SZWFkeV8odGltZXN0YW1wLCBzZXNzaW9uSWQpIHtcbiAgICAgICAgdGhpcy5sb2dfKCdjb25uZWN0aW9uIHJlYWR5Jyk7XG4gICAgICAgIHRoaXMuY29ubmVjdGVkXyA9IHRydWU7XG4gICAgICAgIHRoaXMubGFzdENvbm5lY3Rpb25Fc3RhYmxpc2hlZFRpbWVfID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIHRoaXMuaGFuZGxlVGltZXN0YW1wXyh0aW1lc3RhbXApO1xuICAgICAgICB0aGlzLmxhc3RTZXNzaW9uSWQgPSBzZXNzaW9uSWQ7XG4gICAgICAgIGlmICh0aGlzLmZpcnN0Q29ubmVjdGlvbl8pIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZENvbm5lY3RTdGF0c18oKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlc3RvcmVTdGF0ZV8oKTtcbiAgICAgICAgdGhpcy5maXJzdENvbm5lY3Rpb25fID0gZmFsc2U7XG4gICAgICAgIHRoaXMub25Db25uZWN0U3RhdHVzXyh0cnVlKTtcbiAgICB9XG4gICAgc2NoZWR1bGVDb25uZWN0Xyh0aW1lb3V0KSB7XG4gICAgICAgIGFzc2VydCghdGhpcy5yZWFsdGltZV8sIFwiU2NoZWR1bGluZyBhIGNvbm5lY3Qgd2hlbiB3ZSdyZSBhbHJlYWR5IGNvbm5lY3RlZC9pbmc/XCIpO1xuICAgICAgICBpZiAodGhpcy5lc3RhYmxpc2hDb25uZWN0aW9uVGltZXJfKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5lc3RhYmxpc2hDb25uZWN0aW9uVGltZXJfKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBOT1RFOiBFdmVuIHdoZW4gdGltZW91dCBpcyAwLCBpdCdzIGltcG9ydGFudCB0byBkbyBhIHNldFRpbWVvdXQgdG8gd29yayBhcm91bmQgYW4gaW5mdXJpYXRpbmcgXCJTZWN1cml0eSBFcnJvclwiIGluXG4gICAgICAgIC8vIEZpcmVmb3ggd2hlbiB0cnlpbmcgdG8gd3JpdGUgdG8gb3VyIGxvbmctcG9sbGluZyBpZnJhbWUgaW4gc29tZSBzY2VuYXJpb3MgKGUuZy4gRm9yZ2Ugb3Igb3VyIHVuaXQgdGVzdHMpLlxuICAgICAgICB0aGlzLmVzdGFibGlzaENvbm5lY3Rpb25UaW1lcl8gPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZXN0YWJsaXNoQ29ubmVjdGlvblRpbWVyXyA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmVzdGFibGlzaENvbm5lY3Rpb25fKCk7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB9LCBNYXRoLmZsb29yKHRpbWVvdXQpKTtcbiAgICB9XG4gICAgaW5pdENvbm5lY3Rpb25fKCkge1xuICAgICAgICBpZiAoIXRoaXMucmVhbHRpbWVfICYmIHRoaXMuZmlyc3RDb25uZWN0aW9uXykge1xuICAgICAgICAgICAgdGhpcy5zY2hlZHVsZUNvbm5lY3RfKDApO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uVmlzaWJsZV8odmlzaWJsZSkge1xuICAgICAgICAvLyBOT1RFOiBUYWJiaW5nIGF3YXkgYW5kIGJhY2sgdG8gYSB3aW5kb3cgd2lsbCBkZWZlYXQgb3VyIHJlY29ubmVjdCBiYWNrb2ZmLCBidXQgSSB0aGluayB0aGF0J3MgZmluZS5cbiAgICAgICAgaWYgKHZpc2libGUgJiZcbiAgICAgICAgICAgICF0aGlzLnZpc2libGVfICYmXG4gICAgICAgICAgICB0aGlzLnJlY29ubmVjdERlbGF5XyA9PT0gdGhpcy5tYXhSZWNvbm5lY3REZWxheV8pIHtcbiAgICAgICAgICAgIHRoaXMubG9nXygnV2luZG93IGJlY2FtZSB2aXNpYmxlLiAgUmVkdWNpbmcgZGVsYXkuJyk7XG4gICAgICAgICAgICB0aGlzLnJlY29ubmVjdERlbGF5XyA9IFJFQ09OTkVDVF9NSU5fREVMQVk7XG4gICAgICAgICAgICBpZiAoIXRoaXMucmVhbHRpbWVfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zY2hlZHVsZUNvbm5lY3RfKDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMudmlzaWJsZV8gPSB2aXNpYmxlO1xuICAgIH1cbiAgICBvbk9ubGluZV8ob25saW5lKSB7XG4gICAgICAgIGlmIChvbmxpbmUpIHtcbiAgICAgICAgICAgIHRoaXMubG9nXygnQnJvd3NlciB3ZW50IG9ubGluZS4nKTtcbiAgICAgICAgICAgIHRoaXMucmVjb25uZWN0RGVsYXlfID0gUkVDT05ORUNUX01JTl9ERUxBWTtcbiAgICAgICAgICAgIGlmICghdGhpcy5yZWFsdGltZV8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNjaGVkdWxlQ29ubmVjdF8oMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvZ18oJ0Jyb3dzZXIgd2VudCBvZmZsaW5lLiAgS2lsbGluZyBjb25uZWN0aW9uLicpO1xuICAgICAgICAgICAgaWYgKHRoaXMucmVhbHRpbWVfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWFsdGltZV8uY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBvblJlYWx0aW1lRGlzY29ubmVjdF8oKSB7XG4gICAgICAgIHRoaXMubG9nXygnZGF0YSBjbGllbnQgZGlzY29ubmVjdGVkJyk7XG4gICAgICAgIHRoaXMuY29ubmVjdGVkXyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnJlYWx0aW1lXyA9IG51bGw7XG4gICAgICAgIC8vIFNpbmNlIHdlIGRvbid0IGtub3cgaWYgb3VyIHNlbnQgdHJhbnNhY3Rpb25zIHN1Y2NlZWRlZCBvciBub3QsIHdlIG5lZWQgdG8gY2FuY2VsIHRoZW0uXG4gICAgICAgIHRoaXMuY2FuY2VsU2VudFRyYW5zYWN0aW9uc18oKTtcbiAgICAgICAgLy8gQ2xlYXIgb3V0IHRoZSBwZW5kaW5nIHJlcXVlc3RzLlxuICAgICAgICB0aGlzLnJlcXVlc3RDQkhhc2hfID0ge307XG4gICAgICAgIGlmICh0aGlzLnNob3VsZFJlY29ubmVjdF8oKSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnZpc2libGVfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dfKFwiV2luZG93IGlzbid0IHZpc2libGUuICBEZWxheWluZyByZWNvbm5lY3QuXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVjb25uZWN0RGVsYXlfID0gdGhpcy5tYXhSZWNvbm5lY3REZWxheV87XG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0Q29ubmVjdGlvbkF0dGVtcHRUaW1lXyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5sYXN0Q29ubmVjdGlvbkVzdGFibGlzaGVkVGltZV8pIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB3ZSd2ZSBiZWVuIGNvbm5lY3RlZCBsb25nIGVub3VnaCwgcmVzZXQgcmVjb25uZWN0IGRlbGF5IHRvIG1pbmltdW0uXG4gICAgICAgICAgICAgICAgY29uc3QgdGltZVNpbmNlTGFzdENvbm5lY3RTdWNjZWVkZWQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHRoaXMubGFzdENvbm5lY3Rpb25Fc3RhYmxpc2hlZFRpbWVfO1xuICAgICAgICAgICAgICAgIGlmICh0aW1lU2luY2VMYXN0Q29ubmVjdFN1Y2NlZWRlZCA+IFJFQ09OTkVDVF9ERUxBWV9SRVNFVF9USU1FT1VUKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVjb25uZWN0RGVsYXlfID0gUkVDT05ORUNUX01JTl9ERUxBWTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0Q29ubmVjdGlvbkVzdGFibGlzaGVkVGltZV8gPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdGltZVNpbmNlTGFzdENvbm5lY3RBdHRlbXB0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSB0aGlzLmxhc3RDb25uZWN0aW9uQXR0ZW1wdFRpbWVfO1xuICAgICAgICAgICAgbGV0IHJlY29ubmVjdERlbGF5ID0gTWF0aC5tYXgoMCwgdGhpcy5yZWNvbm5lY3REZWxheV8gLSB0aW1lU2luY2VMYXN0Q29ubmVjdEF0dGVtcHQpO1xuICAgICAgICAgICAgcmVjb25uZWN0RGVsYXkgPSBNYXRoLnJhbmRvbSgpICogcmVjb25uZWN0RGVsYXk7XG4gICAgICAgICAgICB0aGlzLmxvZ18oJ1RyeWluZyB0byByZWNvbm5lY3QgaW4gJyArIHJlY29ubmVjdERlbGF5ICsgJ21zJyk7XG4gICAgICAgICAgICB0aGlzLnNjaGVkdWxlQ29ubmVjdF8ocmVjb25uZWN0RGVsYXkpO1xuICAgICAgICAgICAgLy8gQWRqdXN0IHJlY29ubmVjdCBkZWxheSBmb3IgbmV4dCB0aW1lLlxuICAgICAgICAgICAgdGhpcy5yZWNvbm5lY3REZWxheV8gPSBNYXRoLm1pbih0aGlzLm1heFJlY29ubmVjdERlbGF5XywgdGhpcy5yZWNvbm5lY3REZWxheV8gKiBSRUNPTk5FQ1RfREVMQVlfTVVMVElQTElFUik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vbkNvbm5lY3RTdGF0dXNfKGZhbHNlKTtcbiAgICB9XG4gICAgYXN5bmMgZXN0YWJsaXNoQ29ubmVjdGlvbl8oKSB7XG4gICAgICAgIGlmICh0aGlzLnNob3VsZFJlY29ubmVjdF8oKSkge1xuICAgICAgICAgICAgdGhpcy5sb2dfKCdNYWtpbmcgYSBjb25uZWN0aW9uIGF0dGVtcHQnKTtcbiAgICAgICAgICAgIHRoaXMubGFzdENvbm5lY3Rpb25BdHRlbXB0VGltZV8gPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgICAgIHRoaXMubGFzdENvbm5lY3Rpb25Fc3RhYmxpc2hlZFRpbWVfID0gbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IG9uRGF0YU1lc3NhZ2UgPSB0aGlzLm9uRGF0YU1lc3NhZ2VfLmJpbmQodGhpcyk7XG4gICAgICAgICAgICBjb25zdCBvblJlYWR5ID0gdGhpcy5vblJlYWR5Xy5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgY29uc3Qgb25EaXNjb25uZWN0ID0gdGhpcy5vblJlYWx0aW1lRGlzY29ubmVjdF8uYmluZCh0aGlzKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbm5JZCA9IHRoaXMuaWQgKyAnOicgKyBQZXJzaXN0ZW50Q29ubmVjdGlvbi5uZXh0Q29ubmVjdGlvbklkXysrO1xuICAgICAgICAgICAgY29uc3QgbGFzdFNlc3Npb25JZCA9IHRoaXMubGFzdFNlc3Npb25JZDtcbiAgICAgICAgICAgIGxldCBjYW5jZWxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IGNvbm5lY3Rpb24gPSBudWxsO1xuICAgICAgICAgICAgY29uc3QgY2xvc2VGbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29ubmVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjYW5jZWxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIG9uRGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBzZW5kUmVxdWVzdEZuID0gZnVuY3Rpb24gKG1zZykge1xuICAgICAgICAgICAgICAgIGFzc2VydChjb25uZWN0aW9uLCBcInNlbmRSZXF1ZXN0IGNhbGwgd2hlbiB3ZSdyZSBub3QgY29ubmVjdGVkIG5vdCBhbGxvd2VkLlwiKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNlbmRSZXF1ZXN0KG1zZyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5yZWFsdGltZV8gPSB7XG4gICAgICAgICAgICAgICAgY2xvc2U6IGNsb3NlRm4sXG4gICAgICAgICAgICAgICAgc2VuZFJlcXVlc3Q6IHNlbmRSZXF1ZXN0Rm5cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBmb3JjZVJlZnJlc2ggPSB0aGlzLmZvcmNlVG9rZW5SZWZyZXNoXztcbiAgICAgICAgICAgIHRoaXMuZm9yY2VUb2tlblJlZnJlc2hfID0gZmFsc2U7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIEZpcnN0IGZldGNoIGF1dGggYW5kIGFwcCBjaGVjayB0b2tlbiwgYW5kIGVzdGFibGlzaCBjb25uZWN0aW9uIGFmdGVyXG4gICAgICAgICAgICAgICAgLy8gZmV0Y2hpbmcgdGhlIHRva2VuIHdhcyBzdWNjZXNzZnVsXG4gICAgICAgICAgICAgICAgY29uc3QgW2F1dGhUb2tlbiwgYXBwQ2hlY2tUb2tlbl0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXV0aFRva2VuUHJvdmlkZXJfLmdldFRva2VuKGZvcmNlUmVmcmVzaCksXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwQ2hlY2tUb2tlblByb3ZpZGVyXy5nZXRUb2tlbihmb3JjZVJlZnJlc2gpXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgaWYgKCFjYW5jZWxlZCkge1xuICAgICAgICAgICAgICAgICAgICBsb2coJ2dldFRva2VuKCkgY29tcGxldGVkLiBDcmVhdGluZyBjb25uZWN0aW9uLicpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmF1dGhUb2tlbl8gPSBhdXRoVG9rZW4gJiYgYXV0aFRva2VuLmFjY2Vzc1Rva2VuO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcENoZWNrVG9rZW5fID0gYXBwQ2hlY2tUb2tlbiAmJiBhcHBDaGVja1Rva2VuLnRva2VuO1xuICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uID0gbmV3IENvbm5lY3Rpb24oY29ubklkLCB0aGlzLnJlcG9JbmZvXywgdGhpcy5hcHBsaWNhdGlvbklkXywgdGhpcy5hcHBDaGVja1Rva2VuXywgdGhpcy5hdXRoVG9rZW5fLCBvbkRhdGFNZXNzYWdlLCBvblJlYWR5LCBvbkRpc2Nvbm5lY3QsIFxuICAgICAgICAgICAgICAgICAgICAvKiBvbktpbGw9ICovIHJlYXNvbiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuKHJlYXNvbiArICcgKCcgKyB0aGlzLnJlcG9JbmZvXy50b1N0cmluZygpICsgJyknKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW50ZXJydXB0KFNFUlZFUl9LSUxMX0lOVEVSUlVQVF9SRUFTT04pO1xuICAgICAgICAgICAgICAgICAgICB9LCBsYXN0U2Vzc2lvbklkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZygnZ2V0VG9rZW4oKSBjb21wbGV0ZWQgYnV0IHdhcyBjYW5jZWxlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nXygnRmFpbGVkIHRvIGdldCB0b2tlbjogJyArIGVycm9yKTtcbiAgICAgICAgICAgICAgICBpZiAoIWNhbmNlbGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlcG9JbmZvXy5ub2RlQWRtaW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgbWF5IGJlIGEgY3JpdGljYWwgZXJyb3IgZm9yIHRoZSBBZG1pbiBOb2RlLmpzIFNESywgc28gbG9nIGEgd2FybmluZy5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJ1dCBnZXRUb2tlbigpIG1heSBhbHNvIGp1c3QgaGF2ZSB0ZW1wb3JhcmlseSBmYWlsZWQsIHNvIHdlIHN0aWxsIHdhbnQgdG9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnRpbnVlIHJldHJ5aW5nLlxuICAgICAgICAgICAgICAgICAgICAgICAgd2FybihlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2xvc2VGbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpbnRlcnJ1cHQocmVhc29uKSB7XG4gICAgICAgIGxvZygnSW50ZXJydXB0aW5nIGNvbm5lY3Rpb24gZm9yIHJlYXNvbjogJyArIHJlYXNvbik7XG4gICAgICAgIHRoaXMuaW50ZXJydXB0UmVhc29uc19bcmVhc29uXSA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLnJlYWx0aW1lXykge1xuICAgICAgICAgICAgdGhpcy5yZWFsdGltZV8uY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmVzdGFibGlzaENvbm5lY3Rpb25UaW1lcl8pIHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5lc3RhYmxpc2hDb25uZWN0aW9uVGltZXJfKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVzdGFibGlzaENvbm5lY3Rpb25UaW1lcl8gPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29ubmVjdGVkXykge1xuICAgICAgICAgICAgICAgIHRoaXMub25SZWFsdGltZURpc2Nvbm5lY3RfKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVzdW1lKHJlYXNvbikge1xuICAgICAgICBsb2coJ1Jlc3VtaW5nIGNvbm5lY3Rpb24gZm9yIHJlYXNvbjogJyArIHJlYXNvbik7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmludGVycnVwdFJlYXNvbnNfW3JlYXNvbl07XG4gICAgICAgIGlmIChpc0VtcHR5KHRoaXMuaW50ZXJydXB0UmVhc29uc18pKSB7XG4gICAgICAgICAgICB0aGlzLnJlY29ubmVjdERlbGF5XyA9IFJFQ09OTkVDVF9NSU5fREVMQVk7XG4gICAgICAgICAgICBpZiAoIXRoaXMucmVhbHRpbWVfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zY2hlZHVsZUNvbm5lY3RfKDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZVRpbWVzdGFtcF8odGltZXN0YW1wKSB7XG4gICAgICAgIGNvbnN0IGRlbHRhID0gdGltZXN0YW1wIC0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIHRoaXMub25TZXJ2ZXJJbmZvVXBkYXRlXyh7IHNlcnZlclRpbWVPZmZzZXQ6IGRlbHRhIH0pO1xuICAgIH1cbiAgICBjYW5jZWxTZW50VHJhbnNhY3Rpb25zXygpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm91dHN0YW5kaW5nUHV0c18ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHB1dCA9IHRoaXMub3V0c3RhbmRpbmdQdXRzX1tpXTtcbiAgICAgICAgICAgIGlmIChwdXQgJiYgLypoYXNoKi8gJ2gnIGluIHB1dC5yZXF1ZXN0ICYmIHB1dC5xdWV1ZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAocHV0Lm9uQ29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcHV0Lm9uQ29tcGxldGUoJ2Rpc2Nvbm5lY3QnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMub3V0c3RhbmRpbmdQdXRzX1tpXTtcbiAgICAgICAgICAgICAgICB0aGlzLm91dHN0YW5kaW5nUHV0Q291bnRfLS07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2xlYW4gdXAgYXJyYXkgb2NjYXNpb25hbGx5LlxuICAgICAgICBpZiAodGhpcy5vdXRzdGFuZGluZ1B1dENvdW50XyA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5vdXRzdGFuZGluZ1B1dHNfID0gW107XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25MaXN0ZW5SZXZva2VkXyhwYXRoU3RyaW5nLCBxdWVyeSkge1xuICAgICAgICAvLyBSZW1vdmUgdGhlIGxpc3RlbiBhbmQgbWFudWZhY3R1cmUgYSBcInBlcm1pc3Npb25fZGVuaWVkXCIgZXJyb3IgZm9yIHRoZSBmYWlsZWQgbGlzdGVuLlxuICAgICAgICBsZXQgcXVlcnlJZDtcbiAgICAgICAgaWYgKCFxdWVyeSkge1xuICAgICAgICAgICAgcXVlcnlJZCA9ICdkZWZhdWx0JztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHF1ZXJ5SWQgPSBxdWVyeS5tYXAocSA9PiBPYmplY3RUb1VuaXF1ZUtleShxKSkuam9pbignJCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxpc3RlbiA9IHRoaXMucmVtb3ZlTGlzdGVuXyhwYXRoU3RyaW5nLCBxdWVyeUlkKTtcbiAgICAgICAgaWYgKGxpc3RlbiAmJiBsaXN0ZW4ub25Db21wbGV0ZSkge1xuICAgICAgICAgICAgbGlzdGVuLm9uQ29tcGxldGUoJ3Blcm1pc3Npb25fZGVuaWVkJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlTGlzdGVuXyhwYXRoU3RyaW5nLCBxdWVyeUlkKSB7XG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRQYXRoU3RyaW5nID0gbmV3IFBhdGgocGF0aFN0cmluZykudG9TdHJpbmcoKTsgLy8gbm9ybWFsaXplIHBhdGguXG4gICAgICAgIGxldCBsaXN0ZW47XG4gICAgICAgIGlmICh0aGlzLmxpc3RlbnMuaGFzKG5vcm1hbGl6ZWRQYXRoU3RyaW5nKSkge1xuICAgICAgICAgICAgY29uc3QgbWFwID0gdGhpcy5saXN0ZW5zLmdldChub3JtYWxpemVkUGF0aFN0cmluZyk7XG4gICAgICAgICAgICBsaXN0ZW4gPSBtYXAuZ2V0KHF1ZXJ5SWQpO1xuICAgICAgICAgICAgbWFwLmRlbGV0ZShxdWVyeUlkKTtcbiAgICAgICAgICAgIGlmIChtYXAuc2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMubGlzdGVucy5kZWxldGUobm9ybWFsaXplZFBhdGhTdHJpbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gYWxsIGxpc3RlbnMgZm9yIHRoaXMgcGF0aCBoYXMgYWxyZWFkeSBiZWVuIHJlbW92ZWRcbiAgICAgICAgICAgIGxpc3RlbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbGlzdGVuO1xuICAgIH1cbiAgICBvbkF1dGhSZXZva2VkXyhzdGF0dXNDb2RlLCBleHBsYW5hdGlvbikge1xuICAgICAgICBsb2coJ0F1dGggdG9rZW4gcmV2b2tlZDogJyArIHN0YXR1c0NvZGUgKyAnLycgKyBleHBsYW5hdGlvbik7XG4gICAgICAgIHRoaXMuYXV0aFRva2VuXyA9IG51bGw7XG4gICAgICAgIHRoaXMuZm9yY2VUb2tlblJlZnJlc2hfID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5yZWFsdGltZV8uY2xvc2UoKTtcbiAgICAgICAgaWYgKHN0YXR1c0NvZGUgPT09ICdpbnZhbGlkX3Rva2VuJyB8fCBzdGF0dXNDb2RlID09PSAncGVybWlzc2lvbl9kZW5pZWQnKSB7XG4gICAgICAgICAgICAvLyBXZSdsbCB3YWl0IGEgY291cGxlIHRpbWVzIGJlZm9yZSBsb2dnaW5nIHRoZSB3YXJuaW5nIC8gaW5jcmVhc2luZyB0aGVcbiAgICAgICAgICAgIC8vIHJldHJ5IHBlcmlvZCBzaW5jZSBvYXV0aCB0b2tlbnMgd2lsbCByZXBvcnQgYXMgXCJpbnZhbGlkXCIgaWYgdGhleSdyZVxuICAgICAgICAgICAgLy8ganVzdCBleHBpcmVkLiBQbHVzIHRoZXJlIG1heSBiZSB0cmFuc2llbnQgaXNzdWVzIHRoYXQgcmVzb2x2ZSB0aGVtc2VsdmVzLlxuICAgICAgICAgICAgdGhpcy5pbnZhbGlkQXV0aFRva2VuQ291bnRfKys7XG4gICAgICAgICAgICBpZiAodGhpcy5pbnZhbGlkQXV0aFRva2VuQ291bnRfID49IElOVkFMSURfVE9LRU5fVEhSRVNIT0xEKSB7XG4gICAgICAgICAgICAgICAgLy8gU2V0IGEgbG9uZyByZWNvbm5lY3QgZGVsYXkgYmVjYXVzZSByZWNvdmVyeSBpcyB1bmxpa2VseVxuICAgICAgICAgICAgICAgIHRoaXMucmVjb25uZWN0RGVsYXlfID0gUkVDT05ORUNUX01BWF9ERUxBWV9GT1JfQURNSU5TO1xuICAgICAgICAgICAgICAgIC8vIE5vdGlmeSB0aGUgYXV0aCB0b2tlbiBwcm92aWRlciB0aGF0IHRoZSB0b2tlbiBpcyBpbnZhbGlkLCB3aGljaCB3aWxsIGxvZ1xuICAgICAgICAgICAgICAgIC8vIGEgd2FybmluZ1xuICAgICAgICAgICAgICAgIHRoaXMuYXV0aFRva2VuUHJvdmlkZXJfLm5vdGlmeUZvckludmFsaWRUb2tlbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIG9uQXBwQ2hlY2tSZXZva2VkXyhzdGF0dXNDb2RlLCBleHBsYW5hdGlvbikge1xuICAgICAgICBsb2coJ0FwcCBjaGVjayB0b2tlbiByZXZva2VkOiAnICsgc3RhdHVzQ29kZSArICcvJyArIGV4cGxhbmF0aW9uKTtcbiAgICAgICAgdGhpcy5hcHBDaGVja1Rva2VuXyA9IG51bGw7XG4gICAgICAgIHRoaXMuZm9yY2VUb2tlblJlZnJlc2hfID0gdHJ1ZTtcbiAgICAgICAgLy8gTm90ZTogV2UgZG9uJ3QgY2xvc2UgdGhlIGNvbm5lY3Rpb24gYXMgdGhlIGRldmVsb3BlciBtYXkgbm90IGhhdmVcbiAgICAgICAgLy8gZW5mb3JjZW1lbnQgZW5hYmxlZC4gVGhlIGJhY2tlbmQgY2xvc2VzIGNvbm5lY3Rpb25zIHdpdGggZW5mb3JjZW1lbnRzLlxuICAgICAgICBpZiAoc3RhdHVzQ29kZSA9PT0gJ2ludmFsaWRfdG9rZW4nIHx8IHN0YXR1c0NvZGUgPT09ICdwZXJtaXNzaW9uX2RlbmllZCcpIHtcbiAgICAgICAgICAgIC8vIFdlJ2xsIHdhaXQgYSBjb3VwbGUgdGltZXMgYmVmb3JlIGxvZ2dpbmcgdGhlIHdhcm5pbmcgLyBpbmNyZWFzaW5nIHRoZVxuICAgICAgICAgICAgLy8gcmV0cnkgcGVyaW9kIHNpbmNlIG9hdXRoIHRva2VucyB3aWxsIHJlcG9ydCBhcyBcImludmFsaWRcIiBpZiB0aGV5J3JlXG4gICAgICAgICAgICAvLyBqdXN0IGV4cGlyZWQuIFBsdXMgdGhlcmUgbWF5IGJlIHRyYW5zaWVudCBpc3N1ZXMgdGhhdCByZXNvbHZlIHRoZW1zZWx2ZXMuXG4gICAgICAgICAgICB0aGlzLmludmFsaWRBcHBDaGVja1Rva2VuQ291bnRfKys7XG4gICAgICAgICAgICBpZiAodGhpcy5pbnZhbGlkQXBwQ2hlY2tUb2tlbkNvdW50XyA+PSBJTlZBTElEX1RPS0VOX1RIUkVTSE9MRCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwQ2hlY2tUb2tlblByb3ZpZGVyXy5ub3RpZnlGb3JJbnZhbGlkVG9rZW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBvblNlY3VyaXR5RGVidWdQYWNrZXRfKGJvZHkpIHtcbiAgICAgICAgaWYgKHRoaXMuc2VjdXJpdHlEZWJ1Z0NhbGxiYWNrXykge1xuICAgICAgICAgICAgdGhpcy5zZWN1cml0eURlYnVnQ2FsbGJhY2tfKGJvZHkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKCdtc2cnIGluIGJvZHkpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRklSRUJBU0U6ICcgKyBib2R5Wydtc2cnXS5yZXBsYWNlKCdcXG4nLCAnXFxuRklSRUJBU0U6ICcpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXN0b3JlU3RhdGVfKCkge1xuICAgICAgICAvL1JlLWF1dGhlbnRpY2F0ZSBvdXJzZWx2ZXMgaWYgd2UgaGF2ZSBhIGNyZWRlbnRpYWwgc3RvcmVkLlxuICAgICAgICB0aGlzLnRyeUF1dGgoKTtcbiAgICAgICAgdGhpcy50cnlBcHBDaGVjaygpO1xuICAgICAgICAvLyBQdXRzIGRlcGVuZCBvbiBoYXZpbmcgcmVjZWl2ZWQgdGhlIGNvcnJlc3BvbmRpbmcgZGF0YSB1cGRhdGUgZnJvbSB0aGUgc2VydmVyIGJlZm9yZSB0aGV5IGNvbXBsZXRlLCBzbyB3ZSBtdXN0XG4gICAgICAgIC8vIG1ha2Ugc3VyZSB0byBzZW5kIGxpc3RlbnMgYmVmb3JlIHB1dHMuXG4gICAgICAgIGZvciAoY29uc3QgcXVlcmllcyBvZiB0aGlzLmxpc3RlbnMudmFsdWVzKCkpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbGlzdGVuU3BlYyBvZiBxdWVyaWVzLnZhbHVlcygpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kTGlzdGVuXyhsaXN0ZW5TcGVjKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMub3V0c3RhbmRpbmdQdXRzXy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHRoaXMub3V0c3RhbmRpbmdQdXRzX1tpXSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VuZFB1dF8oaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKHRoaXMub25EaXNjb25uZWN0UmVxdWVzdFF1ZXVlXy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLm9uRGlzY29ubmVjdFJlcXVlc3RRdWV1ZV8uc2hpZnQoKTtcbiAgICAgICAgICAgIHRoaXMuc2VuZE9uRGlzY29ubmVjdF8ocmVxdWVzdC5hY3Rpb24sIHJlcXVlc3QucGF0aFN0cmluZywgcmVxdWVzdC5kYXRhLCByZXF1ZXN0Lm9uQ29tcGxldGUpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5vdXRzdGFuZGluZ0dldHNfLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5vdXRzdGFuZGluZ0dldHNfW2ldKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kR2V0XyhpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kcyBjbGllbnQgc3RhdHMgZm9yIGZpcnN0IGNvbm5lY3Rpb25cbiAgICAgKi9cbiAgICBzZW5kQ29ubmVjdFN0YXRzXygpIHtcbiAgICAgICAgY29uc3Qgc3RhdHMgPSB7fTtcbiAgICAgICAgbGV0IGNsaWVudE5hbWUgPSAnanMnO1xuICAgICAgICBpZiAoaXNOb2RlU2RrKCkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlcG9JbmZvXy5ub2RlQWRtaW4pIHtcbiAgICAgICAgICAgICAgICBjbGllbnROYW1lID0gJ2FkbWluX25vZGUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY2xpZW50TmFtZSA9ICdub2RlJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzdGF0c1snc2RrLicgKyBjbGllbnROYW1lICsgJy4nICsgU0RLX1ZFUlNJT04ucmVwbGFjZSgvXFwuL2csICctJyldID0gMTtcbiAgICAgICAgaWYgKGlzTW9iaWxlQ29yZG92YSgpKSB7XG4gICAgICAgICAgICBzdGF0c1snZnJhbWV3b3JrLmNvcmRvdmEnXSA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNSZWFjdE5hdGl2ZSgpKSB7XG4gICAgICAgICAgICBzdGF0c1snZnJhbWV3b3JrLnJlYWN0bmF0aXZlJ10gPSAxO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVwb3J0U3RhdHMoc3RhdHMpO1xuICAgIH1cbiAgICBzaG91bGRSZWNvbm5lY3RfKCkge1xuICAgICAgICBjb25zdCBvbmxpbmUgPSBPbmxpbmVNb25pdG9yLmdldEluc3RhbmNlKCkuY3VycmVudGx5T25saW5lKCk7XG4gICAgICAgIHJldHVybiBpc0VtcHR5KHRoaXMuaW50ZXJydXB0UmVhc29uc18pICYmIG9ubGluZTtcbiAgICB9XG59XG5QZXJzaXN0ZW50Q29ubmVjdGlvbi5uZXh0UGVyc2lzdGVudENvbm5lY3Rpb25JZF8gPSAwO1xuLyoqXG4gKiBDb3VudGVyIGZvciBudW1iZXIgb2YgY29ubmVjdGlvbnMgY3JlYXRlZC4gTWFpbmx5IHVzZWQgZm9yIHRhZ2dpbmcgaW4gdGhlIGxvZ3NcbiAqL1xuUGVyc2lzdGVudENvbm5lY3Rpb24ubmV4dENvbm5lY3Rpb25JZF8gPSAwO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY2xhc3MgTmFtZWROb2RlIHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBub2RlKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMubm9kZSA9IG5vZGU7XG4gICAgfVxuICAgIHN0YXRpYyBXcmFwKG5hbWUsIG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBOYW1lZE5vZGUobmFtZSwgbm9kZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY2xhc3MgSW5kZXgge1xuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIEEgc3RhbmRhbG9uZSBjb21wYXJpc29uIGZ1bmN0aW9uIGZvclxuICAgICAqIHRoaXMgaW5kZXhcbiAgICAgKi9cbiAgICBnZXRDb21wYXJlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21wYXJlLmJpbmQodGhpcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdpdmVuIGEgYmVmb3JlIGFuZCBhZnRlciB2YWx1ZSBmb3IgYSBub2RlLCBkZXRlcm1pbmUgaWYgdGhlIGluZGV4ZWQgdmFsdWUgaGFzIGNoYW5nZWQuIEV2ZW4gaWYgdGhleSBhcmUgZGlmZmVyZW50LFxuICAgICAqIGl0J3MgcG9zc2libGUgdGhhdCB0aGUgY2hhbmdlcyBhcmUgaXNvbGF0ZWQgdG8gcGFydHMgb2YgdGhlIHNuYXBzaG90IHRoYXQgYXJlIG5vdCBpbmRleGVkLlxuICAgICAqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUcnVlIGlmIHRoZSBwb3J0aW9uIG9mIHRoZSBzbmFwc2hvdCBiZWluZyBpbmRleGVkIGNoYW5nZWQgYmV0d2VlbiBvbGROb2RlIGFuZCBuZXdOb2RlXG4gICAgICovXG4gICAgaW5kZXhlZFZhbHVlQ2hhbmdlZChvbGROb2RlLCBuZXdOb2RlKSB7XG4gICAgICAgIGNvbnN0IG9sZFdyYXBwZWQgPSBuZXcgTmFtZWROb2RlKE1JTl9OQU1FLCBvbGROb2RlKTtcbiAgICAgICAgY29uc3QgbmV3V3JhcHBlZCA9IG5ldyBOYW1lZE5vZGUoTUlOX05BTUUsIG5ld05vZGUpO1xuICAgICAgICByZXR1cm4gdGhpcy5jb21wYXJlKG9sZFdyYXBwZWQsIG5ld1dyYXBwZWQpICE9PSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBhIG5vZGUgd3JhcHBlciB0aGF0IHdpbGwgc29ydCBlcXVhbCB0byBvciBsZXNzIHRoYW5cbiAgICAgKiBhbnkgb3RoZXIgbm9kZSB3cmFwcGVyLCB1c2luZyB0aGlzIGluZGV4XG4gICAgICovXG4gICAgbWluUG9zdCgpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgcmV0dXJuIE5hbWVkTm9kZS5NSU47XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xubGV0IF9fRU1QVFlfTk9ERTtcbmNsYXNzIEtleUluZGV4IGV4dGVuZHMgSW5kZXgge1xuICAgIHN0YXRpYyBnZXQgX19FTVBUWV9OT0RFKCkge1xuICAgICAgICByZXR1cm4gX19FTVBUWV9OT0RFO1xuICAgIH1cbiAgICBzdGF0aWMgc2V0IF9fRU1QVFlfTk9ERSh2YWwpIHtcbiAgICAgICAgX19FTVBUWV9OT0RFID0gdmFsO1xuICAgIH1cbiAgICBjb21wYXJlKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIG5hbWVDb21wYXJlKGEubmFtZSwgYi5uYW1lKTtcbiAgICB9XG4gICAgaXNEZWZpbmVkT24obm9kZSkge1xuICAgICAgICAvLyBXZSBjb3VsZCBwcm9iYWJseSByZXR1cm4gdHJ1ZSBoZXJlIChzaW5jZSBldmVyeSBub2RlIGhhcyBhIGtleSksIGJ1dCBpdCdzIG5ldmVyIGNhbGxlZFxuICAgICAgICAvLyBzbyBqdXN0IGxlYXZpbmcgdW5pbXBsZW1lbnRlZCBmb3Igbm93LlxuICAgICAgICB0aHJvdyBhc3NlcnRpb25FcnJvcignS2V5SW5kZXguaXNEZWZpbmVkT24gbm90IGV4cGVjdGVkIHRvIGJlIGNhbGxlZC4nKTtcbiAgICB9XG4gICAgaW5kZXhlZFZhbHVlQ2hhbmdlZChvbGROb2RlLCBuZXdOb2RlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTsgLy8gVGhlIGtleSBmb3IgYSBub2RlIG5ldmVyIGNoYW5nZXMuXG4gICAgfVxuICAgIG1pblBvc3QoKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiBOYW1lZE5vZGUuTUlOO1xuICAgIH1cbiAgICBtYXhQb3N0KCkge1xuICAgICAgICAvLyBUT0RPOiBUaGlzIHNob3VsZCByZWFsbHkgYmUgY3JlYXRlZCBvbmNlIGFuZCBjYWNoZWQgaW4gYSBzdGF0aWMgcHJvcGVydHksIGJ1dFxuICAgICAgICAvLyBOYW1lZE5vZGUgaXNuJ3QgZGVmaW5lZCB5ZXQsIHNvIEkgY2FuJ3QgdXNlIGl0IGluIGEgc3RhdGljLiAgQmxlaC5cbiAgICAgICAgcmV0dXJuIG5ldyBOYW1lZE5vZGUoTUFYX05BTUUsIF9fRU1QVFlfTk9ERSk7XG4gICAgfVxuICAgIG1ha2VQb3N0KGluZGV4VmFsdWUsIG5hbWUpIHtcbiAgICAgICAgYXNzZXJ0KHR5cGVvZiBpbmRleFZhbHVlID09PSAnc3RyaW5nJywgJ0tleUluZGV4IGluZGV4VmFsdWUgbXVzdCBhbHdheXMgYmUgYSBzdHJpbmcuJyk7XG4gICAgICAgIC8vIFdlIGp1c3QgdXNlIGVtcHR5IG5vZGUsIGJ1dCBpdCdsbCBuZXZlciBiZSBjb21wYXJlZCwgc2luY2Ugb3VyIGNvbXBhcmF0b3Igb25seSBsb29rcyBhdCBuYW1lLlxuICAgICAgICByZXR1cm4gbmV3IE5hbWVkTm9kZShpbmRleFZhbHVlLCBfX0VNUFRZX05PREUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBTdHJpbmcgcmVwcmVzZW50YXRpb24gZm9yIGluY2x1c2lvbiBpbiBhIHF1ZXJ5IHNwZWNcbiAgICAgKi9cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuICcua2V5JztcbiAgICB9XG59XG5jb25zdCBLRVlfSU5ERVggPSBuZXcgS2V5SW5kZXgoKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gaXRlcmF0b3Igb3ZlciBhbiBMTFJCTm9kZS5cbiAqL1xuY2xhc3MgU29ydGVkTWFwSXRlcmF0b3Ige1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBub2RlIC0gTm9kZSB0byBpdGVyYXRlLlxuICAgICAqIEBwYXJhbSBpc1JldmVyc2VfIC0gV2hldGhlciBvciBub3QgdG8gaXRlcmF0ZSBpbiByZXZlcnNlXG4gICAgICovXG4gICAgY29uc3RydWN0b3Iobm9kZSwgc3RhcnRLZXksIGNvbXBhcmF0b3IsIGlzUmV2ZXJzZV8sIHJlc3VsdEdlbmVyYXRvcl8gPSBudWxsKSB7XG4gICAgICAgIHRoaXMuaXNSZXZlcnNlXyA9IGlzUmV2ZXJzZV87XG4gICAgICAgIHRoaXMucmVzdWx0R2VuZXJhdG9yXyA9IHJlc3VsdEdlbmVyYXRvcl87XG4gICAgICAgIHRoaXMubm9kZVN0YWNrXyA9IFtdO1xuICAgICAgICBsZXQgY21wID0gMTtcbiAgICAgICAgd2hpbGUgKCFub2RlLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgbm9kZSA9IG5vZGU7XG4gICAgICAgICAgICBjbXAgPSBzdGFydEtleSA/IGNvbXBhcmF0b3Iobm9kZS5rZXksIHN0YXJ0S2V5KSA6IDE7XG4gICAgICAgICAgICAvLyBmbGlwIHRoZSBjb21wYXJpc29uIGlmIHdlJ3JlIGdvaW5nIGluIHJldmVyc2VcbiAgICAgICAgICAgIGlmIChpc1JldmVyc2VfKSB7XG4gICAgICAgICAgICAgICAgY21wICo9IC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNtcCA8IDApIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIG5vZGUgaXMgbGVzcyB0aGFuIG91ciBzdGFydCBrZXkuIGlnbm9yZSBpdFxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzUmV2ZXJzZV8pIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZSA9IG5vZGUubGVmdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLnJpZ2h0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgbm9kZSBpcyBleGFjdGx5IGVxdWFsIHRvIG91ciBzdGFydCBrZXkuIFB1c2ggaXQgb24gdGhlIHN0YWNrLCBidXQgc3RvcCBpdGVyYXRpbmc7XG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlU3RhY2tfLnB1c2gobm9kZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIG5vZGUgaXMgZ3JlYXRlciB0aGFuIG91ciBzdGFydCBrZXksIGFkZCBpdCB0byB0aGUgc3RhY2sgYW5kIG1vdmUgdG8gdGhlIG5leHQgb25lXG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlU3RhY2tfLnB1c2gobm9kZSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNSZXZlcnNlXykge1xuICAgICAgICAgICAgICAgICAgICBub2RlID0gbm9kZS5yaWdodDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLmxlZnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGdldE5leHQoKSB7XG4gICAgICAgIGlmICh0aGlzLm5vZGVTdGFja18ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbm9kZSA9IHRoaXMubm9kZVN0YWNrXy5wb3AoKTtcbiAgICAgICAgbGV0IHJlc3VsdDtcbiAgICAgICAgaWYgKHRoaXMucmVzdWx0R2VuZXJhdG9yXykge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5yZXN1bHRHZW5lcmF0b3JfKG5vZGUua2V5LCBub2RlLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHsga2V5OiBub2RlLmtleSwgdmFsdWU6IG5vZGUudmFsdWUgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pc1JldmVyc2VfKSB7XG4gICAgICAgICAgICBub2RlID0gbm9kZS5sZWZ0O1xuICAgICAgICAgICAgd2hpbGUgKCFub2RlLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMubm9kZVN0YWNrXy5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLnJpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbm9kZSA9IG5vZGUucmlnaHQ7XG4gICAgICAgICAgICB3aGlsZSAoIW5vZGUuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlU3RhY2tfLnB1c2gobm9kZSk7XG4gICAgICAgICAgICAgICAgbm9kZSA9IG5vZGUubGVmdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBoYXNOZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ub2RlU3RhY2tfLmxlbmd0aCA+IDA7XG4gICAgfVxuICAgIHBlZWsoKSB7XG4gICAgICAgIGlmICh0aGlzLm5vZGVTdGFja18ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBub2RlID0gdGhpcy5ub2RlU3RhY2tfW3RoaXMubm9kZVN0YWNrXy5sZW5ndGggLSAxXTtcbiAgICAgICAgaWYgKHRoaXMucmVzdWx0R2VuZXJhdG9yXykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0R2VuZXJhdG9yXyhub2RlLmtleSwgbm9kZS52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4geyBrZXk6IG5vZGUua2V5LCB2YWx1ZTogbm9kZS52YWx1ZSB9O1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBSZXByZXNlbnRzIGEgbm9kZSBpbiBhIExlZnQtbGVhbmluZyBSZWQtQmxhY2sgdHJlZS5cbiAqL1xuY2xhc3MgTExSQk5vZGUge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBrZXkgLSBLZXkgYXNzb2NpYXRlZCB3aXRoIHRoaXMgbm9kZS5cbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBWYWx1ZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBub2RlLlxuICAgICAqIEBwYXJhbSBjb2xvciAtIFdoZXRoZXIgdGhpcyBub2RlIGlzIHJlZC5cbiAgICAgKiBAcGFyYW0gbGVmdCAtIExlZnQgY2hpbGQuXG4gICAgICogQHBhcmFtIHJpZ2h0IC0gUmlnaHQgY2hpbGQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioa2V5LCB2YWx1ZSwgY29sb3IsIGxlZnQsIHJpZ2h0KSB7XG4gICAgICAgIHRoaXMua2V5ID0ga2V5O1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIHRoaXMuY29sb3IgPSBjb2xvciAhPSBudWxsID8gY29sb3IgOiBMTFJCTm9kZS5SRUQ7XG4gICAgICAgIHRoaXMubGVmdCA9XG4gICAgICAgICAgICBsZWZ0ICE9IG51bGwgPyBsZWZ0IDogU29ydGVkTWFwLkVNUFRZX05PREU7XG4gICAgICAgIHRoaXMucmlnaHQgPVxuICAgICAgICAgICAgcmlnaHQgIT0gbnVsbCA/IHJpZ2h0IDogU29ydGVkTWFwLkVNUFRZX05PREU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBjb3B5IG9mIHRoZSBjdXJyZW50IG5vZGUsIG9wdGlvbmFsbHkgcmVwbGFjaW5nIHBpZWNlcyBvZiBpdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBrZXkgLSBOZXcga2V5IGZvciB0aGUgbm9kZSwgb3IgbnVsbC5cbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBOZXcgdmFsdWUgZm9yIHRoZSBub2RlLCBvciBudWxsLlxuICAgICAqIEBwYXJhbSBjb2xvciAtIE5ldyBjb2xvciBmb3IgdGhlIG5vZGUsIG9yIG51bGwuXG4gICAgICogQHBhcmFtIGxlZnQgLSBOZXcgbGVmdCBjaGlsZCBmb3IgdGhlIG5vZGUsIG9yIG51bGwuXG4gICAgICogQHBhcmFtIHJpZ2h0IC0gTmV3IHJpZ2h0IGNoaWxkIGZvciB0aGUgbm9kZSwgb3IgbnVsbC5cbiAgICAgKiBAcmV0dXJucyBUaGUgbm9kZSBjb3B5LlxuICAgICAqL1xuICAgIGNvcHkoa2V5LCB2YWx1ZSwgY29sb3IsIGxlZnQsIHJpZ2h0KSB7XG4gICAgICAgIHJldHVybiBuZXcgTExSQk5vZGUoa2V5ICE9IG51bGwgPyBrZXkgOiB0aGlzLmtleSwgdmFsdWUgIT0gbnVsbCA/IHZhbHVlIDogdGhpcy52YWx1ZSwgY29sb3IgIT0gbnVsbCA/IGNvbG9yIDogdGhpcy5jb2xvciwgbGVmdCAhPSBudWxsID8gbGVmdCA6IHRoaXMubGVmdCwgcmlnaHQgIT0gbnVsbCA/IHJpZ2h0IDogdGhpcy5yaWdodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIFRoZSB0b3RhbCBudW1iZXIgb2Ygbm9kZXMgaW4gdGhlIHRyZWUuXG4gICAgICovXG4gICAgY291bnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxlZnQuY291bnQoKSArIDEgKyB0aGlzLnJpZ2h0LmNvdW50KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIFRydWUgaWYgdGhlIHRyZWUgaXMgZW1wdHkuXG4gICAgICovXG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmF2ZXJzZXMgdGhlIHRyZWUgaW4ga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvbiBmdW5jdGlvblxuICAgICAqIGZvciBlYWNoIG5vZGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYWN0aW9uIC0gQ2FsbGJhY2sgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIGZvciBlYWNoXG4gICAgICogICBub2RlLiAgSWYgaXQgcmV0dXJucyB0cnVlLCB0cmF2ZXJzYWwgaXMgYWJvcnRlZC5cbiAgICAgKiBAcmV0dXJucyBUaGUgZmlyc3QgdHJ1dGh5IHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbiwgb3IgdGhlIGxhc3QgZmFsc2V5XG4gICAgICogICB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb25cbiAgICAgKi9cbiAgICBpbm9yZGVyVHJhdmVyc2FsKGFjdGlvbikge1xuICAgICAgICByZXR1cm4gKHRoaXMubGVmdC5pbm9yZGVyVHJhdmVyc2FsKGFjdGlvbikgfHxcbiAgICAgICAgICAgICEhYWN0aW9uKHRoaXMua2V5LCB0aGlzLnZhbHVlKSB8fFxuICAgICAgICAgICAgdGhpcy5yaWdodC5pbm9yZGVyVHJhdmVyc2FsKGFjdGlvbikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmF2ZXJzZXMgdGhlIHRyZWUgaW4gcmV2ZXJzZSBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uIGZ1bmN0aW9uXG4gICAgICogZm9yIGVhY2ggbm9kZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhY3Rpb24gLSBDYWxsYmFjayBmdW5jdGlvbiB0byBiZSBjYWxsZWQgZm9yIGVhY2hcbiAgICAgKiBub2RlLiAgSWYgaXQgcmV0dXJucyB0cnVlLCB0cmF2ZXJzYWwgaXMgYWJvcnRlZC5cbiAgICAgKiBAcmV0dXJucyBUcnVlIGlmIHRyYXZlcnNhbCB3YXMgYWJvcnRlZC5cbiAgICAgKi9cbiAgICByZXZlcnNlVHJhdmVyc2FsKGFjdGlvbikge1xuICAgICAgICByZXR1cm4gKHRoaXMucmlnaHQucmV2ZXJzZVRyYXZlcnNhbChhY3Rpb24pIHx8XG4gICAgICAgICAgICBhY3Rpb24odGhpcy5rZXksIHRoaXMudmFsdWUpIHx8XG4gICAgICAgICAgICB0aGlzLmxlZnQucmV2ZXJzZVRyYXZlcnNhbChhY3Rpb24pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybnMgVGhlIG1pbmltdW0gbm9kZSBpbiB0aGUgdHJlZS5cbiAgICAgKi9cbiAgICBtaW5fKCkge1xuICAgICAgICBpZiAodGhpcy5sZWZ0LmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sZWZ0Lm1pbl8oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBUaGUgbWF4aW11bSBrZXkgaW4gdGhlIHRyZWUuXG4gICAgICovXG4gICAgbWluS2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW5fKCkua2V5O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBUaGUgbWF4aW11bSBrZXkgaW4gdGhlIHRyZWUuXG4gICAgICovXG4gICAgbWF4S2V5KCkge1xuICAgICAgICBpZiAodGhpcy5yaWdodC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmtleTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJpZ2h0Lm1heEtleSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBrZXkgLSBLZXkgdG8gaW5zZXJ0LlxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFZhbHVlIHRvIGluc2VydC5cbiAgICAgKiBAcGFyYW0gY29tcGFyYXRvciAtIENvbXBhcmF0b3IuXG4gICAgICogQHJldHVybnMgTmV3IHRyZWUsIHdpdGggdGhlIGtleS92YWx1ZSBhZGRlZC5cbiAgICAgKi9cbiAgICBpbnNlcnQoa2V5LCB2YWx1ZSwgY29tcGFyYXRvcikge1xuICAgICAgICBsZXQgbiA9IHRoaXM7XG4gICAgICAgIGNvbnN0IGNtcCA9IGNvbXBhcmF0b3Ioa2V5LCBuLmtleSk7XG4gICAgICAgIGlmIChjbXAgPCAwKSB7XG4gICAgICAgICAgICBuID0gbi5jb3B5KG51bGwsIG51bGwsIG51bGwsIG4ubGVmdC5pbnNlcnQoa2V5LCB2YWx1ZSwgY29tcGFyYXRvciksIG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNtcCA9PT0gMCkge1xuICAgICAgICAgICAgbiA9IG4uY29weShudWxsLCB2YWx1ZSwgbnVsbCwgbnVsbCwgbnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBuID0gbi5jb3B5KG51bGwsIG51bGwsIG51bGwsIG51bGwsIG4ucmlnaHQuaW5zZXJ0KGtleSwgdmFsdWUsIGNvbXBhcmF0b3IpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbi5maXhVcF8oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybnMgTmV3IHRyZWUsIHdpdGggdGhlIG1pbmltdW0ga2V5IHJlbW92ZWQuXG4gICAgICovXG4gICAgcmVtb3ZlTWluXygpIHtcbiAgICAgICAgaWYgKHRoaXMubGVmdC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIHJldHVybiBTb3J0ZWRNYXAuRU1QVFlfTk9ERTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbiA9IHRoaXM7XG4gICAgICAgIGlmICghbi5sZWZ0LmlzUmVkXygpICYmICFuLmxlZnQubGVmdC5pc1JlZF8oKSkge1xuICAgICAgICAgICAgbiA9IG4ubW92ZVJlZExlZnRfKCk7XG4gICAgICAgIH1cbiAgICAgICAgbiA9IG4uY29weShudWxsLCBudWxsLCBudWxsLCBuLmxlZnQucmVtb3ZlTWluXygpLCBudWxsKTtcbiAgICAgICAgcmV0dXJuIG4uZml4VXBfKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBrZXkgLSBUaGUga2V5IG9mIHRoZSBpdGVtIHRvIHJlbW92ZS5cbiAgICAgKiBAcGFyYW0gY29tcGFyYXRvciAtIENvbXBhcmF0b3IuXG4gICAgICogQHJldHVybnMgTmV3IHRyZWUsIHdpdGggdGhlIHNwZWNpZmllZCBpdGVtIHJlbW92ZWQuXG4gICAgICovXG4gICAgcmVtb3ZlKGtleSwgY29tcGFyYXRvcikge1xuICAgICAgICBsZXQgbiwgc21hbGxlc3Q7XG4gICAgICAgIG4gPSB0aGlzO1xuICAgICAgICBpZiAoY29tcGFyYXRvcihrZXksIG4ua2V5KSA8IDApIHtcbiAgICAgICAgICAgIGlmICghbi5sZWZ0LmlzRW1wdHkoKSAmJiAhbi5sZWZ0LmlzUmVkXygpICYmICFuLmxlZnQubGVmdC5pc1JlZF8oKSkge1xuICAgICAgICAgICAgICAgIG4gPSBuLm1vdmVSZWRMZWZ0XygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbiA9IG4uY29weShudWxsLCBudWxsLCBudWxsLCBuLmxlZnQucmVtb3ZlKGtleSwgY29tcGFyYXRvciksIG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKG4ubGVmdC5pc1JlZF8oKSkge1xuICAgICAgICAgICAgICAgIG4gPSBuLnJvdGF0ZVJpZ2h0XygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFuLnJpZ2h0LmlzRW1wdHkoKSAmJiAhbi5yaWdodC5pc1JlZF8oKSAmJiAhbi5yaWdodC5sZWZ0LmlzUmVkXygpKSB7XG4gICAgICAgICAgICAgICAgbiA9IG4ubW92ZVJlZFJpZ2h0XygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbXBhcmF0b3Ioa2V5LCBuLmtleSkgPT09IDApIHtcbiAgICAgICAgICAgICAgICBpZiAobi5yaWdodC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFNvcnRlZE1hcC5FTVBUWV9OT0RFO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc21hbGxlc3QgPSBuLnJpZ2h0Lm1pbl8oKTtcbiAgICAgICAgICAgICAgICAgICAgbiA9IG4uY29weShzbWFsbGVzdC5rZXksIHNtYWxsZXN0LnZhbHVlLCBudWxsLCBudWxsLCBuLnJpZ2h0LnJlbW92ZU1pbl8oKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbiA9IG4uY29weShudWxsLCBudWxsLCBudWxsLCBudWxsLCBuLnJpZ2h0LnJlbW92ZShrZXksIGNvbXBhcmF0b3IpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbi5maXhVcF8oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybnMgV2hldGhlciB0aGlzIGlzIGEgUkVEIG5vZGUuXG4gICAgICovXG4gICAgaXNSZWRfKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2xvcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybnMgTmV3IHRyZWUgYWZ0ZXIgcGVyZm9ybWluZyBhbnkgbmVlZGVkIHJvdGF0aW9ucy5cbiAgICAgKi9cbiAgICBmaXhVcF8oKSB7XG4gICAgICAgIGxldCBuID0gdGhpcztcbiAgICAgICAgaWYgKG4ucmlnaHQuaXNSZWRfKCkgJiYgIW4ubGVmdC5pc1JlZF8oKSkge1xuICAgICAgICAgICAgbiA9IG4ucm90YXRlTGVmdF8oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobi5sZWZ0LmlzUmVkXygpICYmIG4ubGVmdC5sZWZ0LmlzUmVkXygpKSB7XG4gICAgICAgICAgICBuID0gbi5yb3RhdGVSaWdodF8oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobi5sZWZ0LmlzUmVkXygpICYmIG4ucmlnaHQuaXNSZWRfKCkpIHtcbiAgICAgICAgICAgIG4gPSBuLmNvbG9yRmxpcF8oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybnMgTmV3IHRyZWUsIGFmdGVyIG1vdmVSZWRMZWZ0LlxuICAgICAqL1xuICAgIG1vdmVSZWRMZWZ0XygpIHtcbiAgICAgICAgbGV0IG4gPSB0aGlzLmNvbG9yRmxpcF8oKTtcbiAgICAgICAgaWYgKG4ucmlnaHQubGVmdC5pc1JlZF8oKSkge1xuICAgICAgICAgICAgbiA9IG4uY29weShudWxsLCBudWxsLCBudWxsLCBudWxsLCBuLnJpZ2h0LnJvdGF0ZVJpZ2h0XygpKTtcbiAgICAgICAgICAgIG4gPSBuLnJvdGF0ZUxlZnRfKCk7XG4gICAgICAgICAgICBuID0gbi5jb2xvckZsaXBfKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIE5ldyB0cmVlLCBhZnRlciBtb3ZlUmVkUmlnaHQuXG4gICAgICovXG4gICAgbW92ZVJlZFJpZ2h0XygpIHtcbiAgICAgICAgbGV0IG4gPSB0aGlzLmNvbG9yRmxpcF8oKTtcbiAgICAgICAgaWYgKG4ubGVmdC5sZWZ0LmlzUmVkXygpKSB7XG4gICAgICAgICAgICBuID0gbi5yb3RhdGVSaWdodF8oKTtcbiAgICAgICAgICAgIG4gPSBuLmNvbG9yRmxpcF8oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybnMgTmV3IHRyZWUsIGFmdGVyIHJvdGF0ZUxlZnQuXG4gICAgICovXG4gICAgcm90YXRlTGVmdF8oKSB7XG4gICAgICAgIGNvbnN0IG5sID0gdGhpcy5jb3B5KG51bGwsIG51bGwsIExMUkJOb2RlLlJFRCwgbnVsbCwgdGhpcy5yaWdodC5sZWZ0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMucmlnaHQuY29weShudWxsLCBudWxsLCB0aGlzLmNvbG9yLCBubCwgbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIE5ldyB0cmVlLCBhZnRlciByb3RhdGVSaWdodC5cbiAgICAgKi9cbiAgICByb3RhdGVSaWdodF8oKSB7XG4gICAgICAgIGNvbnN0IG5yID0gdGhpcy5jb3B5KG51bGwsIG51bGwsIExMUkJOb2RlLlJFRCwgdGhpcy5sZWZ0LnJpZ2h0LCBudWxsKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5jb3B5KG51bGwsIG51bGwsIHRoaXMuY29sb3IsIG51bGwsIG5yKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybnMgTmV3dCByZWUsIGFmdGVyIGNvbG9yRmxpcC5cbiAgICAgKi9cbiAgICBjb2xvckZsaXBfKCkge1xuICAgICAgICBjb25zdCBsZWZ0ID0gdGhpcy5sZWZ0LmNvcHkobnVsbCwgbnVsbCwgIXRoaXMubGVmdC5jb2xvciwgbnVsbCwgbnVsbCk7XG4gICAgICAgIGNvbnN0IHJpZ2h0ID0gdGhpcy5yaWdodC5jb3B5KG51bGwsIG51bGwsICF0aGlzLnJpZ2h0LmNvbG9yLCBudWxsLCBudWxsKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29weShudWxsLCBudWxsLCAhdGhpcy5jb2xvciwgbGVmdCwgcmlnaHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3IgdGVzdGluZy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRydWUgaWYgYWxsIGlzIHdlbGwuXG4gICAgICovXG4gICAgY2hlY2tNYXhEZXB0aF8oKSB7XG4gICAgICAgIGNvbnN0IGJsYWNrRGVwdGggPSB0aGlzLmNoZWNrXygpO1xuICAgICAgICByZXR1cm4gTWF0aC5wb3coMi4wLCBibGFja0RlcHRoKSA8PSB0aGlzLmNvdW50KCkgKyAxO1xuICAgIH1cbiAgICBjaGVja18oKSB7XG4gICAgICAgIGlmICh0aGlzLmlzUmVkXygpICYmIHRoaXMubGVmdC5pc1JlZF8oKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZWQgbm9kZSBoYXMgcmVkIGNoaWxkKCcgKyB0aGlzLmtleSArICcsJyArIHRoaXMudmFsdWUgKyAnKScpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnJpZ2h0LmlzUmVkXygpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JpZ2h0IGNoaWxkIG9mICgnICsgdGhpcy5rZXkgKyAnLCcgKyB0aGlzLnZhbHVlICsgJykgaXMgcmVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYmxhY2tEZXB0aCA9IHRoaXMubGVmdC5jaGVja18oKTtcbiAgICAgICAgaWYgKGJsYWNrRGVwdGggIT09IHRoaXMucmlnaHQuY2hlY2tfKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQmxhY2sgZGVwdGhzIGRpZmZlcicpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGJsYWNrRGVwdGggKyAodGhpcy5pc1JlZF8oKSA/IDAgOiAxKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbkxMUkJOb2RlLlJFRCA9IHRydWU7XG5MTFJCTm9kZS5CTEFDSyA9IGZhbHNlO1xuLyoqXG4gKiBSZXByZXNlbnRzIGFuIGVtcHR5IG5vZGUgKGEgbGVhZiBub2RlIGluIHRoZSBSZWQtQmxhY2sgVHJlZSkuXG4gKi9cbmNsYXNzIExMUkJFbXB0eU5vZGUge1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBjb3B5IG9mIHRoZSBjdXJyZW50IG5vZGUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgbm9kZSBjb3B5LlxuICAgICAqL1xuICAgIGNvcHkoa2V5LCB2YWx1ZSwgY29sb3IsIGxlZnQsIHJpZ2h0KSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgY29weSBvZiB0aGUgdHJlZSwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleS92YWx1ZSBhZGRlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBrZXkgLSBLZXkgdG8gYmUgYWRkZWQuXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVmFsdWUgdG8gYmUgYWRkZWQuXG4gICAgICogQHBhcmFtIGNvbXBhcmF0b3IgLSBDb21wYXJhdG9yLlxuICAgICAqIEByZXR1cm5zIE5ldyB0cmVlLCB3aXRoIGl0ZW0gYWRkZWQuXG4gICAgICovXG4gICAgaW5zZXJ0KGtleSwgdmFsdWUsIGNvbXBhcmF0b3IpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBMTFJCTm9kZShrZXksIHZhbHVlLCBudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGNvcHkgb2YgdGhlIHRyZWUsIHdpdGggdGhlIHNwZWNpZmllZCBrZXkgcmVtb3ZlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBrZXkgLSBUaGUga2V5IHRvIHJlbW92ZS5cbiAgICAgKiBAcGFyYW0gY29tcGFyYXRvciAtIENvbXBhcmF0b3IuXG4gICAgICogQHJldHVybnMgTmV3IHRyZWUsIHdpdGggaXRlbSByZW1vdmVkLlxuICAgICAqL1xuICAgIHJlbW92ZShrZXksIGNvbXBhcmF0b3IpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIFRoZSB0b3RhbCBudW1iZXIgb2Ygbm9kZXMgaW4gdGhlIHRyZWUuXG4gICAgICovXG4gICAgY291bnQoKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBUcnVlIGlmIHRoZSB0cmVlIGlzIGVtcHR5LlxuICAgICAqL1xuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmF2ZXJzZXMgdGhlIHRyZWUgaW4ga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvbiBmdW5jdGlvblxuICAgICAqIGZvciBlYWNoIG5vZGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYWN0aW9uIC0gQ2FsbGJhY2sgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIGZvciBlYWNoXG4gICAgICogbm9kZS4gIElmIGl0IHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzIGFib3J0ZWQuXG4gICAgICogQHJldHVybnMgVHJ1ZSBpZiB0cmF2ZXJzYWwgd2FzIGFib3J0ZWQuXG4gICAgICovXG4gICAgaW5vcmRlclRyYXZlcnNhbChhY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmF2ZXJzZXMgdGhlIHRyZWUgaW4gcmV2ZXJzZSBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uIGZ1bmN0aW9uXG4gICAgICogZm9yIGVhY2ggbm9kZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhY3Rpb24gLSBDYWxsYmFjayBmdW5jdGlvbiB0byBiZSBjYWxsZWQgZm9yIGVhY2hcbiAgICAgKiBub2RlLiAgSWYgaXQgcmV0dXJucyB0cnVlLCB0cmF2ZXJzYWwgaXMgYWJvcnRlZC5cbiAgICAgKiBAcmV0dXJucyBUcnVlIGlmIHRyYXZlcnNhbCB3YXMgYWJvcnRlZC5cbiAgICAgKi9cbiAgICByZXZlcnNlVHJhdmVyc2FsKGFjdGlvbikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIG1pbktleSgpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIG1heEtleSgpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNoZWNrXygpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIFdoZXRoZXIgdGhpcyBub2RlIGlzIHJlZC5cbiAgICAgKi9cbiAgICBpc1JlZF8oKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG4vKipcbiAqIEFuIGltbXV0YWJsZSBzb3J0ZWQgbWFwIGltcGxlbWVudGF0aW9uLCBiYXNlZCBvbiBhIExlZnQtbGVhbmluZyBSZWQtQmxhY2tcbiAqIHRyZWUuXG4gKi9cbmNsYXNzIFNvcnRlZE1hcCB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGNvbXBhcmF0b3JfIC0gS2V5IGNvbXBhcmF0b3IuXG4gICAgICogQHBhcmFtIHJvb3RfIC0gT3B0aW9uYWwgcm9vdCBub2RlIGZvciB0aGUgbWFwLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGNvbXBhcmF0b3JfLCByb290XyA9IFNvcnRlZE1hcC5FTVBUWV9OT0RFKSB7XG4gICAgICAgIHRoaXMuY29tcGFyYXRvcl8gPSBjb21wYXJhdG9yXztcbiAgICAgICAgdGhpcy5yb290XyA9IHJvb3RfO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgY29weSBvZiB0aGUgbWFwLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5L3ZhbHVlIGFkZGVkIG9yIHJlcGxhY2VkLlxuICAgICAqIChUT0RPOiBXZSBzaG91bGQgcGVyaGFwcyByZW5hbWUgdGhpcyBtZXRob2QgdG8gJ3B1dCcpXG4gICAgICpcbiAgICAgKiBAcGFyYW0ga2V5IC0gS2V5IHRvIGJlIGFkZGVkLlxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFZhbHVlIHRvIGJlIGFkZGVkLlxuICAgICAqIEByZXR1cm5zIE5ldyBtYXAsIHdpdGggaXRlbSBhZGRlZC5cbiAgICAgKi9cbiAgICBpbnNlcnQoa2V5LCB2YWx1ZSkge1xuICAgICAgICByZXR1cm4gbmV3IFNvcnRlZE1hcCh0aGlzLmNvbXBhcmF0b3JfLCB0aGlzLnJvb3RfXG4gICAgICAgICAgICAuaW5zZXJ0KGtleSwgdmFsdWUsIHRoaXMuY29tcGFyYXRvcl8pXG4gICAgICAgICAgICAuY29weShudWxsLCBudWxsLCBMTFJCTm9kZS5CTEFDSywgbnVsbCwgbnVsbCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgY29weSBvZiB0aGUgbWFwLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IHJlbW92ZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ga2V5IC0gVGhlIGtleSB0byByZW1vdmUuXG4gICAgICogQHJldHVybnMgTmV3IG1hcCwgd2l0aCBpdGVtIHJlbW92ZWQuXG4gICAgICovXG4gICAgcmVtb3ZlKGtleSkge1xuICAgICAgICByZXR1cm4gbmV3IFNvcnRlZE1hcCh0aGlzLmNvbXBhcmF0b3JfLCB0aGlzLnJvb3RfXG4gICAgICAgICAgICAucmVtb3ZlKGtleSwgdGhpcy5jb21wYXJhdG9yXylcbiAgICAgICAgICAgIC5jb3B5KG51bGwsIG51bGwsIExMUkJOb2RlLkJMQUNLLCBudWxsLCBudWxsKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBub2RlIHdpdGggdGhlIGdpdmVuIGtleSwgb3IgbnVsbC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBrZXkgLSBUaGUga2V5IHRvIGxvb2sgdXAuXG4gICAgICogQHJldHVybnMgVGhlIHZhbHVlIG9mIHRoZSBub2RlIHdpdGggdGhlIGdpdmVuIGtleSwgb3IgbnVsbCBpZiB0aGVcbiAgICAgKiBrZXkgZG9lc24ndCBleGlzdC5cbiAgICAgKi9cbiAgICBnZXQoa2V5KSB7XG4gICAgICAgIGxldCBjbXA7XG4gICAgICAgIGxldCBub2RlID0gdGhpcy5yb290XztcbiAgICAgICAgd2hpbGUgKCFub2RlLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgY21wID0gdGhpcy5jb21wYXJhdG9yXyhrZXksIG5vZGUua2V5KTtcbiAgICAgICAgICAgIGlmIChjbXAgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZS52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA8IDApIHtcbiAgICAgICAgICAgICAgICBub2RlID0gbm9kZS5sZWZ0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY21wID4gMCkge1xuICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLnJpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBrZXkgb2YgdGhlIGl0ZW0gKmJlZm9yZSogdGhlIHNwZWNpZmllZCBrZXksIG9yIG51bGwgaWYga2V5IGlzIHRoZSBmaXJzdCBpdGVtLlxuICAgICAqIEBwYXJhbSBrZXkgLSBUaGUga2V5IHRvIGZpbmQgdGhlIHByZWRlY2Vzc29yIG9mXG4gICAgICogQHJldHVybnMgVGhlIHByZWRlY2Vzc29yIGtleS5cbiAgICAgKi9cbiAgICBnZXRQcmVkZWNlc3NvcktleShrZXkpIHtcbiAgICAgICAgbGV0IGNtcCwgbm9kZSA9IHRoaXMucm9vdF8sIHJpZ2h0UGFyZW50ID0gbnVsbDtcbiAgICAgICAgd2hpbGUgKCFub2RlLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgY21wID0gdGhpcy5jb21wYXJhdG9yXyhrZXksIG5vZGUua2V5KTtcbiAgICAgICAgICAgIGlmIChjbXAgPT09IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoIW5vZGUubGVmdC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZSA9IG5vZGUubGVmdDtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKCFub2RlLnJpZ2h0LmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZSA9IG5vZGUucmlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5vZGUua2V5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyaWdodFBhcmVudCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmlnaHRQYXJlbnQua2V5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7IC8vIGZpcnN0IGl0ZW0uXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY21wIDwgMCkge1xuICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLmxlZnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjbXAgPiAwKSB7XG4gICAgICAgICAgICAgICAgcmlnaHRQYXJlbnQgPSBub2RlO1xuICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLnJpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQXR0ZW1wdGVkIHRvIGZpbmQgcHJlZGVjZXNzb3Iga2V5IGZvciBhIG5vbmV4aXN0ZW50IGtleS4gIFdoYXQgZ2l2ZXM/Jyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIFRydWUgaWYgdGhlIG1hcCBpcyBlbXB0eS5cbiAgICAgKi9cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290Xy5pc0VtcHR5KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIFRoZSB0b3RhbCBudW1iZXIgb2Ygbm9kZXMgaW4gdGhlIG1hcC5cbiAgICAgKi9cbiAgICBjb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdF8uY291bnQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybnMgVGhlIG1pbmltdW0ga2V5IGluIHRoZSBtYXAuXG4gICAgICovXG4gICAgbWluS2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290Xy5taW5LZXkoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybnMgVGhlIG1heGltdW0ga2V5IGluIHRoZSBtYXAuXG4gICAgICovXG4gICAgbWF4S2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290Xy5tYXhLZXkoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJhdmVyc2VzIHRoZSBtYXAgaW4ga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvbiBmdW5jdGlvblxuICAgICAqIGZvciBlYWNoIGtleS92YWx1ZSBwYWlyLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFjdGlvbiAtIENhbGxiYWNrIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZFxuICAgICAqIGZvciBlYWNoIGtleS92YWx1ZSBwYWlyLiAgSWYgYWN0aW9uIHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzIGFib3J0ZWQuXG4gICAgICogQHJldHVybnMgVGhlIGZpcnN0IHRydXRoeSB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24sIG9yIHRoZSBsYXN0IGZhbHNleVxuICAgICAqICAgdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uXG4gICAgICovXG4gICAgaW5vcmRlclRyYXZlcnNhbChhY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdF8uaW5vcmRlclRyYXZlcnNhbChhY3Rpb24pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmF2ZXJzZXMgdGhlIG1hcCBpbiByZXZlcnNlIGtleSBvcmRlciBhbmQgY2FsbHMgdGhlIHNwZWNpZmllZCBhY3Rpb24gZnVuY3Rpb25cbiAgICAgKiBmb3IgZWFjaCBrZXkvdmFsdWUgcGFpci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhY3Rpb24gLSBDYWxsYmFjayBmdW5jdGlvbiB0byBiZSBjYWxsZWRcbiAgICAgKiBmb3IgZWFjaCBrZXkvdmFsdWUgcGFpci4gIElmIGFjdGlvbiByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpcyBhYm9ydGVkLlxuICAgICAqIEByZXR1cm5zIFRydWUgaWYgdGhlIHRyYXZlcnNhbCB3YXMgYWJvcnRlZC5cbiAgICAgKi9cbiAgICByZXZlcnNlVHJhdmVyc2FsKGFjdGlvbikge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290Xy5yZXZlcnNlVHJhdmVyc2FsKGFjdGlvbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gaXRlcmF0b3Igb3ZlciB0aGUgU29ydGVkTWFwLlxuICAgICAqIEByZXR1cm5zIFRoZSBpdGVyYXRvci5cbiAgICAgKi9cbiAgICBnZXRJdGVyYXRvcihyZXN1bHRHZW5lcmF0b3IpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTb3J0ZWRNYXBJdGVyYXRvcih0aGlzLnJvb3RfLCBudWxsLCB0aGlzLmNvbXBhcmF0b3JfLCBmYWxzZSwgcmVzdWx0R2VuZXJhdG9yKTtcbiAgICB9XG4gICAgZ2V0SXRlcmF0b3JGcm9tKGtleSwgcmVzdWx0R2VuZXJhdG9yKSB7XG4gICAgICAgIHJldHVybiBuZXcgU29ydGVkTWFwSXRlcmF0b3IodGhpcy5yb290Xywga2V5LCB0aGlzLmNvbXBhcmF0b3JfLCBmYWxzZSwgcmVzdWx0R2VuZXJhdG9yKTtcbiAgICB9XG4gICAgZ2V0UmV2ZXJzZUl0ZXJhdG9yRnJvbShrZXksIHJlc3VsdEdlbmVyYXRvcikge1xuICAgICAgICByZXR1cm4gbmV3IFNvcnRlZE1hcEl0ZXJhdG9yKHRoaXMucm9vdF8sIGtleSwgdGhpcy5jb21wYXJhdG9yXywgdHJ1ZSwgcmVzdWx0R2VuZXJhdG9yKTtcbiAgICB9XG4gICAgZ2V0UmV2ZXJzZUl0ZXJhdG9yKHJlc3VsdEdlbmVyYXRvcikge1xuICAgICAgICByZXR1cm4gbmV3IFNvcnRlZE1hcEl0ZXJhdG9yKHRoaXMucm9vdF8sIG51bGwsIHRoaXMuY29tcGFyYXRvcl8sIHRydWUsIHJlc3VsdEdlbmVyYXRvcik7XG4gICAgfVxufVxuLyoqXG4gKiBBbHdheXMgdXNlIHRoZSBzYW1lIGVtcHR5IG5vZGUsIHRvIHJlZHVjZSBtZW1vcnkuXG4gKi9cblNvcnRlZE1hcC5FTVBUWV9OT0RFID0gbmV3IExMUkJFbXB0eU5vZGUoKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmZ1bmN0aW9uIE5BTUVfT05MWV9DT01QQVJBVE9SKGxlZnQsIHJpZ2h0KSB7XG4gICAgcmV0dXJuIG5hbWVDb21wYXJlKGxlZnQubmFtZSwgcmlnaHQubmFtZSk7XG59XG5mdW5jdGlvbiBOQU1FX0NPTVBBUkFUT1IobGVmdCwgcmlnaHQpIHtcbiAgICByZXR1cm4gbmFtZUNvbXBhcmUobGVmdCwgcmlnaHQpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xubGV0IE1BWF9OT0RFJDI7XG5mdW5jdGlvbiBzZXRNYXhOb2RlJDEodmFsKSB7XG4gICAgTUFYX05PREUkMiA9IHZhbDtcbn1cbmNvbnN0IHByaW9yaXR5SGFzaFRleHQgPSBmdW5jdGlvbiAocHJpb3JpdHkpIHtcbiAgICBpZiAodHlwZW9mIHByaW9yaXR5ID09PSAnbnVtYmVyJykge1xuICAgICAgICByZXR1cm4gJ251bWJlcjonICsgZG91YmxlVG9JRUVFNzU0U3RyaW5nKHByaW9yaXR5KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiAnc3RyaW5nOicgKyBwcmlvcml0eTtcbiAgICB9XG59O1xuLyoqXG4gKiBWYWxpZGF0ZXMgdGhhdCBhIHByaW9yaXR5IHNuYXBzaG90IE5vZGUgaXMgdmFsaWQuXG4gKi9cbmNvbnN0IHZhbGlkYXRlUHJpb3JpdHlOb2RlID0gZnVuY3Rpb24gKHByaW9yaXR5Tm9kZSkge1xuICAgIGlmIChwcmlvcml0eU5vZGUuaXNMZWFmTm9kZSgpKSB7XG4gICAgICAgIGNvbnN0IHZhbCA9IHByaW9yaXR5Tm9kZS52YWwoKTtcbiAgICAgICAgYXNzZXJ0KHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnIHx8XG4gICAgICAgICAgICB0eXBlb2YgdmFsID09PSAnbnVtYmVyJyB8fFxuICAgICAgICAgICAgKHR5cGVvZiB2YWwgPT09ICdvYmplY3QnICYmIGNvbnRhaW5zKHZhbCwgJy5zdicpKSwgJ1ByaW9yaXR5IG11c3QgYmUgYSBzdHJpbmcgb3IgbnVtYmVyLicpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYXNzZXJ0KHByaW9yaXR5Tm9kZSA9PT0gTUFYX05PREUkMiB8fCBwcmlvcml0eU5vZGUuaXNFbXB0eSgpLCAncHJpb3JpdHkgb2YgdW5leHBlY3RlZCB0eXBlLicpO1xuICAgIH1cbiAgICAvLyBEb24ndCBjYWxsIGdldFByaW9yaXR5KCkgb24gTUFYX05PREUgdG8gYXZvaWQgaGl0dGluZyBhc3NlcnRpb24uXG4gICAgYXNzZXJ0KHByaW9yaXR5Tm9kZSA9PT0gTUFYX05PREUkMiB8fCBwcmlvcml0eU5vZGUuZ2V0UHJpb3JpdHkoKS5pc0VtcHR5KCksIFwiUHJpb3JpdHkgbm9kZXMgY2FuJ3QgaGF2ZSBhIHByaW9yaXR5IG9mIHRoZWlyIG93bi5cIik7XG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xubGV0IF9fY2hpbGRyZW5Ob2RlQ29uc3RydWN0b3I7XG4vKipcbiAqIExlYWZOb2RlIGlzIGEgY2xhc3MgZm9yIHN0b3JpbmcgbGVhZiBub2RlcyBpbiBhIERhdGFTbmFwc2hvdC4gIEl0XG4gKiBpbXBsZW1lbnRzIE5vZGUgYW5kIHN0b3JlcyB0aGUgdmFsdWUgb2YgdGhlIG5vZGUgKGEgc3RyaW5nLFxuICogbnVtYmVyLCBvciBib29sZWFuKSBhY2Nlc3NpYmxlIHZpYSBnZXRWYWx1ZSgpLlxuICovXG5jbGFzcyBMZWFmTm9kZSB7XG4gICAgc3RhdGljIHNldCBfX2NoaWxkcmVuTm9kZUNvbnN0cnVjdG9yKHZhbCkge1xuICAgICAgICBfX2NoaWxkcmVuTm9kZUNvbnN0cnVjdG9yID0gdmFsO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IF9fY2hpbGRyZW5Ob2RlQ29uc3RydWN0b3IoKSB7XG4gICAgICAgIHJldHVybiBfX2NoaWxkcmVuTm9kZUNvbnN0cnVjdG9yO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gdmFsdWVfIC0gVGhlIHZhbHVlIHRvIHN0b3JlIGluIHRoaXMgbGVhZiBub2RlLiBUaGUgb2JqZWN0IHR5cGUgaXNcbiAgICAgKiBwb3NzaWJsZSBpbiB0aGUgZXZlbnQgb2YgYSBkZWZlcnJlZCB2YWx1ZVxuICAgICAqIEBwYXJhbSBwcmlvcml0eU5vZGVfIC0gVGhlIHByaW9yaXR5IG9mIHRoaXMgbm9kZS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih2YWx1ZV8sIHByaW9yaXR5Tm9kZV8gPSBMZWFmTm9kZS5fX2NoaWxkcmVuTm9kZUNvbnN0cnVjdG9yLkVNUFRZX05PREUpIHtcbiAgICAgICAgdGhpcy52YWx1ZV8gPSB2YWx1ZV87XG4gICAgICAgIHRoaXMucHJpb3JpdHlOb2RlXyA9IHByaW9yaXR5Tm9kZV87XG4gICAgICAgIHRoaXMubGF6eUhhc2hfID0gbnVsbDtcbiAgICAgICAgYXNzZXJ0KHRoaXMudmFsdWVfICE9PSB1bmRlZmluZWQgJiYgdGhpcy52YWx1ZV8gIT09IG51bGwsIFwiTGVhZk5vZGUgc2hvdWxkbid0IGJlIGNyZWF0ZWQgd2l0aCBudWxsL3VuZGVmaW5lZCB2YWx1ZS5cIik7XG4gICAgICAgIHZhbGlkYXRlUHJpb3JpdHlOb2RlKHRoaXMucHJpb3JpdHlOb2RlXyk7XG4gICAgfVxuICAgIC8qKiBAaW5oZXJpdERvYyAqL1xuICAgIGlzTGVhZk5vZGUoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvKiogQGluaGVyaXREb2MgKi9cbiAgICBnZXRQcmlvcml0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpb3JpdHlOb2RlXztcbiAgICB9XG4gICAgLyoqIEBpbmhlcml0RG9jICovXG4gICAgdXBkYXRlUHJpb3JpdHkobmV3UHJpb3JpdHlOb2RlKSB7XG4gICAgICAgIHJldHVybiBuZXcgTGVhZk5vZGUodGhpcy52YWx1ZV8sIG5ld1ByaW9yaXR5Tm9kZSk7XG4gICAgfVxuICAgIC8qKiBAaW5oZXJpdERvYyAqL1xuICAgIGdldEltbWVkaWF0ZUNoaWxkKGNoaWxkTmFtZSkge1xuICAgICAgICAvLyBIYWNrIHRvIHRyZWF0IHByaW9yaXR5IGFzIGEgcmVndWxhciBjaGlsZFxuICAgICAgICBpZiAoY2hpbGROYW1lID09PSAnLnByaW9yaXR5Jykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpb3JpdHlOb2RlXztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBMZWFmTm9kZS5fX2NoaWxkcmVuTm9kZUNvbnN0cnVjdG9yLkVNUFRZX05PREU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEBpbmhlcml0RG9jICovXG4gICAgZ2V0Q2hpbGQocGF0aCkge1xuICAgICAgICBpZiAocGF0aElzRW1wdHkocGF0aCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHBhdGhHZXRGcm9udChwYXRoKSA9PT0gJy5wcmlvcml0eScpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaW9yaXR5Tm9kZV87XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gTGVhZk5vZGUuX19jaGlsZHJlbk5vZGVDb25zdHJ1Y3Rvci5FTVBUWV9OT0RFO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhc0NoaWxkKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8qKiBAaW5oZXJpdERvYyAqL1xuICAgIGdldFByZWRlY2Vzc29yQ2hpbGROYW1lKGNoaWxkTmFtZSwgY2hpbGROb2RlKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvKiogQGluaGVyaXREb2MgKi9cbiAgICB1cGRhdGVJbW1lZGlhdGVDaGlsZChjaGlsZE5hbWUsIG5ld0NoaWxkTm9kZSkge1xuICAgICAgICBpZiAoY2hpbGROYW1lID09PSAnLnByaW9yaXR5Jykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlUHJpb3JpdHkobmV3Q2hpbGROb2RlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChuZXdDaGlsZE5vZGUuaXNFbXB0eSgpICYmIGNoaWxkTmFtZSAhPT0gJy5wcmlvcml0eScpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIExlYWZOb2RlLl9fY2hpbGRyZW5Ob2RlQ29uc3RydWN0b3IuRU1QVFlfTk9ERS51cGRhdGVJbW1lZGlhdGVDaGlsZChjaGlsZE5hbWUsIG5ld0NoaWxkTm9kZSkudXBkYXRlUHJpb3JpdHkodGhpcy5wcmlvcml0eU5vZGVfKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogQGluaGVyaXREb2MgKi9cbiAgICB1cGRhdGVDaGlsZChwYXRoLCBuZXdDaGlsZE5vZGUpIHtcbiAgICAgICAgY29uc3QgZnJvbnQgPSBwYXRoR2V0RnJvbnQocGF0aCk7XG4gICAgICAgIGlmIChmcm9udCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ld0NoaWxkTm9kZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChuZXdDaGlsZE5vZGUuaXNFbXB0eSgpICYmIGZyb250ICE9PSAnLnByaW9yaXR5Jykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhc3NlcnQoZnJvbnQgIT09ICcucHJpb3JpdHknIHx8IHBhdGhHZXRMZW5ndGgocGF0aCkgPT09IDEsICcucHJpb3JpdHkgbXVzdCBiZSB0aGUgbGFzdCB0b2tlbiBpbiBhIHBhdGgnKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZUltbWVkaWF0ZUNoaWxkKGZyb250LCBMZWFmTm9kZS5fX2NoaWxkcmVuTm9kZUNvbnN0cnVjdG9yLkVNUFRZX05PREUudXBkYXRlQ2hpbGQocGF0aFBvcEZyb250KHBhdGgpLCBuZXdDaGlsZE5vZGUpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogQGluaGVyaXREb2MgKi9cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8qKiBAaW5oZXJpdERvYyAqL1xuICAgIG51bUNoaWxkcmVuKCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgLyoqIEBpbmhlcml0RG9jICovXG4gICAgZm9yRWFjaENoaWxkKGluZGV4LCBhY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB2YWwoZXhwb3J0Rm9ybWF0KSB7XG4gICAgICAgIGlmIChleHBvcnRGb3JtYXQgJiYgIXRoaXMuZ2V0UHJpb3JpdHkoKS5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgJy52YWx1ZSc6IHRoaXMuZ2V0VmFsdWUoKSxcbiAgICAgICAgICAgICAgICAnLnByaW9yaXR5JzogdGhpcy5nZXRQcmlvcml0eSgpLnZhbCgpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmFsdWUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogQGluaGVyaXREb2MgKi9cbiAgICBoYXNoKCkge1xuICAgICAgICBpZiAodGhpcy5sYXp5SGFzaF8gPT09IG51bGwpIHtcbiAgICAgICAgICAgIGxldCB0b0hhc2ggPSAnJztcbiAgICAgICAgICAgIGlmICghdGhpcy5wcmlvcml0eU5vZGVfLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIHRvSGFzaCArPVxuICAgICAgICAgICAgICAgICAgICAncHJpb3JpdHk6JyArXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmlvcml0eUhhc2hUZXh0KHRoaXMucHJpb3JpdHlOb2RlXy52YWwoKSkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJzonO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHR5cGVvZiB0aGlzLnZhbHVlXztcbiAgICAgICAgICAgIHRvSGFzaCArPSB0eXBlICsgJzonO1xuICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgdG9IYXNoICs9IGRvdWJsZVRvSUVFRTc1NFN0cmluZyh0aGlzLnZhbHVlXyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0b0hhc2ggKz0gdGhpcy52YWx1ZV87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmxhenlIYXNoXyA9IHNoYTEodG9IYXNoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5sYXp5SGFzaF87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBsZWFmIG5vZGUuXG4gICAgICogQHJldHVybnMgVGhlIHZhbHVlIG9mIHRoZSBub2RlLlxuICAgICAqL1xuICAgIGdldFZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZV87XG4gICAgfVxuICAgIGNvbXBhcmVUbyhvdGhlcikge1xuICAgICAgICBpZiAob3RoZXIgPT09IExlYWZOb2RlLl9fY2hpbGRyZW5Ob2RlQ29uc3RydWN0b3IuRU1QVFlfTk9ERSkge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3RoZXIgaW5zdGFuY2VvZiBMZWFmTm9kZS5fX2NoaWxkcmVuTm9kZUNvbnN0cnVjdG9yKSB7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhc3NlcnQob3RoZXIuaXNMZWFmTm9kZSgpLCAnVW5rbm93biBub2RlIHR5cGUnKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBhcmVUb0xlYWZOb2RlXyhvdGhlcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tcGFyaXNvbiBzcGVjaWZpY2FsbHkgZm9yIHR3byBsZWFmIG5vZGVzXG4gICAgICovXG4gICAgY29tcGFyZVRvTGVhZk5vZGVfKG90aGVyTGVhZikge1xuICAgICAgICBjb25zdCBvdGhlckxlYWZUeXBlID0gdHlwZW9mIG90aGVyTGVhZi52YWx1ZV87XG4gICAgICAgIGNvbnN0IHRoaXNMZWFmVHlwZSA9IHR5cGVvZiB0aGlzLnZhbHVlXztcbiAgICAgICAgY29uc3Qgb3RoZXJJbmRleCA9IExlYWZOb2RlLlZBTFVFX1RZUEVfT1JERVIuaW5kZXhPZihvdGhlckxlYWZUeXBlKTtcbiAgICAgICAgY29uc3QgdGhpc0luZGV4ID0gTGVhZk5vZGUuVkFMVUVfVFlQRV9PUkRFUi5pbmRleE9mKHRoaXNMZWFmVHlwZSk7XG4gICAgICAgIGFzc2VydChvdGhlckluZGV4ID49IDAsICdVbmtub3duIGxlYWYgdHlwZTogJyArIG90aGVyTGVhZlR5cGUpO1xuICAgICAgICBhc3NlcnQodGhpc0luZGV4ID49IDAsICdVbmtub3duIGxlYWYgdHlwZTogJyArIHRoaXNMZWFmVHlwZSk7XG4gICAgICAgIGlmIChvdGhlckluZGV4ID09PSB0aGlzSW5kZXgpIHtcbiAgICAgICAgICAgIC8vIFNhbWUgdHlwZSwgY29tcGFyZSB2YWx1ZXNcbiAgICAgICAgICAgIGlmICh0aGlzTGVhZlR5cGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgLy8gRGVmZXJyZWQgdmFsdWUgbm9kZXMgYXJlIGFsbCBlcXVhbCwgYnV0IHdlIHNob3VsZCBhbHNvIG5ldmVyIGdldCB0byB0aGlzIHBvaW50Li4uXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBOb3RlIHRoYXQgdGhpcyB3b3JrcyBiZWNhdXNlIHRydWUgPiBmYWxzZSwgYWxsIG90aGVycyBhcmUgbnVtYmVyIG9yIHN0cmluZyBjb21wYXJpc29uc1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlXyA8IG90aGVyTGVhZi52YWx1ZV8pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLnZhbHVlXyA9PT0gb3RoZXJMZWFmLnZhbHVlXykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzSW5kZXggLSBvdGhlckluZGV4O1xuICAgICAgICB9XG4gICAgfVxuICAgIHdpdGhJbmRleCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGlzSW5kZXhlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGVxdWFscyhvdGhlcikge1xuICAgICAgICBpZiAob3RoZXIgPT09IHRoaXMpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG90aGVyLmlzTGVhZk5vZGUoKSkge1xuICAgICAgICAgICAgY29uc3Qgb3RoZXJMZWFmID0gb3RoZXI7XG4gICAgICAgICAgICByZXR1cm4gKHRoaXMudmFsdWVfID09PSBvdGhlckxlYWYudmFsdWVfICYmXG4gICAgICAgICAgICAgICAgdGhpcy5wcmlvcml0eU5vZGVfLmVxdWFscyhvdGhlckxlYWYucHJpb3JpdHlOb2RlXykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBUaGUgc29ydCBvcmRlciBmb3IgY29tcGFyaW5nIGxlYWYgbm9kZXMgb2YgZGlmZmVyZW50IHR5cGVzLiBJZiB0d28gbGVhZiBub2RlcyBoYXZlXG4gKiB0aGUgc2FtZSB0eXBlLCB0aGUgY29tcGFyaXNvbiBmYWxscyBiYWNrIHRvIHRoZWlyIHZhbHVlXG4gKi9cbkxlYWZOb2RlLlZBTFVFX1RZUEVfT1JERVIgPSBbJ29iamVjdCcsICdib29sZWFuJywgJ251bWJlcicsICdzdHJpbmcnXTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmxldCBub2RlRnJvbUpTT04kMTtcbmxldCBNQVhfTk9ERSQxO1xuZnVuY3Rpb24gc2V0Tm9kZUZyb21KU09OKHZhbCkge1xuICAgIG5vZGVGcm9tSlNPTiQxID0gdmFsO1xufVxuZnVuY3Rpb24gc2V0TWF4Tm9kZSh2YWwpIHtcbiAgICBNQVhfTk9ERSQxID0gdmFsO1xufVxuY2xhc3MgUHJpb3JpdHlJbmRleCBleHRlbmRzIEluZGV4IHtcbiAgICBjb21wYXJlKGEsIGIpIHtcbiAgICAgICAgY29uc3QgYVByaW9yaXR5ID0gYS5ub2RlLmdldFByaW9yaXR5KCk7XG4gICAgICAgIGNvbnN0IGJQcmlvcml0eSA9IGIubm9kZS5nZXRQcmlvcml0eSgpO1xuICAgICAgICBjb25zdCBpbmRleENtcCA9IGFQcmlvcml0eS5jb21wYXJlVG8oYlByaW9yaXR5KTtcbiAgICAgICAgaWYgKGluZGV4Q21wID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbmFtZUNvbXBhcmUoYS5uYW1lLCBiLm5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGluZGV4Q21wO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlzRGVmaW5lZE9uKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuICFub2RlLmdldFByaW9yaXR5KCkuaXNFbXB0eSgpO1xuICAgIH1cbiAgICBpbmRleGVkVmFsdWVDaGFuZ2VkKG9sZE5vZGUsIG5ld05vZGUpIHtcbiAgICAgICAgcmV0dXJuICFvbGROb2RlLmdldFByaW9yaXR5KCkuZXF1YWxzKG5ld05vZGUuZ2V0UHJpb3JpdHkoKSk7XG4gICAgfVxuICAgIG1pblBvc3QoKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiBOYW1lZE5vZGUuTUlOO1xuICAgIH1cbiAgICBtYXhQb3N0KCkge1xuICAgICAgICByZXR1cm4gbmV3IE5hbWVkTm9kZShNQVhfTkFNRSwgbmV3IExlYWZOb2RlKCdbUFJJT1JJVFktUE9TVF0nLCBNQVhfTk9ERSQxKSk7XG4gICAgfVxuICAgIG1ha2VQb3N0KGluZGV4VmFsdWUsIG5hbWUpIHtcbiAgICAgICAgY29uc3QgcHJpb3JpdHlOb2RlID0gbm9kZUZyb21KU09OJDEoaW5kZXhWYWx1ZSk7XG4gICAgICAgIHJldHVybiBuZXcgTmFtZWROb2RlKG5hbWUsIG5ldyBMZWFmTm9kZSgnW1BSSU9SSVRZLVBPU1RdJywgcHJpb3JpdHlOb2RlKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIFN0cmluZyByZXByZXNlbnRhdGlvbiBmb3IgaW5jbHVzaW9uIGluIGEgcXVlcnkgc3BlY1xuICAgICAqL1xuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gJy5wcmlvcml0eSc7XG4gICAgfVxufVxuY29uc3QgUFJJT1JJVFlfSU5ERVggPSBuZXcgUHJpb3JpdHlJbmRleCgpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgTE9HXzIgPSBNYXRoLmxvZygyKTtcbmNsYXNzIEJhc2UxMk51bSB7XG4gICAgY29uc3RydWN0b3IobGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGxvZ0Jhc2UyID0gKG51bSkgPT4gXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHBhcnNlSW50KChNYXRoLmxvZyhudW0pIC8gTE9HXzIpLCAxMCk7XG4gICAgICAgIGNvbnN0IGJpdE1hc2sgPSAoYml0cykgPT4gcGFyc2VJbnQoQXJyYXkoYml0cyArIDEpLmpvaW4oJzEnKSwgMik7XG4gICAgICAgIHRoaXMuY291bnQgPSBsb2dCYXNlMihsZW5ndGggKyAxKTtcbiAgICAgICAgdGhpcy5jdXJyZW50XyA9IHRoaXMuY291bnQgLSAxO1xuICAgICAgICBjb25zdCBtYXNrID0gYml0TWFzayh0aGlzLmNvdW50KTtcbiAgICAgICAgdGhpcy5iaXRzXyA9IChsZW5ndGggKyAxKSAmIG1hc2s7XG4gICAgfVxuICAgIG5leHRCaXRJc09uZSgpIHtcbiAgICAgICAgLy9ub2luc3BlY3Rpb24gSlNCaXR3aXNlT3BlcmF0b3JVc2FnZVxuICAgICAgICBjb25zdCByZXN1bHQgPSAhKHRoaXMuYml0c18gJiAoMHgxIDw8IHRoaXMuY3VycmVudF8pKTtcbiAgICAgICAgdGhpcy5jdXJyZW50Xy0tO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbn1cbi8qKlxuICogVGFrZXMgYSBsaXN0IG9mIGNoaWxkIG5vZGVzIGFuZCBjb25zdHJ1Y3RzIGEgU29ydGVkU2V0IHVzaW5nIHRoZSBnaXZlbiBjb21wYXJpc29uXG4gKiBmdW5jdGlvblxuICpcbiAqIFVzZXMgdGhlIGFsZ29yaXRobSBkZXNjcmliZWQgaW4gdGhlIHBhcGVyIGxpbmtlZCBoZXJlOlxuICogaHR0cDovL2NpdGVzZWVyeC5pc3QucHN1LmVkdS92aWV3ZG9jL3N1bW1hcnk/ZG9pPTEwLjEuMS40Ni4xNDU4XG4gKlxuICogQHBhcmFtIGNoaWxkTGlzdCAtIFVuc29ydGVkIGxpc3Qgb2YgY2hpbGRyZW5cbiAqIEBwYXJhbSBjbXAgLSBUaGUgY29tcGFyaXNvbiBtZXRob2QgdG8gYmUgdXNlZFxuICogQHBhcmFtIGtleUZuIC0gQW4gb3B0aW9uYWwgZnVuY3Rpb24gdG8gZXh0cmFjdCBLIGZyb20gYSBub2RlIHdyYXBwZXIsIGlmIEsnc1xuICogdHlwZSBpcyBub3QgTmFtZWROb2RlXG4gKiBAcGFyYW0gbWFwU29ydEZuIC0gQW4gb3B0aW9uYWwgb3ZlcnJpZGUgZm9yIGNvbXBhcmF0b3IgdXNlZCBieSB0aGUgZ2VuZXJhdGVkIHNvcnRlZCBtYXBcbiAqL1xuY29uc3QgYnVpbGRDaGlsZFNldCA9IGZ1bmN0aW9uIChjaGlsZExpc3QsIGNtcCwga2V5Rm4sIG1hcFNvcnRGbikge1xuICAgIGNoaWxkTGlzdC5zb3J0KGNtcCk7XG4gICAgY29uc3QgYnVpbGRCYWxhbmNlZFRyZWUgPSBmdW5jdGlvbiAobG93LCBoaWdoKSB7XG4gICAgICAgIGNvbnN0IGxlbmd0aCA9IGhpZ2ggLSBsb3c7XG4gICAgICAgIGxldCBuYW1lZE5vZGU7XG4gICAgICAgIGxldCBrZXk7XG4gICAgICAgIGlmIChsZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgbmFtZWROb2RlID0gY2hpbGRMaXN0W2xvd107XG4gICAgICAgICAgICBrZXkgPSBrZXlGbiA/IGtleUZuKG5hbWVkTm9kZSkgOiBuYW1lZE5vZGU7XG4gICAgICAgICAgICByZXR1cm4gbmV3IExMUkJOb2RlKGtleSwgbmFtZWROb2RlLm5vZGUsIExMUkJOb2RlLkJMQUNLLCBudWxsLCBudWxsKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICBjb25zdCBtaWRkbGUgPSBwYXJzZUludCgobGVuZ3RoIC8gMiksIDEwKSArIGxvdztcbiAgICAgICAgICAgIGNvbnN0IGxlZnQgPSBidWlsZEJhbGFuY2VkVHJlZShsb3csIG1pZGRsZSk7XG4gICAgICAgICAgICBjb25zdCByaWdodCA9IGJ1aWxkQmFsYW5jZWRUcmVlKG1pZGRsZSArIDEsIGhpZ2gpO1xuICAgICAgICAgICAgbmFtZWROb2RlID0gY2hpbGRMaXN0W21pZGRsZV07XG4gICAgICAgICAgICBrZXkgPSBrZXlGbiA/IGtleUZuKG5hbWVkTm9kZSkgOiBuYW1lZE5vZGU7XG4gICAgICAgICAgICByZXR1cm4gbmV3IExMUkJOb2RlKGtleSwgbmFtZWROb2RlLm5vZGUsIExMUkJOb2RlLkJMQUNLLCBsZWZ0LCByaWdodCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGJ1aWxkRnJvbTEyQXJyYXkgPSBmdW5jdGlvbiAoYmFzZTEyKSB7XG4gICAgICAgIGxldCBub2RlID0gbnVsbDtcbiAgICAgICAgbGV0IHJvb3QgPSBudWxsO1xuICAgICAgICBsZXQgaW5kZXggPSBjaGlsZExpc3QubGVuZ3RoO1xuICAgICAgICBjb25zdCBidWlsZFBlbm5hbnQgPSBmdW5jdGlvbiAoY2h1bmtTaXplLCBjb2xvcikge1xuICAgICAgICAgICAgY29uc3QgbG93ID0gaW5kZXggLSBjaHVua1NpemU7XG4gICAgICAgICAgICBjb25zdCBoaWdoID0gaW5kZXg7XG4gICAgICAgICAgICBpbmRleCAtPSBjaHVua1NpemU7XG4gICAgICAgICAgICBjb25zdCBjaGlsZFRyZWUgPSBidWlsZEJhbGFuY2VkVHJlZShsb3cgKyAxLCBoaWdoKTtcbiAgICAgICAgICAgIGNvbnN0IG5hbWVkTm9kZSA9IGNoaWxkTGlzdFtsb3ddO1xuICAgICAgICAgICAgY29uc3Qga2V5ID0ga2V5Rm4gPyBrZXlGbihuYW1lZE5vZGUpIDogbmFtZWROb2RlO1xuICAgICAgICAgICAgYXR0YWNoUGVubmFudChuZXcgTExSQk5vZGUoa2V5LCBuYW1lZE5vZGUubm9kZSwgY29sb3IsIG51bGwsIGNoaWxkVHJlZSkpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBhdHRhY2hQZW5uYW50ID0gZnVuY3Rpb24gKHBlbm5hbnQpIHtcbiAgICAgICAgICAgIGlmIChub2RlKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5sZWZ0ID0gcGVubmFudDtcbiAgICAgICAgICAgICAgICBub2RlID0gcGVubmFudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJvb3QgPSBwZW5uYW50O1xuICAgICAgICAgICAgICAgIG5vZGUgPSBwZW5uYW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJhc2UxMi5jb3VudDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBpc09uZSA9IGJhc2UxMi5uZXh0Qml0SXNPbmUoKTtcbiAgICAgICAgICAgIC8vIFRoZSBudW1iZXIgb2Ygbm9kZXMgdGFrZW4gaW4gZWFjaCBzbGljZSBpcyAyXihhcnIubGVuZ3RoIC0gKGkgKyAxKSlcbiAgICAgICAgICAgIGNvbnN0IGNodW5rU2l6ZSA9IE1hdGgucG93KDIsIGJhc2UxMi5jb3VudCAtIChpICsgMSkpO1xuICAgICAgICAgICAgaWYgKGlzT25lKSB7XG4gICAgICAgICAgICAgICAgYnVpbGRQZW5uYW50KGNodW5rU2l6ZSwgTExSQk5vZGUuQkxBQ0spO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gY3VycmVudCA9PSAyXG4gICAgICAgICAgICAgICAgYnVpbGRQZW5uYW50KGNodW5rU2l6ZSwgTExSQk5vZGUuQkxBQ0spO1xuICAgICAgICAgICAgICAgIGJ1aWxkUGVubmFudChjaHVua1NpemUsIExMUkJOb2RlLlJFRCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJvb3Q7XG4gICAgfTtcbiAgICBjb25zdCBiYXNlMTIgPSBuZXcgQmFzZTEyTnVtKGNoaWxkTGlzdC5sZW5ndGgpO1xuICAgIGNvbnN0IHJvb3QgPSBidWlsZEZyb20xMkFycmF5KGJhc2UxMik7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICByZXR1cm4gbmV3IFNvcnRlZE1hcChtYXBTb3J0Rm4gfHwgY21wLCByb290KTtcbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5sZXQgX2RlZmF1bHRJbmRleE1hcDtcbmNvbnN0IGZhbGxiYWNrT2JqZWN0ID0ge307XG5jbGFzcyBJbmRleE1hcCB7XG4gICAgLyoqXG4gICAgICogVGhlIGRlZmF1bHQgSW5kZXhNYXAgZm9yIG5vZGVzIHdpdGhvdXQgYSBwcmlvcml0eVxuICAgICAqL1xuICAgIHN0YXRpYyBnZXQgRGVmYXVsdCgpIHtcbiAgICAgICAgYXNzZXJ0KGZhbGxiYWNrT2JqZWN0ICYmIFBSSU9SSVRZX0lOREVYLCAnQ2hpbGRyZW5Ob2RlLnRzIGhhcyBub3QgYmVlbiBsb2FkZWQnKTtcbiAgICAgICAgX2RlZmF1bHRJbmRleE1hcCA9XG4gICAgICAgICAgICBfZGVmYXVsdEluZGV4TWFwIHx8XG4gICAgICAgICAgICAgICAgbmV3IEluZGV4TWFwKHsgJy5wcmlvcml0eSc6IGZhbGxiYWNrT2JqZWN0IH0sIHsgJy5wcmlvcml0eSc6IFBSSU9SSVRZX0lOREVYIH0pO1xuICAgICAgICByZXR1cm4gX2RlZmF1bHRJbmRleE1hcDtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoaW5kZXhlc18sIGluZGV4U2V0Xykge1xuICAgICAgICB0aGlzLmluZGV4ZXNfID0gaW5kZXhlc187XG4gICAgICAgIHRoaXMuaW5kZXhTZXRfID0gaW5kZXhTZXRfO1xuICAgIH1cbiAgICBnZXQoaW5kZXhLZXkpIHtcbiAgICAgICAgY29uc3Qgc29ydGVkTWFwID0gc2FmZUdldCh0aGlzLmluZGV4ZXNfLCBpbmRleEtleSk7XG4gICAgICAgIGlmICghc29ydGVkTWFwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGluZGV4IGRlZmluZWQgZm9yICcgKyBpbmRleEtleSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNvcnRlZE1hcCBpbnN0YW5jZW9mIFNvcnRlZE1hcCkge1xuICAgICAgICAgICAgcmV0dXJuIHNvcnRlZE1hcDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIFRoZSBpbmRleCBleGlzdHMsIGJ1dCBpdCBmYWxscyBiYWNrIHRvIGp1c3QgbmFtZSBjb21wYXJpc29uLiBSZXR1cm4gbnVsbCBzbyB0aGF0IHRoZSBjYWxsaW5nIGNvZGUgdXNlcyB0aGVcbiAgICAgICAgICAgIC8vIHJlZ3VsYXIgY2hpbGQgbWFwXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYXNJbmRleChpbmRleERlZmluaXRpb24pIHtcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5zKHRoaXMuaW5kZXhTZXRfLCBpbmRleERlZmluaXRpb24udG9TdHJpbmcoKSk7XG4gICAgfVxuICAgIGFkZEluZGV4KGluZGV4RGVmaW5pdGlvbiwgZXhpc3RpbmdDaGlsZHJlbikge1xuICAgICAgICBhc3NlcnQoaW5kZXhEZWZpbml0aW9uICE9PSBLRVlfSU5ERVgsIFwiS2V5SW5kZXggYWx3YXlzIGV4aXN0cyBhbmQgaXNuJ3QgbWVhbnQgdG8gYmUgYWRkZWQgdG8gdGhlIEluZGV4TWFwLlwiKTtcbiAgICAgICAgY29uc3QgY2hpbGRMaXN0ID0gW107XG4gICAgICAgIGxldCBzYXdJbmRleGVkVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgaXRlciA9IGV4aXN0aW5nQ2hpbGRyZW4uZ2V0SXRlcmF0b3IoTmFtZWROb2RlLldyYXApO1xuICAgICAgICBsZXQgbmV4dCA9IGl0ZXIuZ2V0TmV4dCgpO1xuICAgICAgICB3aGlsZSAobmV4dCkge1xuICAgICAgICAgICAgc2F3SW5kZXhlZFZhbHVlID1cbiAgICAgICAgICAgICAgICBzYXdJbmRleGVkVmFsdWUgfHwgaW5kZXhEZWZpbml0aW9uLmlzRGVmaW5lZE9uKG5leHQubm9kZSk7XG4gICAgICAgICAgICBjaGlsZExpc3QucHVzaChuZXh0KTtcbiAgICAgICAgICAgIG5leHQgPSBpdGVyLmdldE5leHQoKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbmV3SW5kZXg7XG4gICAgICAgIGlmIChzYXdJbmRleGVkVmFsdWUpIHtcbiAgICAgICAgICAgIG5ld0luZGV4ID0gYnVpbGRDaGlsZFNldChjaGlsZExpc3QsIGluZGV4RGVmaW5pdGlvbi5nZXRDb21wYXJlKCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbmV3SW5kZXggPSBmYWxsYmFja09iamVjdDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbmRleE5hbWUgPSBpbmRleERlZmluaXRpb24udG9TdHJpbmcoKTtcbiAgICAgICAgY29uc3QgbmV3SW5kZXhTZXQgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmluZGV4U2V0Xyk7XG4gICAgICAgIG5ld0luZGV4U2V0W2luZGV4TmFtZV0gPSBpbmRleERlZmluaXRpb247XG4gICAgICAgIGNvbnN0IG5ld0luZGV4ZXMgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmluZGV4ZXNfKTtcbiAgICAgICAgbmV3SW5kZXhlc1tpbmRleE5hbWVdID0gbmV3SW5kZXg7XG4gICAgICAgIHJldHVybiBuZXcgSW5kZXhNYXAobmV3SW5kZXhlcywgbmV3SW5kZXhTZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbnN1cmUgdGhhdCB0aGlzIG5vZGUgaXMgcHJvcGVybHkgdHJhY2tlZCBpbiBhbnkgaW5kZXhlcyB0aGF0IHdlJ3JlIG1haW50YWluaW5nXG4gICAgICovXG4gICAgYWRkVG9JbmRleGVzKG5hbWVkTm9kZSwgZXhpc3RpbmdDaGlsZHJlbikge1xuICAgICAgICBjb25zdCBuZXdJbmRleGVzID0gbWFwKHRoaXMuaW5kZXhlc18sIChpbmRleGVkQ2hpbGRyZW4sIGluZGV4TmFtZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBzYWZlR2V0KHRoaXMuaW5kZXhTZXRfLCBpbmRleE5hbWUpO1xuICAgICAgICAgICAgYXNzZXJ0KGluZGV4LCAnTWlzc2luZyBpbmRleCBpbXBsZW1lbnRhdGlvbiBmb3IgJyArIGluZGV4TmFtZSk7XG4gICAgICAgICAgICBpZiAoaW5kZXhlZENoaWxkcmVuID09PSBmYWxsYmFja09iamVjdCkge1xuICAgICAgICAgICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiB3ZSBuZWVkIHRvIGluZGV4IGV2ZXJ5dGhpbmdcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXguaXNEZWZpbmVkT24obmFtZWROb2RlLm5vZGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gYnVpbGQgdGhpcyBpbmRleFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGlsZExpc3QgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlciA9IGV4aXN0aW5nQ2hpbGRyZW4uZ2V0SXRlcmF0b3IoTmFtZWROb2RlLldyYXApO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbmV4dCA9IGl0ZXIuZ2V0TmV4dCgpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAobmV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQubmFtZSAhPT0gbmFtZWROb2RlLm5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZExpc3QucHVzaChuZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQgPSBpdGVyLmdldE5leHQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjaGlsZExpc3QucHVzaChuYW1lZE5vZGUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYnVpbGRDaGlsZFNldChjaGlsZExpc3QsIGluZGV4LmdldENvbXBhcmUoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBObyBjaGFuZ2UsIHRoaXMgcmVtYWlucyBhIGZhbGxiYWNrXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxsYmFja09iamVjdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ1NuYXAgPSBleGlzdGluZ0NoaWxkcmVuLmdldChuYW1lZE5vZGUubmFtZSk7XG4gICAgICAgICAgICAgICAgbGV0IG5ld0NoaWxkcmVuID0gaW5kZXhlZENoaWxkcmVuO1xuICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ1NuYXApIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3Q2hpbGRyZW4gPSBuZXdDaGlsZHJlbi5yZW1vdmUobmV3IE5hbWVkTm9kZShuYW1lZE5vZGUubmFtZSwgZXhpc3RpbmdTbmFwKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXdDaGlsZHJlbi5pbnNlcnQobmFtZWROb2RlLCBuYW1lZE5vZGUubm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbmV3IEluZGV4TWFwKG5ld0luZGV4ZXMsIHRoaXMuaW5kZXhTZXRfKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IEluZGV4TWFwIGluc3RhbmNlIHdpdGggdGhlIGdpdmVuIHZhbHVlIHJlbW92ZWRcbiAgICAgKi9cbiAgICByZW1vdmVGcm9tSW5kZXhlcyhuYW1lZE5vZGUsIGV4aXN0aW5nQ2hpbGRyZW4pIHtcbiAgICAgICAgY29uc3QgbmV3SW5kZXhlcyA9IG1hcCh0aGlzLmluZGV4ZXNfLCAoaW5kZXhlZENoaWxkcmVuKSA9PiB7XG4gICAgICAgICAgICBpZiAoaW5kZXhlZENoaWxkcmVuID09PSBmYWxsYmFja09iamVjdCkge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGZhbGxiYWNrLiBKdXN0IHJldHVybiBpdCwgbm90aGluZyB0byBkbyBpbiB0aGlzIGNhc2VcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5kZXhlZENoaWxkcmVuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdTbmFwID0gZXhpc3RpbmdDaGlsZHJlbi5nZXQobmFtZWROb2RlLm5hbWUpO1xuICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ1NuYXApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4ZWRDaGlsZHJlbi5yZW1vdmUobmV3IE5hbWVkTm9kZShuYW1lZE5vZGUubmFtZSwgZXhpc3RpbmdTbmFwKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBObyByZWNvcmQgb2YgdGhpcyBjaGlsZFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5kZXhlZENoaWxkcmVuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBuZXcgSW5kZXhNYXAobmV3SW5kZXhlcywgdGhpcy5pbmRleFNldF8pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIFRPRE86IEZvciBtZW1vcnkgc2F2aW5ncywgZG9uJ3Qgc3RvcmUgcHJpb3JpdHlOb2RlXyBpZiBpdCdzIGVtcHR5LlxubGV0IEVNUFRZX05PREU7XG4vKipcbiAqIENoaWxkcmVuTm9kZSBpcyBhIGNsYXNzIGZvciBzdG9yaW5nIGludGVybmFsIG5vZGVzIGluIGEgRGF0YVNuYXBzaG90XG4gKiAoaS5lLiBub2RlcyB3aXRoIGNoaWxkcmVuKS4gIEl0IGltcGxlbWVudHMgTm9kZSBhbmQgc3RvcmVzIHRoZVxuICogbGlzdCBvZiBjaGlsZHJlbiBpbiB0aGUgY2hpbGRyZW4gcHJvcGVydHksIHNvcnRlZCBieSBjaGlsZCBuYW1lLlxuICovXG5jbGFzcyBDaGlsZHJlbk5vZGUge1xuICAgIHN0YXRpYyBnZXQgRU1QVFlfTk9ERSgpIHtcbiAgICAgICAgcmV0dXJuIChFTVBUWV9OT0RFIHx8XG4gICAgICAgICAgICAoRU1QVFlfTk9ERSA9IG5ldyBDaGlsZHJlbk5vZGUobmV3IFNvcnRlZE1hcChOQU1FX0NPTVBBUkFUT1IpLCBudWxsLCBJbmRleE1hcC5EZWZhdWx0KSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gY2hpbGRyZW5fIC0gTGlzdCBvZiBjaGlsZHJlbiBvZiB0aGlzIG5vZGUuLlxuICAgICAqIEBwYXJhbSBwcmlvcml0eU5vZGVfIC0gVGhlIHByaW9yaXR5IG9mIHRoaXMgbm9kZSAoYXMgYSBzbmFwc2hvdCBub2RlKS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihjaGlsZHJlbl8sIHByaW9yaXR5Tm9kZV8sIGluZGV4TWFwXykge1xuICAgICAgICB0aGlzLmNoaWxkcmVuXyA9IGNoaWxkcmVuXztcbiAgICAgICAgdGhpcy5wcmlvcml0eU5vZGVfID0gcHJpb3JpdHlOb2RlXztcbiAgICAgICAgdGhpcy5pbmRleE1hcF8gPSBpbmRleE1hcF87XG4gICAgICAgIHRoaXMubGF6eUhhc2hfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE5vdGU6IFRoZSBvbmx5IHJlYXNvbiB3ZSBhbGxvdyBudWxsIHByaW9yaXR5IGlzIGZvciBFTVBUWV9OT0RFLCBzaW5jZSB3ZSBjYW4ndCB1c2VcbiAgICAgICAgICogRU1QVFlfTk9ERSBhcyB0aGUgcHJpb3JpdHkgb2YgRU1QVFlfTk9ERS4gIFdlIG1pZ2h0IHdhbnQgdG8gY29uc2lkZXIgbWFraW5nIEVNUFRZX05PREUgaXRzIG93blxuICAgICAgICAgKiBjbGFzcyBpbnN0ZWFkIG9mIGFuIGVtcHR5IENoaWxkcmVuTm9kZS5cbiAgICAgICAgICovXG4gICAgICAgIGlmICh0aGlzLnByaW9yaXR5Tm9kZV8pIHtcbiAgICAgICAgICAgIHZhbGlkYXRlUHJpb3JpdHlOb2RlKHRoaXMucHJpb3JpdHlOb2RlXyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY2hpbGRyZW5fLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgYXNzZXJ0KCF0aGlzLnByaW9yaXR5Tm9kZV8gfHwgdGhpcy5wcmlvcml0eU5vZGVfLmlzRW1wdHkoKSwgJ0FuIGVtcHR5IG5vZGUgY2Fubm90IGhhdmUgYSBwcmlvcml0eScpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBAaW5oZXJpdERvYyAqL1xuICAgIGlzTGVhZk5vZGUoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLyoqIEBpbmhlcml0RG9jICovXG4gICAgZ2V0UHJpb3JpdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaW9yaXR5Tm9kZV8gfHwgRU1QVFlfTk9ERTtcbiAgICB9XG4gICAgLyoqIEBpbmhlcml0RG9jICovXG4gICAgdXBkYXRlUHJpb3JpdHkobmV3UHJpb3JpdHlOb2RlKSB7XG4gICAgICAgIGlmICh0aGlzLmNoaWxkcmVuXy5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIC8vIERvbid0IGFsbG93IHByaW9yaXRpZXMgb24gZW1wdHkgbm9kZXNcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDaGlsZHJlbk5vZGUodGhpcy5jaGlsZHJlbl8sIG5ld1ByaW9yaXR5Tm9kZSwgdGhpcy5pbmRleE1hcF8pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBAaW5oZXJpdERvYyAqL1xuICAgIGdldEltbWVkaWF0ZUNoaWxkKGNoaWxkTmFtZSkge1xuICAgICAgICAvLyBIYWNrIHRvIHRyZWF0IHByaW9yaXR5IGFzIGEgcmVndWxhciBjaGlsZFxuICAgICAgICBpZiAoY2hpbGROYW1lID09PSAnLnByaW9yaXR5Jykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UHJpb3JpdHkoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkID0gdGhpcy5jaGlsZHJlbl8uZ2V0KGNoaWxkTmFtZSk7XG4gICAgICAgICAgICByZXR1cm4gY2hpbGQgPT09IG51bGwgPyBFTVBUWV9OT0RFIDogY2hpbGQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEBpbmhlcml0RG9jICovXG4gICAgZ2V0Q2hpbGQocGF0aCkge1xuICAgICAgICBjb25zdCBmcm9udCA9IHBhdGhHZXRGcm9udChwYXRoKTtcbiAgICAgICAgaWYgKGZyb250ID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5nZXRJbW1lZGlhdGVDaGlsZChmcm9udCkuZ2V0Q2hpbGQocGF0aFBvcEZyb250KHBhdGgpKTtcbiAgICB9XG4gICAgLyoqIEBpbmhlcml0RG9jICovXG4gICAgaGFzQ2hpbGQoY2hpbGROYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuXy5nZXQoY2hpbGROYW1lKSAhPT0gbnVsbDtcbiAgICB9XG4gICAgLyoqIEBpbmhlcml0RG9jICovXG4gICAgdXBkYXRlSW1tZWRpYXRlQ2hpbGQoY2hpbGROYW1lLCBuZXdDaGlsZE5vZGUpIHtcbiAgICAgICAgYXNzZXJ0KG5ld0NoaWxkTm9kZSwgJ1dlIHNob3VsZCBhbHdheXMgYmUgcGFzc2luZyBzbmFwc2hvdCBub2RlcycpO1xuICAgICAgICBpZiAoY2hpbGROYW1lID09PSAnLnByaW9yaXR5Jykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlUHJpb3JpdHkobmV3Q2hpbGROb2RlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IG5hbWVkTm9kZSA9IG5ldyBOYW1lZE5vZGUoY2hpbGROYW1lLCBuZXdDaGlsZE5vZGUpO1xuICAgICAgICAgICAgbGV0IG5ld0NoaWxkcmVuLCBuZXdJbmRleE1hcDtcbiAgICAgICAgICAgIGlmIChuZXdDaGlsZE5vZGUuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgbmV3Q2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuXy5yZW1vdmUoY2hpbGROYW1lKTtcbiAgICAgICAgICAgICAgICBuZXdJbmRleE1hcCA9IHRoaXMuaW5kZXhNYXBfLnJlbW92ZUZyb21JbmRleGVzKG5hbWVkTm9kZSwgdGhpcy5jaGlsZHJlbl8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3Q2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuXy5pbnNlcnQoY2hpbGROYW1lLCBuZXdDaGlsZE5vZGUpO1xuICAgICAgICAgICAgICAgIG5ld0luZGV4TWFwID0gdGhpcy5pbmRleE1hcF8uYWRkVG9JbmRleGVzKG5hbWVkTm9kZSwgdGhpcy5jaGlsZHJlbl8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbmV3UHJpb3JpdHkgPSBuZXdDaGlsZHJlbi5pc0VtcHR5KClcbiAgICAgICAgICAgICAgICA/IEVNUFRZX05PREVcbiAgICAgICAgICAgICAgICA6IHRoaXMucHJpb3JpdHlOb2RlXztcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2hpbGRyZW5Ob2RlKG5ld0NoaWxkcmVuLCBuZXdQcmlvcml0eSwgbmV3SW5kZXhNYXApO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBAaW5oZXJpdERvYyAqL1xuICAgIHVwZGF0ZUNoaWxkKHBhdGgsIG5ld0NoaWxkTm9kZSkge1xuICAgICAgICBjb25zdCBmcm9udCA9IHBhdGhHZXRGcm9udChwYXRoKTtcbiAgICAgICAgaWYgKGZyb250ID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3Q2hpbGROb2RlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXNzZXJ0KHBhdGhHZXRGcm9udChwYXRoKSAhPT0gJy5wcmlvcml0eScgfHwgcGF0aEdldExlbmd0aChwYXRoKSA9PT0gMSwgJy5wcmlvcml0eSBtdXN0IGJlIHRoZSBsYXN0IHRva2VuIGluIGEgcGF0aCcpO1xuICAgICAgICAgICAgY29uc3QgbmV3SW1tZWRpYXRlQ2hpbGQgPSB0aGlzLmdldEltbWVkaWF0ZUNoaWxkKGZyb250KS51cGRhdGVDaGlsZChwYXRoUG9wRnJvbnQocGF0aCksIG5ld0NoaWxkTm9kZSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVJbW1lZGlhdGVDaGlsZChmcm9udCwgbmV3SW1tZWRpYXRlQ2hpbGQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBAaW5oZXJpdERvYyAqL1xuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuXy5pc0VtcHR5KCk7XG4gICAgfVxuICAgIC8qKiBAaW5oZXJpdERvYyAqL1xuICAgIG51bUNoaWxkcmVuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGlsZHJlbl8uY291bnQoKTtcbiAgICB9XG4gICAgLyoqIEBpbmhlcml0RG9jICovXG4gICAgdmFsKGV4cG9ydEZvcm1hdCkge1xuICAgICAgICBpZiAodGhpcy5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBsZXQgbnVtS2V5cyA9IDAsIG1heEtleSA9IDAsIGFsbEludGVnZXJLZXlzID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5mb3JFYWNoQ2hpbGQoUFJJT1JJVFlfSU5ERVgsIChrZXksIGNoaWxkTm9kZSkgPT4ge1xuICAgICAgICAgICAgb2JqW2tleV0gPSBjaGlsZE5vZGUudmFsKGV4cG9ydEZvcm1hdCk7XG4gICAgICAgICAgICBudW1LZXlzKys7XG4gICAgICAgICAgICBpZiAoYWxsSW50ZWdlcktleXMgJiYgQ2hpbGRyZW5Ob2RlLklOVEVHRVJfUkVHRVhQXy50ZXN0KGtleSkpIHtcbiAgICAgICAgICAgICAgICBtYXhLZXkgPSBNYXRoLm1heChtYXhLZXksIE51bWJlcihrZXkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGFsbEludGVnZXJLZXlzID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIWV4cG9ydEZvcm1hdCAmJiBhbGxJbnRlZ2VyS2V5cyAmJiBtYXhLZXkgPCAyICogbnVtS2V5cykge1xuICAgICAgICAgICAgLy8gY29udmVydCB0byBhcnJheS5cbiAgICAgICAgICAgIGNvbnN0IGFycmF5ID0gW107XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZ3VhcmQtZm9yLWluXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcbiAgICAgICAgICAgICAgICBhcnJheVtrZXldID0gb2JqW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYXJyYXk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoZXhwb3J0Rm9ybWF0ICYmICF0aGlzLmdldFByaW9yaXR5KCkuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgb2JqWycucHJpb3JpdHknXSA9IHRoaXMuZ2V0UHJpb3JpdHkoKS52YWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEBpbmhlcml0RG9jICovXG4gICAgaGFzaCgpIHtcbiAgICAgICAgaWYgKHRoaXMubGF6eUhhc2hfID09PSBudWxsKSB7XG4gICAgICAgICAgICBsZXQgdG9IYXNoID0gJyc7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZ2V0UHJpb3JpdHkoKS5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICB0b0hhc2ggKz1cbiAgICAgICAgICAgICAgICAgICAgJ3ByaW9yaXR5OicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJpb3JpdHlIYXNoVGV4dCh0aGlzLmdldFByaW9yaXR5KCkudmFsKCkpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICc6JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZm9yRWFjaENoaWxkKFBSSU9SSVRZX0lOREVYLCAoa2V5LCBjaGlsZE5vZGUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZEhhc2ggPSBjaGlsZE5vZGUuaGFzaCgpO1xuICAgICAgICAgICAgICAgIGlmIChjaGlsZEhhc2ggIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvSGFzaCArPSAnOicgKyBrZXkgKyAnOicgKyBjaGlsZEhhc2g7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmxhenlIYXNoXyA9IHRvSGFzaCA9PT0gJycgPyAnJyA6IHNoYTEodG9IYXNoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5sYXp5SGFzaF87XG4gICAgfVxuICAgIC8qKiBAaW5oZXJpdERvYyAqL1xuICAgIGdldFByZWRlY2Vzc29yQ2hpbGROYW1lKGNoaWxkTmFtZSwgY2hpbGROb2RlLCBpbmRleCkge1xuICAgICAgICBjb25zdCBpZHggPSB0aGlzLnJlc29sdmVJbmRleF8oaW5kZXgpO1xuICAgICAgICBpZiAoaWR4KSB7XG4gICAgICAgICAgICBjb25zdCBwcmVkZWNlc3NvciA9IGlkeC5nZXRQcmVkZWNlc3NvcktleShuZXcgTmFtZWROb2RlKGNoaWxkTmFtZSwgY2hpbGROb2RlKSk7XG4gICAgICAgICAgICByZXR1cm4gcHJlZGVjZXNzb3IgPyBwcmVkZWNlc3Nvci5uYW1lIDogbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuXy5nZXRQcmVkZWNlc3NvcktleShjaGlsZE5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldEZpcnN0Q2hpbGROYW1lKGluZGV4RGVmaW5pdGlvbikge1xuICAgICAgICBjb25zdCBpZHggPSB0aGlzLnJlc29sdmVJbmRleF8oaW5kZXhEZWZpbml0aW9uKTtcbiAgICAgICAgaWYgKGlkeCkge1xuICAgICAgICAgICAgY29uc3QgbWluS2V5ID0gaWR4Lm1pbktleSgpO1xuICAgICAgICAgICAgcmV0dXJuIG1pbktleSAmJiBtaW5LZXkubmFtZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuXy5taW5LZXkoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRGaXJzdENoaWxkKGluZGV4RGVmaW5pdGlvbikge1xuICAgICAgICBjb25zdCBtaW5LZXkgPSB0aGlzLmdldEZpcnN0Q2hpbGROYW1lKGluZGV4RGVmaW5pdGlvbik7XG4gICAgICAgIGlmIChtaW5LZXkpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTmFtZWROb2RlKG1pbktleSwgdGhpcy5jaGlsZHJlbl8uZ2V0KG1pbktleSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogR2l2ZW4gYW4gaW5kZXgsIHJldHVybiB0aGUga2V5IG5hbWUgb2YgdGhlIGxhcmdlc3QgdmFsdWUgd2UgaGF2ZSwgYWNjb3JkaW5nIHRvIHRoYXQgaW5kZXhcbiAgICAgKi9cbiAgICBnZXRMYXN0Q2hpbGROYW1lKGluZGV4RGVmaW5pdGlvbikge1xuICAgICAgICBjb25zdCBpZHggPSB0aGlzLnJlc29sdmVJbmRleF8oaW5kZXhEZWZpbml0aW9uKTtcbiAgICAgICAgaWYgKGlkeCkge1xuICAgICAgICAgICAgY29uc3QgbWF4S2V5ID0gaWR4Lm1heEtleSgpO1xuICAgICAgICAgICAgcmV0dXJuIG1heEtleSAmJiBtYXhLZXkubmFtZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuXy5tYXhLZXkoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRMYXN0Q2hpbGQoaW5kZXhEZWZpbml0aW9uKSB7XG4gICAgICAgIGNvbnN0IG1heEtleSA9IHRoaXMuZ2V0TGFzdENoaWxkTmFtZShpbmRleERlZmluaXRpb24pO1xuICAgICAgICBpZiAobWF4S2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE5hbWVkTm9kZShtYXhLZXksIHRoaXMuY2hpbGRyZW5fLmdldChtYXhLZXkpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvckVhY2hDaGlsZChpbmRleCwgYWN0aW9uKSB7XG4gICAgICAgIGNvbnN0IGlkeCA9IHRoaXMucmVzb2x2ZUluZGV4XyhpbmRleCk7XG4gICAgICAgIGlmIChpZHgpIHtcbiAgICAgICAgICAgIHJldHVybiBpZHguaW5vcmRlclRyYXZlcnNhbCh3cmFwcGVkTm9kZSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjdGlvbih3cmFwcGVkTm9kZS5uYW1lLCB3cmFwcGVkTm9kZS5ub2RlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2hpbGRyZW5fLmlub3JkZXJUcmF2ZXJzYWwoYWN0aW9uKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRJdGVyYXRvcihpbmRleERlZmluaXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SXRlcmF0b3JGcm9tKGluZGV4RGVmaW5pdGlvbi5taW5Qb3N0KCksIGluZGV4RGVmaW5pdGlvbik7XG4gICAgfVxuICAgIGdldEl0ZXJhdG9yRnJvbShzdGFydFBvc3QsIGluZGV4RGVmaW5pdGlvbikge1xuICAgICAgICBjb25zdCBpZHggPSB0aGlzLnJlc29sdmVJbmRleF8oaW5kZXhEZWZpbml0aW9uKTtcbiAgICAgICAgaWYgKGlkeCkge1xuICAgICAgICAgICAgcmV0dXJuIGlkeC5nZXRJdGVyYXRvckZyb20oc3RhcnRQb3N0LCBrZXkgPT4ga2V5KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZXJhdG9yID0gdGhpcy5jaGlsZHJlbl8uZ2V0SXRlcmF0b3JGcm9tKHN0YXJ0UG9zdC5uYW1lLCBOYW1lZE5vZGUuV3JhcCk7XG4gICAgICAgICAgICBsZXQgbmV4dCA9IGl0ZXJhdG9yLnBlZWsoKTtcbiAgICAgICAgICAgIHdoaWxlIChuZXh0ICE9IG51bGwgJiYgaW5kZXhEZWZpbml0aW9uLmNvbXBhcmUobmV4dCwgc3RhcnRQb3N0KSA8IDApIHtcbiAgICAgICAgICAgICAgICBpdGVyYXRvci5nZXROZXh0KCk7XG4gICAgICAgICAgICAgICAgbmV4dCA9IGl0ZXJhdG9yLnBlZWsoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpdGVyYXRvcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRSZXZlcnNlSXRlcmF0b3IoaW5kZXhEZWZpbml0aW9uKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFJldmVyc2VJdGVyYXRvckZyb20oaW5kZXhEZWZpbml0aW9uLm1heFBvc3QoKSwgaW5kZXhEZWZpbml0aW9uKTtcbiAgICB9XG4gICAgZ2V0UmV2ZXJzZUl0ZXJhdG9yRnJvbShlbmRQb3N0LCBpbmRleERlZmluaXRpb24pIHtcbiAgICAgICAgY29uc3QgaWR4ID0gdGhpcy5yZXNvbHZlSW5kZXhfKGluZGV4RGVmaW5pdGlvbik7XG4gICAgICAgIGlmIChpZHgpIHtcbiAgICAgICAgICAgIHJldHVybiBpZHguZ2V0UmV2ZXJzZUl0ZXJhdG9yRnJvbShlbmRQb3N0LCBrZXkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBrZXk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZXJhdG9yID0gdGhpcy5jaGlsZHJlbl8uZ2V0UmV2ZXJzZUl0ZXJhdG9yRnJvbShlbmRQb3N0Lm5hbWUsIE5hbWVkTm9kZS5XcmFwKTtcbiAgICAgICAgICAgIGxldCBuZXh0ID0gaXRlcmF0b3IucGVlaygpO1xuICAgICAgICAgICAgd2hpbGUgKG5leHQgIT0gbnVsbCAmJiBpbmRleERlZmluaXRpb24uY29tcGFyZShuZXh0LCBlbmRQb3N0KSA+IDApIHtcbiAgICAgICAgICAgICAgICBpdGVyYXRvci5nZXROZXh0KCk7XG4gICAgICAgICAgICAgICAgbmV4dCA9IGl0ZXJhdG9yLnBlZWsoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpdGVyYXRvcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb21wYXJlVG8ob3RoZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICBpZiAob3RoZXIuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3RoZXIuaXNMZWFmTm9kZSgpIHx8IG90aGVyLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3RoZXIgPT09IE1BWF9OT0RFKSB7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBNdXN0IGJlIGFub3RoZXIgbm9kZSB3aXRoIGNoaWxkcmVuLlxuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgd2l0aEluZGV4KGluZGV4RGVmaW5pdGlvbikge1xuICAgICAgICBpZiAoaW5kZXhEZWZpbml0aW9uID09PSBLRVlfSU5ERVggfHxcbiAgICAgICAgICAgIHRoaXMuaW5kZXhNYXBfLmhhc0luZGV4KGluZGV4RGVmaW5pdGlvbikpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgbmV3SW5kZXhNYXAgPSB0aGlzLmluZGV4TWFwXy5hZGRJbmRleChpbmRleERlZmluaXRpb24sIHRoaXMuY2hpbGRyZW5fKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2hpbGRyZW5Ob2RlKHRoaXMuY2hpbGRyZW5fLCB0aGlzLnByaW9yaXR5Tm9kZV8sIG5ld0luZGV4TWFwKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpc0luZGV4ZWQoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIGluZGV4ID09PSBLRVlfSU5ERVggfHwgdGhpcy5pbmRleE1hcF8uaGFzSW5kZXgoaW5kZXgpO1xuICAgIH1cbiAgICBlcXVhbHMob3RoZXIpIHtcbiAgICAgICAgaWYgKG90aGVyID09PSB0aGlzKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvdGhlci5pc0xlYWZOb2RlKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IG90aGVyQ2hpbGRyZW5Ob2RlID0gb3RoZXI7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZ2V0UHJpb3JpdHkoKS5lcXVhbHMob3RoZXJDaGlsZHJlbk5vZGUuZ2V0UHJpb3JpdHkoKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmNoaWxkcmVuXy5jb3VudCgpID09PSBvdGhlckNoaWxkcmVuTm9kZS5jaGlsZHJlbl8uY291bnQoKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRoaXNJdGVyID0gdGhpcy5nZXRJdGVyYXRvcihQUklPUklUWV9JTkRFWCk7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3RoZXJJdGVyID0gb3RoZXJDaGlsZHJlbk5vZGUuZ2V0SXRlcmF0b3IoUFJJT1JJVFlfSU5ERVgpO1xuICAgICAgICAgICAgICAgIGxldCB0aGlzQ3VycmVudCA9IHRoaXNJdGVyLmdldE5leHQoKTtcbiAgICAgICAgICAgICAgICBsZXQgb3RoZXJDdXJyZW50ID0gb3RoZXJJdGVyLmdldE5leHQoKTtcbiAgICAgICAgICAgICAgICB3aGlsZSAodGhpc0N1cnJlbnQgJiYgb3RoZXJDdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzQ3VycmVudC5uYW1lICE9PSBvdGhlckN1cnJlbnQubmFtZSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgIXRoaXNDdXJyZW50Lm5vZGUuZXF1YWxzKG90aGVyQ3VycmVudC5ub2RlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXNDdXJyZW50ID0gdGhpc0l0ZXIuZ2V0TmV4dCgpO1xuICAgICAgICAgICAgICAgICAgICBvdGhlckN1cnJlbnQgPSBvdGhlckl0ZXIuZ2V0TmV4dCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpc0N1cnJlbnQgPT09IG51bGwgJiYgb3RoZXJDdXJyZW50ID09PSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBTb3J0ZWRNYXAgb3JkZXJlZCBieSBpbmRleCwgb3IgbnVsbCBpZiB0aGUgZGVmYXVsdCAoYnkta2V5KSBvcmRlcmluZyBjYW4gYmUgdXNlZFxuICAgICAqIGluc3RlYWQuXG4gICAgICpcbiAgICAgKi9cbiAgICByZXNvbHZlSW5kZXhfKGluZGV4RGVmaW5pdGlvbikge1xuICAgICAgICBpZiAoaW5kZXhEZWZpbml0aW9uID09PSBLRVlfSU5ERVgpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXhNYXBfLmdldChpbmRleERlZmluaXRpb24udG9TdHJpbmcoKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5DaGlsZHJlbk5vZGUuSU5URUdFUl9SRUdFWFBfID0gL14oMHxbMS05XVxcZCopJC87XG5jbGFzcyBNYXhOb2RlIGV4dGVuZHMgQ2hpbGRyZW5Ob2RlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIobmV3IFNvcnRlZE1hcChOQU1FX0NPTVBBUkFUT1IpLCBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERSwgSW5kZXhNYXAuRGVmYXVsdCk7XG4gICAgfVxuICAgIGNvbXBhcmVUbyhvdGhlcikge1xuICAgICAgICBpZiAob3RoZXIgPT09IHRoaXMpIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXF1YWxzKG90aGVyKSB7XG4gICAgICAgIC8vIE5vdCB0aGF0IHdlIGV2ZXJ5IGNvbXBhcmUgaXQsIGJ1dCBNQVhfTk9ERSBpcyBvbmx5IGV2ZXIgZXF1YWwgdG8gaXRzZWxmXG4gICAgICAgIHJldHVybiBvdGhlciA9PT0gdGhpcztcbiAgICB9XG4gICAgZ2V0UHJpb3JpdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBnZXRJbW1lZGlhdGVDaGlsZChjaGlsZE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIENoaWxkcmVuTm9kZS5FTVBUWV9OT0RFO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuLyoqXG4gKiBNYXJrZXIgdGhhdCB3aWxsIHNvcnQgaGlnaGVyIHRoYW4gYW55IG90aGVyIHNuYXBzaG90LlxuICovXG5jb25zdCBNQVhfTk9ERSA9IG5ldyBNYXhOb2RlKCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhOYW1lZE5vZGUsIHtcbiAgICBNSU46IHtcbiAgICAgICAgdmFsdWU6IG5ldyBOYW1lZE5vZGUoTUlOX05BTUUsIENoaWxkcmVuTm9kZS5FTVBUWV9OT0RFKVxuICAgIH0sXG4gICAgTUFYOiB7XG4gICAgICAgIHZhbHVlOiBuZXcgTmFtZWROb2RlKE1BWF9OQU1FLCBNQVhfTk9ERSlcbiAgICB9XG59KTtcbi8qKlxuICogUmVmZXJlbmNlIEV4dGVuc2lvbnNcbiAqL1xuS2V5SW5kZXguX19FTVBUWV9OT0RFID0gQ2hpbGRyZW5Ob2RlLkVNUFRZX05PREU7XG5MZWFmTm9kZS5fX2NoaWxkcmVuTm9kZUNvbnN0cnVjdG9yID0gQ2hpbGRyZW5Ob2RlO1xuc2V0TWF4Tm9kZSQxKE1BWF9OT0RFKTtcbnNldE1heE5vZGUoTUFYX05PREUpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgVVNFX0hJTlpFID0gdHJ1ZTtcbi8qKlxuICogQ29uc3RydWN0cyBhIHNuYXBzaG90IG5vZGUgcmVwcmVzZW50aW5nIHRoZSBwYXNzZWQgSlNPTiBhbmQgcmV0dXJucyBpdC5cbiAqIEBwYXJhbSBqc29uIC0gSlNPTiB0byBjcmVhdGUgYSBub2RlIGZvci5cbiAqIEBwYXJhbSBwcmlvcml0eSAtIE9wdGlvbmFsIHByaW9yaXR5IHRvIHVzZS4gIFRoaXMgd2lsbCBiZSBpZ25vcmVkIGlmIHRoZVxuICogcGFzc2VkIEpTT04gY29udGFpbnMgYSAucHJpb3JpdHkgcHJvcGVydHkuXG4gKi9cbmZ1bmN0aW9uIG5vZGVGcm9tSlNPTihqc29uLCBwcmlvcml0eSA9IG51bGwpIHtcbiAgICBpZiAoanNvbiA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gQ2hpbGRyZW5Ob2RlLkVNUFRZX05PREU7XG4gICAgfVxuICAgIGlmICh0eXBlb2YganNvbiA9PT0gJ29iamVjdCcgJiYgJy5wcmlvcml0eScgaW4ganNvbikge1xuICAgICAgICBwcmlvcml0eSA9IGpzb25bJy5wcmlvcml0eSddO1xuICAgIH1cbiAgICBhc3NlcnQocHJpb3JpdHkgPT09IG51bGwgfHxcbiAgICAgICAgdHlwZW9mIHByaW9yaXR5ID09PSAnc3RyaW5nJyB8fFxuICAgICAgICB0eXBlb2YgcHJpb3JpdHkgPT09ICdudW1iZXInIHx8XG4gICAgICAgICh0eXBlb2YgcHJpb3JpdHkgPT09ICdvYmplY3QnICYmICcuc3YnIGluIHByaW9yaXR5KSwgJ0ludmFsaWQgcHJpb3JpdHkgdHlwZSBmb3VuZDogJyArIHR5cGVvZiBwcmlvcml0eSk7XG4gICAgaWYgKHR5cGVvZiBqc29uID09PSAnb2JqZWN0JyAmJiAnLnZhbHVlJyBpbiBqc29uICYmIGpzb25bJy52YWx1ZSddICE9PSBudWxsKSB7XG4gICAgICAgIGpzb24gPSBqc29uWycudmFsdWUnXTtcbiAgICB9XG4gICAgLy8gVmFsaWQgbGVhZiBub2RlcyBpbmNsdWRlIG5vbi1vYmplY3RzIG9yIHNlcnZlci12YWx1ZSB3cmFwcGVyIG9iamVjdHNcbiAgICBpZiAodHlwZW9mIGpzb24gIT09ICdvYmplY3QnIHx8ICcuc3YnIGluIGpzb24pIHtcbiAgICAgICAgY29uc3QganNvbkxlYWYgPSBqc29uO1xuICAgICAgICByZXR1cm4gbmV3IExlYWZOb2RlKGpzb25MZWFmLCBub2RlRnJvbUpTT04ocHJpb3JpdHkpKTtcbiAgICB9XG4gICAgaWYgKCEoanNvbiBpbnN0YW5jZW9mIEFycmF5KSAmJiBVU0VfSElOWkUpIHtcbiAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBbXTtcbiAgICAgICAgbGV0IGNoaWxkcmVuSGF2ZVByaW9yaXR5ID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IGhpbnplSnNvbk9iaiA9IGpzb247XG4gICAgICAgIGVhY2goaGluemVKc29uT2JqLCAoa2V5LCBjaGlsZCkgPT4ge1xuICAgICAgICAgICAgaWYgKGtleS5zdWJzdHJpbmcoMCwgMSkgIT09ICcuJykge1xuICAgICAgICAgICAgICAgIC8vIElnbm9yZSBtZXRhZGF0YSBub2Rlc1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkTm9kZSA9IG5vZGVGcm9tSlNPTihjaGlsZCk7XG4gICAgICAgICAgICAgICAgaWYgKCFjaGlsZE5vZGUuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuSGF2ZVByaW9yaXR5ID1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuSGF2ZVByaW9yaXR5IHx8ICFjaGlsZE5vZGUuZ2V0UHJpb3JpdHkoKS5pc0VtcHR5KCk7XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuLnB1c2gobmV3IE5hbWVkTm9kZShrZXksIGNoaWxkTm9kZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChjaGlsZHJlbi5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjaGlsZFNldCA9IGJ1aWxkQ2hpbGRTZXQoY2hpbGRyZW4sIE5BTUVfT05MWV9DT01QQVJBVE9SLCBuYW1lZE5vZGUgPT4gbmFtZWROb2RlLm5hbWUsIE5BTUVfQ09NUEFSQVRPUik7XG4gICAgICAgIGlmIChjaGlsZHJlbkhhdmVQcmlvcml0eSkge1xuICAgICAgICAgICAgY29uc3Qgc29ydGVkQ2hpbGRTZXQgPSBidWlsZENoaWxkU2V0KGNoaWxkcmVuLCBQUklPUklUWV9JTkRFWC5nZXRDb21wYXJlKCkpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDaGlsZHJlbk5vZGUoY2hpbGRTZXQsIG5vZGVGcm9tSlNPTihwcmlvcml0eSksIG5ldyBJbmRleE1hcCh7ICcucHJpb3JpdHknOiBzb3J0ZWRDaGlsZFNldCB9LCB7ICcucHJpb3JpdHknOiBQUklPUklUWV9JTkRFWCB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IENoaWxkcmVuTm9kZShjaGlsZFNldCwgbm9kZUZyb21KU09OKHByaW9yaXR5KSwgSW5kZXhNYXAuRGVmYXVsdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGxldCBub2RlID0gQ2hpbGRyZW5Ob2RlLkVNUFRZX05PREU7XG4gICAgICAgIGVhY2goanNvbiwgKGtleSwgY2hpbGREYXRhKSA9PiB7XG4gICAgICAgICAgICBpZiAoY29udGFpbnMoanNvbiwga2V5KSkge1xuICAgICAgICAgICAgICAgIGlmIChrZXkuc3Vic3RyaW5nKDAsIDEpICE9PSAnLicpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWdub3JlIG1ldGFkYXRhIG5vZGVzLlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGlsZE5vZGUgPSBub2RlRnJvbUpTT04oY2hpbGREYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoaWxkTm9kZS5pc0xlYWZOb2RlKCkgfHwgIWNoaWxkTm9kZS5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLnVwZGF0ZUltbWVkaWF0ZUNoaWxkKGtleSwgY2hpbGROb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBub2RlLnVwZGF0ZVByaW9yaXR5KG5vZGVGcm9tSlNPTihwcmlvcml0eSkpO1xuICAgIH1cbn1cbnNldE5vZGVGcm9tSlNPTihub2RlRnJvbUpTT04pO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY2xhc3MgUGF0aEluZGV4IGV4dGVuZHMgSW5kZXgge1xuICAgIGNvbnN0cnVjdG9yKGluZGV4UGF0aF8pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5pbmRleFBhdGhfID0gaW5kZXhQYXRoXztcbiAgICAgICAgYXNzZXJ0KCFwYXRoSXNFbXB0eShpbmRleFBhdGhfKSAmJiBwYXRoR2V0RnJvbnQoaW5kZXhQYXRoXykgIT09ICcucHJpb3JpdHknLCBcIkNhbid0IGNyZWF0ZSBQYXRoSW5kZXggd2l0aCBlbXB0eSBwYXRoIG9yIC5wcmlvcml0eSBrZXlcIik7XG4gICAgfVxuICAgIGV4dHJhY3RDaGlsZChzbmFwKSB7XG4gICAgICAgIHJldHVybiBzbmFwLmdldENoaWxkKHRoaXMuaW5kZXhQYXRoXyk7XG4gICAgfVxuICAgIGlzRGVmaW5lZE9uKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuICFub2RlLmdldENoaWxkKHRoaXMuaW5kZXhQYXRoXykuaXNFbXB0eSgpO1xuICAgIH1cbiAgICBjb21wYXJlKGEsIGIpIHtcbiAgICAgICAgY29uc3QgYUNoaWxkID0gdGhpcy5leHRyYWN0Q2hpbGQoYS5ub2RlKTtcbiAgICAgICAgY29uc3QgYkNoaWxkID0gdGhpcy5leHRyYWN0Q2hpbGQoYi5ub2RlKTtcbiAgICAgICAgY29uc3QgaW5kZXhDbXAgPSBhQ2hpbGQuY29tcGFyZVRvKGJDaGlsZCk7XG4gICAgICAgIGlmIChpbmRleENtcCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG5hbWVDb21wYXJlKGEubmFtZSwgYi5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBpbmRleENtcDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBtYWtlUG9zdChpbmRleFZhbHVlLCBuYW1lKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlTm9kZSA9IG5vZGVGcm9tSlNPTihpbmRleFZhbHVlKTtcbiAgICAgICAgY29uc3Qgbm9kZSA9IENoaWxkcmVuTm9kZS5FTVBUWV9OT0RFLnVwZGF0ZUNoaWxkKHRoaXMuaW5kZXhQYXRoXywgdmFsdWVOb2RlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBOYW1lZE5vZGUobmFtZSwgbm9kZSk7XG4gICAgfVxuICAgIG1heFBvc3QoKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERS51cGRhdGVDaGlsZCh0aGlzLmluZGV4UGF0aF8sIE1BWF9OT0RFKTtcbiAgICAgICAgcmV0dXJuIG5ldyBOYW1lZE5vZGUoTUFYX05BTUUsIG5vZGUpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHBhdGhTbGljZSh0aGlzLmluZGV4UGF0aF8sIDApLmpvaW4oJy8nKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jbGFzcyBWYWx1ZUluZGV4IGV4dGVuZHMgSW5kZXgge1xuICAgIGNvbXBhcmUoYSwgYikge1xuICAgICAgICBjb25zdCBpbmRleENtcCA9IGEubm9kZS5jb21wYXJlVG8oYi5ub2RlKTtcbiAgICAgICAgaWYgKGluZGV4Q21wID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbmFtZUNvbXBhcmUoYS5uYW1lLCBiLm5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGluZGV4Q21wO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlzRGVmaW5lZE9uKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGluZGV4ZWRWYWx1ZUNoYW5nZWQob2xkTm9kZSwgbmV3Tm9kZSkge1xuICAgICAgICByZXR1cm4gIW9sZE5vZGUuZXF1YWxzKG5ld05vZGUpO1xuICAgIH1cbiAgICBtaW5Qb3N0KCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4gTmFtZWROb2RlLk1JTjtcbiAgICB9XG4gICAgbWF4UG9zdCgpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgcmV0dXJuIE5hbWVkTm9kZS5NQVg7XG4gICAgfVxuICAgIG1ha2VQb3N0KGluZGV4VmFsdWUsIG5hbWUpIHtcbiAgICAgICAgY29uc3QgdmFsdWVOb2RlID0gbm9kZUZyb21KU09OKGluZGV4VmFsdWUpO1xuICAgICAgICByZXR1cm4gbmV3IE5hbWVkTm9kZShuYW1lLCB2YWx1ZU5vZGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBTdHJpbmcgcmVwcmVzZW50YXRpb24gZm9yIGluY2x1c2lvbiBpbiBhIHF1ZXJ5IHNwZWNcbiAgICAgKi9cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuICcudmFsdWUnO1xuICAgIH1cbn1cbmNvbnN0IFZBTFVFX0lOREVYID0gbmV3IFZhbHVlSW5kZXgoKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmZ1bmN0aW9uIGNoYW5nZVZhbHVlKHNuYXBzaG90Tm9kZSkge1xuICAgIHJldHVybiB7IHR5cGU6IFwidmFsdWVcIiAvKiBDaGFuZ2VUeXBlLlZBTFVFICovLCBzbmFwc2hvdE5vZGUgfTtcbn1cbmZ1bmN0aW9uIGNoYW5nZUNoaWxkQWRkZWQoY2hpbGROYW1lLCBzbmFwc2hvdE5vZGUpIHtcbiAgICByZXR1cm4geyB0eXBlOiBcImNoaWxkX2FkZGVkXCIgLyogQ2hhbmdlVHlwZS5DSElMRF9BRERFRCAqLywgc25hcHNob3ROb2RlLCBjaGlsZE5hbWUgfTtcbn1cbmZ1bmN0aW9uIGNoYW5nZUNoaWxkUmVtb3ZlZChjaGlsZE5hbWUsIHNuYXBzaG90Tm9kZSkge1xuICAgIHJldHVybiB7IHR5cGU6IFwiY2hpbGRfcmVtb3ZlZFwiIC8qIENoYW5nZVR5cGUuQ0hJTERfUkVNT1ZFRCAqLywgc25hcHNob3ROb2RlLCBjaGlsZE5hbWUgfTtcbn1cbmZ1bmN0aW9uIGNoYW5nZUNoaWxkQ2hhbmdlZChjaGlsZE5hbWUsIHNuYXBzaG90Tm9kZSwgb2xkU25hcCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFwiY2hpbGRfY2hhbmdlZFwiIC8qIENoYW5nZVR5cGUuQ0hJTERfQ0hBTkdFRCAqLyxcbiAgICAgICAgc25hcHNob3ROb2RlLFxuICAgICAgICBjaGlsZE5hbWUsXG4gICAgICAgIG9sZFNuYXBcbiAgICB9O1xufVxuZnVuY3Rpb24gY2hhbmdlQ2hpbGRNb3ZlZChjaGlsZE5hbWUsIHNuYXBzaG90Tm9kZSkge1xuICAgIHJldHVybiB7IHR5cGU6IFwiY2hpbGRfbW92ZWRcIiAvKiBDaGFuZ2VUeXBlLkNISUxEX01PVkVEICovLCBzbmFwc2hvdE5vZGUsIGNoaWxkTmFtZSB9O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBEb2Vzbid0IHJlYWxseSBmaWx0ZXIgbm9kZXMgYnV0IGFwcGxpZXMgYW4gaW5kZXggdG8gdGhlIG5vZGUgYW5kIGtlZXBzIHRyYWNrIG9mIGFueSBjaGFuZ2VzXG4gKi9cbmNsYXNzIEluZGV4ZWRGaWx0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGluZGV4Xykge1xuICAgICAgICB0aGlzLmluZGV4XyA9IGluZGV4XztcbiAgICB9XG4gICAgdXBkYXRlQ2hpbGQoc25hcCwga2V5LCBuZXdDaGlsZCwgYWZmZWN0ZWRQYXRoLCBzb3VyY2UsIG9wdENoYW5nZUFjY3VtdWxhdG9yKSB7XG4gICAgICAgIGFzc2VydChzbmFwLmlzSW5kZXhlZCh0aGlzLmluZGV4XyksICdBIG5vZGUgbXVzdCBiZSBpbmRleGVkIGlmIG9ubHkgYSBjaGlsZCBpcyB1cGRhdGVkJyk7XG4gICAgICAgIGNvbnN0IG9sZENoaWxkID0gc25hcC5nZXRJbW1lZGlhdGVDaGlsZChrZXkpO1xuICAgICAgICAvLyBDaGVjayBpZiBhbnl0aGluZyBhY3R1YWxseSBjaGFuZ2VkLlxuICAgICAgICBpZiAob2xkQ2hpbGQuZ2V0Q2hpbGQoYWZmZWN0ZWRQYXRoKS5lcXVhbHMobmV3Q2hpbGQuZ2V0Q2hpbGQoYWZmZWN0ZWRQYXRoKSkpIHtcbiAgICAgICAgICAgIC8vIFRoZXJlJ3MgYW4gZWRnZSBjYXNlIHdoZXJlIGEgY2hpbGQgY2FuIGVudGVyIG9yIGxlYXZlIHRoZSB2aWV3IGJlY2F1c2UgYWZmZWN0ZWRQYXRoIHdhcyBzZXQgdG8gbnVsbC5cbiAgICAgICAgICAgIC8vIEluIHRoaXMgY2FzZSwgYWZmZWN0ZWRQYXRoIHdpbGwgYXBwZWFyIG51bGwgaW4gYm90aCB0aGUgb2xkIGFuZCBuZXcgc25hcHNob3RzLiAgU28gd2UgbmVlZFxuICAgICAgICAgICAgLy8gdG8gYXZvaWQgdHJlYXRpbmcgdGhlc2UgY2FzZXMgYXMgXCJub3RoaW5nIGNoYW5nZWQuXCJcbiAgICAgICAgICAgIGlmIChvbGRDaGlsZC5pc0VtcHR5KCkgPT09IG5ld0NoaWxkLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIC8vIE5vdGhpbmcgY2hhbmdlZC5cbiAgICAgICAgICAgICAgICAvLyBUaGlzIGFzc2VydCBzaG91bGQgYmUgdmFsaWQsIGJ1dCBpdCdzIGV4cGVuc2l2ZSAoY2FuIGRvbWluYXRlIHBlcmYgdGVzdGluZykgc28gZG9uJ3QgYWN0dWFsbHkgZG8gaXQuXG4gICAgICAgICAgICAgICAgLy9hc3NlcnQob2xkQ2hpbGQuZXF1YWxzKG5ld0NoaWxkKSwgJ09sZCBhbmQgbmV3IHNuYXBzaG90cyBzaG91bGQgYmUgZXF1YWwuJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNuYXA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdENoYW5nZUFjY3VtdWxhdG9yICE9IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChuZXdDaGlsZC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoc25hcC5oYXNDaGlsZChrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdENoYW5nZUFjY3VtdWxhdG9yLnRyYWNrQ2hpbGRDaGFuZ2UoY2hhbmdlQ2hpbGRSZW1vdmVkKGtleSwgb2xkQ2hpbGQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFzc2VydChzbmFwLmlzTGVhZk5vZGUoKSwgJ0EgY2hpbGQgcmVtb3ZlIHdpdGhvdXQgYW4gb2xkIGNoaWxkIG9ubHkgbWFrZXMgc2Vuc2Ugb24gYSBsZWFmIG5vZGUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChvbGRDaGlsZC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICBvcHRDaGFuZ2VBY2N1bXVsYXRvci50cmFja0NoaWxkQ2hhbmdlKGNoYW5nZUNoaWxkQWRkZWQoa2V5LCBuZXdDaGlsZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgb3B0Q2hhbmdlQWNjdW11bGF0b3IudHJhY2tDaGlsZENoYW5nZShjaGFuZ2VDaGlsZENoYW5nZWQoa2V5LCBuZXdDaGlsZCwgb2xkQ2hpbGQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoc25hcC5pc0xlYWZOb2RlKCkgJiYgbmV3Q2hpbGQuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICByZXR1cm4gc25hcDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgbm9kZSBpcyBpbmRleGVkXG4gICAgICAgICAgICByZXR1cm4gc25hcC51cGRhdGVJbW1lZGlhdGVDaGlsZChrZXksIG5ld0NoaWxkKS53aXRoSW5kZXgodGhpcy5pbmRleF8pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZUZ1bGxOb2RlKG9sZFNuYXAsIG5ld1NuYXAsIG9wdENoYW5nZUFjY3VtdWxhdG9yKSB7XG4gICAgICAgIGlmIChvcHRDaGFuZ2VBY2N1bXVsYXRvciAhPSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoIW9sZFNuYXAuaXNMZWFmTm9kZSgpKSB7XG4gICAgICAgICAgICAgICAgb2xkU25hcC5mb3JFYWNoQ2hpbGQoUFJJT1JJVFlfSU5ERVgsIChrZXksIGNoaWxkTm9kZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW5ld1NuYXAuaGFzQ2hpbGQoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0Q2hhbmdlQWNjdW11bGF0b3IudHJhY2tDaGlsZENoYW5nZShjaGFuZ2VDaGlsZFJlbW92ZWQoa2V5LCBjaGlsZE5vZGUpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFuZXdTbmFwLmlzTGVhZk5vZGUoKSkge1xuICAgICAgICAgICAgICAgIG5ld1NuYXAuZm9yRWFjaENoaWxkKFBSSU9SSVRZX0lOREVYLCAoa2V5LCBjaGlsZE5vZGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9sZFNuYXAuaGFzQ2hpbGQoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2xkQ2hpbGQgPSBvbGRTbmFwLmdldEltbWVkaWF0ZUNoaWxkKGtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW9sZENoaWxkLmVxdWFscyhjaGlsZE5vZGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0Q2hhbmdlQWNjdW11bGF0b3IudHJhY2tDaGlsZENoYW5nZShjaGFuZ2VDaGlsZENoYW5nZWQoa2V5LCBjaGlsZE5vZGUsIG9sZENoaWxkKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRDaGFuZ2VBY2N1bXVsYXRvci50cmFja0NoaWxkQ2hhbmdlKGNoYW5nZUNoaWxkQWRkZWQoa2V5LCBjaGlsZE5vZGUpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXdTbmFwLndpdGhJbmRleCh0aGlzLmluZGV4Xyk7XG4gICAgfVxuICAgIHVwZGF0ZVByaW9yaXR5KG9sZFNuYXAsIG5ld1ByaW9yaXR5KSB7XG4gICAgICAgIGlmIChvbGRTbmFwLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgcmV0dXJuIENoaWxkcmVuTm9kZS5FTVBUWV9OT0RFO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG9sZFNuYXAudXBkYXRlUHJpb3JpdHkobmV3UHJpb3JpdHkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZpbHRlcnNOb2RlcygpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXRJbmRleGVkRmlsdGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZ2V0SW5kZXgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmluZGV4XztcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEZpbHRlcnMgbm9kZXMgYnkgcmFuZ2UgYW5kIHVzZXMgYW4gSW5kZXhGaWx0ZXIgdG8gdHJhY2sgYW55IGNoYW5nZXMgYWZ0ZXIgZmlsdGVyaW5nIHRoZSBub2RlXG4gKi9cbmNsYXNzIFJhbmdlZEZpbHRlciB7XG4gICAgY29uc3RydWN0b3IocGFyYW1zKSB7XG4gICAgICAgIHRoaXMuaW5kZXhlZEZpbHRlcl8gPSBuZXcgSW5kZXhlZEZpbHRlcihwYXJhbXMuZ2V0SW5kZXgoKSk7XG4gICAgICAgIHRoaXMuaW5kZXhfID0gcGFyYW1zLmdldEluZGV4KCk7XG4gICAgICAgIHRoaXMuc3RhcnRQb3N0XyA9IFJhbmdlZEZpbHRlci5nZXRTdGFydFBvc3RfKHBhcmFtcyk7XG4gICAgICAgIHRoaXMuZW5kUG9zdF8gPSBSYW5nZWRGaWx0ZXIuZ2V0RW5kUG9zdF8ocGFyYW1zKTtcbiAgICAgICAgdGhpcy5zdGFydElzSW5jbHVzaXZlXyA9ICFwYXJhbXMuc3RhcnRBZnRlclNldF87XG4gICAgICAgIHRoaXMuZW5kSXNJbmNsdXNpdmVfID0gIXBhcmFtcy5lbmRCZWZvcmVTZXRfO1xuICAgIH1cbiAgICBnZXRTdGFydFBvc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXJ0UG9zdF87XG4gICAgfVxuICAgIGdldEVuZFBvc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZFBvc3RfO1xuICAgIH1cbiAgICBtYXRjaGVzKG5vZGUpIHtcbiAgICAgICAgY29uc3QgaXNXaXRoaW5TdGFydCA9IHRoaXMuc3RhcnRJc0luY2x1c2l2ZV9cbiAgICAgICAgICAgID8gdGhpcy5pbmRleF8uY29tcGFyZSh0aGlzLmdldFN0YXJ0UG9zdCgpLCBub2RlKSA8PSAwXG4gICAgICAgICAgICA6IHRoaXMuaW5kZXhfLmNvbXBhcmUodGhpcy5nZXRTdGFydFBvc3QoKSwgbm9kZSkgPCAwO1xuICAgICAgICBjb25zdCBpc1dpdGhpbkVuZCA9IHRoaXMuZW5kSXNJbmNsdXNpdmVfXG4gICAgICAgICAgICA/IHRoaXMuaW5kZXhfLmNvbXBhcmUobm9kZSwgdGhpcy5nZXRFbmRQb3N0KCkpIDw9IDBcbiAgICAgICAgICAgIDogdGhpcy5pbmRleF8uY29tcGFyZShub2RlLCB0aGlzLmdldEVuZFBvc3QoKSkgPCAwO1xuICAgICAgICByZXR1cm4gaXNXaXRoaW5TdGFydCAmJiBpc1dpdGhpbkVuZDtcbiAgICB9XG4gICAgdXBkYXRlQ2hpbGQoc25hcCwga2V5LCBuZXdDaGlsZCwgYWZmZWN0ZWRQYXRoLCBzb3VyY2UsIG9wdENoYW5nZUFjY3VtdWxhdG9yKSB7XG4gICAgICAgIGlmICghdGhpcy5tYXRjaGVzKG5ldyBOYW1lZE5vZGUoa2V5LCBuZXdDaGlsZCkpKSB7XG4gICAgICAgICAgICBuZXdDaGlsZCA9IENoaWxkcmVuTm9kZS5FTVBUWV9OT0RFO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmluZGV4ZWRGaWx0ZXJfLnVwZGF0ZUNoaWxkKHNuYXAsIGtleSwgbmV3Q2hpbGQsIGFmZmVjdGVkUGF0aCwgc291cmNlLCBvcHRDaGFuZ2VBY2N1bXVsYXRvcik7XG4gICAgfVxuICAgIHVwZGF0ZUZ1bGxOb2RlKG9sZFNuYXAsIG5ld1NuYXAsIG9wdENoYW5nZUFjY3VtdWxhdG9yKSB7XG4gICAgICAgIGlmIChuZXdTbmFwLmlzTGVhZk5vZGUoKSkge1xuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHdlIGhhdmUgYSBjaGlsZHJlbiBub2RlIHdpdGggdGhlIGNvcnJlY3QgaW5kZXgsIG5vdCBhIGxlYWYgbm9kZTtcbiAgICAgICAgICAgIG5ld1NuYXAgPSBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZmlsdGVyZWQgPSBuZXdTbmFwLndpdGhJbmRleCh0aGlzLmluZGV4Xyk7XG4gICAgICAgIC8vIERvbid0IHN1cHBvcnQgcHJpb3JpdGllcyBvbiBxdWVyaWVzXG4gICAgICAgIGZpbHRlcmVkID0gZmlsdGVyZWQudXBkYXRlUHJpb3JpdHkoQ2hpbGRyZW5Ob2RlLkVNUFRZX05PREUpO1xuICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICAgICAgbmV3U25hcC5mb3JFYWNoQ2hpbGQoUFJJT1JJVFlfSU5ERVgsIChrZXksIGNoaWxkTm9kZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFzZWxmLm1hdGNoZXMobmV3IE5hbWVkTm9kZShrZXksIGNoaWxkTm9kZSkpKSB7XG4gICAgICAgICAgICAgICAgZmlsdGVyZWQgPSBmaWx0ZXJlZC51cGRhdGVJbW1lZGlhdGVDaGlsZChrZXksIENoaWxkcmVuTm9kZS5FTVBUWV9OT0RFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLmluZGV4ZWRGaWx0ZXJfLnVwZGF0ZUZ1bGxOb2RlKG9sZFNuYXAsIGZpbHRlcmVkLCBvcHRDaGFuZ2VBY2N1bXVsYXRvcik7XG4gICAgfVxuICAgIHVwZGF0ZVByaW9yaXR5KG9sZFNuYXAsIG5ld1ByaW9yaXR5KSB7XG4gICAgICAgIC8vIERvbid0IHN1cHBvcnQgcHJpb3JpdGllcyBvbiBxdWVyaWVzXG4gICAgICAgIHJldHVybiBvbGRTbmFwO1xuICAgIH1cbiAgICBmaWx0ZXJzTm9kZXMoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBnZXRJbmRleGVkRmlsdGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleGVkRmlsdGVyXztcbiAgICB9XG4gICAgZ2V0SW5kZXgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmluZGV4XztcbiAgICB9XG4gICAgc3RhdGljIGdldFN0YXJ0UG9zdF8ocGFyYW1zKSB7XG4gICAgICAgIGlmIChwYXJhbXMuaGFzU3RhcnQoKSkge1xuICAgICAgICAgICAgY29uc3Qgc3RhcnROYW1lID0gcGFyYW1zLmdldEluZGV4U3RhcnROYW1lKCk7XG4gICAgICAgICAgICByZXR1cm4gcGFyYW1zLmdldEluZGV4KCkubWFrZVBvc3QocGFyYW1zLmdldEluZGV4U3RhcnRWYWx1ZSgpLCBzdGFydE5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHBhcmFtcy5nZXRJbmRleCgpLm1pblBvc3QoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZ2V0RW5kUG9zdF8ocGFyYW1zKSB7XG4gICAgICAgIGlmIChwYXJhbXMuaGFzRW5kKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGVuZE5hbWUgPSBwYXJhbXMuZ2V0SW5kZXhFbmROYW1lKCk7XG4gICAgICAgICAgICByZXR1cm4gcGFyYW1zLmdldEluZGV4KCkubWFrZVBvc3QocGFyYW1zLmdldEluZGV4RW5kVmFsdWUoKSwgZW5kTmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gcGFyYW1zLmdldEluZGV4KCkubWF4UG9zdCgpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBcHBsaWVzIGEgbGltaXQgYW5kIGEgcmFuZ2UgdG8gYSBub2RlIGFuZCB1c2VzIFJhbmdlZEZpbHRlciB0byBkbyB0aGUgaGVhdnkgbGlmdGluZyB3aGVyZSBwb3NzaWJsZVxuICovXG5jbGFzcyBMaW1pdGVkRmlsdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbXMpIHtcbiAgICAgICAgdGhpcy53aXRoaW5EaXJlY3Rpb25hbFN0YXJ0ID0gKG5vZGUpID0+IHRoaXMucmV2ZXJzZV8gPyB0aGlzLndpdGhpbkVuZFBvc3Qobm9kZSkgOiB0aGlzLndpdGhpblN0YXJ0UG9zdChub2RlKTtcbiAgICAgICAgdGhpcy53aXRoaW5EaXJlY3Rpb25hbEVuZCA9IChub2RlKSA9PiB0aGlzLnJldmVyc2VfID8gdGhpcy53aXRoaW5TdGFydFBvc3Qobm9kZSkgOiB0aGlzLndpdGhpbkVuZFBvc3Qobm9kZSk7XG4gICAgICAgIHRoaXMud2l0aGluU3RhcnRQb3N0ID0gKG5vZGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbXBhcmVSZXMgPSB0aGlzLmluZGV4Xy5jb21wYXJlKHRoaXMucmFuZ2VkRmlsdGVyXy5nZXRTdGFydFBvc3QoKSwgbm9kZSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGFydElzSW5jbHVzaXZlXyA/IGNvbXBhcmVSZXMgPD0gMCA6IGNvbXBhcmVSZXMgPCAwO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLndpdGhpbkVuZFBvc3QgPSAobm9kZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY29tcGFyZVJlcyA9IHRoaXMuaW5kZXhfLmNvbXBhcmUobm9kZSwgdGhpcy5yYW5nZWRGaWx0ZXJfLmdldEVuZFBvc3QoKSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbmRJc0luY2x1c2l2ZV8gPyBjb21wYXJlUmVzIDw9IDAgOiBjb21wYXJlUmVzIDwgMDtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5yYW5nZWRGaWx0ZXJfID0gbmV3IFJhbmdlZEZpbHRlcihwYXJhbXMpO1xuICAgICAgICB0aGlzLmluZGV4XyA9IHBhcmFtcy5nZXRJbmRleCgpO1xuICAgICAgICB0aGlzLmxpbWl0XyA9IHBhcmFtcy5nZXRMaW1pdCgpO1xuICAgICAgICB0aGlzLnJldmVyc2VfID0gIXBhcmFtcy5pc1ZpZXdGcm9tTGVmdCgpO1xuICAgICAgICB0aGlzLnN0YXJ0SXNJbmNsdXNpdmVfID0gIXBhcmFtcy5zdGFydEFmdGVyU2V0XztcbiAgICAgICAgdGhpcy5lbmRJc0luY2x1c2l2ZV8gPSAhcGFyYW1zLmVuZEJlZm9yZVNldF87XG4gICAgfVxuICAgIHVwZGF0ZUNoaWxkKHNuYXAsIGtleSwgbmV3Q2hpbGQsIGFmZmVjdGVkUGF0aCwgc291cmNlLCBvcHRDaGFuZ2VBY2N1bXVsYXRvcikge1xuICAgICAgICBpZiAoIXRoaXMucmFuZ2VkRmlsdGVyXy5tYXRjaGVzKG5ldyBOYW1lZE5vZGUoa2V5LCBuZXdDaGlsZCkpKSB7XG4gICAgICAgICAgICBuZXdDaGlsZCA9IENoaWxkcmVuTm9kZS5FTVBUWV9OT0RFO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzbmFwLmdldEltbWVkaWF0ZUNoaWxkKGtleSkuZXF1YWxzKG5ld0NoaWxkKSkge1xuICAgICAgICAgICAgLy8gTm8gY2hhbmdlXG4gICAgICAgICAgICByZXR1cm4gc25hcDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzbmFwLm51bUNoaWxkcmVuKCkgPCB0aGlzLmxpbWl0Xykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmFuZ2VkRmlsdGVyX1xuICAgICAgICAgICAgICAgIC5nZXRJbmRleGVkRmlsdGVyKClcbiAgICAgICAgICAgICAgICAudXBkYXRlQ2hpbGQoc25hcCwga2V5LCBuZXdDaGlsZCwgYWZmZWN0ZWRQYXRoLCBzb3VyY2UsIG9wdENoYW5nZUFjY3VtdWxhdG9yKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZ1bGxMaW1pdFVwZGF0ZUNoaWxkXyhzbmFwLCBrZXksIG5ld0NoaWxkLCBzb3VyY2UsIG9wdENoYW5nZUFjY3VtdWxhdG9yKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGVGdWxsTm9kZShvbGRTbmFwLCBuZXdTbmFwLCBvcHRDaGFuZ2VBY2N1bXVsYXRvcikge1xuICAgICAgICBsZXQgZmlsdGVyZWQ7XG4gICAgICAgIGlmIChuZXdTbmFwLmlzTGVhZk5vZGUoKSB8fCBuZXdTbmFwLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHdlIGhhdmUgYSBjaGlsZHJlbiBub2RlIHdpdGggdGhlIGNvcnJlY3QgaW5kZXgsIG5vdCBhIGxlYWYgbm9kZTtcbiAgICAgICAgICAgIGZpbHRlcmVkID0gQ2hpbGRyZW5Ob2RlLkVNUFRZX05PREUud2l0aEluZGV4KHRoaXMuaW5kZXhfKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmxpbWl0XyAqIDIgPCBuZXdTbmFwLm51bUNoaWxkcmVuKCkgJiZcbiAgICAgICAgICAgICAgICBuZXdTbmFwLmlzSW5kZXhlZCh0aGlzLmluZGV4XykpIHtcbiAgICAgICAgICAgICAgICAvLyBFYXNpZXIgdG8gYnVpbGQgdXAgYSBzbmFwc2hvdCwgc2luY2Ugd2hhdCB3ZSdyZSBnaXZlbiBoYXMgbW9yZSB0aGFuIHR3aWNlIHRoZSBlbGVtZW50cyB3ZSB3YW50XG4gICAgICAgICAgICAgICAgZmlsdGVyZWQgPSBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERS53aXRoSW5kZXgodGhpcy5pbmRleF8pO1xuICAgICAgICAgICAgICAgIC8vIGFuY2hvciB0byB0aGUgc3RhcnRQb3N0LCBlbmRQb3N0LCBvciBsYXN0IGVsZW1lbnQgYXMgYXBwcm9wcmlhdGVcbiAgICAgICAgICAgICAgICBsZXQgaXRlcmF0b3I7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucmV2ZXJzZV8pIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlcmF0b3IgPSBuZXdTbmFwLmdldFJldmVyc2VJdGVyYXRvckZyb20odGhpcy5yYW5nZWRGaWx0ZXJfLmdldEVuZFBvc3QoKSwgdGhpcy5pbmRleF8pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlcmF0b3IgPSBuZXdTbmFwLmdldEl0ZXJhdG9yRnJvbSh0aGlzLnJhbmdlZEZpbHRlcl8uZ2V0U3RhcnRQb3N0KCksIHRoaXMuaW5kZXhfKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGNvdW50ID0gMDtcbiAgICAgICAgICAgICAgICB3aGlsZSAoaXRlcmF0b3IuaGFzTmV4dCgpICYmIGNvdW50IDwgdGhpcy5saW1pdF8pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dCA9IGl0ZXJhdG9yLmdldE5leHQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLndpdGhpbkRpcmVjdGlvbmFsU3RhcnQobmV4dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHdlIGhhdmUgbm90IHJlYWNoZWQgdGhlIHN0YXJ0LCBza2lwIHRvIHRoZSBuZXh0IGVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCF0aGlzLndpdGhpbkRpcmVjdGlvbmFsRW5kKG5leHQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB3ZSBoYXZlIHJlYWNoZWQgdGhlIGVuZCwgc3RvcCBhZGRpbmcgZWxlbWVudHNcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyZWQgPSBmaWx0ZXJlZC51cGRhdGVJbW1lZGlhdGVDaGlsZChuZXh0Lm5hbWUsIG5leHQubm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlIHNuYXAgY29udGFpbnMgbGVzcyB0aGFuIHR3aWNlIHRoZSBsaW1pdC4gRmFzdGVyIHRvIGRlbGV0ZSBmcm9tIHRoZSBzbmFwIHRoYW4gYnVpbGQgdXAgYSBuZXcgb25lXG4gICAgICAgICAgICAgICAgZmlsdGVyZWQgPSBuZXdTbmFwLndpdGhJbmRleCh0aGlzLmluZGV4Xyk7XG4gICAgICAgICAgICAgICAgLy8gRG9uJ3Qgc3VwcG9ydCBwcmlvcml0aWVzIG9uIHF1ZXJpZXNcbiAgICAgICAgICAgICAgICBmaWx0ZXJlZCA9IGZpbHRlcmVkLnVwZGF0ZVByaW9yaXR5KENoaWxkcmVuTm9kZS5FTVBUWV9OT0RFKTtcbiAgICAgICAgICAgICAgICBsZXQgaXRlcmF0b3I7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucmV2ZXJzZV8pIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlcmF0b3IgPSBmaWx0ZXJlZC5nZXRSZXZlcnNlSXRlcmF0b3IodGhpcy5pbmRleF8pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlcmF0b3IgPSBmaWx0ZXJlZC5nZXRJdGVyYXRvcih0aGlzLmluZGV4Xyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGl0ZXJhdG9yLmhhc05leHQoKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0ID0gaXRlcmF0b3IuZ2V0TmV4dCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpblJhbmdlID0gY291bnQgPCB0aGlzLmxpbWl0XyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53aXRoaW5EaXJlY3Rpb25hbFN0YXJ0KG5leHQpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndpdGhpbkRpcmVjdGlvbmFsRW5kKG5leHQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5SYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkID0gZmlsdGVyZWQudXBkYXRlSW1tZWRpYXRlQ2hpbGQobmV4dC5uYW1lLCBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucmFuZ2VkRmlsdGVyX1xuICAgICAgICAgICAgLmdldEluZGV4ZWRGaWx0ZXIoKVxuICAgICAgICAgICAgLnVwZGF0ZUZ1bGxOb2RlKG9sZFNuYXAsIGZpbHRlcmVkLCBvcHRDaGFuZ2VBY2N1bXVsYXRvcik7XG4gICAgfVxuICAgIHVwZGF0ZVByaW9yaXR5KG9sZFNuYXAsIG5ld1ByaW9yaXR5KSB7XG4gICAgICAgIC8vIERvbid0IHN1cHBvcnQgcHJpb3JpdGllcyBvbiBxdWVyaWVzXG4gICAgICAgIHJldHVybiBvbGRTbmFwO1xuICAgIH1cbiAgICBmaWx0ZXJzTm9kZXMoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBnZXRJbmRleGVkRmlsdGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYW5nZWRGaWx0ZXJfLmdldEluZGV4ZWRGaWx0ZXIoKTtcbiAgICB9XG4gICAgZ2V0SW5kZXgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmluZGV4XztcbiAgICB9XG4gICAgZnVsbExpbWl0VXBkYXRlQ2hpbGRfKHNuYXAsIGNoaWxkS2V5LCBjaGlsZFNuYXAsIHNvdXJjZSwgY2hhbmdlQWNjdW11bGF0b3IpIHtcbiAgICAgICAgLy8gVE9ETzogcmVuYW1lIGFsbCBjYWNoZSBzdHVmZiBldGMgdG8gZ2VuZXJhbCBzbmFwIHRlcm1pbm9sb2d5XG4gICAgICAgIGxldCBjbXA7XG4gICAgICAgIGlmICh0aGlzLnJldmVyc2VfKSB7XG4gICAgICAgICAgICBjb25zdCBpbmRleENtcCA9IHRoaXMuaW5kZXhfLmdldENvbXBhcmUoKTtcbiAgICAgICAgICAgIGNtcCA9IChhLCBiKSA9PiBpbmRleENtcChiLCBhKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNtcCA9IHRoaXMuaW5kZXhfLmdldENvbXBhcmUoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvbGRFdmVudENhY2hlID0gc25hcDtcbiAgICAgICAgYXNzZXJ0KG9sZEV2ZW50Q2FjaGUubnVtQ2hpbGRyZW4oKSA9PT0gdGhpcy5saW1pdF8sICcnKTtcbiAgICAgICAgY29uc3QgbmV3Q2hpbGROYW1lZE5vZGUgPSBuZXcgTmFtZWROb2RlKGNoaWxkS2V5LCBjaGlsZFNuYXApO1xuICAgICAgICBjb25zdCB3aW5kb3dCb3VuZGFyeSA9IHRoaXMucmV2ZXJzZV9cbiAgICAgICAgICAgID8gb2xkRXZlbnRDYWNoZS5nZXRGaXJzdENoaWxkKHRoaXMuaW5kZXhfKVxuICAgICAgICAgICAgOiBvbGRFdmVudENhY2hlLmdldExhc3RDaGlsZCh0aGlzLmluZGV4Xyk7XG4gICAgICAgIGNvbnN0IGluUmFuZ2UgPSB0aGlzLnJhbmdlZEZpbHRlcl8ubWF0Y2hlcyhuZXdDaGlsZE5hbWVkTm9kZSk7XG4gICAgICAgIGlmIChvbGRFdmVudENhY2hlLmhhc0NoaWxkKGNoaWxkS2V5KSkge1xuICAgICAgICAgICAgY29uc3Qgb2xkQ2hpbGRTbmFwID0gb2xkRXZlbnRDYWNoZS5nZXRJbW1lZGlhdGVDaGlsZChjaGlsZEtleSk7XG4gICAgICAgICAgICBsZXQgbmV4dENoaWxkID0gc291cmNlLmdldENoaWxkQWZ0ZXJDaGlsZCh0aGlzLmluZGV4Xywgd2luZG93Qm91bmRhcnksIHRoaXMucmV2ZXJzZV8pO1xuICAgICAgICAgICAgd2hpbGUgKG5leHRDaGlsZCAhPSBudWxsICYmXG4gICAgICAgICAgICAgICAgKG5leHRDaGlsZC5uYW1lID09PSBjaGlsZEtleSB8fCBvbGRFdmVudENhY2hlLmhhc0NoaWxkKG5leHRDaGlsZC5uYW1lKSkpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGVyZSBpcyBhIHdlaXJkIGVkZ2UgY2FzZSB3aGVyZSBhIG5vZGUgaXMgdXBkYXRlZCBhcyBwYXJ0IG9mIGEgbWVyZ2UgaW4gdGhlIHdyaXRlIHRyZWUsIGJ1dCBoYXNuJ3RcbiAgICAgICAgICAgICAgICAvLyBiZWVuIGFwcGxpZWQgdG8gdGhlIGxpbWl0ZWQgZmlsdGVyIHlldC4gSWdub3JlIHRoaXMgbmV4dCBjaGlsZCB3aGljaCB3aWxsIGJlIHVwZGF0ZWQgbGF0ZXIgaW5cbiAgICAgICAgICAgICAgICAvLyB0aGUgbGltaXRlZCBmaWx0ZXIuLi5cbiAgICAgICAgICAgICAgICBuZXh0Q2hpbGQgPSBzb3VyY2UuZ2V0Q2hpbGRBZnRlckNoaWxkKHRoaXMuaW5kZXhfLCBuZXh0Q2hpbGQsIHRoaXMucmV2ZXJzZV8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY29tcGFyZU5leHQgPSBuZXh0Q2hpbGQgPT0gbnVsbCA/IDEgOiBjbXAobmV4dENoaWxkLCBuZXdDaGlsZE5hbWVkTm9kZSk7XG4gICAgICAgICAgICBjb25zdCByZW1haW5zSW5XaW5kb3cgPSBpblJhbmdlICYmICFjaGlsZFNuYXAuaXNFbXB0eSgpICYmIGNvbXBhcmVOZXh0ID49IDA7XG4gICAgICAgICAgICBpZiAocmVtYWluc0luV2luZG93KSB7XG4gICAgICAgICAgICAgICAgaWYgKGNoYW5nZUFjY3VtdWxhdG9yICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlQWNjdW11bGF0b3IudHJhY2tDaGlsZENoYW5nZShjaGFuZ2VDaGlsZENoYW5nZWQoY2hpbGRLZXksIGNoaWxkU25hcCwgb2xkQ2hpbGRTbmFwKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBvbGRFdmVudENhY2hlLnVwZGF0ZUltbWVkaWF0ZUNoaWxkKGNoaWxkS2V5LCBjaGlsZFNuYXApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGNoYW5nZUFjY3VtdWxhdG9yICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlQWNjdW11bGF0b3IudHJhY2tDaGlsZENoYW5nZShjaGFuZ2VDaGlsZFJlbW92ZWQoY2hpbGRLZXksIG9sZENoaWxkU25hcCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBuZXdFdmVudENhY2hlID0gb2xkRXZlbnRDYWNoZS51cGRhdGVJbW1lZGlhdGVDaGlsZChjaGlsZEtleSwgQ2hpbGRyZW5Ob2RlLkVNUFRZX05PREUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5leHRDaGlsZEluUmFuZ2UgPSBuZXh0Q2hpbGQgIT0gbnVsbCAmJiB0aGlzLnJhbmdlZEZpbHRlcl8ubWF0Y2hlcyhuZXh0Q2hpbGQpO1xuICAgICAgICAgICAgICAgIGlmIChuZXh0Q2hpbGRJblJhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGFuZ2VBY2N1bXVsYXRvciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VBY2N1bXVsYXRvci50cmFja0NoaWxkQ2hhbmdlKGNoYW5nZUNoaWxkQWRkZWQobmV4dENoaWxkLm5hbWUsIG5leHRDaGlsZC5ub2RlKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld0V2ZW50Q2FjaGUudXBkYXRlSW1tZWRpYXRlQ2hpbGQobmV4dENoaWxkLm5hbWUsIG5leHRDaGlsZC5ub2RlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdFdmVudENhY2hlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjaGlsZFNuYXAuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAvLyB3ZSdyZSBkZWxldGluZyBhIG5vZGUsIGJ1dCBpdCB3YXMgbm90IGluIHRoZSB3aW5kb3csIHNvIGlnbm9yZSBpdFxuICAgICAgICAgICAgcmV0dXJuIHNuYXA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaW5SYW5nZSkge1xuICAgICAgICAgICAgaWYgKGNtcCh3aW5kb3dCb3VuZGFyeSwgbmV3Q2hpbGROYW1lZE5vZGUpID49IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoY2hhbmdlQWNjdW11bGF0b3IgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VBY2N1bXVsYXRvci50cmFja0NoaWxkQ2hhbmdlKGNoYW5nZUNoaWxkUmVtb3ZlZCh3aW5kb3dCb3VuZGFyeS5uYW1lLCB3aW5kb3dCb3VuZGFyeS5ub2RlKSk7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZUFjY3VtdWxhdG9yLnRyYWNrQ2hpbGRDaGFuZ2UoY2hhbmdlQ2hpbGRBZGRlZChjaGlsZEtleSwgY2hpbGRTbmFwKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBvbGRFdmVudENhY2hlXG4gICAgICAgICAgICAgICAgICAgIC51cGRhdGVJbW1lZGlhdGVDaGlsZChjaGlsZEtleSwgY2hpbGRTbmFwKVxuICAgICAgICAgICAgICAgICAgICAudXBkYXRlSW1tZWRpYXRlQ2hpbGQod2luZG93Qm91bmRhcnkubmFtZSwgQ2hpbGRyZW5Ob2RlLkVNUFRZX05PREUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNuYXA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gc25hcDtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVGhpcyBjbGFzcyBpcyBhbiBpbW11dGFibGUtZnJvbS10aGUtcHVibGljLWFwaSBzdHJ1Y3QgY29udGFpbmluZyBhIHNldCBvZiBxdWVyeSBwYXJhbWV0ZXJzIGRlZmluaW5nIGFcbiAqIHJhbmdlIHRvIGJlIHJldHVybmVkIGZvciBhIHBhcnRpY3VsYXIgbG9jYXRpb24uIEl0IGlzIGFzc3VtZWQgdGhhdCB2YWxpZGF0aW9uIG9mIHBhcmFtZXRlcnMgaXMgZG9uZSBhdCB0aGVcbiAqIHVzZXItZmFjaW5nIEFQSSBsZXZlbCwgc28gaXQgaXMgbm90IGRvbmUgaGVyZS5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuY2xhc3MgUXVlcnlQYXJhbXMge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmxpbWl0U2V0XyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnN0YXJ0U2V0XyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnN0YXJ0TmFtZVNldF8gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zdGFydEFmdGVyU2V0XyA9IGZhbHNlOyAvLyBjYW4gb25seSBiZSB0cnVlIGlmIHN0YXJ0U2V0XyBpcyB0cnVlXG4gICAgICAgIHRoaXMuZW5kU2V0XyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmVuZE5hbWVTZXRfID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZW5kQmVmb3JlU2V0XyA9IGZhbHNlOyAvLyBjYW4gb25seSBiZSB0cnVlIGlmIGVuZFNldF8gaXMgdHJ1ZVxuICAgICAgICB0aGlzLmxpbWl0XyA9IDA7XG4gICAgICAgIHRoaXMudmlld0Zyb21fID0gJyc7XG4gICAgICAgIHRoaXMuaW5kZXhTdGFydFZhbHVlXyA9IG51bGw7XG4gICAgICAgIHRoaXMuaW5kZXhTdGFydE5hbWVfID0gJyc7XG4gICAgICAgIHRoaXMuaW5kZXhFbmRWYWx1ZV8gPSBudWxsO1xuICAgICAgICB0aGlzLmluZGV4RW5kTmFtZV8gPSAnJztcbiAgICAgICAgdGhpcy5pbmRleF8gPSBQUklPUklUWV9JTkRFWDtcbiAgICB9XG4gICAgaGFzU3RhcnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXJ0U2V0XztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybnMgVHJ1ZSBpZiBpdCB3b3VsZCByZXR1cm4gZnJvbSBsZWZ0LlxuICAgICAqL1xuICAgIGlzVmlld0Zyb21MZWZ0KCkge1xuICAgICAgICBpZiAodGhpcy52aWV3RnJvbV8gPT09ICcnKSB7XG4gICAgICAgICAgICAvLyBsaW1pdCgpLCByYXRoZXIgdGhhbiBsaW1pdFRvRmlyc3Qgb3IgbGltaXRUb0xhc3Qgd2FzIGNhbGxlZC5cbiAgICAgICAgICAgIC8vIFRoaXMgbWVhbnMgdGhhdCBvbmx5IG9uZSBvZiBzdGFydFNldF8gYW5kIGVuZFNldF8gaXMgdHJ1ZS4gVXNlIHRoZW1cbiAgICAgICAgICAgIC8vIHRvIGNhbGN1bGF0ZSB3aGljaCBzaWRlIG9mIHRoZSB2aWV3IHRvIGFuY2hvciB0by4gSWYgbmVpdGhlciBpcyBzZXQsXG4gICAgICAgICAgICAvLyBhbmNob3IgdG8gdGhlIGVuZC5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXJ0U2V0XztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZXdGcm9tXyA9PT0gXCJsXCIgLyogV0lSRV9QUk9UT0NPTF9DT05TVEFOVFMuVklFV19GUk9NX0xFRlQgKi87XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogT25seSB2YWxpZCB0byBjYWxsIGlmIGhhc1N0YXJ0KCkgcmV0dXJucyB0cnVlXG4gICAgICovXG4gICAgZ2V0SW5kZXhTdGFydFZhbHVlKCkge1xuICAgICAgICBhc3NlcnQodGhpcy5zdGFydFNldF8sICdPbmx5IHZhbGlkIGlmIHN0YXJ0IGhhcyBiZWVuIHNldCcpO1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleFN0YXJ0VmFsdWVfO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBPbmx5IHZhbGlkIHRvIGNhbGwgaWYgaGFzU3RhcnQoKSByZXR1cm5zIHRydWUuXG4gICAgICogUmV0dXJucyB0aGUgc3RhcnRpbmcga2V5IG5hbWUgZm9yIHRoZSByYW5nZSBkZWZpbmVkIGJ5IHRoZXNlIHF1ZXJ5IHBhcmFtZXRlcnNcbiAgICAgKi9cbiAgICBnZXRJbmRleFN0YXJ0TmFtZSgpIHtcbiAgICAgICAgYXNzZXJ0KHRoaXMuc3RhcnRTZXRfLCAnT25seSB2YWxpZCBpZiBzdGFydCBoYXMgYmVlbiBzZXQnKTtcbiAgICAgICAgaWYgKHRoaXMuc3RhcnROYW1lU2V0Xykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXhTdGFydE5hbWVfO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIE1JTl9OQU1FO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhc0VuZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5kU2V0XztcbiAgICB9XG4gICAgLyoqXG4gICAgICogT25seSB2YWxpZCB0byBjYWxsIGlmIGhhc0VuZCgpIHJldHVybnMgdHJ1ZS5cbiAgICAgKi9cbiAgICBnZXRJbmRleEVuZFZhbHVlKCkge1xuICAgICAgICBhc3NlcnQodGhpcy5lbmRTZXRfLCAnT25seSB2YWxpZCBpZiBlbmQgaGFzIGJlZW4gc2V0Jyk7XG4gICAgICAgIHJldHVybiB0aGlzLmluZGV4RW5kVmFsdWVfO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBPbmx5IHZhbGlkIHRvIGNhbGwgaWYgaGFzRW5kKCkgcmV0dXJucyB0cnVlLlxuICAgICAqIFJldHVybnMgdGhlIGVuZCBrZXkgbmFtZSBmb3IgdGhlIHJhbmdlIGRlZmluZWQgYnkgdGhlc2UgcXVlcnkgcGFyYW1ldGVyc1xuICAgICAqL1xuICAgIGdldEluZGV4RW5kTmFtZSgpIHtcbiAgICAgICAgYXNzZXJ0KHRoaXMuZW5kU2V0XywgJ09ubHkgdmFsaWQgaWYgZW5kIGhhcyBiZWVuIHNldCcpO1xuICAgICAgICBpZiAodGhpcy5lbmROYW1lU2V0Xykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXhFbmROYW1lXztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBNQVhfTkFNRTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYXNMaW1pdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGltaXRTZXRfO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBUcnVlIGlmIGEgbGltaXQgaGFzIGJlZW4gc2V0IGFuZCBpdCBoYXMgYmVlbiBleHBsaWNpdGx5IGFuY2hvcmVkXG4gICAgICovXG4gICAgaGFzQW5jaG9yZWRMaW1pdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGltaXRTZXRfICYmIHRoaXMudmlld0Zyb21fICE9PSAnJztcbiAgICB9XG4gICAgLyoqXG4gICAgICogT25seSB2YWxpZCB0byBjYWxsIGlmIGhhc0xpbWl0KCkgcmV0dXJucyB0cnVlXG4gICAgICovXG4gICAgZ2V0TGltaXQoKSB7XG4gICAgICAgIGFzc2VydCh0aGlzLmxpbWl0U2V0XywgJ09ubHkgdmFsaWQgaWYgbGltaXQgaGFzIGJlZW4gc2V0Jyk7XG4gICAgICAgIHJldHVybiB0aGlzLmxpbWl0XztcbiAgICB9XG4gICAgZ2V0SW5kZXgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmluZGV4XztcbiAgICB9XG4gICAgbG9hZHNBbGxEYXRhKCkge1xuICAgICAgICByZXR1cm4gISh0aGlzLnN0YXJ0U2V0XyB8fCB0aGlzLmVuZFNldF8gfHwgdGhpcy5saW1pdFNldF8pO1xuICAgIH1cbiAgICBpc0RlZmF1bHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvYWRzQWxsRGF0YSgpICYmIHRoaXMuaW5kZXhfID09PSBQUklPUklUWV9JTkRFWDtcbiAgICB9XG4gICAgY29weSgpIHtcbiAgICAgICAgY29uc3QgY29weSA9IG5ldyBRdWVyeVBhcmFtcygpO1xuICAgICAgICBjb3B5LmxpbWl0U2V0XyA9IHRoaXMubGltaXRTZXRfO1xuICAgICAgICBjb3B5LmxpbWl0XyA9IHRoaXMubGltaXRfO1xuICAgICAgICBjb3B5LnN0YXJ0U2V0XyA9IHRoaXMuc3RhcnRTZXRfO1xuICAgICAgICBjb3B5LnN0YXJ0QWZ0ZXJTZXRfID0gdGhpcy5zdGFydEFmdGVyU2V0XztcbiAgICAgICAgY29weS5pbmRleFN0YXJ0VmFsdWVfID0gdGhpcy5pbmRleFN0YXJ0VmFsdWVfO1xuICAgICAgICBjb3B5LnN0YXJ0TmFtZVNldF8gPSB0aGlzLnN0YXJ0TmFtZVNldF87XG4gICAgICAgIGNvcHkuaW5kZXhTdGFydE5hbWVfID0gdGhpcy5pbmRleFN0YXJ0TmFtZV87XG4gICAgICAgIGNvcHkuZW5kU2V0XyA9IHRoaXMuZW5kU2V0XztcbiAgICAgICAgY29weS5lbmRCZWZvcmVTZXRfID0gdGhpcy5lbmRCZWZvcmVTZXRfO1xuICAgICAgICBjb3B5LmluZGV4RW5kVmFsdWVfID0gdGhpcy5pbmRleEVuZFZhbHVlXztcbiAgICAgICAgY29weS5lbmROYW1lU2V0XyA9IHRoaXMuZW5kTmFtZVNldF87XG4gICAgICAgIGNvcHkuaW5kZXhFbmROYW1lXyA9IHRoaXMuaW5kZXhFbmROYW1lXztcbiAgICAgICAgY29weS5pbmRleF8gPSB0aGlzLmluZGV4XztcbiAgICAgICAgY29weS52aWV3RnJvbV8gPSB0aGlzLnZpZXdGcm9tXztcbiAgICAgICAgcmV0dXJuIGNvcHk7XG4gICAgfVxufVxuZnVuY3Rpb24gcXVlcnlQYXJhbXNHZXROb2RlRmlsdGVyKHF1ZXJ5UGFyYW1zKSB7XG4gICAgaWYgKHF1ZXJ5UGFyYW1zLmxvYWRzQWxsRGF0YSgpKSB7XG4gICAgICAgIHJldHVybiBuZXcgSW5kZXhlZEZpbHRlcihxdWVyeVBhcmFtcy5nZXRJbmRleCgpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAocXVlcnlQYXJhbXMuaGFzTGltaXQoKSkge1xuICAgICAgICByZXR1cm4gbmV3IExpbWl0ZWRGaWx0ZXIocXVlcnlQYXJhbXMpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSYW5nZWRGaWx0ZXIocXVlcnlQYXJhbXMpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHF1ZXJ5UGFyYW1zTGltaXRUb0ZpcnN0KHF1ZXJ5UGFyYW1zLCBuZXdMaW1pdCkge1xuICAgIGNvbnN0IG5ld1BhcmFtcyA9IHF1ZXJ5UGFyYW1zLmNvcHkoKTtcbiAgICBuZXdQYXJhbXMubGltaXRTZXRfID0gdHJ1ZTtcbiAgICBuZXdQYXJhbXMubGltaXRfID0gbmV3TGltaXQ7XG4gICAgbmV3UGFyYW1zLnZpZXdGcm9tXyA9IFwibFwiIC8qIFdJUkVfUFJPVE9DT0xfQ09OU1RBTlRTLlZJRVdfRlJPTV9MRUZUICovO1xuICAgIHJldHVybiBuZXdQYXJhbXM7XG59XG5mdW5jdGlvbiBxdWVyeVBhcmFtc0xpbWl0VG9MYXN0KHF1ZXJ5UGFyYW1zLCBuZXdMaW1pdCkge1xuICAgIGNvbnN0IG5ld1BhcmFtcyA9IHF1ZXJ5UGFyYW1zLmNvcHkoKTtcbiAgICBuZXdQYXJhbXMubGltaXRTZXRfID0gdHJ1ZTtcbiAgICBuZXdQYXJhbXMubGltaXRfID0gbmV3TGltaXQ7XG4gICAgbmV3UGFyYW1zLnZpZXdGcm9tXyA9IFwiclwiIC8qIFdJUkVfUFJPVE9DT0xfQ09OU1RBTlRTLlZJRVdfRlJPTV9SSUdIVCAqLztcbiAgICByZXR1cm4gbmV3UGFyYW1zO1xufVxuZnVuY3Rpb24gcXVlcnlQYXJhbXNTdGFydEF0KHF1ZXJ5UGFyYW1zLCBpbmRleFZhbHVlLCBrZXkpIHtcbiAgICBjb25zdCBuZXdQYXJhbXMgPSBxdWVyeVBhcmFtcy5jb3B5KCk7XG4gICAgbmV3UGFyYW1zLnN0YXJ0U2V0XyA9IHRydWU7XG4gICAgaWYgKGluZGV4VmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpbmRleFZhbHVlID0gbnVsbDtcbiAgICB9XG4gICAgbmV3UGFyYW1zLmluZGV4U3RhcnRWYWx1ZV8gPSBpbmRleFZhbHVlO1xuICAgIGlmIChrZXkgIT0gbnVsbCkge1xuICAgICAgICBuZXdQYXJhbXMuc3RhcnROYW1lU2V0XyA9IHRydWU7XG4gICAgICAgIG5ld1BhcmFtcy5pbmRleFN0YXJ0TmFtZV8gPSBrZXk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBuZXdQYXJhbXMuc3RhcnROYW1lU2V0XyA9IGZhbHNlO1xuICAgICAgICBuZXdQYXJhbXMuaW5kZXhTdGFydE5hbWVfID0gJyc7XG4gICAgfVxuICAgIHJldHVybiBuZXdQYXJhbXM7XG59XG5mdW5jdGlvbiBxdWVyeVBhcmFtc1N0YXJ0QWZ0ZXIocXVlcnlQYXJhbXMsIGluZGV4VmFsdWUsIGtleSkge1xuICAgIGxldCBwYXJhbXM7XG4gICAgaWYgKHF1ZXJ5UGFyYW1zLmluZGV4XyA9PT0gS0VZX0lOREVYIHx8ICEha2V5KSB7XG4gICAgICAgIHBhcmFtcyA9IHF1ZXJ5UGFyYW1zU3RhcnRBdChxdWVyeVBhcmFtcywgaW5kZXhWYWx1ZSwga2V5KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHBhcmFtcyA9IHF1ZXJ5UGFyYW1zU3RhcnRBdChxdWVyeVBhcmFtcywgaW5kZXhWYWx1ZSwgTUFYX05BTUUpO1xuICAgIH1cbiAgICBwYXJhbXMuc3RhcnRBZnRlclNldF8gPSB0cnVlO1xuICAgIHJldHVybiBwYXJhbXM7XG59XG5mdW5jdGlvbiBxdWVyeVBhcmFtc0VuZEF0KHF1ZXJ5UGFyYW1zLCBpbmRleFZhbHVlLCBrZXkpIHtcbiAgICBjb25zdCBuZXdQYXJhbXMgPSBxdWVyeVBhcmFtcy5jb3B5KCk7XG4gICAgbmV3UGFyYW1zLmVuZFNldF8gPSB0cnVlO1xuICAgIGlmIChpbmRleFZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaW5kZXhWYWx1ZSA9IG51bGw7XG4gICAgfVxuICAgIG5ld1BhcmFtcy5pbmRleEVuZFZhbHVlXyA9IGluZGV4VmFsdWU7XG4gICAgaWYgKGtleSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG5ld1BhcmFtcy5lbmROYW1lU2V0XyA9IHRydWU7XG4gICAgICAgIG5ld1BhcmFtcy5pbmRleEVuZE5hbWVfID0ga2V5O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbmV3UGFyYW1zLmVuZE5hbWVTZXRfID0gZmFsc2U7XG4gICAgICAgIG5ld1BhcmFtcy5pbmRleEVuZE5hbWVfID0gJyc7XG4gICAgfVxuICAgIHJldHVybiBuZXdQYXJhbXM7XG59XG5mdW5jdGlvbiBxdWVyeVBhcmFtc0VuZEJlZm9yZShxdWVyeVBhcmFtcywgaW5kZXhWYWx1ZSwga2V5KSB7XG4gICAgbGV0IHBhcmFtcztcbiAgICBpZiAocXVlcnlQYXJhbXMuaW5kZXhfID09PSBLRVlfSU5ERVggfHwgISFrZXkpIHtcbiAgICAgICAgcGFyYW1zID0gcXVlcnlQYXJhbXNFbmRBdChxdWVyeVBhcmFtcywgaW5kZXhWYWx1ZSwga2V5KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHBhcmFtcyA9IHF1ZXJ5UGFyYW1zRW5kQXQocXVlcnlQYXJhbXMsIGluZGV4VmFsdWUsIE1JTl9OQU1FKTtcbiAgICB9XG4gICAgcGFyYW1zLmVuZEJlZm9yZVNldF8gPSB0cnVlO1xuICAgIHJldHVybiBwYXJhbXM7XG59XG5mdW5jdGlvbiBxdWVyeVBhcmFtc09yZGVyQnkocXVlcnlQYXJhbXMsIGluZGV4KSB7XG4gICAgY29uc3QgbmV3UGFyYW1zID0gcXVlcnlQYXJhbXMuY29weSgpO1xuICAgIG5ld1BhcmFtcy5pbmRleF8gPSBpbmRleDtcbiAgICByZXR1cm4gbmV3UGFyYW1zO1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgc2V0IG9mIFJFU1QgcXVlcnkgc3RyaW5nIHBhcmFtZXRlcnMgcmVwcmVzZW50aW5nIHRoaXMgcXVlcnkuXG4gKlxuICogQHJldHVybnMgcXVlcnkgc3RyaW5nIHBhcmFtZXRlcnNcbiAqL1xuZnVuY3Rpb24gcXVlcnlQYXJhbXNUb1Jlc3RRdWVyeVN0cmluZ1BhcmFtZXRlcnMocXVlcnlQYXJhbXMpIHtcbiAgICBjb25zdCBxcyA9IHt9O1xuICAgIGlmIChxdWVyeVBhcmFtcy5pc0RlZmF1bHQoKSkge1xuICAgICAgICByZXR1cm4gcXM7XG4gICAgfVxuICAgIGxldCBvcmRlckJ5O1xuICAgIGlmIChxdWVyeVBhcmFtcy5pbmRleF8gPT09IFBSSU9SSVRZX0lOREVYKSB7XG4gICAgICAgIG9yZGVyQnkgPSBcIiRwcmlvcml0eVwiIC8qIFJFU1RfUVVFUllfQ09OU1RBTlRTLlBSSU9SSVRZX0lOREVYICovO1xuICAgIH1cbiAgICBlbHNlIGlmIChxdWVyeVBhcmFtcy5pbmRleF8gPT09IFZBTFVFX0lOREVYKSB7XG4gICAgICAgIG9yZGVyQnkgPSBcIiR2YWx1ZVwiIC8qIFJFU1RfUVVFUllfQ09OU1RBTlRTLlZBTFVFX0lOREVYICovO1xuICAgIH1cbiAgICBlbHNlIGlmIChxdWVyeVBhcmFtcy5pbmRleF8gPT09IEtFWV9JTkRFWCkge1xuICAgICAgICBvcmRlckJ5ID0gXCIka2V5XCIgLyogUkVTVF9RVUVSWV9DT05TVEFOVFMuS0VZX0lOREVYICovO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYXNzZXJ0KHF1ZXJ5UGFyYW1zLmluZGV4XyBpbnN0YW5jZW9mIFBhdGhJbmRleCwgJ1VucmVjb2duaXplZCBpbmRleCB0eXBlIScpO1xuICAgICAgICBvcmRlckJ5ID0gcXVlcnlQYXJhbXMuaW5kZXhfLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIHFzW1wib3JkZXJCeVwiIC8qIFJFU1RfUVVFUllfQ09OU1RBTlRTLk9SREVSX0JZICovXSA9IHN0cmluZ2lmeShvcmRlckJ5KTtcbiAgICBpZiAocXVlcnlQYXJhbXMuc3RhcnRTZXRfKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0UGFyYW0gPSBxdWVyeVBhcmFtcy5zdGFydEFmdGVyU2V0X1xuICAgICAgICAgICAgPyBcInN0YXJ0QWZ0ZXJcIiAvKiBSRVNUX1FVRVJZX0NPTlNUQU5UUy5TVEFSVF9BRlRFUiAqL1xuICAgICAgICAgICAgOiBcInN0YXJ0QXRcIiAvKiBSRVNUX1FVRVJZX0NPTlNUQU5UUy5TVEFSVF9BVCAqLztcbiAgICAgICAgcXNbc3RhcnRQYXJhbV0gPSBzdHJpbmdpZnkocXVlcnlQYXJhbXMuaW5kZXhTdGFydFZhbHVlXyk7XG4gICAgICAgIGlmIChxdWVyeVBhcmFtcy5zdGFydE5hbWVTZXRfKSB7XG4gICAgICAgICAgICBxc1tzdGFydFBhcmFtXSArPSAnLCcgKyBzdHJpbmdpZnkocXVlcnlQYXJhbXMuaW5kZXhTdGFydE5hbWVfKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAocXVlcnlQYXJhbXMuZW5kU2V0Xykge1xuICAgICAgICBjb25zdCBlbmRQYXJhbSA9IHF1ZXJ5UGFyYW1zLmVuZEJlZm9yZVNldF9cbiAgICAgICAgICAgID8gXCJlbmRCZWZvcmVcIiAvKiBSRVNUX1FVRVJZX0NPTlNUQU5UUy5FTkRfQkVGT1JFICovXG4gICAgICAgICAgICA6IFwiZW5kQXRcIiAvKiBSRVNUX1FVRVJZX0NPTlNUQU5UUy5FTkRfQVQgKi87XG4gICAgICAgIHFzW2VuZFBhcmFtXSA9IHN0cmluZ2lmeShxdWVyeVBhcmFtcy5pbmRleEVuZFZhbHVlXyk7XG4gICAgICAgIGlmIChxdWVyeVBhcmFtcy5lbmROYW1lU2V0Xykge1xuICAgICAgICAgICAgcXNbZW5kUGFyYW1dICs9ICcsJyArIHN0cmluZ2lmeShxdWVyeVBhcmFtcy5pbmRleEVuZE5hbWVfKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAocXVlcnlQYXJhbXMubGltaXRTZXRfKSB7XG4gICAgICAgIGlmIChxdWVyeVBhcmFtcy5pc1ZpZXdGcm9tTGVmdCgpKSB7XG4gICAgICAgICAgICBxc1tcImxpbWl0VG9GaXJzdFwiIC8qIFJFU1RfUVVFUllfQ09OU1RBTlRTLkxJTUlUX1RPX0ZJUlNUICovXSA9IHF1ZXJ5UGFyYW1zLmxpbWl0XztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHFzW1wibGltaXRUb0xhc3RcIiAvKiBSRVNUX1FVRVJZX0NPTlNUQU5UUy5MSU1JVF9UT19MQVNUICovXSA9IHF1ZXJ5UGFyYW1zLmxpbWl0XztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcXM7XG59XG5mdW5jdGlvbiBxdWVyeVBhcmFtc0dldFF1ZXJ5T2JqZWN0KHF1ZXJ5UGFyYW1zKSB7XG4gICAgY29uc3Qgb2JqID0ge307XG4gICAgaWYgKHF1ZXJ5UGFyYW1zLnN0YXJ0U2V0Xykge1xuICAgICAgICBvYmpbXCJzcFwiIC8qIFdJUkVfUFJPVE9DT0xfQ09OU1RBTlRTLklOREVYX1NUQVJUX1ZBTFVFICovXSA9XG4gICAgICAgICAgICBxdWVyeVBhcmFtcy5pbmRleFN0YXJ0VmFsdWVfO1xuICAgICAgICBpZiAocXVlcnlQYXJhbXMuc3RhcnROYW1lU2V0Xykge1xuICAgICAgICAgICAgb2JqW1wic25cIiAvKiBXSVJFX1BST1RPQ09MX0NPTlNUQU5UUy5JTkRFWF9TVEFSVF9OQU1FICovXSA9XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbXMuaW5kZXhTdGFydE5hbWVfO1xuICAgICAgICB9XG4gICAgICAgIG9ialtcInNpblwiIC8qIFdJUkVfUFJPVE9DT0xfQ09OU1RBTlRTLklOREVYX1NUQVJUX0lTX0lOQ0xVU0lWRSAqL10gPVxuICAgICAgICAgICAgIXF1ZXJ5UGFyYW1zLnN0YXJ0QWZ0ZXJTZXRfO1xuICAgIH1cbiAgICBpZiAocXVlcnlQYXJhbXMuZW5kU2V0Xykge1xuICAgICAgICBvYmpbXCJlcFwiIC8qIFdJUkVfUFJPVE9DT0xfQ09OU1RBTlRTLklOREVYX0VORF9WQUxVRSAqL10gPSBxdWVyeVBhcmFtcy5pbmRleEVuZFZhbHVlXztcbiAgICAgICAgaWYgKHF1ZXJ5UGFyYW1zLmVuZE5hbWVTZXRfKSB7XG4gICAgICAgICAgICBvYmpbXCJlblwiIC8qIFdJUkVfUFJPVE9DT0xfQ09OU1RBTlRTLklOREVYX0VORF9OQU1FICovXSA9IHF1ZXJ5UGFyYW1zLmluZGV4RW5kTmFtZV87XG4gICAgICAgIH1cbiAgICAgICAgb2JqW1wiZWluXCIgLyogV0lSRV9QUk9UT0NPTF9DT05TVEFOVFMuSU5ERVhfRU5EX0lTX0lOQ0xVU0lWRSAqL10gPVxuICAgICAgICAgICAgIXF1ZXJ5UGFyYW1zLmVuZEJlZm9yZVNldF87XG4gICAgfVxuICAgIGlmIChxdWVyeVBhcmFtcy5saW1pdFNldF8pIHtcbiAgICAgICAgb2JqW1wibFwiIC8qIFdJUkVfUFJPVE9DT0xfQ09OU1RBTlRTLkxJTUlUICovXSA9IHF1ZXJ5UGFyYW1zLmxpbWl0XztcbiAgICAgICAgbGV0IHZpZXdGcm9tID0gcXVlcnlQYXJhbXMudmlld0Zyb21fO1xuICAgICAgICBpZiAodmlld0Zyb20gPT09ICcnKSB7XG4gICAgICAgICAgICBpZiAocXVlcnlQYXJhbXMuaXNWaWV3RnJvbUxlZnQoKSkge1xuICAgICAgICAgICAgICAgIHZpZXdGcm9tID0gXCJsXCIgLyogV0lSRV9QUk9UT0NPTF9DT05TVEFOVFMuVklFV19GUk9NX0xFRlQgKi87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2aWV3RnJvbSA9IFwiclwiIC8qIFdJUkVfUFJPVE9DT0xfQ09OU1RBTlRTLlZJRVdfRlJPTV9SSUdIVCAqLztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBvYmpbXCJ2ZlwiIC8qIFdJUkVfUFJPVE9DT0xfQ09OU1RBTlRTLlZJRVdfRlJPTSAqL10gPSB2aWV3RnJvbTtcbiAgICB9XG4gICAgLy8gRm9yIG5vdywgcHJpb3JpdHkgaW5kZXggaXMgdGhlIGRlZmF1bHQsIHNvIHdlIG9ubHkgc3BlY2lmeSBpZiBpdCdzIHNvbWUgb3RoZXIgaW5kZXhcbiAgICBpZiAocXVlcnlQYXJhbXMuaW5kZXhfICE9PSBQUklPUklUWV9JTkRFWCkge1xuICAgICAgICBvYmpbXCJpXCIgLyogV0lSRV9QUk9UT0NPTF9DT05TVEFOVFMuSU5ERVggKi9dID0gcXVlcnlQYXJhbXMuaW5kZXhfLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIFNlcnZlckFjdGlvbnMgdGhhdCBjb21tdW5pY2F0ZXMgd2l0aCB0aGUgc2VydmVyIHZpYSBSRVNUIHJlcXVlc3RzLlxuICogVGhpcyBpcyBtb3N0bHkgdXNlZnVsIGZvciBjb21wYXRpYmlsaXR5IHdpdGggY3Jhd2xlcnMsIHdoZXJlIHdlIGRvbid0IHdhbnQgdG8gc3BpbiB1cCBhIGZ1bGxcbiAqIHBlcnNpc3RlbnQgY29ubmVjdGlvbiAodXNpbmcgV2ViU29ja2V0cyBvciBsb25nLXBvbGxpbmcpXG4gKi9cbmNsYXNzIFJlYWRvbmx5UmVzdENsaWVudCBleHRlbmRzIFNlcnZlckFjdGlvbnMge1xuICAgIHJlcG9ydFN0YXRzKHN0YXRzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC4nKTtcbiAgICB9XG4gICAgc3RhdGljIGdldExpc3RlbklkXyhxdWVyeSwgdGFnKSB7XG4gICAgICAgIGlmICh0YWcgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuICd0YWckJyArIHRhZztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGFzc2VydChxdWVyeS5fcXVlcnlQYXJhbXMuaXNEZWZhdWx0KCksIFwic2hvdWxkIGhhdmUgYSB0YWcgaWYgaXQncyBub3QgYSBkZWZhdWx0IHF1ZXJ5LlwiKTtcbiAgICAgICAgICAgIHJldHVybiBxdWVyeS5fcGF0aC50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSByZXBvSW5mb18gLSBEYXRhIGFib3V0IHRoZSBuYW1lc3BhY2Ugd2UgYXJlIGNvbm5lY3RpbmcgdG9cbiAgICAgKiBAcGFyYW0gb25EYXRhVXBkYXRlXyAtIEEgY2FsbGJhY2sgZm9yIG5ldyBkYXRhIGZyb20gdGhlIHNlcnZlclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHJlcG9JbmZvXywgb25EYXRhVXBkYXRlXywgYXV0aFRva2VuUHJvdmlkZXJfLCBhcHBDaGVja1Rva2VuUHJvdmlkZXJfKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucmVwb0luZm9fID0gcmVwb0luZm9fO1xuICAgICAgICB0aGlzLm9uRGF0YVVwZGF0ZV8gPSBvbkRhdGFVcGRhdGVfO1xuICAgICAgICB0aGlzLmF1dGhUb2tlblByb3ZpZGVyXyA9IGF1dGhUb2tlblByb3ZpZGVyXztcbiAgICAgICAgdGhpcy5hcHBDaGVja1Rva2VuUHJvdmlkZXJfID0gYXBwQ2hlY2tUb2tlblByb3ZpZGVyXztcbiAgICAgICAgLyoqIEBwcml2YXRlIHtmdW5jdGlvbiguLi5bKl0pfSAqL1xuICAgICAgICB0aGlzLmxvZ18gPSBsb2dXcmFwcGVyKCdwOnJlc3Q6Jyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXZSBkb24ndCBhY3R1YWxseSBuZWVkIHRvIHRyYWNrIGxpc3RlbnMsIGV4Y2VwdCB0byBwcmV2ZW50IHVzIGNhbGxpbmcgYW4gb25Db21wbGV0ZSBmb3IgYSBsaXN0ZW5cbiAgICAgICAgICogdGhhdCdzIGJlZW4gcmVtb3ZlZC4gOi0vXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmxpc3RlbnNfID0ge307XG4gICAgfVxuICAgIC8qKiBAaW5oZXJpdERvYyAqL1xuICAgIGxpc3RlbihxdWVyeSwgY3VycmVudEhhc2hGbiwgdGFnLCBvbkNvbXBsZXRlKSB7XG4gICAgICAgIGNvbnN0IHBhdGhTdHJpbmcgPSBxdWVyeS5fcGF0aC50b1N0cmluZygpO1xuICAgICAgICB0aGlzLmxvZ18oJ0xpc3RlbiBjYWxsZWQgZm9yICcgKyBwYXRoU3RyaW5nICsgJyAnICsgcXVlcnkuX3F1ZXJ5SWRlbnRpZmllcik7XG4gICAgICAgIC8vIE1hcmsgdGhpcyBsaXN0ZW5lciBzbyB3ZSBjYW4gdGVsbCBpZiBpdCdzIHJlbW92ZWQuXG4gICAgICAgIGNvbnN0IGxpc3RlbklkID0gUmVhZG9ubHlSZXN0Q2xpZW50LmdldExpc3RlbklkXyhxdWVyeSwgdGFnKTtcbiAgICAgICAgY29uc3QgdGhpc0xpc3RlbiA9IHt9O1xuICAgICAgICB0aGlzLmxpc3RlbnNfW2xpc3RlbklkXSA9IHRoaXNMaXN0ZW47XG4gICAgICAgIGNvbnN0IHF1ZXJ5U3RyaW5nUGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1zVG9SZXN0UXVlcnlTdHJpbmdQYXJhbWV0ZXJzKHF1ZXJ5Ll9xdWVyeVBhcmFtcyk7XG4gICAgICAgIHRoaXMucmVzdFJlcXVlc3RfKHBhdGhTdHJpbmcgKyAnLmpzb24nLCBxdWVyeVN0cmluZ1BhcmFtZXRlcnMsIChlcnJvciwgcmVzdWx0KSA9PiB7XG4gICAgICAgICAgICBsZXQgZGF0YSA9IHJlc3VsdDtcbiAgICAgICAgICAgIGlmIChlcnJvciA9PT0gNDA0KSB7XG4gICAgICAgICAgICAgICAgZGF0YSA9IG51bGw7XG4gICAgICAgICAgICAgICAgZXJyb3IgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVycm9yID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkRhdGFVcGRhdGVfKHBhdGhTdHJpbmcsIGRhdGEsIC8qaXNNZXJnZT0qLyBmYWxzZSwgdGFnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzYWZlR2V0KHRoaXMubGlzdGVuc18sIGxpc3RlbklkKSA9PT0gdGhpc0xpc3Rlbikge1xuICAgICAgICAgICAgICAgIGxldCBzdGF0dXM7XG4gICAgICAgICAgICAgICAgaWYgKCFlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPSAnb2snO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChlcnJvciA9PT0gNDAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9ICdwZXJtaXNzaW9uX2RlbmllZCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPSAncmVzdF9lcnJvcjonICsgZXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9uQ29tcGxldGUoc3RhdHVzLCBudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKiBAaW5oZXJpdERvYyAqL1xuICAgIHVubGlzdGVuKHF1ZXJ5LCB0YWcpIHtcbiAgICAgICAgY29uc3QgbGlzdGVuSWQgPSBSZWFkb25seVJlc3RDbGllbnQuZ2V0TGlzdGVuSWRfKHF1ZXJ5LCB0YWcpO1xuICAgICAgICBkZWxldGUgdGhpcy5saXN0ZW5zX1tsaXN0ZW5JZF07XG4gICAgfVxuICAgIGdldChxdWVyeSkge1xuICAgICAgICBjb25zdCBxdWVyeVN0cmluZ1BhcmFtZXRlcnMgPSBxdWVyeVBhcmFtc1RvUmVzdFF1ZXJ5U3RyaW5nUGFyYW1ldGVycyhxdWVyeS5fcXVlcnlQYXJhbXMpO1xuICAgICAgICBjb25zdCBwYXRoU3RyaW5nID0gcXVlcnkuX3BhdGgudG9TdHJpbmcoKTtcbiAgICAgICAgY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgdGhpcy5yZXN0UmVxdWVzdF8ocGF0aFN0cmluZyArICcuanNvbicsIHF1ZXJ5U3RyaW5nUGFyYW1ldGVycywgKGVycm9yLCByZXN1bHQpID0+IHtcbiAgICAgICAgICAgIGxldCBkYXRhID0gcmVzdWx0O1xuICAgICAgICAgICAgaWYgKGVycm9yID09PSA0MDQpIHtcbiAgICAgICAgICAgICAgICBkYXRhID0gbnVsbDtcbiAgICAgICAgICAgICAgICBlcnJvciA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZXJyb3IgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uRGF0YVVwZGF0ZV8ocGF0aFN0cmluZywgZGF0YSwgXG4gICAgICAgICAgICAgICAgLyppc01lcmdlPSovIGZhbHNlLCBcbiAgICAgICAgICAgICAgICAvKnRhZz0qLyBudWxsKTtcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KG5ldyBFcnJvcihkYXRhKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9XG4gICAgLyoqIEBpbmhlcml0RG9jICovXG4gICAgcmVmcmVzaEF1dGhUb2tlbih0b2tlbikge1xuICAgICAgICAvLyBuby1vcCBzaW5jZSB3ZSBqdXN0IGFsd2F5cyBjYWxsIGdldFRva2VuLlxuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBhIFJFU1QgcmVxdWVzdCB0byB0aGUgZ2l2ZW4gcGF0aCwgd2l0aCB0aGUgcHJvdmlkZWQgcXVlcnkgc3RyaW5nIHBhcmFtZXRlcnMsXG4gICAgICogYW5kIGFueSBhdXRoIGNyZWRlbnRpYWxzIHdlIGhhdmUuXG4gICAgICovXG4gICAgcmVzdFJlcXVlc3RfKHBhdGhTdHJpbmcsIHF1ZXJ5U3RyaW5nUGFyYW1ldGVycyA9IHt9LCBjYWxsYmFjaykge1xuICAgICAgICBxdWVyeVN0cmluZ1BhcmFtZXRlcnNbJ2Zvcm1hdCddID0gJ2V4cG9ydCc7XG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICB0aGlzLmF1dGhUb2tlblByb3ZpZGVyXy5nZXRUb2tlbigvKmZvcmNlUmVmcmVzaD0qLyBmYWxzZSksXG4gICAgICAgICAgICB0aGlzLmFwcENoZWNrVG9rZW5Qcm92aWRlcl8uZ2V0VG9rZW4oLypmb3JjZVJlZnJlc2g9Ki8gZmFsc2UpXG4gICAgICAgIF0pLnRoZW4oKFthdXRoVG9rZW4sIGFwcENoZWNrVG9rZW5dKSA9PiB7XG4gICAgICAgICAgICBpZiAoYXV0aFRva2VuICYmIGF1dGhUb2tlbi5hY2Nlc3NUb2tlbikge1xuICAgICAgICAgICAgICAgIHF1ZXJ5U3RyaW5nUGFyYW1ldGVyc1snYXV0aCddID0gYXV0aFRva2VuLmFjY2Vzc1Rva2VuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFwcENoZWNrVG9rZW4gJiYgYXBwQ2hlY2tUb2tlbi50b2tlbikge1xuICAgICAgICAgICAgICAgIHF1ZXJ5U3RyaW5nUGFyYW1ldGVyc1snYWMnXSA9IGFwcENoZWNrVG9rZW4udG9rZW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1cmwgPSAodGhpcy5yZXBvSW5mb18uc2VjdXJlID8gJ2h0dHBzOi8vJyA6ICdodHRwOi8vJykgK1xuICAgICAgICAgICAgICAgIHRoaXMucmVwb0luZm9fLmhvc3QgK1xuICAgICAgICAgICAgICAgIHBhdGhTdHJpbmcgK1xuICAgICAgICAgICAgICAgICc/JyArXG4gICAgICAgICAgICAgICAgJ25zPScgK1xuICAgICAgICAgICAgICAgIHRoaXMucmVwb0luZm9fLm5hbWVzcGFjZSArXG4gICAgICAgICAgICAgICAgcXVlcnlzdHJpbmcocXVlcnlTdHJpbmdQYXJhbWV0ZXJzKTtcbiAgICAgICAgICAgIHRoaXMubG9nXygnU2VuZGluZyBSRVNUIHJlcXVlc3QgZm9yICcgKyB1cmwpO1xuICAgICAgICAgICAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayAmJiB4aHIucmVhZHlTdGF0ZSA9PT0gNCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ18oJ1JFU1QgUmVzcG9uc2UgZm9yICcgKyB1cmwgKyAnIHJlY2VpdmVkLiBzdGF0dXM6JywgeGhyLnN0YXR1cywgJ3Jlc3BvbnNlOicsIHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcmVzID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHhoci5zdGF0dXMgPj0gMjAwICYmIHhoci5zdGF0dXMgPCAzMDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0ganNvbkV2YWwoeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oJ0ZhaWxlZCB0byBwYXJzZSBKU09OIHJlc3BvbnNlIGZvciAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzogJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDQwMSBhbmQgNDA0IGFyZSBleHBlY3RlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4aHIuc3RhdHVzICE9PSA0MDEgJiYgeGhyLnN0YXR1cyAhPT0gNDA0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FybignR290IHVuc3VjY2Vzc2Z1bCBSRVNUIHJlc3BvbnNlIGZvciAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyBTdGF0dXM6ICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHIuc3RhdHVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHhoci5zdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCwgLyphc3luY2hyb25vdXM9Ki8gdHJ1ZSk7XG4gICAgICAgICAgICB4aHIuc2VuZCgpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIE11dGFibGUgb2JqZWN0IHdoaWNoIGJhc2ljYWxseSBqdXN0IHN0b3JlcyBhIHJlZmVyZW5jZSB0byB0aGUgXCJsYXRlc3RcIiBpbW11dGFibGUgc25hcHNob3QuXG4gKi9cbmNsYXNzIFNuYXBzaG90SG9sZGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5yb290Tm9kZV8gPSBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERTtcbiAgICB9XG4gICAgZ2V0Tm9kZShwYXRoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3ROb2RlXy5nZXRDaGlsZChwYXRoKTtcbiAgICB9XG4gICAgdXBkYXRlU25hcHNob3QocGF0aCwgbmV3U25hcHNob3ROb2RlKSB7XG4gICAgICAgIHRoaXMucm9vdE5vZGVfID0gdGhpcy5yb290Tm9kZV8udXBkYXRlQ2hpbGQocGF0aCwgbmV3U25hcHNob3ROb2RlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5mdW5jdGlvbiBuZXdTcGFyc2VTbmFwc2hvdFRyZWUoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIGNoaWxkcmVuOiBuZXcgTWFwKClcbiAgICB9O1xufVxuLyoqXG4gKiBTdG9yZXMgdGhlIGdpdmVuIG5vZGUgYXQgdGhlIHNwZWNpZmllZCBwYXRoLiBJZiB0aGVyZSBpcyBhbHJlYWR5IGEgbm9kZVxuICogYXQgYSBzaGFsbG93ZXIgcGF0aCwgaXQgbWVyZ2VzIHRoZSBuZXcgZGF0YSBpbnRvIHRoYXQgc25hcHNob3Qgbm9kZS5cbiAqXG4gKiBAcGFyYW0gcGF0aCAtIFBhdGggdG8gbG9vayB1cCBzbmFwc2hvdCBmb3IuXG4gKiBAcGFyYW0gZGF0YSAtIFRoZSBuZXcgZGF0YSwgb3IgbnVsbC5cbiAqL1xuZnVuY3Rpb24gc3BhcnNlU25hcHNob3RUcmVlUmVtZW1iZXIoc3BhcnNlU25hcHNob3RUcmVlLCBwYXRoLCBkYXRhKSB7XG4gICAgaWYgKHBhdGhJc0VtcHR5KHBhdGgpKSB7XG4gICAgICAgIHNwYXJzZVNuYXBzaG90VHJlZS52YWx1ZSA9IGRhdGE7XG4gICAgICAgIHNwYXJzZVNuYXBzaG90VHJlZS5jaGlsZHJlbi5jbGVhcigpO1xuICAgIH1cbiAgICBlbHNlIGlmIChzcGFyc2VTbmFwc2hvdFRyZWUudmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgc3BhcnNlU25hcHNob3RUcmVlLnZhbHVlID0gc3BhcnNlU25hcHNob3RUcmVlLnZhbHVlLnVwZGF0ZUNoaWxkKHBhdGgsIGRhdGEpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgY2hpbGRLZXkgPSBwYXRoR2V0RnJvbnQocGF0aCk7XG4gICAgICAgIGlmICghc3BhcnNlU25hcHNob3RUcmVlLmNoaWxkcmVuLmhhcyhjaGlsZEtleSkpIHtcbiAgICAgICAgICAgIHNwYXJzZVNuYXBzaG90VHJlZS5jaGlsZHJlbi5zZXQoY2hpbGRLZXksIG5ld1NwYXJzZVNuYXBzaG90VHJlZSgpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjaGlsZCA9IHNwYXJzZVNuYXBzaG90VHJlZS5jaGlsZHJlbi5nZXQoY2hpbGRLZXkpO1xuICAgICAgICBwYXRoID0gcGF0aFBvcEZyb250KHBhdGgpO1xuICAgICAgICBzcGFyc2VTbmFwc2hvdFRyZWVSZW1lbWJlcihjaGlsZCwgcGF0aCwgZGF0YSk7XG4gICAgfVxufVxuLyoqXG4gKiBQdXJnZSB0aGUgZGF0YSBhdCBwYXRoIGZyb20gdGhlIGNhY2hlLlxuICpcbiAqIEBwYXJhbSBwYXRoIC0gUGF0aCB0byBsb29rIHVwIHNuYXBzaG90IGZvci5cbiAqIEByZXR1cm5zIFRydWUgaWYgdGhpcyBub2RlIHNob3VsZCBub3cgYmUgcmVtb3ZlZC5cbiAqL1xuZnVuY3Rpb24gc3BhcnNlU25hcHNob3RUcmVlRm9yZ2V0KHNwYXJzZVNuYXBzaG90VHJlZSwgcGF0aCkge1xuICAgIGlmIChwYXRoSXNFbXB0eShwYXRoKSkge1xuICAgICAgICBzcGFyc2VTbmFwc2hvdFRyZWUudmFsdWUgPSBudWxsO1xuICAgICAgICBzcGFyc2VTbmFwc2hvdFRyZWUuY2hpbGRyZW4uY2xlYXIoKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoc3BhcnNlU25hcHNob3RUcmVlLnZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoc3BhcnNlU25hcHNob3RUcmVlLnZhbHVlLmlzTGVhZk5vZGUoKSkge1xuICAgICAgICAgICAgICAgIC8vIFdlJ3JlIHRyeWluZyB0byBmb3JnZXQgYSBub2RlIHRoYXQgZG9lc24ndCBleGlzdFxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gc3BhcnNlU25hcHNob3RUcmVlLnZhbHVlO1xuICAgICAgICAgICAgICAgIHNwYXJzZVNuYXBzaG90VHJlZS52YWx1ZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgdmFsdWUuZm9yRWFjaENoaWxkKFBSSU9SSVRZX0lOREVYLCAoa2V5LCB0cmVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNwYXJzZVNuYXBzaG90VHJlZVJlbWVtYmVyKHNwYXJzZVNuYXBzaG90VHJlZSwgbmV3IFBhdGgoa2V5KSwgdHJlZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNwYXJzZVNuYXBzaG90VHJlZUZvcmdldChzcGFyc2VTbmFwc2hvdFRyZWUsIHBhdGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNwYXJzZVNuYXBzaG90VHJlZS5jaGlsZHJlbi5zaXplID4gMCkge1xuICAgICAgICAgICAgY29uc3QgY2hpbGRLZXkgPSBwYXRoR2V0RnJvbnQocGF0aCk7XG4gICAgICAgICAgICBwYXRoID0gcGF0aFBvcEZyb250KHBhdGgpO1xuICAgICAgICAgICAgaWYgKHNwYXJzZVNuYXBzaG90VHJlZS5jaGlsZHJlbi5oYXMoY2hpbGRLZXkpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2FmZVRvUmVtb3ZlID0gc3BhcnNlU25hcHNob3RUcmVlRm9yZ2V0KHNwYXJzZVNuYXBzaG90VHJlZS5jaGlsZHJlbi5nZXQoY2hpbGRLZXkpLCBwYXRoKTtcbiAgICAgICAgICAgICAgICBpZiAoc2FmZVRvUmVtb3ZlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNwYXJzZVNuYXBzaG90VHJlZS5jaGlsZHJlbi5kZWxldGUoY2hpbGRLZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzcGFyc2VTbmFwc2hvdFRyZWUuY2hpbGRyZW4uc2l6ZSA9PT0gMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBSZWN1cnNpdmVseSBpdGVyYXRlcyB0aHJvdWdoIGFsbCBvZiB0aGUgc3RvcmVkIHRyZWUgYW5kIGNhbGxzIHRoZVxuICogY2FsbGJhY2sgb24gZWFjaCBvbmUuXG4gKlxuICogQHBhcmFtIHByZWZpeFBhdGggLSBQYXRoIHRvIGxvb2sgdXAgbm9kZSBmb3IuXG4gKiBAcGFyYW0gZnVuYyAtIFRoZSBmdW5jdGlvbiB0byBpbnZva2UgZm9yIGVhY2ggdHJlZS5cbiAqL1xuZnVuY3Rpb24gc3BhcnNlU25hcHNob3RUcmVlRm9yRWFjaFRyZWUoc3BhcnNlU25hcHNob3RUcmVlLCBwcmVmaXhQYXRoLCBmdW5jKSB7XG4gICAgaWYgKHNwYXJzZVNuYXBzaG90VHJlZS52YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICBmdW5jKHByZWZpeFBhdGgsIHNwYXJzZVNuYXBzaG90VHJlZS52YWx1ZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBzcGFyc2VTbmFwc2hvdFRyZWVGb3JFYWNoQ2hpbGQoc3BhcnNlU25hcHNob3RUcmVlLCAoa2V5LCB0cmVlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwYXRoID0gbmV3IFBhdGgocHJlZml4UGF0aC50b1N0cmluZygpICsgJy8nICsga2V5KTtcbiAgICAgICAgICAgIHNwYXJzZVNuYXBzaG90VHJlZUZvckVhY2hUcmVlKHRyZWUsIHBhdGgsIGZ1bmMpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4vKipcbiAqIEl0ZXJhdGVzIHRocm91Z2ggZWFjaCBpbW1lZGlhdGUgY2hpbGQgYW5kIHRyaWdnZXJzIHRoZSBjYWxsYmFjay5cbiAqIE9ubHkgc2VlbXMgdG8gYmUgdXNlZCBpbiB0ZXN0cy5cbiAqXG4gKiBAcGFyYW0gZnVuYyAtIFRoZSBmdW5jdGlvbiB0byBpbnZva2UgZm9yIGVhY2ggY2hpbGQuXG4gKi9cbmZ1bmN0aW9uIHNwYXJzZVNuYXBzaG90VHJlZUZvckVhY2hDaGlsZChzcGFyc2VTbmFwc2hvdFRyZWUsIGZ1bmMpIHtcbiAgICBzcGFyc2VTbmFwc2hvdFRyZWUuY2hpbGRyZW4uZm9yRWFjaCgodHJlZSwga2V5KSA9PiB7XG4gICAgICAgIGZ1bmMoa2V5LCB0cmVlKTtcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmV0dXJucyB0aGUgZGVsdGEgZnJvbSB0aGUgcHJldmlvdXMgY2FsbCB0byBnZXQgc3RhdHMuXG4gKlxuICogQHBhcmFtIGNvbGxlY3Rpb25fIC0gVGhlIGNvbGxlY3Rpb24gdG8gXCJsaXN0ZW5cIiB0by5cbiAqL1xuY2xhc3MgU3RhdHNMaXN0ZW5lciB7XG4gICAgY29uc3RydWN0b3IoY29sbGVjdGlvbl8pIHtcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uXyA9IGNvbGxlY3Rpb25fO1xuICAgICAgICB0aGlzLmxhc3RfID0gbnVsbDtcbiAgICB9XG4gICAgZ2V0KCkge1xuICAgICAgICBjb25zdCBuZXdTdGF0cyA9IHRoaXMuY29sbGVjdGlvbl8uZ2V0KCk7XG4gICAgICAgIGNvbnN0IGRlbHRhID0gT2JqZWN0LmFzc2lnbih7fSwgbmV3U3RhdHMpO1xuICAgICAgICBpZiAodGhpcy5sYXN0Xykge1xuICAgICAgICAgICAgZWFjaCh0aGlzLmxhc3RfLCAoc3RhdCwgdmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICBkZWx0YVtzdGF0XSA9IGRlbHRhW3N0YXRdIC0gdmFsdWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhc3RfID0gbmV3U3RhdHM7XG4gICAgICAgIHJldHVybiBkZWx0YTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBBc3N1bWluZyBzb21lIGFwcHMgbWF5IGhhdmUgYSBzaG9ydCBhbW91bnQgb2YgdGltZSBvbiBwYWdlLCBhbmQgYSBidWxrIG9mIGZpcmViYXNlIG9wZXJhdGlvbnMgcHJvYmFibHlcbi8vIGhhcHBlbiBvbiBwYWdlIGxvYWQsIHdlIHRyeSB0byByZXBvcnQgb3VyIGZpcnN0IHNldCBvZiBzdGF0cyBwcmV0dHkgcXVpY2tseSwgYnV0IHdlIHdhaXQgYXQgbGVhc3QgMTBcbi8vIHNlY29uZHMgdG8gdHJ5IHRvIGVuc3VyZSB0aGUgRmlyZWJhc2UgY29ubmVjdGlvbiBpcyBlc3RhYmxpc2hlZCAvIHNldHRsZWQuXG5jb25zdCBGSVJTVF9TVEFUU19NSU5fVElNRSA9IDEwICogMTAwMDtcbmNvbnN0IEZJUlNUX1NUQVRTX01BWF9USU1FID0gMzAgKiAxMDAwO1xuLy8gV2UnbGwgY29udGludWUgdG8gcmVwb3J0IHN0YXRzIG9uIGF2ZXJhZ2UgZXZlcnkgNSBtaW51dGVzLlxuY29uc3QgUkVQT1JUX1NUQVRTX0lOVEVSVkFMID0gNSAqIDYwICogMTAwMDtcbmNsYXNzIFN0YXRzUmVwb3J0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGNvbGxlY3Rpb24sIHNlcnZlcl8pIHtcbiAgICAgICAgdGhpcy5zZXJ2ZXJfID0gc2VydmVyXztcbiAgICAgICAgdGhpcy5zdGF0c1RvUmVwb3J0XyA9IHt9O1xuICAgICAgICB0aGlzLnN0YXRzTGlzdGVuZXJfID0gbmV3IFN0YXRzTGlzdGVuZXIoY29sbGVjdGlvbik7XG4gICAgICAgIGNvbnN0IHRpbWVvdXQgPSBGSVJTVF9TVEFUU19NSU5fVElNRSArXG4gICAgICAgICAgICAoRklSU1RfU1RBVFNfTUFYX1RJTUUgLSBGSVJTVF9TVEFUU19NSU5fVElNRSkgKiBNYXRoLnJhbmRvbSgpO1xuICAgICAgICBzZXRUaW1lb3V0Tm9uQmxvY2tpbmcodGhpcy5yZXBvcnRTdGF0c18uYmluZCh0aGlzKSwgTWF0aC5mbG9vcih0aW1lb3V0KSk7XG4gICAgfVxuICAgIHJlcG9ydFN0YXRzXygpIHtcbiAgICAgICAgY29uc3Qgc3RhdHMgPSB0aGlzLnN0YXRzTGlzdGVuZXJfLmdldCgpO1xuICAgICAgICBjb25zdCByZXBvcnRlZFN0YXRzID0ge307XG4gICAgICAgIGxldCBoYXZlU3RhdHNUb1JlcG9ydCA9IGZhbHNlO1xuICAgICAgICBlYWNoKHN0YXRzLCAoc3RhdCwgdmFsdWUpID0+IHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA+IDAgJiYgY29udGFpbnModGhpcy5zdGF0c1RvUmVwb3J0Xywgc3RhdCkpIHtcbiAgICAgICAgICAgICAgICByZXBvcnRlZFN0YXRzW3N0YXRdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgaGF2ZVN0YXRzVG9SZXBvcnQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGhhdmVTdGF0c1RvUmVwb3J0KSB7XG4gICAgICAgICAgICB0aGlzLnNlcnZlcl8ucmVwb3J0U3RhdHMocmVwb3J0ZWRTdGF0cyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcXVldWUgb3VyIG5leHQgcnVuLlxuICAgICAgICBzZXRUaW1lb3V0Tm9uQmxvY2tpbmcodGhpcy5yZXBvcnRTdGF0c18uYmluZCh0aGlzKSwgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMiAqIFJFUE9SVF9TVEFUU19JTlRFUlZBTCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICpcbiAqIEBlbnVtXG4gKi9cbnZhciBPcGVyYXRpb25UeXBlO1xuKGZ1bmN0aW9uIChPcGVyYXRpb25UeXBlKSB7XG4gICAgT3BlcmF0aW9uVHlwZVtPcGVyYXRpb25UeXBlW1wiT1ZFUldSSVRFXCJdID0gMF0gPSBcIk9WRVJXUklURVwiO1xuICAgIE9wZXJhdGlvblR5cGVbT3BlcmF0aW9uVHlwZVtcIk1FUkdFXCJdID0gMV0gPSBcIk1FUkdFXCI7XG4gICAgT3BlcmF0aW9uVHlwZVtPcGVyYXRpb25UeXBlW1wiQUNLX1VTRVJfV1JJVEVcIl0gPSAyXSA9IFwiQUNLX1VTRVJfV1JJVEVcIjtcbiAgICBPcGVyYXRpb25UeXBlW09wZXJhdGlvblR5cGVbXCJMSVNURU5fQ09NUExFVEVcIl0gPSAzXSA9IFwiTElTVEVOX0NPTVBMRVRFXCI7XG59KShPcGVyYXRpb25UeXBlIHx8IChPcGVyYXRpb25UeXBlID0ge30pKTtcbmZ1bmN0aW9uIG5ld09wZXJhdGlvblNvdXJjZVVzZXIoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZnJvbVVzZXI6IHRydWUsXG4gICAgICAgIGZyb21TZXJ2ZXI6IGZhbHNlLFxuICAgICAgICBxdWVyeUlkOiBudWxsLFxuICAgICAgICB0YWdnZWQ6IGZhbHNlXG4gICAgfTtcbn1cbmZ1bmN0aW9uIG5ld09wZXJhdGlvblNvdXJjZVNlcnZlcigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBmcm9tVXNlcjogZmFsc2UsXG4gICAgICAgIGZyb21TZXJ2ZXI6IHRydWUsXG4gICAgICAgIHF1ZXJ5SWQ6IG51bGwsXG4gICAgICAgIHRhZ2dlZDogZmFsc2VcbiAgICB9O1xufVxuZnVuY3Rpb24gbmV3T3BlcmF0aW9uU291cmNlU2VydmVyVGFnZ2VkUXVlcnkocXVlcnlJZCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGZyb21Vc2VyOiBmYWxzZSxcbiAgICAgICAgZnJvbVNlcnZlcjogdHJ1ZSxcbiAgICAgICAgcXVlcnlJZCxcbiAgICAgICAgdGFnZ2VkOiB0cnVlXG4gICAgfTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNsYXNzIEFja1VzZXJXcml0ZSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGFmZmVjdGVkVHJlZSAtIEEgdHJlZSBjb250YWluaW5nIHRydWUgZm9yIGVhY2ggYWZmZWN0ZWQgcGF0aC4gQWZmZWN0ZWQgcGF0aHMgY2FuJ3Qgb3ZlcmxhcC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogQGluaGVyaXREb2MgKi8gcGF0aCwgXG4gICAgLyoqIEBpbmhlcml0RG9jICovIGFmZmVjdGVkVHJlZSwgXG4gICAgLyoqIEBpbmhlcml0RG9jICovIHJldmVydCkge1xuICAgICAgICB0aGlzLnBhdGggPSBwYXRoO1xuICAgICAgICB0aGlzLmFmZmVjdGVkVHJlZSA9IGFmZmVjdGVkVHJlZTtcbiAgICAgICAgdGhpcy5yZXZlcnQgPSByZXZlcnQ7XG4gICAgICAgIC8qKiBAaW5oZXJpdERvYyAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBPcGVyYXRpb25UeXBlLkFDS19VU0VSX1dSSVRFO1xuICAgICAgICAvKiogQGluaGVyaXREb2MgKi9cbiAgICAgICAgdGhpcy5zb3VyY2UgPSBuZXdPcGVyYXRpb25Tb3VyY2VVc2VyKCk7XG4gICAgfVxuICAgIG9wZXJhdGlvbkZvckNoaWxkKGNoaWxkTmFtZSkge1xuICAgICAgICBpZiAoIXBhdGhJc0VtcHR5KHRoaXMucGF0aCkpIHtcbiAgICAgICAgICAgIGFzc2VydChwYXRoR2V0RnJvbnQodGhpcy5wYXRoKSA9PT0gY2hpbGROYW1lLCAnb3BlcmF0aW9uRm9yQ2hpbGQgY2FsbGVkIGZvciB1bnJlbGF0ZWQgY2hpbGQuJyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEFja1VzZXJXcml0ZShwYXRoUG9wRnJvbnQodGhpcy5wYXRoKSwgdGhpcy5hZmZlY3RlZFRyZWUsIHRoaXMucmV2ZXJ0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmFmZmVjdGVkVHJlZS52YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICBhc3NlcnQodGhpcy5hZmZlY3RlZFRyZWUuY2hpbGRyZW4uaXNFbXB0eSgpLCAnYWZmZWN0ZWRUcmVlIHNob3VsZCBub3QgaGF2ZSBvdmVybGFwcGluZyBhZmZlY3RlZCBwYXRocy4nKTtcbiAgICAgICAgICAgIC8vIEFsbCBjaGlsZCBsb2NhdGlvbnMgYXJlIGFmZmVjdGVkIGFzIHdlbGw7IGp1c3QgcmV0dXJuIHNhbWUgb3BlcmF0aW9uLlxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBjaGlsZFRyZWUgPSB0aGlzLmFmZmVjdGVkVHJlZS5zdWJ0cmVlKG5ldyBQYXRoKGNoaWxkTmFtZSkpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBBY2tVc2VyV3JpdGUobmV3RW1wdHlQYXRoKCksIGNoaWxkVHJlZSwgdGhpcy5yZXZlcnQpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY2xhc3MgTGlzdGVuQ29tcGxldGUge1xuICAgIGNvbnN0cnVjdG9yKHNvdXJjZSwgcGF0aCkge1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgdGhpcy5wYXRoID0gcGF0aDtcbiAgICAgICAgLyoqIEBpbmhlcml0RG9jICovXG4gICAgICAgIHRoaXMudHlwZSA9IE9wZXJhdGlvblR5cGUuTElTVEVOX0NPTVBMRVRFO1xuICAgIH1cbiAgICBvcGVyYXRpb25Gb3JDaGlsZChjaGlsZE5hbWUpIHtcbiAgICAgICAgaWYgKHBhdGhJc0VtcHR5KHRoaXMucGF0aCkpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTGlzdGVuQ29tcGxldGUodGhpcy5zb3VyY2UsIG5ld0VtcHR5UGF0aCgpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTGlzdGVuQ29tcGxldGUodGhpcy5zb3VyY2UsIHBhdGhQb3BGcm9udCh0aGlzLnBhdGgpKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNsYXNzIE92ZXJ3cml0ZSB7XG4gICAgY29uc3RydWN0b3Ioc291cmNlLCBwYXRoLCBzbmFwKSB7XG4gICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgICB0aGlzLnBhdGggPSBwYXRoO1xuICAgICAgICB0aGlzLnNuYXAgPSBzbmFwO1xuICAgICAgICAvKiogQGluaGVyaXREb2MgKi9cbiAgICAgICAgdGhpcy50eXBlID0gT3BlcmF0aW9uVHlwZS5PVkVSV1JJVEU7XG4gICAgfVxuICAgIG9wZXJhdGlvbkZvckNoaWxkKGNoaWxkTmFtZSkge1xuICAgICAgICBpZiAocGF0aElzRW1wdHkodGhpcy5wYXRoKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBPdmVyd3JpdGUodGhpcy5zb3VyY2UsIG5ld0VtcHR5UGF0aCgpLCB0aGlzLnNuYXAuZ2V0SW1tZWRpYXRlQ2hpbGQoY2hpbGROYW1lKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE92ZXJ3cml0ZSh0aGlzLnNvdXJjZSwgcGF0aFBvcEZyb250KHRoaXMucGF0aCksIHRoaXMuc25hcCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jbGFzcyBNZXJnZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIEBpbmhlcml0RG9jICovIHNvdXJjZSwgXG4gICAgLyoqIEBpbmhlcml0RG9jICovIHBhdGgsIFxuICAgIC8qKiBAaW5oZXJpdERvYyAqLyBjaGlsZHJlbikge1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgdGhpcy5wYXRoID0gcGF0aDtcbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9IGNoaWxkcmVuO1xuICAgICAgICAvKiogQGluaGVyaXREb2MgKi9cbiAgICAgICAgdGhpcy50eXBlID0gT3BlcmF0aW9uVHlwZS5NRVJHRTtcbiAgICB9XG4gICAgb3BlcmF0aW9uRm9yQ2hpbGQoY2hpbGROYW1lKSB7XG4gICAgICAgIGlmIChwYXRoSXNFbXB0eSh0aGlzLnBhdGgpKSB7XG4gICAgICAgICAgICBjb25zdCBjaGlsZFRyZWUgPSB0aGlzLmNoaWxkcmVuLnN1YnRyZWUobmV3IFBhdGgoY2hpbGROYW1lKSk7XG4gICAgICAgICAgICBpZiAoY2hpbGRUcmVlLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgY2hpbGQgaXMgdW5hZmZlY3RlZFxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hpbGRUcmVlLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSBhIHNuYXBzaG90IGZvciB0aGUgY2hpbGQgaW4gcXVlc3Rpb24uICBUaGlzIGJlY29tZXMgYW4gb3ZlcndyaXRlIG9mIHRoZSBjaGlsZC5cbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE92ZXJ3cml0ZSh0aGlzLnNvdXJjZSwgbmV3RW1wdHlQYXRoKCksIGNoaWxkVHJlZS52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGEgbWVyZ2UgYXQgYSBkZWVwZXIgbGV2ZWxcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE1lcmdlKHRoaXMuc291cmNlLCBuZXdFbXB0eVBhdGgoKSwgY2hpbGRUcmVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGFzc2VydChwYXRoR2V0RnJvbnQodGhpcy5wYXRoKSA9PT0gY2hpbGROYW1lLCBcIkNhbid0IGdldCBhIG1lcmdlIGZvciBhIGNoaWxkIG5vdCBvbiB0aGUgcGF0aCBvZiB0aGUgb3BlcmF0aW9uXCIpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBNZXJnZSh0aGlzLnNvdXJjZSwgcGF0aFBvcEZyb250KHRoaXMucGF0aCksIHRoaXMuY2hpbGRyZW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gKCdPcGVyYXRpb24oJyArXG4gICAgICAgICAgICB0aGlzLnBhdGggK1xuICAgICAgICAgICAgJzogJyArXG4gICAgICAgICAgICB0aGlzLnNvdXJjZS50b1N0cmluZygpICtcbiAgICAgICAgICAgICcgbWVyZ2U6ICcgK1xuICAgICAgICAgICAgdGhpcy5jaGlsZHJlbi50b1N0cmluZygpICtcbiAgICAgICAgICAgICcpJyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGNhY2hlIG5vZGUgb25seSBzdG9yZXMgY29tcGxldGUgY2hpbGRyZW4uIEFkZGl0aW9uYWxseSBpdCBob2xkcyBhIGZsYWcgd2hldGhlciB0aGUgbm9kZSBjYW4gYmUgY29uc2lkZXJlZCBmdWxseVxuICogaW5pdGlhbGl6ZWQgaW4gdGhlIHNlbnNlIHRoYXQgd2Uga25vdyBhdCBvbmUgcG9pbnQgaW4gdGltZSB0aGlzIHJlcHJlc2VudGVkIGEgdmFsaWQgc3RhdGUgb2YgdGhlIHdvcmxkLCBlLmcuXG4gKiBpbml0aWFsaXplZCB3aXRoIGRhdGEgZnJvbSB0aGUgc2VydmVyLCBvciBhIGNvbXBsZXRlIG92ZXJ3cml0ZSBieSB0aGUgY2xpZW50LiBUaGUgZmlsdGVyZWQgZmxhZyBhbHNvIHRyYWNrc1xuICogd2hldGhlciBhIG5vZGUgcG90ZW50aWFsbHkgaGFkIGNoaWxkcmVuIHJlbW92ZWQgZHVlIHRvIGEgZmlsdGVyLlxuICovXG5jbGFzcyBDYWNoZU5vZGUge1xuICAgIGNvbnN0cnVjdG9yKG5vZGVfLCBmdWxseUluaXRpYWxpemVkXywgZmlsdGVyZWRfKSB7XG4gICAgICAgIHRoaXMubm9kZV8gPSBub2RlXztcbiAgICAgICAgdGhpcy5mdWxseUluaXRpYWxpemVkXyA9IGZ1bGx5SW5pdGlhbGl6ZWRfO1xuICAgICAgICB0aGlzLmZpbHRlcmVkXyA9IGZpbHRlcmVkXztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoaXMgbm9kZSB3YXMgZnVsbHkgaW5pdGlhbGl6ZWQgd2l0aCBlaXRoZXIgc2VydmVyIGRhdGEgb3IgYSBjb21wbGV0ZSBvdmVyd3JpdGUgYnkgdGhlIGNsaWVudFxuICAgICAqL1xuICAgIGlzRnVsbHlJbml0aWFsaXplZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZnVsbHlJbml0aWFsaXplZF87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciB0aGlzIG5vZGUgaXMgcG90ZW50aWFsbHkgbWlzc2luZyBjaGlsZHJlbiBkdWUgdG8gYSBmaWx0ZXIgYXBwbGllZCB0byB0aGUgbm9kZVxuICAgICAqL1xuICAgIGlzRmlsdGVyZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbHRlcmVkXztcbiAgICB9XG4gICAgaXNDb21wbGV0ZUZvclBhdGgocGF0aCkge1xuICAgICAgICBpZiAocGF0aElzRW1wdHkocGF0aCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmlzRnVsbHlJbml0aWFsaXplZCgpICYmICF0aGlzLmZpbHRlcmVkXztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjaGlsZEtleSA9IHBhdGhHZXRGcm9udChwYXRoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNDb21wbGV0ZUZvckNoaWxkKGNoaWxkS2V5KTtcbiAgICB9XG4gICAgaXNDb21wbGV0ZUZvckNoaWxkKGtleSkge1xuICAgICAgICByZXR1cm4gKCh0aGlzLmlzRnVsbHlJbml0aWFsaXplZCgpICYmICF0aGlzLmZpbHRlcmVkXykgfHwgdGhpcy5ub2RlXy5oYXNDaGlsZChrZXkpKTtcbiAgICB9XG4gICAgZ2V0Tm9kZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZV87XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBFdmVudEdlbmVyYXRvciBpcyB1c2VkIHRvIGNvbnZlcnQgXCJyYXdcIiBjaGFuZ2VzIChDaGFuZ2UpIGFzIGNvbXB1dGVkIGJ5IHRoZVxuICogQ2FjaGVEaWZmZXIgaW50byBhY3R1YWwgZXZlbnRzIChFdmVudCkgdGhhdCBjYW4gYmUgcmFpc2VkLiAgU2VlIGdlbmVyYXRlRXZlbnRzRm9yQ2hhbmdlcygpXG4gKiBmb3IgZGV0YWlscy5cbiAqXG4gKi9cbmNsYXNzIEV2ZW50R2VuZXJhdG9yIHtcbiAgICBjb25zdHJ1Y3RvcihxdWVyeV8pIHtcbiAgICAgICAgdGhpcy5xdWVyeV8gPSBxdWVyeV87XG4gICAgICAgIHRoaXMuaW5kZXhfID0gdGhpcy5xdWVyeV8uX3F1ZXJ5UGFyYW1zLmdldEluZGV4KCk7XG4gICAgfVxufVxuLyoqXG4gKiBHaXZlbiBhIHNldCBvZiByYXcgY2hhbmdlcyAobm8gbW92ZWQgZXZlbnRzIGFuZCBwcmV2TmFtZSBub3Qgc3BlY2lmaWVkIHlldCksIGFuZCBhIHNldCBvZlxuICogRXZlbnRSZWdpc3RyYXRpb25zIHRoYXQgc2hvdWxkIGJlIG5vdGlmaWVkIG9mIHRoZXNlIGNoYW5nZXMsIGdlbmVyYXRlIHRoZSBhY3R1YWwgZXZlbnRzIHRvIGJlIHJhaXNlZC5cbiAqXG4gKiBOb3RlczpcbiAqICAtIGNoaWxkX21vdmVkIGV2ZW50cyB3aWxsIGJlIHN5bnRoZXNpemVkIGF0IHRoaXMgdGltZSBmb3IgYW55IGNoaWxkX2NoYW5nZWQgZXZlbnRzIHRoYXQgYWZmZWN0XG4gKiAgICBvdXIgaW5kZXguXG4gKiAgLSBwcmV2TmFtZSB3aWxsIGJlIGNhbGN1bGF0ZWQgYmFzZWQgb24gdGhlIGluZGV4IG9yZGVyaW5nLlxuICovXG5mdW5jdGlvbiBldmVudEdlbmVyYXRvckdlbmVyYXRlRXZlbnRzRm9yQ2hhbmdlcyhldmVudEdlbmVyYXRvciwgY2hhbmdlcywgZXZlbnRDYWNoZSwgZXZlbnRSZWdpc3RyYXRpb25zKSB7XG4gICAgY29uc3QgZXZlbnRzID0gW107XG4gICAgY29uc3QgbW92ZXMgPSBbXTtcbiAgICBjaGFuZ2VzLmZvckVhY2goY2hhbmdlID0+IHtcbiAgICAgICAgaWYgKGNoYW5nZS50eXBlID09PSBcImNoaWxkX2NoYW5nZWRcIiAvKiBDaGFuZ2VUeXBlLkNISUxEX0NIQU5HRUQgKi8gJiZcbiAgICAgICAgICAgIGV2ZW50R2VuZXJhdG9yLmluZGV4Xy5pbmRleGVkVmFsdWVDaGFuZ2VkKGNoYW5nZS5vbGRTbmFwLCBjaGFuZ2Uuc25hcHNob3ROb2RlKSkge1xuICAgICAgICAgICAgbW92ZXMucHVzaChjaGFuZ2VDaGlsZE1vdmVkKGNoYW5nZS5jaGlsZE5hbWUsIGNoYW5nZS5zbmFwc2hvdE5vZGUpKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGV2ZW50R2VuZXJhdG9yR2VuZXJhdGVFdmVudHNGb3JUeXBlKGV2ZW50R2VuZXJhdG9yLCBldmVudHMsIFwiY2hpbGRfcmVtb3ZlZFwiIC8qIENoYW5nZVR5cGUuQ0hJTERfUkVNT1ZFRCAqLywgY2hhbmdlcywgZXZlbnRSZWdpc3RyYXRpb25zLCBldmVudENhY2hlKTtcbiAgICBldmVudEdlbmVyYXRvckdlbmVyYXRlRXZlbnRzRm9yVHlwZShldmVudEdlbmVyYXRvciwgZXZlbnRzLCBcImNoaWxkX2FkZGVkXCIgLyogQ2hhbmdlVHlwZS5DSElMRF9BRERFRCAqLywgY2hhbmdlcywgZXZlbnRSZWdpc3RyYXRpb25zLCBldmVudENhY2hlKTtcbiAgICBldmVudEdlbmVyYXRvckdlbmVyYXRlRXZlbnRzRm9yVHlwZShldmVudEdlbmVyYXRvciwgZXZlbnRzLCBcImNoaWxkX21vdmVkXCIgLyogQ2hhbmdlVHlwZS5DSElMRF9NT1ZFRCAqLywgbW92ZXMsIGV2ZW50UmVnaXN0cmF0aW9ucywgZXZlbnRDYWNoZSk7XG4gICAgZXZlbnRHZW5lcmF0b3JHZW5lcmF0ZUV2ZW50c0ZvclR5cGUoZXZlbnRHZW5lcmF0b3IsIGV2ZW50cywgXCJjaGlsZF9jaGFuZ2VkXCIgLyogQ2hhbmdlVHlwZS5DSElMRF9DSEFOR0VEICovLCBjaGFuZ2VzLCBldmVudFJlZ2lzdHJhdGlvbnMsIGV2ZW50Q2FjaGUpO1xuICAgIGV2ZW50R2VuZXJhdG9yR2VuZXJhdGVFdmVudHNGb3JUeXBlKGV2ZW50R2VuZXJhdG9yLCBldmVudHMsIFwidmFsdWVcIiAvKiBDaGFuZ2VUeXBlLlZBTFVFICovLCBjaGFuZ2VzLCBldmVudFJlZ2lzdHJhdGlvbnMsIGV2ZW50Q2FjaGUpO1xuICAgIHJldHVybiBldmVudHM7XG59XG4vKipcbiAqIEdpdmVuIGNoYW5nZXMgb2YgYSBzaW5nbGUgY2hhbmdlIHR5cGUsIGdlbmVyYXRlIHRoZSBjb3JyZXNwb25kaW5nIGV2ZW50cy5cbiAqL1xuZnVuY3Rpb24gZXZlbnRHZW5lcmF0b3JHZW5lcmF0ZUV2ZW50c0ZvclR5cGUoZXZlbnRHZW5lcmF0b3IsIGV2ZW50cywgZXZlbnRUeXBlLCBjaGFuZ2VzLCByZWdpc3RyYXRpb25zLCBldmVudENhY2hlKSB7XG4gICAgY29uc3QgZmlsdGVyZWRDaGFuZ2VzID0gY2hhbmdlcy5maWx0ZXIoY2hhbmdlID0+IGNoYW5nZS50eXBlID09PSBldmVudFR5cGUpO1xuICAgIGZpbHRlcmVkQ2hhbmdlcy5zb3J0KChhLCBiKSA9PiBldmVudEdlbmVyYXRvckNvbXBhcmVDaGFuZ2VzKGV2ZW50R2VuZXJhdG9yLCBhLCBiKSk7XG4gICAgZmlsdGVyZWRDaGFuZ2VzLmZvckVhY2goY2hhbmdlID0+IHtcbiAgICAgICAgY29uc3QgbWF0ZXJpYWxpemVkQ2hhbmdlID0gZXZlbnRHZW5lcmF0b3JNYXRlcmlhbGl6ZVNpbmdsZUNoYW5nZShldmVudEdlbmVyYXRvciwgY2hhbmdlLCBldmVudENhY2hlKTtcbiAgICAgICAgcmVnaXN0cmF0aW9ucy5mb3JFYWNoKHJlZ2lzdHJhdGlvbiA9PiB7XG4gICAgICAgICAgICBpZiAocmVnaXN0cmF0aW9uLnJlc3BvbmRzVG8oY2hhbmdlLnR5cGUpKSB7XG4gICAgICAgICAgICAgICAgZXZlbnRzLnB1c2gocmVnaXN0cmF0aW9uLmNyZWF0ZUV2ZW50KG1hdGVyaWFsaXplZENoYW5nZSwgZXZlbnRHZW5lcmF0b3IucXVlcnlfKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gZXZlbnRHZW5lcmF0b3JNYXRlcmlhbGl6ZVNpbmdsZUNoYW5nZShldmVudEdlbmVyYXRvciwgY2hhbmdlLCBldmVudENhY2hlKSB7XG4gICAgaWYgKGNoYW5nZS50eXBlID09PSAndmFsdWUnIHx8IGNoYW5nZS50eXBlID09PSAnY2hpbGRfcmVtb3ZlZCcpIHtcbiAgICAgICAgcmV0dXJuIGNoYW5nZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNoYW5nZS5wcmV2TmFtZSA9IGV2ZW50Q2FjaGUuZ2V0UHJlZGVjZXNzb3JDaGlsZE5hbWUoY2hhbmdlLmNoaWxkTmFtZSwgY2hhbmdlLnNuYXBzaG90Tm9kZSwgZXZlbnRHZW5lcmF0b3IuaW5kZXhfKTtcbiAgICAgICAgcmV0dXJuIGNoYW5nZTtcbiAgICB9XG59XG5mdW5jdGlvbiBldmVudEdlbmVyYXRvckNvbXBhcmVDaGFuZ2VzKGV2ZW50R2VuZXJhdG9yLCBhLCBiKSB7XG4gICAgaWYgKGEuY2hpbGROYW1lID09IG51bGwgfHwgYi5jaGlsZE5hbWUgPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBhc3NlcnRpb25FcnJvcignU2hvdWxkIG9ubHkgY29tcGFyZSBjaGlsZF8gZXZlbnRzLicpO1xuICAgIH1cbiAgICBjb25zdCBhV3JhcHBlZCA9IG5ldyBOYW1lZE5vZGUoYS5jaGlsZE5hbWUsIGEuc25hcHNob3ROb2RlKTtcbiAgICBjb25zdCBiV3JhcHBlZCA9IG5ldyBOYW1lZE5vZGUoYi5jaGlsZE5hbWUsIGIuc25hcHNob3ROb2RlKTtcbiAgICByZXR1cm4gZXZlbnRHZW5lcmF0b3IuaW5kZXhfLmNvbXBhcmUoYVdyYXBwZWQsIGJXcmFwcGVkKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmZ1bmN0aW9uIG5ld1ZpZXdDYWNoZShldmVudENhY2hlLCBzZXJ2ZXJDYWNoZSkge1xuICAgIHJldHVybiB7IGV2ZW50Q2FjaGUsIHNlcnZlckNhY2hlIH07XG59XG5mdW5jdGlvbiB2aWV3Q2FjaGVVcGRhdGVFdmVudFNuYXAodmlld0NhY2hlLCBldmVudFNuYXAsIGNvbXBsZXRlLCBmaWx0ZXJlZCkge1xuICAgIHJldHVybiBuZXdWaWV3Q2FjaGUobmV3IENhY2hlTm9kZShldmVudFNuYXAsIGNvbXBsZXRlLCBmaWx0ZXJlZCksIHZpZXdDYWNoZS5zZXJ2ZXJDYWNoZSk7XG59XG5mdW5jdGlvbiB2aWV3Q2FjaGVVcGRhdGVTZXJ2ZXJTbmFwKHZpZXdDYWNoZSwgc2VydmVyU25hcCwgY29tcGxldGUsIGZpbHRlcmVkKSB7XG4gICAgcmV0dXJuIG5ld1ZpZXdDYWNoZSh2aWV3Q2FjaGUuZXZlbnRDYWNoZSwgbmV3IENhY2hlTm9kZShzZXJ2ZXJTbmFwLCBjb21wbGV0ZSwgZmlsdGVyZWQpKTtcbn1cbmZ1bmN0aW9uIHZpZXdDYWNoZUdldENvbXBsZXRlRXZlbnRTbmFwKHZpZXdDYWNoZSkge1xuICAgIHJldHVybiB2aWV3Q2FjaGUuZXZlbnRDYWNoZS5pc0Z1bGx5SW5pdGlhbGl6ZWQoKVxuICAgICAgICA/IHZpZXdDYWNoZS5ldmVudENhY2hlLmdldE5vZGUoKVxuICAgICAgICA6IG51bGw7XG59XG5mdW5jdGlvbiB2aWV3Q2FjaGVHZXRDb21wbGV0ZVNlcnZlclNuYXAodmlld0NhY2hlKSB7XG4gICAgcmV0dXJuIHZpZXdDYWNoZS5zZXJ2ZXJDYWNoZS5pc0Z1bGx5SW5pdGlhbGl6ZWQoKVxuICAgICAgICA/IHZpZXdDYWNoZS5zZXJ2ZXJDYWNoZS5nZXROb2RlKClcbiAgICAgICAgOiBudWxsO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xubGV0IGVtcHR5Q2hpbGRyZW5TaW5nbGV0b247XG4vKipcbiAqIFNpbmdsZXRvbiBlbXB0eSBjaGlsZHJlbiBjb2xsZWN0aW9uLlxuICpcbiAqL1xuY29uc3QgRW1wdHlDaGlsZHJlbiA9ICgpID0+IHtcbiAgICBpZiAoIWVtcHR5Q2hpbGRyZW5TaW5nbGV0b24pIHtcbiAgICAgICAgZW1wdHlDaGlsZHJlblNpbmdsZXRvbiA9IG5ldyBTb3J0ZWRNYXAoc3RyaW5nQ29tcGFyZSk7XG4gICAgfVxuICAgIHJldHVybiBlbXB0eUNoaWxkcmVuU2luZ2xldG9uO1xufTtcbi8qKlxuICogQSB0cmVlIHdpdGggaW1tdXRhYmxlIGVsZW1lbnRzLlxuICovXG5jbGFzcyBJbW11dGFibGVUcmVlIHtcbiAgICBzdGF0aWMgZnJvbU9iamVjdChvYmopIHtcbiAgICAgICAgbGV0IHRyZWUgPSBuZXcgSW1tdXRhYmxlVHJlZShudWxsKTtcbiAgICAgICAgZWFjaChvYmosIChjaGlsZFBhdGgsIGNoaWxkU25hcCkgPT4ge1xuICAgICAgICAgICAgdHJlZSA9IHRyZWUuc2V0KG5ldyBQYXRoKGNoaWxkUGF0aCksIGNoaWxkU25hcCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdHJlZTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IodmFsdWUsIGNoaWxkcmVuID0gRW1wdHlDaGlsZHJlbigpKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9IGNoaWxkcmVuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcnVlIGlmIHRoZSB2YWx1ZSBpcyBlbXB0eSBhbmQgdGhlcmUgYXJlIG5vIGNoaWxkcmVuXG4gICAgICovXG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPT09IG51bGwgJiYgdGhpcy5jaGlsZHJlbi5pc0VtcHR5KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdpdmVuIGEgcGF0aCBhbmQgcHJlZGljYXRlLCByZXR1cm4gdGhlIGZpcnN0IG5vZGUgYW5kIHRoZSBwYXRoIHRvIHRoYXQgbm9kZVxuICAgICAqIHdoZXJlIHRoZSBwcmVkaWNhdGUgcmV0dXJucyB0cnVlLlxuICAgICAqXG4gICAgICogVE9ETyBEbyBhIHBlcmYgdGVzdCAtLSBJZiB3ZSdyZSBjcmVhdGluZyBhIGJ1bmNoIG9mIGB7cGF0aDogdmFsdWU6fWBcbiAgICAgKiBvYmplY3RzIG9uIHRoZSB3YXkgYmFjayBvdXQsIGl0IG1heSBiZSBiZXR0ZXIgdG8gcGFzcyBkb3duIGEgcGF0aFNvRmFyIG9iai5cbiAgICAgKlxuICAgICAqIEBwYXJhbSByZWxhdGl2ZVBhdGggLSBUaGUgcmVtYWluZGVyIG9mIHRoZSBwYXRoXG4gICAgICogQHBhcmFtIHByZWRpY2F0ZSAtIFRoZSBwcmVkaWNhdGUgdG8gc2F0aXNmeSB0byByZXR1cm4gYSBub2RlXG4gICAgICovXG4gICAgZmluZFJvb3RNb3N0TWF0Y2hpbmdQYXRoQW5kVmFsdWUocmVsYXRpdmVQYXRoLCBwcmVkaWNhdGUpIHtcbiAgICAgICAgaWYgKHRoaXMudmFsdWUgIT0gbnVsbCAmJiBwcmVkaWNhdGUodGhpcy52YWx1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB7IHBhdGg6IG5ld0VtcHR5UGF0aCgpLCB2YWx1ZTogdGhpcy52YWx1ZSB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHBhdGhJc0VtcHR5KHJlbGF0aXZlUGF0aCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZyb250ID0gcGF0aEdldEZyb250KHJlbGF0aXZlUGF0aCk7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hpbGQgPSB0aGlzLmNoaWxkcmVuLmdldChmcm9udCk7XG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkRXhpc3RpbmdQYXRoQW5kVmFsdWUgPSBjaGlsZC5maW5kUm9vdE1vc3RNYXRjaGluZ1BhdGhBbmRWYWx1ZShwYXRoUG9wRnJvbnQocmVsYXRpdmVQYXRoKSwgcHJlZGljYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoaWxkRXhpc3RpbmdQYXRoQW5kVmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZnVsbFBhdGggPSBwYXRoQ2hpbGQobmV3IFBhdGgoZnJvbnQpLCBjaGlsZEV4aXN0aW5nUGF0aEFuZFZhbHVlLnBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgcGF0aDogZnVsbFBhdGgsIHZhbHVlOiBjaGlsZEV4aXN0aW5nUGF0aEFuZFZhbHVlLnZhbHVlIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZpbmQsIGlmIGl0IGV4aXN0cywgdGhlIHNob3J0ZXN0IHN1YnBhdGggb2YgdGhlIGdpdmVuIHBhdGggdGhhdCBwb2ludHMgYSBkZWZpbmVkXG4gICAgICogdmFsdWUgaW4gdGhlIHRyZWVcbiAgICAgKi9cbiAgICBmaW5kUm9vdE1vc3RWYWx1ZUFuZFBhdGgocmVsYXRpdmVQYXRoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbmRSb290TW9zdE1hdGNoaW5nUGF0aEFuZFZhbHVlKHJlbGF0aXZlUGF0aCwgKCkgPT4gdHJ1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIFRoZSBzdWJ0cmVlIGF0IHRoZSBnaXZlbiBwYXRoXG4gICAgICovXG4gICAgc3VidHJlZShyZWxhdGl2ZVBhdGgpIHtcbiAgICAgICAgaWYgKHBhdGhJc0VtcHR5KHJlbGF0aXZlUGF0aCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZnJvbnQgPSBwYXRoR2V0RnJvbnQocmVsYXRpdmVQYXRoKTtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkVHJlZSA9IHRoaXMuY2hpbGRyZW4uZ2V0KGZyb250KTtcbiAgICAgICAgICAgIGlmIChjaGlsZFRyZWUgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hpbGRUcmVlLnN1YnRyZWUocGF0aFBvcEZyb250KHJlbGF0aXZlUGF0aCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBJbW11dGFibGVUcmVlKG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgYSB2YWx1ZSBhdCB0aGUgc3BlY2lmaWVkIHBhdGguXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcmVsYXRpdmVQYXRoIC0gUGF0aCB0byBzZXQgdmFsdWUgYXQuXG4gICAgICogQHBhcmFtIHRvU2V0IC0gVmFsdWUgdG8gc2V0LlxuICAgICAqIEByZXR1cm5zIFJlc3VsdGluZyB0cmVlLlxuICAgICAqL1xuICAgIHNldChyZWxhdGl2ZVBhdGgsIHRvU2V0KSB7XG4gICAgICAgIGlmIChwYXRoSXNFbXB0eShyZWxhdGl2ZVBhdGgpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEltbXV0YWJsZVRyZWUodG9TZXQsIHRoaXMuY2hpbGRyZW4pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZnJvbnQgPSBwYXRoR2V0RnJvbnQocmVsYXRpdmVQYXRoKTtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkID0gdGhpcy5jaGlsZHJlbi5nZXQoZnJvbnQpIHx8IG5ldyBJbW11dGFibGVUcmVlKG51bGwpO1xuICAgICAgICAgICAgY29uc3QgbmV3Q2hpbGQgPSBjaGlsZC5zZXQocGF0aFBvcEZyb250KHJlbGF0aXZlUGF0aCksIHRvU2V0KTtcbiAgICAgICAgICAgIGNvbnN0IG5ld0NoaWxkcmVuID0gdGhpcy5jaGlsZHJlbi5pbnNlcnQoZnJvbnQsIG5ld0NoaWxkKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSW1tdXRhYmxlVHJlZSh0aGlzLnZhbHVlLCBuZXdDaGlsZHJlbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgdmFsdWUgYXQgdGhlIHNwZWNpZmllZCBwYXRoLlxuICAgICAqXG4gICAgICogQHBhcmFtIHJlbGF0aXZlUGF0aCAtIFBhdGggdG8gdmFsdWUgdG8gcmVtb3ZlLlxuICAgICAqIEByZXR1cm5zIFJlc3VsdGluZyB0cmVlLlxuICAgICAqL1xuICAgIHJlbW92ZShyZWxhdGl2ZVBhdGgpIHtcbiAgICAgICAgaWYgKHBhdGhJc0VtcHR5KHJlbGF0aXZlUGF0aCkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNoaWxkcmVuLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSW1tdXRhYmxlVHJlZShudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSW1tdXRhYmxlVHJlZShudWxsLCB0aGlzLmNoaWxkcmVuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGZyb250ID0gcGF0aEdldEZyb250KHJlbGF0aXZlUGF0aCk7XG4gICAgICAgICAgICBjb25zdCBjaGlsZCA9IHRoaXMuY2hpbGRyZW4uZ2V0KGZyb250KTtcbiAgICAgICAgICAgIGlmIChjaGlsZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0NoaWxkID0gY2hpbGQucmVtb3ZlKHBhdGhQb3BGcm9udChyZWxhdGl2ZVBhdGgpKTtcbiAgICAgICAgICAgICAgICBsZXQgbmV3Q2hpbGRyZW47XG4gICAgICAgICAgICAgICAgaWYgKG5ld0NoaWxkLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgICAgICBuZXdDaGlsZHJlbiA9IHRoaXMuY2hpbGRyZW4ucmVtb3ZlKGZyb250KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld0NoaWxkcmVuID0gdGhpcy5jaGlsZHJlbi5pbnNlcnQoZnJvbnQsIG5ld0NoaWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUgPT09IG51bGwgJiYgbmV3Q2hpbGRyZW4uaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSW1tdXRhYmxlVHJlZShudWxsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSW1tdXRhYmxlVHJlZSh0aGlzLnZhbHVlLCBuZXdDaGlsZHJlbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyBhIHZhbHVlIGZyb20gdGhlIHRyZWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcmVsYXRpdmVQYXRoIC0gUGF0aCB0byBnZXQgdmFsdWUgZm9yLlxuICAgICAqIEByZXR1cm5zIFZhbHVlIGF0IHBhdGgsIG9yIG51bGwuXG4gICAgICovXG4gICAgZ2V0KHJlbGF0aXZlUGF0aCkge1xuICAgICAgICBpZiAocGF0aElzRW1wdHkocmVsYXRpdmVQYXRoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBmcm9udCA9IHBhdGhHZXRGcm9udChyZWxhdGl2ZVBhdGgpO1xuICAgICAgICAgICAgY29uc3QgY2hpbGQgPSB0aGlzLmNoaWxkcmVuLmdldChmcm9udCk7XG4gICAgICAgICAgICBpZiAoY2hpbGQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hpbGQuZ2V0KHBhdGhQb3BGcm9udChyZWxhdGl2ZVBhdGgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlcGxhY2UgdGhlIHN1YnRyZWUgYXQgdGhlIHNwZWNpZmllZCBwYXRoIHdpdGggdGhlIGdpdmVuIG5ldyB0cmVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHJlbGF0aXZlUGF0aCAtIFBhdGggdG8gcmVwbGFjZSBzdWJ0cmVlIGZvci5cbiAgICAgKiBAcGFyYW0gbmV3VHJlZSAtIE5ldyB0cmVlLlxuICAgICAqIEByZXR1cm5zIFJlc3VsdGluZyB0cmVlLlxuICAgICAqL1xuICAgIHNldFRyZWUocmVsYXRpdmVQYXRoLCBuZXdUcmVlKSB7XG4gICAgICAgIGlmIChwYXRoSXNFbXB0eShyZWxhdGl2ZVBhdGgpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3VHJlZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGZyb250ID0gcGF0aEdldEZyb250KHJlbGF0aXZlUGF0aCk7XG4gICAgICAgICAgICBjb25zdCBjaGlsZCA9IHRoaXMuY2hpbGRyZW4uZ2V0KGZyb250KSB8fCBuZXcgSW1tdXRhYmxlVHJlZShudWxsKTtcbiAgICAgICAgICAgIGNvbnN0IG5ld0NoaWxkID0gY2hpbGQuc2V0VHJlZShwYXRoUG9wRnJvbnQocmVsYXRpdmVQYXRoKSwgbmV3VHJlZSk7XG4gICAgICAgICAgICBsZXQgbmV3Q2hpbGRyZW47XG4gICAgICAgICAgICBpZiAobmV3Q2hpbGQuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgbmV3Q2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuLnJlbW92ZShmcm9udCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXdDaGlsZHJlbiA9IHRoaXMuY2hpbGRyZW4uaW5zZXJ0KGZyb250LCBuZXdDaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IEltbXV0YWJsZVRyZWUodGhpcy52YWx1ZSwgbmV3Q2hpbGRyZW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGEgZGVwdGggZmlyc3QgZm9sZCBvbiB0aGlzIHRyZWUuIFRyYW5zZm9ybXMgYSB0cmVlIGludG8gYSBzaW5nbGVcbiAgICAgKiB2YWx1ZSwgZ2l2ZW4gYSBmdW5jdGlvbiB0aGF0IG9wZXJhdGVzIG9uIHRoZSBwYXRoIHRvIGEgbm9kZSwgYW4gb3B0aW9uYWxcbiAgICAgKiBjdXJyZW50IHZhbHVlLCBhbmQgYSBtYXAgb2YgY2hpbGQgbmFtZXMgdG8gZm9sZGVkIHN1YnRyZWVzXG4gICAgICovXG4gICAgZm9sZChmbikge1xuICAgICAgICByZXR1cm4gdGhpcy5mb2xkXyhuZXdFbXB0eVBhdGgoKSwgZm4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWN1cnNpdmUgaGVscGVyIGZvciBwdWJsaWMtZmFjaW5nIGZvbGQoKSBtZXRob2RcbiAgICAgKi9cbiAgICBmb2xkXyhwYXRoU29GYXIsIGZuKSB7XG4gICAgICAgIGNvbnN0IGFjY3VtID0ge307XG4gICAgICAgIHRoaXMuY2hpbGRyZW4uaW5vcmRlclRyYXZlcnNhbCgoY2hpbGRLZXksIGNoaWxkVHJlZSkgPT4ge1xuICAgICAgICAgICAgYWNjdW1bY2hpbGRLZXldID0gY2hpbGRUcmVlLmZvbGRfKHBhdGhDaGlsZChwYXRoU29GYXIsIGNoaWxkS2V5KSwgZm4pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZuKHBhdGhTb0ZhciwgdGhpcy52YWx1ZSwgYWNjdW0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaW5kIHRoZSBmaXJzdCBtYXRjaGluZyB2YWx1ZSBvbiB0aGUgZ2l2ZW4gcGF0aC4gUmV0dXJuIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgZiB0byBpdC5cbiAgICAgKi9cbiAgICBmaW5kT25QYXRoKHBhdGgsIGYpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZE9uUGF0aF8ocGF0aCwgbmV3RW1wdHlQYXRoKCksIGYpO1xuICAgIH1cbiAgICBmaW5kT25QYXRoXyhwYXRoVG9Gb2xsb3csIHBhdGhTb0ZhciwgZikge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnZhbHVlID8gZihwYXRoU29GYXIsIHRoaXMudmFsdWUpIDogZmFsc2U7XG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAocGF0aElzRW1wdHkocGF0aFRvRm9sbG93KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZnJvbnQgPSBwYXRoR2V0RnJvbnQocGF0aFRvRm9sbG93KTtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0Q2hpbGQgPSB0aGlzLmNoaWxkcmVuLmdldChmcm9udCk7XG4gICAgICAgICAgICAgICAgaWYgKG5leHRDaGlsZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV4dENoaWxkLmZpbmRPblBhdGhfKHBhdGhQb3BGcm9udChwYXRoVG9Gb2xsb3cpLCBwYXRoQ2hpbGQocGF0aFNvRmFyLCBmcm9udCksIGYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZvcmVhY2hPblBhdGgocGF0aCwgZikge1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JlYWNoT25QYXRoXyhwYXRoLCBuZXdFbXB0eVBhdGgoKSwgZik7XG4gICAgfVxuICAgIGZvcmVhY2hPblBhdGhfKHBhdGhUb0ZvbGxvdywgY3VycmVudFJlbGF0aXZlUGF0aCwgZikge1xuICAgICAgICBpZiAocGF0aElzRW1wdHkocGF0aFRvRm9sbG93KSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGYoY3VycmVudFJlbGF0aXZlUGF0aCwgdGhpcy52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBmcm9udCA9IHBhdGhHZXRGcm9udChwYXRoVG9Gb2xsb3cpO1xuICAgICAgICAgICAgY29uc3QgbmV4dENoaWxkID0gdGhpcy5jaGlsZHJlbi5nZXQoZnJvbnQpO1xuICAgICAgICAgICAgaWYgKG5leHRDaGlsZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXh0Q2hpbGQuZm9yZWFjaE9uUGF0aF8ocGF0aFBvcEZyb250KHBhdGhUb0ZvbGxvdyksIHBhdGhDaGlsZChjdXJyZW50UmVsYXRpdmVQYXRoLCBmcm9udCksIGYpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBJbW11dGFibGVUcmVlKG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxzIHRoZSBnaXZlbiBmdW5jdGlvbiBmb3IgZWFjaCBub2RlIGluIHRoZSB0cmVlIHRoYXQgaGFzIGEgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZiAtIEEgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdpdGggdGhlIHBhdGggZnJvbSB0aGUgcm9vdCBvZiB0aGUgdHJlZSB0b1xuICAgICAqIGEgbm9kZSwgYW5kIHRoZSB2YWx1ZSBhdCB0aGF0IG5vZGUuIENhbGxlZCBpbiBkZXB0aC1maXJzdCBvcmRlci5cbiAgICAgKi9cbiAgICBmb3JlYWNoKGYpIHtcbiAgICAgICAgdGhpcy5mb3JlYWNoXyhuZXdFbXB0eVBhdGgoKSwgZik7XG4gICAgfVxuICAgIGZvcmVhY2hfKGN1cnJlbnRSZWxhdGl2ZVBhdGgsIGYpIHtcbiAgICAgICAgdGhpcy5jaGlsZHJlbi5pbm9yZGVyVHJhdmVyc2FsKChjaGlsZE5hbWUsIGNoaWxkVHJlZSkgPT4ge1xuICAgICAgICAgICAgY2hpbGRUcmVlLmZvcmVhY2hfKHBhdGhDaGlsZChjdXJyZW50UmVsYXRpdmVQYXRoLCBjaGlsZE5hbWUpLCBmKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlKSB7XG4gICAgICAgICAgICBmKGN1cnJlbnRSZWxhdGl2ZVBhdGgsIHRoaXMudmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvcmVhY2hDaGlsZChmKSB7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4uaW5vcmRlclRyYXZlcnNhbCgoY2hpbGROYW1lLCBjaGlsZFRyZWUpID0+IHtcbiAgICAgICAgICAgIGlmIChjaGlsZFRyZWUudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBmKGNoaWxkTmFtZSwgY2hpbGRUcmVlLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGlzIGNsYXNzIGhvbGRzIGEgY29sbGVjdGlvbiBvZiB3cml0ZXMgdGhhdCBjYW4gYmUgYXBwbGllZCB0byBub2RlcyBpbiB1bmlzb24uIEl0IGFic3RyYWN0cyBhd2F5IHRoZSBsb2dpYyB3aXRoXG4gKiBkZWFsaW5nIHdpdGggcHJpb3JpdHkgd3JpdGVzIGFuZCBtdWx0aXBsZSBuZXN0ZWQgd3JpdGVzLiBBdCBhbnkgZ2l2ZW4gcGF0aCB0aGVyZSBpcyBvbmx5IGFsbG93ZWQgdG8gYmUgb25lIHdyaXRlXG4gKiBtb2RpZnlpbmcgdGhhdCBwYXRoLiBBbnkgd3JpdGUgdG8gYW4gZXhpc3RpbmcgcGF0aCBvciBzaGFkb3dpbmcgYW4gZXhpc3RpbmcgcGF0aCB3aWxsIG1vZGlmeSB0aGF0IGV4aXN0aW5nIHdyaXRlXG4gKiB0byByZWZsZWN0IHRoZSB3cml0ZSBhZGRlZC5cbiAqL1xuY2xhc3MgQ29tcG91bmRXcml0ZSB7XG4gICAgY29uc3RydWN0b3Iod3JpdGVUcmVlXykge1xuICAgICAgICB0aGlzLndyaXRlVHJlZV8gPSB3cml0ZVRyZWVfO1xuICAgIH1cbiAgICBzdGF0aWMgZW1wdHkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ29tcG91bmRXcml0ZShuZXcgSW1tdXRhYmxlVHJlZShudWxsKSk7XG4gICAgfVxufVxuZnVuY3Rpb24gY29tcG91bmRXcml0ZUFkZFdyaXRlKGNvbXBvdW5kV3JpdGUsIHBhdGgsIG5vZGUpIHtcbiAgICBpZiAocGF0aElzRW1wdHkocGF0aCkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb21wb3VuZFdyaXRlKG5ldyBJbW11dGFibGVUcmVlKG5vZGUpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IHJvb3Rtb3N0ID0gY29tcG91bmRXcml0ZS53cml0ZVRyZWVfLmZpbmRSb290TW9zdFZhbHVlQW5kUGF0aChwYXRoKTtcbiAgICAgICAgaWYgKHJvb3Rtb3N0ICE9IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IHJvb3RNb3N0UGF0aCA9IHJvb3Rtb3N0LnBhdGg7XG4gICAgICAgICAgICBsZXQgdmFsdWUgPSByb290bW9zdC52YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHJlbGF0aXZlUGF0aCA9IG5ld1JlbGF0aXZlUGF0aChyb290TW9zdFBhdGgsIHBhdGgpO1xuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS51cGRhdGVDaGlsZChyZWxhdGl2ZVBhdGgsIG5vZGUpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDb21wb3VuZFdyaXRlKGNvbXBvdW5kV3JpdGUud3JpdGVUcmVlXy5zZXQocm9vdE1vc3RQYXRoLCB2YWx1ZSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3Qgc3VidHJlZSA9IG5ldyBJbW11dGFibGVUcmVlKG5vZGUpO1xuICAgICAgICAgICAgY29uc3QgbmV3V3JpdGVUcmVlID0gY29tcG91bmRXcml0ZS53cml0ZVRyZWVfLnNldFRyZWUocGF0aCwgc3VidHJlZSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IENvbXBvdW5kV3JpdGUobmV3V3JpdGVUcmVlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGNvbXBvdW5kV3JpdGVBZGRXcml0ZXMoY29tcG91bmRXcml0ZSwgcGF0aCwgdXBkYXRlcykge1xuICAgIGxldCBuZXdXcml0ZSA9IGNvbXBvdW5kV3JpdGU7XG4gICAgZWFjaCh1cGRhdGVzLCAoY2hpbGRLZXksIG5vZGUpID0+IHtcbiAgICAgICAgbmV3V3JpdGUgPSBjb21wb3VuZFdyaXRlQWRkV3JpdGUobmV3V3JpdGUsIHBhdGhDaGlsZChwYXRoLCBjaGlsZEtleSksIG5vZGUpO1xuICAgIH0pO1xuICAgIHJldHVybiBuZXdXcml0ZTtcbn1cbi8qKlxuICogV2lsbCByZW1vdmUgYSB3cml0ZSBhdCB0aGUgZ2l2ZW4gcGF0aCBhbmQgZGVlcGVyIHBhdGhzLiBUaGlzIHdpbGwgPGVtPm5vdDwvZW0+IG1vZGlmeSBhIHdyaXRlIGF0IGEgaGlnaGVyXG4gKiBsb2NhdGlvbiwgd2hpY2ggbXVzdCBiZSByZW1vdmVkIGJ5IGNhbGxpbmcgdGhpcyBtZXRob2Qgd2l0aCB0aGF0IHBhdGguXG4gKlxuICogQHBhcmFtIGNvbXBvdW5kV3JpdGUgLSBUaGUgQ29tcG91bmRXcml0ZSB0byByZW1vdmUuXG4gKiBAcGFyYW0gcGF0aCAtIFRoZSBwYXRoIGF0IHdoaWNoIGEgd3JpdGUgYW5kIGFsbCBkZWVwZXIgd3JpdGVzIHNob3VsZCBiZSByZW1vdmVkXG4gKiBAcmV0dXJucyBUaGUgbmV3IENvbXBvdW5kV3JpdGUgd2l0aCB0aGUgcmVtb3ZlZCBwYXRoXG4gKi9cbmZ1bmN0aW9uIGNvbXBvdW5kV3JpdGVSZW1vdmVXcml0ZShjb21wb3VuZFdyaXRlLCBwYXRoKSB7XG4gICAgaWYgKHBhdGhJc0VtcHR5KHBhdGgpKSB7XG4gICAgICAgIHJldHVybiBDb21wb3VuZFdyaXRlLmVtcHR5KCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBuZXdXcml0ZVRyZWUgPSBjb21wb3VuZFdyaXRlLndyaXRlVHJlZV8uc2V0VHJlZShwYXRoLCBuZXcgSW1tdXRhYmxlVHJlZShudWxsKSk7XG4gICAgICAgIHJldHVybiBuZXcgQ29tcG91bmRXcml0ZShuZXdXcml0ZVRyZWUpO1xuICAgIH1cbn1cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoaXMgQ29tcG91bmRXcml0ZSB3aWxsIGZ1bGx5IG92ZXJ3cml0ZSBhIG5vZGUgYXQgYSBnaXZlbiBsb2NhdGlvbiBhbmQgY2FuIHRoZXJlZm9yZSBiZVxuICogY29uc2lkZXJlZCBcImNvbXBsZXRlXCIuXG4gKlxuICogQHBhcmFtIGNvbXBvdW5kV3JpdGUgLSBUaGUgQ29tcG91bmRXcml0ZSB0byBjaGVjay5cbiAqIEBwYXJhbSBwYXRoIC0gVGhlIHBhdGggdG8gY2hlY2sgZm9yXG4gKiBAcmV0dXJucyBXaGV0aGVyIHRoZXJlIGlzIGEgY29tcGxldGUgd3JpdGUgYXQgdGhhdCBwYXRoXG4gKi9cbmZ1bmN0aW9uIGNvbXBvdW5kV3JpdGVIYXNDb21wbGV0ZVdyaXRlKGNvbXBvdW5kV3JpdGUsIHBhdGgpIHtcbiAgICByZXR1cm4gY29tcG91bmRXcml0ZUdldENvbXBsZXRlTm9kZShjb21wb3VuZFdyaXRlLCBwYXRoKSAhPSBudWxsO1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgbm9kZSBmb3IgYSBwYXRoIGlmIGFuZCBvbmx5IGlmIHRoZSBub2RlIGlzIGEgXCJjb21wbGV0ZVwiIG92ZXJ3cml0ZSBhdCB0aGF0IHBhdGguIFRoaXMgd2lsbCBub3QgYWdncmVnYXRlXG4gKiB3cml0ZXMgZnJvbSBkZWVwZXIgcGF0aHMsIGJ1dCB3aWxsIHJldHVybiBjaGlsZCBub2RlcyBmcm9tIGEgbW9yZSBzaGFsbG93IHBhdGguXG4gKlxuICogQHBhcmFtIGNvbXBvdW5kV3JpdGUgLSBUaGUgQ29tcG91bmRXcml0ZSB0byBnZXQgdGhlIG5vZGUgZnJvbS5cbiAqIEBwYXJhbSBwYXRoIC0gVGhlIHBhdGggdG8gZ2V0IGEgY29tcGxldGUgd3JpdGVcbiAqIEByZXR1cm5zIFRoZSBub2RlIGlmIGNvbXBsZXRlIGF0IHRoYXQgcGF0aCwgb3IgbnVsbCBvdGhlcndpc2UuXG4gKi9cbmZ1bmN0aW9uIGNvbXBvdW5kV3JpdGVHZXRDb21wbGV0ZU5vZGUoY29tcG91bmRXcml0ZSwgcGF0aCkge1xuICAgIGNvbnN0IHJvb3Rtb3N0ID0gY29tcG91bmRXcml0ZS53cml0ZVRyZWVfLmZpbmRSb290TW9zdFZhbHVlQW5kUGF0aChwYXRoKTtcbiAgICBpZiAocm9vdG1vc3QgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gY29tcG91bmRXcml0ZS53cml0ZVRyZWVfXG4gICAgICAgICAgICAuZ2V0KHJvb3Rtb3N0LnBhdGgpXG4gICAgICAgICAgICAuZ2V0Q2hpbGQobmV3UmVsYXRpdmVQYXRoKHJvb3Rtb3N0LnBhdGgsIHBhdGgpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbi8qKlxuICogUmV0dXJucyBhbGwgY2hpbGRyZW4gdGhhdCBhcmUgZ3VhcmFudGVlZCB0byBiZSBhIGNvbXBsZXRlIG92ZXJ3cml0ZS5cbiAqXG4gKiBAcGFyYW0gY29tcG91bmRXcml0ZSAtIFRoZSBDb21wb3VuZFdyaXRlIHRvIGdldCBjaGlsZHJlbiBmcm9tLlxuICogQHJldHVybnMgQSBsaXN0IG9mIGFsbCBjb21wbGV0ZSBjaGlsZHJlbi5cbiAqL1xuZnVuY3Rpb24gY29tcG91bmRXcml0ZUdldENvbXBsZXRlQ2hpbGRyZW4oY29tcG91bmRXcml0ZSkge1xuICAgIGNvbnN0IGNoaWxkcmVuID0gW107XG4gICAgY29uc3Qgbm9kZSA9IGNvbXBvdW5kV3JpdGUud3JpdGVUcmVlXy52YWx1ZTtcbiAgICBpZiAobm9kZSAhPSBudWxsKSB7XG4gICAgICAgIC8vIElmIGl0J3MgYSBsZWFmIG5vZGUsIGl0IGhhcyBubyBjaGlsZHJlbjsgc28gbm90aGluZyB0byBkby5cbiAgICAgICAgaWYgKCFub2RlLmlzTGVhZk5vZGUoKSkge1xuICAgICAgICAgICAgbm9kZS5mb3JFYWNoQ2hpbGQoUFJJT1JJVFlfSU5ERVgsIChjaGlsZE5hbWUsIGNoaWxkTm9kZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuLnB1c2gobmV3IE5hbWVkTm9kZShjaGlsZE5hbWUsIGNoaWxkTm9kZSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbXBvdW5kV3JpdGUud3JpdGVUcmVlXy5jaGlsZHJlbi5pbm9yZGVyVHJhdmVyc2FsKChjaGlsZE5hbWUsIGNoaWxkVHJlZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGNoaWxkVHJlZS52YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW4ucHVzaChuZXcgTmFtZWROb2RlKGNoaWxkTmFtZSwgY2hpbGRUcmVlLnZhbHVlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gY2hpbGRyZW47XG59XG5mdW5jdGlvbiBjb21wb3VuZFdyaXRlQ2hpbGRDb21wb3VuZFdyaXRlKGNvbXBvdW5kV3JpdGUsIHBhdGgpIHtcbiAgICBpZiAocGF0aElzRW1wdHkocGF0aCkpIHtcbiAgICAgICAgcmV0dXJuIGNvbXBvdW5kV3JpdGU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBzaGFkb3dpbmdOb2RlID0gY29tcG91bmRXcml0ZUdldENvbXBsZXRlTm9kZShjb21wb3VuZFdyaXRlLCBwYXRoKTtcbiAgICAgICAgaWYgKHNoYWRvd2luZ05vZGUgIT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDb21wb3VuZFdyaXRlKG5ldyBJbW11dGFibGVUcmVlKHNoYWRvd2luZ05vZGUpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ29tcG91bmRXcml0ZShjb21wb3VuZFdyaXRlLndyaXRlVHJlZV8uc3VidHJlZShwYXRoKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIENvbXBvdW5kV3JpdGUgaXMgZW1wdHkgYW5kIHRoZXJlZm9yZSBkb2VzIG5vdCBtb2RpZnkgYW55IG5vZGVzLlxuICogQHJldHVybnMgV2hldGhlciB0aGlzIENvbXBvdW5kV3JpdGUgaXMgZW1wdHlcbiAqL1xuZnVuY3Rpb24gY29tcG91bmRXcml0ZUlzRW1wdHkoY29tcG91bmRXcml0ZSkge1xuICAgIHJldHVybiBjb21wb3VuZFdyaXRlLndyaXRlVHJlZV8uaXNFbXB0eSgpO1xufVxuLyoqXG4gKiBBcHBsaWVzIHRoaXMgQ29tcG91bmRXcml0ZSB0byBhIG5vZGUuIFRoZSBub2RlIGlzIHJldHVybmVkIHdpdGggYWxsIHdyaXRlcyBmcm9tIHRoaXMgQ29tcG91bmRXcml0ZSBhcHBsaWVkIHRvIHRoZVxuICogbm9kZVxuICogQHBhcmFtIG5vZGUgLSBUaGUgbm9kZSB0byBhcHBseSB0aGlzIENvbXBvdW5kV3JpdGUgdG9cbiAqIEByZXR1cm5zIFRoZSBub2RlIHdpdGggYWxsIHdyaXRlcyBhcHBsaWVkXG4gKi9cbmZ1bmN0aW9uIGNvbXBvdW5kV3JpdGVBcHBseShjb21wb3VuZFdyaXRlLCBub2RlKSB7XG4gICAgcmV0dXJuIGFwcGx5U3VidHJlZVdyaXRlKG5ld0VtcHR5UGF0aCgpLCBjb21wb3VuZFdyaXRlLndyaXRlVHJlZV8sIG5vZGUpO1xufVxuZnVuY3Rpb24gYXBwbHlTdWJ0cmVlV3JpdGUocmVsYXRpdmVQYXRoLCB3cml0ZVRyZWUsIG5vZGUpIHtcbiAgICBpZiAod3JpdGVUcmVlLnZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgLy8gU2luY2UgdGhlcmUgYSB3cml0ZSBpcyBhbHdheXMgYSBsZWFmLCB3ZSdyZSBkb25lIGhlcmVcbiAgICAgICAgcmV0dXJuIG5vZGUudXBkYXRlQ2hpbGQocmVsYXRpdmVQYXRoLCB3cml0ZVRyZWUudmFsdWUpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbGV0IHByaW9yaXR5V3JpdGUgPSBudWxsO1xuICAgICAgICB3cml0ZVRyZWUuY2hpbGRyZW4uaW5vcmRlclRyYXZlcnNhbCgoY2hpbGRLZXksIGNoaWxkVHJlZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGNoaWxkS2V5ID09PSAnLnByaW9yaXR5Jykge1xuICAgICAgICAgICAgICAgIC8vIEFwcGx5IHByaW9yaXRpZXMgYXQgdGhlIGVuZCBzbyB3ZSBkb24ndCB1cGRhdGUgcHJpb3JpdGllcyBmb3IgZWl0aGVyIGVtcHR5IG5vZGVzIG9yIGZvcmdldFxuICAgICAgICAgICAgICAgIC8vIHRvIGFwcGx5IHByaW9yaXRpZXMgdG8gZW1wdHkgbm9kZXMgdGhhdCBhcmUgbGF0ZXIgZmlsbGVkXG4gICAgICAgICAgICAgICAgYXNzZXJ0KGNoaWxkVHJlZS52YWx1ZSAhPT0gbnVsbCwgJ1ByaW9yaXR5IHdyaXRlcyBtdXN0IGFsd2F5cyBiZSBsZWFmIG5vZGVzJyk7XG4gICAgICAgICAgICAgICAgcHJpb3JpdHlXcml0ZSA9IGNoaWxkVHJlZS52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG5vZGUgPSBhcHBseVN1YnRyZWVXcml0ZShwYXRoQ2hpbGQocmVsYXRpdmVQYXRoLCBjaGlsZEtleSksIGNoaWxkVHJlZSwgbm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBJZiB0aGVyZSB3YXMgYSBwcmlvcml0eSB3cml0ZSwgd2Ugb25seSBhcHBseSBpdCBpZiB0aGUgbm9kZSBpcyBub3QgZW1wdHlcbiAgICAgICAgaWYgKCFub2RlLmdldENoaWxkKHJlbGF0aXZlUGF0aCkuaXNFbXB0eSgpICYmIHByaW9yaXR5V3JpdGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIG5vZGUgPSBub2RlLnVwZGF0ZUNoaWxkKHBhdGhDaGlsZChyZWxhdGl2ZVBhdGgsICcucHJpb3JpdHknKSwgcHJpb3JpdHlXcml0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgV3JpdGVUcmVlUmVmIGZvciB0aGUgZ2l2ZW4gcGF0aC4gRm9yIHVzZSB3aXRoIGEgbmV3IHN5bmMgcG9pbnQgYXQgdGhlIGdpdmVuIHBhdGguXG4gKlxuICovXG5mdW5jdGlvbiB3cml0ZVRyZWVDaGlsZFdyaXRlcyh3cml0ZVRyZWUsIHBhdGgpIHtcbiAgICByZXR1cm4gbmV3V3JpdGVUcmVlUmVmKHBhdGgsIHdyaXRlVHJlZSk7XG59XG4vKipcbiAqIFJlY29yZCBhIG5ldyBvdmVyd3JpdGUgZnJvbSB1c2VyIGNvZGUuXG4gKlxuICogQHBhcmFtIHZpc2libGUgLSBUaGlzIGlzIHNldCB0byBmYWxzZSBieSBzb21lIHRyYW5zYWN0aW9ucy4gSXQgc2hvdWxkIGJlIGV4Y2x1ZGVkIGZyb20gZXZlbnQgY2FjaGVzXG4gKi9cbmZ1bmN0aW9uIHdyaXRlVHJlZUFkZE92ZXJ3cml0ZSh3cml0ZVRyZWUsIHBhdGgsIHNuYXAsIHdyaXRlSWQsIHZpc2libGUpIHtcbiAgICBhc3NlcnQod3JpdGVJZCA+IHdyaXRlVHJlZS5sYXN0V3JpdGVJZCwgJ1N0YWNraW5nIGFuIG9sZGVyIHdyaXRlIG9uIHRvcCBvZiBuZXdlciBvbmVzJyk7XG4gICAgaWYgKHZpc2libGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2aXNpYmxlID0gdHJ1ZTtcbiAgICB9XG4gICAgd3JpdGVUcmVlLmFsbFdyaXRlcy5wdXNoKHtcbiAgICAgICAgcGF0aCxcbiAgICAgICAgc25hcCxcbiAgICAgICAgd3JpdGVJZCxcbiAgICAgICAgdmlzaWJsZVxuICAgIH0pO1xuICAgIGlmICh2aXNpYmxlKSB7XG4gICAgICAgIHdyaXRlVHJlZS52aXNpYmxlV3JpdGVzID0gY29tcG91bmRXcml0ZUFkZFdyaXRlKHdyaXRlVHJlZS52aXNpYmxlV3JpdGVzLCBwYXRoLCBzbmFwKTtcbiAgICB9XG4gICAgd3JpdGVUcmVlLmxhc3RXcml0ZUlkID0gd3JpdGVJZDtcbn1cbi8qKlxuICogUmVjb3JkIGEgbmV3IG1lcmdlIGZyb20gdXNlciBjb2RlLlxuICovXG5mdW5jdGlvbiB3cml0ZVRyZWVBZGRNZXJnZSh3cml0ZVRyZWUsIHBhdGgsIGNoYW5nZWRDaGlsZHJlbiwgd3JpdGVJZCkge1xuICAgIGFzc2VydCh3cml0ZUlkID4gd3JpdGVUcmVlLmxhc3RXcml0ZUlkLCAnU3RhY2tpbmcgYW4gb2xkZXIgbWVyZ2Ugb24gdG9wIG9mIG5ld2VyIG9uZXMnKTtcbiAgICB3cml0ZVRyZWUuYWxsV3JpdGVzLnB1c2goe1xuICAgICAgICBwYXRoLFxuICAgICAgICBjaGlsZHJlbjogY2hhbmdlZENoaWxkcmVuLFxuICAgICAgICB3cml0ZUlkLFxuICAgICAgICB2aXNpYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgd3JpdGVUcmVlLnZpc2libGVXcml0ZXMgPSBjb21wb3VuZFdyaXRlQWRkV3JpdGVzKHdyaXRlVHJlZS52aXNpYmxlV3JpdGVzLCBwYXRoLCBjaGFuZ2VkQ2hpbGRyZW4pO1xuICAgIHdyaXRlVHJlZS5sYXN0V3JpdGVJZCA9IHdyaXRlSWQ7XG59XG5mdW5jdGlvbiB3cml0ZVRyZWVHZXRXcml0ZSh3cml0ZVRyZWUsIHdyaXRlSWQpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdyaXRlVHJlZS5hbGxXcml0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgcmVjb3JkID0gd3JpdGVUcmVlLmFsbFdyaXRlc1tpXTtcbiAgICAgICAgaWYgKHJlY29yZC53cml0ZUlkID09PSB3cml0ZUlkKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVjb3JkO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuLyoqXG4gKiBSZW1vdmUgYSB3cml0ZSAoZWl0aGVyIGFuIG92ZXJ3cml0ZSBvciBtZXJnZSkgdGhhdCBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgYWNrbm93bGVkZ2UgYnkgdGhlIHNlcnZlci4gUmVjYWxjdWxhdGVzXG4gKiB0aGUgdHJlZSBpZiBuZWNlc3NhcnkuICBXZSByZXR1cm4gdHJ1ZSBpZiBpdCBtYXkgaGF2ZSBiZWVuIHZpc2libGUsIG1lYW5pbmcgdmlld3MgbmVlZCB0byByZWV2YWx1YXRlLlxuICpcbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHdyaXRlIG1heSBoYXZlIGJlZW4gdmlzaWJsZSAobWVhbmluZyB3ZSdsbCBuZWVkIHRvIHJlZXZhbHVhdGUgLyByYWlzZVxuICogZXZlbnRzIGFzIGEgcmVzdWx0KS5cbiAqL1xuZnVuY3Rpb24gd3JpdGVUcmVlUmVtb3ZlV3JpdGUod3JpdGVUcmVlLCB3cml0ZUlkKSB7XG4gICAgLy8gTm90ZTogZGlzYWJsaW5nIHRoaXMgY2hlY2suIEl0IGNvdWxkIGJlIGEgdHJhbnNhY3Rpb24gdGhhdCBwcmVlbXB0ZWQgYW5vdGhlciB0cmFuc2FjdGlvbiwgYW5kIHRodXMgd2FzIGFwcGxpZWRcbiAgICAvLyBvdXQgb2Ygb3JkZXIuXG4gICAgLy9jb25zdCB2YWxpZENsZWFyID0gcmV2ZXJ0IHx8IHRoaXMuYWxsV3JpdGVzXy5sZW5ndGggPT09IDAgfHwgd3JpdGVJZCA8PSB0aGlzLmFsbFdyaXRlc19bMF0ud3JpdGVJZDtcbiAgICAvL2Fzc2VydCh2YWxpZENsZWFyLCBcIkVpdGhlciB3ZSBkb24ndCBoYXZlIHRoaXMgd3JpdGUsIG9yIGl0J3MgdGhlIGZpcnN0IG9uZSBpbiB0aGUgcXVldWVcIik7XG4gICAgY29uc3QgaWR4ID0gd3JpdGVUcmVlLmFsbFdyaXRlcy5maW5kSW5kZXgocyA9PiB7XG4gICAgICAgIHJldHVybiBzLndyaXRlSWQgPT09IHdyaXRlSWQ7XG4gICAgfSk7XG4gICAgYXNzZXJ0KGlkeCA+PSAwLCAncmVtb3ZlV3JpdGUgY2FsbGVkIHdpdGggbm9uZXhpc3RlbnQgd3JpdGVJZC4nKTtcbiAgICBjb25zdCB3cml0ZVRvUmVtb3ZlID0gd3JpdGVUcmVlLmFsbFdyaXRlc1tpZHhdO1xuICAgIHdyaXRlVHJlZS5hbGxXcml0ZXMuc3BsaWNlKGlkeCwgMSk7XG4gICAgbGV0IHJlbW92ZWRXcml0ZVdhc1Zpc2libGUgPSB3cml0ZVRvUmVtb3ZlLnZpc2libGU7XG4gICAgbGV0IHJlbW92ZWRXcml0ZU92ZXJsYXBzV2l0aE90aGVyV3JpdGVzID0gZmFsc2U7XG4gICAgbGV0IGkgPSB3cml0ZVRyZWUuYWxsV3JpdGVzLmxlbmd0aCAtIDE7XG4gICAgd2hpbGUgKHJlbW92ZWRXcml0ZVdhc1Zpc2libGUgJiYgaSA+PSAwKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRXcml0ZSA9IHdyaXRlVHJlZS5hbGxXcml0ZXNbaV07XG4gICAgICAgIGlmIChjdXJyZW50V3JpdGUudmlzaWJsZSkge1xuICAgICAgICAgICAgaWYgKGkgPj0gaWR4ICYmXG4gICAgICAgICAgICAgICAgd3JpdGVUcmVlUmVjb3JkQ29udGFpbnNQYXRoXyhjdXJyZW50V3JpdGUsIHdyaXRlVG9SZW1vdmUucGF0aCkpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgcmVtb3ZlZCB3cml0ZSB3YXMgY29tcGxldGVseSBzaGFkb3dlZCBieSBhIHN1YnNlcXVlbnQgd3JpdGUuXG4gICAgICAgICAgICAgICAgcmVtb3ZlZFdyaXRlV2FzVmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocGF0aENvbnRhaW5zKHdyaXRlVG9SZW1vdmUucGF0aCwgY3VycmVudFdyaXRlLnBhdGgpKSB7XG4gICAgICAgICAgICAgICAgLy8gRWl0aGVyIHdlJ3JlIGNvdmVyaW5nIHNvbWUgd3JpdGVzIG9yIHRoZXkncmUgY292ZXJpbmcgcGFydCBvZiB1cyAoZGVwZW5kaW5nIG9uIHdoaWNoIGNhbWUgZmlyc3QpLlxuICAgICAgICAgICAgICAgIHJlbW92ZWRXcml0ZU92ZXJsYXBzV2l0aE90aGVyV3JpdGVzID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpLS07XG4gICAgfVxuICAgIGlmICghcmVtb3ZlZFdyaXRlV2FzVmlzaWJsZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGVsc2UgaWYgKHJlbW92ZWRXcml0ZU92ZXJsYXBzV2l0aE90aGVyV3JpdGVzKSB7XG4gICAgICAgIC8vIFRoZXJlJ3Mgc29tZSBzaGFkb3dpbmcgZ29pbmcgb24uIEp1c3QgcmVidWlsZCB0aGUgdmlzaWJsZSB3cml0ZXMgZnJvbSBzY3JhdGNoLlxuICAgICAgICB3cml0ZVRyZWVSZXNldFRyZWVfKHdyaXRlVHJlZSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gVGhlcmUncyBubyBzaGFkb3dpbmcuICBXZSBjYW4gc2FmZWx5IGp1c3QgcmVtb3ZlIHRoZSB3cml0ZShzKSBmcm9tIHZpc2libGVXcml0ZXMuXG4gICAgICAgIGlmICh3cml0ZVRvUmVtb3ZlLnNuYXApIHtcbiAgICAgICAgICAgIHdyaXRlVHJlZS52aXNpYmxlV3JpdGVzID0gY29tcG91bmRXcml0ZVJlbW92ZVdyaXRlKHdyaXRlVHJlZS52aXNpYmxlV3JpdGVzLCB3cml0ZVRvUmVtb3ZlLnBhdGgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgY2hpbGRyZW4gPSB3cml0ZVRvUmVtb3ZlLmNoaWxkcmVuO1xuICAgICAgICAgICAgZWFjaChjaGlsZHJlbiwgKGNoaWxkTmFtZSkgPT4ge1xuICAgICAgICAgICAgICAgIHdyaXRlVHJlZS52aXNpYmxlV3JpdGVzID0gY29tcG91bmRXcml0ZVJlbW92ZVdyaXRlKHdyaXRlVHJlZS52aXNpYmxlV3JpdGVzLCBwYXRoQ2hpbGQod3JpdGVUb1JlbW92ZS5wYXRoLCBjaGlsZE5hbWUpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHdyaXRlVHJlZVJlY29yZENvbnRhaW5zUGF0aF8od3JpdGVSZWNvcmQsIHBhdGgpIHtcbiAgICBpZiAod3JpdGVSZWNvcmQuc25hcCkge1xuICAgICAgICByZXR1cm4gcGF0aENvbnRhaW5zKHdyaXRlUmVjb3JkLnBhdGgsIHBhdGgpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZm9yIChjb25zdCBjaGlsZE5hbWUgaW4gd3JpdGVSZWNvcmQuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIGlmICh3cml0ZVJlY29yZC5jaGlsZHJlbi5oYXNPd25Qcm9wZXJ0eShjaGlsZE5hbWUpICYmXG4gICAgICAgICAgICAgICAgcGF0aENvbnRhaW5zKHBhdGhDaGlsZCh3cml0ZVJlY29yZC5wYXRoLCBjaGlsZE5hbWUpLCBwYXRoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG4vKipcbiAqIFJlLWxheWVyIHRoZSB3cml0ZXMgYW5kIG1lcmdlcyBpbnRvIGEgdHJlZSBzbyB3ZSBjYW4gZWZmaWNpZW50bHkgY2FsY3VsYXRlIGV2ZW50IHNuYXBzaG90c1xuICovXG5mdW5jdGlvbiB3cml0ZVRyZWVSZXNldFRyZWVfKHdyaXRlVHJlZSkge1xuICAgIHdyaXRlVHJlZS52aXNpYmxlV3JpdGVzID0gd3JpdGVUcmVlTGF5ZXJUcmVlXyh3cml0ZVRyZWUuYWxsV3JpdGVzLCB3cml0ZVRyZWVEZWZhdWx0RmlsdGVyXywgbmV3RW1wdHlQYXRoKCkpO1xuICAgIGlmICh3cml0ZVRyZWUuYWxsV3JpdGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgd3JpdGVUcmVlLmxhc3RXcml0ZUlkID1cbiAgICAgICAgICAgIHdyaXRlVHJlZS5hbGxXcml0ZXNbd3JpdGVUcmVlLmFsbFdyaXRlcy5sZW5ndGggLSAxXS53cml0ZUlkO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgd3JpdGVUcmVlLmxhc3RXcml0ZUlkID0gLTE7XG4gICAgfVxufVxuLyoqXG4gKiBUaGUgZGVmYXVsdCBmaWx0ZXIgdXNlZCB3aGVuIGNvbnN0cnVjdGluZyB0aGUgdHJlZS4gS2VlcCBldmVyeXRoaW5nIHRoYXQncyB2aXNpYmxlLlxuICovXG5mdW5jdGlvbiB3cml0ZVRyZWVEZWZhdWx0RmlsdGVyXyh3cml0ZSkge1xuICAgIHJldHVybiB3cml0ZS52aXNpYmxlO1xufVxuLyoqXG4gKiBTdGF0aWMgbWV0aG9kLiBHaXZlbiBhbiBhcnJheSBvZiBXcml0ZVJlY29yZHMsIGEgZmlsdGVyIGZvciB3aGljaCBvbmVzIHRvIGluY2x1ZGUsIGFuZCBhIHBhdGgsIGNvbnN0cnVjdCB0aGUgdHJlZSBvZlxuICogZXZlbnQgZGF0YSBhdCB0aGF0IHBhdGguXG4gKi9cbmZ1bmN0aW9uIHdyaXRlVHJlZUxheWVyVHJlZV8od3JpdGVzLCBmaWx0ZXIsIHRyZWVSb290KSB7XG4gICAgbGV0IGNvbXBvdW5kV3JpdGUgPSBDb21wb3VuZFdyaXRlLmVtcHR5KCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3cml0ZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgY29uc3Qgd3JpdGUgPSB3cml0ZXNbaV07XG4gICAgICAgIC8vIFRoZW9yeSwgYSBsYXRlciBzZXQgd2lsbCBlaXRoZXI6XG4gICAgICAgIC8vIGEpIGFib3J0IGEgcmVsZXZhbnQgdHJhbnNhY3Rpb24sIHNvIG5vIG5lZWQgdG8gd29ycnkgYWJvdXQgZXhjbHVkaW5nIGl0IGZyb20gY2FsY3VsYXRpbmcgdGhhdCB0cmFuc2FjdGlvblxuICAgICAgICAvLyBiKSBub3QgYmUgcmVsZXZhbnQgdG8gYSB0cmFuc2FjdGlvbiAoc2VwYXJhdGUgYnJhbmNoKSwgc28gYWdhaW4gd2lsbCBub3QgYWZmZWN0IHRoZSBkYXRhIGZvciB0aGF0IHRyYW5zYWN0aW9uXG4gICAgICAgIGlmIChmaWx0ZXIod3JpdGUpKSB7XG4gICAgICAgICAgICBjb25zdCB3cml0ZVBhdGggPSB3cml0ZS5wYXRoO1xuICAgICAgICAgICAgbGV0IHJlbGF0aXZlUGF0aDtcbiAgICAgICAgICAgIGlmICh3cml0ZS5zbmFwKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBhdGhDb250YWlucyh0cmVlUm9vdCwgd3JpdGVQYXRoKSkge1xuICAgICAgICAgICAgICAgICAgICByZWxhdGl2ZVBhdGggPSBuZXdSZWxhdGl2ZVBhdGgodHJlZVJvb3QsIHdyaXRlUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBvdW5kV3JpdGUgPSBjb21wb3VuZFdyaXRlQWRkV3JpdGUoY29tcG91bmRXcml0ZSwgcmVsYXRpdmVQYXRoLCB3cml0ZS5zbmFwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocGF0aENvbnRhaW5zKHdyaXRlUGF0aCwgdHJlZVJvb3QpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbGF0aXZlUGF0aCA9IG5ld1JlbGF0aXZlUGF0aCh3cml0ZVBhdGgsIHRyZWVSb290KTtcbiAgICAgICAgICAgICAgICAgICAgY29tcG91bmRXcml0ZSA9IGNvbXBvdW5kV3JpdGVBZGRXcml0ZShjb21wb3VuZFdyaXRlLCBuZXdFbXB0eVBhdGgoKSwgd3JpdGUuc25hcC5nZXRDaGlsZChyZWxhdGl2ZVBhdGgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh3cml0ZS5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgIGlmIChwYXRoQ29udGFpbnModHJlZVJvb3QsIHdyaXRlUGF0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVsYXRpdmVQYXRoID0gbmV3UmVsYXRpdmVQYXRoKHRyZWVSb290LCB3cml0ZVBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBjb21wb3VuZFdyaXRlID0gY29tcG91bmRXcml0ZUFkZFdyaXRlcyhjb21wb3VuZFdyaXRlLCByZWxhdGl2ZVBhdGgsIHdyaXRlLmNoaWxkcmVuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocGF0aENvbnRhaW5zKHdyaXRlUGF0aCwgdHJlZVJvb3QpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbGF0aXZlUGF0aCA9IG5ld1JlbGF0aXZlUGF0aCh3cml0ZVBhdGgsIHRyZWVSb290KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhdGhJc0VtcHR5KHJlbGF0aXZlUGF0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvdW5kV3JpdGUgPSBjb21wb3VuZFdyaXRlQWRkV3JpdGVzKGNvbXBvdW5kV3JpdGUsIG5ld0VtcHR5UGF0aCgpLCB3cml0ZS5jaGlsZHJlbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGlsZCA9IHNhZmVHZXQod3JpdGUuY2hpbGRyZW4sIHBhdGhHZXRGcm9udChyZWxhdGl2ZVBhdGgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZXJlIGV4aXN0cyBhIGNoaWxkIGluIHRoaXMgbm9kZSB0aGF0IG1hdGNoZXMgdGhlIHJvb3QgcGF0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlZXBOb2RlID0gY2hpbGQuZ2V0Q2hpbGQocGF0aFBvcEZyb250KHJlbGF0aXZlUGF0aCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvdW5kV3JpdGUgPSBjb21wb3VuZFdyaXRlQWRkV3JpdGUoY29tcG91bmRXcml0ZSwgbmV3RW1wdHlQYXRoKCksIGRlZXBOb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IGFzc2VydGlvbkVycm9yKCdXcml0ZVJlY29yZCBzaG91bGQgaGF2ZSAuc25hcCBvciAuY2hpbGRyZW4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY29tcG91bmRXcml0ZTtcbn1cbi8qKlxuICogR2l2ZW4gb3B0aW9uYWwsIHVuZGVybHlpbmcgc2VydmVyIGRhdGEsIGFuZCBhbiBvcHRpb25hbCBzZXQgb2YgY29uc3RyYWludHMgKGV4Y2x1ZGUgc29tZSBzZXRzLCBpbmNsdWRlIGhpZGRlblxuICogd3JpdGVzKSwgYXR0ZW1wdCB0byBjYWxjdWxhdGUgYSBjb21wbGV0ZSBzbmFwc2hvdCBmb3IgdGhlIGdpdmVuIHBhdGhcbiAqXG4gKiBAcGFyYW0gd3JpdGVJZHNUb0V4Y2x1ZGUgLSBBbiBvcHRpb25hbCBzZXQgdG8gYmUgZXhjbHVkZWRcbiAqIEBwYXJhbSBpbmNsdWRlSGlkZGVuV3JpdGVzIC0gRGVmYXVsdHMgdG8gZmFsc2UsIHdoZXRoZXIgb3Igbm90IHRvIGxheWVyIG9uIHdyaXRlcyB3aXRoIHZpc2libGUgc2V0IHRvIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIHdyaXRlVHJlZUNhbGNDb21wbGV0ZUV2ZW50Q2FjaGUod3JpdGVUcmVlLCB0cmVlUGF0aCwgY29tcGxldGVTZXJ2ZXJDYWNoZSwgd3JpdGVJZHNUb0V4Y2x1ZGUsIGluY2x1ZGVIaWRkZW5Xcml0ZXMpIHtcbiAgICBpZiAoIXdyaXRlSWRzVG9FeGNsdWRlICYmICFpbmNsdWRlSGlkZGVuV3JpdGVzKSB7XG4gICAgICAgIGNvbnN0IHNoYWRvd2luZ05vZGUgPSBjb21wb3VuZFdyaXRlR2V0Q29tcGxldGVOb2RlKHdyaXRlVHJlZS52aXNpYmxlV3JpdGVzLCB0cmVlUGF0aCk7XG4gICAgICAgIGlmIChzaGFkb3dpbmdOb2RlICE9IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBzaGFkb3dpbmdOb2RlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3Qgc3ViTWVyZ2UgPSBjb21wb3VuZFdyaXRlQ2hpbGRDb21wb3VuZFdyaXRlKHdyaXRlVHJlZS52aXNpYmxlV3JpdGVzLCB0cmVlUGF0aCk7XG4gICAgICAgICAgICBpZiAoY29tcG91bmRXcml0ZUlzRW1wdHkoc3ViTWVyZ2UpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBsZXRlU2VydmVyQ2FjaGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjb21wbGV0ZVNlcnZlckNhY2hlID09IG51bGwgJiZcbiAgICAgICAgICAgICAgICAhY29tcG91bmRXcml0ZUhhc0NvbXBsZXRlV3JpdGUoc3ViTWVyZ2UsIG5ld0VtcHR5UGF0aCgpKSkge1xuICAgICAgICAgICAgICAgIC8vIFdlIHdvdWxkbid0IGhhdmUgYSBjb21wbGV0ZSBzbmFwc2hvdCwgc2luY2UgdGhlcmUncyBubyB1bmRlcmx5aW5nIGRhdGEgYW5kIG5vIGNvbXBsZXRlIHNoYWRvd1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGF5ZXJlZENhY2hlID0gY29tcGxldGVTZXJ2ZXJDYWNoZSB8fCBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tcG91bmRXcml0ZUFwcGx5KHN1Yk1lcmdlLCBsYXllcmVkQ2FjaGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBtZXJnZSA9IGNvbXBvdW5kV3JpdGVDaGlsZENvbXBvdW5kV3JpdGUod3JpdGVUcmVlLnZpc2libGVXcml0ZXMsIHRyZWVQYXRoKTtcbiAgICAgICAgaWYgKCFpbmNsdWRlSGlkZGVuV3JpdGVzICYmIGNvbXBvdW5kV3JpdGVJc0VtcHR5KG1lcmdlKSkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbXBsZXRlU2VydmVyQ2FjaGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBJZiB0aGUgc2VydmVyIGNhY2hlIGlzIG51bGwsIGFuZCB3ZSBkb24ndCBoYXZlIGEgY29tcGxldGUgY2FjaGUsIHdlIG5lZWQgdG8gcmV0dXJuIG51bGxcbiAgICAgICAgICAgIGlmICghaW5jbHVkZUhpZGRlbldyaXRlcyAmJlxuICAgICAgICAgICAgICAgIGNvbXBsZXRlU2VydmVyQ2FjaGUgPT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgICFjb21wb3VuZFdyaXRlSGFzQ29tcGxldGVXcml0ZShtZXJnZSwgbmV3RW1wdHlQYXRoKCkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWx0ZXIgPSBmdW5jdGlvbiAod3JpdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgod3JpdGUudmlzaWJsZSB8fCBpbmNsdWRlSGlkZGVuV3JpdGVzKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgKCF3cml0ZUlkc1RvRXhjbHVkZSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICF+d3JpdGVJZHNUb0V4Y2x1ZGUuaW5kZXhPZih3cml0ZS53cml0ZUlkKSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIChwYXRoQ29udGFpbnMod3JpdGUucGF0aCwgdHJlZVBhdGgpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aENvbnRhaW5zKHRyZWVQYXRoLCB3cml0ZS5wYXRoKSkpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc3QgbWVyZ2VBdFBhdGggPSB3cml0ZVRyZWVMYXllclRyZWVfKHdyaXRlVHJlZS5hbGxXcml0ZXMsIGZpbHRlciwgdHJlZVBhdGgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxheWVyZWRDYWNoZSA9IGNvbXBsZXRlU2VydmVyQ2FjaGUgfHwgQ2hpbGRyZW5Ob2RlLkVNUFRZX05PREU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBvdW5kV3JpdGVBcHBseShtZXJnZUF0UGF0aCwgbGF5ZXJlZENhY2hlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogV2l0aCBvcHRpb25hbCwgdW5kZXJseWluZyBzZXJ2ZXIgZGF0YSwgYXR0ZW1wdCB0byByZXR1cm4gYSBjaGlsZHJlbiBub2RlIG9mIGNoaWxkcmVuIHRoYXQgd2UgaGF2ZSBjb21wbGV0ZSBkYXRhIGZvci5cbiAqIFVzZWQgd2hlbiBjcmVhdGluZyBuZXcgdmlld3MsIHRvIHByZS1maWxsIHRoZWlyIGNvbXBsZXRlIGV2ZW50IGNoaWxkcmVuIHNuYXBzaG90LlxuICovXG5mdW5jdGlvbiB3cml0ZVRyZWVDYWxjQ29tcGxldGVFdmVudENoaWxkcmVuKHdyaXRlVHJlZSwgdHJlZVBhdGgsIGNvbXBsZXRlU2VydmVyQ2hpbGRyZW4pIHtcbiAgICBsZXQgY29tcGxldGVDaGlsZHJlbiA9IENoaWxkcmVuTm9kZS5FTVBUWV9OT0RFO1xuICAgIGNvbnN0IHRvcExldmVsU2V0ID0gY29tcG91bmRXcml0ZUdldENvbXBsZXRlTm9kZSh3cml0ZVRyZWUudmlzaWJsZVdyaXRlcywgdHJlZVBhdGgpO1xuICAgIGlmICh0b3BMZXZlbFNldCkge1xuICAgICAgICBpZiAoIXRvcExldmVsU2V0LmlzTGVhZk5vZGUoKSkge1xuICAgICAgICAgICAgLy8gd2UncmUgc2hhZG93aW5nIGV2ZXJ5dGhpbmcuIFJldHVybiB0aGUgY2hpbGRyZW4uXG4gICAgICAgICAgICB0b3BMZXZlbFNldC5mb3JFYWNoQ2hpbGQoUFJJT1JJVFlfSU5ERVgsIChjaGlsZE5hbWUsIGNoaWxkU25hcCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbXBsZXRlQ2hpbGRyZW4gPSBjb21wbGV0ZUNoaWxkcmVuLnVwZGF0ZUltbWVkaWF0ZUNoaWxkKGNoaWxkTmFtZSwgY2hpbGRTbmFwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb21wbGV0ZUNoaWxkcmVuO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb21wbGV0ZVNlcnZlckNoaWxkcmVuKSB7XG4gICAgICAgIC8vIExheWVyIGFueSBjaGlsZHJlbiB3ZSBoYXZlIG9uIHRvcCBvZiB0aGlzXG4gICAgICAgIC8vIFdlIGtub3cgd2UgZG9uJ3QgaGF2ZSBhIHRvcC1sZXZlbCBzZXQsIHNvIGp1c3QgZW51bWVyYXRlIGV4aXN0aW5nIGNoaWxkcmVuXG4gICAgICAgIGNvbnN0IG1lcmdlID0gY29tcG91bmRXcml0ZUNoaWxkQ29tcG91bmRXcml0ZSh3cml0ZVRyZWUudmlzaWJsZVdyaXRlcywgdHJlZVBhdGgpO1xuICAgICAgICBjb21wbGV0ZVNlcnZlckNoaWxkcmVuLmZvckVhY2hDaGlsZChQUklPUklUWV9JTkRFWCwgKGNoaWxkTmFtZSwgY2hpbGROb2RlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBub2RlID0gY29tcG91bmRXcml0ZUFwcGx5KGNvbXBvdW5kV3JpdGVDaGlsZENvbXBvdW5kV3JpdGUobWVyZ2UsIG5ldyBQYXRoKGNoaWxkTmFtZSkpLCBjaGlsZE5vZGUpO1xuICAgICAgICAgICAgY29tcGxldGVDaGlsZHJlbiA9IGNvbXBsZXRlQ2hpbGRyZW4udXBkYXRlSW1tZWRpYXRlQ2hpbGQoY2hpbGROYW1lLCBub2RlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIEFkZCBhbnkgY29tcGxldGUgY2hpbGRyZW4gd2UgaGF2ZSBmcm9tIHRoZSBzZXRcbiAgICAgICAgY29tcG91bmRXcml0ZUdldENvbXBsZXRlQ2hpbGRyZW4obWVyZ2UpLmZvckVhY2gobmFtZWROb2RlID0+IHtcbiAgICAgICAgICAgIGNvbXBsZXRlQ2hpbGRyZW4gPSBjb21wbGV0ZUNoaWxkcmVuLnVwZGF0ZUltbWVkaWF0ZUNoaWxkKG5hbWVkTm9kZS5uYW1lLCBuYW1lZE5vZGUubm9kZSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gY29tcGxldGVDaGlsZHJlbjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIFdlIGRvbid0IGhhdmUgYW55dGhpbmcgdG8gbGF5ZXIgb24gdG9wIG9mLiBMYXllciBvbiBhbnkgY2hpbGRyZW4gd2UgaGF2ZVxuICAgICAgICAvLyBOb3RlIHRoYXQgd2UgY2FuIHJldHVybiBhbiBlbXB0eSBzbmFwIGlmIHdlIGhhdmUgYSBkZWZpbmVkIGRlbGV0ZVxuICAgICAgICBjb25zdCBtZXJnZSA9IGNvbXBvdW5kV3JpdGVDaGlsZENvbXBvdW5kV3JpdGUod3JpdGVUcmVlLnZpc2libGVXcml0ZXMsIHRyZWVQYXRoKTtcbiAgICAgICAgY29tcG91bmRXcml0ZUdldENvbXBsZXRlQ2hpbGRyZW4obWVyZ2UpLmZvckVhY2gobmFtZWROb2RlID0+IHtcbiAgICAgICAgICAgIGNvbXBsZXRlQ2hpbGRyZW4gPSBjb21wbGV0ZUNoaWxkcmVuLnVwZGF0ZUltbWVkaWF0ZUNoaWxkKG5hbWVkTm9kZS5uYW1lLCBuYW1lZE5vZGUubm9kZSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gY29tcGxldGVDaGlsZHJlbjtcbiAgICB9XG59XG4vKipcbiAqIEdpdmVuIHRoYXQgdGhlIHVuZGVybHlpbmcgc2VydmVyIGRhdGEgaGFzIHVwZGF0ZWQsIGRldGVybWluZSB3aGF0LCBpZiBhbnl0aGluZywgbmVlZHMgdG8gYmVcbiAqIGFwcGxpZWQgdG8gdGhlIGV2ZW50IGNhY2hlLlxuICpcbiAqIFBvc3NpYmlsaXRpZXM6XG4gKlxuICogMS4gTm8gd3JpdGVzIGFyZSBzaGFkb3dpbmcuIEV2ZW50cyBzaG91bGQgYmUgcmFpc2VkLCB0aGUgc25hcCB0byBiZSBhcHBsaWVkIGNvbWVzIGZyb20gdGhlIHNlcnZlciBkYXRhXG4gKlxuICogMi4gU29tZSB3cml0ZSBpcyBjb21wbGV0ZWx5IHNoYWRvd2luZy4gTm8gZXZlbnRzIHRvIGJlIHJhaXNlZFxuICpcbiAqIDMuIElzIHBhcnRpYWxseSBzaGFkb3dlZC4gRXZlbnRzXG4gKlxuICogRWl0aGVyIGV4aXN0aW5nRXZlbnRTbmFwIG9yIGV4aXN0aW5nU2VydmVyU25hcCBtdXN0IGV4aXN0XG4gKi9cbmZ1bmN0aW9uIHdyaXRlVHJlZUNhbGNFdmVudENhY2hlQWZ0ZXJTZXJ2ZXJPdmVyd3JpdGUod3JpdGVUcmVlLCB0cmVlUGF0aCwgY2hpbGRQYXRoLCBleGlzdGluZ0V2ZW50U25hcCwgZXhpc3RpbmdTZXJ2ZXJTbmFwKSB7XG4gICAgYXNzZXJ0KGV4aXN0aW5nRXZlbnRTbmFwIHx8IGV4aXN0aW5nU2VydmVyU25hcCwgJ0VpdGhlciBleGlzdGluZ0V2ZW50U25hcCBvciBleGlzdGluZ1NlcnZlclNuYXAgbXVzdCBleGlzdCcpO1xuICAgIGNvbnN0IHBhdGggPSBwYXRoQ2hpbGQodHJlZVBhdGgsIGNoaWxkUGF0aCk7XG4gICAgaWYgKGNvbXBvdW5kV3JpdGVIYXNDb21wbGV0ZVdyaXRlKHdyaXRlVHJlZS52aXNpYmxlV3JpdGVzLCBwYXRoKSkge1xuICAgICAgICAvLyBBdCB0aGlzIHBvaW50IHdlIGNhbiBwcm9iYWJseSBndWFyYW50ZWUgdGhhdCB3ZSdyZSBpbiBjYXNlIDIsIG1lYW5pbmcgbm8gZXZlbnRzXG4gICAgICAgIC8vIE1heSBuZWVkIHRvIGNoZWNrIHZpc2liaWxpdHkgd2hpbGUgZG9pbmcgdGhlIGZpbmRSb290TW9zdFZhbHVlQW5kUGF0aCBjYWxsXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gTm8gY29tcGxldGUgc2hhZG93aW5nLiBXZSdyZSBlaXRoZXIgcGFydGlhbGx5IHNoYWRvd2luZyBvciBub3Qgc2hhZG93aW5nIGF0IGFsbC5cbiAgICAgICAgY29uc3QgY2hpbGRNZXJnZSA9IGNvbXBvdW5kV3JpdGVDaGlsZENvbXBvdW5kV3JpdGUod3JpdGVUcmVlLnZpc2libGVXcml0ZXMsIHBhdGgpO1xuICAgICAgICBpZiAoY29tcG91bmRXcml0ZUlzRW1wdHkoY2hpbGRNZXJnZSkpIHtcbiAgICAgICAgICAgIC8vIFdlJ3JlIG5vdCBzaGFkb3dpbmcgYXQgYWxsLiBDYXNlIDFcbiAgICAgICAgICAgIHJldHVybiBleGlzdGluZ1NlcnZlclNuYXAuZ2V0Q2hpbGQoY2hpbGRQYXRoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIFRoaXMgY291bGQgYmUgbW9yZSBlZmZpY2llbnQgaWYgdGhlIHNlcnZlck5vZGUgKyB1cGRhdGVzIGRvZXNuJ3QgY2hhbmdlIHRoZSBldmVudFNuYXBcbiAgICAgICAgICAgIC8vIEhvd2V2ZXIgdGhpcyBpcyB0cmlja3kgdG8gZmluZCBvdXQsIHNpbmNlIHVzZXIgdXBkYXRlcyBkb24ndCBuZWNlc3NhcnkgY2hhbmdlIHRoZSBzZXJ2ZXJcbiAgICAgICAgICAgIC8vIHNuYXAsIGUuZy4gcHJpb3JpdHkgdXBkYXRlcyBvbiBlbXB0eSBub2Rlcywgb3IgZGVlcCBkZWxldGVzLiBBbm90aGVyIHNwZWNpYWwgY2FzZSBpcyBpZiB0aGUgc2VydmVyXG4gICAgICAgICAgICAvLyBhZGRzIG5vZGVzLCBidXQgZG9lc24ndCBjaGFuZ2UgYW55IGV4aXN0aW5nIHdyaXRlcy4gSXQgaXMgdGhlcmVmb3JlIG5vdCBlbm91Z2ggdG9cbiAgICAgICAgICAgIC8vIG9ubHkgY2hlY2sgaWYgdGhlIHVwZGF0ZXMgY2hhbmdlIHRoZSBzZXJ2ZXJOb2RlLlxuICAgICAgICAgICAgLy8gTWF5YmUgY2hlY2sgaWYgdGhlIG1lcmdlIHRyZWUgY29udGFpbnMgdGhlc2Ugc3BlY2lhbCBjYXNlcyBhbmQgb25seSBkbyBhIGZ1bGwgb3ZlcndyaXRlIGluIHRoYXQgY2FzZT9cbiAgICAgICAgICAgIHJldHVybiBjb21wb3VuZFdyaXRlQXBwbHkoY2hpbGRNZXJnZSwgZXhpc3RpbmdTZXJ2ZXJTbmFwLmdldENoaWxkKGNoaWxkUGF0aCkpO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBSZXR1cm5zIGEgY29tcGxldGUgY2hpbGQgZm9yIGEgZ2l2ZW4gc2VydmVyIHNuYXAgYWZ0ZXIgYXBwbHlpbmcgYWxsIHVzZXIgd3JpdGVzIG9yIG51bGwgaWYgdGhlcmUgaXMgbm9cbiAqIGNvbXBsZXRlIGNoaWxkIGZvciB0aGlzIENoaWxkS2V5LlxuICovXG5mdW5jdGlvbiB3cml0ZVRyZWVDYWxjQ29tcGxldGVDaGlsZCh3cml0ZVRyZWUsIHRyZWVQYXRoLCBjaGlsZEtleSwgZXhpc3RpbmdTZXJ2ZXJTbmFwKSB7XG4gICAgY29uc3QgcGF0aCA9IHBhdGhDaGlsZCh0cmVlUGF0aCwgY2hpbGRLZXkpO1xuICAgIGNvbnN0IHNoYWRvd2luZ05vZGUgPSBjb21wb3VuZFdyaXRlR2V0Q29tcGxldGVOb2RlKHdyaXRlVHJlZS52aXNpYmxlV3JpdGVzLCBwYXRoKTtcbiAgICBpZiAoc2hhZG93aW5nTm9kZSAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBzaGFkb3dpbmdOb2RlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKGV4aXN0aW5nU2VydmVyU25hcC5pc0NvbXBsZXRlRm9yQ2hpbGQoY2hpbGRLZXkpKSB7XG4gICAgICAgICAgICBjb25zdCBjaGlsZE1lcmdlID0gY29tcG91bmRXcml0ZUNoaWxkQ29tcG91bmRXcml0ZSh3cml0ZVRyZWUudmlzaWJsZVdyaXRlcywgcGF0aCk7XG4gICAgICAgICAgICByZXR1cm4gY29tcG91bmRXcml0ZUFwcGx5KGNoaWxkTWVyZ2UsIGV4aXN0aW5nU2VydmVyU25hcC5nZXROb2RlKCkuZ2V0SW1tZWRpYXRlQ2hpbGQoY2hpbGRLZXkpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBSZXR1cm5zIGEgbm9kZSBpZiB0aGVyZSBpcyBhIGNvbXBsZXRlIG92ZXJ3cml0ZSBmb3IgdGhpcyBwYXRoLiBNb3JlIHNwZWNpZmljYWxseSwgaWYgdGhlcmUgaXMgYSB3cml0ZSBhdFxuICogYSBoaWdoZXIgcGF0aCwgdGhpcyB3aWxsIHJldHVybiB0aGUgY2hpbGQgb2YgdGhhdCB3cml0ZSByZWxhdGl2ZSB0byB0aGUgd3JpdGUgYW5kIHRoaXMgcGF0aC5cbiAqIFJldHVybnMgbnVsbCBpZiB0aGVyZSBpcyBubyB3cml0ZSBhdCB0aGlzIHBhdGguXG4gKi9cbmZ1bmN0aW9uIHdyaXRlVHJlZVNoYWRvd2luZ1dyaXRlKHdyaXRlVHJlZSwgcGF0aCkge1xuICAgIHJldHVybiBjb21wb3VuZFdyaXRlR2V0Q29tcGxldGVOb2RlKHdyaXRlVHJlZS52aXNpYmxlV3JpdGVzLCBwYXRoKTtcbn1cbi8qKlxuICogVGhpcyBtZXRob2QgaXMgdXNlZCB3aGVuIHByb2Nlc3NpbmcgY2hpbGQgcmVtb3ZlIGV2ZW50cyBvbiBhIHF1ZXJ5LiBJZiB3ZSBjYW4sIHdlIHB1bGwgaW4gY2hpbGRyZW4gdGhhdCB3ZXJlIG91dHNpZGVcbiAqIHRoZSB3aW5kb3csIGJ1dCBtYXkgbm93IGJlIGluIHRoZSB3aW5kb3cuXG4gKi9cbmZ1bmN0aW9uIHdyaXRlVHJlZUNhbGNJbmRleGVkU2xpY2Uod3JpdGVUcmVlLCB0cmVlUGF0aCwgY29tcGxldGVTZXJ2ZXJEYXRhLCBzdGFydFBvc3QsIGNvdW50LCByZXZlcnNlLCBpbmRleCkge1xuICAgIGxldCB0b0l0ZXJhdGU7XG4gICAgY29uc3QgbWVyZ2UgPSBjb21wb3VuZFdyaXRlQ2hpbGRDb21wb3VuZFdyaXRlKHdyaXRlVHJlZS52aXNpYmxlV3JpdGVzLCB0cmVlUGF0aCk7XG4gICAgY29uc3Qgc2hhZG93aW5nTm9kZSA9IGNvbXBvdW5kV3JpdGVHZXRDb21wbGV0ZU5vZGUobWVyZ2UsIG5ld0VtcHR5UGF0aCgpKTtcbiAgICBpZiAoc2hhZG93aW5nTm9kZSAhPSBudWxsKSB7XG4gICAgICAgIHRvSXRlcmF0ZSA9IHNoYWRvd2luZ05vZGU7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvbXBsZXRlU2VydmVyRGF0YSAhPSBudWxsKSB7XG4gICAgICAgIHRvSXRlcmF0ZSA9IGNvbXBvdW5kV3JpdGVBcHBseShtZXJnZSwgY29tcGxldGVTZXJ2ZXJEYXRhKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIG5vIGNoaWxkcmVuIHRvIGl0ZXJhdGUgb25cbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICB0b0l0ZXJhdGUgPSB0b0l0ZXJhdGUud2l0aEluZGV4KGluZGV4KTtcbiAgICBpZiAoIXRvSXRlcmF0ZS5pc0VtcHR5KCkgJiYgIXRvSXRlcmF0ZS5pc0xlYWZOb2RlKCkpIHtcbiAgICAgICAgY29uc3Qgbm9kZXMgPSBbXTtcbiAgICAgICAgY29uc3QgY21wID0gaW5kZXguZ2V0Q29tcGFyZSgpO1xuICAgICAgICBjb25zdCBpdGVyID0gcmV2ZXJzZVxuICAgICAgICAgICAgPyB0b0l0ZXJhdGUuZ2V0UmV2ZXJzZUl0ZXJhdG9yRnJvbShzdGFydFBvc3QsIGluZGV4KVxuICAgICAgICAgICAgOiB0b0l0ZXJhdGUuZ2V0SXRlcmF0b3JGcm9tKHN0YXJ0UG9zdCwgaW5kZXgpO1xuICAgICAgICBsZXQgbmV4dCA9IGl0ZXIuZ2V0TmV4dCgpO1xuICAgICAgICB3aGlsZSAobmV4dCAmJiBub2Rlcy5sZW5ndGggPCBjb3VudCkge1xuICAgICAgICAgICAgaWYgKGNtcChuZXh0LCBzdGFydFBvc3QpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgbm9kZXMucHVzaChuZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5leHQgPSBpdGVyLmdldE5leHQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbm9kZXM7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxufVxuZnVuY3Rpb24gbmV3V3JpdGVUcmVlKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHZpc2libGVXcml0ZXM6IENvbXBvdW5kV3JpdGUuZW1wdHkoKSxcbiAgICAgICAgYWxsV3JpdGVzOiBbXSxcbiAgICAgICAgbGFzdFdyaXRlSWQ6IC0xXG4gICAgfTtcbn1cbi8qKlxuICogSWYgcG9zc2libGUsIHJldHVybnMgYSBjb21wbGV0ZSBldmVudCBjYWNoZSwgdXNpbmcgdGhlIHVuZGVybHlpbmcgc2VydmVyIGRhdGEgaWYgcG9zc2libGUuIEluIGFkZGl0aW9uLCBjYW4gYmUgdXNlZFxuICogdG8gZ2V0IGEgY2FjaGUgdGhhdCBpbmNsdWRlcyBoaWRkZW4gd3JpdGVzLCBhbmQgZXhjbHVkZXMgYXJiaXRyYXJ5IHdyaXRlcy4gTm90ZSB0aGF0IGN1c3RvbWl6aW5nIHRoZSByZXR1cm5lZCBub2RlXG4gKiBjYW4gbGVhZCB0byBhIG1vcmUgZXhwZW5zaXZlIGNhbGN1bGF0aW9uLlxuICpcbiAqIEBwYXJhbSB3cml0ZUlkc1RvRXhjbHVkZSAtIE9wdGlvbmFsIHdyaXRlcyB0byBleGNsdWRlLlxuICogQHBhcmFtIGluY2x1ZGVIaWRkZW5Xcml0ZXMgLSBEZWZhdWx0cyB0byBmYWxzZSwgd2hldGhlciBvciBub3QgdG8gbGF5ZXIgb24gd3JpdGVzIHdpdGggdmlzaWJsZSBzZXQgdG8gZmFsc2VcbiAqL1xuZnVuY3Rpb24gd3JpdGVUcmVlUmVmQ2FsY0NvbXBsZXRlRXZlbnRDYWNoZSh3cml0ZVRyZWVSZWYsIGNvbXBsZXRlU2VydmVyQ2FjaGUsIHdyaXRlSWRzVG9FeGNsdWRlLCBpbmNsdWRlSGlkZGVuV3JpdGVzKSB7XG4gICAgcmV0dXJuIHdyaXRlVHJlZUNhbGNDb21wbGV0ZUV2ZW50Q2FjaGUod3JpdGVUcmVlUmVmLndyaXRlVHJlZSwgd3JpdGVUcmVlUmVmLnRyZWVQYXRoLCBjb21wbGV0ZVNlcnZlckNhY2hlLCB3cml0ZUlkc1RvRXhjbHVkZSwgaW5jbHVkZUhpZGRlbldyaXRlcyk7XG59XG4vKipcbiAqIElmIHBvc3NpYmxlLCByZXR1cm5zIGEgY2hpbGRyZW4gbm9kZSBjb250YWluaW5nIGFsbCBvZiB0aGUgY29tcGxldGUgY2hpbGRyZW4gd2UgaGF2ZSBkYXRhIGZvci4gVGhlIHJldHVybmVkIGRhdGEgaXMgYVxuICogbWl4IG9mIHRoZSBnaXZlbiBzZXJ2ZXIgZGF0YSBhbmQgd3JpdGUgZGF0YS5cbiAqXG4gKi9cbmZ1bmN0aW9uIHdyaXRlVHJlZVJlZkNhbGNDb21wbGV0ZUV2ZW50Q2hpbGRyZW4od3JpdGVUcmVlUmVmLCBjb21wbGV0ZVNlcnZlckNoaWxkcmVuKSB7XG4gICAgcmV0dXJuIHdyaXRlVHJlZUNhbGNDb21wbGV0ZUV2ZW50Q2hpbGRyZW4od3JpdGVUcmVlUmVmLndyaXRlVHJlZSwgd3JpdGVUcmVlUmVmLnRyZWVQYXRoLCBjb21wbGV0ZVNlcnZlckNoaWxkcmVuKTtcbn1cbi8qKlxuICogR2l2ZW4gdGhhdCBlaXRoZXIgdGhlIHVuZGVybHlpbmcgc2VydmVyIGRhdGEgaGFzIHVwZGF0ZWQgb3IgdGhlIG91dHN0YW5kaW5nIHdyaXRlcyBoYXZlIHVwZGF0ZWQsIGRldGVybWluZSB3aGF0LFxuICogaWYgYW55dGhpbmcsIG5lZWRzIHRvIGJlIGFwcGxpZWQgdG8gdGhlIGV2ZW50IGNhY2hlLlxuICpcbiAqIFBvc3NpYmlsaXRpZXM6XG4gKlxuICogMS4gTm8gd3JpdGVzIGFyZSBzaGFkb3dpbmcuIEV2ZW50cyBzaG91bGQgYmUgcmFpc2VkLCB0aGUgc25hcCB0byBiZSBhcHBsaWVkIGNvbWVzIGZyb20gdGhlIHNlcnZlciBkYXRhXG4gKlxuICogMi4gU29tZSB3cml0ZSBpcyBjb21wbGV0ZWx5IHNoYWRvd2luZy4gTm8gZXZlbnRzIHRvIGJlIHJhaXNlZFxuICpcbiAqIDMuIElzIHBhcnRpYWxseSBzaGFkb3dlZC4gRXZlbnRzIHNob3VsZCBiZSByYWlzZWRcbiAqXG4gKiBFaXRoZXIgZXhpc3RpbmdFdmVudFNuYXAgb3IgZXhpc3RpbmdTZXJ2ZXJTbmFwIG11c3QgZXhpc3QsIHRoaXMgaXMgdmFsaWRhdGVkIHZpYSBhbiBhc3NlcnRcbiAqXG4gKlxuICovXG5mdW5jdGlvbiB3cml0ZVRyZWVSZWZDYWxjRXZlbnRDYWNoZUFmdGVyU2VydmVyT3ZlcndyaXRlKHdyaXRlVHJlZVJlZiwgcGF0aCwgZXhpc3RpbmdFdmVudFNuYXAsIGV4aXN0aW5nU2VydmVyU25hcCkge1xuICAgIHJldHVybiB3cml0ZVRyZWVDYWxjRXZlbnRDYWNoZUFmdGVyU2VydmVyT3ZlcndyaXRlKHdyaXRlVHJlZVJlZi53cml0ZVRyZWUsIHdyaXRlVHJlZVJlZi50cmVlUGF0aCwgcGF0aCwgZXhpc3RpbmdFdmVudFNuYXAsIGV4aXN0aW5nU2VydmVyU25hcCk7XG59XG4vKipcbiAqIFJldHVybnMgYSBub2RlIGlmIHRoZXJlIGlzIGEgY29tcGxldGUgb3ZlcndyaXRlIGZvciB0aGlzIHBhdGguIE1vcmUgc3BlY2lmaWNhbGx5LCBpZiB0aGVyZSBpcyBhIHdyaXRlIGF0XG4gKiBhIGhpZ2hlciBwYXRoLCB0aGlzIHdpbGwgcmV0dXJuIHRoZSBjaGlsZCBvZiB0aGF0IHdyaXRlIHJlbGF0aXZlIHRvIHRoZSB3cml0ZSBhbmQgdGhpcyBwYXRoLlxuICogUmV0dXJucyBudWxsIGlmIHRoZXJlIGlzIG5vIHdyaXRlIGF0IHRoaXMgcGF0aC5cbiAqXG4gKi9cbmZ1bmN0aW9uIHdyaXRlVHJlZVJlZlNoYWRvd2luZ1dyaXRlKHdyaXRlVHJlZVJlZiwgcGF0aCkge1xuICAgIHJldHVybiB3cml0ZVRyZWVTaGFkb3dpbmdXcml0ZSh3cml0ZVRyZWVSZWYud3JpdGVUcmVlLCBwYXRoQ2hpbGQod3JpdGVUcmVlUmVmLnRyZWVQYXRoLCBwYXRoKSk7XG59XG4vKipcbiAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgd2hlbiBwcm9jZXNzaW5nIGNoaWxkIHJlbW92ZSBldmVudHMgb24gYSBxdWVyeS4gSWYgd2UgY2FuLCB3ZSBwdWxsIGluIGNoaWxkcmVuIHRoYXQgd2VyZSBvdXRzaWRlXG4gKiB0aGUgd2luZG93LCBidXQgbWF5IG5vdyBiZSBpbiB0aGUgd2luZG93XG4gKi9cbmZ1bmN0aW9uIHdyaXRlVHJlZVJlZkNhbGNJbmRleGVkU2xpY2Uod3JpdGVUcmVlUmVmLCBjb21wbGV0ZVNlcnZlckRhdGEsIHN0YXJ0UG9zdCwgY291bnQsIHJldmVyc2UsIGluZGV4KSB7XG4gICAgcmV0dXJuIHdyaXRlVHJlZUNhbGNJbmRleGVkU2xpY2Uod3JpdGVUcmVlUmVmLndyaXRlVHJlZSwgd3JpdGVUcmVlUmVmLnRyZWVQYXRoLCBjb21wbGV0ZVNlcnZlckRhdGEsIHN0YXJ0UG9zdCwgY291bnQsIHJldmVyc2UsIGluZGV4KTtcbn1cbi8qKlxuICogUmV0dXJucyBhIGNvbXBsZXRlIGNoaWxkIGZvciBhIGdpdmVuIHNlcnZlciBzbmFwIGFmdGVyIGFwcGx5aW5nIGFsbCB1c2VyIHdyaXRlcyBvciBudWxsIGlmIHRoZXJlIGlzIG5vXG4gKiBjb21wbGV0ZSBjaGlsZCBmb3IgdGhpcyBDaGlsZEtleS5cbiAqL1xuZnVuY3Rpb24gd3JpdGVUcmVlUmVmQ2FsY0NvbXBsZXRlQ2hpbGQod3JpdGVUcmVlUmVmLCBjaGlsZEtleSwgZXhpc3RpbmdTZXJ2ZXJDYWNoZSkge1xuICAgIHJldHVybiB3cml0ZVRyZWVDYWxjQ29tcGxldGVDaGlsZCh3cml0ZVRyZWVSZWYud3JpdGVUcmVlLCB3cml0ZVRyZWVSZWYudHJlZVBhdGgsIGNoaWxkS2V5LCBleGlzdGluZ1NlcnZlckNhY2hlKTtcbn1cbi8qKlxuICogUmV0dXJuIGEgV3JpdGVUcmVlUmVmIGZvciBhIGNoaWxkLlxuICovXG5mdW5jdGlvbiB3cml0ZVRyZWVSZWZDaGlsZCh3cml0ZVRyZWVSZWYsIGNoaWxkTmFtZSkge1xuICAgIHJldHVybiBuZXdXcml0ZVRyZWVSZWYocGF0aENoaWxkKHdyaXRlVHJlZVJlZi50cmVlUGF0aCwgY2hpbGROYW1lKSwgd3JpdGVUcmVlUmVmLndyaXRlVHJlZSk7XG59XG5mdW5jdGlvbiBuZXdXcml0ZVRyZWVSZWYocGF0aCwgd3JpdGVUcmVlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHJlZVBhdGg6IHBhdGgsXG4gICAgICAgIHdyaXRlVHJlZVxuICAgIH07XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jbGFzcyBDaGlsZENoYW5nZUFjY3VtdWxhdG9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VNYXAgPSBuZXcgTWFwKCk7XG4gICAgfVxuICAgIHRyYWNrQ2hpbGRDaGFuZ2UoY2hhbmdlKSB7XG4gICAgICAgIGNvbnN0IHR5cGUgPSBjaGFuZ2UudHlwZTtcbiAgICAgICAgY29uc3QgY2hpbGRLZXkgPSBjaGFuZ2UuY2hpbGROYW1lO1xuICAgICAgICBhc3NlcnQodHlwZSA9PT0gXCJjaGlsZF9hZGRlZFwiIC8qIENoYW5nZVR5cGUuQ0hJTERfQURERUQgKi8gfHxcbiAgICAgICAgICAgIHR5cGUgPT09IFwiY2hpbGRfY2hhbmdlZFwiIC8qIENoYW5nZVR5cGUuQ0hJTERfQ0hBTkdFRCAqLyB8fFxuICAgICAgICAgICAgdHlwZSA9PT0gXCJjaGlsZF9yZW1vdmVkXCIgLyogQ2hhbmdlVHlwZS5DSElMRF9SRU1PVkVEICovLCAnT25seSBjaGlsZCBjaGFuZ2VzIHN1cHBvcnRlZCBmb3IgdHJhY2tpbmcnKTtcbiAgICAgICAgYXNzZXJ0KGNoaWxkS2V5ICE9PSAnLnByaW9yaXR5JywgJ09ubHkgbm9uLXByaW9yaXR5IGNoaWxkIGNoYW5nZXMgY2FuIGJlIHRyYWNrZWQuJyk7XG4gICAgICAgIGNvbnN0IG9sZENoYW5nZSA9IHRoaXMuY2hhbmdlTWFwLmdldChjaGlsZEtleSk7XG4gICAgICAgIGlmIChvbGRDaGFuZ2UpIHtcbiAgICAgICAgICAgIGNvbnN0IG9sZFR5cGUgPSBvbGRDaGFuZ2UudHlwZTtcbiAgICAgICAgICAgIGlmICh0eXBlID09PSBcImNoaWxkX2FkZGVkXCIgLyogQ2hhbmdlVHlwZS5DSElMRF9BRERFRCAqLyAmJlxuICAgICAgICAgICAgICAgIG9sZFR5cGUgPT09IFwiY2hpbGRfcmVtb3ZlZFwiIC8qIENoYW5nZVR5cGUuQ0hJTERfUkVNT1ZFRCAqLykge1xuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlTWFwLnNldChjaGlsZEtleSwgY2hhbmdlQ2hpbGRDaGFuZ2VkKGNoaWxkS2V5LCBjaGFuZ2Uuc25hcHNob3ROb2RlLCBvbGRDaGFuZ2Uuc25hcHNob3ROb2RlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlID09PSBcImNoaWxkX3JlbW92ZWRcIiAvKiBDaGFuZ2VUeXBlLkNISUxEX1JFTU9WRUQgKi8gJiZcbiAgICAgICAgICAgICAgICBvbGRUeXBlID09PSBcImNoaWxkX2FkZGVkXCIgLyogQ2hhbmdlVHlwZS5DSElMRF9BRERFRCAqLykge1xuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlTWFwLmRlbGV0ZShjaGlsZEtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlID09PSBcImNoaWxkX3JlbW92ZWRcIiAvKiBDaGFuZ2VUeXBlLkNISUxEX1JFTU9WRUQgKi8gJiZcbiAgICAgICAgICAgICAgICBvbGRUeXBlID09PSBcImNoaWxkX2NoYW5nZWRcIiAvKiBDaGFuZ2VUeXBlLkNISUxEX0NIQU5HRUQgKi8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZU1hcC5zZXQoY2hpbGRLZXksIGNoYW5nZUNoaWxkUmVtb3ZlZChjaGlsZEtleSwgb2xkQ2hhbmdlLm9sZFNuYXApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUgPT09IFwiY2hpbGRfY2hhbmdlZFwiIC8qIENoYW5nZVR5cGUuQ0hJTERfQ0hBTkdFRCAqLyAmJlxuICAgICAgICAgICAgICAgIG9sZFR5cGUgPT09IFwiY2hpbGRfYWRkZWRcIiAvKiBDaGFuZ2VUeXBlLkNISUxEX0FEREVEICovKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VNYXAuc2V0KGNoaWxkS2V5LCBjaGFuZ2VDaGlsZEFkZGVkKGNoaWxkS2V5LCBjaGFuZ2Uuc25hcHNob3ROb2RlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlID09PSBcImNoaWxkX2NoYW5nZWRcIiAvKiBDaGFuZ2VUeXBlLkNISUxEX0NIQU5HRUQgKi8gJiZcbiAgICAgICAgICAgICAgICBvbGRUeXBlID09PSBcImNoaWxkX2NoYW5nZWRcIiAvKiBDaGFuZ2VUeXBlLkNISUxEX0NIQU5HRUQgKi8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZU1hcC5zZXQoY2hpbGRLZXksIGNoYW5nZUNoaWxkQ2hhbmdlZChjaGlsZEtleSwgY2hhbmdlLnNuYXBzaG90Tm9kZSwgb2xkQ2hhbmdlLm9sZFNuYXApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IGFzc2VydGlvbkVycm9yKCdJbGxlZ2FsIGNvbWJpbmF0aW9uIG9mIGNoYW5nZXM6ICcgK1xuICAgICAgICAgICAgICAgICAgICBjaGFuZ2UgK1xuICAgICAgICAgICAgICAgICAgICAnIG9jY3VycmVkIGFmdGVyICcgK1xuICAgICAgICAgICAgICAgICAgICBvbGRDaGFuZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VNYXAuc2V0KGNoaWxkS2V5LCBjaGFuZ2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldENoYW5nZXMoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuY2hhbmdlTWFwLnZhbHVlcygpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIENvbXBsZXRlQ2hpbGRTb3VyY2UgdGhhdCBuZXZlciByZXR1cm5zIGFueSBhZGRpdGlvbmFsIGNoaWxkcmVuXG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb25cbmNsYXNzIE5vQ29tcGxldGVDaGlsZFNvdXJjZV8ge1xuICAgIGdldENvbXBsZXRlQ2hpbGQoY2hpbGRLZXkpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGdldENoaWxkQWZ0ZXJDaGlsZChpbmRleCwgY2hpbGQsIHJldmVyc2UpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuLyoqXG4gKiBTaW5nbGV0b24gaW5zdGFuY2UuXG4gKi9cbmNvbnN0IE5PX0NPTVBMRVRFX0NISUxEX1NPVVJDRSA9IG5ldyBOb0NvbXBsZXRlQ2hpbGRTb3VyY2VfKCk7XG4vKipcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIENvbXBsZXRlQ2hpbGRTb3VyY2UgdGhhdCB1c2VzIGEgV3JpdGVUcmVlIGluIGFkZGl0aW9uIHRvIGFueSBvdGhlciBzZXJ2ZXIgZGF0YSBvclxuICogb2xkIGV2ZW50IGNhY2hlcyBhdmFpbGFibGUgdG8gY2FsY3VsYXRlIGNvbXBsZXRlIGNoaWxkcmVuLlxuICovXG5jbGFzcyBXcml0ZVRyZWVDb21wbGV0ZUNoaWxkU291cmNlIHtcbiAgICBjb25zdHJ1Y3Rvcih3cml0ZXNfLCB2aWV3Q2FjaGVfLCBvcHRDb21wbGV0ZVNlcnZlckNhY2hlXyA9IG51bGwpIHtcbiAgICAgICAgdGhpcy53cml0ZXNfID0gd3JpdGVzXztcbiAgICAgICAgdGhpcy52aWV3Q2FjaGVfID0gdmlld0NhY2hlXztcbiAgICAgICAgdGhpcy5vcHRDb21wbGV0ZVNlcnZlckNhY2hlXyA9IG9wdENvbXBsZXRlU2VydmVyQ2FjaGVfO1xuICAgIH1cbiAgICBnZXRDb21wbGV0ZUNoaWxkKGNoaWxkS2V5KSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLnZpZXdDYWNoZV8uZXZlbnRDYWNoZTtcbiAgICAgICAgaWYgKG5vZGUuaXNDb21wbGV0ZUZvckNoaWxkKGNoaWxkS2V5KSkge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGUuZ2V0Tm9kZSgpLmdldEltbWVkaWF0ZUNoaWxkKGNoaWxkS2V5KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHNlcnZlck5vZGUgPSB0aGlzLm9wdENvbXBsZXRlU2VydmVyQ2FjaGVfICE9IG51bGxcbiAgICAgICAgICAgICAgICA/IG5ldyBDYWNoZU5vZGUodGhpcy5vcHRDb21wbGV0ZVNlcnZlckNhY2hlXywgdHJ1ZSwgZmFsc2UpXG4gICAgICAgICAgICAgICAgOiB0aGlzLnZpZXdDYWNoZV8uc2VydmVyQ2FjaGU7XG4gICAgICAgICAgICByZXR1cm4gd3JpdGVUcmVlUmVmQ2FsY0NvbXBsZXRlQ2hpbGQodGhpcy53cml0ZXNfLCBjaGlsZEtleSwgc2VydmVyTm9kZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0Q2hpbGRBZnRlckNoaWxkKGluZGV4LCBjaGlsZCwgcmV2ZXJzZSkge1xuICAgICAgICBjb25zdCBjb21wbGV0ZVNlcnZlckRhdGEgPSB0aGlzLm9wdENvbXBsZXRlU2VydmVyQ2FjaGVfICE9IG51bGxcbiAgICAgICAgICAgID8gdGhpcy5vcHRDb21wbGV0ZVNlcnZlckNhY2hlX1xuICAgICAgICAgICAgOiB2aWV3Q2FjaGVHZXRDb21wbGV0ZVNlcnZlclNuYXAodGhpcy52aWV3Q2FjaGVfKTtcbiAgICAgICAgY29uc3Qgbm9kZXMgPSB3cml0ZVRyZWVSZWZDYWxjSW5kZXhlZFNsaWNlKHRoaXMud3JpdGVzXywgY29tcGxldGVTZXJ2ZXJEYXRhLCBjaGlsZCwgMSwgcmV2ZXJzZSwgaW5kZXgpO1xuICAgICAgICBpZiAobm9kZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBub2Rlc1swXTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmZ1bmN0aW9uIG5ld1ZpZXdQcm9jZXNzb3IoZmlsdGVyKSB7XG4gICAgcmV0dXJuIHsgZmlsdGVyIH07XG59XG5mdW5jdGlvbiB2aWV3UHJvY2Vzc29yQXNzZXJ0SW5kZXhlZCh2aWV3UHJvY2Vzc29yLCB2aWV3Q2FjaGUpIHtcbiAgICBhc3NlcnQodmlld0NhY2hlLmV2ZW50Q2FjaGUuZ2V0Tm9kZSgpLmlzSW5kZXhlZCh2aWV3UHJvY2Vzc29yLmZpbHRlci5nZXRJbmRleCgpKSwgJ0V2ZW50IHNuYXAgbm90IGluZGV4ZWQnKTtcbiAgICBhc3NlcnQodmlld0NhY2hlLnNlcnZlckNhY2hlLmdldE5vZGUoKS5pc0luZGV4ZWQodmlld1Byb2Nlc3Nvci5maWx0ZXIuZ2V0SW5kZXgoKSksICdTZXJ2ZXIgc25hcCBub3QgaW5kZXhlZCcpO1xufVxuZnVuY3Rpb24gdmlld1Byb2Nlc3NvckFwcGx5T3BlcmF0aW9uKHZpZXdQcm9jZXNzb3IsIG9sZFZpZXdDYWNoZSwgb3BlcmF0aW9uLCB3cml0ZXNDYWNoZSwgY29tcGxldGVDYWNoZSkge1xuICAgIGNvbnN0IGFjY3VtdWxhdG9yID0gbmV3IENoaWxkQ2hhbmdlQWNjdW11bGF0b3IoKTtcbiAgICBsZXQgbmV3Vmlld0NhY2hlLCBmaWx0ZXJTZXJ2ZXJOb2RlO1xuICAgIGlmIChvcGVyYXRpb24udHlwZSA9PT0gT3BlcmF0aW9uVHlwZS5PVkVSV1JJVEUpIHtcbiAgICAgICAgY29uc3Qgb3ZlcndyaXRlID0gb3BlcmF0aW9uO1xuICAgICAgICBpZiAob3ZlcndyaXRlLnNvdXJjZS5mcm9tVXNlcikge1xuICAgICAgICAgICAgbmV3Vmlld0NhY2hlID0gdmlld1Byb2Nlc3NvckFwcGx5VXNlck92ZXJ3cml0ZSh2aWV3UHJvY2Vzc29yLCBvbGRWaWV3Q2FjaGUsIG92ZXJ3cml0ZS5wYXRoLCBvdmVyd3JpdGUuc25hcCwgd3JpdGVzQ2FjaGUsIGNvbXBsZXRlQ2FjaGUsIGFjY3VtdWxhdG9yKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGFzc2VydChvdmVyd3JpdGUuc291cmNlLmZyb21TZXJ2ZXIsICdVbmtub3duIHNvdXJjZS4nKTtcbiAgICAgICAgICAgIC8vIFdlIGZpbHRlciB0aGUgbm9kZSBpZiBpdCdzIGEgdGFnZ2VkIHVwZGF0ZSBvciB0aGUgbm9kZSBoYXMgYmVlbiBwcmV2aW91c2x5IGZpbHRlcmVkICBhbmQgdGhlXG4gICAgICAgICAgICAvLyB1cGRhdGUgaXMgbm90IGF0IHRoZSByb290IGluIHdoaWNoIGNhc2UgaXQgaXMgb2sgKGFuZCBuZWNlc3NhcnkpIHRvIG1hcmsgdGhlIG5vZGUgdW5maWx0ZXJlZFxuICAgICAgICAgICAgLy8gYWdhaW5cbiAgICAgICAgICAgIGZpbHRlclNlcnZlck5vZGUgPVxuICAgICAgICAgICAgICAgIG92ZXJ3cml0ZS5zb3VyY2UudGFnZ2VkIHx8XG4gICAgICAgICAgICAgICAgICAgIChvbGRWaWV3Q2FjaGUuc2VydmVyQ2FjaGUuaXNGaWx0ZXJlZCgpICYmICFwYXRoSXNFbXB0eShvdmVyd3JpdGUucGF0aCkpO1xuICAgICAgICAgICAgbmV3Vmlld0NhY2hlID0gdmlld1Byb2Nlc3NvckFwcGx5U2VydmVyT3ZlcndyaXRlKHZpZXdQcm9jZXNzb3IsIG9sZFZpZXdDYWNoZSwgb3ZlcndyaXRlLnBhdGgsIG92ZXJ3cml0ZS5zbmFwLCB3cml0ZXNDYWNoZSwgY29tcGxldGVDYWNoZSwgZmlsdGVyU2VydmVyTm9kZSwgYWNjdW11bGF0b3IpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKG9wZXJhdGlvbi50eXBlID09PSBPcGVyYXRpb25UeXBlLk1FUkdFKSB7XG4gICAgICAgIGNvbnN0IG1lcmdlID0gb3BlcmF0aW9uO1xuICAgICAgICBpZiAobWVyZ2Uuc291cmNlLmZyb21Vc2VyKSB7XG4gICAgICAgICAgICBuZXdWaWV3Q2FjaGUgPSB2aWV3UHJvY2Vzc29yQXBwbHlVc2VyTWVyZ2Uodmlld1Byb2Nlc3Nvciwgb2xkVmlld0NhY2hlLCBtZXJnZS5wYXRoLCBtZXJnZS5jaGlsZHJlbiwgd3JpdGVzQ2FjaGUsIGNvbXBsZXRlQ2FjaGUsIGFjY3VtdWxhdG9yKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGFzc2VydChtZXJnZS5zb3VyY2UuZnJvbVNlcnZlciwgJ1Vua25vd24gc291cmNlLicpO1xuICAgICAgICAgICAgLy8gV2UgZmlsdGVyIHRoZSBub2RlIGlmIGl0J3MgYSB0YWdnZWQgdXBkYXRlIG9yIHRoZSBub2RlIGhhcyBiZWVuIHByZXZpb3VzbHkgZmlsdGVyZWRcbiAgICAgICAgICAgIGZpbHRlclNlcnZlck5vZGUgPVxuICAgICAgICAgICAgICAgIG1lcmdlLnNvdXJjZS50YWdnZWQgfHwgb2xkVmlld0NhY2hlLnNlcnZlckNhY2hlLmlzRmlsdGVyZWQoKTtcbiAgICAgICAgICAgIG5ld1ZpZXdDYWNoZSA9IHZpZXdQcm9jZXNzb3JBcHBseVNlcnZlck1lcmdlKHZpZXdQcm9jZXNzb3IsIG9sZFZpZXdDYWNoZSwgbWVyZ2UucGF0aCwgbWVyZ2UuY2hpbGRyZW4sIHdyaXRlc0NhY2hlLCBjb21wbGV0ZUNhY2hlLCBmaWx0ZXJTZXJ2ZXJOb2RlLCBhY2N1bXVsYXRvcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAob3BlcmF0aW9uLnR5cGUgPT09IE9wZXJhdGlvblR5cGUuQUNLX1VTRVJfV1JJVEUpIHtcbiAgICAgICAgY29uc3QgYWNrVXNlcldyaXRlID0gb3BlcmF0aW9uO1xuICAgICAgICBpZiAoIWFja1VzZXJXcml0ZS5yZXZlcnQpIHtcbiAgICAgICAgICAgIG5ld1ZpZXdDYWNoZSA9IHZpZXdQcm9jZXNzb3JBY2tVc2VyV3JpdGUodmlld1Byb2Nlc3Nvciwgb2xkVmlld0NhY2hlLCBhY2tVc2VyV3JpdGUucGF0aCwgYWNrVXNlcldyaXRlLmFmZmVjdGVkVHJlZSwgd3JpdGVzQ2FjaGUsIGNvbXBsZXRlQ2FjaGUsIGFjY3VtdWxhdG9yKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG5ld1ZpZXdDYWNoZSA9IHZpZXdQcm9jZXNzb3JSZXZlcnRVc2VyV3JpdGUodmlld1Byb2Nlc3Nvciwgb2xkVmlld0NhY2hlLCBhY2tVc2VyV3JpdGUucGF0aCwgd3JpdGVzQ2FjaGUsIGNvbXBsZXRlQ2FjaGUsIGFjY3VtdWxhdG9yKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChvcGVyYXRpb24udHlwZSA9PT0gT3BlcmF0aW9uVHlwZS5MSVNURU5fQ09NUExFVEUpIHtcbiAgICAgICAgbmV3Vmlld0NhY2hlID0gdmlld1Byb2Nlc3Nvckxpc3RlbkNvbXBsZXRlKHZpZXdQcm9jZXNzb3IsIG9sZFZpZXdDYWNoZSwgb3BlcmF0aW9uLnBhdGgsIHdyaXRlc0NhY2hlLCBhY2N1bXVsYXRvcik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBhc3NlcnRpb25FcnJvcignVW5rbm93biBvcGVyYXRpb24gdHlwZTogJyArIG9wZXJhdGlvbi50eXBlKTtcbiAgICB9XG4gICAgY29uc3QgY2hhbmdlcyA9IGFjY3VtdWxhdG9yLmdldENoYW5nZXMoKTtcbiAgICB2aWV3UHJvY2Vzc29yTWF5YmVBZGRWYWx1ZUV2ZW50KG9sZFZpZXdDYWNoZSwgbmV3Vmlld0NhY2hlLCBjaGFuZ2VzKTtcbiAgICByZXR1cm4geyB2aWV3Q2FjaGU6IG5ld1ZpZXdDYWNoZSwgY2hhbmdlcyB9O1xufVxuZnVuY3Rpb24gdmlld1Byb2Nlc3Nvck1heWJlQWRkVmFsdWVFdmVudChvbGRWaWV3Q2FjaGUsIG5ld1ZpZXdDYWNoZSwgYWNjdW11bGF0b3IpIHtcbiAgICBjb25zdCBldmVudFNuYXAgPSBuZXdWaWV3Q2FjaGUuZXZlbnRDYWNoZTtcbiAgICBpZiAoZXZlbnRTbmFwLmlzRnVsbHlJbml0aWFsaXplZCgpKSB7XG4gICAgICAgIGNvbnN0IGlzTGVhZk9yRW1wdHkgPSBldmVudFNuYXAuZ2V0Tm9kZSgpLmlzTGVhZk5vZGUoKSB8fCBldmVudFNuYXAuZ2V0Tm9kZSgpLmlzRW1wdHkoKTtcbiAgICAgICAgY29uc3Qgb2xkQ29tcGxldGVTbmFwID0gdmlld0NhY2hlR2V0Q29tcGxldGVFdmVudFNuYXAob2xkVmlld0NhY2hlKTtcbiAgICAgICAgaWYgKGFjY3VtdWxhdG9yLmxlbmd0aCA+IDAgfHxcbiAgICAgICAgICAgICFvbGRWaWV3Q2FjaGUuZXZlbnRDYWNoZS5pc0Z1bGx5SW5pdGlhbGl6ZWQoKSB8fFxuICAgICAgICAgICAgKGlzTGVhZk9yRW1wdHkgJiYgIWV2ZW50U25hcC5nZXROb2RlKCkuZXF1YWxzKG9sZENvbXBsZXRlU25hcCkpIHx8XG4gICAgICAgICAgICAhZXZlbnRTbmFwLmdldE5vZGUoKS5nZXRQcmlvcml0eSgpLmVxdWFscyhvbGRDb21wbGV0ZVNuYXAuZ2V0UHJpb3JpdHkoKSkpIHtcbiAgICAgICAgICAgIGFjY3VtdWxhdG9yLnB1c2goY2hhbmdlVmFsdWUodmlld0NhY2hlR2V0Q29tcGxldGVFdmVudFNuYXAobmV3Vmlld0NhY2hlKSkpO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gdmlld1Byb2Nlc3NvckdlbmVyYXRlRXZlbnRDYWNoZUFmdGVyU2VydmVyRXZlbnQodmlld1Byb2Nlc3Nvciwgdmlld0NhY2hlLCBjaGFuZ2VQYXRoLCB3cml0ZXNDYWNoZSwgc291cmNlLCBhY2N1bXVsYXRvcikge1xuICAgIGNvbnN0IG9sZEV2ZW50U25hcCA9IHZpZXdDYWNoZS5ldmVudENhY2hlO1xuICAgIGlmICh3cml0ZVRyZWVSZWZTaGFkb3dpbmdXcml0ZSh3cml0ZXNDYWNoZSwgY2hhbmdlUGF0aCkgIT0gbnVsbCkge1xuICAgICAgICAvLyB3ZSBoYXZlIGEgc2hhZG93aW5nIHdyaXRlLCBpZ25vcmUgY2hhbmdlc1xuICAgICAgICByZXR1cm4gdmlld0NhY2hlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbGV0IG5ld0V2ZW50Q2FjaGUsIHNlcnZlck5vZGU7XG4gICAgICAgIGlmIChwYXRoSXNFbXB0eShjaGFuZ2VQYXRoKSkge1xuICAgICAgICAgICAgLy8gVE9ETzogZmlndXJlIG91dCBob3cgdGhpcyBwbGF5cyB3aXRoIFwic2xpZGluZyBhY2sgd2luZG93c1wiXG4gICAgICAgICAgICBhc3NlcnQodmlld0NhY2hlLnNlcnZlckNhY2hlLmlzRnVsbHlJbml0aWFsaXplZCgpLCAnSWYgY2hhbmdlIHBhdGggaXMgZW1wdHksIHdlIG11c3QgaGF2ZSBjb21wbGV0ZSBzZXJ2ZXIgZGF0YScpO1xuICAgICAgICAgICAgaWYgKHZpZXdDYWNoZS5zZXJ2ZXJDYWNoZS5pc0ZpbHRlcmVkKCkpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIHNwZWNpYWwgY2FzZSB0aGlzLCBiZWNhdXNlIHdlIG5lZWQgdG8gb25seSBhcHBseSB3cml0ZXMgdG8gY29tcGxldGUgY2hpbGRyZW4sIG9yXG4gICAgICAgICAgICAgICAgLy8gd2UgbWlnaHQgZW5kIHVwIHJhaXNpbmcgZXZlbnRzIGZvciBpbmNvbXBsZXRlIGNoaWxkcmVuLiBJZiB0aGUgc2VydmVyIGRhdGEgaXMgZmlsdGVyZWQgZGVlcFxuICAgICAgICAgICAgICAgIC8vIHdyaXRlcyBjYW5ub3QgYmUgZ3VhcmFudGVlZCB0byBiZSBjb21wbGV0ZVxuICAgICAgICAgICAgICAgIGNvbnN0IHNlcnZlckNhY2hlID0gdmlld0NhY2hlR2V0Q29tcGxldGVTZXJ2ZXJTbmFwKHZpZXdDYWNoZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgY29tcGxldGVDaGlsZHJlbiA9IHNlcnZlckNhY2hlIGluc3RhbmNlb2YgQ2hpbGRyZW5Ob2RlXG4gICAgICAgICAgICAgICAgICAgID8gc2VydmVyQ2FjaGVcbiAgICAgICAgICAgICAgICAgICAgOiBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb21wbGV0ZUV2ZW50Q2hpbGRyZW4gPSB3cml0ZVRyZWVSZWZDYWxjQ29tcGxldGVFdmVudENoaWxkcmVuKHdyaXRlc0NhY2hlLCBjb21wbGV0ZUNoaWxkcmVuKTtcbiAgICAgICAgICAgICAgICBuZXdFdmVudENhY2hlID0gdmlld1Byb2Nlc3Nvci5maWx0ZXIudXBkYXRlRnVsbE5vZGUodmlld0NhY2hlLmV2ZW50Q2FjaGUuZ2V0Tm9kZSgpLCBjb21wbGV0ZUV2ZW50Q2hpbGRyZW4sIGFjY3VtdWxhdG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRlTm9kZSA9IHdyaXRlVHJlZVJlZkNhbGNDb21wbGV0ZUV2ZW50Q2FjaGUod3JpdGVzQ2FjaGUsIHZpZXdDYWNoZUdldENvbXBsZXRlU2VydmVyU25hcCh2aWV3Q2FjaGUpKTtcbiAgICAgICAgICAgICAgICBuZXdFdmVudENhY2hlID0gdmlld1Byb2Nlc3Nvci5maWx0ZXIudXBkYXRlRnVsbE5vZGUodmlld0NhY2hlLmV2ZW50Q2FjaGUuZ2V0Tm9kZSgpLCBjb21wbGV0ZU5vZGUsIGFjY3VtdWxhdG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkS2V5ID0gcGF0aEdldEZyb250KGNoYW5nZVBhdGgpO1xuICAgICAgICAgICAgaWYgKGNoaWxkS2V5ID09PSAnLnByaW9yaXR5Jykge1xuICAgICAgICAgICAgICAgIGFzc2VydChwYXRoR2V0TGVuZ3RoKGNoYW5nZVBhdGgpID09PSAxLCBcIkNhbid0IGhhdmUgYSBwcmlvcml0eSB3aXRoIGFkZGl0aW9uYWwgcGF0aCBjb21wb25lbnRzXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG9sZEV2ZW50Tm9kZSA9IG9sZEV2ZW50U25hcC5nZXROb2RlKCk7XG4gICAgICAgICAgICAgICAgc2VydmVyTm9kZSA9IHZpZXdDYWNoZS5zZXJ2ZXJDYWNoZS5nZXROb2RlKCk7XG4gICAgICAgICAgICAgICAgLy8gd2UgbWlnaHQgaGF2ZSBvdmVyd3JpdGVzIGZvciB0aGlzIHByaW9yaXR5XG4gICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZFByaW9yaXR5ID0gd3JpdGVUcmVlUmVmQ2FsY0V2ZW50Q2FjaGVBZnRlclNlcnZlck92ZXJ3cml0ZSh3cml0ZXNDYWNoZSwgY2hhbmdlUGF0aCwgb2xkRXZlbnROb2RlLCBzZXJ2ZXJOb2RlKTtcbiAgICAgICAgICAgICAgICBpZiAodXBkYXRlZFByaW9yaXR5ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3RXZlbnRDYWNoZSA9IHZpZXdQcm9jZXNzb3IuZmlsdGVyLnVwZGF0ZVByaW9yaXR5KG9sZEV2ZW50Tm9kZSwgdXBkYXRlZFByaW9yaXR5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHByaW9yaXR5IGRpZG4ndCBjaGFuZ2UsIGtlZXAgb2xkIG5vZGVcbiAgICAgICAgICAgICAgICAgICAgbmV3RXZlbnRDYWNoZSA9IG9sZEV2ZW50U25hcC5nZXROb2RlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hpbGRDaGFuZ2VQYXRoID0gcGF0aFBvcEZyb250KGNoYW5nZVBhdGgpO1xuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBjaGlsZFxuICAgICAgICAgICAgICAgIGxldCBuZXdFdmVudENoaWxkO1xuICAgICAgICAgICAgICAgIGlmIChvbGRFdmVudFNuYXAuaXNDb21wbGV0ZUZvckNoaWxkKGNoaWxkS2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJOb2RlID0gdmlld0NhY2hlLnNlcnZlckNhY2hlLmdldE5vZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXZlbnRDaGlsZFVwZGF0ZSA9IHdyaXRlVHJlZVJlZkNhbGNFdmVudENhY2hlQWZ0ZXJTZXJ2ZXJPdmVyd3JpdGUod3JpdGVzQ2FjaGUsIGNoYW5nZVBhdGgsIG9sZEV2ZW50U25hcC5nZXROb2RlKCksIHNlcnZlck5vZGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnRDaGlsZFVwZGF0ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdFdmVudENoaWxkID0gb2xkRXZlbnRTbmFwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmdldE5vZGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXRJbW1lZGlhdGVDaGlsZChjaGlsZEtleSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudXBkYXRlQ2hpbGQoY2hpbGRDaGFuZ2VQYXRoLCBldmVudENoaWxkVXBkYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdGhpbmcgY2hhbmdlZCwganVzdCBrZWVwIHRoZSBvbGQgY2hpbGRcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0V2ZW50Q2hpbGQgPSBvbGRFdmVudFNuYXAuZ2V0Tm9kZSgpLmdldEltbWVkaWF0ZUNoaWxkKGNoaWxkS2V5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3RXZlbnRDaGlsZCA9IHdyaXRlVHJlZVJlZkNhbGNDb21wbGV0ZUNoaWxkKHdyaXRlc0NhY2hlLCBjaGlsZEtleSwgdmlld0NhY2hlLnNlcnZlckNhY2hlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG5ld0V2ZW50Q2hpbGQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBuZXdFdmVudENhY2hlID0gdmlld1Byb2Nlc3Nvci5maWx0ZXIudXBkYXRlQ2hpbGQob2xkRXZlbnRTbmFwLmdldE5vZGUoKSwgY2hpbGRLZXksIG5ld0V2ZW50Q2hpbGQsIGNoaWxkQ2hhbmdlUGF0aCwgc291cmNlLCBhY2N1bXVsYXRvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBubyBjb21wbGV0ZSBjaGlsZCBhdmFpbGFibGUgb3Igbm8gY2hhbmdlXG4gICAgICAgICAgICAgICAgICAgIG5ld0V2ZW50Q2FjaGUgPSBvbGRFdmVudFNuYXAuZ2V0Tm9kZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmlld0NhY2hlVXBkYXRlRXZlbnRTbmFwKHZpZXdDYWNoZSwgbmV3RXZlbnRDYWNoZSwgb2xkRXZlbnRTbmFwLmlzRnVsbHlJbml0aWFsaXplZCgpIHx8IHBhdGhJc0VtcHR5KGNoYW5nZVBhdGgpLCB2aWV3UHJvY2Vzc29yLmZpbHRlci5maWx0ZXJzTm9kZXMoKSk7XG4gICAgfVxufVxuZnVuY3Rpb24gdmlld1Byb2Nlc3NvckFwcGx5U2VydmVyT3ZlcndyaXRlKHZpZXdQcm9jZXNzb3IsIG9sZFZpZXdDYWNoZSwgY2hhbmdlUGF0aCwgY2hhbmdlZFNuYXAsIHdyaXRlc0NhY2hlLCBjb21wbGV0ZUNhY2hlLCBmaWx0ZXJTZXJ2ZXJOb2RlLCBhY2N1bXVsYXRvcikge1xuICAgIGNvbnN0IG9sZFNlcnZlclNuYXAgPSBvbGRWaWV3Q2FjaGUuc2VydmVyQ2FjaGU7XG4gICAgbGV0IG5ld1NlcnZlckNhY2hlO1xuICAgIGNvbnN0IHNlcnZlckZpbHRlciA9IGZpbHRlclNlcnZlck5vZGVcbiAgICAgICAgPyB2aWV3UHJvY2Vzc29yLmZpbHRlclxuICAgICAgICA6IHZpZXdQcm9jZXNzb3IuZmlsdGVyLmdldEluZGV4ZWRGaWx0ZXIoKTtcbiAgICBpZiAocGF0aElzRW1wdHkoY2hhbmdlUGF0aCkpIHtcbiAgICAgICAgbmV3U2VydmVyQ2FjaGUgPSBzZXJ2ZXJGaWx0ZXIudXBkYXRlRnVsbE5vZGUob2xkU2VydmVyU25hcC5nZXROb2RlKCksIGNoYW5nZWRTbmFwLCBudWxsKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2VydmVyRmlsdGVyLmZpbHRlcnNOb2RlcygpICYmICFvbGRTZXJ2ZXJTbmFwLmlzRmlsdGVyZWQoKSkge1xuICAgICAgICAvLyB3ZSB3YW50IHRvIGZpbHRlciB0aGUgc2VydmVyIG5vZGUsIGJ1dCB3ZSBkaWRuJ3QgZmlsdGVyIHRoZSBzZXJ2ZXIgbm9kZSB5ZXQsIHNvIHNpbXVsYXRlIGEgZnVsbCB1cGRhdGVcbiAgICAgICAgY29uc3QgbmV3U2VydmVyTm9kZSA9IG9sZFNlcnZlclNuYXBcbiAgICAgICAgICAgIC5nZXROb2RlKClcbiAgICAgICAgICAgIC51cGRhdGVDaGlsZChjaGFuZ2VQYXRoLCBjaGFuZ2VkU25hcCk7XG4gICAgICAgIG5ld1NlcnZlckNhY2hlID0gc2VydmVyRmlsdGVyLnVwZGF0ZUZ1bGxOb2RlKG9sZFNlcnZlclNuYXAuZ2V0Tm9kZSgpLCBuZXdTZXJ2ZXJOb2RlLCBudWxsKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IGNoaWxkS2V5ID0gcGF0aEdldEZyb250KGNoYW5nZVBhdGgpO1xuICAgICAgICBpZiAoIW9sZFNlcnZlclNuYXAuaXNDb21wbGV0ZUZvclBhdGgoY2hhbmdlUGF0aCkgJiZcbiAgICAgICAgICAgIHBhdGhHZXRMZW5ndGgoY2hhbmdlUGF0aCkgPiAxKSB7XG4gICAgICAgICAgICAvLyBXZSBkb24ndCB1cGRhdGUgaW5jb21wbGV0ZSBub2RlcyB3aXRoIHVwZGF0ZXMgaW50ZW5kZWQgZm9yIG90aGVyIGxpc3RlbmVyc1xuICAgICAgICAgICAgcmV0dXJuIG9sZFZpZXdDYWNoZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjaGlsZENoYW5nZVBhdGggPSBwYXRoUG9wRnJvbnQoY2hhbmdlUGF0aCk7XG4gICAgICAgIGNvbnN0IGNoaWxkTm9kZSA9IG9sZFNlcnZlclNuYXAuZ2V0Tm9kZSgpLmdldEltbWVkaWF0ZUNoaWxkKGNoaWxkS2V5KTtcbiAgICAgICAgY29uc3QgbmV3Q2hpbGROb2RlID0gY2hpbGROb2RlLnVwZGF0ZUNoaWxkKGNoaWxkQ2hhbmdlUGF0aCwgY2hhbmdlZFNuYXApO1xuICAgICAgICBpZiAoY2hpbGRLZXkgPT09ICcucHJpb3JpdHknKSB7XG4gICAgICAgICAgICBuZXdTZXJ2ZXJDYWNoZSA9IHNlcnZlckZpbHRlci51cGRhdGVQcmlvcml0eShvbGRTZXJ2ZXJTbmFwLmdldE5vZGUoKSwgbmV3Q2hpbGROb2RlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG5ld1NlcnZlckNhY2hlID0gc2VydmVyRmlsdGVyLnVwZGF0ZUNoaWxkKG9sZFNlcnZlclNuYXAuZ2V0Tm9kZSgpLCBjaGlsZEtleSwgbmV3Q2hpbGROb2RlLCBjaGlsZENoYW5nZVBhdGgsIE5PX0NPTVBMRVRFX0NISUxEX1NPVVJDRSwgbnVsbCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgbmV3Vmlld0NhY2hlID0gdmlld0NhY2hlVXBkYXRlU2VydmVyU25hcChvbGRWaWV3Q2FjaGUsIG5ld1NlcnZlckNhY2hlLCBvbGRTZXJ2ZXJTbmFwLmlzRnVsbHlJbml0aWFsaXplZCgpIHx8IHBhdGhJc0VtcHR5KGNoYW5nZVBhdGgpLCBzZXJ2ZXJGaWx0ZXIuZmlsdGVyc05vZGVzKCkpO1xuICAgIGNvbnN0IHNvdXJjZSA9IG5ldyBXcml0ZVRyZWVDb21wbGV0ZUNoaWxkU291cmNlKHdyaXRlc0NhY2hlLCBuZXdWaWV3Q2FjaGUsIGNvbXBsZXRlQ2FjaGUpO1xuICAgIHJldHVybiB2aWV3UHJvY2Vzc29yR2VuZXJhdGVFdmVudENhY2hlQWZ0ZXJTZXJ2ZXJFdmVudCh2aWV3UHJvY2Vzc29yLCBuZXdWaWV3Q2FjaGUsIGNoYW5nZVBhdGgsIHdyaXRlc0NhY2hlLCBzb3VyY2UsIGFjY3VtdWxhdG9yKTtcbn1cbmZ1bmN0aW9uIHZpZXdQcm9jZXNzb3JBcHBseVVzZXJPdmVyd3JpdGUodmlld1Byb2Nlc3Nvciwgb2xkVmlld0NhY2hlLCBjaGFuZ2VQYXRoLCBjaGFuZ2VkU25hcCwgd3JpdGVzQ2FjaGUsIGNvbXBsZXRlQ2FjaGUsIGFjY3VtdWxhdG9yKSB7XG4gICAgY29uc3Qgb2xkRXZlbnRTbmFwID0gb2xkVmlld0NhY2hlLmV2ZW50Q2FjaGU7XG4gICAgbGV0IG5ld1ZpZXdDYWNoZSwgbmV3RXZlbnRDYWNoZTtcbiAgICBjb25zdCBzb3VyY2UgPSBuZXcgV3JpdGVUcmVlQ29tcGxldGVDaGlsZFNvdXJjZSh3cml0ZXNDYWNoZSwgb2xkVmlld0NhY2hlLCBjb21wbGV0ZUNhY2hlKTtcbiAgICBpZiAocGF0aElzRW1wdHkoY2hhbmdlUGF0aCkpIHtcbiAgICAgICAgbmV3RXZlbnRDYWNoZSA9IHZpZXdQcm9jZXNzb3IuZmlsdGVyLnVwZGF0ZUZ1bGxOb2RlKG9sZFZpZXdDYWNoZS5ldmVudENhY2hlLmdldE5vZGUoKSwgY2hhbmdlZFNuYXAsIGFjY3VtdWxhdG9yKTtcbiAgICAgICAgbmV3Vmlld0NhY2hlID0gdmlld0NhY2hlVXBkYXRlRXZlbnRTbmFwKG9sZFZpZXdDYWNoZSwgbmV3RXZlbnRDYWNoZSwgdHJ1ZSwgdmlld1Byb2Nlc3Nvci5maWx0ZXIuZmlsdGVyc05vZGVzKCkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgY2hpbGRLZXkgPSBwYXRoR2V0RnJvbnQoY2hhbmdlUGF0aCk7XG4gICAgICAgIGlmIChjaGlsZEtleSA9PT0gJy5wcmlvcml0eScpIHtcbiAgICAgICAgICAgIG5ld0V2ZW50Q2FjaGUgPSB2aWV3UHJvY2Vzc29yLmZpbHRlci51cGRhdGVQcmlvcml0eShvbGRWaWV3Q2FjaGUuZXZlbnRDYWNoZS5nZXROb2RlKCksIGNoYW5nZWRTbmFwKTtcbiAgICAgICAgICAgIG5ld1ZpZXdDYWNoZSA9IHZpZXdDYWNoZVVwZGF0ZUV2ZW50U25hcChvbGRWaWV3Q2FjaGUsIG5ld0V2ZW50Q2FjaGUsIG9sZEV2ZW50U25hcC5pc0Z1bGx5SW5pdGlhbGl6ZWQoKSwgb2xkRXZlbnRTbmFwLmlzRmlsdGVyZWQoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBjaGlsZENoYW5nZVBhdGggPSBwYXRoUG9wRnJvbnQoY2hhbmdlUGF0aCk7XG4gICAgICAgICAgICBjb25zdCBvbGRDaGlsZCA9IG9sZEV2ZW50U25hcC5nZXROb2RlKCkuZ2V0SW1tZWRpYXRlQ2hpbGQoY2hpbGRLZXkpO1xuICAgICAgICAgICAgbGV0IG5ld0NoaWxkO1xuICAgICAgICAgICAgaWYgKHBhdGhJc0VtcHR5KGNoaWxkQ2hhbmdlUGF0aCkpIHtcbiAgICAgICAgICAgICAgICAvLyBDaGlsZCBvdmVyd3JpdGUsIHdlIGNhbiByZXBsYWNlIHRoZSBjaGlsZFxuICAgICAgICAgICAgICAgIG5ld0NoaWxkID0gY2hhbmdlZFNuYXA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZE5vZGUgPSBzb3VyY2UuZ2V0Q29tcGxldGVDaGlsZChjaGlsZEtleSk7XG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkTm9kZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXRoR2V0QmFjayhjaGlsZENoYW5nZVBhdGgpID09PSAnLnByaW9yaXR5JyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGROb2RlLmdldENoaWxkKHBhdGhQYXJlbnQoY2hpbGRDaGFuZ2VQYXRoKSkuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGEgcHJpb3JpdHkgdXBkYXRlIG9uIGFuIGVtcHR5IG5vZGUuIElmIHRoaXMgbm9kZSBleGlzdHMgb24gdGhlIHNlcnZlciwgdGhlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXJ2ZXIgd2lsbCBzZW5kIGRvd24gdGhlIHByaW9yaXR5IGluIHRoZSB1cGRhdGUsIHNvIGlnbm9yZSBmb3Igbm93XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdDaGlsZCA9IGNoaWxkTm9kZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0NoaWxkID0gY2hpbGROb2RlLnVwZGF0ZUNoaWxkKGNoaWxkQ2hhbmdlUGF0aCwgY2hhbmdlZFNuYXApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGVyZSBpcyBubyBjb21wbGV0ZSBjaGlsZCBub2RlIGF2YWlsYWJsZVxuICAgICAgICAgICAgICAgICAgICBuZXdDaGlsZCA9IENoaWxkcmVuTm9kZS5FTVBUWV9OT0RFO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghb2xkQ2hpbGQuZXF1YWxzKG5ld0NoaWxkKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0V2ZW50U25hcCA9IHZpZXdQcm9jZXNzb3IuZmlsdGVyLnVwZGF0ZUNoaWxkKG9sZEV2ZW50U25hcC5nZXROb2RlKCksIGNoaWxkS2V5LCBuZXdDaGlsZCwgY2hpbGRDaGFuZ2VQYXRoLCBzb3VyY2UsIGFjY3VtdWxhdG9yKTtcbiAgICAgICAgICAgICAgICBuZXdWaWV3Q2FjaGUgPSB2aWV3Q2FjaGVVcGRhdGVFdmVudFNuYXAob2xkVmlld0NhY2hlLCBuZXdFdmVudFNuYXAsIG9sZEV2ZW50U25hcC5pc0Z1bGx5SW5pdGlhbGl6ZWQoKSwgdmlld1Byb2Nlc3Nvci5maWx0ZXIuZmlsdGVyc05vZGVzKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3Vmlld0NhY2hlID0gb2xkVmlld0NhY2hlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXdWaWV3Q2FjaGU7XG59XG5mdW5jdGlvbiB2aWV3UHJvY2Vzc29yQ2FjaGVIYXNDaGlsZCh2aWV3Q2FjaGUsIGNoaWxkS2V5KSB7XG4gICAgcmV0dXJuIHZpZXdDYWNoZS5ldmVudENhY2hlLmlzQ29tcGxldGVGb3JDaGlsZChjaGlsZEtleSk7XG59XG5mdW5jdGlvbiB2aWV3UHJvY2Vzc29yQXBwbHlVc2VyTWVyZ2Uodmlld1Byb2Nlc3Nvciwgdmlld0NhY2hlLCBwYXRoLCBjaGFuZ2VkQ2hpbGRyZW4sIHdyaXRlc0NhY2hlLCBzZXJ2ZXJDYWNoZSwgYWNjdW11bGF0b3IpIHtcbiAgICAvLyBIQUNLOiBJbiB0aGUgY2FzZSBvZiBhIGxpbWl0IHF1ZXJ5LCB0aGVyZSBtYXkgYmUgc29tZSBjaGFuZ2VzIHRoYXQgYnVtcCB0aGluZ3Mgb3V0IG9mIHRoZVxuICAgIC8vIHdpbmRvdyBsZWF2aW5nIHJvb20gZm9yIG5ldyBpdGVtcy4gIEl0J3MgaW1wb3J0YW50IHdlIHByb2Nlc3MgdGhlc2UgY2hhbmdlcyBmaXJzdCwgc28gd2VcbiAgICAvLyBpdGVyYXRlIHRoZSBjaGFuZ2VzIHR3aWNlLCBmaXJzdCBwcm9jZXNzaW5nIGFueSB0aGF0IGFmZmVjdCBpdGVtcyBjdXJyZW50bHkgaW4gdmlldy5cbiAgICAvLyBUT0RPOiBJIGNvbnNpZGVyIGFuIGl0ZW0gXCJpbiB2aWV3XCIgaWYgY2FjaGVIYXNDaGlsZCBpcyB0cnVlLCB3aGljaCBjaGVja3MgYm90aCB0aGUgc2VydmVyXG4gICAgLy8gYW5kIGV2ZW50IHNuYXAuICBJJ20gbm90IHN1cmUgaWYgdGhpcyB3aWxsIHJlc3VsdCBpbiBlZGdlIGNhc2VzIHdoZW4gYSBjaGlsZCBpcyBpbiBvbmUgYnV0XG4gICAgLy8gbm90IHRoZSBvdGhlci5cbiAgICBsZXQgY3VyVmlld0NhY2hlID0gdmlld0NhY2hlO1xuICAgIGNoYW5nZWRDaGlsZHJlbi5mb3JlYWNoKChyZWxhdGl2ZVBhdGgsIGNoaWxkTm9kZSkgPT4ge1xuICAgICAgICBjb25zdCB3cml0ZVBhdGggPSBwYXRoQ2hpbGQocGF0aCwgcmVsYXRpdmVQYXRoKTtcbiAgICAgICAgaWYgKHZpZXdQcm9jZXNzb3JDYWNoZUhhc0NoaWxkKHZpZXdDYWNoZSwgcGF0aEdldEZyb250KHdyaXRlUGF0aCkpKSB7XG4gICAgICAgICAgICBjdXJWaWV3Q2FjaGUgPSB2aWV3UHJvY2Vzc29yQXBwbHlVc2VyT3ZlcndyaXRlKHZpZXdQcm9jZXNzb3IsIGN1clZpZXdDYWNoZSwgd3JpdGVQYXRoLCBjaGlsZE5vZGUsIHdyaXRlc0NhY2hlLCBzZXJ2ZXJDYWNoZSwgYWNjdW11bGF0b3IpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgY2hhbmdlZENoaWxkcmVuLmZvcmVhY2goKHJlbGF0aXZlUGF0aCwgY2hpbGROb2RlKSA9PiB7XG4gICAgICAgIGNvbnN0IHdyaXRlUGF0aCA9IHBhdGhDaGlsZChwYXRoLCByZWxhdGl2ZVBhdGgpO1xuICAgICAgICBpZiAoIXZpZXdQcm9jZXNzb3JDYWNoZUhhc0NoaWxkKHZpZXdDYWNoZSwgcGF0aEdldEZyb250KHdyaXRlUGF0aCkpKSB7XG4gICAgICAgICAgICBjdXJWaWV3Q2FjaGUgPSB2aWV3UHJvY2Vzc29yQXBwbHlVc2VyT3ZlcndyaXRlKHZpZXdQcm9jZXNzb3IsIGN1clZpZXdDYWNoZSwgd3JpdGVQYXRoLCBjaGlsZE5vZGUsIHdyaXRlc0NhY2hlLCBzZXJ2ZXJDYWNoZSwgYWNjdW11bGF0b3IpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGN1clZpZXdDYWNoZTtcbn1cbmZ1bmN0aW9uIHZpZXdQcm9jZXNzb3JBcHBseU1lcmdlKHZpZXdQcm9jZXNzb3IsIG5vZGUsIG1lcmdlKSB7XG4gICAgbWVyZ2UuZm9yZWFjaCgocmVsYXRpdmVQYXRoLCBjaGlsZE5vZGUpID0+IHtcbiAgICAgICAgbm9kZSA9IG5vZGUudXBkYXRlQ2hpbGQocmVsYXRpdmVQYXRoLCBjaGlsZE5vZGUpO1xuICAgIH0pO1xuICAgIHJldHVybiBub2RlO1xufVxuZnVuY3Rpb24gdmlld1Byb2Nlc3NvckFwcGx5U2VydmVyTWVyZ2Uodmlld1Byb2Nlc3Nvciwgdmlld0NhY2hlLCBwYXRoLCBjaGFuZ2VkQ2hpbGRyZW4sIHdyaXRlc0NhY2hlLCBzZXJ2ZXJDYWNoZSwgZmlsdGVyU2VydmVyTm9kZSwgYWNjdW11bGF0b3IpIHtcbiAgICAvLyBJZiB3ZSBkb24ndCBoYXZlIGEgY2FjaGUgeWV0LCB0aGlzIG1lcmdlIHdhcyBpbnRlbmRlZCBmb3IgYSBwcmV2aW91c2x5IGxpc3RlbiBpbiB0aGUgc2FtZSBsb2NhdGlvbi4gSWdub3JlIGl0IGFuZFxuICAgIC8vIHdhaXQgZm9yIHRoZSBjb21wbGV0ZSBkYXRhIHVwZGF0ZSBjb21pbmcgc29vbi5cbiAgICBpZiAodmlld0NhY2hlLnNlcnZlckNhY2hlLmdldE5vZGUoKS5pc0VtcHR5KCkgJiZcbiAgICAgICAgIXZpZXdDYWNoZS5zZXJ2ZXJDYWNoZS5pc0Z1bGx5SW5pdGlhbGl6ZWQoKSkge1xuICAgICAgICByZXR1cm4gdmlld0NhY2hlO1xuICAgIH1cbiAgICAvLyBIQUNLOiBJbiB0aGUgY2FzZSBvZiBhIGxpbWl0IHF1ZXJ5LCB0aGVyZSBtYXkgYmUgc29tZSBjaGFuZ2VzIHRoYXQgYnVtcCB0aGluZ3Mgb3V0IG9mIHRoZVxuICAgIC8vIHdpbmRvdyBsZWF2aW5nIHJvb20gZm9yIG5ldyBpdGVtcy4gIEl0J3MgaW1wb3J0YW50IHdlIHByb2Nlc3MgdGhlc2UgY2hhbmdlcyBmaXJzdCwgc28gd2VcbiAgICAvLyBpdGVyYXRlIHRoZSBjaGFuZ2VzIHR3aWNlLCBmaXJzdCBwcm9jZXNzaW5nIGFueSB0aGF0IGFmZmVjdCBpdGVtcyBjdXJyZW50bHkgaW4gdmlldy5cbiAgICAvLyBUT0RPOiBJIGNvbnNpZGVyIGFuIGl0ZW0gXCJpbiB2aWV3XCIgaWYgY2FjaGVIYXNDaGlsZCBpcyB0cnVlLCB3aGljaCBjaGVja3MgYm90aCB0aGUgc2VydmVyXG4gICAgLy8gYW5kIGV2ZW50IHNuYXAuICBJJ20gbm90IHN1cmUgaWYgdGhpcyB3aWxsIHJlc3VsdCBpbiBlZGdlIGNhc2VzIHdoZW4gYSBjaGlsZCBpcyBpbiBvbmUgYnV0XG4gICAgLy8gbm90IHRoZSBvdGhlci5cbiAgICBsZXQgY3VyVmlld0NhY2hlID0gdmlld0NhY2hlO1xuICAgIGxldCB2aWV3TWVyZ2VUcmVlO1xuICAgIGlmIChwYXRoSXNFbXB0eShwYXRoKSkge1xuICAgICAgICB2aWV3TWVyZ2VUcmVlID0gY2hhbmdlZENoaWxkcmVuO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmlld01lcmdlVHJlZSA9IG5ldyBJbW11dGFibGVUcmVlKG51bGwpLnNldFRyZWUocGF0aCwgY2hhbmdlZENoaWxkcmVuKTtcbiAgICB9XG4gICAgY29uc3Qgc2VydmVyTm9kZSA9IHZpZXdDYWNoZS5zZXJ2ZXJDYWNoZS5nZXROb2RlKCk7XG4gICAgdmlld01lcmdlVHJlZS5jaGlsZHJlbi5pbm9yZGVyVHJhdmVyc2FsKChjaGlsZEtleSwgY2hpbGRUcmVlKSA9PiB7XG4gICAgICAgIGlmIChzZXJ2ZXJOb2RlLmhhc0NoaWxkKGNoaWxkS2V5KSkge1xuICAgICAgICAgICAgY29uc3Qgc2VydmVyQ2hpbGQgPSB2aWV3Q2FjaGUuc2VydmVyQ2FjaGVcbiAgICAgICAgICAgICAgICAuZ2V0Tm9kZSgpXG4gICAgICAgICAgICAgICAgLmdldEltbWVkaWF0ZUNoaWxkKGNoaWxkS2V5KTtcbiAgICAgICAgICAgIGNvbnN0IG5ld0NoaWxkID0gdmlld1Byb2Nlc3NvckFwcGx5TWVyZ2Uodmlld1Byb2Nlc3Nvciwgc2VydmVyQ2hpbGQsIGNoaWxkVHJlZSk7XG4gICAgICAgICAgICBjdXJWaWV3Q2FjaGUgPSB2aWV3UHJvY2Vzc29yQXBwbHlTZXJ2ZXJPdmVyd3JpdGUodmlld1Byb2Nlc3NvciwgY3VyVmlld0NhY2hlLCBuZXcgUGF0aChjaGlsZEtleSksIG5ld0NoaWxkLCB3cml0ZXNDYWNoZSwgc2VydmVyQ2FjaGUsIGZpbHRlclNlcnZlck5vZGUsIGFjY3VtdWxhdG9yKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHZpZXdNZXJnZVRyZWUuY2hpbGRyZW4uaW5vcmRlclRyYXZlcnNhbCgoY2hpbGRLZXksIGNoaWxkTWVyZ2VUcmVlKSA9PiB7XG4gICAgICAgIGNvbnN0IGlzVW5rbm93bkRlZXBNZXJnZSA9ICF2aWV3Q2FjaGUuc2VydmVyQ2FjaGUuaXNDb21wbGV0ZUZvckNoaWxkKGNoaWxkS2V5KSAmJlxuICAgICAgICAgICAgY2hpbGRNZXJnZVRyZWUudmFsdWUgPT09IG51bGw7XG4gICAgICAgIGlmICghc2VydmVyTm9kZS5oYXNDaGlsZChjaGlsZEtleSkgJiYgIWlzVW5rbm93bkRlZXBNZXJnZSkge1xuICAgICAgICAgICAgY29uc3Qgc2VydmVyQ2hpbGQgPSB2aWV3Q2FjaGUuc2VydmVyQ2FjaGVcbiAgICAgICAgICAgICAgICAuZ2V0Tm9kZSgpXG4gICAgICAgICAgICAgICAgLmdldEltbWVkaWF0ZUNoaWxkKGNoaWxkS2V5KTtcbiAgICAgICAgICAgIGNvbnN0IG5ld0NoaWxkID0gdmlld1Byb2Nlc3NvckFwcGx5TWVyZ2Uodmlld1Byb2Nlc3Nvciwgc2VydmVyQ2hpbGQsIGNoaWxkTWVyZ2VUcmVlKTtcbiAgICAgICAgICAgIGN1clZpZXdDYWNoZSA9IHZpZXdQcm9jZXNzb3JBcHBseVNlcnZlck92ZXJ3cml0ZSh2aWV3UHJvY2Vzc29yLCBjdXJWaWV3Q2FjaGUsIG5ldyBQYXRoKGNoaWxkS2V5KSwgbmV3Q2hpbGQsIHdyaXRlc0NhY2hlLCBzZXJ2ZXJDYWNoZSwgZmlsdGVyU2VydmVyTm9kZSwgYWNjdW11bGF0b3IpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGN1clZpZXdDYWNoZTtcbn1cbmZ1bmN0aW9uIHZpZXdQcm9jZXNzb3JBY2tVc2VyV3JpdGUodmlld1Byb2Nlc3Nvciwgdmlld0NhY2hlLCBhY2tQYXRoLCBhZmZlY3RlZFRyZWUsIHdyaXRlc0NhY2hlLCBjb21wbGV0ZUNhY2hlLCBhY2N1bXVsYXRvcikge1xuICAgIGlmICh3cml0ZVRyZWVSZWZTaGFkb3dpbmdXcml0ZSh3cml0ZXNDYWNoZSwgYWNrUGF0aCkgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gdmlld0NhY2hlO1xuICAgIH1cbiAgICAvLyBPbmx5IGZpbHRlciBzZXJ2ZXIgbm9kZSBpZiBpdCBpcyBjdXJyZW50bHkgZmlsdGVyZWRcbiAgICBjb25zdCBmaWx0ZXJTZXJ2ZXJOb2RlID0gdmlld0NhY2hlLnNlcnZlckNhY2hlLmlzRmlsdGVyZWQoKTtcbiAgICAvLyBFc3NlbnRpYWxseSB3ZSdsbCBqdXN0IGdldCBvdXIgZXhpc3Rpbmcgc2VydmVyIGNhY2hlIGZvciB0aGUgYWZmZWN0ZWQgcGF0aHMgYW5kIHJlLWFwcGx5IGl0IGFzIGEgc2VydmVyIHVwZGF0ZVxuICAgIC8vIG5vdyB0aGF0IGl0IHdvbid0IGJlIHNoYWRvd2VkLlxuICAgIGNvbnN0IHNlcnZlckNhY2hlID0gdmlld0NhY2hlLnNlcnZlckNhY2hlO1xuICAgIGlmIChhZmZlY3RlZFRyZWUudmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAvLyBUaGlzIGlzIGFuIG92ZXJ3cml0ZS5cbiAgICAgICAgaWYgKChwYXRoSXNFbXB0eShhY2tQYXRoKSAmJiBzZXJ2ZXJDYWNoZS5pc0Z1bGx5SW5pdGlhbGl6ZWQoKSkgfHxcbiAgICAgICAgICAgIHNlcnZlckNhY2hlLmlzQ29tcGxldGVGb3JQYXRoKGFja1BhdGgpKSB7XG4gICAgICAgICAgICByZXR1cm4gdmlld1Byb2Nlc3NvckFwcGx5U2VydmVyT3ZlcndyaXRlKHZpZXdQcm9jZXNzb3IsIHZpZXdDYWNoZSwgYWNrUGF0aCwgc2VydmVyQ2FjaGUuZ2V0Tm9kZSgpLmdldENoaWxkKGFja1BhdGgpLCB3cml0ZXNDYWNoZSwgY29tcGxldGVDYWNoZSwgZmlsdGVyU2VydmVyTm9kZSwgYWNjdW11bGF0b3IpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHBhdGhJc0VtcHR5KGFja1BhdGgpKSB7XG4gICAgICAgICAgICAvLyBUaGlzIGlzIGEgZ29vZnkgZWRnZSBjYXNlIHdoZXJlIHdlIGFyZSBhY2tpbmcgZGF0YSBhdCB0aGlzIGxvY2F0aW9uIGJ1dCBkb24ndCBoYXZlIGZ1bGwgZGF0YS4gIFdlXG4gICAgICAgICAgICAvLyBzaG91bGQganVzdCByZS1hcHBseSB3aGF0ZXZlciB3ZSBoYXZlIGluIG91ciBjYWNoZSBhcyBhIG1lcmdlLlxuICAgICAgICAgICAgbGV0IGNoYW5nZWRDaGlsZHJlbiA9IG5ldyBJbW11dGFibGVUcmVlKG51bGwpO1xuICAgICAgICAgICAgc2VydmVyQ2FjaGUuZ2V0Tm9kZSgpLmZvckVhY2hDaGlsZChLRVlfSU5ERVgsIChuYW1lLCBub2RlKSA9PiB7XG4gICAgICAgICAgICAgICAgY2hhbmdlZENoaWxkcmVuID0gY2hhbmdlZENoaWxkcmVuLnNldChuZXcgUGF0aChuYW1lKSwgbm9kZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB2aWV3UHJvY2Vzc29yQXBwbHlTZXJ2ZXJNZXJnZSh2aWV3UHJvY2Vzc29yLCB2aWV3Q2FjaGUsIGFja1BhdGgsIGNoYW5nZWRDaGlsZHJlbiwgd3JpdGVzQ2FjaGUsIGNvbXBsZXRlQ2FjaGUsIGZpbHRlclNlcnZlck5vZGUsIGFjY3VtdWxhdG9yKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB2aWV3Q2FjaGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIFRoaXMgaXMgYSBtZXJnZS5cbiAgICAgICAgbGV0IGNoYW5nZWRDaGlsZHJlbiA9IG5ldyBJbW11dGFibGVUcmVlKG51bGwpO1xuICAgICAgICBhZmZlY3RlZFRyZWUuZm9yZWFjaCgobWVyZ2VQYXRoLCB2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2VydmVyQ2FjaGVQYXRoID0gcGF0aENoaWxkKGFja1BhdGgsIG1lcmdlUGF0aCk7XG4gICAgICAgICAgICBpZiAoc2VydmVyQ2FjaGUuaXNDb21wbGV0ZUZvclBhdGgoc2VydmVyQ2FjaGVQYXRoKSkge1xuICAgICAgICAgICAgICAgIGNoYW5nZWRDaGlsZHJlbiA9IGNoYW5nZWRDaGlsZHJlbi5zZXQobWVyZ2VQYXRoLCBzZXJ2ZXJDYWNoZS5nZXROb2RlKCkuZ2V0Q2hpbGQoc2VydmVyQ2FjaGVQYXRoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdmlld1Byb2Nlc3NvckFwcGx5U2VydmVyTWVyZ2Uodmlld1Byb2Nlc3Nvciwgdmlld0NhY2hlLCBhY2tQYXRoLCBjaGFuZ2VkQ2hpbGRyZW4sIHdyaXRlc0NhY2hlLCBjb21wbGV0ZUNhY2hlLCBmaWx0ZXJTZXJ2ZXJOb2RlLCBhY2N1bXVsYXRvcik7XG4gICAgfVxufVxuZnVuY3Rpb24gdmlld1Byb2Nlc3Nvckxpc3RlbkNvbXBsZXRlKHZpZXdQcm9jZXNzb3IsIHZpZXdDYWNoZSwgcGF0aCwgd3JpdGVzQ2FjaGUsIGFjY3VtdWxhdG9yKSB7XG4gICAgY29uc3Qgb2xkU2VydmVyTm9kZSA9IHZpZXdDYWNoZS5zZXJ2ZXJDYWNoZTtcbiAgICBjb25zdCBuZXdWaWV3Q2FjaGUgPSB2aWV3Q2FjaGVVcGRhdGVTZXJ2ZXJTbmFwKHZpZXdDYWNoZSwgb2xkU2VydmVyTm9kZS5nZXROb2RlKCksIG9sZFNlcnZlck5vZGUuaXNGdWxseUluaXRpYWxpemVkKCkgfHwgcGF0aElzRW1wdHkocGF0aCksIG9sZFNlcnZlck5vZGUuaXNGaWx0ZXJlZCgpKTtcbiAgICByZXR1cm4gdmlld1Byb2Nlc3NvckdlbmVyYXRlRXZlbnRDYWNoZUFmdGVyU2VydmVyRXZlbnQodmlld1Byb2Nlc3NvciwgbmV3Vmlld0NhY2hlLCBwYXRoLCB3cml0ZXNDYWNoZSwgTk9fQ09NUExFVEVfQ0hJTERfU09VUkNFLCBhY2N1bXVsYXRvcik7XG59XG5mdW5jdGlvbiB2aWV3UHJvY2Vzc29yUmV2ZXJ0VXNlcldyaXRlKHZpZXdQcm9jZXNzb3IsIHZpZXdDYWNoZSwgcGF0aCwgd3JpdGVzQ2FjaGUsIGNvbXBsZXRlU2VydmVyQ2FjaGUsIGFjY3VtdWxhdG9yKSB7XG4gICAgbGV0IGNvbXBsZXRlO1xuICAgIGlmICh3cml0ZVRyZWVSZWZTaGFkb3dpbmdXcml0ZSh3cml0ZXNDYWNoZSwgcGF0aCkgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gdmlld0NhY2hlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3Qgc291cmNlID0gbmV3IFdyaXRlVHJlZUNvbXBsZXRlQ2hpbGRTb3VyY2Uod3JpdGVzQ2FjaGUsIHZpZXdDYWNoZSwgY29tcGxldGVTZXJ2ZXJDYWNoZSk7XG4gICAgICAgIGNvbnN0IG9sZEV2ZW50Q2FjaGUgPSB2aWV3Q2FjaGUuZXZlbnRDYWNoZS5nZXROb2RlKCk7XG4gICAgICAgIGxldCBuZXdFdmVudENhY2hlO1xuICAgICAgICBpZiAocGF0aElzRW1wdHkocGF0aCkgfHwgcGF0aEdldEZyb250KHBhdGgpID09PSAnLnByaW9yaXR5Jykge1xuICAgICAgICAgICAgbGV0IG5ld05vZGU7XG4gICAgICAgICAgICBpZiAodmlld0NhY2hlLnNlcnZlckNhY2hlLmlzRnVsbHlJbml0aWFsaXplZCgpKSB7XG4gICAgICAgICAgICAgICAgbmV3Tm9kZSA9IHdyaXRlVHJlZVJlZkNhbGNDb21wbGV0ZUV2ZW50Q2FjaGUod3JpdGVzQ2FjaGUsIHZpZXdDYWNoZUdldENvbXBsZXRlU2VydmVyU25hcCh2aWV3Q2FjaGUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlcnZlckNoaWxkcmVuID0gdmlld0NhY2hlLnNlcnZlckNhY2hlLmdldE5vZGUoKTtcbiAgICAgICAgICAgICAgICBhc3NlcnQoc2VydmVyQ2hpbGRyZW4gaW5zdGFuY2VvZiBDaGlsZHJlbk5vZGUsICdzZXJ2ZXJDaGlsZHJlbiB3b3VsZCBiZSBjb21wbGV0ZSBpZiBsZWFmIG5vZGUnKTtcbiAgICAgICAgICAgICAgICBuZXdOb2RlID0gd3JpdGVUcmVlUmVmQ2FsY0NvbXBsZXRlRXZlbnRDaGlsZHJlbih3cml0ZXNDYWNoZSwgc2VydmVyQ2hpbGRyZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3Tm9kZSA9IG5ld05vZGU7XG4gICAgICAgICAgICBuZXdFdmVudENhY2hlID0gdmlld1Byb2Nlc3Nvci5maWx0ZXIudXBkYXRlRnVsbE5vZGUob2xkRXZlbnRDYWNoZSwgbmV3Tm9kZSwgYWNjdW11bGF0b3IpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgY2hpbGRLZXkgPSBwYXRoR2V0RnJvbnQocGF0aCk7XG4gICAgICAgICAgICBsZXQgbmV3Q2hpbGQgPSB3cml0ZVRyZWVSZWZDYWxjQ29tcGxldGVDaGlsZCh3cml0ZXNDYWNoZSwgY2hpbGRLZXksIHZpZXdDYWNoZS5zZXJ2ZXJDYWNoZSk7XG4gICAgICAgICAgICBpZiAobmV3Q2hpbGQgPT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgIHZpZXdDYWNoZS5zZXJ2ZXJDYWNoZS5pc0NvbXBsZXRlRm9yQ2hpbGQoY2hpbGRLZXkpKSB7XG4gICAgICAgICAgICAgICAgbmV3Q2hpbGQgPSBvbGRFdmVudENhY2hlLmdldEltbWVkaWF0ZUNoaWxkKGNoaWxkS2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChuZXdDaGlsZCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbmV3RXZlbnRDYWNoZSA9IHZpZXdQcm9jZXNzb3IuZmlsdGVyLnVwZGF0ZUNoaWxkKG9sZEV2ZW50Q2FjaGUsIGNoaWxkS2V5LCBuZXdDaGlsZCwgcGF0aFBvcEZyb250KHBhdGgpLCBzb3VyY2UsIGFjY3VtdWxhdG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHZpZXdDYWNoZS5ldmVudENhY2hlLmdldE5vZGUoKS5oYXNDaGlsZChjaGlsZEtleSkpIHtcbiAgICAgICAgICAgICAgICAvLyBObyBjb21wbGV0ZSBjaGlsZCBhdmFpbGFibGUsIGRlbGV0ZSB0aGUgZXhpc3Rpbmcgb25lLCBpZiBhbnlcbiAgICAgICAgICAgICAgICBuZXdFdmVudENhY2hlID0gdmlld1Byb2Nlc3Nvci5maWx0ZXIudXBkYXRlQ2hpbGQob2xkRXZlbnRDYWNoZSwgY2hpbGRLZXksIENoaWxkcmVuTm9kZS5FTVBUWV9OT0RFLCBwYXRoUG9wRnJvbnQocGF0aCksIHNvdXJjZSwgYWNjdW11bGF0b3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3RXZlbnRDYWNoZSA9IG9sZEV2ZW50Q2FjaGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobmV3RXZlbnRDYWNoZS5pc0VtcHR5KCkgJiZcbiAgICAgICAgICAgICAgICB2aWV3Q2FjaGUuc2VydmVyQ2FjaGUuaXNGdWxseUluaXRpYWxpemVkKCkpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBtaWdodCBoYXZlIHJldmVydGVkIGFsbCBjaGlsZCB3cml0ZXMuIE1heWJlIHRoZSBvbGQgZXZlbnQgd2FzIGEgbGVhZiBub2RlXG4gICAgICAgICAgICAgICAgY29tcGxldGUgPSB3cml0ZVRyZWVSZWZDYWxjQ29tcGxldGVFdmVudENhY2hlKHdyaXRlc0NhY2hlLCB2aWV3Q2FjaGVHZXRDb21wbGV0ZVNlcnZlclNuYXAodmlld0NhY2hlKSk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbXBsZXRlLmlzTGVhZk5vZGUoKSkge1xuICAgICAgICAgICAgICAgICAgICBuZXdFdmVudENhY2hlID0gdmlld1Byb2Nlc3Nvci5maWx0ZXIudXBkYXRlRnVsbE5vZGUobmV3RXZlbnRDYWNoZSwgY29tcGxldGUsIGFjY3VtdWxhdG9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29tcGxldGUgPVxuICAgICAgICAgICAgdmlld0NhY2hlLnNlcnZlckNhY2hlLmlzRnVsbHlJbml0aWFsaXplZCgpIHx8XG4gICAgICAgICAgICAgICAgd3JpdGVUcmVlUmVmU2hhZG93aW5nV3JpdGUod3JpdGVzQ2FjaGUsIG5ld0VtcHR5UGF0aCgpKSAhPSBudWxsO1xuICAgICAgICByZXR1cm4gdmlld0NhY2hlVXBkYXRlRXZlbnRTbmFwKHZpZXdDYWNoZSwgbmV3RXZlbnRDYWNoZSwgY29tcGxldGUsIHZpZXdQcm9jZXNzb3IuZmlsdGVyLmZpbHRlcnNOb2RlcygpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgdmlldyByZXByZXNlbnRzIGEgc3BlY2lmaWMgbG9jYXRpb24gYW5kIHF1ZXJ5IHRoYXQgaGFzIDEgb3IgbW9yZSBldmVudCByZWdpc3RyYXRpb25zLlxuICpcbiAqIEl0IGRvZXMgc2V2ZXJhbCB0aGluZ3M6XG4gKiAgLSBNYWludGFpbnMgdGhlIGxpc3Qgb2YgZXZlbnQgcmVnaXN0cmF0aW9ucyBmb3IgdGhpcyBsb2NhdGlvbi9xdWVyeS5cbiAqICAtIE1haW50YWlucyBhIGNhY2hlIG9mIHRoZSBkYXRhIHZpc2libGUgZm9yIHRoaXMgbG9jYXRpb24vcXVlcnkuXG4gKiAgLSBBcHBsaWVzIG5ldyBvcGVyYXRpb25zICh2aWEgYXBwbHlPcGVyYXRpb24pLCB1cGRhdGVzIHRoZSBjYWNoZSwgYW5kIGJhc2VkIG9uIHRoZSBldmVudFxuICogICAgcmVnaXN0cmF0aW9ucyByZXR1cm5zIHRoZSBzZXQgb2YgZXZlbnRzIHRvIGJlIHJhaXNlZC5cbiAqL1xuY2xhc3MgVmlldyB7XG4gICAgY29uc3RydWN0b3IocXVlcnlfLCBpbml0aWFsVmlld0NhY2hlKSB7XG4gICAgICAgIHRoaXMucXVlcnlfID0gcXVlcnlfO1xuICAgICAgICB0aGlzLmV2ZW50UmVnaXN0cmF0aW9uc18gPSBbXTtcbiAgICAgICAgY29uc3QgcGFyYW1zID0gdGhpcy5xdWVyeV8uX3F1ZXJ5UGFyYW1zO1xuICAgICAgICBjb25zdCBpbmRleEZpbHRlciA9IG5ldyBJbmRleGVkRmlsdGVyKHBhcmFtcy5nZXRJbmRleCgpKTtcbiAgICAgICAgY29uc3QgZmlsdGVyID0gcXVlcnlQYXJhbXNHZXROb2RlRmlsdGVyKHBhcmFtcyk7XG4gICAgICAgIHRoaXMucHJvY2Vzc29yXyA9IG5ld1ZpZXdQcm9jZXNzb3IoZmlsdGVyKTtcbiAgICAgICAgY29uc3QgaW5pdGlhbFNlcnZlckNhY2hlID0gaW5pdGlhbFZpZXdDYWNoZS5zZXJ2ZXJDYWNoZTtcbiAgICAgICAgY29uc3QgaW5pdGlhbEV2ZW50Q2FjaGUgPSBpbml0aWFsVmlld0NhY2hlLmV2ZW50Q2FjaGU7XG4gICAgICAgIC8vIERvbid0IGZpbHRlciBzZXJ2ZXIgbm9kZSB3aXRoIG90aGVyIGZpbHRlciB0aGFuIGluZGV4LCB3YWl0IGZvciB0YWdnZWQgbGlzdGVuXG4gICAgICAgIGNvbnN0IHNlcnZlclNuYXAgPSBpbmRleEZpbHRlci51cGRhdGVGdWxsTm9kZShDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERSwgaW5pdGlhbFNlcnZlckNhY2hlLmdldE5vZGUoKSwgbnVsbCk7XG4gICAgICAgIGNvbnN0IGV2ZW50U25hcCA9IGZpbHRlci51cGRhdGVGdWxsTm9kZShDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERSwgaW5pdGlhbEV2ZW50Q2FjaGUuZ2V0Tm9kZSgpLCBudWxsKTtcbiAgICAgICAgY29uc3QgbmV3U2VydmVyQ2FjaGUgPSBuZXcgQ2FjaGVOb2RlKHNlcnZlclNuYXAsIGluaXRpYWxTZXJ2ZXJDYWNoZS5pc0Z1bGx5SW5pdGlhbGl6ZWQoKSwgaW5kZXhGaWx0ZXIuZmlsdGVyc05vZGVzKCkpO1xuICAgICAgICBjb25zdCBuZXdFdmVudENhY2hlID0gbmV3IENhY2hlTm9kZShldmVudFNuYXAsIGluaXRpYWxFdmVudENhY2hlLmlzRnVsbHlJbml0aWFsaXplZCgpLCBmaWx0ZXIuZmlsdGVyc05vZGVzKCkpO1xuICAgICAgICB0aGlzLnZpZXdDYWNoZV8gPSBuZXdWaWV3Q2FjaGUobmV3RXZlbnRDYWNoZSwgbmV3U2VydmVyQ2FjaGUpO1xuICAgICAgICB0aGlzLmV2ZW50R2VuZXJhdG9yXyA9IG5ldyBFdmVudEdlbmVyYXRvcih0aGlzLnF1ZXJ5Xyk7XG4gICAgfVxuICAgIGdldCBxdWVyeSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucXVlcnlfO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHZpZXdHZXRTZXJ2ZXJDYWNoZSh2aWV3KSB7XG4gICAgcmV0dXJuIHZpZXcudmlld0NhY2hlXy5zZXJ2ZXJDYWNoZS5nZXROb2RlKCk7XG59XG5mdW5jdGlvbiB2aWV3R2V0Q29tcGxldGVOb2RlKHZpZXcpIHtcbiAgICByZXR1cm4gdmlld0NhY2hlR2V0Q29tcGxldGVFdmVudFNuYXAodmlldy52aWV3Q2FjaGVfKTtcbn1cbmZ1bmN0aW9uIHZpZXdHZXRDb21wbGV0ZVNlcnZlckNhY2hlKHZpZXcsIHBhdGgpIHtcbiAgICBjb25zdCBjYWNoZSA9IHZpZXdDYWNoZUdldENvbXBsZXRlU2VydmVyU25hcCh2aWV3LnZpZXdDYWNoZV8pO1xuICAgIGlmIChjYWNoZSkge1xuICAgICAgICAvLyBJZiB0aGlzIGlzbid0IGEgXCJsb2Fkc0FsbERhdGFcIiB2aWV3LCB0aGVuIGNhY2hlIGlzbid0IGFjdHVhbGx5IGEgY29tcGxldGUgY2FjaGUgYW5kXG4gICAgICAgIC8vIHdlIG5lZWQgdG8gc2VlIGlmIGl0IGNvbnRhaW5zIHRoZSBjaGlsZCB3ZSdyZSBpbnRlcmVzdGVkIGluLlxuICAgICAgICBpZiAodmlldy5xdWVyeS5fcXVlcnlQYXJhbXMubG9hZHNBbGxEYXRhKCkgfHxcbiAgICAgICAgICAgICghcGF0aElzRW1wdHkocGF0aCkgJiZcbiAgICAgICAgICAgICAgICAhY2FjaGUuZ2V0SW1tZWRpYXRlQ2hpbGQocGF0aEdldEZyb250KHBhdGgpKS5pc0VtcHR5KCkpKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FjaGUuZ2V0Q2hpbGQocGF0aCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiB2aWV3SXNFbXB0eSh2aWV3KSB7XG4gICAgcmV0dXJuIHZpZXcuZXZlbnRSZWdpc3RyYXRpb25zXy5sZW5ndGggPT09IDA7XG59XG5mdW5jdGlvbiB2aWV3QWRkRXZlbnRSZWdpc3RyYXRpb24odmlldywgZXZlbnRSZWdpc3RyYXRpb24pIHtcbiAgICB2aWV3LmV2ZW50UmVnaXN0cmF0aW9uc18ucHVzaChldmVudFJlZ2lzdHJhdGlvbik7XG59XG4vKipcbiAqIEBwYXJhbSBldmVudFJlZ2lzdHJhdGlvbiAtIElmIG51bGwsIHJlbW92ZSBhbGwgY2FsbGJhY2tzLlxuICogQHBhcmFtIGNhbmNlbEVycm9yIC0gSWYgYSBjYW5jZWxFcnJvciBpcyBwcm92aWRlZCwgYXBwcm9wcmlhdGUgY2FuY2VsIGV2ZW50cyB3aWxsIGJlIHJldHVybmVkLlxuICogQHJldHVybnMgQ2FuY2VsIGV2ZW50cywgaWYgY2FuY2VsRXJyb3Igd2FzIHByb3ZpZGVkLlxuICovXG5mdW5jdGlvbiB2aWV3UmVtb3ZlRXZlbnRSZWdpc3RyYXRpb24odmlldywgZXZlbnRSZWdpc3RyYXRpb24sIGNhbmNlbEVycm9yKSB7XG4gICAgY29uc3QgY2FuY2VsRXZlbnRzID0gW107XG4gICAgaWYgKGNhbmNlbEVycm9yKSB7XG4gICAgICAgIGFzc2VydChldmVudFJlZ2lzdHJhdGlvbiA9PSBudWxsLCAnQSBjYW5jZWwgc2hvdWxkIGNhbmNlbCBhbGwgZXZlbnQgcmVnaXN0cmF0aW9ucy4nKTtcbiAgICAgICAgY29uc3QgcGF0aCA9IHZpZXcucXVlcnkuX3BhdGg7XG4gICAgICAgIHZpZXcuZXZlbnRSZWdpc3RyYXRpb25zXy5mb3JFYWNoKHJlZ2lzdHJhdGlvbiA9PiB7XG4gICAgICAgICAgICBjb25zdCBtYXliZUV2ZW50ID0gcmVnaXN0cmF0aW9uLmNyZWF0ZUNhbmNlbEV2ZW50KGNhbmNlbEVycm9yLCBwYXRoKTtcbiAgICAgICAgICAgIGlmIChtYXliZUV2ZW50KSB7XG4gICAgICAgICAgICAgICAgY2FuY2VsRXZlbnRzLnB1c2gobWF5YmVFdmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoZXZlbnRSZWdpc3RyYXRpb24pIHtcbiAgICAgICAgbGV0IHJlbWFpbmluZyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZpZXcuZXZlbnRSZWdpc3RyYXRpb25zXy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmcgPSB2aWV3LmV2ZW50UmVnaXN0cmF0aW9uc19baV07XG4gICAgICAgICAgICBpZiAoIWV4aXN0aW5nLm1hdGNoZXMoZXZlbnRSZWdpc3RyYXRpb24pKSB7XG4gICAgICAgICAgICAgICAgcmVtYWluaW5nLnB1c2goZXhpc3RpbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnRSZWdpc3RyYXRpb24uaGFzQW55Q2FsbGJhY2soKSkge1xuICAgICAgICAgICAgICAgIC8vIFdlJ3JlIHJlbW92aW5nIGp1c3QgdGhpcyBvbmVcbiAgICAgICAgICAgICAgICByZW1haW5pbmcgPSByZW1haW5pbmcuY29uY2F0KHZpZXcuZXZlbnRSZWdpc3RyYXRpb25zXy5zbGljZShpICsgMSkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZpZXcuZXZlbnRSZWdpc3RyYXRpb25zXyA9IHJlbWFpbmluZztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZpZXcuZXZlbnRSZWdpc3RyYXRpb25zXyA9IFtdO1xuICAgIH1cbiAgICByZXR1cm4gY2FuY2VsRXZlbnRzO1xufVxuLyoqXG4gKiBBcHBsaWVzIHRoZSBnaXZlbiBPcGVyYXRpb24sIHVwZGF0ZXMgb3VyIGNhY2hlLCBhbmQgcmV0dXJucyB0aGUgYXBwcm9wcmlhdGUgZXZlbnRzLlxuICovXG5mdW5jdGlvbiB2aWV3QXBwbHlPcGVyYXRpb24odmlldywgb3BlcmF0aW9uLCB3cml0ZXNDYWNoZSwgY29tcGxldGVTZXJ2ZXJDYWNoZSkge1xuICAgIGlmIChvcGVyYXRpb24udHlwZSA9PT0gT3BlcmF0aW9uVHlwZS5NRVJHRSAmJlxuICAgICAgICBvcGVyYXRpb24uc291cmNlLnF1ZXJ5SWQgIT09IG51bGwpIHtcbiAgICAgICAgYXNzZXJ0KHZpZXdDYWNoZUdldENvbXBsZXRlU2VydmVyU25hcCh2aWV3LnZpZXdDYWNoZV8pLCAnV2Ugc2hvdWxkIGFsd2F5cyBoYXZlIGEgZnVsbCBjYWNoZSBiZWZvcmUgaGFuZGxpbmcgbWVyZ2VzJyk7XG4gICAgICAgIGFzc2VydCh2aWV3Q2FjaGVHZXRDb21wbGV0ZUV2ZW50U25hcCh2aWV3LnZpZXdDYWNoZV8pLCAnTWlzc2luZyBldmVudCBjYWNoZSwgZXZlbiB0aG91Z2ggd2UgaGF2ZSBhIHNlcnZlciBjYWNoZScpO1xuICAgIH1cbiAgICBjb25zdCBvbGRWaWV3Q2FjaGUgPSB2aWV3LnZpZXdDYWNoZV87XG4gICAgY29uc3QgcmVzdWx0ID0gdmlld1Byb2Nlc3NvckFwcGx5T3BlcmF0aW9uKHZpZXcucHJvY2Vzc29yXywgb2xkVmlld0NhY2hlLCBvcGVyYXRpb24sIHdyaXRlc0NhY2hlLCBjb21wbGV0ZVNlcnZlckNhY2hlKTtcbiAgICB2aWV3UHJvY2Vzc29yQXNzZXJ0SW5kZXhlZCh2aWV3LnByb2Nlc3Nvcl8sIHJlc3VsdC52aWV3Q2FjaGUpO1xuICAgIGFzc2VydChyZXN1bHQudmlld0NhY2hlLnNlcnZlckNhY2hlLmlzRnVsbHlJbml0aWFsaXplZCgpIHx8XG4gICAgICAgICFvbGRWaWV3Q2FjaGUuc2VydmVyQ2FjaGUuaXNGdWxseUluaXRpYWxpemVkKCksICdPbmNlIGEgc2VydmVyIHNuYXAgaXMgY29tcGxldGUsIGl0IHNob3VsZCBuZXZlciBnbyBiYWNrJyk7XG4gICAgdmlldy52aWV3Q2FjaGVfID0gcmVzdWx0LnZpZXdDYWNoZTtcbiAgICByZXR1cm4gdmlld0dlbmVyYXRlRXZlbnRzRm9yQ2hhbmdlc18odmlldywgcmVzdWx0LmNoYW5nZXMsIHJlc3VsdC52aWV3Q2FjaGUuZXZlbnRDYWNoZS5nZXROb2RlKCksIG51bGwpO1xufVxuZnVuY3Rpb24gdmlld0dldEluaXRpYWxFdmVudHModmlldywgcmVnaXN0cmF0aW9uKSB7XG4gICAgY29uc3QgZXZlbnRTbmFwID0gdmlldy52aWV3Q2FjaGVfLmV2ZW50Q2FjaGU7XG4gICAgY29uc3QgaW5pdGlhbENoYW5nZXMgPSBbXTtcbiAgICBpZiAoIWV2ZW50U25hcC5nZXROb2RlKCkuaXNMZWFmTm9kZSgpKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50Tm9kZSA9IGV2ZW50U25hcC5nZXROb2RlKCk7XG4gICAgICAgIGV2ZW50Tm9kZS5mb3JFYWNoQ2hpbGQoUFJJT1JJVFlfSU5ERVgsIChrZXksIGNoaWxkTm9kZSkgPT4ge1xuICAgICAgICAgICAgaW5pdGlhbENoYW5nZXMucHVzaChjaGFuZ2VDaGlsZEFkZGVkKGtleSwgY2hpbGROb2RlKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoZXZlbnRTbmFwLmlzRnVsbHlJbml0aWFsaXplZCgpKSB7XG4gICAgICAgIGluaXRpYWxDaGFuZ2VzLnB1c2goY2hhbmdlVmFsdWUoZXZlbnRTbmFwLmdldE5vZGUoKSkpO1xuICAgIH1cbiAgICByZXR1cm4gdmlld0dlbmVyYXRlRXZlbnRzRm9yQ2hhbmdlc18odmlldywgaW5pdGlhbENoYW5nZXMsIGV2ZW50U25hcC5nZXROb2RlKCksIHJlZ2lzdHJhdGlvbik7XG59XG5mdW5jdGlvbiB2aWV3R2VuZXJhdGVFdmVudHNGb3JDaGFuZ2VzXyh2aWV3LCBjaGFuZ2VzLCBldmVudENhY2hlLCBldmVudFJlZ2lzdHJhdGlvbikge1xuICAgIGNvbnN0IHJlZ2lzdHJhdGlvbnMgPSBldmVudFJlZ2lzdHJhdGlvblxuICAgICAgICA/IFtldmVudFJlZ2lzdHJhdGlvbl1cbiAgICAgICAgOiB2aWV3LmV2ZW50UmVnaXN0cmF0aW9uc187XG4gICAgcmV0dXJuIGV2ZW50R2VuZXJhdG9yR2VuZXJhdGVFdmVudHNGb3JDaGFuZ2VzKHZpZXcuZXZlbnRHZW5lcmF0b3JfLCBjaGFuZ2VzLCBldmVudENhY2hlLCByZWdpc3RyYXRpb25zKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmxldCByZWZlcmVuY2VDb25zdHJ1Y3RvciQxO1xuLyoqXG4gKiBTeW5jUG9pbnQgcmVwcmVzZW50cyBhIHNpbmdsZSBsb2NhdGlvbiBpbiBhIFN5bmNUcmVlIHdpdGggMSBvciBtb3JlIGV2ZW50IHJlZ2lzdHJhdGlvbnMsIG1lYW5pbmcgd2UgbmVlZCB0b1xuICogbWFpbnRhaW4gMSBvciBtb3JlIFZpZXdzIGF0IHRoaXMgbG9jYXRpb24gdG8gY2FjaGUgc2VydmVyIGRhdGEgYW5kIHJhaXNlIGFwcHJvcHJpYXRlIGV2ZW50cyBmb3Igc2VydmVyIGNoYW5nZXNcbiAqIGFuZCB1c2VyIHdyaXRlcyAoc2V0LCB0cmFuc2FjdGlvbiwgdXBkYXRlKS5cbiAqXG4gKiBJdCdzIHJlc3BvbnNpYmxlIGZvcjpcbiAqICAtIE1haW50YWluaW5nIHRoZSBzZXQgb2YgMSBvciBtb3JlIHZpZXdzIG5lY2Vzc2FyeSBhdCB0aGlzIGxvY2F0aW9uIChhIFN5bmNQb2ludCB3aXRoIDAgdmlld3Mgc2hvdWxkIGJlIHJlbW92ZWQpLlxuICogIC0gUHJveHlpbmcgdXNlciAvIHNlcnZlciBvcGVyYXRpb25zIHRvIHRoZSB2aWV3cyBhcyBhcHByb3ByaWF0ZSAoaS5lLiBhcHBseVNlcnZlck92ZXJ3cml0ZSxcbiAqICAgIGFwcGx5VXNlck92ZXJ3cml0ZSwgZXRjLilcbiAqL1xuY2xhc3MgU3luY1BvaW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBWaWV3cyBiZWluZyB0cmFja2VkIGF0IHRoaXMgbG9jYXRpb24gaW4gdGhlIHRyZWUsIHN0b3JlZCBhcyBhIG1hcCB3aGVyZSB0aGUga2V5IGlzIGFcbiAgICAgICAgICogcXVlcnlJZCBhbmQgdGhlIHZhbHVlIGlzIHRoZSBWaWV3IGZvciB0aGF0IHF1ZXJ5LlxuICAgICAgICAgKlxuICAgICAgICAgKiBOT1RFOiBUaGlzIGxpc3Qgd2lsbCBiZSBxdWl0ZSBzbWFsbCAodXN1YWxseSAxLCBidXQgcGVyaGFwcyAyIG9yIDM7IGFueSBtb3JlIGlzIGFuIG9kZCB1c2UgY2FzZSkuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnZpZXdzID0gbmV3IE1hcCgpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHN5bmNQb2ludFNldFJlZmVyZW5jZUNvbnN0cnVjdG9yKHZhbCkge1xuICAgIGFzc2VydCghcmVmZXJlbmNlQ29uc3RydWN0b3IkMSwgJ19fcmVmZXJlbmNlQ29uc3RydWN0b3IgaGFzIGFscmVhZHkgYmVlbiBkZWZpbmVkJyk7XG4gICAgcmVmZXJlbmNlQ29uc3RydWN0b3IkMSA9IHZhbDtcbn1cbmZ1bmN0aW9uIHN5bmNQb2ludEdldFJlZmVyZW5jZUNvbnN0cnVjdG9yKCkge1xuICAgIGFzc2VydChyZWZlcmVuY2VDb25zdHJ1Y3RvciQxLCAnUmVmZXJlbmNlLnRzIGhhcyBub3QgYmVlbiBsb2FkZWQnKTtcbiAgICByZXR1cm4gcmVmZXJlbmNlQ29uc3RydWN0b3IkMTtcbn1cbmZ1bmN0aW9uIHN5bmNQb2ludElzRW1wdHkoc3luY1BvaW50KSB7XG4gICAgcmV0dXJuIHN5bmNQb2ludC52aWV3cy5zaXplID09PSAwO1xufVxuZnVuY3Rpb24gc3luY1BvaW50QXBwbHlPcGVyYXRpb24oc3luY1BvaW50LCBvcGVyYXRpb24sIHdyaXRlc0NhY2hlLCBvcHRDb21wbGV0ZVNlcnZlckNhY2hlKSB7XG4gICAgY29uc3QgcXVlcnlJZCA9IG9wZXJhdGlvbi5zb3VyY2UucXVlcnlJZDtcbiAgICBpZiAocXVlcnlJZCAhPT0gbnVsbCkge1xuICAgICAgICBjb25zdCB2aWV3ID0gc3luY1BvaW50LnZpZXdzLmdldChxdWVyeUlkKTtcbiAgICAgICAgYXNzZXJ0KHZpZXcgIT0gbnVsbCwgJ1N5bmNUcmVlIGdhdmUgdXMgYW4gb3AgZm9yIGFuIGludmFsaWQgcXVlcnkuJyk7XG4gICAgICAgIHJldHVybiB2aWV3QXBwbHlPcGVyYXRpb24odmlldywgb3BlcmF0aW9uLCB3cml0ZXNDYWNoZSwgb3B0Q29tcGxldGVTZXJ2ZXJDYWNoZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBsZXQgZXZlbnRzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgdmlldyBvZiBzeW5jUG9pbnQudmlld3MudmFsdWVzKCkpIHtcbiAgICAgICAgICAgIGV2ZW50cyA9IGV2ZW50cy5jb25jYXQodmlld0FwcGx5T3BlcmF0aW9uKHZpZXcsIG9wZXJhdGlvbiwgd3JpdGVzQ2FjaGUsIG9wdENvbXBsZXRlU2VydmVyQ2FjaGUpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZXZlbnRzO1xuICAgIH1cbn1cbi8qKlxuICogR2V0IGEgdmlldyBmb3IgdGhlIHNwZWNpZmllZCBxdWVyeS5cbiAqXG4gKiBAcGFyYW0gcXVlcnkgLSBUaGUgcXVlcnkgdG8gcmV0dXJuIGEgdmlldyBmb3JcbiAqIEBwYXJhbSB3cml0ZXNDYWNoZVxuICogQHBhcmFtIHNlcnZlckNhY2hlXG4gKiBAcGFyYW0gc2VydmVyQ2FjaGVDb21wbGV0ZVxuICogQHJldHVybnMgRXZlbnRzIHRvIHJhaXNlLlxuICovXG5mdW5jdGlvbiBzeW5jUG9pbnRHZXRWaWV3KHN5bmNQb2ludCwgcXVlcnksIHdyaXRlc0NhY2hlLCBzZXJ2ZXJDYWNoZSwgc2VydmVyQ2FjaGVDb21wbGV0ZSkge1xuICAgIGNvbnN0IHF1ZXJ5SWQgPSBxdWVyeS5fcXVlcnlJZGVudGlmaWVyO1xuICAgIGNvbnN0IHZpZXcgPSBzeW5jUG9pbnQudmlld3MuZ2V0KHF1ZXJ5SWQpO1xuICAgIGlmICghdmlldykge1xuICAgICAgICAvLyBUT0RPOiBtYWtlIHdyaXRlc0NhY2hlIHRha2UgZmxhZyBmb3IgY29tcGxldGUgc2VydmVyIG5vZGVcbiAgICAgICAgbGV0IGV2ZW50Q2FjaGUgPSB3cml0ZVRyZWVSZWZDYWxjQ29tcGxldGVFdmVudENhY2hlKHdyaXRlc0NhY2hlLCBzZXJ2ZXJDYWNoZUNvbXBsZXRlID8gc2VydmVyQ2FjaGUgOiBudWxsKTtcbiAgICAgICAgbGV0IGV2ZW50Q2FjaGVDb21wbGV0ZSA9IGZhbHNlO1xuICAgICAgICBpZiAoZXZlbnRDYWNoZSkge1xuICAgICAgICAgICAgZXZlbnRDYWNoZUNvbXBsZXRlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzZXJ2ZXJDYWNoZSBpbnN0YW5jZW9mIENoaWxkcmVuTm9kZSkge1xuICAgICAgICAgICAgZXZlbnRDYWNoZSA9IHdyaXRlVHJlZVJlZkNhbGNDb21wbGV0ZUV2ZW50Q2hpbGRyZW4od3JpdGVzQ2FjaGUsIHNlcnZlckNhY2hlKTtcbiAgICAgICAgICAgIGV2ZW50Q2FjaGVDb21wbGV0ZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZXZlbnRDYWNoZSA9IENoaWxkcmVuTm9kZS5FTVBUWV9OT0RFO1xuICAgICAgICAgICAgZXZlbnRDYWNoZUNvbXBsZXRlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgdmlld0NhY2hlID0gbmV3Vmlld0NhY2hlKG5ldyBDYWNoZU5vZGUoZXZlbnRDYWNoZSwgZXZlbnRDYWNoZUNvbXBsZXRlLCBmYWxzZSksIG5ldyBDYWNoZU5vZGUoc2VydmVyQ2FjaGUsIHNlcnZlckNhY2hlQ29tcGxldGUsIGZhbHNlKSk7XG4gICAgICAgIHJldHVybiBuZXcgVmlldyhxdWVyeSwgdmlld0NhY2hlKTtcbiAgICB9XG4gICAgcmV0dXJuIHZpZXc7XG59XG4vKipcbiAqIEFkZCBhbiBldmVudCBjYWxsYmFjayBmb3IgdGhlIHNwZWNpZmllZCBxdWVyeS5cbiAqXG4gKiBAcGFyYW0gcXVlcnlcbiAqIEBwYXJhbSBldmVudFJlZ2lzdHJhdGlvblxuICogQHBhcmFtIHdyaXRlc0NhY2hlXG4gKiBAcGFyYW0gc2VydmVyQ2FjaGUgLSBDb21wbGV0ZSBzZXJ2ZXIgY2FjaGUsIGlmIHdlIGhhdmUgaXQuXG4gKiBAcGFyYW0gc2VydmVyQ2FjaGVDb21wbGV0ZVxuICogQHJldHVybnMgRXZlbnRzIHRvIHJhaXNlLlxuICovXG5mdW5jdGlvbiBzeW5jUG9pbnRBZGRFdmVudFJlZ2lzdHJhdGlvbihzeW5jUG9pbnQsIHF1ZXJ5LCBldmVudFJlZ2lzdHJhdGlvbiwgd3JpdGVzQ2FjaGUsIHNlcnZlckNhY2hlLCBzZXJ2ZXJDYWNoZUNvbXBsZXRlKSB7XG4gICAgY29uc3QgdmlldyA9IHN5bmNQb2ludEdldFZpZXcoc3luY1BvaW50LCBxdWVyeSwgd3JpdGVzQ2FjaGUsIHNlcnZlckNhY2hlLCBzZXJ2ZXJDYWNoZUNvbXBsZXRlKTtcbiAgICBpZiAoIXN5bmNQb2ludC52aWV3cy5oYXMocXVlcnkuX3F1ZXJ5SWRlbnRpZmllcikpIHtcbiAgICAgICAgc3luY1BvaW50LnZpZXdzLnNldChxdWVyeS5fcXVlcnlJZGVudGlmaWVyLCB2aWV3KTtcbiAgICB9XG4gICAgLy8gVGhpcyBpcyBndWFyYW50ZWVkIHRvIGV4aXN0IG5vdywgd2UganVzdCBjcmVhdGVkIGFueXRoaW5nIHRoYXQgd2FzIG1pc3NpbmdcbiAgICB2aWV3QWRkRXZlbnRSZWdpc3RyYXRpb24odmlldywgZXZlbnRSZWdpc3RyYXRpb24pO1xuICAgIHJldHVybiB2aWV3R2V0SW5pdGlhbEV2ZW50cyh2aWV3LCBldmVudFJlZ2lzdHJhdGlvbik7XG59XG4vKipcbiAqIFJlbW92ZSBldmVudCBjYWxsYmFjayhzKS4gIFJldHVybiBjYW5jZWxFdmVudHMgaWYgYSBjYW5jZWxFcnJvciBpcyBzcGVjaWZpZWQuXG4gKlxuICogSWYgcXVlcnkgaXMgdGhlIGRlZmF1bHQgcXVlcnksIHdlJ2xsIGNoZWNrIGFsbCB2aWV3cyBmb3IgdGhlIHNwZWNpZmllZCBldmVudFJlZ2lzdHJhdGlvbi5cbiAqIElmIGV2ZW50UmVnaXN0cmF0aW9uIGlzIG51bGwsIHdlJ2xsIHJlbW92ZSBhbGwgY2FsbGJhY2tzIGZvciB0aGUgc3BlY2lmaWVkIHZpZXcocykuXG4gKlxuICogQHBhcmFtIGV2ZW50UmVnaXN0cmF0aW9uIC0gSWYgbnVsbCwgcmVtb3ZlIGFsbCBjYWxsYmFja3MuXG4gKiBAcGFyYW0gY2FuY2VsRXJyb3IgLSBJZiBhIGNhbmNlbEVycm9yIGlzIHByb3ZpZGVkLCBhcHByb3ByaWF0ZSBjYW5jZWwgZXZlbnRzIHdpbGwgYmUgcmV0dXJuZWQuXG4gKiBAcmV0dXJucyByZW1vdmVkIHF1ZXJpZXMgYW5kIGFueSBjYW5jZWwgZXZlbnRzXG4gKi9cbmZ1bmN0aW9uIHN5bmNQb2ludFJlbW92ZUV2ZW50UmVnaXN0cmF0aW9uKHN5bmNQb2ludCwgcXVlcnksIGV2ZW50UmVnaXN0cmF0aW9uLCBjYW5jZWxFcnJvcikge1xuICAgIGNvbnN0IHF1ZXJ5SWQgPSBxdWVyeS5fcXVlcnlJZGVudGlmaWVyO1xuICAgIGNvbnN0IHJlbW92ZWQgPSBbXTtcbiAgICBsZXQgY2FuY2VsRXZlbnRzID0gW107XG4gICAgY29uc3QgaGFkQ29tcGxldGVWaWV3ID0gc3luY1BvaW50SGFzQ29tcGxldGVWaWV3KHN5bmNQb2ludCk7XG4gICAgaWYgKHF1ZXJ5SWQgPT09ICdkZWZhdWx0Jykge1xuICAgICAgICAvLyBXaGVuIHlvdSBkbyByZWYub2ZmKC4uLiksIHdlIHNlYXJjaCBhbGwgdmlld3MgZm9yIHRoZSByZWdpc3RyYXRpb24gdG8gcmVtb3ZlLlxuICAgICAgICBmb3IgKGNvbnN0IFt2aWV3UXVlcnlJZCwgdmlld10gb2Ygc3luY1BvaW50LnZpZXdzLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgY2FuY2VsRXZlbnRzID0gY2FuY2VsRXZlbnRzLmNvbmNhdCh2aWV3UmVtb3ZlRXZlbnRSZWdpc3RyYXRpb24odmlldywgZXZlbnRSZWdpc3RyYXRpb24sIGNhbmNlbEVycm9yKSk7XG4gICAgICAgICAgICBpZiAodmlld0lzRW1wdHkodmlldykpIHtcbiAgICAgICAgICAgICAgICBzeW5jUG9pbnQudmlld3MuZGVsZXRlKHZpZXdRdWVyeUlkKTtcbiAgICAgICAgICAgICAgICAvLyBXZSdsbCBkZWFsIHdpdGggY29tcGxldGUgdmlld3MgbGF0ZXIuXG4gICAgICAgICAgICAgICAgaWYgKCF2aWV3LnF1ZXJ5Ll9xdWVyeVBhcmFtcy5sb2Fkc0FsbERhdGEoKSkge1xuICAgICAgICAgICAgICAgICAgICByZW1vdmVkLnB1c2godmlldy5xdWVyeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyByZW1vdmUgdGhlIGNhbGxiYWNrIGZyb20gdGhlIHNwZWNpZmljIHZpZXcuXG4gICAgICAgIGNvbnN0IHZpZXcgPSBzeW5jUG9pbnQudmlld3MuZ2V0KHF1ZXJ5SWQpO1xuICAgICAgICBpZiAodmlldykge1xuICAgICAgICAgICAgY2FuY2VsRXZlbnRzID0gY2FuY2VsRXZlbnRzLmNvbmNhdCh2aWV3UmVtb3ZlRXZlbnRSZWdpc3RyYXRpb24odmlldywgZXZlbnRSZWdpc3RyYXRpb24sIGNhbmNlbEVycm9yKSk7XG4gICAgICAgICAgICBpZiAodmlld0lzRW1wdHkodmlldykpIHtcbiAgICAgICAgICAgICAgICBzeW5jUG9pbnQudmlld3MuZGVsZXRlKHF1ZXJ5SWQpO1xuICAgICAgICAgICAgICAgIC8vIFdlJ2xsIGRlYWwgd2l0aCBjb21wbGV0ZSB2aWV3cyBsYXRlci5cbiAgICAgICAgICAgICAgICBpZiAoIXZpZXcucXVlcnkuX3F1ZXJ5UGFyYW1zLmxvYWRzQWxsRGF0YSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZWQucHVzaCh2aWV3LnF1ZXJ5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGhhZENvbXBsZXRlVmlldyAmJiAhc3luY1BvaW50SGFzQ29tcGxldGVWaWV3KHN5bmNQb2ludCkpIHtcbiAgICAgICAgLy8gV2UgcmVtb3ZlZCBvdXIgbGFzdCBjb21wbGV0ZSB2aWV3LlxuICAgICAgICByZW1vdmVkLnB1c2gobmV3IChzeW5jUG9pbnRHZXRSZWZlcmVuY2VDb25zdHJ1Y3RvcigpKShxdWVyeS5fcmVwbywgcXVlcnkuX3BhdGgpKTtcbiAgICB9XG4gICAgcmV0dXJuIHsgcmVtb3ZlZCwgZXZlbnRzOiBjYW5jZWxFdmVudHMgfTtcbn1cbmZ1bmN0aW9uIHN5bmNQb2ludEdldFF1ZXJ5Vmlld3Moc3luY1BvaW50KSB7XG4gICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgZm9yIChjb25zdCB2aWV3IG9mIHN5bmNQb2ludC52aWV3cy52YWx1ZXMoKSkge1xuICAgICAgICBpZiAoIXZpZXcucXVlcnkuX3F1ZXJ5UGFyYW1zLmxvYWRzQWxsRGF0YSgpKSB7XG4gICAgICAgICAgICByZXN1bHQucHVzaCh2aWV3KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLyoqXG4gKiBAcGFyYW0gcGF0aCAtIFRoZSBwYXRoIHRvIHRoZSBkZXNpcmVkIGNvbXBsZXRlIHNuYXBzaG90XG4gKiBAcmV0dXJucyBBIGNvbXBsZXRlIGNhY2hlLCBpZiBpdCBleGlzdHNcbiAqL1xuZnVuY3Rpb24gc3luY1BvaW50R2V0Q29tcGxldGVTZXJ2ZXJDYWNoZShzeW5jUG9pbnQsIHBhdGgpIHtcbiAgICBsZXQgc2VydmVyQ2FjaGUgPSBudWxsO1xuICAgIGZvciAoY29uc3QgdmlldyBvZiBzeW5jUG9pbnQudmlld3MudmFsdWVzKCkpIHtcbiAgICAgICAgc2VydmVyQ2FjaGUgPSBzZXJ2ZXJDYWNoZSB8fCB2aWV3R2V0Q29tcGxldGVTZXJ2ZXJDYWNoZSh2aWV3LCBwYXRoKTtcbiAgICB9XG4gICAgcmV0dXJuIHNlcnZlckNhY2hlO1xufVxuZnVuY3Rpb24gc3luY1BvaW50Vmlld0ZvclF1ZXJ5KHN5bmNQb2ludCwgcXVlcnkpIHtcbiAgICBjb25zdCBwYXJhbXMgPSBxdWVyeS5fcXVlcnlQYXJhbXM7XG4gICAgaWYgKHBhcmFtcy5sb2Fkc0FsbERhdGEoKSkge1xuICAgICAgICByZXR1cm4gc3luY1BvaW50R2V0Q29tcGxldGVWaWV3KHN5bmNQb2ludCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBxdWVyeUlkID0gcXVlcnkuX3F1ZXJ5SWRlbnRpZmllcjtcbiAgICAgICAgcmV0dXJuIHN5bmNQb2ludC52aWV3cy5nZXQocXVlcnlJZCk7XG4gICAgfVxufVxuZnVuY3Rpb24gc3luY1BvaW50Vmlld0V4aXN0c0ZvclF1ZXJ5KHN5bmNQb2ludCwgcXVlcnkpIHtcbiAgICByZXR1cm4gc3luY1BvaW50Vmlld0ZvclF1ZXJ5KHN5bmNQb2ludCwgcXVlcnkpICE9IG51bGw7XG59XG5mdW5jdGlvbiBzeW5jUG9pbnRIYXNDb21wbGV0ZVZpZXcoc3luY1BvaW50KSB7XG4gICAgcmV0dXJuIHN5bmNQb2ludEdldENvbXBsZXRlVmlldyhzeW5jUG9pbnQpICE9IG51bGw7XG59XG5mdW5jdGlvbiBzeW5jUG9pbnRHZXRDb21wbGV0ZVZpZXcoc3luY1BvaW50KSB7XG4gICAgZm9yIChjb25zdCB2aWV3IG9mIHN5bmNQb2ludC52aWV3cy52YWx1ZXMoKSkge1xuICAgICAgICBpZiAodmlldy5xdWVyeS5fcXVlcnlQYXJhbXMubG9hZHNBbGxEYXRhKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB2aWV3O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xubGV0IHJlZmVyZW5jZUNvbnN0cnVjdG9yO1xuZnVuY3Rpb24gc3luY1RyZWVTZXRSZWZlcmVuY2VDb25zdHJ1Y3Rvcih2YWwpIHtcbiAgICBhc3NlcnQoIXJlZmVyZW5jZUNvbnN0cnVjdG9yLCAnX19yZWZlcmVuY2VDb25zdHJ1Y3RvciBoYXMgYWxyZWFkeSBiZWVuIGRlZmluZWQnKTtcbiAgICByZWZlcmVuY2VDb25zdHJ1Y3RvciA9IHZhbDtcbn1cbmZ1bmN0aW9uIHN5bmNUcmVlR2V0UmVmZXJlbmNlQ29uc3RydWN0b3IoKSB7XG4gICAgYXNzZXJ0KHJlZmVyZW5jZUNvbnN0cnVjdG9yLCAnUmVmZXJlbmNlLnRzIGhhcyBub3QgYmVlbiBsb2FkZWQnKTtcbiAgICByZXR1cm4gcmVmZXJlbmNlQ29uc3RydWN0b3I7XG59XG4vKipcbiAqIFN0YXRpYyB0cmFja2VyIGZvciBuZXh0IHF1ZXJ5IHRhZy5cbiAqL1xubGV0IHN5bmNUcmVlTmV4dFF1ZXJ5VGFnXyA9IDE7XG4vKipcbiAqIFN5bmNUcmVlIGlzIHRoZSBjZW50cmFsIGNsYXNzIGZvciBtYW5hZ2luZyBldmVudCBjYWxsYmFjayByZWdpc3RyYXRpb24sIGRhdGEgY2FjaGluZywgdmlld3NcbiAqIChxdWVyeSBwcm9jZXNzaW5nKSwgYW5kIGV2ZW50IGdlbmVyYXRpb24uICBUaGVyZSBhcmUgdHlwaWNhbGx5IHR3byBTeW5jVHJlZSBpbnN0YW5jZXMgZm9yXG4gKiBlYWNoIFJlcG8sIG9uZSBmb3IgdGhlIG5vcm1hbCBGaXJlYmFzZSBkYXRhLCBhbmQgb25lIGZvciB0aGUgLmluZm8gZGF0YS5cbiAqXG4gKiBJdCBoYXMgYSBudW1iZXIgb2YgcmVzcG9uc2liaWxpdGllcywgaW5jbHVkaW5nOlxuICogIC0gVHJhY2tpbmcgYWxsIHVzZXIgZXZlbnQgY2FsbGJhY2tzIChyZWdpc3RlcmVkIHZpYSBhZGRFdmVudFJlZ2lzdHJhdGlvbigpIGFuZCByZW1vdmVFdmVudFJlZ2lzdHJhdGlvbigpKS5cbiAqICAtIEFwcGx5aW5nIGFuZCBjYWNoaW5nIGRhdGEgY2hhbmdlcyBmb3IgdXNlciBzZXQoKSwgdHJhbnNhY3Rpb24oKSwgYW5kIHVwZGF0ZSgpIGNhbGxzXG4gKiAgICAoYXBwbHlVc2VyT3ZlcndyaXRlKCksIGFwcGx5VXNlck1lcmdlKCkpLlxuICogIC0gQXBwbHlpbmcgYW5kIGNhY2hpbmcgZGF0YSBjaGFuZ2VzIGZvciBzZXJ2ZXIgZGF0YSBjaGFuZ2VzIChhcHBseVNlcnZlck92ZXJ3cml0ZSgpLFxuICogICAgYXBwbHlTZXJ2ZXJNZXJnZSgpKS5cbiAqICAtIEdlbmVyYXRpbmcgdXNlci1mYWNpbmcgZXZlbnRzIGZvciBzZXJ2ZXIgYW5kIHVzZXIgY2hhbmdlcyAoYWxsIG9mIHRoZSBhcHBseSogbWV0aG9kc1xuICogICAgcmV0dXJuIHRoZSBzZXQgb2YgZXZlbnRzIHRoYXQgbmVlZCB0byBiZSByYWlzZWQgYXMgYSByZXN1bHQpLlxuICogIC0gTWFpbnRhaW5pbmcgdGhlIGFwcHJvcHJpYXRlIHNldCBvZiBzZXJ2ZXIgbGlzdGVucyB0byBlbnN1cmUgd2UgYXJlIGFsd2F5cyBzdWJzY3JpYmVkXG4gKiAgICB0byB0aGUgY29ycmVjdCBzZXQgb2YgcGF0aHMgYW5kIHF1ZXJpZXMgdG8gc2F0aXNmeSB0aGUgY3VycmVudCBzZXQgb2YgdXNlciBldmVudFxuICogICAgY2FsbGJhY2tzIChsaXN0ZW5zIGFyZSBzdGFydGVkL3N0b3BwZWQgdXNpbmcgdGhlIHByb3ZpZGVkIGxpc3RlblByb3ZpZGVyKS5cbiAqXG4gKiBOT1RFOiBBbHRob3VnaCBTeW5jVHJlZSB0cmFja3MgZXZlbnQgY2FsbGJhY2tzIGFuZCBjYWxjdWxhdGVzIGV2ZW50cyB0byByYWlzZSwgdGhlIGFjdHVhbFxuICogZXZlbnRzIGFyZSByZXR1cm5lZCB0byB0aGUgY2FsbGVyIHJhdGhlciB0aGFuIHJhaXNlZCBzeW5jaHJvbm91c2x5LlxuICpcbiAqL1xuY2xhc3MgU3luY1RyZWUge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBsaXN0ZW5Qcm92aWRlcl8gLSBVc2VkIGJ5IFN5bmNUcmVlIHRvIHN0YXJ0IC8gc3RvcCBsaXN0ZW5pbmdcbiAgICAgKiAgIHRvIHNlcnZlciBkYXRhLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGxpc3RlblByb3ZpZGVyXykge1xuICAgICAgICB0aGlzLmxpc3RlblByb3ZpZGVyXyA9IGxpc3RlblByb3ZpZGVyXztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRyZWUgb2YgU3luY1BvaW50cy4gIFRoZXJlJ3MgYSBTeW5jUG9pbnQgYXQgYW55IGxvY2F0aW9uIHRoYXQgaGFzIDEgb3IgbW9yZSB2aWV3cy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc3luY1BvaW50VHJlZV8gPSBuZXcgSW1tdXRhYmxlVHJlZShudWxsKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgdHJlZSBvZiBhbGwgcGVuZGluZyB1c2VyIHdyaXRlcyAodXNlci1pbml0aWF0ZWQgc2V0KCkncywgdHJhbnNhY3Rpb24oKSdzLCB1cGRhdGUoKSdzLCBldGMuKS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucGVuZGluZ1dyaXRlVHJlZV8gPSBuZXdXcml0ZVRyZWUoKTtcbiAgICAgICAgdGhpcy50YWdUb1F1ZXJ5TWFwID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLnF1ZXJ5VG9UYWdNYXAgPSBuZXcgTWFwKCk7XG4gICAgfVxufVxuLyoqXG4gKiBBcHBseSB0aGUgZGF0YSBjaGFuZ2VzIGZvciBhIHVzZXItZ2VuZXJhdGVkIHNldCgpIG9yIHRyYW5zYWN0aW9uKCkgY2FsbC5cbiAqXG4gKiBAcmV0dXJucyBFdmVudHMgdG8gcmFpc2UuXG4gKi9cbmZ1bmN0aW9uIHN5bmNUcmVlQXBwbHlVc2VyT3ZlcndyaXRlKHN5bmNUcmVlLCBwYXRoLCBuZXdEYXRhLCB3cml0ZUlkLCB2aXNpYmxlKSB7XG4gICAgLy8gUmVjb3JkIHBlbmRpbmcgd3JpdGUuXG4gICAgd3JpdGVUcmVlQWRkT3ZlcndyaXRlKHN5bmNUcmVlLnBlbmRpbmdXcml0ZVRyZWVfLCBwYXRoLCBuZXdEYXRhLCB3cml0ZUlkLCB2aXNpYmxlKTtcbiAgICBpZiAoIXZpc2libGUpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHN5bmNUcmVlQXBwbHlPcGVyYXRpb25Ub1N5bmNQb2ludHNfKHN5bmNUcmVlLCBuZXcgT3ZlcndyaXRlKG5ld09wZXJhdGlvblNvdXJjZVVzZXIoKSwgcGF0aCwgbmV3RGF0YSkpO1xuICAgIH1cbn1cbi8qKlxuICogQXBwbHkgdGhlIGRhdGEgZnJvbSBhIHVzZXItZ2VuZXJhdGVkIHVwZGF0ZSgpIGNhbGxcbiAqXG4gKiBAcmV0dXJucyBFdmVudHMgdG8gcmFpc2UuXG4gKi9cbmZ1bmN0aW9uIHN5bmNUcmVlQXBwbHlVc2VyTWVyZ2Uoc3luY1RyZWUsIHBhdGgsIGNoYW5nZWRDaGlsZHJlbiwgd3JpdGVJZCkge1xuICAgIC8vIFJlY29yZCBwZW5kaW5nIG1lcmdlLlxuICAgIHdyaXRlVHJlZUFkZE1lcmdlKHN5bmNUcmVlLnBlbmRpbmdXcml0ZVRyZWVfLCBwYXRoLCBjaGFuZ2VkQ2hpbGRyZW4sIHdyaXRlSWQpO1xuICAgIGNvbnN0IGNoYW5nZVRyZWUgPSBJbW11dGFibGVUcmVlLmZyb21PYmplY3QoY2hhbmdlZENoaWxkcmVuKTtcbiAgICByZXR1cm4gc3luY1RyZWVBcHBseU9wZXJhdGlvblRvU3luY1BvaW50c18oc3luY1RyZWUsIG5ldyBNZXJnZShuZXdPcGVyYXRpb25Tb3VyY2VVc2VyKCksIHBhdGgsIGNoYW5nZVRyZWUpKTtcbn1cbi8qKlxuICogQWNrbm93bGVkZ2UgYSBwZW5kaW5nIHVzZXIgd3JpdGUgdGhhdCB3YXMgcHJldmlvdXNseSByZWdpc3RlcmVkIHdpdGggYXBwbHlVc2VyT3ZlcndyaXRlKCkgb3IgYXBwbHlVc2VyTWVyZ2UoKS5cbiAqXG4gKiBAcGFyYW0gcmV2ZXJ0IC0gVHJ1ZSBpZiB0aGUgZ2l2ZW4gd3JpdGUgZmFpbGVkIGFuZCBuZWVkcyB0byBiZSByZXZlcnRlZFxuICogQHJldHVybnMgRXZlbnRzIHRvIHJhaXNlLlxuICovXG5mdW5jdGlvbiBzeW5jVHJlZUFja1VzZXJXcml0ZShzeW5jVHJlZSwgd3JpdGVJZCwgcmV2ZXJ0ID0gZmFsc2UpIHtcbiAgICBjb25zdCB3cml0ZSA9IHdyaXRlVHJlZUdldFdyaXRlKHN5bmNUcmVlLnBlbmRpbmdXcml0ZVRyZWVfLCB3cml0ZUlkKTtcbiAgICBjb25zdCBuZWVkVG9SZWV2YWx1YXRlID0gd3JpdGVUcmVlUmVtb3ZlV3JpdGUoc3luY1RyZWUucGVuZGluZ1dyaXRlVHJlZV8sIHdyaXRlSWQpO1xuICAgIGlmICghbmVlZFRvUmVldmFsdWF0ZSkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBsZXQgYWZmZWN0ZWRUcmVlID0gbmV3IEltbXV0YWJsZVRyZWUobnVsbCk7XG4gICAgICAgIGlmICh3cml0ZS5zbmFwICE9IG51bGwpIHtcbiAgICAgICAgICAgIC8vIG92ZXJ3cml0ZVxuICAgICAgICAgICAgYWZmZWN0ZWRUcmVlID0gYWZmZWN0ZWRUcmVlLnNldChuZXdFbXB0eVBhdGgoKSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlYWNoKHdyaXRlLmNoaWxkcmVuLCAocGF0aFN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgIGFmZmVjdGVkVHJlZSA9IGFmZmVjdGVkVHJlZS5zZXQobmV3IFBhdGgocGF0aFN0cmluZyksIHRydWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN5bmNUcmVlQXBwbHlPcGVyYXRpb25Ub1N5bmNQb2ludHNfKHN5bmNUcmVlLCBuZXcgQWNrVXNlcldyaXRlKHdyaXRlLnBhdGgsIGFmZmVjdGVkVHJlZSwgcmV2ZXJ0KSk7XG4gICAgfVxufVxuLyoqXG4gKiBBcHBseSBuZXcgc2VydmVyIGRhdGEgZm9yIHRoZSBzcGVjaWZpZWQgcGF0aC4uXG4gKlxuICogQHJldHVybnMgRXZlbnRzIHRvIHJhaXNlLlxuICovXG5mdW5jdGlvbiBzeW5jVHJlZUFwcGx5U2VydmVyT3ZlcndyaXRlKHN5bmNUcmVlLCBwYXRoLCBuZXdEYXRhKSB7XG4gICAgcmV0dXJuIHN5bmNUcmVlQXBwbHlPcGVyYXRpb25Ub1N5bmNQb2ludHNfKHN5bmNUcmVlLCBuZXcgT3ZlcndyaXRlKG5ld09wZXJhdGlvblNvdXJjZVNlcnZlcigpLCBwYXRoLCBuZXdEYXRhKSk7XG59XG4vKipcbiAqIEFwcGx5IG5ldyBzZXJ2ZXIgZGF0YSB0byBiZSBtZXJnZWQgaW4gYXQgdGhlIHNwZWNpZmllZCBwYXRoLlxuICpcbiAqIEByZXR1cm5zIEV2ZW50cyB0byByYWlzZS5cbiAqL1xuZnVuY3Rpb24gc3luY1RyZWVBcHBseVNlcnZlck1lcmdlKHN5bmNUcmVlLCBwYXRoLCBjaGFuZ2VkQ2hpbGRyZW4pIHtcbiAgICBjb25zdCBjaGFuZ2VUcmVlID0gSW1tdXRhYmxlVHJlZS5mcm9tT2JqZWN0KGNoYW5nZWRDaGlsZHJlbik7XG4gICAgcmV0dXJuIHN5bmNUcmVlQXBwbHlPcGVyYXRpb25Ub1N5bmNQb2ludHNfKHN5bmNUcmVlLCBuZXcgTWVyZ2UobmV3T3BlcmF0aW9uU291cmNlU2VydmVyKCksIHBhdGgsIGNoYW5nZVRyZWUpKTtcbn1cbi8qKlxuICogQXBwbHkgYSBsaXN0ZW4gY29tcGxldGUgZm9yIGEgcXVlcnlcbiAqXG4gKiBAcmV0dXJucyBFdmVudHMgdG8gcmFpc2UuXG4gKi9cbmZ1bmN0aW9uIHN5bmNUcmVlQXBwbHlMaXN0ZW5Db21wbGV0ZShzeW5jVHJlZSwgcGF0aCkge1xuICAgIHJldHVybiBzeW5jVHJlZUFwcGx5T3BlcmF0aW9uVG9TeW5jUG9pbnRzXyhzeW5jVHJlZSwgbmV3IExpc3RlbkNvbXBsZXRlKG5ld09wZXJhdGlvblNvdXJjZVNlcnZlcigpLCBwYXRoKSk7XG59XG4vKipcbiAqIEFwcGx5IGEgbGlzdGVuIGNvbXBsZXRlIGZvciBhIHRhZ2dlZCBxdWVyeVxuICpcbiAqIEByZXR1cm5zIEV2ZW50cyB0byByYWlzZS5cbiAqL1xuZnVuY3Rpb24gc3luY1RyZWVBcHBseVRhZ2dlZExpc3RlbkNvbXBsZXRlKHN5bmNUcmVlLCBwYXRoLCB0YWcpIHtcbiAgICBjb25zdCBxdWVyeUtleSA9IHN5bmNUcmVlUXVlcnlLZXlGb3JUYWdfKHN5bmNUcmVlLCB0YWcpO1xuICAgIGlmIChxdWVyeUtleSkge1xuICAgICAgICBjb25zdCByID0gc3luY1RyZWVQYXJzZVF1ZXJ5S2V5XyhxdWVyeUtleSk7XG4gICAgICAgIGNvbnN0IHF1ZXJ5UGF0aCA9IHIucGF0aCwgcXVlcnlJZCA9IHIucXVlcnlJZDtcbiAgICAgICAgY29uc3QgcmVsYXRpdmVQYXRoID0gbmV3UmVsYXRpdmVQYXRoKHF1ZXJ5UGF0aCwgcGF0aCk7XG4gICAgICAgIGNvbnN0IG9wID0gbmV3IExpc3RlbkNvbXBsZXRlKG5ld09wZXJhdGlvblNvdXJjZVNlcnZlclRhZ2dlZFF1ZXJ5KHF1ZXJ5SWQpLCByZWxhdGl2ZVBhdGgpO1xuICAgICAgICByZXR1cm4gc3luY1RyZWVBcHBseVRhZ2dlZE9wZXJhdGlvbl8oc3luY1RyZWUsIHF1ZXJ5UGF0aCwgb3ApO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gV2UndmUgYWxyZWFkeSByZW1vdmVkIHRoZSBxdWVyeS4gTm8gYmlnIGRlYWwsIGlnbm9yZSB0aGUgdXBkYXRlXG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG59XG4vKipcbiAqIFJlbW92ZSBldmVudCBjYWxsYmFjayhzKS5cbiAqXG4gKiBJZiBxdWVyeSBpcyB0aGUgZGVmYXVsdCBxdWVyeSwgd2UnbGwgY2hlY2sgYWxsIHF1ZXJpZXMgZm9yIHRoZSBzcGVjaWZpZWQgZXZlbnRSZWdpc3RyYXRpb24uXG4gKiBJZiBldmVudFJlZ2lzdHJhdGlvbiBpcyBudWxsLCB3ZSdsbCByZW1vdmUgYWxsIGNhbGxiYWNrcyBmb3IgdGhlIHNwZWNpZmllZCBxdWVyeS9xdWVyaWVzLlxuICpcbiAqIEBwYXJhbSBldmVudFJlZ2lzdHJhdGlvbiAtIElmIG51bGwsIGFsbCBjYWxsYmFja3MgYXJlIHJlbW92ZWQuXG4gKiBAcGFyYW0gY2FuY2VsRXJyb3IgLSBJZiBhIGNhbmNlbEVycm9yIGlzIHByb3ZpZGVkLCBhcHByb3ByaWF0ZSBjYW5jZWwgZXZlbnRzIHdpbGwgYmUgcmV0dXJuZWQuXG4gKiBAcGFyYW0gc2tpcExpc3RlbmVyRGVkdXAgLSBXaGVuIHBlcmZvcm1pbmcgYSBgZ2V0KClgLCB3ZSBkb24ndCBhZGQgYW55IG5ldyBsaXN0ZW5lcnMsIHNvIG5vXG4gKiAgZGVkdXBpbmcgbmVlZHMgdG8gdGFrZSBwbGFjZS4gVGhpcyBmbGFnIGFsbG93cyB0b2dnbGluZyBvZiB0aGF0IGJlaGF2aW9yXG4gKiBAcmV0dXJucyBDYW5jZWwgZXZlbnRzLCBpZiBjYW5jZWxFcnJvciB3YXMgcHJvdmlkZWQuXG4gKi9cbmZ1bmN0aW9uIHN5bmNUcmVlUmVtb3ZlRXZlbnRSZWdpc3RyYXRpb24oc3luY1RyZWUsIHF1ZXJ5LCBldmVudFJlZ2lzdHJhdGlvbiwgY2FuY2VsRXJyb3IsIHNraXBMaXN0ZW5lckRlZHVwID0gZmFsc2UpIHtcbiAgICAvLyBGaW5kIHRoZSBzeW5jUG9pbnQgZmlyc3QuIFRoZW4gZGVhbCB3aXRoIHdoZXRoZXIgb3Igbm90IGl0IGhhcyBtYXRjaGluZyBsaXN0ZW5lcnNcbiAgICBjb25zdCBwYXRoID0gcXVlcnkuX3BhdGg7XG4gICAgY29uc3QgbWF5YmVTeW5jUG9pbnQgPSBzeW5jVHJlZS5zeW5jUG9pbnRUcmVlXy5nZXQocGF0aCk7XG4gICAgbGV0IGNhbmNlbEV2ZW50cyA9IFtdO1xuICAgIC8vIEEgcmVtb3ZhbCBvbiBhIGRlZmF1bHQgcXVlcnkgYWZmZWN0cyBhbGwgcXVlcmllcyBhdCB0aGF0IGxvY2F0aW9uLiBBIHJlbW92YWwgb24gYW4gaW5kZXhlZCBxdWVyeSwgZXZlbiBvbmUgd2l0aG91dFxuICAgIC8vIG90aGVyIHF1ZXJ5IGNvbnN0cmFpbnRzLCBkb2VzICpub3QqIGFmZmVjdCBhbGwgcXVlcmllcyBhdCB0aGF0IGxvY2F0aW9uLiBTbyB0aGlzIGNoZWNrIG11c3QgYmUgZm9yICdkZWZhdWx0JywgYW5kXG4gICAgLy8gbm90IGxvYWRzQWxsRGF0YSgpLlxuICAgIGlmIChtYXliZVN5bmNQb2ludCAmJlxuICAgICAgICAocXVlcnkuX3F1ZXJ5SWRlbnRpZmllciA9PT0gJ2RlZmF1bHQnIHx8XG4gICAgICAgICAgICBzeW5jUG9pbnRWaWV3RXhpc3RzRm9yUXVlcnkobWF5YmVTeW5jUG9pbnQsIHF1ZXJ5KSkpIHtcbiAgICAgICAgY29uc3QgcmVtb3ZlZEFuZEV2ZW50cyA9IHN5bmNQb2ludFJlbW92ZUV2ZW50UmVnaXN0cmF0aW9uKG1heWJlU3luY1BvaW50LCBxdWVyeSwgZXZlbnRSZWdpc3RyYXRpb24sIGNhbmNlbEVycm9yKTtcbiAgICAgICAgaWYgKHN5bmNQb2ludElzRW1wdHkobWF5YmVTeW5jUG9pbnQpKSB7XG4gICAgICAgICAgICBzeW5jVHJlZS5zeW5jUG9pbnRUcmVlXyA9IHN5bmNUcmVlLnN5bmNQb2ludFRyZWVfLnJlbW92ZShwYXRoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZW1vdmVkID0gcmVtb3ZlZEFuZEV2ZW50cy5yZW1vdmVkO1xuICAgICAgICBjYW5jZWxFdmVudHMgPSByZW1vdmVkQW5kRXZlbnRzLmV2ZW50cztcbiAgICAgICAgaWYgKCFza2lwTGlzdGVuZXJEZWR1cCkge1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBXZSBtYXkgaGF2ZSBqdXN0IHJlbW92ZWQgb25lIG9mIG1hbnkgbGlzdGVuZXJzIGFuZCBjYW4gc2hvcnQtY2lyY3VpdCB0aGlzIHdob2xlIHByb2Nlc3NcbiAgICAgICAgICAgICAqIFdlIG1heSBhbHNvIG5vdCBoYXZlIHJlbW92ZWQgYSBkZWZhdWx0IGxpc3RlbmVyLCBpbiB3aGljaCBjYXNlIGFsbCBvZiB0aGUgZGVzY2VuZGFudCBsaXN0ZW5lcnMgc2hvdWxkIGFscmVhZHkgYmVcbiAgICAgICAgICAgICAqIHByb3Blcmx5IHNldCB1cC5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgLy8gU2luY2UgaW5kZXhlZCBxdWVyaWVzIGNhbiBzaGFkb3cgaWYgdGhleSBkb24ndCBoYXZlIG90aGVyIHF1ZXJ5IGNvbnN0cmFpbnRzLCBjaGVjayBmb3IgbG9hZHNBbGxEYXRhKCksIGluc3RlYWQgb2ZcbiAgICAgICAgICAgIC8vIHF1ZXJ5SWQgPT09ICdkZWZhdWx0J1xuICAgICAgICAgICAgY29uc3QgcmVtb3ZpbmdEZWZhdWx0ID0gLTEgIT09XG4gICAgICAgICAgICAgICAgcmVtb3ZlZC5maW5kSW5kZXgocXVlcnkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcXVlcnkuX3F1ZXJ5UGFyYW1zLmxvYWRzQWxsRGF0YSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgY292ZXJlZCA9IHN5bmNUcmVlLnN5bmNQb2ludFRyZWVfLmZpbmRPblBhdGgocGF0aCwgKHJlbGF0aXZlUGF0aCwgcGFyZW50U3luY1BvaW50KSA9PiBzeW5jUG9pbnRIYXNDb21wbGV0ZVZpZXcocGFyZW50U3luY1BvaW50KSk7XG4gICAgICAgICAgICBpZiAocmVtb3ZpbmdEZWZhdWx0ICYmICFjb3ZlcmVkKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3VidHJlZSA9IHN5bmNUcmVlLnN5bmNQb2ludFRyZWVfLnN1YnRyZWUocGF0aCk7XG4gICAgICAgICAgICAgICAgLy8gVGhlcmUgYXJlIHBvdGVudGlhbGx5IGNoaWxkIGxpc3RlbmVycy4gRGV0ZXJtaW5lIHdoYXQgaWYgYW55IGxpc3RlbnMgd2UgbmVlZCB0byBzZW5kIGJlZm9yZSBleGVjdXRpbmcgdGhlXG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZhbFxuICAgICAgICAgICAgICAgIGlmICghc3VidHJlZS5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBmb2xkIG92ZXIgb3VyIHN1YnRyZWUgYW5kIGNvbGxlY3QgdGhlIGxpc3RlbmVycyB0byBzZW5kXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1ZpZXdzID0gc3luY1RyZWVDb2xsZWN0RGlzdGluY3RWaWV3c0ZvclN1YlRyZWVfKHN1YnRyZWUpO1xuICAgICAgICAgICAgICAgICAgICAvLyBPaywgd2UndmUgY29sbGVjdGVkIGFsbCB0aGUgbGlzdGVucyB3ZSBuZWVkLiBTZXQgdGhlbSB1cC5cbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXdWaWV3cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmlldyA9IG5ld1ZpZXdzW2ldLCBuZXdRdWVyeSA9IHZpZXcucXVlcnk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsaXN0ZW5lciA9IHN5bmNUcmVlQ3JlYXRlTGlzdGVuZXJGb3JWaWV3XyhzeW5jVHJlZSwgdmlldyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzeW5jVHJlZS5saXN0ZW5Qcm92aWRlcl8uc3RhcnRMaXN0ZW5pbmcoc3luY1RyZWVRdWVyeUZvckxpc3RlbmluZ18obmV3UXVlcnkpLCBzeW5jVHJlZVRhZ0ZvclF1ZXJ5KHN5bmNUcmVlLCBuZXdRdWVyeSksIGxpc3RlbmVyLmhhc2hGbiwgbGlzdGVuZXIub25Db21wbGV0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIHRoZXJlJ3Mgbm90aGluZyBiZWxvdyB1cywgc28gbm90aGluZyB3ZSBuZWVkIHRvIHN0YXJ0IGxpc3RlbmluZyBvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgd2UgcmVtb3ZlZCBhbnl0aGluZyBhbmQgd2UncmUgbm90IGNvdmVyZWQgYnkgYSBoaWdoZXIgdXAgbGlzdGVuLCB3ZSBuZWVkIHRvIHN0b3AgbGlzdGVuaW5nIG9uIHRoaXMgcXVlcnlcbiAgICAgICAgICAgIC8vIFRoZSBhYm92ZSBibG9jayBoYXMgdXMgY292ZXJlZCBpbiB0ZXJtcyBvZiBtYWtpbmcgc3VyZSB3ZSdyZSBzZXQgdXAgb24gbGlzdGVucyBsb3dlciBpbiB0aGUgdHJlZS5cbiAgICAgICAgICAgIC8vIEFsc28sIG5vdGUgdGhhdCBpZiB3ZSBoYXZlIGEgY2FuY2VsRXJyb3IsIGl0J3MgYWxyZWFkeSBiZWVuIHJlbW92ZWQgYXQgdGhlIHByb3ZpZGVyIGxldmVsLlxuICAgICAgICAgICAgaWYgKCFjb3ZlcmVkICYmIHJlbW92ZWQubGVuZ3RoID4gMCAmJiAhY2FuY2VsRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB3ZSByZW1vdmVkIGEgZGVmYXVsdCwgdGhlbiB3ZSB3ZXJlbid0IGxpc3RlbmluZyBvbiBhbnkgb2YgdGhlIG90aGVyIHF1ZXJpZXMgaGVyZS4gSnVzdCBjYW5jZWwgdGhlIG9uZVxuICAgICAgICAgICAgICAgIC8vIGRlZmF1bHQuIE90aGVyd2lzZSwgd2UgbmVlZCB0byBpdGVyYXRlIHRocm91Z2ggYW5kIGNhbmNlbCBlYWNoIGluZGl2aWR1YWwgcXVlcnlcbiAgICAgICAgICAgICAgICBpZiAocmVtb3ZpbmdEZWZhdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIGRvbid0IHRhZyBkZWZhdWx0IGxpc3RlbmVyc1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWZhdWx0VGFnID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgc3luY1RyZWUubGlzdGVuUHJvdmlkZXJfLnN0b3BMaXN0ZW5pbmcoc3luY1RyZWVRdWVyeUZvckxpc3RlbmluZ18ocXVlcnkpLCBkZWZhdWx0VGFnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZWQuZm9yRWFjaCgocXVlcnlUb1JlbW92ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFnVG9SZW1vdmUgPSBzeW5jVHJlZS5xdWVyeVRvVGFnTWFwLmdldChzeW5jVHJlZU1ha2VRdWVyeUtleV8ocXVlcnlUb1JlbW92ZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3luY1RyZWUubGlzdGVuUHJvdmlkZXJfLnN0b3BMaXN0ZW5pbmcoc3luY1RyZWVRdWVyeUZvckxpc3RlbmluZ18ocXVlcnlUb1JlbW92ZSksIHRhZ1RvUmVtb3ZlKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIE5vdywgY2xlYXIgYWxsIG9mIHRoZSB0YWdzIHdlJ3JlIHRyYWNraW5nIGZvciB0aGUgcmVtb3ZlZCBsaXN0ZW5zXG4gICAgICAgIHN5bmNUcmVlUmVtb3ZlVGFnc18oc3luY1RyZWUsIHJlbW92ZWQpO1xuICAgIH1cbiAgICByZXR1cm4gY2FuY2VsRXZlbnRzO1xufVxuLyoqXG4gKiBBcHBseSBuZXcgc2VydmVyIGRhdGEgZm9yIHRoZSBzcGVjaWZpZWQgdGFnZ2VkIHF1ZXJ5LlxuICpcbiAqIEByZXR1cm5zIEV2ZW50cyB0byByYWlzZS5cbiAqL1xuZnVuY3Rpb24gc3luY1RyZWVBcHBseVRhZ2dlZFF1ZXJ5T3ZlcndyaXRlKHN5bmNUcmVlLCBwYXRoLCBzbmFwLCB0YWcpIHtcbiAgICBjb25zdCBxdWVyeUtleSA9IHN5bmNUcmVlUXVlcnlLZXlGb3JUYWdfKHN5bmNUcmVlLCB0YWcpO1xuICAgIGlmIChxdWVyeUtleSAhPSBudWxsKSB7XG4gICAgICAgIGNvbnN0IHIgPSBzeW5jVHJlZVBhcnNlUXVlcnlLZXlfKHF1ZXJ5S2V5KTtcbiAgICAgICAgY29uc3QgcXVlcnlQYXRoID0gci5wYXRoLCBxdWVyeUlkID0gci5xdWVyeUlkO1xuICAgICAgICBjb25zdCByZWxhdGl2ZVBhdGggPSBuZXdSZWxhdGl2ZVBhdGgocXVlcnlQYXRoLCBwYXRoKTtcbiAgICAgICAgY29uc3Qgb3AgPSBuZXcgT3ZlcndyaXRlKG5ld09wZXJhdGlvblNvdXJjZVNlcnZlclRhZ2dlZFF1ZXJ5KHF1ZXJ5SWQpLCByZWxhdGl2ZVBhdGgsIHNuYXApO1xuICAgICAgICByZXR1cm4gc3luY1RyZWVBcHBseVRhZ2dlZE9wZXJhdGlvbl8oc3luY1RyZWUsIHF1ZXJ5UGF0aCwgb3ApO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gUXVlcnkgbXVzdCBoYXZlIGJlZW4gcmVtb3ZlZCBhbHJlYWR5XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG59XG4vKipcbiAqIEFwcGx5IHNlcnZlciBkYXRhIHRvIGJlIG1lcmdlZCBpbiBmb3IgdGhlIHNwZWNpZmllZCB0YWdnZWQgcXVlcnkuXG4gKlxuICogQHJldHVybnMgRXZlbnRzIHRvIHJhaXNlLlxuICovXG5mdW5jdGlvbiBzeW5jVHJlZUFwcGx5VGFnZ2VkUXVlcnlNZXJnZShzeW5jVHJlZSwgcGF0aCwgY2hhbmdlZENoaWxkcmVuLCB0YWcpIHtcbiAgICBjb25zdCBxdWVyeUtleSA9IHN5bmNUcmVlUXVlcnlLZXlGb3JUYWdfKHN5bmNUcmVlLCB0YWcpO1xuICAgIGlmIChxdWVyeUtleSkge1xuICAgICAgICBjb25zdCByID0gc3luY1RyZWVQYXJzZVF1ZXJ5S2V5XyhxdWVyeUtleSk7XG4gICAgICAgIGNvbnN0IHF1ZXJ5UGF0aCA9IHIucGF0aCwgcXVlcnlJZCA9IHIucXVlcnlJZDtcbiAgICAgICAgY29uc3QgcmVsYXRpdmVQYXRoID0gbmV3UmVsYXRpdmVQYXRoKHF1ZXJ5UGF0aCwgcGF0aCk7XG4gICAgICAgIGNvbnN0IGNoYW5nZVRyZWUgPSBJbW11dGFibGVUcmVlLmZyb21PYmplY3QoY2hhbmdlZENoaWxkcmVuKTtcbiAgICAgICAgY29uc3Qgb3AgPSBuZXcgTWVyZ2UobmV3T3BlcmF0aW9uU291cmNlU2VydmVyVGFnZ2VkUXVlcnkocXVlcnlJZCksIHJlbGF0aXZlUGF0aCwgY2hhbmdlVHJlZSk7XG4gICAgICAgIHJldHVybiBzeW5jVHJlZUFwcGx5VGFnZ2VkT3BlcmF0aW9uXyhzeW5jVHJlZSwgcXVlcnlQYXRoLCBvcCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBXZSd2ZSBhbHJlYWR5IHJlbW92ZWQgdGhlIHF1ZXJ5LiBObyBiaWcgZGVhbCwgaWdub3JlIHRoZSB1cGRhdGVcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbn1cbi8qKlxuICogQWRkIGFuIGV2ZW50IGNhbGxiYWNrIGZvciB0aGUgc3BlY2lmaWVkIHF1ZXJ5LlxuICpcbiAqIEByZXR1cm5zIEV2ZW50cyB0byByYWlzZS5cbiAqL1xuZnVuY3Rpb24gc3luY1RyZWVBZGRFdmVudFJlZ2lzdHJhdGlvbihzeW5jVHJlZSwgcXVlcnksIGV2ZW50UmVnaXN0cmF0aW9uLCBza2lwU2V0dXBMaXN0ZW5lciA9IGZhbHNlKSB7XG4gICAgY29uc3QgcGF0aCA9IHF1ZXJ5Ll9wYXRoO1xuICAgIGxldCBzZXJ2ZXJDYWNoZSA9IG51bGw7XG4gICAgbGV0IGZvdW5kQW5jZXN0b3JEZWZhdWx0VmlldyA9IGZhbHNlO1xuICAgIC8vIEFueSBjb3ZlcmluZyB3cml0ZXMgd2lsbCBuZWNlc3NhcmlseSBiZSBhdCB0aGUgcm9vdCwgc28gcmVhbGx5IGFsbCB3ZSBuZWVkIHRvIGZpbmQgaXMgdGhlIHNlcnZlciBjYWNoZS5cbiAgICAvLyBDb25zaWRlciBvcHRpbWl6aW5nIHRoaXMgb25jZSB0aGVyZSdzIGEgYmV0dGVyIHVuZGVyc3RhbmRpbmcgb2Ygd2hhdCBhY3R1YWwgYmVoYXZpb3Igd2lsbCBiZS5cbiAgICBzeW5jVHJlZS5zeW5jUG9pbnRUcmVlXy5mb3JlYWNoT25QYXRoKHBhdGgsIChwYXRoVG9TeW5jUG9pbnQsIHNwKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlbGF0aXZlUGF0aCA9IG5ld1JlbGF0aXZlUGF0aChwYXRoVG9TeW5jUG9pbnQsIHBhdGgpO1xuICAgICAgICBzZXJ2ZXJDYWNoZSA9XG4gICAgICAgICAgICBzZXJ2ZXJDYWNoZSB8fCBzeW5jUG9pbnRHZXRDb21wbGV0ZVNlcnZlckNhY2hlKHNwLCByZWxhdGl2ZVBhdGgpO1xuICAgICAgICBmb3VuZEFuY2VzdG9yRGVmYXVsdFZpZXcgPVxuICAgICAgICAgICAgZm91bmRBbmNlc3RvckRlZmF1bHRWaWV3IHx8IHN5bmNQb2ludEhhc0NvbXBsZXRlVmlldyhzcCk7XG4gICAgfSk7XG4gICAgbGV0IHN5bmNQb2ludCA9IHN5bmNUcmVlLnN5bmNQb2ludFRyZWVfLmdldChwYXRoKTtcbiAgICBpZiAoIXN5bmNQb2ludCkge1xuICAgICAgICBzeW5jUG9pbnQgPSBuZXcgU3luY1BvaW50KCk7XG4gICAgICAgIHN5bmNUcmVlLnN5bmNQb2ludFRyZWVfID0gc3luY1RyZWUuc3luY1BvaW50VHJlZV8uc2V0KHBhdGgsIHN5bmNQb2ludCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBmb3VuZEFuY2VzdG9yRGVmYXVsdFZpZXcgPVxuICAgICAgICAgICAgZm91bmRBbmNlc3RvckRlZmF1bHRWaWV3IHx8IHN5bmNQb2ludEhhc0NvbXBsZXRlVmlldyhzeW5jUG9pbnQpO1xuICAgICAgICBzZXJ2ZXJDYWNoZSA9XG4gICAgICAgICAgICBzZXJ2ZXJDYWNoZSB8fCBzeW5jUG9pbnRHZXRDb21wbGV0ZVNlcnZlckNhY2hlKHN5bmNQb2ludCwgbmV3RW1wdHlQYXRoKCkpO1xuICAgIH1cbiAgICBsZXQgc2VydmVyQ2FjaGVDb21wbGV0ZTtcbiAgICBpZiAoc2VydmVyQ2FjaGUgIT0gbnVsbCkge1xuICAgICAgICBzZXJ2ZXJDYWNoZUNvbXBsZXRlID0gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHNlcnZlckNhY2hlQ29tcGxldGUgPSBmYWxzZTtcbiAgICAgICAgc2VydmVyQ2FjaGUgPSBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERTtcbiAgICAgICAgY29uc3Qgc3VidHJlZSA9IHN5bmNUcmVlLnN5bmNQb2ludFRyZWVfLnN1YnRyZWUocGF0aCk7XG4gICAgICAgIHN1YnRyZWUuZm9yZWFjaENoaWxkKChjaGlsZE5hbWUsIGNoaWxkU3luY1BvaW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjb21wbGV0ZUNhY2hlID0gc3luY1BvaW50R2V0Q29tcGxldGVTZXJ2ZXJDYWNoZShjaGlsZFN5bmNQb2ludCwgbmV3RW1wdHlQYXRoKCkpO1xuICAgICAgICAgICAgaWYgKGNvbXBsZXRlQ2FjaGUpIHtcbiAgICAgICAgICAgICAgICBzZXJ2ZXJDYWNoZSA9IHNlcnZlckNhY2hlLnVwZGF0ZUltbWVkaWF0ZUNoaWxkKGNoaWxkTmFtZSwgY29tcGxldGVDYWNoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCB2aWV3QWxyZWFkeUV4aXN0cyA9IHN5bmNQb2ludFZpZXdFeGlzdHNGb3JRdWVyeShzeW5jUG9pbnQsIHF1ZXJ5KTtcbiAgICBpZiAoIXZpZXdBbHJlYWR5RXhpc3RzICYmICFxdWVyeS5fcXVlcnlQYXJhbXMubG9hZHNBbGxEYXRhKCkpIHtcbiAgICAgICAgLy8gV2UgbmVlZCB0byB0cmFjayBhIHRhZyBmb3IgdGhpcyBxdWVyeVxuICAgICAgICBjb25zdCBxdWVyeUtleSA9IHN5bmNUcmVlTWFrZVF1ZXJ5S2V5XyhxdWVyeSk7XG4gICAgICAgIGFzc2VydCghc3luY1RyZWUucXVlcnlUb1RhZ01hcC5oYXMocXVlcnlLZXkpLCAnVmlldyBkb2VzIG5vdCBleGlzdCwgYnV0IHdlIGhhdmUgYSB0YWcnKTtcbiAgICAgICAgY29uc3QgdGFnID0gc3luY1RyZWVHZXROZXh0UXVlcnlUYWdfKCk7XG4gICAgICAgIHN5bmNUcmVlLnF1ZXJ5VG9UYWdNYXAuc2V0KHF1ZXJ5S2V5LCB0YWcpO1xuICAgICAgICBzeW5jVHJlZS50YWdUb1F1ZXJ5TWFwLnNldCh0YWcsIHF1ZXJ5S2V5KTtcbiAgICB9XG4gICAgY29uc3Qgd3JpdGVzQ2FjaGUgPSB3cml0ZVRyZWVDaGlsZFdyaXRlcyhzeW5jVHJlZS5wZW5kaW5nV3JpdGVUcmVlXywgcGF0aCk7XG4gICAgbGV0IGV2ZW50cyA9IHN5bmNQb2ludEFkZEV2ZW50UmVnaXN0cmF0aW9uKHN5bmNQb2ludCwgcXVlcnksIGV2ZW50UmVnaXN0cmF0aW9uLCB3cml0ZXNDYWNoZSwgc2VydmVyQ2FjaGUsIHNlcnZlckNhY2hlQ29tcGxldGUpO1xuICAgIGlmICghdmlld0FscmVhZHlFeGlzdHMgJiYgIWZvdW5kQW5jZXN0b3JEZWZhdWx0VmlldyAmJiAhc2tpcFNldHVwTGlzdGVuZXIpIHtcbiAgICAgICAgY29uc3QgdmlldyA9IHN5bmNQb2ludFZpZXdGb3JRdWVyeShzeW5jUG9pbnQsIHF1ZXJ5KTtcbiAgICAgICAgZXZlbnRzID0gZXZlbnRzLmNvbmNhdChzeW5jVHJlZVNldHVwTGlzdGVuZXJfKHN5bmNUcmVlLCBxdWVyeSwgdmlldykpO1xuICAgIH1cbiAgICByZXR1cm4gZXZlbnRzO1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgY29tcGxldGUgY2FjaGUsIGlmIHdlIGhhdmUgb25lLCBvZiB0aGUgZGF0YSBhdCBhIHBhcnRpY3VsYXIgcGF0aC4gSWYgdGhlIGxvY2F0aW9uIGRvZXMgbm90IGhhdmUgYVxuICogbGlzdGVuZXIgYWJvdmUgaXQsIHdlIHdpbGwgZ2V0IGEgZmFsc2UgXCJudWxsXCIuIFRoaXMgc2hvdWxkbid0IGJlIGEgcHJvYmxlbSBiZWNhdXNlIHRyYW5zYWN0aW9ucyB3aWxsIGFsd2F5c1xuICogaGF2ZSBhIGxpc3RlbmVyIGFib3ZlLCBhbmQgYXRvbWljIG9wZXJhdGlvbnMgd291bGQgY29ycmVjdGx5IHNob3cgYSBqaXR0ZXIgb2YgPGluY3JlbWVudCB2YWx1ZT4gLT5cbiAqICAgICA8aW5jcmVtZW50ZWQgdG90YWw+IGFzIHRoZSB3cml0ZSBpcyBhcHBsaWVkIGxvY2FsbHkgYW5kIHRoZW4gYWNrbm93bGVkZ2VkIGF0IHRoZSBzZXJ2ZXIuXG4gKlxuICogTm90ZTogdGhpcyBtZXRob2Qgd2lsbCAqaW5jbHVkZSogaGlkZGVuIHdyaXRlcyBmcm9tIHRyYW5zYWN0aW9uIHdpdGggYXBwbHlMb2NhbGx5IHNldCB0byBmYWxzZS5cbiAqXG4gKiBAcGFyYW0gcGF0aCAtIFRoZSBwYXRoIHRvIHRoZSBkYXRhIHdlIHdhbnRcbiAqIEBwYXJhbSB3cml0ZUlkc1RvRXhjbHVkZSAtIEEgc3BlY2lmaWMgc2V0IHRvIGJlIGV4Y2x1ZGVkXG4gKi9cbmZ1bmN0aW9uIHN5bmNUcmVlQ2FsY0NvbXBsZXRlRXZlbnRDYWNoZShzeW5jVHJlZSwgcGF0aCwgd3JpdGVJZHNUb0V4Y2x1ZGUpIHtcbiAgICBjb25zdCBpbmNsdWRlSGlkZGVuU2V0cyA9IHRydWU7XG4gICAgY29uc3Qgd3JpdGVUcmVlID0gc3luY1RyZWUucGVuZGluZ1dyaXRlVHJlZV87XG4gICAgY29uc3Qgc2VydmVyQ2FjaGUgPSBzeW5jVHJlZS5zeW5jUG9pbnRUcmVlXy5maW5kT25QYXRoKHBhdGgsIChwYXRoU29GYXIsIHN5bmNQb2ludCkgPT4ge1xuICAgICAgICBjb25zdCByZWxhdGl2ZVBhdGggPSBuZXdSZWxhdGl2ZVBhdGgocGF0aFNvRmFyLCBwYXRoKTtcbiAgICAgICAgY29uc3Qgc2VydmVyQ2FjaGUgPSBzeW5jUG9pbnRHZXRDb21wbGV0ZVNlcnZlckNhY2hlKHN5bmNQb2ludCwgcmVsYXRpdmVQYXRoKTtcbiAgICAgICAgaWYgKHNlcnZlckNhY2hlKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VydmVyQ2FjaGU7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gd3JpdGVUcmVlQ2FsY0NvbXBsZXRlRXZlbnRDYWNoZSh3cml0ZVRyZWUsIHBhdGgsIHNlcnZlckNhY2hlLCB3cml0ZUlkc1RvRXhjbHVkZSwgaW5jbHVkZUhpZGRlblNldHMpO1xufVxuZnVuY3Rpb24gc3luY1RyZWVHZXRTZXJ2ZXJWYWx1ZShzeW5jVHJlZSwgcXVlcnkpIHtcbiAgICBjb25zdCBwYXRoID0gcXVlcnkuX3BhdGg7XG4gICAgbGV0IHNlcnZlckNhY2hlID0gbnVsbDtcbiAgICAvLyBBbnkgY292ZXJpbmcgd3JpdGVzIHdpbGwgbmVjZXNzYXJpbHkgYmUgYXQgdGhlIHJvb3QsIHNvIHJlYWxseSBhbGwgd2UgbmVlZCB0byBmaW5kIGlzIHRoZSBzZXJ2ZXIgY2FjaGUuXG4gICAgLy8gQ29uc2lkZXIgb3B0aW1pemluZyB0aGlzIG9uY2UgdGhlcmUncyBhIGJldHRlciB1bmRlcnN0YW5kaW5nIG9mIHdoYXQgYWN0dWFsIGJlaGF2aW9yIHdpbGwgYmUuXG4gICAgc3luY1RyZWUuc3luY1BvaW50VHJlZV8uZm9yZWFjaE9uUGF0aChwYXRoLCAocGF0aFRvU3luY1BvaW50LCBzcCkgPT4ge1xuICAgICAgICBjb25zdCByZWxhdGl2ZVBhdGggPSBuZXdSZWxhdGl2ZVBhdGgocGF0aFRvU3luY1BvaW50LCBwYXRoKTtcbiAgICAgICAgc2VydmVyQ2FjaGUgPVxuICAgICAgICAgICAgc2VydmVyQ2FjaGUgfHwgc3luY1BvaW50R2V0Q29tcGxldGVTZXJ2ZXJDYWNoZShzcCwgcmVsYXRpdmVQYXRoKTtcbiAgICB9KTtcbiAgICBsZXQgc3luY1BvaW50ID0gc3luY1RyZWUuc3luY1BvaW50VHJlZV8uZ2V0KHBhdGgpO1xuICAgIGlmICghc3luY1BvaW50KSB7XG4gICAgICAgIHN5bmNQb2ludCA9IG5ldyBTeW5jUG9pbnQoKTtcbiAgICAgICAgc3luY1RyZWUuc3luY1BvaW50VHJlZV8gPSBzeW5jVHJlZS5zeW5jUG9pbnRUcmVlXy5zZXQocGF0aCwgc3luY1BvaW50KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHNlcnZlckNhY2hlID1cbiAgICAgICAgICAgIHNlcnZlckNhY2hlIHx8IHN5bmNQb2ludEdldENvbXBsZXRlU2VydmVyQ2FjaGUoc3luY1BvaW50LCBuZXdFbXB0eVBhdGgoKSk7XG4gICAgfVxuICAgIGNvbnN0IHNlcnZlckNhY2hlQ29tcGxldGUgPSBzZXJ2ZXJDYWNoZSAhPSBudWxsO1xuICAgIGNvbnN0IHNlcnZlckNhY2hlTm9kZSA9IHNlcnZlckNhY2hlQ29tcGxldGVcbiAgICAgICAgPyBuZXcgQ2FjaGVOb2RlKHNlcnZlckNhY2hlLCB0cnVlLCBmYWxzZSlcbiAgICAgICAgOiBudWxsO1xuICAgIGNvbnN0IHdyaXRlc0NhY2hlID0gd3JpdGVUcmVlQ2hpbGRXcml0ZXMoc3luY1RyZWUucGVuZGluZ1dyaXRlVHJlZV8sIHF1ZXJ5Ll9wYXRoKTtcbiAgICBjb25zdCB2aWV3ID0gc3luY1BvaW50R2V0VmlldyhzeW5jUG9pbnQsIHF1ZXJ5LCB3cml0ZXNDYWNoZSwgc2VydmVyQ2FjaGVDb21wbGV0ZSA/IHNlcnZlckNhY2hlTm9kZS5nZXROb2RlKCkgOiBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERSwgc2VydmVyQ2FjaGVDb21wbGV0ZSk7XG4gICAgcmV0dXJuIHZpZXdHZXRDb21wbGV0ZU5vZGUodmlldyk7XG59XG4vKipcbiAqIEEgaGVscGVyIG1ldGhvZCB0aGF0IHZpc2l0cyBhbGwgZGVzY2VuZGFudCBhbmQgYW5jZXN0b3IgU3luY1BvaW50cywgYXBwbHlpbmcgdGhlIG9wZXJhdGlvbi5cbiAqXG4gKiBOT1RFUzpcbiAqIC0gRGVzY2VuZGFudCBTeW5jUG9pbnRzIHdpbGwgYmUgdmlzaXRlZCBmaXJzdCAoc2luY2Ugd2UgcmFpc2UgZXZlbnRzIGRlcHRoLWZpcnN0KS5cbiAqXG4gKiAtIFdlIGNhbGwgYXBwbHlPcGVyYXRpb24oKSBvbiBlYWNoIFN5bmNQb2ludCBwYXNzaW5nIHRocmVlIHRoaW5nczpcbiAqICAgMS4gQSB2ZXJzaW9uIG9mIHRoZSBPcGVyYXRpb24gdGhhdCBoYXMgYmVlbiBtYWRlIHJlbGF0aXZlIHRvIHRoZSBTeW5jUG9pbnQgbG9jYXRpb24uXG4gKiAgIDIuIEEgV3JpdGVUcmVlUmVmIG9mIGFueSB3cml0ZXMgd2UgaGF2ZSBjYWNoZWQgYXQgdGhlIFN5bmNQb2ludCBsb2NhdGlvbi5cbiAqICAgMy4gQSBzbmFwc2hvdCBOb2RlIHdpdGggY2FjaGVkIHNlcnZlciBkYXRhLCBpZiB3ZSBoYXZlIGl0LlxuICpcbiAqIC0gV2UgY29uY2F0ZW5hdGUgYWxsIG9mIHRoZSBldmVudHMgcmV0dXJuZWQgYnkgZWFjaCBTeW5jUG9pbnQgYW5kIHJldHVybiB0aGUgcmVzdWx0LlxuICovXG5mdW5jdGlvbiBzeW5jVHJlZUFwcGx5T3BlcmF0aW9uVG9TeW5jUG9pbnRzXyhzeW5jVHJlZSwgb3BlcmF0aW9uKSB7XG4gICAgcmV0dXJuIHN5bmNUcmVlQXBwbHlPcGVyYXRpb25IZWxwZXJfKG9wZXJhdGlvbiwgc3luY1RyZWUuc3luY1BvaW50VHJlZV8sIFxuICAgIC8qc2VydmVyQ2FjaGU9Ki8gbnVsbCwgd3JpdGVUcmVlQ2hpbGRXcml0ZXMoc3luY1RyZWUucGVuZGluZ1dyaXRlVHJlZV8sIG5ld0VtcHR5UGF0aCgpKSk7XG59XG4vKipcbiAqIFJlY3Vyc2l2ZSBoZWxwZXIgZm9yIGFwcGx5T3BlcmF0aW9uVG9TeW5jUG9pbnRzX1xuICovXG5mdW5jdGlvbiBzeW5jVHJlZUFwcGx5T3BlcmF0aW9uSGVscGVyXyhvcGVyYXRpb24sIHN5bmNQb2ludFRyZWUsIHNlcnZlckNhY2hlLCB3cml0ZXNDYWNoZSkge1xuICAgIGlmIChwYXRoSXNFbXB0eShvcGVyYXRpb24ucGF0aCkpIHtcbiAgICAgICAgcmV0dXJuIHN5bmNUcmVlQXBwbHlPcGVyYXRpb25EZXNjZW5kYW50c0hlbHBlcl8ob3BlcmF0aW9uLCBzeW5jUG9pbnRUcmVlLCBzZXJ2ZXJDYWNoZSwgd3JpdGVzQ2FjaGUpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3Qgc3luY1BvaW50ID0gc3luY1BvaW50VHJlZS5nZXQobmV3RW1wdHlQYXRoKCkpO1xuICAgICAgICAvLyBJZiB3ZSBkb24ndCBoYXZlIGNhY2hlZCBzZXJ2ZXIgZGF0YSwgc2VlIGlmIHdlIGNhbiBnZXQgaXQgZnJvbSB0aGlzIFN5bmNQb2ludC5cbiAgICAgICAgaWYgKHNlcnZlckNhY2hlID09IG51bGwgJiYgc3luY1BvaW50ICE9IG51bGwpIHtcbiAgICAgICAgICAgIHNlcnZlckNhY2hlID0gc3luY1BvaW50R2V0Q29tcGxldGVTZXJ2ZXJDYWNoZShzeW5jUG9pbnQsIG5ld0VtcHR5UGF0aCgpKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZXZlbnRzID0gW107XG4gICAgICAgIGNvbnN0IGNoaWxkTmFtZSA9IHBhdGhHZXRGcm9udChvcGVyYXRpb24ucGF0aCk7XG4gICAgICAgIGNvbnN0IGNoaWxkT3BlcmF0aW9uID0gb3BlcmF0aW9uLm9wZXJhdGlvbkZvckNoaWxkKGNoaWxkTmFtZSk7XG4gICAgICAgIGNvbnN0IGNoaWxkVHJlZSA9IHN5bmNQb2ludFRyZWUuY2hpbGRyZW4uZ2V0KGNoaWxkTmFtZSk7XG4gICAgICAgIGlmIChjaGlsZFRyZWUgJiYgY2hpbGRPcGVyYXRpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkU2VydmVyQ2FjaGUgPSBzZXJ2ZXJDYWNoZVxuICAgICAgICAgICAgICAgID8gc2VydmVyQ2FjaGUuZ2V0SW1tZWRpYXRlQ2hpbGQoY2hpbGROYW1lKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkV3JpdGVzQ2FjaGUgPSB3cml0ZVRyZWVSZWZDaGlsZCh3cml0ZXNDYWNoZSwgY2hpbGROYW1lKTtcbiAgICAgICAgICAgIGV2ZW50cyA9IGV2ZW50cy5jb25jYXQoc3luY1RyZWVBcHBseU9wZXJhdGlvbkhlbHBlcl8oY2hpbGRPcGVyYXRpb24sIGNoaWxkVHJlZSwgY2hpbGRTZXJ2ZXJDYWNoZSwgY2hpbGRXcml0ZXNDYWNoZSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzeW5jUG9pbnQpIHtcbiAgICAgICAgICAgIGV2ZW50cyA9IGV2ZW50cy5jb25jYXQoc3luY1BvaW50QXBwbHlPcGVyYXRpb24oc3luY1BvaW50LCBvcGVyYXRpb24sIHdyaXRlc0NhY2hlLCBzZXJ2ZXJDYWNoZSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBldmVudHM7XG4gICAgfVxufVxuLyoqXG4gKiBSZWN1cnNpdmUgaGVscGVyIGZvciBhcHBseU9wZXJhdGlvblRvU3luY1BvaW50c19cbiAqL1xuZnVuY3Rpb24gc3luY1RyZWVBcHBseU9wZXJhdGlvbkRlc2NlbmRhbnRzSGVscGVyXyhvcGVyYXRpb24sIHN5bmNQb2ludFRyZWUsIHNlcnZlckNhY2hlLCB3cml0ZXNDYWNoZSkge1xuICAgIGNvbnN0IHN5bmNQb2ludCA9IHN5bmNQb2ludFRyZWUuZ2V0KG5ld0VtcHR5UGF0aCgpKTtcbiAgICAvLyBJZiB3ZSBkb24ndCBoYXZlIGNhY2hlZCBzZXJ2ZXIgZGF0YSwgc2VlIGlmIHdlIGNhbiBnZXQgaXQgZnJvbSB0aGlzIFN5bmNQb2ludC5cbiAgICBpZiAoc2VydmVyQ2FjaGUgPT0gbnVsbCAmJiBzeW5jUG9pbnQgIT0gbnVsbCkge1xuICAgICAgICBzZXJ2ZXJDYWNoZSA9IHN5bmNQb2ludEdldENvbXBsZXRlU2VydmVyQ2FjaGUoc3luY1BvaW50LCBuZXdFbXB0eVBhdGgoKSk7XG4gICAgfVxuICAgIGxldCBldmVudHMgPSBbXTtcbiAgICBzeW5jUG9pbnRUcmVlLmNoaWxkcmVuLmlub3JkZXJUcmF2ZXJzYWwoKGNoaWxkTmFtZSwgY2hpbGRUcmVlKSA9PiB7XG4gICAgICAgIGNvbnN0IGNoaWxkU2VydmVyQ2FjaGUgPSBzZXJ2ZXJDYWNoZVxuICAgICAgICAgICAgPyBzZXJ2ZXJDYWNoZS5nZXRJbW1lZGlhdGVDaGlsZChjaGlsZE5hbWUpXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIGNvbnN0IGNoaWxkV3JpdGVzQ2FjaGUgPSB3cml0ZVRyZWVSZWZDaGlsZCh3cml0ZXNDYWNoZSwgY2hpbGROYW1lKTtcbiAgICAgICAgY29uc3QgY2hpbGRPcGVyYXRpb24gPSBvcGVyYXRpb24ub3BlcmF0aW9uRm9yQ2hpbGQoY2hpbGROYW1lKTtcbiAgICAgICAgaWYgKGNoaWxkT3BlcmF0aW9uKSB7XG4gICAgICAgICAgICBldmVudHMgPSBldmVudHMuY29uY2F0KHN5bmNUcmVlQXBwbHlPcGVyYXRpb25EZXNjZW5kYW50c0hlbHBlcl8oY2hpbGRPcGVyYXRpb24sIGNoaWxkVHJlZSwgY2hpbGRTZXJ2ZXJDYWNoZSwgY2hpbGRXcml0ZXNDYWNoZSkpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgaWYgKHN5bmNQb2ludCkge1xuICAgICAgICBldmVudHMgPSBldmVudHMuY29uY2F0KHN5bmNQb2ludEFwcGx5T3BlcmF0aW9uKHN5bmNQb2ludCwgb3BlcmF0aW9uLCB3cml0ZXNDYWNoZSwgc2VydmVyQ2FjaGUpKTtcbiAgICB9XG4gICAgcmV0dXJuIGV2ZW50cztcbn1cbmZ1bmN0aW9uIHN5bmNUcmVlQ3JlYXRlTGlzdGVuZXJGb3JWaWV3XyhzeW5jVHJlZSwgdmlldykge1xuICAgIGNvbnN0IHF1ZXJ5ID0gdmlldy5xdWVyeTtcbiAgICBjb25zdCB0YWcgPSBzeW5jVHJlZVRhZ0ZvclF1ZXJ5KHN5bmNUcmVlLCBxdWVyeSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaGFzaEZuOiAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjYWNoZSA9IHZpZXdHZXRTZXJ2ZXJDYWNoZSh2aWV3KSB8fCBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERTtcbiAgICAgICAgICAgIHJldHVybiBjYWNoZS5oYXNoKCk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uQ29tcGxldGU6IChzdGF0dXMpID0+IHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgPT09ICdvaycpIHtcbiAgICAgICAgICAgICAgICBpZiAodGFnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzeW5jVHJlZUFwcGx5VGFnZ2VkTGlzdGVuQ29tcGxldGUoc3luY1RyZWUsIHF1ZXJ5Ll9wYXRoLCB0YWcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN5bmNUcmVlQXBwbHlMaXN0ZW5Db21wbGV0ZShzeW5jVHJlZSwgcXVlcnkuX3BhdGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIElmIGEgbGlzdGVuIGZhaWxlZCwga2lsbCBhbGwgb2YgdGhlIGxpc3RlbmVycyBoZXJlLCBub3QganVzdCB0aGUgb25lIHRoYXQgdHJpZ2dlcmVkIHRoZSBlcnJvci5cbiAgICAgICAgICAgICAgICAvLyBOb3RlIHRoYXQgdGhpcyBtYXkgbmVlZCB0byBiZSBzY29wZWQgdG8ganVzdCB0aGlzIGxpc3RlbmVyIGlmIHdlIGNoYW5nZSBwZXJtaXNzaW9ucyBvbiBmaWx0ZXJlZCBjaGlsZHJlblxuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gZXJyb3JGb3JTZXJ2ZXJDb2RlKHN0YXR1cywgcXVlcnkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBzeW5jVHJlZVJlbW92ZUV2ZW50UmVnaXN0cmF0aW9uKHN5bmNUcmVlLCBxdWVyeSwgXG4gICAgICAgICAgICAgICAgLypldmVudFJlZ2lzdHJhdGlvbiovIG51bGwsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG59XG4vKipcbiAqIFJldHVybiB0aGUgdGFnIGFzc29jaWF0ZWQgd2l0aCB0aGUgZ2l2ZW4gcXVlcnkuXG4gKi9cbmZ1bmN0aW9uIHN5bmNUcmVlVGFnRm9yUXVlcnkoc3luY1RyZWUsIHF1ZXJ5KSB7XG4gICAgY29uc3QgcXVlcnlLZXkgPSBzeW5jVHJlZU1ha2VRdWVyeUtleV8ocXVlcnkpO1xuICAgIHJldHVybiBzeW5jVHJlZS5xdWVyeVRvVGFnTWFwLmdldChxdWVyeUtleSk7XG59XG4vKipcbiAqIEdpdmVuIGEgcXVlcnksIGNvbXB1dGVzIGEgXCJxdWVyeUtleVwiIHN1aXRhYmxlIGZvciB1c2UgaW4gb3VyIHF1ZXJ5VG9UYWdNYXBfLlxuICovXG5mdW5jdGlvbiBzeW5jVHJlZU1ha2VRdWVyeUtleV8ocXVlcnkpIHtcbiAgICByZXR1cm4gcXVlcnkuX3BhdGgudG9TdHJpbmcoKSArICckJyArIHF1ZXJ5Ll9xdWVyeUlkZW50aWZpZXI7XG59XG4vKipcbiAqIFJldHVybiB0aGUgcXVlcnkgYXNzb2NpYXRlZCB3aXRoIHRoZSBnaXZlbiB0YWcsIGlmIHdlIGhhdmUgb25lXG4gKi9cbmZ1bmN0aW9uIHN5bmNUcmVlUXVlcnlLZXlGb3JUYWdfKHN5bmNUcmVlLCB0YWcpIHtcbiAgICByZXR1cm4gc3luY1RyZWUudGFnVG9RdWVyeU1hcC5nZXQodGFnKTtcbn1cbi8qKlxuICogR2l2ZW4gYSBxdWVyeUtleSAoY3JlYXRlZCBieSBtYWtlUXVlcnlLZXkpLCBwYXJzZSBpdCBiYWNrIGludG8gYSBwYXRoIGFuZCBxdWVyeUlkLlxuICovXG5mdW5jdGlvbiBzeW5jVHJlZVBhcnNlUXVlcnlLZXlfKHF1ZXJ5S2V5KSB7XG4gICAgY29uc3Qgc3BsaXRJbmRleCA9IHF1ZXJ5S2V5LmluZGV4T2YoJyQnKTtcbiAgICBhc3NlcnQoc3BsaXRJbmRleCAhPT0gLTEgJiYgc3BsaXRJbmRleCA8IHF1ZXJ5S2V5Lmxlbmd0aCAtIDEsICdCYWQgcXVlcnlLZXkuJyk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcXVlcnlJZDogcXVlcnlLZXkuc3Vic3RyKHNwbGl0SW5kZXggKyAxKSxcbiAgICAgICAgcGF0aDogbmV3IFBhdGgocXVlcnlLZXkuc3Vic3RyKDAsIHNwbGl0SW5kZXgpKVxuICAgIH07XG59XG4vKipcbiAqIEEgaGVscGVyIG1ldGhvZCB0byBhcHBseSB0YWdnZWQgb3BlcmF0aW9uc1xuICovXG5mdW5jdGlvbiBzeW5jVHJlZUFwcGx5VGFnZ2VkT3BlcmF0aW9uXyhzeW5jVHJlZSwgcXVlcnlQYXRoLCBvcGVyYXRpb24pIHtcbiAgICBjb25zdCBzeW5jUG9pbnQgPSBzeW5jVHJlZS5zeW5jUG9pbnRUcmVlXy5nZXQocXVlcnlQYXRoKTtcbiAgICBhc3NlcnQoc3luY1BvaW50LCBcIk1pc3Npbmcgc3luYyBwb2ludCBmb3IgcXVlcnkgdGFnIHRoYXQgd2UncmUgdHJhY2tpbmdcIik7XG4gICAgY29uc3Qgd3JpdGVzQ2FjaGUgPSB3cml0ZVRyZWVDaGlsZFdyaXRlcyhzeW5jVHJlZS5wZW5kaW5nV3JpdGVUcmVlXywgcXVlcnlQYXRoKTtcbiAgICByZXR1cm4gc3luY1BvaW50QXBwbHlPcGVyYXRpb24oc3luY1BvaW50LCBvcGVyYXRpb24sIHdyaXRlc0NhY2hlLCBudWxsKTtcbn1cbi8qKlxuICogVGhpcyBjb2xsYXBzZXMgbXVsdGlwbGUgdW5maWx0ZXJlZCB2aWV3cyBpbnRvIGEgc2luZ2xlIHZpZXcsIHNpbmNlIHdlIG9ubHkgbmVlZCBhIHNpbmdsZVxuICogbGlzdGVuZXIgZm9yIHRoZW0uXG4gKi9cbmZ1bmN0aW9uIHN5bmNUcmVlQ29sbGVjdERpc3RpbmN0Vmlld3NGb3JTdWJUcmVlXyhzdWJ0cmVlKSB7XG4gICAgcmV0dXJuIHN1YnRyZWUuZm9sZCgocmVsYXRpdmVQYXRoLCBtYXliZUNoaWxkU3luY1BvaW50LCBjaGlsZE1hcCkgPT4ge1xuICAgICAgICBpZiAobWF5YmVDaGlsZFN5bmNQb2ludCAmJiBzeW5jUG9pbnRIYXNDb21wbGV0ZVZpZXcobWF5YmVDaGlsZFN5bmNQb2ludCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRlVmlldyA9IHN5bmNQb2ludEdldENvbXBsZXRlVmlldyhtYXliZUNoaWxkU3luY1BvaW50KTtcbiAgICAgICAgICAgIHJldHVybiBbY29tcGxldGVWaWV3XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIE5vIGNvbXBsZXRlIHZpZXcgaGVyZSwgZmxhdHRlbiBhbnkgZGVlcGVyIGxpc3RlbnMgaW50byBhbiBhcnJheVxuICAgICAgICAgICAgbGV0IHZpZXdzID0gW107XG4gICAgICAgICAgICBpZiAobWF5YmVDaGlsZFN5bmNQb2ludCkge1xuICAgICAgICAgICAgICAgIHZpZXdzID0gc3luY1BvaW50R2V0UXVlcnlWaWV3cyhtYXliZUNoaWxkU3luY1BvaW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVhY2goY2hpbGRNYXAsIChfa2V5LCBjaGlsZFZpZXdzKSA9PiB7XG4gICAgICAgICAgICAgICAgdmlld3MgPSB2aWV3cy5jb25jYXQoY2hpbGRWaWV3cyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB2aWV3cztcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLyoqXG4gKiBOb3JtYWxpemVzIGEgcXVlcnkgdG8gYSBxdWVyeSB3ZSBzZW5kIHRoZSBzZXJ2ZXIgZm9yIGxpc3RlbmluZ1xuICpcbiAqIEByZXR1cm5zIFRoZSBub3JtYWxpemVkIHF1ZXJ5XG4gKi9cbmZ1bmN0aW9uIHN5bmNUcmVlUXVlcnlGb3JMaXN0ZW5pbmdfKHF1ZXJ5KSB7XG4gICAgaWYgKHF1ZXJ5Ll9xdWVyeVBhcmFtcy5sb2Fkc0FsbERhdGEoKSAmJiAhcXVlcnkuX3F1ZXJ5UGFyYW1zLmlzRGVmYXVsdCgpKSB7XG4gICAgICAgIC8vIFdlIHRyZWF0IHF1ZXJpZXMgdGhhdCBsb2FkIGFsbCBkYXRhIGFzIGRlZmF1bHQgcXVlcmllc1xuICAgICAgICAvLyBDYXN0IGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHJlZigpIHRlY2huaWNhbGx5IHJldHVybnMgRmlyZWJhc2Ugd2hpY2ggaXMgYWN0dWFsbHkgZmIuYXBpLkZpcmViYXNlIHdoaWNoIGluaGVyaXRzXG4gICAgICAgIC8vIGZyb20gUXVlcnlcbiAgICAgICAgcmV0dXJuIG5ldyAoc3luY1RyZWVHZXRSZWZlcmVuY2VDb25zdHJ1Y3RvcigpKShxdWVyeS5fcmVwbywgcXVlcnkuX3BhdGgpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHF1ZXJ5O1xuICAgIH1cbn1cbmZ1bmN0aW9uIHN5bmNUcmVlUmVtb3ZlVGFnc18oc3luY1RyZWUsIHF1ZXJpZXMpIHtcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IHF1ZXJpZXMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgY29uc3QgcmVtb3ZlZFF1ZXJ5ID0gcXVlcmllc1tqXTtcbiAgICAgICAgaWYgKCFyZW1vdmVkUXVlcnkuX3F1ZXJ5UGFyYW1zLmxvYWRzQWxsRGF0YSgpKSB7XG4gICAgICAgICAgICAvLyBXZSBzaG91bGQgaGF2ZSBhIHRhZyBmb3IgdGhpc1xuICAgICAgICAgICAgY29uc3QgcmVtb3ZlZFF1ZXJ5S2V5ID0gc3luY1RyZWVNYWtlUXVlcnlLZXlfKHJlbW92ZWRRdWVyeSk7XG4gICAgICAgICAgICBjb25zdCByZW1vdmVkUXVlcnlUYWcgPSBzeW5jVHJlZS5xdWVyeVRvVGFnTWFwLmdldChyZW1vdmVkUXVlcnlLZXkpO1xuICAgICAgICAgICAgc3luY1RyZWUucXVlcnlUb1RhZ01hcC5kZWxldGUocmVtb3ZlZFF1ZXJ5S2V5KTtcbiAgICAgICAgICAgIHN5bmNUcmVlLnRhZ1RvUXVlcnlNYXAuZGVsZXRlKHJlbW92ZWRRdWVyeVRhZyk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIFN0YXRpYyBhY2Nlc3NvciBmb3IgcXVlcnkgdGFncy5cbiAqL1xuZnVuY3Rpb24gc3luY1RyZWVHZXROZXh0UXVlcnlUYWdfKCkge1xuICAgIHJldHVybiBzeW5jVHJlZU5leHRRdWVyeVRhZ18rKztcbn1cbi8qKlxuICogRm9yIGEgZ2l2ZW4gbmV3IGxpc3RlbiwgbWFuYWdlIHRoZSBkZS1kdXBsaWNhdGlvbiBvZiBvdXRzdGFuZGluZyBzdWJzY3JpcHRpb25zLlxuICpcbiAqIEByZXR1cm5zIFRoaXMgbWV0aG9kIGNhbiByZXR1cm4gZXZlbnRzIHRvIHN1cHBvcnQgc3luY2hyb25vdXMgZGF0YSBzb3VyY2VzXG4gKi9cbmZ1bmN0aW9uIHN5bmNUcmVlU2V0dXBMaXN0ZW5lcl8oc3luY1RyZWUsIHF1ZXJ5LCB2aWV3KSB7XG4gICAgY29uc3QgcGF0aCA9IHF1ZXJ5Ll9wYXRoO1xuICAgIGNvbnN0IHRhZyA9IHN5bmNUcmVlVGFnRm9yUXVlcnkoc3luY1RyZWUsIHF1ZXJ5KTtcbiAgICBjb25zdCBsaXN0ZW5lciA9IHN5bmNUcmVlQ3JlYXRlTGlzdGVuZXJGb3JWaWV3XyhzeW5jVHJlZSwgdmlldyk7XG4gICAgY29uc3QgZXZlbnRzID0gc3luY1RyZWUubGlzdGVuUHJvdmlkZXJfLnN0YXJ0TGlzdGVuaW5nKHN5bmNUcmVlUXVlcnlGb3JMaXN0ZW5pbmdfKHF1ZXJ5KSwgdGFnLCBsaXN0ZW5lci5oYXNoRm4sIGxpc3RlbmVyLm9uQ29tcGxldGUpO1xuICAgIGNvbnN0IHN1YnRyZWUgPSBzeW5jVHJlZS5zeW5jUG9pbnRUcmVlXy5zdWJ0cmVlKHBhdGgpO1xuICAgIC8vIFRoZSByb290IG9mIHRoaXMgc3VidHJlZSBoYXMgb3VyIHF1ZXJ5LiBXZSdyZSBoZXJlIGJlY2F1c2Ugd2UgZGVmaW5pdGVseSBuZWVkIHRvIHNlbmQgYSBsaXN0ZW4gZm9yIHRoYXQsIGJ1dCB3ZVxuICAgIC8vIG1heSBuZWVkIHRvIHNoYWRvdyBvdGhlciBsaXN0ZW5zIGFzIHdlbGwuXG4gICAgaWYgKHRhZykge1xuICAgICAgICBhc3NlcnQoIXN5bmNQb2ludEhhc0NvbXBsZXRlVmlldyhzdWJ0cmVlLnZhbHVlKSwgXCJJZiB3ZSdyZSBhZGRpbmcgYSBxdWVyeSwgaXQgc2hvdWxkbid0IGJlIHNoYWRvd2VkXCIpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gU2hhZG93IGV2ZXJ5dGhpbmcgYXQgb3IgYmVsb3cgdGhpcyBsb2NhdGlvbiwgdGhpcyBpcyBhIGRlZmF1bHQgbGlzdGVuZXIuXG4gICAgICAgIGNvbnN0IHF1ZXJpZXNUb1N0b3AgPSBzdWJ0cmVlLmZvbGQoKHJlbGF0aXZlUGF0aCwgbWF5YmVDaGlsZFN5bmNQb2ludCwgY2hpbGRNYXApID0+IHtcbiAgICAgICAgICAgIGlmICghcGF0aElzRW1wdHkocmVsYXRpdmVQYXRoKSAmJlxuICAgICAgICAgICAgICAgIG1heWJlQ2hpbGRTeW5jUG9pbnQgJiZcbiAgICAgICAgICAgICAgICBzeW5jUG9pbnRIYXNDb21wbGV0ZVZpZXcobWF5YmVDaGlsZFN5bmNQb2ludCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW3N5bmNQb2ludEdldENvbXBsZXRlVmlldyhtYXliZUNoaWxkU3luY1BvaW50KS5xdWVyeV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBObyBkZWZhdWx0IGxpc3RlbmVyIGhlcmUsIGZsYXR0ZW4gYW55IGRlZXBlciBxdWVyaWVzIGludG8gYW4gYXJyYXlcbiAgICAgICAgICAgICAgICBsZXQgcXVlcmllcyA9IFtdO1xuICAgICAgICAgICAgICAgIGlmIChtYXliZUNoaWxkU3luY1BvaW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJpZXMgPSBxdWVyaWVzLmNvbmNhdChzeW5jUG9pbnRHZXRRdWVyeVZpZXdzKG1heWJlQ2hpbGRTeW5jUG9pbnQpLm1hcCh2aWV3ID0+IHZpZXcucXVlcnkpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWFjaChjaGlsZE1hcCwgKF9rZXksIGNoaWxkUXVlcmllcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBxdWVyaWVzID0gcXVlcmllcy5jb25jYXQoY2hpbGRRdWVyaWVzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcXVlcmllcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcXVlcmllc1RvU3RvcC5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgY29uc3QgcXVlcnlUb1N0b3AgPSBxdWVyaWVzVG9TdG9wW2ldO1xuICAgICAgICAgICAgc3luY1RyZWUubGlzdGVuUHJvdmlkZXJfLnN0b3BMaXN0ZW5pbmcoc3luY1RyZWVRdWVyeUZvckxpc3RlbmluZ18ocXVlcnlUb1N0b3ApLCBzeW5jVHJlZVRhZ0ZvclF1ZXJ5KHN5bmNUcmVlLCBxdWVyeVRvU3RvcCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBldmVudHM7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jbGFzcyBFeGlzdGluZ1ZhbHVlUHJvdmlkZXIge1xuICAgIGNvbnN0cnVjdG9yKG5vZGVfKSB7XG4gICAgICAgIHRoaXMubm9kZV8gPSBub2RlXztcbiAgICB9XG4gICAgZ2V0SW1tZWRpYXRlQ2hpbGQoY2hpbGROYW1lKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkID0gdGhpcy5ub2RlXy5nZXRJbW1lZGlhdGVDaGlsZChjaGlsZE5hbWUpO1xuICAgICAgICByZXR1cm4gbmV3IEV4aXN0aW5nVmFsdWVQcm92aWRlcihjaGlsZCk7XG4gICAgfVxuICAgIG5vZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5vZGVfO1xuICAgIH1cbn1cbmNsYXNzIERlZmVycmVkVmFsdWVQcm92aWRlciB7XG4gICAgY29uc3RydWN0b3Ioc3luY1RyZWUsIHBhdGgpIHtcbiAgICAgICAgdGhpcy5zeW5jVHJlZV8gPSBzeW5jVHJlZTtcbiAgICAgICAgdGhpcy5wYXRoXyA9IHBhdGg7XG4gICAgfVxuICAgIGdldEltbWVkaWF0ZUNoaWxkKGNoaWxkTmFtZSkge1xuICAgICAgICBjb25zdCBjaGlsZFBhdGggPSBwYXRoQ2hpbGQodGhpcy5wYXRoXywgY2hpbGROYW1lKTtcbiAgICAgICAgcmV0dXJuIG5ldyBEZWZlcnJlZFZhbHVlUHJvdmlkZXIodGhpcy5zeW5jVHJlZV8sIGNoaWxkUGF0aCk7XG4gICAgfVxuICAgIG5vZGUoKSB7XG4gICAgICAgIHJldHVybiBzeW5jVHJlZUNhbGNDb21wbGV0ZUV2ZW50Q2FjaGUodGhpcy5zeW5jVHJlZV8sIHRoaXMucGF0aF8pO1xuICAgIH1cbn1cbi8qKlxuICogR2VuZXJhdGUgcGxhY2Vob2xkZXJzIGZvciBkZWZlcnJlZCB2YWx1ZXMuXG4gKi9cbmNvbnN0IGdlbmVyYXRlV2l0aFZhbHVlcyA9IGZ1bmN0aW9uICh2YWx1ZXMpIHtcbiAgICB2YWx1ZXMgPSB2YWx1ZXMgfHwge307XG4gICAgdmFsdWVzWyd0aW1lc3RhbXAnXSA9IHZhbHVlc1sndGltZXN0YW1wJ10gfHwgbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgcmV0dXJuIHZhbHVlcztcbn07XG4vKipcbiAqIFZhbHVlIHRvIHVzZSB3aGVuIGZpcmluZyBsb2NhbCBldmVudHMuIFdoZW4gd3JpdGluZyBzZXJ2ZXIgdmFsdWVzLCBmaXJlXG4gKiBsb2NhbCBldmVudHMgd2l0aCBhbiBhcHByb3hpbWF0ZSB2YWx1ZSwgb3RoZXJ3aXNlIHJldHVybiB2YWx1ZSBhcy1pcy5cbiAqL1xuY29uc3QgcmVzb2x2ZURlZmVycmVkTGVhZlZhbHVlID0gZnVuY3Rpb24gKHZhbHVlLCBleGlzdGluZ1ZhbCwgc2VydmVyVmFsdWVzKSB7XG4gICAgaWYgKCF2YWx1ZSB8fCB0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgYXNzZXJ0KCcuc3YnIGluIHZhbHVlLCAnVW5leHBlY3RlZCBsZWFmIG5vZGUgb3IgcHJpb3JpdHkgY29udGVudHMnKTtcbiAgICBpZiAodHlwZW9mIHZhbHVlWycuc3YnXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmVTY2FsYXJEZWZlcnJlZFZhbHVlKHZhbHVlWycuc3YnXSwgZXhpc3RpbmdWYWwsIHNlcnZlclZhbHVlcyk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiB2YWx1ZVsnLnN2J10gPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlQ29tcGxleERlZmVycmVkVmFsdWUodmFsdWVbJy5zdiddLCBleGlzdGluZ1ZhbCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBhc3NlcnQoZmFsc2UsICdVbmV4cGVjdGVkIHNlcnZlciB2YWx1ZTogJyArIEpTT04uc3RyaW5naWZ5KHZhbHVlLCBudWxsLCAyKSk7XG4gICAgfVxufTtcbmNvbnN0IHJlc29sdmVTY2FsYXJEZWZlcnJlZFZhbHVlID0gZnVuY3Rpb24gKG9wLCBleGlzdGluZywgc2VydmVyVmFsdWVzKSB7XG4gICAgc3dpdGNoIChvcCkge1xuICAgICAgICBjYXNlICd0aW1lc3RhbXAnOlxuICAgICAgICAgICAgcmV0dXJuIHNlcnZlclZhbHVlc1sndGltZXN0YW1wJ107XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBhc3NlcnQoZmFsc2UsICdVbmV4cGVjdGVkIHNlcnZlciB2YWx1ZTogJyArIG9wKTtcbiAgICB9XG59O1xuY29uc3QgcmVzb2x2ZUNvbXBsZXhEZWZlcnJlZFZhbHVlID0gZnVuY3Rpb24gKG9wLCBleGlzdGluZywgdW51c2VkKSB7XG4gICAgaWYgKCFvcC5oYXNPd25Qcm9wZXJ0eSgnaW5jcmVtZW50JykpIHtcbiAgICAgICAgYXNzZXJ0KGZhbHNlLCAnVW5leHBlY3RlZCBzZXJ2ZXIgdmFsdWU6ICcgKyBKU09OLnN0cmluZ2lmeShvcCwgbnVsbCwgMikpO1xuICAgIH1cbiAgICBjb25zdCBkZWx0YSA9IG9wWydpbmNyZW1lbnQnXTtcbiAgICBpZiAodHlwZW9mIGRlbHRhICE9PSAnbnVtYmVyJykge1xuICAgICAgICBhc3NlcnQoZmFsc2UsICdVbmV4cGVjdGVkIGluY3JlbWVudCB2YWx1ZTogJyArIGRlbHRhKTtcbiAgICB9XG4gICAgY29uc3QgZXhpc3RpbmdOb2RlID0gZXhpc3Rpbmcubm9kZSgpO1xuICAgIGFzc2VydChleGlzdGluZ05vZGUgIT09IG51bGwgJiYgdHlwZW9mIGV4aXN0aW5nTm9kZSAhPT0gJ3VuZGVmaW5lZCcsICdFeHBlY3RlZCBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERSBmb3IgbnVsbHMnKTtcbiAgICAvLyBJbmNyZW1lbnRpbmcgYSBub24tbnVtYmVyIHNldHMgdGhlIHZhbHVlIHRvIHRoZSBpbmNyZW1lbnRlZCBhbW91bnRcbiAgICBpZiAoIWV4aXN0aW5nTm9kZS5pc0xlYWZOb2RlKCkpIHtcbiAgICAgICAgcmV0dXJuIGRlbHRhO1xuICAgIH1cbiAgICBjb25zdCBsZWFmID0gZXhpc3RpbmdOb2RlO1xuICAgIGNvbnN0IGV4aXN0aW5nVmFsID0gbGVhZi5nZXRWYWx1ZSgpO1xuICAgIGlmICh0eXBlb2YgZXhpc3RpbmdWYWwgIT09ICdudW1iZXInKSB7XG4gICAgICAgIHJldHVybiBkZWx0YTtcbiAgICB9XG4gICAgLy8gTm8gbmVlZCB0byBkbyBvdmVyL3VuZGVyZmxvdyBhcml0aG1ldGljIGhlcmUgYmVjYXVzZSBKUyBvbmx5IGhhbmRsZXMgZmxvYXRzIHVuZGVyIHRoZSBjb3ZlcnNcbiAgICByZXR1cm4gZXhpc3RpbmdWYWwgKyBkZWx0YTtcbn07XG4vKipcbiAqIFJlY3Vyc2l2ZWx5IHJlcGxhY2UgYWxsIGRlZmVycmVkIHZhbHVlcyBhbmQgcHJpb3JpdGllcyBpbiB0aGUgdHJlZSB3aXRoIHRoZVxuICogc3BlY2lmaWVkIGdlbmVyYXRlZCByZXBsYWNlbWVudCB2YWx1ZXMuXG4gKiBAcGFyYW0gcGF0aCAtIHBhdGggdG8gd2hpY2ggd3JpdGUgaXMgcmVsYXRpdmVcbiAqIEBwYXJhbSBub2RlIC0gbmV3IGRhdGEgd3JpdHRlbiBhdCBwYXRoXG4gKiBAcGFyYW0gc3luY1RyZWUgLSBjdXJyZW50IGRhdGFcbiAqL1xuY29uc3QgcmVzb2x2ZURlZmVycmVkVmFsdWVUcmVlID0gZnVuY3Rpb24gKHBhdGgsIG5vZGUsIHN5bmNUcmVlLCBzZXJ2ZXJWYWx1ZXMpIHtcbiAgICByZXR1cm4gcmVzb2x2ZURlZmVycmVkVmFsdWUobm9kZSwgbmV3IERlZmVycmVkVmFsdWVQcm92aWRlcihzeW5jVHJlZSwgcGF0aCksIHNlcnZlclZhbHVlcyk7XG59O1xuLyoqXG4gKiBSZWN1cnNpdmVseSByZXBsYWNlIGFsbCBkZWZlcnJlZCB2YWx1ZXMgYW5kIHByaW9yaXRpZXMgaW4gdGhlIG5vZGUgd2l0aCB0aGVcbiAqIHNwZWNpZmllZCBnZW5lcmF0ZWQgcmVwbGFjZW1lbnQgdmFsdWVzLiAgSWYgdGhlcmUgYXJlIG5vIHNlcnZlciB2YWx1ZXMgaW4gdGhlIG5vZGUsXG4gKiBpdCdsbCBiZSByZXR1cm5lZCBhcy1pcy5cbiAqL1xuY29uc3QgcmVzb2x2ZURlZmVycmVkVmFsdWVTbmFwc2hvdCA9IGZ1bmN0aW9uIChub2RlLCBleGlzdGluZywgc2VydmVyVmFsdWVzKSB7XG4gICAgcmV0dXJuIHJlc29sdmVEZWZlcnJlZFZhbHVlKG5vZGUsIG5ldyBFeGlzdGluZ1ZhbHVlUHJvdmlkZXIoZXhpc3RpbmcpLCBzZXJ2ZXJWYWx1ZXMpO1xufTtcbmZ1bmN0aW9uIHJlc29sdmVEZWZlcnJlZFZhbHVlKG5vZGUsIGV4aXN0aW5nVmFsLCBzZXJ2ZXJWYWx1ZXMpIHtcbiAgICBjb25zdCByYXdQcmkgPSBub2RlLmdldFByaW9yaXR5KCkudmFsKCk7XG4gICAgY29uc3QgcHJpb3JpdHkgPSByZXNvbHZlRGVmZXJyZWRMZWFmVmFsdWUocmF3UHJpLCBleGlzdGluZ1ZhbC5nZXRJbW1lZGlhdGVDaGlsZCgnLnByaW9yaXR5JyksIHNlcnZlclZhbHVlcyk7XG4gICAgbGV0IG5ld05vZGU7XG4gICAgaWYgKG5vZGUuaXNMZWFmTm9kZSgpKSB7XG4gICAgICAgIGNvbnN0IGxlYWZOb2RlID0gbm9kZTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSByZXNvbHZlRGVmZXJyZWRMZWFmVmFsdWUobGVhZk5vZGUuZ2V0VmFsdWUoKSwgZXhpc3RpbmdWYWwsIHNlcnZlclZhbHVlcyk7XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gbGVhZk5vZGUuZ2V0VmFsdWUoKSB8fFxuICAgICAgICAgICAgcHJpb3JpdHkgIT09IGxlYWZOb2RlLmdldFByaW9yaXR5KCkudmFsKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTGVhZk5vZGUodmFsdWUsIG5vZGVGcm9tSlNPTihwcmlvcml0eSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IGNoaWxkcmVuTm9kZSA9IG5vZGU7XG4gICAgICAgIG5ld05vZGUgPSBjaGlsZHJlbk5vZGU7XG4gICAgICAgIGlmIChwcmlvcml0eSAhPT0gY2hpbGRyZW5Ob2RlLmdldFByaW9yaXR5KCkudmFsKCkpIHtcbiAgICAgICAgICAgIG5ld05vZGUgPSBuZXdOb2RlLnVwZGF0ZVByaW9yaXR5KG5ldyBMZWFmTm9kZShwcmlvcml0eSkpO1xuICAgICAgICB9XG4gICAgICAgIGNoaWxkcmVuTm9kZS5mb3JFYWNoQ2hpbGQoUFJJT1JJVFlfSU5ERVgsIChjaGlsZE5hbWUsIGNoaWxkTm9kZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmV3Q2hpbGROb2RlID0gcmVzb2x2ZURlZmVycmVkVmFsdWUoY2hpbGROb2RlLCBleGlzdGluZ1ZhbC5nZXRJbW1lZGlhdGVDaGlsZChjaGlsZE5hbWUpLCBzZXJ2ZXJWYWx1ZXMpO1xuICAgICAgICAgICAgaWYgKG5ld0NoaWxkTm9kZSAhPT0gY2hpbGROb2RlKSB7XG4gICAgICAgICAgICAgICAgbmV3Tm9kZSA9IG5ld05vZGUudXBkYXRlSW1tZWRpYXRlQ2hpbGQoY2hpbGROYW1lLCBuZXdDaGlsZE5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG5ld05vZGU7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGxpZ2h0LXdlaWdodCB0cmVlLCB0cmF2ZXJzYWJsZSBieSBwYXRoLiAgTm9kZXMgY2FuIGhhdmUgYm90aCB2YWx1ZXMgYW5kIGNoaWxkcmVuLlxuICogTm9kZXMgYXJlIG5vdCBlbnVtZXJhdGVkIChieSBmb3JFYWNoQ2hpbGQpIHVubGVzcyB0aGV5IGhhdmUgYSB2YWx1ZSBvciBub24tZW1wdHlcbiAqIGNoaWxkcmVuLlxuICovXG5jbGFzcyBUcmVlIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gbmFtZSAtIE9wdGlvbmFsIG5hbWUgb2YgdGhlIG5vZGUuXG4gICAgICogQHBhcmFtIHBhcmVudCAtIE9wdGlvbmFsIHBhcmVudCBub2RlLlxuICAgICAqIEBwYXJhbSBub2RlIC0gT3B0aW9uYWwgbm9kZSB0byB3cmFwLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG5hbWUgPSAnJywgcGFyZW50ID0gbnVsbCwgbm9kZSA9IHsgY2hpbGRyZW46IHt9LCBjaGlsZENvdW50OiAwIH0pIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIHRoaXMubm9kZSA9IG5vZGU7XG4gICAgfVxufVxuLyoqXG4gKiBSZXR1cm5zIGEgc3ViLVRyZWUgZm9yIHRoZSBnaXZlbiBwYXRoLlxuICpcbiAqIEBwYXJhbSBwYXRoT2JqIC0gUGF0aCB0byBsb29rIHVwLlxuICogQHJldHVybnMgVHJlZSBmb3IgcGF0aC5cbiAqL1xuZnVuY3Rpb24gdHJlZVN1YlRyZWUodHJlZSwgcGF0aE9iaikge1xuICAgIC8vIFRPRE86IFJlcXVpcmUgcGF0aE9iaiB0byBiZSBQYXRoP1xuICAgIGxldCBwYXRoID0gcGF0aE9iaiBpbnN0YW5jZW9mIFBhdGggPyBwYXRoT2JqIDogbmV3IFBhdGgocGF0aE9iaik7XG4gICAgbGV0IGNoaWxkID0gdHJlZSwgbmV4dCA9IHBhdGhHZXRGcm9udChwYXRoKTtcbiAgICB3aGlsZSAobmV4dCAhPT0gbnVsbCkge1xuICAgICAgICBjb25zdCBjaGlsZE5vZGUgPSBzYWZlR2V0KGNoaWxkLm5vZGUuY2hpbGRyZW4sIG5leHQpIHx8IHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiB7fSxcbiAgICAgICAgICAgIGNoaWxkQ291bnQ6IDBcbiAgICAgICAgfTtcbiAgICAgICAgY2hpbGQgPSBuZXcgVHJlZShuZXh0LCBjaGlsZCwgY2hpbGROb2RlKTtcbiAgICAgICAgcGF0aCA9IHBhdGhQb3BGcm9udChwYXRoKTtcbiAgICAgICAgbmV4dCA9IHBhdGhHZXRGcm9udChwYXRoKTtcbiAgICB9XG4gICAgcmV0dXJuIGNoaWxkO1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBkYXRhIGFzc29jaWF0ZWQgd2l0aCB0aGlzIHRyZWUgbm9kZS5cbiAqXG4gKiBAcmV0dXJucyBUaGUgZGF0YSBvciBudWxsIGlmIG5vIGRhdGEgZXhpc3RzLlxuICovXG5mdW5jdGlvbiB0cmVlR2V0VmFsdWUodHJlZSkge1xuICAgIHJldHVybiB0cmVlLm5vZGUudmFsdWU7XG59XG4vKipcbiAqIFNldHMgZGF0YSB0byB0aGlzIHRyZWUgbm9kZS5cbiAqXG4gKiBAcGFyYW0gdmFsdWUgLSBWYWx1ZSB0byBzZXQuXG4gKi9cbmZ1bmN0aW9uIHRyZWVTZXRWYWx1ZSh0cmVlLCB2YWx1ZSkge1xuICAgIHRyZWUubm9kZS52YWx1ZSA9IHZhbHVlO1xuICAgIHRyZWVVcGRhdGVQYXJlbnRzKHRyZWUpO1xufVxuLyoqXG4gKiBAcmV0dXJucyBXaGV0aGVyIHRoZSB0cmVlIGhhcyBhbnkgY2hpbGRyZW4uXG4gKi9cbmZ1bmN0aW9uIHRyZWVIYXNDaGlsZHJlbih0cmVlKSB7XG4gICAgcmV0dXJuIHRyZWUubm9kZS5jaGlsZENvdW50ID4gMDtcbn1cbi8qKlxuICogQHJldHVybnMgV2hldGhlciB0aGUgdHJlZSBpcyBlbXB0eSAobm8gdmFsdWUgb3IgY2hpbGRyZW4pLlxuICovXG5mdW5jdGlvbiB0cmVlSXNFbXB0eSh0cmVlKSB7XG4gICAgcmV0dXJuIHRyZWVHZXRWYWx1ZSh0cmVlKSA9PT0gdW5kZWZpbmVkICYmICF0cmVlSGFzQ2hpbGRyZW4odHJlZSk7XG59XG4vKipcbiAqIENhbGxzIGFjdGlvbiBmb3IgZWFjaCBjaGlsZCBvZiB0aGlzIHRyZWUgbm9kZS5cbiAqXG4gKiBAcGFyYW0gYWN0aW9uIC0gQWN0aW9uIHRvIGJlIGNhbGxlZCBmb3IgZWFjaCBjaGlsZC5cbiAqL1xuZnVuY3Rpb24gdHJlZUZvckVhY2hDaGlsZCh0cmVlLCBhY3Rpb24pIHtcbiAgICBlYWNoKHRyZWUubm9kZS5jaGlsZHJlbiwgKGNoaWxkLCBjaGlsZFRyZWUpID0+IHtcbiAgICAgICAgYWN0aW9uKG5ldyBUcmVlKGNoaWxkLCB0cmVlLCBjaGlsZFRyZWUpKTtcbiAgICB9KTtcbn1cbi8qKlxuICogRG9lcyBhIGRlcHRoLWZpcnN0IHRyYXZlcnNhbCBvZiB0aGlzIG5vZGUncyBkZXNjZW5kYW50cywgY2FsbGluZyBhY3Rpb24gZm9yIGVhY2ggb25lLlxuICpcbiAqIEBwYXJhbSBhY3Rpb24gLSBBY3Rpb24gdG8gYmUgY2FsbGVkIGZvciBlYWNoIGNoaWxkLlxuICogQHBhcmFtIGluY2x1ZGVTZWxmIC0gV2hldGhlciB0byBjYWxsIGFjdGlvbiBvbiB0aGlzIG5vZGUgYXMgd2VsbC4gRGVmYXVsdHMgdG9cbiAqICAgZmFsc2UuXG4gKiBAcGFyYW0gY2hpbGRyZW5GaXJzdCAtIFdoZXRoZXIgdG8gY2FsbCBhY3Rpb24gb24gY2hpbGRyZW4gYmVmb3JlIGNhbGxpbmcgaXQgb25cbiAqICAgcGFyZW50LlxuICovXG5mdW5jdGlvbiB0cmVlRm9yRWFjaERlc2NlbmRhbnQodHJlZSwgYWN0aW9uLCBpbmNsdWRlU2VsZiwgY2hpbGRyZW5GaXJzdCkge1xuICAgIGlmIChpbmNsdWRlU2VsZiAmJiAhY2hpbGRyZW5GaXJzdCkge1xuICAgICAgICBhY3Rpb24odHJlZSk7XG4gICAgfVxuICAgIHRyZWVGb3JFYWNoQ2hpbGQodHJlZSwgY2hpbGQgPT4ge1xuICAgICAgICB0cmVlRm9yRWFjaERlc2NlbmRhbnQoY2hpbGQsIGFjdGlvbiwgdHJ1ZSwgY2hpbGRyZW5GaXJzdCk7XG4gICAgfSk7XG4gICAgaWYgKGluY2x1ZGVTZWxmICYmIGNoaWxkcmVuRmlyc3QpIHtcbiAgICAgICAgYWN0aW9uKHRyZWUpO1xuICAgIH1cbn1cbi8qKlxuICogQ2FsbHMgYWN0aW9uIG9uIGVhY2ggYW5jZXN0b3Igbm9kZS5cbiAqXG4gKiBAcGFyYW0gYWN0aW9uIC0gQWN0aW9uIHRvIGJlIGNhbGxlZCBvbiBlYWNoIHBhcmVudDsgcmV0dXJuXG4gKiAgIHRydWUgdG8gYWJvcnQuXG4gKiBAcGFyYW0gaW5jbHVkZVNlbGYgLSBXaGV0aGVyIHRvIGNhbGwgYWN0aW9uIG9uIHRoaXMgbm9kZSBhcyB3ZWxsLlxuICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgYWN0aW9uIGNhbGxiYWNrIHJldHVybmVkIHRydWUuXG4gKi9cbmZ1bmN0aW9uIHRyZWVGb3JFYWNoQW5jZXN0b3IodHJlZSwgYWN0aW9uLCBpbmNsdWRlU2VsZikge1xuICAgIGxldCBub2RlID0gaW5jbHVkZVNlbGYgPyB0cmVlIDogdHJlZS5wYXJlbnQ7XG4gICAgd2hpbGUgKG5vZGUgIT09IG51bGwpIHtcbiAgICAgICAgaWYgKGFjdGlvbihub2RlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgbm9kZSA9IG5vZGUucGFyZW50O1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG4vKipcbiAqIEByZXR1cm5zIFRoZSBwYXRoIG9mIHRoaXMgdHJlZSBub2RlLCBhcyBhIFBhdGguXG4gKi9cbmZ1bmN0aW9uIHRyZWVHZXRQYXRoKHRyZWUpIHtcbiAgICByZXR1cm4gbmV3IFBhdGgodHJlZS5wYXJlbnQgPT09IG51bGxcbiAgICAgICAgPyB0cmVlLm5hbWVcbiAgICAgICAgOiB0cmVlR2V0UGF0aCh0cmVlLnBhcmVudCkgKyAnLycgKyB0cmVlLm5hbWUpO1xufVxuLyoqXG4gKiBBZGRzIG9yIHJlbW92ZXMgdGhpcyBjaGlsZCBmcm9tIGl0cyBwYXJlbnQgYmFzZWQgb24gd2hldGhlciBpdCdzIGVtcHR5IG9yIG5vdC5cbiAqL1xuZnVuY3Rpb24gdHJlZVVwZGF0ZVBhcmVudHModHJlZSkge1xuICAgIGlmICh0cmVlLnBhcmVudCAhPT0gbnVsbCkge1xuICAgICAgICB0cmVlVXBkYXRlQ2hpbGQodHJlZS5wYXJlbnQsIHRyZWUubmFtZSwgdHJlZSk7XG4gICAgfVxufVxuLyoqXG4gKiBBZGRzIG9yIHJlbW92ZXMgdGhlIHBhc3NlZCBjaGlsZCB0byB0aGlzIHRyZWUgbm9kZSwgZGVwZW5kaW5nIG9uIHdoZXRoZXIgaXQncyBlbXB0eS5cbiAqXG4gKiBAcGFyYW0gY2hpbGROYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGNoaWxkIHRvIHVwZGF0ZS5cbiAqIEBwYXJhbSBjaGlsZCAtIFRoZSBjaGlsZCB0byB1cGRhdGUuXG4gKi9cbmZ1bmN0aW9uIHRyZWVVcGRhdGVDaGlsZCh0cmVlLCBjaGlsZE5hbWUsIGNoaWxkKSB7XG4gICAgY29uc3QgY2hpbGRFbXB0eSA9IHRyZWVJc0VtcHR5KGNoaWxkKTtcbiAgICBjb25zdCBjaGlsZEV4aXN0cyA9IGNvbnRhaW5zKHRyZWUubm9kZS5jaGlsZHJlbiwgY2hpbGROYW1lKTtcbiAgICBpZiAoY2hpbGRFbXB0eSAmJiBjaGlsZEV4aXN0cykge1xuICAgICAgICBkZWxldGUgdHJlZS5ub2RlLmNoaWxkcmVuW2NoaWxkTmFtZV07XG4gICAgICAgIHRyZWUubm9kZS5jaGlsZENvdW50LS07XG4gICAgICAgIHRyZWVVcGRhdGVQYXJlbnRzKHRyZWUpO1xuICAgIH1cbiAgICBlbHNlIGlmICghY2hpbGRFbXB0eSAmJiAhY2hpbGRFeGlzdHMpIHtcbiAgICAgICAgdHJlZS5ub2RlLmNoaWxkcmVuW2NoaWxkTmFtZV0gPSBjaGlsZC5ub2RlO1xuICAgICAgICB0cmVlLm5vZGUuY2hpbGRDb3VudCsrO1xuICAgICAgICB0cmVlVXBkYXRlUGFyZW50cyh0cmVlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRydWUgZm9yIGludmFsaWQgRmlyZWJhc2Uga2V5c1xuICovXG5jb25zdCBJTlZBTElEX0tFWV9SRUdFWF8gPSAvW1xcW1xcXS4jJFxcL1xcdTAwMDAtXFx1MDAxRlxcdTAwN0ZdLztcbi8qKlxuICogVHJ1ZSBmb3IgaW52YWxpZCBGaXJlYmFzZSBwYXRocy5cbiAqIEFsbG93cyAnLycgaW4gcGF0aHMuXG4gKi9cbmNvbnN0IElOVkFMSURfUEFUSF9SRUdFWF8gPSAvW1xcW1xcXS4jJFxcdTAwMDAtXFx1MDAxRlxcdTAwN0ZdLztcbi8qKlxuICogTWF4aW11bSBudW1iZXIgb2YgY2hhcmFjdGVycyB0byBhbGxvdyBpbiBsZWFmIHZhbHVlXG4gKi9cbmNvbnN0IE1BWF9MRUFGX1NJWkVfID0gMTAgKiAxMDI0ICogMTAyNDtcbmNvbnN0IGlzVmFsaWRLZXkgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuICh0eXBlb2Yga2V5ID09PSAnc3RyaW5nJyAmJiBrZXkubGVuZ3RoICE9PSAwICYmICFJTlZBTElEX0tFWV9SRUdFWF8udGVzdChrZXkpKTtcbn07XG5jb25zdCBpc1ZhbGlkUGF0aFN0cmluZyA9IGZ1bmN0aW9uIChwYXRoU3RyaW5nKSB7XG4gICAgcmV0dXJuICh0eXBlb2YgcGF0aFN0cmluZyA9PT0gJ3N0cmluZycgJiZcbiAgICAgICAgcGF0aFN0cmluZy5sZW5ndGggIT09IDAgJiZcbiAgICAgICAgIUlOVkFMSURfUEFUSF9SRUdFWF8udGVzdChwYXRoU3RyaW5nKSk7XG59O1xuY29uc3QgaXNWYWxpZFJvb3RQYXRoU3RyaW5nID0gZnVuY3Rpb24gKHBhdGhTdHJpbmcpIHtcbiAgICBpZiAocGF0aFN0cmluZykge1xuICAgICAgICAvLyBBbGxvdyAnLy5pbmZvLycgYXQgdGhlIGJlZ2lubmluZy5cbiAgICAgICAgcGF0aFN0cmluZyA9IHBhdGhTdHJpbmcucmVwbGFjZSgvXlxcLypcXC5pbmZvKFxcL3wkKS8sICcvJyk7XG4gICAgfVxuICAgIHJldHVybiBpc1ZhbGlkUGF0aFN0cmluZyhwYXRoU3RyaW5nKTtcbn07XG5jb25zdCBpc1ZhbGlkUHJpb3JpdHkgPSBmdW5jdGlvbiAocHJpb3JpdHkpIHtcbiAgICByZXR1cm4gKHByaW9yaXR5ID09PSBudWxsIHx8XG4gICAgICAgIHR5cGVvZiBwcmlvcml0eSA9PT0gJ3N0cmluZycgfHxcbiAgICAgICAgKHR5cGVvZiBwcmlvcml0eSA9PT0gJ251bWJlcicgJiYgIWlzSW52YWxpZEpTT05OdW1iZXIocHJpb3JpdHkpKSB8fFxuICAgICAgICAocHJpb3JpdHkgJiZcbiAgICAgICAgICAgIHR5cGVvZiBwcmlvcml0eSA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICBjb250YWlucyhwcmlvcml0eSwgJy5zdicpKSk7XG59O1xuLyoqXG4gKiBQcmUtdmFsaWRhdGUgYSBkYXR1bSBwYXNzZWQgYXMgYW4gYXJndW1lbnQgdG8gRmlyZWJhc2UgZnVuY3Rpb24uXG4gKi9cbmNvbnN0IHZhbGlkYXRlRmlyZWJhc2VEYXRhQXJnID0gZnVuY3Rpb24gKGZuTmFtZSwgdmFsdWUsIHBhdGgsIG9wdGlvbmFsKSB7XG4gICAgaWYgKG9wdGlvbmFsICYmIHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YWxpZGF0ZUZpcmViYXNlRGF0YShlcnJvclByZWZpeChmbk5hbWUsICd2YWx1ZScpLCB2YWx1ZSwgcGF0aCk7XG59O1xuLyoqXG4gKiBWYWxpZGF0ZSBhIGRhdGEgb2JqZWN0IGNsaWVudC1zaWRlIGJlZm9yZSBzZW5kaW5nIHRvIHNlcnZlci5cbiAqL1xuY29uc3QgdmFsaWRhdGVGaXJlYmFzZURhdGEgPSBmdW5jdGlvbiAoZXJyb3JQcmVmaXgsIGRhdGEsIHBhdGhfKSB7XG4gICAgY29uc3QgcGF0aCA9IHBhdGhfIGluc3RhbmNlb2YgUGF0aCA/IG5ldyBWYWxpZGF0aW9uUGF0aChwYXRoXywgZXJyb3JQcmVmaXgpIDogcGF0aF87XG4gICAgaWYgKGRhdGEgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXggKyAnY29udGFpbnMgdW5kZWZpbmVkICcgKyB2YWxpZGF0aW9uUGF0aFRvRXJyb3JTdHJpbmcocGF0aCkpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yUHJlZml4ICtcbiAgICAgICAgICAgICdjb250YWlucyBhIGZ1bmN0aW9uICcgK1xuICAgICAgICAgICAgdmFsaWRhdGlvblBhdGhUb0Vycm9yU3RyaW5nKHBhdGgpICtcbiAgICAgICAgICAgICcgd2l0aCBjb250ZW50cyA9ICcgK1xuICAgICAgICAgICAgZGF0YS50b1N0cmluZygpKTtcbiAgICB9XG4gICAgaWYgKGlzSW52YWxpZEpTT05OdW1iZXIoZGF0YSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yUHJlZml4ICtcbiAgICAgICAgICAgICdjb250YWlucyAnICtcbiAgICAgICAgICAgIGRhdGEudG9TdHJpbmcoKSArXG4gICAgICAgICAgICAnICcgK1xuICAgICAgICAgICAgdmFsaWRhdGlvblBhdGhUb0Vycm9yU3RyaW5nKHBhdGgpKTtcbiAgICB9XG4gICAgLy8gQ2hlY2sgbWF4IGxlYWYgc2l6ZSwgYnV0IHRyeSB0byBhdm9pZCB0aGUgdXRmOCBjb252ZXJzaW9uIGlmIHdlIGNhbi5cbiAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnICYmXG4gICAgICAgIGRhdGEubGVuZ3RoID4gTUFYX0xFQUZfU0laRV8gLyAzICYmXG4gICAgICAgIHN0cmluZ0xlbmd0aChkYXRhKSA+IE1BWF9MRUFGX1NJWkVfKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeCArXG4gICAgICAgICAgICAnY29udGFpbnMgYSBzdHJpbmcgZ3JlYXRlciB0aGFuICcgK1xuICAgICAgICAgICAgTUFYX0xFQUZfU0laRV8gK1xuICAgICAgICAgICAgJyB1dGY4IGJ5dGVzICcgK1xuICAgICAgICAgICAgdmFsaWRhdGlvblBhdGhUb0Vycm9yU3RyaW5nKHBhdGgpICtcbiAgICAgICAgICAgIFwiICgnXCIgK1xuICAgICAgICAgICAgZGF0YS5zdWJzdHJpbmcoMCwgNTApICtcbiAgICAgICAgICAgIFwiLi4uJylcIik7XG4gICAgfVxuICAgIC8vIFRPRE8gPSBQZXJmID0gQ29uc2lkZXIgY29tYmluaW5nIHRoZSByZWN1cnNpdmUgdmFsaWRhdGlvbiBvZiBrZXlzIGludG8gTm9kZUZyb21KU09OXG4gICAgLy8gdG8gc2F2ZSBleHRyYSB3YWxraW5nIG9mIGxhcmdlIG9iamVjdHMuXG4gICAgaWYgKGRhdGEgJiYgdHlwZW9mIGRhdGEgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGxldCBoYXNEb3RWYWx1ZSA9IGZhbHNlO1xuICAgICAgICBsZXQgaGFzQWN0dWFsQ2hpbGQgPSBmYWxzZTtcbiAgICAgICAgZWFjaChkYXRhLCAoa2V5LCB2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGtleSA9PT0gJy52YWx1ZScpIHtcbiAgICAgICAgICAgICAgICBoYXNEb3RWYWx1ZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChrZXkgIT09ICcucHJpb3JpdHknICYmIGtleSAhPT0gJy5zdicpIHtcbiAgICAgICAgICAgICAgICBoYXNBY3R1YWxDaGlsZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1ZhbGlkS2V5KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yUHJlZml4ICtcbiAgICAgICAgICAgICAgICAgICAgICAgICcgY29udGFpbnMgYW4gaW52YWxpZCBrZXkgKCcgK1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5ICtcbiAgICAgICAgICAgICAgICAgICAgICAgICcpICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvblBhdGhUb0Vycm9yU3RyaW5nKHBhdGgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICcuICBLZXlzIG11c3QgYmUgbm9uLWVtcHR5IHN0cmluZ3MgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnYW5kIGNhblxcJ3QgY29udGFpbiBcIi5cIiwgXCIjXCIsIFwiJFwiLCBcIi9cIiwgXCJbXCIsIG9yIFwiXVwiJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFsaWRhdGlvblBhdGhQdXNoKHBhdGgsIGtleSk7XG4gICAgICAgICAgICB2YWxpZGF0ZUZpcmViYXNlRGF0YShlcnJvclByZWZpeCwgdmFsdWUsIHBhdGgpO1xuICAgICAgICAgICAgdmFsaWRhdGlvblBhdGhQb3AocGF0aCk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoaGFzRG90VmFsdWUgJiYgaGFzQWN0dWFsQ2hpbGQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeCArXG4gICAgICAgICAgICAgICAgJyBjb250YWlucyBcIi52YWx1ZVwiIGNoaWxkICcgK1xuICAgICAgICAgICAgICAgIHZhbGlkYXRpb25QYXRoVG9FcnJvclN0cmluZyhwYXRoKSArXG4gICAgICAgICAgICAgICAgJyBpbiBhZGRpdGlvbiB0byBhY3R1YWwgY2hpbGRyZW4uJyk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuLyoqXG4gKiBQcmUtdmFsaWRhdGUgcGF0aHMgcGFzc2VkIGluIHRoZSBmaXJlYmFzZSBmdW5jdGlvbi5cbiAqL1xuY29uc3QgdmFsaWRhdGVGaXJlYmFzZU1lcmdlUGF0aHMgPSBmdW5jdGlvbiAoZXJyb3JQcmVmaXgsIG1lcmdlUGF0aHMpIHtcbiAgICBsZXQgaSwgY3VyUGF0aDtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbWVyZ2VQYXRocy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjdXJQYXRoID0gbWVyZ2VQYXRoc1tpXTtcbiAgICAgICAgY29uc3Qga2V5cyA9IHBhdGhTbGljZShjdXJQYXRoKTtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBrZXlzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBpZiAoa2V5c1tqXSA9PT0gJy5wcmlvcml0eScgJiYgaiA9PT0ga2V5cy5sZW5ndGggLSAxKSA7XG4gICAgICAgICAgICBlbHNlIGlmICghaXNWYWxpZEtleShrZXlzW2pdKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeCArXG4gICAgICAgICAgICAgICAgICAgICdjb250YWlucyBhbiBpbnZhbGlkIGtleSAoJyArXG4gICAgICAgICAgICAgICAgICAgIGtleXNbal0gK1xuICAgICAgICAgICAgICAgICAgICAnKSBpbiBwYXRoICcgK1xuICAgICAgICAgICAgICAgICAgICBjdXJQYXRoLnRvU3RyaW5nKCkgK1xuICAgICAgICAgICAgICAgICAgICAnLiBLZXlzIG11c3QgYmUgbm9uLWVtcHR5IHN0cmluZ3MgJyArXG4gICAgICAgICAgICAgICAgICAgICdhbmQgY2FuXFwndCBjb250YWluIFwiLlwiLCBcIiNcIiwgXCIkXCIsIFwiL1wiLCBcIltcIiwgb3IgXCJdXCInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBDaGVjayB0aGF0IHVwZGF0ZSBrZXlzIGFyZSBub3QgZGVzY2VuZGFudHMgb2YgZWFjaCBvdGhlci5cbiAgICAvLyBXZSByZWx5IG9uIHRoZSBwcm9wZXJ0eSB0aGF0IHNvcnRpbmcgZ3VhcmFudGVlcyB0aGF0IGFuY2VzdG9ycyBjb21lXG4gICAgLy8gcmlnaHQgYmVmb3JlIGRlc2NlbmRhbnRzLlxuICAgIG1lcmdlUGF0aHMuc29ydChwYXRoQ29tcGFyZSk7XG4gICAgbGV0IHByZXZQYXRoID0gbnVsbDtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbWVyZ2VQYXRocy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjdXJQYXRoID0gbWVyZ2VQYXRoc1tpXTtcbiAgICAgICAgaWYgKHByZXZQYXRoICE9PSBudWxsICYmIHBhdGhDb250YWlucyhwcmV2UGF0aCwgY3VyUGF0aCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeCArXG4gICAgICAgICAgICAgICAgJ2NvbnRhaW5zIGEgcGF0aCAnICtcbiAgICAgICAgICAgICAgICBwcmV2UGF0aC50b1N0cmluZygpICtcbiAgICAgICAgICAgICAgICAnIHRoYXQgaXMgYW5jZXN0b3Igb2YgYW5vdGhlciBwYXRoICcgK1xuICAgICAgICAgICAgICAgIGN1clBhdGgudG9TdHJpbmcoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcHJldlBhdGggPSBjdXJQYXRoO1xuICAgIH1cbn07XG4vKipcbiAqIHByZS12YWxpZGF0ZSBhbiBvYmplY3QgcGFzc2VkIGFzIGFuIGFyZ3VtZW50IHRvIGZpcmViYXNlIGZ1bmN0aW9uIChcbiAqIG11c3QgYmUgYW4gb2JqZWN0IC0gZS5nLiBmb3IgZmlyZWJhc2UudXBkYXRlKCkpLlxuICovXG5jb25zdCB2YWxpZGF0ZUZpcmViYXNlTWVyZ2VEYXRhQXJnID0gZnVuY3Rpb24gKGZuTmFtZSwgZGF0YSwgcGF0aCwgb3B0aW9uYWwpIHtcbiAgICBpZiAob3B0aW9uYWwgJiYgZGF0YSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZXJyb3JQcmVmaXgkMSA9IGVycm9yUHJlZml4KGZuTmFtZSwgJ3ZhbHVlcycpO1xuICAgIGlmICghKGRhdGEgJiYgdHlwZW9mIGRhdGEgPT09ICdvYmplY3QnKSB8fCBBcnJheS5pc0FycmF5KGRhdGEpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeCQxICsgJyBtdXN0IGJlIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBjaGlsZHJlbiB0byByZXBsYWNlLicpO1xuICAgIH1cbiAgICBjb25zdCBtZXJnZVBhdGhzID0gW107XG4gICAgZWFjaChkYXRhLCAoa2V5LCB2YWx1ZSkgPT4ge1xuICAgICAgICBjb25zdCBjdXJQYXRoID0gbmV3IFBhdGgoa2V5KTtcbiAgICAgICAgdmFsaWRhdGVGaXJlYmFzZURhdGEoZXJyb3JQcmVmaXgkMSwgdmFsdWUsIHBhdGhDaGlsZChwYXRoLCBjdXJQYXRoKSk7XG4gICAgICAgIGlmIChwYXRoR2V0QmFjayhjdXJQYXRoKSA9PT0gJy5wcmlvcml0eScpIHtcbiAgICAgICAgICAgIGlmICghaXNWYWxpZFByaW9yaXR5KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeCQxICtcbiAgICAgICAgICAgICAgICAgICAgXCJjb250YWlucyBhbiBpbnZhbGlkIHZhbHVlIGZvciAnXCIgK1xuICAgICAgICAgICAgICAgICAgICBjdXJQYXRoLnRvU3RyaW5nKCkgK1xuICAgICAgICAgICAgICAgICAgICBcIicsIHdoaWNoIG11c3QgYmUgYSB2YWxpZCBcIiArXG4gICAgICAgICAgICAgICAgICAgICdGaXJlYmFzZSBwcmlvcml0eSAoYSBzdHJpbmcsIGZpbml0ZSBudW1iZXIsIHNlcnZlciB2YWx1ZSwgb3IgbnVsbCkuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbWVyZ2VQYXRocy5wdXNoKGN1clBhdGgpO1xuICAgIH0pO1xuICAgIHZhbGlkYXRlRmlyZWJhc2VNZXJnZVBhdGhzKGVycm9yUHJlZml4JDEsIG1lcmdlUGF0aHMpO1xufTtcbmNvbnN0IHZhbGlkYXRlUHJpb3JpdHkgPSBmdW5jdGlvbiAoZm5OYW1lLCBwcmlvcml0eSwgb3B0aW9uYWwpIHtcbiAgICBpZiAob3B0aW9uYWwgJiYgcHJpb3JpdHkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChpc0ludmFsaWRKU09OTnVtYmVyKHByaW9yaXR5KSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCAncHJpb3JpdHknKSArXG4gICAgICAgICAgICAnaXMgJyArXG4gICAgICAgICAgICBwcmlvcml0eS50b1N0cmluZygpICtcbiAgICAgICAgICAgICcsIGJ1dCBtdXN0IGJlIGEgdmFsaWQgRmlyZWJhc2UgcHJpb3JpdHkgKGEgc3RyaW5nLCBmaW5pdGUgbnVtYmVyLCAnICtcbiAgICAgICAgICAgICdzZXJ2ZXIgdmFsdWUsIG9yIG51bGwpLicpO1xuICAgIH1cbiAgICAvLyBTcGVjaWFsIGNhc2UgdG8gYWxsb3cgaW1wb3J0aW5nIGRhdGEgd2l0aCBhIC5zdi5cbiAgICBpZiAoIWlzVmFsaWRQcmlvcml0eShwcmlvcml0eSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yUHJlZml4KGZuTmFtZSwgJ3ByaW9yaXR5JykgK1xuICAgICAgICAgICAgJ211c3QgYmUgYSB2YWxpZCBGaXJlYmFzZSBwcmlvcml0eSAnICtcbiAgICAgICAgICAgICcoYSBzdHJpbmcsIGZpbml0ZSBudW1iZXIsIHNlcnZlciB2YWx1ZSwgb3IgbnVsbCkuJyk7XG4gICAgfVxufTtcbmNvbnN0IHZhbGlkYXRlS2V5ID0gZnVuY3Rpb24gKGZuTmFtZSwgYXJndW1lbnROYW1lLCBrZXksIG9wdGlvbmFsKSB7XG4gICAgaWYgKG9wdGlvbmFsICYmIGtleSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFpc1ZhbGlkS2V5KGtleSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yUHJlZml4KGZuTmFtZSwgYXJndW1lbnROYW1lKSArXG4gICAgICAgICAgICAnd2FzIGFuIGludmFsaWQga2V5ID0gXCInICtcbiAgICAgICAgICAgIGtleSArXG4gICAgICAgICAgICAnXCIuICBGaXJlYmFzZSBrZXlzIG11c3QgYmUgbm9uLWVtcHR5IHN0cmluZ3MgYW5kICcgK1xuICAgICAgICAgICAgJ2NhblxcJ3QgY29udGFpbiBcIi5cIiwgXCIjXCIsIFwiJFwiLCBcIi9cIiwgXCJbXCIsIG9yIFwiXVwiKS4nKTtcbiAgICB9XG59O1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuY29uc3QgdmFsaWRhdGVQYXRoU3RyaW5nID0gZnVuY3Rpb24gKGZuTmFtZSwgYXJndW1lbnROYW1lLCBwYXRoU3RyaW5nLCBvcHRpb25hbCkge1xuICAgIGlmIChvcHRpb25hbCAmJiBwYXRoU3RyaW5nID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIWlzVmFsaWRQYXRoU3RyaW5nKHBhdGhTdHJpbmcpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsIGFyZ3VtZW50TmFtZSkgK1xuICAgICAgICAgICAgJ3dhcyBhbiBpbnZhbGlkIHBhdGggPSBcIicgK1xuICAgICAgICAgICAgcGF0aFN0cmluZyArXG4gICAgICAgICAgICAnXCIuIFBhdGhzIG11c3QgYmUgbm9uLWVtcHR5IHN0cmluZ3MgYW5kICcgK1xuICAgICAgICAgICAgJ2NhblxcJ3QgY29udGFpbiBcIi5cIiwgXCIjXCIsIFwiJFwiLCBcIltcIiwgb3IgXCJdXCInKTtcbiAgICB9XG59O1xuY29uc3QgdmFsaWRhdGVSb290UGF0aFN0cmluZyA9IGZ1bmN0aW9uIChmbk5hbWUsIGFyZ3VtZW50TmFtZSwgcGF0aFN0cmluZywgb3B0aW9uYWwpIHtcbiAgICBpZiAocGF0aFN0cmluZykge1xuICAgICAgICAvLyBBbGxvdyAnLy5pbmZvLycgYXQgdGhlIGJlZ2lubmluZy5cbiAgICAgICAgcGF0aFN0cmluZyA9IHBhdGhTdHJpbmcucmVwbGFjZSgvXlxcLypcXC5pbmZvKFxcL3wkKS8sICcvJyk7XG4gICAgfVxuICAgIHZhbGlkYXRlUGF0aFN0cmluZyhmbk5hbWUsIGFyZ3VtZW50TmFtZSwgcGF0aFN0cmluZywgb3B0aW9uYWwpO1xufTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmNvbnN0IHZhbGlkYXRlV3JpdGFibGVQYXRoID0gZnVuY3Rpb24gKGZuTmFtZSwgcGF0aCkge1xuICAgIGlmIChwYXRoR2V0RnJvbnQocGF0aCkgPT09ICcuaW5mbycpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGZuTmFtZSArIFwiIGZhaWxlZCA9IENhbid0IG1vZGlmeSBkYXRhIHVuZGVyIC8uaW5mby9cIik7XG4gICAgfVxufTtcbmNvbnN0IHZhbGlkYXRlVXJsID0gZnVuY3Rpb24gKGZuTmFtZSwgcGFyc2VkVXJsKSB7XG4gICAgLy8gVE9ETyA9IFZhbGlkYXRlIHNlcnZlciBiZXR0ZXIuXG4gICAgY29uc3QgcGF0aFN0cmluZyA9IHBhcnNlZFVybC5wYXRoLnRvU3RyaW5nKCk7XG4gICAgaWYgKCEodHlwZW9mIHBhcnNlZFVybC5yZXBvSW5mby5ob3N0ID09PSAnc3RyaW5nJykgfHxcbiAgICAgICAgcGFyc2VkVXJsLnJlcG9JbmZvLmhvc3QubGVuZ3RoID09PSAwIHx8XG4gICAgICAgICghaXNWYWxpZEtleShwYXJzZWRVcmwucmVwb0luZm8ubmFtZXNwYWNlKSAmJlxuICAgICAgICAgICAgcGFyc2VkVXJsLnJlcG9JbmZvLmhvc3Quc3BsaXQoJzonKVswXSAhPT0gJ2xvY2FsaG9zdCcpIHx8XG4gICAgICAgIChwYXRoU3RyaW5nLmxlbmd0aCAhPT0gMCAmJiAhaXNWYWxpZFJvb3RQYXRoU3RyaW5nKHBhdGhTdHJpbmcpKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCAndXJsJykgK1xuICAgICAgICAgICAgJ211c3QgYmUgYSB2YWxpZCBmaXJlYmFzZSBVUkwgYW5kICcgK1xuICAgICAgICAgICAgJ3RoZSBwYXRoIGNhblxcJ3QgY29udGFpbiBcIi5cIiwgXCIjXCIsIFwiJFwiLCBcIltcIiwgb3IgXCJdXCIuJyk7XG4gICAgfVxufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVGhlIGV2ZW50IHF1ZXVlIHNlcnZlcyBhIGZldyBwdXJwb3NlczpcbiAqIDEuIEl0IGVuc3VyZXMgd2UgbWFpbnRhaW4gZXZlbnQgb3JkZXIgaW4gdGhlIGZhY2Ugb2YgZXZlbnQgY2FsbGJhY2tzIGRvaW5nIG9wZXJhdGlvbnMgdGhhdCByZXN1bHQgaW4gbW9yZVxuICogICAgZXZlbnRzIGJlaW5nIHF1ZXVlZC5cbiAqIDIuIHJhaXNlUXVldWVkRXZlbnRzKCkgaGFuZGxlcyBiZWluZyBjYWxsZWQgcmVlbnRyYW50bHkgbmljZWx5LiAgVGhhdCBpcywgaWYgaW4gdGhlIGNvdXJzZSBvZiByYWlzaW5nIGV2ZW50cyxcbiAqICAgIHJhaXNlUXVldWVkRXZlbnRzKCkgaXMgY2FsbGVkIGFnYWluLCB0aGUgXCJpbm5lclwiIGNhbGwgd2lsbCBwaWNrIHVwIHJhaXNpbmcgZXZlbnRzIHdoZXJlIHRoZSBcIm91dGVyXCIgY2FsbFxuICogICAgbGVmdCBvZmYsIGVuc3VyaW5nIHRoYXQgdGhlIGV2ZW50cyBhcmUgc3RpbGwgcmFpc2VkIHN5bmNocm9ub3VzbHkgYW5kIGluIG9yZGVyLlxuICogMy4gWW91IGNhbiB1c2UgcmFpc2VFdmVudHNBdFBhdGggYW5kIHJhaXNlRXZlbnRzRm9yQ2hhbmdlZFBhdGggdG8gZW5zdXJlIG9ubHkgcmVsZXZhbnQgcHJldmlvdXNseS1xdWV1ZWRcbiAqICAgIGV2ZW50cyBhcmUgcmFpc2VkIHN5bmNocm9ub3VzbHkuXG4gKlxuICogTk9URTogVGhpcyBjYW4gYWxsIGdvIGF3YXkgaWYvd2hlbiB3ZSBtb3ZlIHRvIGFzeW5jIGV2ZW50cy5cbiAqXG4gKi9cbmNsYXNzIEV2ZW50UXVldWUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmV2ZW50TGlzdHNfID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUcmFja3MgcmVjdXJzaW9uIGRlcHRoIG9mIHJhaXNlUXVldWVkRXZlbnRzXywgZm9yIGRlYnVnZ2luZyBwdXJwb3Nlcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmVjdXJzaW9uRGVwdGhfID0gMDtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSBldmVudERhdGFMaXN0IC0gVGhlIG5ldyBldmVudHMgdG8gcXVldWUuXG4gKi9cbmZ1bmN0aW9uIGV2ZW50UXVldWVRdWV1ZUV2ZW50cyhldmVudFF1ZXVlLCBldmVudERhdGFMaXN0KSB7XG4gICAgLy8gV2UgZ3JvdXAgZXZlbnRzIGJ5IHBhdGgsIHN0b3JpbmcgdGhlbSBpbiBhIHNpbmdsZSBFdmVudExpc3QsIHRvIG1ha2UgaXQgZWFzaWVyIHRvIHNraXAgb3ZlciB0aGVtIHF1aWNrbHkuXG4gICAgbGV0IGN1cnJMaXN0ID0gbnVsbDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGV2ZW50RGF0YUxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGV2ZW50RGF0YUxpc3RbaV07XG4gICAgICAgIGNvbnN0IHBhdGggPSBkYXRhLmdldFBhdGgoKTtcbiAgICAgICAgaWYgKGN1cnJMaXN0ICE9PSBudWxsICYmICFwYXRoRXF1YWxzKHBhdGgsIGN1cnJMaXN0LnBhdGgpKSB7XG4gICAgICAgICAgICBldmVudFF1ZXVlLmV2ZW50TGlzdHNfLnB1c2goY3Vyckxpc3QpO1xuICAgICAgICAgICAgY3Vyckxpc3QgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdXJyTGlzdCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgY3Vyckxpc3QgPSB7IGV2ZW50czogW10sIHBhdGggfTtcbiAgICAgICAgfVxuICAgICAgICBjdXJyTGlzdC5ldmVudHMucHVzaChkYXRhKTtcbiAgICB9XG4gICAgaWYgKGN1cnJMaXN0KSB7XG4gICAgICAgIGV2ZW50UXVldWUuZXZlbnRMaXN0c18ucHVzaChjdXJyTGlzdCk7XG4gICAgfVxufVxuLyoqXG4gKiBRdWV1ZXMgdGhlIHNwZWNpZmllZCBldmVudHMgYW5kIHN5bmNocm9ub3VzbHkgcmFpc2VzIGFsbCBldmVudHMgKGluY2x1ZGluZyBwcmV2aW91c2x5IHF1ZXVlZCBvbmVzKVxuICogZm9yIHRoZSBzcGVjaWZpZWQgcGF0aC5cbiAqXG4gKiBJdCBpcyBhc3N1bWVkIHRoYXQgdGhlIG5ldyBldmVudHMgYXJlIGFsbCBmb3IgdGhlIHNwZWNpZmllZCBwYXRoLlxuICpcbiAqIEBwYXJhbSBwYXRoIC0gVGhlIHBhdGggdG8gcmFpc2UgZXZlbnRzIGZvci5cbiAqIEBwYXJhbSBldmVudERhdGFMaXN0IC0gVGhlIG5ldyBldmVudHMgdG8gcmFpc2UuXG4gKi9cbmZ1bmN0aW9uIGV2ZW50UXVldWVSYWlzZUV2ZW50c0F0UGF0aChldmVudFF1ZXVlLCBwYXRoLCBldmVudERhdGFMaXN0KSB7XG4gICAgZXZlbnRRdWV1ZVF1ZXVlRXZlbnRzKGV2ZW50UXVldWUsIGV2ZW50RGF0YUxpc3QpO1xuICAgIGV2ZW50UXVldWVSYWlzZVF1ZXVlZEV2ZW50c01hdGNoaW5nUHJlZGljYXRlKGV2ZW50UXVldWUsIGV2ZW50UGF0aCA9PiBwYXRoRXF1YWxzKGV2ZW50UGF0aCwgcGF0aCkpO1xufVxuLyoqXG4gKiBRdWV1ZXMgdGhlIHNwZWNpZmllZCBldmVudHMgYW5kIHN5bmNocm9ub3VzbHkgcmFpc2VzIGFsbCBldmVudHMgKGluY2x1ZGluZyBwcmV2aW91c2x5IHF1ZXVlZCBvbmVzKSBmb3JcbiAqIGxvY2F0aW9ucyByZWxhdGVkIHRvIHRoZSBzcGVjaWZpZWQgY2hhbmdlIHBhdGggKGkuZS4gYWxsIGFuY2VzdG9ycyBhbmQgZGVzY2VuZGFudHMpLlxuICpcbiAqIEl0IGlzIGFzc3VtZWQgdGhhdCB0aGUgbmV3IGV2ZW50cyBhcmUgYWxsIHJlbGF0ZWQgKGFuY2VzdG9yIG9yIGRlc2NlbmRhbnQpIHRvIHRoZSBzcGVjaWZpZWQgcGF0aC5cbiAqXG4gKiBAcGFyYW0gY2hhbmdlZFBhdGggLSBUaGUgcGF0aCB0byByYWlzZSBldmVudHMgZm9yLlxuICogQHBhcmFtIGV2ZW50RGF0YUxpc3QgLSBUaGUgZXZlbnRzIHRvIHJhaXNlXG4gKi9cbmZ1bmN0aW9uIGV2ZW50UXVldWVSYWlzZUV2ZW50c0ZvckNoYW5nZWRQYXRoKGV2ZW50UXVldWUsIGNoYW5nZWRQYXRoLCBldmVudERhdGFMaXN0KSB7XG4gICAgZXZlbnRRdWV1ZVF1ZXVlRXZlbnRzKGV2ZW50UXVldWUsIGV2ZW50RGF0YUxpc3QpO1xuICAgIGV2ZW50UXVldWVSYWlzZVF1ZXVlZEV2ZW50c01hdGNoaW5nUHJlZGljYXRlKGV2ZW50UXVldWUsIGV2ZW50UGF0aCA9PiBwYXRoQ29udGFpbnMoZXZlbnRQYXRoLCBjaGFuZ2VkUGF0aCkgfHxcbiAgICAgICAgcGF0aENvbnRhaW5zKGNoYW5nZWRQYXRoLCBldmVudFBhdGgpKTtcbn1cbmZ1bmN0aW9uIGV2ZW50UXVldWVSYWlzZVF1ZXVlZEV2ZW50c01hdGNoaW5nUHJlZGljYXRlKGV2ZW50UXVldWUsIHByZWRpY2F0ZSkge1xuICAgIGV2ZW50UXVldWUucmVjdXJzaW9uRGVwdGhfKys7XG4gICAgbGV0IHNlbnRBbGwgPSB0cnVlO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZXZlbnRRdWV1ZS5ldmVudExpc3RzXy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBldmVudExpc3QgPSBldmVudFF1ZXVlLmV2ZW50TGlzdHNfW2ldO1xuICAgICAgICBpZiAoZXZlbnRMaXN0KSB7XG4gICAgICAgICAgICBjb25zdCBldmVudFBhdGggPSBldmVudExpc3QucGF0aDtcbiAgICAgICAgICAgIGlmIChwcmVkaWNhdGUoZXZlbnRQYXRoKSkge1xuICAgICAgICAgICAgICAgIGV2ZW50TGlzdFJhaXNlKGV2ZW50UXVldWUuZXZlbnRMaXN0c19baV0pO1xuICAgICAgICAgICAgICAgIGV2ZW50UXVldWUuZXZlbnRMaXN0c19baV0gPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VudEFsbCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChzZW50QWxsKSB7XG4gICAgICAgIGV2ZW50UXVldWUuZXZlbnRMaXN0c18gPSBbXTtcbiAgICB9XG4gICAgZXZlbnRRdWV1ZS5yZWN1cnNpb25EZXB0aF8tLTtcbn1cbi8qKlxuICogSXRlcmF0ZXMgdGhyb3VnaCB0aGUgbGlzdCBhbmQgcmFpc2VzIGVhY2ggZXZlbnRcbiAqL1xuZnVuY3Rpb24gZXZlbnRMaXN0UmFpc2UoZXZlbnRMaXN0KSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBldmVudExpc3QuZXZlbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50RGF0YSA9IGV2ZW50TGlzdC5ldmVudHNbaV07XG4gICAgICAgIGlmIChldmVudERhdGEgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGV2ZW50TGlzdC5ldmVudHNbaV0gPSBudWxsO1xuICAgICAgICAgICAgY29uc3QgZXZlbnRGbiA9IGV2ZW50RGF0YS5nZXRFdmVudFJ1bm5lcigpO1xuICAgICAgICAgICAgaWYgKGxvZ2dlcikge1xuICAgICAgICAgICAgICAgIGxvZygnZXZlbnQ6ICcgKyBldmVudERhdGEudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBleGNlcHRpb25HdWFyZChldmVudEZuKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNvbnN0IElOVEVSUlVQVF9SRUFTT04gPSAncmVwb19pbnRlcnJ1cHQnO1xuLyoqXG4gKiBJZiBhIHRyYW5zYWN0aW9uIGRvZXMgbm90IHN1Y2NlZWQgYWZ0ZXIgMjUgcmV0cmllcywgd2UgYWJvcnQgaXQuIEFtb25nIG90aGVyXG4gKiB0aGluZ3MgdGhpcyBlbnN1cmUgdGhhdCBpZiB0aGVyZSdzIGV2ZXIgYSBidWcgY2F1c2luZyBhIG1pc21hdGNoIGJldHdlZW5cbiAqIGNsaWVudCAvIHNlcnZlciBoYXNoZXMgZm9yIHNvbWUgZGF0YSwgd2Ugd29uJ3QgcmV0cnkgaW5kZWZpbml0ZWx5LlxuICovXG5jb25zdCBNQVhfVFJBTlNBQ1RJT05fUkVUUklFUyA9IDI1O1xuLyoqXG4gKiBBIGNvbm5lY3Rpb24gdG8gYSBzaW5nbGUgZGF0YSByZXBvc2l0b3J5LlxuICovXG5jbGFzcyBSZXBvIHtcbiAgICBjb25zdHJ1Y3RvcihyZXBvSW5mb18sIGZvcmNlUmVzdENsaWVudF8sIGF1dGhUb2tlblByb3ZpZGVyXywgYXBwQ2hlY2tQcm92aWRlcl8pIHtcbiAgICAgICAgdGhpcy5yZXBvSW5mb18gPSByZXBvSW5mb187XG4gICAgICAgIHRoaXMuZm9yY2VSZXN0Q2xpZW50XyA9IGZvcmNlUmVzdENsaWVudF87XG4gICAgICAgIHRoaXMuYXV0aFRva2VuUHJvdmlkZXJfID0gYXV0aFRva2VuUHJvdmlkZXJfO1xuICAgICAgICB0aGlzLmFwcENoZWNrUHJvdmlkZXJfID0gYXBwQ2hlY2tQcm92aWRlcl87XG4gICAgICAgIHRoaXMuZGF0YVVwZGF0ZUNvdW50ID0gMDtcbiAgICAgICAgdGhpcy5zdGF0c0xpc3RlbmVyXyA9IG51bGw7XG4gICAgICAgIHRoaXMuZXZlbnRRdWV1ZV8gPSBuZXcgRXZlbnRRdWV1ZSgpO1xuICAgICAgICB0aGlzLm5leHRXcml0ZUlkXyA9IDE7XG4gICAgICAgIHRoaXMuaW50ZXJjZXB0U2VydmVyRGF0YUNhbGxiYWNrXyA9IG51bGw7XG4gICAgICAgIC8qKiBBIGxpc3Qgb2YgZGF0YSBwaWVjZXMgYW5kIHBhdGhzIHRvIGJlIHNldCB3aGVuIHRoaXMgY2xpZW50IGRpc2Nvbm5lY3RzLiAqL1xuICAgICAgICB0aGlzLm9uRGlzY29ubmVjdF8gPSBuZXdTcGFyc2VTbmFwc2hvdFRyZWUoKTtcbiAgICAgICAgLyoqIFN0b3JlcyBxdWV1ZXMgb2Ygb3V0c3RhbmRpbmcgdHJhbnNhY3Rpb25zIGZvciBGaXJlYmFzZSBsb2NhdGlvbnMuICovXG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb25RdWV1ZVRyZWVfID0gbmV3IFRyZWUoKTtcbiAgICAgICAgLy8gVE9ETzogVGhpcyBzaG91bGQgYmUgQHByaXZhdGUgYnV0IGl0J3MgdXNlZCBieSB0ZXN0X2FjY2Vzcy5qcyBhbmQgaW50ZXJuYWwuanNcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW50Q29ubmVjdGlvbl8gPSBudWxsO1xuICAgICAgICAvLyBUaGlzIGtleSBpcyBpbnRlbnRpb25hbGx5IG5vdCB1cGRhdGVkIGlmIFJlcG9JbmZvIGlzIGxhdGVyIGNoYW5nZWQgb3IgcmVwbGFjZWRcbiAgICAgICAgdGhpcy5rZXkgPSB0aGlzLnJlcG9JbmZvXy50b1VSTFN0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBUaGUgVVJMIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHJvb3Qgb2YgdGhpcyBGaXJlYmFzZS5cbiAgICAgKi9cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuICgodGhpcy5yZXBvSW5mb18uc2VjdXJlID8gJ2h0dHBzOi8vJyA6ICdodHRwOi8vJykgKyB0aGlzLnJlcG9JbmZvXy5ob3N0KTtcbiAgICB9XG59XG5mdW5jdGlvbiByZXBvU3RhcnQocmVwbywgYXBwSWQsIGF1dGhPdmVycmlkZSkge1xuICAgIHJlcG8uc3RhdHNfID0gc3RhdHNNYW5hZ2VyR2V0Q29sbGVjdGlvbihyZXBvLnJlcG9JbmZvXyk7XG4gICAgaWYgKHJlcG8uZm9yY2VSZXN0Q2xpZW50XyB8fCBiZWluZ0NyYXdsZWQoKSkge1xuICAgICAgICByZXBvLnNlcnZlcl8gPSBuZXcgUmVhZG9ubHlSZXN0Q2xpZW50KHJlcG8ucmVwb0luZm9fLCAocGF0aFN0cmluZywgZGF0YSwgaXNNZXJnZSwgdGFnKSA9PiB7XG4gICAgICAgICAgICByZXBvT25EYXRhVXBkYXRlKHJlcG8sIHBhdGhTdHJpbmcsIGRhdGEsIGlzTWVyZ2UsIHRhZyk7XG4gICAgICAgIH0sIHJlcG8uYXV0aFRva2VuUHJvdmlkZXJfLCByZXBvLmFwcENoZWNrUHJvdmlkZXJfKTtcbiAgICAgICAgLy8gTWlub3IgaGFjazogRmlyZSBvbkNvbm5lY3QgaW1tZWRpYXRlbHksIHNpbmNlIHRoZXJlJ3Mgbm8gYWN0dWFsIGNvbm5lY3Rpb24uXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gcmVwb09uQ29ubmVjdFN0YXR1cyhyZXBvLCAvKiBjb25uZWN0U3RhdHVzPSAqLyB0cnVlKSwgMCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBWYWxpZGF0ZSBhdXRoT3ZlcnJpZGVcbiAgICAgICAgaWYgKHR5cGVvZiBhdXRoT3ZlcnJpZGUgIT09ICd1bmRlZmluZWQnICYmIGF1dGhPdmVycmlkZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBhdXRoT3ZlcnJpZGUgIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdPbmx5IG9iamVjdHMgYXJlIHN1cHBvcnRlZCBmb3Igb3B0aW9uIGRhdGFiYXNlQXV0aFZhcmlhYmxlT3ZlcnJpZGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgc3RyaW5naWZ5KGF1dGhPdmVycmlkZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBhdXRoT3ZlcnJpZGUgcHJvdmlkZWQ6ICcgKyBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXBvLnBlcnNpc3RlbnRDb25uZWN0aW9uXyA9IG5ldyBQZXJzaXN0ZW50Q29ubmVjdGlvbihyZXBvLnJlcG9JbmZvXywgYXBwSWQsIChwYXRoU3RyaW5nLCBkYXRhLCBpc01lcmdlLCB0YWcpID0+IHtcbiAgICAgICAgICAgIHJlcG9PbkRhdGFVcGRhdGUocmVwbywgcGF0aFN0cmluZywgZGF0YSwgaXNNZXJnZSwgdGFnKTtcbiAgICAgICAgfSwgKGNvbm5lY3RTdGF0dXMpID0+IHtcbiAgICAgICAgICAgIHJlcG9PbkNvbm5lY3RTdGF0dXMocmVwbywgY29ubmVjdFN0YXR1cyk7XG4gICAgICAgIH0sICh1cGRhdGVzKSA9PiB7XG4gICAgICAgICAgICByZXBvT25TZXJ2ZXJJbmZvVXBkYXRlKHJlcG8sIHVwZGF0ZXMpO1xuICAgICAgICB9LCByZXBvLmF1dGhUb2tlblByb3ZpZGVyXywgcmVwby5hcHBDaGVja1Byb3ZpZGVyXywgYXV0aE92ZXJyaWRlKTtcbiAgICAgICAgcmVwby5zZXJ2ZXJfID0gcmVwby5wZXJzaXN0ZW50Q29ubmVjdGlvbl87XG4gICAgfVxuICAgIHJlcG8uYXV0aFRva2VuUHJvdmlkZXJfLmFkZFRva2VuQ2hhbmdlTGlzdGVuZXIodG9rZW4gPT4ge1xuICAgICAgICByZXBvLnNlcnZlcl8ucmVmcmVzaEF1dGhUb2tlbih0b2tlbik7XG4gICAgfSk7XG4gICAgcmVwby5hcHBDaGVja1Byb3ZpZGVyXy5hZGRUb2tlbkNoYW5nZUxpc3RlbmVyKHJlc3VsdCA9PiB7XG4gICAgICAgIHJlcG8uc2VydmVyXy5yZWZyZXNoQXBwQ2hlY2tUb2tlbihyZXN1bHQudG9rZW4pO1xuICAgIH0pO1xuICAgIC8vIEluIHRoZSBjYXNlIG9mIG11bHRpcGxlIFJlcG9zIGZvciB0aGUgc2FtZSByZXBvSW5mbyAoaS5lLiB0aGVyZSBhcmUgbXVsdGlwbGUgRmlyZWJhc2UuQ29udGV4dHMgYmVpbmcgdXNlZCksXG4gICAgLy8gd2Ugb25seSB3YW50IHRvIGNyZWF0ZSBvbmUgU3RhdHNSZXBvcnRlci4gIEFzIHN1Y2gsIHdlJ2xsIHJlcG9ydCBzdGF0cyBvdmVyIHRoZSBmaXJzdCBSZXBvIGNyZWF0ZWQuXG4gICAgcmVwby5zdGF0c1JlcG9ydGVyXyA9IHN0YXRzTWFuYWdlckdldE9yQ3JlYXRlUmVwb3J0ZXIocmVwby5yZXBvSW5mb18sICgpID0+IG5ldyBTdGF0c1JlcG9ydGVyKHJlcG8uc3RhdHNfLCByZXBvLnNlcnZlcl8pKTtcbiAgICAvLyBVc2VkIGZvciAuaW5mby5cbiAgICByZXBvLmluZm9EYXRhXyA9IG5ldyBTbmFwc2hvdEhvbGRlcigpO1xuICAgIHJlcG8uaW5mb1N5bmNUcmVlXyA9IG5ldyBTeW5jVHJlZSh7XG4gICAgICAgIHN0YXJ0TGlzdGVuaW5nOiAocXVlcnksIHRhZywgY3VycmVudEhhc2hGbiwgb25Db21wbGV0ZSkgPT4ge1xuICAgICAgICAgICAgbGV0IGluZm9FdmVudHMgPSBbXTtcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSByZXBvLmluZm9EYXRhXy5nZXROb2RlKHF1ZXJ5Ll9wYXRoKTtcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgcG9zc2libHkgYSBoYWNrLCBidXQgd2UgaGF2ZSBkaWZmZXJlbnQgc2VtYW50aWNzIGZvciAuaW5mbyBlbmRwb2ludHMuIFdlIGRvbid0IHJhaXNlIG51bGwgZXZlbnRzXG4gICAgICAgICAgICAvLyBvbiBpbml0aWFsIGRhdGEuLi5cbiAgICAgICAgICAgIGlmICghbm9kZS5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICBpbmZvRXZlbnRzID0gc3luY1RyZWVBcHBseVNlcnZlck92ZXJ3cml0ZShyZXBvLmluZm9TeW5jVHJlZV8sIHF1ZXJ5Ll9wYXRoLCBub2RlKTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgb25Db21wbGV0ZSgnb2snKTtcbiAgICAgICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbmZvRXZlbnRzO1xuICAgICAgICB9LFxuICAgICAgICBzdG9wTGlzdGVuaW5nOiAoKSA9PiB7IH1cbiAgICB9KTtcbiAgICByZXBvVXBkYXRlSW5mbyhyZXBvLCAnY29ubmVjdGVkJywgZmFsc2UpO1xuICAgIHJlcG8uc2VydmVyU3luY1RyZWVfID0gbmV3IFN5bmNUcmVlKHtcbiAgICAgICAgc3RhcnRMaXN0ZW5pbmc6IChxdWVyeSwgdGFnLCBjdXJyZW50SGFzaEZuLCBvbkNvbXBsZXRlKSA9PiB7XG4gICAgICAgICAgICByZXBvLnNlcnZlcl8ubGlzdGVuKHF1ZXJ5LCBjdXJyZW50SGFzaEZuLCB0YWcsIChzdGF0dXMsIGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBldmVudHMgPSBvbkNvbXBsZXRlKHN0YXR1cywgZGF0YSk7XG4gICAgICAgICAgICAgICAgZXZlbnRRdWV1ZVJhaXNlRXZlbnRzRm9yQ2hhbmdlZFBhdGgocmVwby5ldmVudFF1ZXVlXywgcXVlcnkuX3BhdGgsIGV2ZW50cyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIE5vIHN5bmNocm9ub3VzIGV2ZW50cyBmb3IgbmV0d29yay1iYWNrZWQgc3luYyB0cmVlc1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9LFxuICAgICAgICBzdG9wTGlzdGVuaW5nOiAocXVlcnksIHRhZykgPT4ge1xuICAgICAgICAgICAgcmVwby5zZXJ2ZXJfLnVubGlzdGVuKHF1ZXJ5LCB0YWcpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG4vKipcbiAqIEByZXR1cm5zIFRoZSB0aW1lIGluIG1pbGxpc2Vjb25kcywgdGFraW5nIHRoZSBzZXJ2ZXIgb2Zmc2V0IGludG8gYWNjb3VudCBpZiB3ZSBoYXZlIG9uZS5cbiAqL1xuZnVuY3Rpb24gcmVwb1NlcnZlclRpbWUocmVwbykge1xuICAgIGNvbnN0IG9mZnNldE5vZGUgPSByZXBvLmluZm9EYXRhXy5nZXROb2RlKG5ldyBQYXRoKCcuaW5mby9zZXJ2ZXJUaW1lT2Zmc2V0JykpO1xuICAgIGNvbnN0IG9mZnNldCA9IG9mZnNldE5vZGUudmFsKCkgfHwgMDtcbiAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCkgKyBvZmZzZXQ7XG59XG4vKipcbiAqIEdlbmVyYXRlIFNlcnZlclZhbHVlcyB1c2luZyBzb21lIHZhcmlhYmxlcyBmcm9tIHRoZSByZXBvIG9iamVjdC5cbiAqL1xuZnVuY3Rpb24gcmVwb0dlbmVyYXRlU2VydmVyVmFsdWVzKHJlcG8pIHtcbiAgICByZXR1cm4gZ2VuZXJhdGVXaXRoVmFsdWVzKHtcbiAgICAgICAgdGltZXN0YW1wOiByZXBvU2VydmVyVGltZShyZXBvKVxuICAgIH0pO1xufVxuLyoqXG4gKiBDYWxsZWQgYnkgcmVhbHRpbWUgd2hlbiB3ZSBnZXQgbmV3IG1lc3NhZ2VzIGZyb20gdGhlIHNlcnZlci5cbiAqL1xuZnVuY3Rpb24gcmVwb09uRGF0YVVwZGF0ZShyZXBvLCBwYXRoU3RyaW5nLCBkYXRhLCBpc01lcmdlLCB0YWcpIHtcbiAgICAvLyBGb3IgdGVzdGluZy5cbiAgICByZXBvLmRhdGFVcGRhdGVDb3VudCsrO1xuICAgIGNvbnN0IHBhdGggPSBuZXcgUGF0aChwYXRoU3RyaW5nKTtcbiAgICBkYXRhID0gcmVwby5pbnRlcmNlcHRTZXJ2ZXJEYXRhQ2FsbGJhY2tfXG4gICAgICAgID8gcmVwby5pbnRlcmNlcHRTZXJ2ZXJEYXRhQ2FsbGJhY2tfKHBhdGhTdHJpbmcsIGRhdGEpXG4gICAgICAgIDogZGF0YTtcbiAgICBsZXQgZXZlbnRzID0gW107XG4gICAgaWYgKHRhZykge1xuICAgICAgICBpZiAoaXNNZXJnZSkge1xuICAgICAgICAgICAgY29uc3QgdGFnZ2VkQ2hpbGRyZW4gPSBtYXAoZGF0YSwgKHJhdykgPT4gbm9kZUZyb21KU09OKHJhdykpO1xuICAgICAgICAgICAgZXZlbnRzID0gc3luY1RyZWVBcHBseVRhZ2dlZFF1ZXJ5TWVyZ2UocmVwby5zZXJ2ZXJTeW5jVHJlZV8sIHBhdGgsIHRhZ2dlZENoaWxkcmVuLCB0YWcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdGFnZ2VkU25hcCA9IG5vZGVGcm9tSlNPTihkYXRhKTtcbiAgICAgICAgICAgIGV2ZW50cyA9IHN5bmNUcmVlQXBwbHlUYWdnZWRRdWVyeU92ZXJ3cml0ZShyZXBvLnNlcnZlclN5bmNUcmVlXywgcGF0aCwgdGFnZ2VkU25hcCwgdGFnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChpc01lcmdlKSB7XG4gICAgICAgIGNvbnN0IGNoYW5nZWRDaGlsZHJlbiA9IG1hcChkYXRhLCAocmF3KSA9PiBub2RlRnJvbUpTT04ocmF3KSk7XG4gICAgICAgIGV2ZW50cyA9IHN5bmNUcmVlQXBwbHlTZXJ2ZXJNZXJnZShyZXBvLnNlcnZlclN5bmNUcmVlXywgcGF0aCwgY2hhbmdlZENoaWxkcmVuKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IHNuYXAgPSBub2RlRnJvbUpTT04oZGF0YSk7XG4gICAgICAgIGV2ZW50cyA9IHN5bmNUcmVlQXBwbHlTZXJ2ZXJPdmVyd3JpdGUocmVwby5zZXJ2ZXJTeW5jVHJlZV8sIHBhdGgsIHNuYXApO1xuICAgIH1cbiAgICBsZXQgYWZmZWN0ZWRQYXRoID0gcGF0aDtcbiAgICBpZiAoZXZlbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gU2luY2Ugd2UgaGF2ZSBhIGxpc3RlbmVyIG91dHN0YW5kaW5nIGZvciBlYWNoIHRyYW5zYWN0aW9uLCByZWNlaXZpbmcgYW55IGV2ZW50c1xuICAgICAgICAvLyBpcyBhIHByb3h5IGZvciBzb21lIGNoYW5nZSBoYXZpbmcgb2NjdXJyZWQuXG4gICAgICAgIGFmZmVjdGVkUGF0aCA9IHJlcG9SZXJ1blRyYW5zYWN0aW9ucyhyZXBvLCBwYXRoKTtcbiAgICB9XG4gICAgZXZlbnRRdWV1ZVJhaXNlRXZlbnRzRm9yQ2hhbmdlZFBhdGgocmVwby5ldmVudFF1ZXVlXywgYWZmZWN0ZWRQYXRoLCBldmVudHMpO1xufVxuZnVuY3Rpb24gcmVwb09uQ29ubmVjdFN0YXR1cyhyZXBvLCBjb25uZWN0U3RhdHVzKSB7XG4gICAgcmVwb1VwZGF0ZUluZm8ocmVwbywgJ2Nvbm5lY3RlZCcsIGNvbm5lY3RTdGF0dXMpO1xuICAgIGlmIChjb25uZWN0U3RhdHVzID09PSBmYWxzZSkge1xuICAgICAgICByZXBvUnVuT25EaXNjb25uZWN0RXZlbnRzKHJlcG8pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHJlcG9PblNlcnZlckluZm9VcGRhdGUocmVwbywgdXBkYXRlcykge1xuICAgIGVhY2godXBkYXRlcywgKGtleSwgdmFsdWUpID0+IHtcbiAgICAgICAgcmVwb1VwZGF0ZUluZm8ocmVwbywga2V5LCB2YWx1ZSk7XG4gICAgfSk7XG59XG5mdW5jdGlvbiByZXBvVXBkYXRlSW5mbyhyZXBvLCBwYXRoU3RyaW5nLCB2YWx1ZSkge1xuICAgIGNvbnN0IHBhdGggPSBuZXcgUGF0aCgnLy5pbmZvLycgKyBwYXRoU3RyaW5nKTtcbiAgICBjb25zdCBuZXdOb2RlID0gbm9kZUZyb21KU09OKHZhbHVlKTtcbiAgICByZXBvLmluZm9EYXRhXy51cGRhdGVTbmFwc2hvdChwYXRoLCBuZXdOb2RlKTtcbiAgICBjb25zdCBldmVudHMgPSBzeW5jVHJlZUFwcGx5U2VydmVyT3ZlcndyaXRlKHJlcG8uaW5mb1N5bmNUcmVlXywgcGF0aCwgbmV3Tm9kZSk7XG4gICAgZXZlbnRRdWV1ZVJhaXNlRXZlbnRzRm9yQ2hhbmdlZFBhdGgocmVwby5ldmVudFF1ZXVlXywgcGF0aCwgZXZlbnRzKTtcbn1cbmZ1bmN0aW9uIHJlcG9HZXROZXh0V3JpdGVJZChyZXBvKSB7XG4gICAgcmV0dXJuIHJlcG8ubmV4dFdyaXRlSWRfKys7XG59XG4vKipcbiAqIFRoZSBwdXJwb3NlIG9mIGBnZXRWYWx1ZWAgaXMgdG8gcmV0dXJuIHRoZSBsYXRlc3Qga25vd24gdmFsdWVcbiAqIHNhdGlzZnlpbmcgYHF1ZXJ5YC5cbiAqXG4gKiBUaGlzIG1ldGhvZCB3aWxsIGZpcnN0IGNoZWNrIGZvciBpbi1tZW1vcnkgY2FjaGVkIHZhbHVlc1xuICogYmVsb25naW5nIHRvIGFjdGl2ZSBsaXN0ZW5lcnMuIElmIHRoZXkgYXJlIGZvdW5kLCBzdWNoIHZhbHVlc1xuICogYXJlIGNvbnNpZGVyZWQgdG8gYmUgdGhlIG1vc3QgdXAtdG8tZGF0ZS5cbiAqXG4gKiBJZiB0aGUgY2xpZW50IGlzIG5vdCBjb25uZWN0ZWQsIHRoaXMgbWV0aG9kIHdpbGwgd2FpdCB1bnRpbCB0aGVcbiAqICByZXBvIGhhcyBlc3RhYmxpc2hlZCBhIGNvbm5lY3Rpb24gYW5kIHRoZW4gcmVxdWVzdCB0aGUgdmFsdWUgZm9yIGBxdWVyeWAuXG4gKiBJZiB0aGUgY2xpZW50IGlzIG5vdCBhYmxlIHRvIHJldHJpZXZlIHRoZSBxdWVyeSByZXN1bHQgZm9yIGFub3RoZXIgcmVhc29uLFxuICogaXQgcmVwb3J0cyBhbiBlcnJvci5cbiAqXG4gKiBAcGFyYW0gcXVlcnkgLSBUaGUgcXVlcnkgdG8gc3VyZmFjZSBhIHZhbHVlIGZvci5cbiAqL1xuZnVuY3Rpb24gcmVwb0dldFZhbHVlKHJlcG8sIHF1ZXJ5LCBldmVudFJlZ2lzdHJhdGlvbikge1xuICAgIC8vIE9ubHkgYWN0aXZlIHF1ZXJpZXMgYXJlIGNhY2hlZC4gVGhlcmUgaXMgbm8gcGVyc2lzdGVkIGNhY2hlLlxuICAgIGNvbnN0IGNhY2hlZCA9IHN5bmNUcmVlR2V0U2VydmVyVmFsdWUocmVwby5zZXJ2ZXJTeW5jVHJlZV8sIHF1ZXJ5KTtcbiAgICBpZiAoY2FjaGVkICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShjYWNoZWQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVwby5zZXJ2ZXJfLmdldChxdWVyeSkudGhlbihwYXlsb2FkID0+IHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IG5vZGVGcm9tSlNPTihwYXlsb2FkKS53aXRoSW5kZXgocXVlcnkuX3F1ZXJ5UGFyYW1zLmdldEluZGV4KCkpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQmVsb3cgd2Ugc2ltdWxhdGUgdGhlIGFjdGlvbnMgb2YgYW4gYG9ubHlPbmNlYCBgb25WYWx1ZSgpYCBldmVudCB3aGVyZTpcbiAgICAgICAgICogQWRkIGFuIGV2ZW50IHJlZ2lzdHJhdGlvbixcbiAgICAgICAgICogVXBkYXRlIGRhdGEgYXQgdGhlIHBhdGgsXG4gICAgICAgICAqIFJhaXNlIGFueSBldmVudHMsXG4gICAgICAgICAqIENsZWFudXAgdGhlIFN5bmNUcmVlXG4gICAgICAgICAqL1xuICAgICAgICBzeW5jVHJlZUFkZEV2ZW50UmVnaXN0cmF0aW9uKHJlcG8uc2VydmVyU3luY1RyZWVfLCBxdWVyeSwgZXZlbnRSZWdpc3RyYXRpb24sIHRydWUpO1xuICAgICAgICBsZXQgZXZlbnRzO1xuICAgICAgICBpZiAocXVlcnkuX3F1ZXJ5UGFyYW1zLmxvYWRzQWxsRGF0YSgpKSB7XG4gICAgICAgICAgICBldmVudHMgPSBzeW5jVHJlZUFwcGx5U2VydmVyT3ZlcndyaXRlKHJlcG8uc2VydmVyU3luY1RyZWVfLCBxdWVyeS5fcGF0aCwgbm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSBzeW5jVHJlZVRhZ0ZvclF1ZXJ5KHJlcG8uc2VydmVyU3luY1RyZWVfLCBxdWVyeSk7XG4gICAgICAgICAgICBldmVudHMgPSBzeW5jVHJlZUFwcGx5VGFnZ2VkUXVlcnlPdmVyd3JpdGUocmVwby5zZXJ2ZXJTeW5jVHJlZV8sIHF1ZXJ5Ll9wYXRoLCBub2RlLCB0YWcpO1xuICAgICAgICB9XG4gICAgICAgIC8qXG4gICAgICAgICAqIFdlIG5lZWQgdG8gcmFpc2UgZXZlbnRzIGluIHRoZSBzY2VuYXJpbyB3aGVyZSBgZ2V0KClgIGlzIGNhbGxlZCBhdCBhIHBhcmVudCBwYXRoLCBhbmRcbiAgICAgICAgICogd2hpbGUgdGhlIGBnZXQoKWAgaXMgcGVuZGluZywgYG9uVmFsdWVgIGlzIGNhbGxlZCBhdCBhIGNoaWxkIGxvY2F0aW9uLiBXaGlsZSBnZXQoKSBpcyB3YWl0aW5nXG4gICAgICAgICAqIGZvciB0aGUgZGF0YSwgYG9uVmFsdWVgIHdpbGwgcmVnaXN0ZXIgYSBuZXcgZXZlbnQuIFRoZW4sIGdldCgpIHdpbGwgY29tZSBiYWNrLCBhbmQgdXBkYXRlIHRoZSBzeW5jVHJlZVxuICAgICAgICAgKiBhbmQgaXRzIGNvcnJlc3BvbmRpbmcgc2VydmVyQ2FjaGUsIGluY2x1ZGluZyB0aGUgY2hpbGQgbG9jYXRpb24gd2hlcmUgYG9uVmFsdWVgIGlzIGNhbGxlZC4gVGhlbixcbiAgICAgICAgICogYG9uVmFsdWVgIHdpbGwgcmVjZWl2ZSB0aGUgZXZlbnQgZnJvbSB0aGUgc2VydmVyLCBidXQgbG9vayBhdCB0aGUgc3luY1RyZWUgYW5kIHNlZSB0aGF0IHRoZSBkYXRhIHJlY2VpdmVkXG4gICAgICAgICAqIGZyb20gdGhlIHNlcnZlciBpcyBhbHJlYWR5IGF0IHRoZSBTeW5jUG9pbnQsIGFuZCBzbyB0aGUgYG9uVmFsdWVgIGNhbGxiYWNrIHdpbGwgbmV2ZXIgZ2V0IGZpcmVkLlxuICAgICAgICAgKiBDYWxsaW5nIGBldmVudFF1ZXVlUmFpc2VFdmVudHNGb3JDaGFuZ2VkUGF0aCgpYCBpcyB0aGUgY29ycmVjdCB3YXkgdG8gcHJvcGFnYXRlIHRoZSBldmVudHMgYW5kXG4gICAgICAgICAqIGVuc3VyZSB0aGUgY29ycmVzcG9uZGluZyBjaGlsZCBldmVudHMgd2lsbCBnZXQgZmlyZWQuXG4gICAgICAgICAqL1xuICAgICAgICBldmVudFF1ZXVlUmFpc2VFdmVudHNGb3JDaGFuZ2VkUGF0aChyZXBvLmV2ZW50UXVldWVfLCBxdWVyeS5fcGF0aCwgZXZlbnRzKTtcbiAgICAgICAgc3luY1RyZWVSZW1vdmVFdmVudFJlZ2lzdHJhdGlvbihyZXBvLnNlcnZlclN5bmNUcmVlXywgcXVlcnksIGV2ZW50UmVnaXN0cmF0aW9uLCBudWxsLCB0cnVlKTtcbiAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfSwgZXJyID0+IHtcbiAgICAgICAgcmVwb0xvZyhyZXBvLCAnZ2V0IGZvciBxdWVyeSAnICsgc3RyaW5naWZ5KHF1ZXJ5KSArICcgZmFpbGVkOiAnICsgZXJyKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihlcnIpKTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIHJlcG9TZXRXaXRoUHJpb3JpdHkocmVwbywgcGF0aCwgbmV3VmFsLCBuZXdQcmlvcml0eSwgb25Db21wbGV0ZSkge1xuICAgIHJlcG9Mb2cocmVwbywgJ3NldCcsIHtcbiAgICAgICAgcGF0aDogcGF0aC50b1N0cmluZygpLFxuICAgICAgICB2YWx1ZTogbmV3VmFsLFxuICAgICAgICBwcmlvcml0eTogbmV3UHJpb3JpdHlcbiAgICB9KTtcbiAgICAvLyBUT0RPOiBPcHRpbWl6ZSB0aGlzIGJlaGF2aW9yIHRvIGVpdGhlciAoYSkgc3RvcmUgZmxhZyB0byBza2lwIHJlc29sdmluZyB3aGVyZSBwb3NzaWJsZSBhbmQgLyBvclxuICAgIC8vIChiKSBzdG9yZSB1bnJlc29sdmVkIHBhdGhzIG9uIEpTT04gcGFyc2VcbiAgICBjb25zdCBzZXJ2ZXJWYWx1ZXMgPSByZXBvR2VuZXJhdGVTZXJ2ZXJWYWx1ZXMocmVwbyk7XG4gICAgY29uc3QgbmV3Tm9kZVVucmVzb2x2ZWQgPSBub2RlRnJvbUpTT04obmV3VmFsLCBuZXdQcmlvcml0eSk7XG4gICAgY29uc3QgZXhpc3RpbmcgPSBzeW5jVHJlZUNhbGNDb21wbGV0ZUV2ZW50Q2FjaGUocmVwby5zZXJ2ZXJTeW5jVHJlZV8sIHBhdGgpO1xuICAgIGNvbnN0IG5ld05vZGUgPSByZXNvbHZlRGVmZXJyZWRWYWx1ZVNuYXBzaG90KG5ld05vZGVVbnJlc29sdmVkLCBleGlzdGluZywgc2VydmVyVmFsdWVzKTtcbiAgICBjb25zdCB3cml0ZUlkID0gcmVwb0dldE5leHRXcml0ZUlkKHJlcG8pO1xuICAgIGNvbnN0IGV2ZW50cyA9IHN5bmNUcmVlQXBwbHlVc2VyT3ZlcndyaXRlKHJlcG8uc2VydmVyU3luY1RyZWVfLCBwYXRoLCBuZXdOb2RlLCB3cml0ZUlkLCB0cnVlKTtcbiAgICBldmVudFF1ZXVlUXVldWVFdmVudHMocmVwby5ldmVudFF1ZXVlXywgZXZlbnRzKTtcbiAgICByZXBvLnNlcnZlcl8ucHV0KHBhdGgudG9TdHJpbmcoKSwgbmV3Tm9kZVVucmVzb2x2ZWQudmFsKC8qZXhwb3J0PSovIHRydWUpLCAoc3RhdHVzLCBlcnJvclJlYXNvbikgPT4ge1xuICAgICAgICBjb25zdCBzdWNjZXNzID0gc3RhdHVzID09PSAnb2snO1xuICAgICAgICBpZiAoIXN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIHdhcm4oJ3NldCBhdCAnICsgcGF0aCArICcgZmFpbGVkOiAnICsgc3RhdHVzKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjbGVhckV2ZW50cyA9IHN5bmNUcmVlQWNrVXNlcldyaXRlKHJlcG8uc2VydmVyU3luY1RyZWVfLCB3cml0ZUlkLCAhc3VjY2Vzcyk7XG4gICAgICAgIGV2ZW50UXVldWVSYWlzZUV2ZW50c0ZvckNoYW5nZWRQYXRoKHJlcG8uZXZlbnRRdWV1ZV8sIHBhdGgsIGNsZWFyRXZlbnRzKTtcbiAgICAgICAgcmVwb0NhbGxPbkNvbXBsZXRlQ2FsbGJhY2socmVwbywgb25Db21wbGV0ZSwgc3RhdHVzLCBlcnJvclJlYXNvbik7XG4gICAgfSk7XG4gICAgY29uc3QgYWZmZWN0ZWRQYXRoID0gcmVwb0Fib3J0VHJhbnNhY3Rpb25zKHJlcG8sIHBhdGgpO1xuICAgIHJlcG9SZXJ1blRyYW5zYWN0aW9ucyhyZXBvLCBhZmZlY3RlZFBhdGgpO1xuICAgIC8vIFdlIHF1ZXVlZCB0aGUgZXZlbnRzIGFib3ZlLCBzbyBqdXN0IGZsdXNoIHRoZSBxdWV1ZSBoZXJlXG4gICAgZXZlbnRRdWV1ZVJhaXNlRXZlbnRzRm9yQ2hhbmdlZFBhdGgocmVwby5ldmVudFF1ZXVlXywgYWZmZWN0ZWRQYXRoLCBbXSk7XG59XG5mdW5jdGlvbiByZXBvVXBkYXRlKHJlcG8sIHBhdGgsIGNoaWxkcmVuVG9NZXJnZSwgb25Db21wbGV0ZSkge1xuICAgIHJlcG9Mb2cocmVwbywgJ3VwZGF0ZScsIHsgcGF0aDogcGF0aC50b1N0cmluZygpLCB2YWx1ZTogY2hpbGRyZW5Ub01lcmdlIH0pO1xuICAgIC8vIFN0YXJ0IHdpdGggb3VyIGV4aXN0aW5nIGRhdGEgYW5kIG1lcmdlIGVhY2ggY2hpbGQgaW50byBpdC5cbiAgICBsZXQgZW1wdHkgPSB0cnVlO1xuICAgIGNvbnN0IHNlcnZlclZhbHVlcyA9IHJlcG9HZW5lcmF0ZVNlcnZlclZhbHVlcyhyZXBvKTtcbiAgICBjb25zdCBjaGFuZ2VkQ2hpbGRyZW4gPSB7fTtcbiAgICBlYWNoKGNoaWxkcmVuVG9NZXJnZSwgKGNoYW5nZWRLZXksIGNoYW5nZWRWYWx1ZSkgPT4ge1xuICAgICAgICBlbXB0eSA9IGZhbHNlO1xuICAgICAgICBjaGFuZ2VkQ2hpbGRyZW5bY2hhbmdlZEtleV0gPSByZXNvbHZlRGVmZXJyZWRWYWx1ZVRyZWUocGF0aENoaWxkKHBhdGgsIGNoYW5nZWRLZXkpLCBub2RlRnJvbUpTT04oY2hhbmdlZFZhbHVlKSwgcmVwby5zZXJ2ZXJTeW5jVHJlZV8sIHNlcnZlclZhbHVlcyk7XG4gICAgfSk7XG4gICAgaWYgKCFlbXB0eSkge1xuICAgICAgICBjb25zdCB3cml0ZUlkID0gcmVwb0dldE5leHRXcml0ZUlkKHJlcG8pO1xuICAgICAgICBjb25zdCBldmVudHMgPSBzeW5jVHJlZUFwcGx5VXNlck1lcmdlKHJlcG8uc2VydmVyU3luY1RyZWVfLCBwYXRoLCBjaGFuZ2VkQ2hpbGRyZW4sIHdyaXRlSWQpO1xuICAgICAgICBldmVudFF1ZXVlUXVldWVFdmVudHMocmVwby5ldmVudFF1ZXVlXywgZXZlbnRzKTtcbiAgICAgICAgcmVwby5zZXJ2ZXJfLm1lcmdlKHBhdGgudG9TdHJpbmcoKSwgY2hpbGRyZW5Ub01lcmdlLCAoc3RhdHVzLCBlcnJvclJlYXNvbikgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3VjY2VzcyA9IHN0YXR1cyA9PT0gJ29rJztcbiAgICAgICAgICAgIGlmICghc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIHdhcm4oJ3VwZGF0ZSBhdCAnICsgcGF0aCArICcgZmFpbGVkOiAnICsgc3RhdHVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNsZWFyRXZlbnRzID0gc3luY1RyZWVBY2tVc2VyV3JpdGUocmVwby5zZXJ2ZXJTeW5jVHJlZV8sIHdyaXRlSWQsICFzdWNjZXNzKTtcbiAgICAgICAgICAgIGNvbnN0IGFmZmVjdGVkUGF0aCA9IGNsZWFyRXZlbnRzLmxlbmd0aCA+IDAgPyByZXBvUmVydW5UcmFuc2FjdGlvbnMocmVwbywgcGF0aCkgOiBwYXRoO1xuICAgICAgICAgICAgZXZlbnRRdWV1ZVJhaXNlRXZlbnRzRm9yQ2hhbmdlZFBhdGgocmVwby5ldmVudFF1ZXVlXywgYWZmZWN0ZWRQYXRoLCBjbGVhckV2ZW50cyk7XG4gICAgICAgICAgICByZXBvQ2FsbE9uQ29tcGxldGVDYWxsYmFjayhyZXBvLCBvbkNvbXBsZXRlLCBzdGF0dXMsIGVycm9yUmVhc29uKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGVhY2goY2hpbGRyZW5Ub01lcmdlLCAoY2hhbmdlZFBhdGgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGFmZmVjdGVkUGF0aCA9IHJlcG9BYm9ydFRyYW5zYWN0aW9ucyhyZXBvLCBwYXRoQ2hpbGQocGF0aCwgY2hhbmdlZFBhdGgpKTtcbiAgICAgICAgICAgIHJlcG9SZXJ1blRyYW5zYWN0aW9ucyhyZXBvLCBhZmZlY3RlZFBhdGgpO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gV2UgcXVldWVkIHRoZSBldmVudHMgYWJvdmUsIHNvIGp1c3QgZmx1c2ggdGhlIHF1ZXVlIGhlcmVcbiAgICAgICAgZXZlbnRRdWV1ZVJhaXNlRXZlbnRzRm9yQ2hhbmdlZFBhdGgocmVwby5ldmVudFF1ZXVlXywgcGF0aCwgW10pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbG9nKFwidXBkYXRlKCkgY2FsbGVkIHdpdGggZW1wdHkgZGF0YS4gIERvbid0IGRvIGFueXRoaW5nLlwiKTtcbiAgICAgICAgcmVwb0NhbGxPbkNvbXBsZXRlQ2FsbGJhY2socmVwbywgb25Db21wbGV0ZSwgJ29rJywgdW5kZWZpbmVkKTtcbiAgICB9XG59XG4vKipcbiAqIEFwcGxpZXMgYWxsIG9mIHRoZSBjaGFuZ2VzIHN0b3JlZCB1cCBpbiB0aGUgb25EaXNjb25uZWN0XyB0cmVlLlxuICovXG5mdW5jdGlvbiByZXBvUnVuT25EaXNjb25uZWN0RXZlbnRzKHJlcG8pIHtcbiAgICByZXBvTG9nKHJlcG8sICdvbkRpc2Nvbm5lY3RFdmVudHMnKTtcbiAgICBjb25zdCBzZXJ2ZXJWYWx1ZXMgPSByZXBvR2VuZXJhdGVTZXJ2ZXJWYWx1ZXMocmVwbyk7XG4gICAgY29uc3QgcmVzb2x2ZWRPbkRpc2Nvbm5lY3RUcmVlID0gbmV3U3BhcnNlU25hcHNob3RUcmVlKCk7XG4gICAgc3BhcnNlU25hcHNob3RUcmVlRm9yRWFjaFRyZWUocmVwby5vbkRpc2Nvbm5lY3RfLCBuZXdFbXB0eVBhdGgoKSwgKHBhdGgsIG5vZGUpID0+IHtcbiAgICAgICAgY29uc3QgcmVzb2x2ZWQgPSByZXNvbHZlRGVmZXJyZWRWYWx1ZVRyZWUocGF0aCwgbm9kZSwgcmVwby5zZXJ2ZXJTeW5jVHJlZV8sIHNlcnZlclZhbHVlcyk7XG4gICAgICAgIHNwYXJzZVNuYXBzaG90VHJlZVJlbWVtYmVyKHJlc29sdmVkT25EaXNjb25uZWN0VHJlZSwgcGF0aCwgcmVzb2x2ZWQpO1xuICAgIH0pO1xuICAgIGxldCBldmVudHMgPSBbXTtcbiAgICBzcGFyc2VTbmFwc2hvdFRyZWVGb3JFYWNoVHJlZShyZXNvbHZlZE9uRGlzY29ubmVjdFRyZWUsIG5ld0VtcHR5UGF0aCgpLCAocGF0aCwgc25hcCkgPT4ge1xuICAgICAgICBldmVudHMgPSBldmVudHMuY29uY2F0KHN5bmNUcmVlQXBwbHlTZXJ2ZXJPdmVyd3JpdGUocmVwby5zZXJ2ZXJTeW5jVHJlZV8sIHBhdGgsIHNuYXApKTtcbiAgICAgICAgY29uc3QgYWZmZWN0ZWRQYXRoID0gcmVwb0Fib3J0VHJhbnNhY3Rpb25zKHJlcG8sIHBhdGgpO1xuICAgICAgICByZXBvUmVydW5UcmFuc2FjdGlvbnMocmVwbywgYWZmZWN0ZWRQYXRoKTtcbiAgICB9KTtcbiAgICByZXBvLm9uRGlzY29ubmVjdF8gPSBuZXdTcGFyc2VTbmFwc2hvdFRyZWUoKTtcbiAgICBldmVudFF1ZXVlUmFpc2VFdmVudHNGb3JDaGFuZ2VkUGF0aChyZXBvLmV2ZW50UXVldWVfLCBuZXdFbXB0eVBhdGgoKSwgZXZlbnRzKTtcbn1cbmZ1bmN0aW9uIHJlcG9PbkRpc2Nvbm5lY3RDYW5jZWwocmVwbywgcGF0aCwgb25Db21wbGV0ZSkge1xuICAgIHJlcG8uc2VydmVyXy5vbkRpc2Nvbm5lY3RDYW5jZWwocGF0aC50b1N0cmluZygpLCAoc3RhdHVzLCBlcnJvclJlYXNvbikgPT4ge1xuICAgICAgICBpZiAoc3RhdHVzID09PSAnb2snKSB7XG4gICAgICAgICAgICBzcGFyc2VTbmFwc2hvdFRyZWVGb3JnZXQocmVwby5vbkRpc2Nvbm5lY3RfLCBwYXRoKTtcbiAgICAgICAgfVxuICAgICAgICByZXBvQ2FsbE9uQ29tcGxldGVDYWxsYmFjayhyZXBvLCBvbkNvbXBsZXRlLCBzdGF0dXMsIGVycm9yUmVhc29uKTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIHJlcG9PbkRpc2Nvbm5lY3RTZXQocmVwbywgcGF0aCwgdmFsdWUsIG9uQ29tcGxldGUpIHtcbiAgICBjb25zdCBuZXdOb2RlID0gbm9kZUZyb21KU09OKHZhbHVlKTtcbiAgICByZXBvLnNlcnZlcl8ub25EaXNjb25uZWN0UHV0KHBhdGgudG9TdHJpbmcoKSwgbmV3Tm9kZS52YWwoLypleHBvcnQ9Ki8gdHJ1ZSksIChzdGF0dXMsIGVycm9yUmVhc29uKSA9PiB7XG4gICAgICAgIGlmIChzdGF0dXMgPT09ICdvaycpIHtcbiAgICAgICAgICAgIHNwYXJzZVNuYXBzaG90VHJlZVJlbWVtYmVyKHJlcG8ub25EaXNjb25uZWN0XywgcGF0aCwgbmV3Tm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmVwb0NhbGxPbkNvbXBsZXRlQ2FsbGJhY2socmVwbywgb25Db21wbGV0ZSwgc3RhdHVzLCBlcnJvclJlYXNvbik7XG4gICAgfSk7XG59XG5mdW5jdGlvbiByZXBvT25EaXNjb25uZWN0U2V0V2l0aFByaW9yaXR5KHJlcG8sIHBhdGgsIHZhbHVlLCBwcmlvcml0eSwgb25Db21wbGV0ZSkge1xuICAgIGNvbnN0IG5ld05vZGUgPSBub2RlRnJvbUpTT04odmFsdWUsIHByaW9yaXR5KTtcbiAgICByZXBvLnNlcnZlcl8ub25EaXNjb25uZWN0UHV0KHBhdGgudG9TdHJpbmcoKSwgbmV3Tm9kZS52YWwoLypleHBvcnQ9Ki8gdHJ1ZSksIChzdGF0dXMsIGVycm9yUmVhc29uKSA9PiB7XG4gICAgICAgIGlmIChzdGF0dXMgPT09ICdvaycpIHtcbiAgICAgICAgICAgIHNwYXJzZVNuYXBzaG90VHJlZVJlbWVtYmVyKHJlcG8ub25EaXNjb25uZWN0XywgcGF0aCwgbmV3Tm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmVwb0NhbGxPbkNvbXBsZXRlQ2FsbGJhY2socmVwbywgb25Db21wbGV0ZSwgc3RhdHVzLCBlcnJvclJlYXNvbik7XG4gICAgfSk7XG59XG5mdW5jdGlvbiByZXBvT25EaXNjb25uZWN0VXBkYXRlKHJlcG8sIHBhdGgsIGNoaWxkcmVuVG9NZXJnZSwgb25Db21wbGV0ZSkge1xuICAgIGlmIChpc0VtcHR5KGNoaWxkcmVuVG9NZXJnZSkpIHtcbiAgICAgICAgbG9nKFwib25EaXNjb25uZWN0KCkudXBkYXRlKCkgY2FsbGVkIHdpdGggZW1wdHkgZGF0YS4gIERvbid0IGRvIGFueXRoaW5nLlwiKTtcbiAgICAgICAgcmVwb0NhbGxPbkNvbXBsZXRlQ2FsbGJhY2socmVwbywgb25Db21wbGV0ZSwgJ29rJywgdW5kZWZpbmVkKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZXBvLnNlcnZlcl8ub25EaXNjb25uZWN0TWVyZ2UocGF0aC50b1N0cmluZygpLCBjaGlsZHJlblRvTWVyZ2UsIChzdGF0dXMsIGVycm9yUmVhc29uKSA9PiB7XG4gICAgICAgIGlmIChzdGF0dXMgPT09ICdvaycpIHtcbiAgICAgICAgICAgIGVhY2goY2hpbGRyZW5Ub01lcmdlLCAoY2hpbGROYW1lLCBjaGlsZE5vZGUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdDaGlsZE5vZGUgPSBub2RlRnJvbUpTT04oY2hpbGROb2RlKTtcbiAgICAgICAgICAgICAgICBzcGFyc2VTbmFwc2hvdFRyZWVSZW1lbWJlcihyZXBvLm9uRGlzY29ubmVjdF8sIHBhdGhDaGlsZChwYXRoLCBjaGlsZE5hbWUpLCBuZXdDaGlsZE5vZGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmVwb0NhbGxPbkNvbXBsZXRlQ2FsbGJhY2socmVwbywgb25Db21wbGV0ZSwgc3RhdHVzLCBlcnJvclJlYXNvbik7XG4gICAgfSk7XG59XG5mdW5jdGlvbiByZXBvQWRkRXZlbnRDYWxsYmFja0ZvclF1ZXJ5KHJlcG8sIHF1ZXJ5LCBldmVudFJlZ2lzdHJhdGlvbikge1xuICAgIGxldCBldmVudHM7XG4gICAgaWYgKHBhdGhHZXRGcm9udChxdWVyeS5fcGF0aCkgPT09ICcuaW5mbycpIHtcbiAgICAgICAgZXZlbnRzID0gc3luY1RyZWVBZGRFdmVudFJlZ2lzdHJhdGlvbihyZXBvLmluZm9TeW5jVHJlZV8sIHF1ZXJ5LCBldmVudFJlZ2lzdHJhdGlvbik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBldmVudHMgPSBzeW5jVHJlZUFkZEV2ZW50UmVnaXN0cmF0aW9uKHJlcG8uc2VydmVyU3luY1RyZWVfLCBxdWVyeSwgZXZlbnRSZWdpc3RyYXRpb24pO1xuICAgIH1cbiAgICBldmVudFF1ZXVlUmFpc2VFdmVudHNBdFBhdGgocmVwby5ldmVudFF1ZXVlXywgcXVlcnkuX3BhdGgsIGV2ZW50cyk7XG59XG5mdW5jdGlvbiByZXBvUmVtb3ZlRXZlbnRDYWxsYmFja0ZvclF1ZXJ5KHJlcG8sIHF1ZXJ5LCBldmVudFJlZ2lzdHJhdGlvbikge1xuICAgIC8vIFRoZXNlIGFyZSBndWFyYW50ZWVkIG5vdCB0byByYWlzZSBldmVudHMsIHNpbmNlIHdlJ3JlIG5vdCBwYXNzaW5nIGluIGEgY2FuY2VsRXJyb3IuIEhvd2V2ZXIsIHdlIGNhbiBmdXR1cmUtcHJvb2ZcbiAgICAvLyBhIGxpdHRsZSBiaXQgYnkgaGFuZGxpbmcgdGhlIHJldHVybiB2YWx1ZXMgYW55d2F5cy5cbiAgICBsZXQgZXZlbnRzO1xuICAgIGlmIChwYXRoR2V0RnJvbnQocXVlcnkuX3BhdGgpID09PSAnLmluZm8nKSB7XG4gICAgICAgIGV2ZW50cyA9IHN5bmNUcmVlUmVtb3ZlRXZlbnRSZWdpc3RyYXRpb24ocmVwby5pbmZvU3luY1RyZWVfLCBxdWVyeSwgZXZlbnRSZWdpc3RyYXRpb24pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZXZlbnRzID0gc3luY1RyZWVSZW1vdmVFdmVudFJlZ2lzdHJhdGlvbihyZXBvLnNlcnZlclN5bmNUcmVlXywgcXVlcnksIGV2ZW50UmVnaXN0cmF0aW9uKTtcbiAgICB9XG4gICAgZXZlbnRRdWV1ZVJhaXNlRXZlbnRzQXRQYXRoKHJlcG8uZXZlbnRRdWV1ZV8sIHF1ZXJ5Ll9wYXRoLCBldmVudHMpO1xufVxuZnVuY3Rpb24gcmVwb0ludGVycnVwdChyZXBvKSB7XG4gICAgaWYgKHJlcG8ucGVyc2lzdGVudENvbm5lY3Rpb25fKSB7XG4gICAgICAgIHJlcG8ucGVyc2lzdGVudENvbm5lY3Rpb25fLmludGVycnVwdChJTlRFUlJVUFRfUkVBU09OKTtcbiAgICB9XG59XG5mdW5jdGlvbiByZXBvUmVzdW1lKHJlcG8pIHtcbiAgICBpZiAocmVwby5wZXJzaXN0ZW50Q29ubmVjdGlvbl8pIHtcbiAgICAgICAgcmVwby5wZXJzaXN0ZW50Q29ubmVjdGlvbl8ucmVzdW1lKElOVEVSUlVQVF9SRUFTT04pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHJlcG9Mb2cocmVwbywgLi4udmFyQXJncykge1xuICAgIGxldCBwcmVmaXggPSAnJztcbiAgICBpZiAocmVwby5wZXJzaXN0ZW50Q29ubmVjdGlvbl8pIHtcbiAgICAgICAgcHJlZml4ID0gcmVwby5wZXJzaXN0ZW50Q29ubmVjdGlvbl8uaWQgKyAnOic7XG4gICAgfVxuICAgIGxvZyhwcmVmaXgsIC4uLnZhckFyZ3MpO1xufVxuZnVuY3Rpb24gcmVwb0NhbGxPbkNvbXBsZXRlQ2FsbGJhY2socmVwbywgY2FsbGJhY2ssIHN0YXR1cywgZXJyb3JSZWFzb24pIHtcbiAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgZXhjZXB0aW9uR3VhcmQoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gJ29rJykge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29kZSA9IChzdGF0dXMgfHwgJ2Vycm9yJykudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgICAgICBsZXQgbWVzc2FnZSA9IGNvZGU7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yUmVhc29uKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgKz0gJzogJyArIGVycm9yUmVhc29uO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgIGVycm9yLmNvZGUgPSBjb2RlO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHRyYW5zYWN0aW9uLCBhZGRzIGl0IHRvIHRoZSB0cmFuc2FjdGlvbnMgd2UncmUgdHJhY2tpbmcsIGFuZFxuICogc2VuZHMgaXQgdG8gdGhlIHNlcnZlciBpZiBwb3NzaWJsZS5cbiAqXG4gKiBAcGFyYW0gcGF0aCAtIFBhdGggYXQgd2hpY2ggdG8gZG8gdHJhbnNhY3Rpb24uXG4gKiBAcGFyYW0gdHJhbnNhY3Rpb25VcGRhdGUgLSBVcGRhdGUgY2FsbGJhY2suXG4gKiBAcGFyYW0gb25Db21wbGV0ZSAtIENvbXBsZXRpb24gY2FsbGJhY2suXG4gKiBAcGFyYW0gdW53YXRjaGVyIC0gRnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCB3aGVuIHRoZSB0cmFuc2FjdGlvbiBubyBsb25nZXJcbiAqIG5lZWQgZGF0YSB1cGRhdGVzIGZvciBgcGF0aGAuXG4gKiBAcGFyYW0gYXBwbHlMb2NhbGx5IC0gV2hldGhlciBvciBub3QgdG8gbWFrZSBpbnRlcm1lZGlhdGUgcmVzdWx0cyB2aXNpYmxlXG4gKi9cbmZ1bmN0aW9uIHJlcG9TdGFydFRyYW5zYWN0aW9uKHJlcG8sIHBhdGgsIHRyYW5zYWN0aW9uVXBkYXRlLCBvbkNvbXBsZXRlLCB1bndhdGNoZXIsIGFwcGx5TG9jYWxseSkge1xuICAgIHJlcG9Mb2cocmVwbywgJ3RyYW5zYWN0aW9uIG9uICcgKyBwYXRoKTtcbiAgICAvLyBJbml0aWFsaXplIHRyYW5zYWN0aW9uLlxuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0ge1xuICAgICAgICBwYXRoLFxuICAgICAgICB1cGRhdGU6IHRyYW5zYWN0aW9uVXBkYXRlLFxuICAgICAgICBvbkNvbXBsZXRlLFxuICAgICAgICAvLyBPbmUgb2YgVHJhbnNhY3Rpb25TdGF0dXMgZW51bXMuXG4gICAgICAgIHN0YXR1czogbnVsbCxcbiAgICAgICAgLy8gVXNlZCB3aGVuIGNvbWJpbmluZyB0cmFuc2FjdGlvbnMgYXQgZGlmZmVyZW50IGxvY2F0aW9ucyB0byBmaWd1cmUgb3V0XG4gICAgICAgIC8vIHdoaWNoIG9uZSBnb2VzIGZpcnN0LlxuICAgICAgICBvcmRlcjogTFVJREdlbmVyYXRvcigpLFxuICAgICAgICAvLyBXaGV0aGVyIHRvIHJhaXNlIGxvY2FsIGV2ZW50cyBmb3IgdGhpcyB0cmFuc2FjdGlvbi5cbiAgICAgICAgYXBwbHlMb2NhbGx5LFxuICAgICAgICAvLyBDb3VudCBvZiBob3cgbWFueSB0aW1lcyB3ZSd2ZSByZXRyaWVkIHRoZSB0cmFuc2FjdGlvbi5cbiAgICAgICAgcmV0cnlDb3VudDogMCxcbiAgICAgICAgLy8gRnVuY3Rpb24gdG8gY2FsbCB0byBjbGVhbiB1cCBvdXIgLm9uKCkgbGlzdGVuZXIuXG4gICAgICAgIHVud2F0Y2hlcixcbiAgICAgICAgLy8gU3RvcmVzIHdoeSBhIHRyYW5zYWN0aW9uIHdhcyBhYm9ydGVkLlxuICAgICAgICBhYm9ydFJlYXNvbjogbnVsbCxcbiAgICAgICAgY3VycmVudFdyaXRlSWQ6IG51bGwsXG4gICAgICAgIGN1cnJlbnRJbnB1dFNuYXBzaG90OiBudWxsLFxuICAgICAgICBjdXJyZW50T3V0cHV0U25hcHNob3RSYXc6IG51bGwsXG4gICAgICAgIGN1cnJlbnRPdXRwdXRTbmFwc2hvdFJlc29sdmVkOiBudWxsXG4gICAgfTtcbiAgICAvLyBSdW4gdHJhbnNhY3Rpb24gaW5pdGlhbGx5LlxuICAgIGNvbnN0IGN1cnJlbnRTdGF0ZSA9IHJlcG9HZXRMYXRlc3RTdGF0ZShyZXBvLCBwYXRoLCB1bmRlZmluZWQpO1xuICAgIHRyYW5zYWN0aW9uLmN1cnJlbnRJbnB1dFNuYXBzaG90ID0gY3VycmVudFN0YXRlO1xuICAgIGNvbnN0IG5ld1ZhbCA9IHRyYW5zYWN0aW9uLnVwZGF0ZShjdXJyZW50U3RhdGUudmFsKCkpO1xuICAgIGlmIChuZXdWYWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBBYm9ydCB0cmFuc2FjdGlvbi5cbiAgICAgICAgdHJhbnNhY3Rpb24udW53YXRjaGVyKCk7XG4gICAgICAgIHRyYW5zYWN0aW9uLmN1cnJlbnRPdXRwdXRTbmFwc2hvdFJhdyA9IG51bGw7XG4gICAgICAgIHRyYW5zYWN0aW9uLmN1cnJlbnRPdXRwdXRTbmFwc2hvdFJlc29sdmVkID0gbnVsbDtcbiAgICAgICAgaWYgKHRyYW5zYWN0aW9uLm9uQ29tcGxldGUpIHtcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uLm9uQ29tcGxldGUobnVsbCwgZmFsc2UsIHRyYW5zYWN0aW9uLmN1cnJlbnRJbnB1dFNuYXBzaG90KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFsaWRhdGVGaXJlYmFzZURhdGEoJ3RyYW5zYWN0aW9uIGZhaWxlZDogRGF0YSByZXR1cm5lZCAnLCBuZXdWYWwsIHRyYW5zYWN0aW9uLnBhdGgpO1xuICAgICAgICAvLyBNYXJrIGFzIHJ1biBhbmQgYWRkIHRvIG91ciBxdWV1ZS5cbiAgICAgICAgdHJhbnNhY3Rpb24uc3RhdHVzID0gMCAvKiBUcmFuc2FjdGlvblN0YXR1cy5SVU4gKi87XG4gICAgICAgIGNvbnN0IHF1ZXVlTm9kZSA9IHRyZWVTdWJUcmVlKHJlcG8udHJhbnNhY3Rpb25RdWV1ZVRyZWVfLCBwYXRoKTtcbiAgICAgICAgY29uc3Qgbm9kZVF1ZXVlID0gdHJlZUdldFZhbHVlKHF1ZXVlTm9kZSkgfHwgW107XG4gICAgICAgIG5vZGVRdWV1ZS5wdXNoKHRyYW5zYWN0aW9uKTtcbiAgICAgICAgdHJlZVNldFZhbHVlKHF1ZXVlTm9kZSwgbm9kZVF1ZXVlKTtcbiAgICAgICAgLy8gVXBkYXRlIHZpc2libGVEYXRhIGFuZCByYWlzZSBldmVudHNcbiAgICAgICAgLy8gTm90ZTogV2UgaW50ZW50aW9uYWxseSByYWlzZSBldmVudHMgYWZ0ZXIgdXBkYXRpbmcgYWxsIG9mIG91clxuICAgICAgICAvLyB0cmFuc2FjdGlvbiBzdGF0ZSwgc2luY2UgdGhlIHVzZXIgY291bGQgc3RhcnQgbmV3IHRyYW5zYWN0aW9ucyBmcm9tIHRoZVxuICAgICAgICAvLyBldmVudCBjYWxsYmFja3MuXG4gICAgICAgIGxldCBwcmlvcml0eUZvck5vZGU7XG4gICAgICAgIGlmICh0eXBlb2YgbmV3VmFsID09PSAnb2JqZWN0JyAmJlxuICAgICAgICAgICAgbmV3VmFsICE9PSBudWxsICYmXG4gICAgICAgICAgICBjb250YWlucyhuZXdWYWwsICcucHJpb3JpdHknKSkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgIHByaW9yaXR5Rm9yTm9kZSA9IHNhZmVHZXQobmV3VmFsLCAnLnByaW9yaXR5Jyk7XG4gICAgICAgICAgICBhc3NlcnQoaXNWYWxpZFByaW9yaXR5KHByaW9yaXR5Rm9yTm9kZSksICdJbnZhbGlkIHByaW9yaXR5IHJldHVybmVkIGJ5IHRyYW5zYWN0aW9uLiAnICtcbiAgICAgICAgICAgICAgICAnUHJpb3JpdHkgbXVzdCBiZSBhIHZhbGlkIHN0cmluZywgZmluaXRlIG51bWJlciwgc2VydmVyIHZhbHVlLCBvciBudWxsLicpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudE5vZGUgPSBzeW5jVHJlZUNhbGNDb21wbGV0ZUV2ZW50Q2FjaGUocmVwby5zZXJ2ZXJTeW5jVHJlZV8sIHBhdGgpIHx8XG4gICAgICAgICAgICAgICAgQ2hpbGRyZW5Ob2RlLkVNUFRZX05PREU7XG4gICAgICAgICAgICBwcmlvcml0eUZvck5vZGUgPSBjdXJyZW50Tm9kZS5nZXRQcmlvcml0eSgpLnZhbCgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNlcnZlclZhbHVlcyA9IHJlcG9HZW5lcmF0ZVNlcnZlclZhbHVlcyhyZXBvKTtcbiAgICAgICAgY29uc3QgbmV3Tm9kZVVucmVzb2x2ZWQgPSBub2RlRnJvbUpTT04obmV3VmFsLCBwcmlvcml0eUZvck5vZGUpO1xuICAgICAgICBjb25zdCBuZXdOb2RlID0gcmVzb2x2ZURlZmVycmVkVmFsdWVTbmFwc2hvdChuZXdOb2RlVW5yZXNvbHZlZCwgY3VycmVudFN0YXRlLCBzZXJ2ZXJWYWx1ZXMpO1xuICAgICAgICB0cmFuc2FjdGlvbi5jdXJyZW50T3V0cHV0U25hcHNob3RSYXcgPSBuZXdOb2RlVW5yZXNvbHZlZDtcbiAgICAgICAgdHJhbnNhY3Rpb24uY3VycmVudE91dHB1dFNuYXBzaG90UmVzb2x2ZWQgPSBuZXdOb2RlO1xuICAgICAgICB0cmFuc2FjdGlvbi5jdXJyZW50V3JpdGVJZCA9IHJlcG9HZXROZXh0V3JpdGVJZChyZXBvKTtcbiAgICAgICAgY29uc3QgZXZlbnRzID0gc3luY1RyZWVBcHBseVVzZXJPdmVyd3JpdGUocmVwby5zZXJ2ZXJTeW5jVHJlZV8sIHBhdGgsIG5ld05vZGUsIHRyYW5zYWN0aW9uLmN1cnJlbnRXcml0ZUlkLCB0cmFuc2FjdGlvbi5hcHBseUxvY2FsbHkpO1xuICAgICAgICBldmVudFF1ZXVlUmFpc2VFdmVudHNGb3JDaGFuZ2VkUGF0aChyZXBvLmV2ZW50UXVldWVfLCBwYXRoLCBldmVudHMpO1xuICAgICAgICByZXBvU2VuZFJlYWR5VHJhbnNhY3Rpb25zKHJlcG8sIHJlcG8udHJhbnNhY3Rpb25RdWV1ZVRyZWVfKTtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSBleGNsdWRlU2V0cyAtIEEgc3BlY2lmaWMgc2V0IHRvIGV4Y2x1ZGVcbiAqL1xuZnVuY3Rpb24gcmVwb0dldExhdGVzdFN0YXRlKHJlcG8sIHBhdGgsIGV4Y2x1ZGVTZXRzKSB7XG4gICAgcmV0dXJuIChzeW5jVHJlZUNhbGNDb21wbGV0ZUV2ZW50Q2FjaGUocmVwby5zZXJ2ZXJTeW5jVHJlZV8sIHBhdGgsIGV4Y2x1ZGVTZXRzKSB8fFxuICAgICAgICBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERSk7XG59XG4vKipcbiAqIFNlbmRzIGFueSBhbHJlYWR5LXJ1biB0cmFuc2FjdGlvbnMgdGhhdCBhcmVuJ3Qgd2FpdGluZyBmb3Igb3V0c3RhbmRpbmdcbiAqIHRyYW5zYWN0aW9ucyB0byBjb21wbGV0ZS5cbiAqXG4gKiBFeHRlcm5hbGx5IGl0J3MgY2FsbGVkIHdpdGggbm8gYXJndW1lbnRzLCBidXQgaXQgY2FsbHMgaXRzZWxmIHJlY3Vyc2l2ZWx5XG4gKiB3aXRoIGEgcGFydGljdWxhciB0cmFuc2FjdGlvblF1ZXVlVHJlZSBub2RlIHRvIHJlY3Vyc2UgdGhyb3VnaCB0aGUgdHJlZS5cbiAqXG4gKiBAcGFyYW0gbm9kZSAtIHRyYW5zYWN0aW9uUXVldWVUcmVlIG5vZGUgdG8gc3RhcnQgYXQuXG4gKi9cbmZ1bmN0aW9uIHJlcG9TZW5kUmVhZHlUcmFuc2FjdGlvbnMocmVwbywgbm9kZSA9IHJlcG8udHJhbnNhY3Rpb25RdWV1ZVRyZWVfKSB7XG4gICAgLy8gQmVmb3JlIHJlY3Vyc2luZywgbWFrZSBzdXJlIGFueSBjb21wbGV0ZWQgdHJhbnNhY3Rpb25zIGFyZSByZW1vdmVkLlxuICAgIGlmICghbm9kZSkge1xuICAgICAgICByZXBvUHJ1bmVDb21wbGV0ZWRUcmFuc2FjdGlvbnNCZWxvd05vZGUocmVwbywgbm9kZSk7XG4gICAgfVxuICAgIGlmICh0cmVlR2V0VmFsdWUobm9kZSkpIHtcbiAgICAgICAgY29uc3QgcXVldWUgPSByZXBvQnVpbGRUcmFuc2FjdGlvblF1ZXVlKHJlcG8sIG5vZGUpO1xuICAgICAgICBhc3NlcnQocXVldWUubGVuZ3RoID4gMCwgJ1NlbmRpbmcgemVybyBsZW5ndGggdHJhbnNhY3Rpb24gcXVldWUnKTtcbiAgICAgICAgY29uc3QgYWxsUnVuID0gcXVldWUuZXZlcnkoKHRyYW5zYWN0aW9uKSA9PiB0cmFuc2FjdGlvbi5zdGF0dXMgPT09IDAgLyogVHJhbnNhY3Rpb25TdGF0dXMuUlVOICovKTtcbiAgICAgICAgLy8gSWYgdGhleSdyZSBhbGwgcnVuIChhbmQgbm90IHNlbnQpLCB3ZSBjYW4gc2VuZCB0aGVtLiAgRWxzZSwgd2UgbXVzdCB3YWl0LlxuICAgICAgICBpZiAoYWxsUnVuKSB7XG4gICAgICAgICAgICByZXBvU2VuZFRyYW5zYWN0aW9uUXVldWUocmVwbywgdHJlZUdldFBhdGgobm9kZSksIHF1ZXVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICh0cmVlSGFzQ2hpbGRyZW4obm9kZSkpIHtcbiAgICAgICAgdHJlZUZvckVhY2hDaGlsZChub2RlLCBjaGlsZE5vZGUgPT4ge1xuICAgICAgICAgICAgcmVwb1NlbmRSZWFkeVRyYW5zYWN0aW9ucyhyZXBvLCBjaGlsZE5vZGUpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4vKipcbiAqIEdpdmVuIGEgbGlzdCBvZiBydW4gdHJhbnNhY3Rpb25zLCBzZW5kIHRoZW0gdG8gdGhlIHNlcnZlciBhbmQgdGhlbiBoYW5kbGVcbiAqIHRoZSByZXN1bHQgKHN1Y2Nlc3Mgb3IgZmFpbHVyZSkuXG4gKlxuICogQHBhcmFtIHBhdGggLSBUaGUgbG9jYXRpb24gb2YgdGhlIHF1ZXVlLlxuICogQHBhcmFtIHF1ZXVlIC0gUXVldWUgb2YgdHJhbnNhY3Rpb25zIHVuZGVyIHRoZSBzcGVjaWZpZWQgbG9jYXRpb24uXG4gKi9cbmZ1bmN0aW9uIHJlcG9TZW5kVHJhbnNhY3Rpb25RdWV1ZShyZXBvLCBwYXRoLCBxdWV1ZSkge1xuICAgIC8vIE1hcmsgdHJhbnNhY3Rpb25zIGFzIHNlbnQgYW5kIGluY3JlbWVudCByZXRyeSBjb3VudCFcbiAgICBjb25zdCBzZXRzVG9JZ25vcmUgPSBxdWV1ZS5tYXAodHhuID0+IHtcbiAgICAgICAgcmV0dXJuIHR4bi5jdXJyZW50V3JpdGVJZDtcbiAgICB9KTtcbiAgICBjb25zdCBsYXRlc3RTdGF0ZSA9IHJlcG9HZXRMYXRlc3RTdGF0ZShyZXBvLCBwYXRoLCBzZXRzVG9JZ25vcmUpO1xuICAgIGxldCBzbmFwVG9TZW5kID0gbGF0ZXN0U3RhdGU7XG4gICAgY29uc3QgbGF0ZXN0SGFzaCA9IGxhdGVzdFN0YXRlLmhhc2goKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHR4biA9IHF1ZXVlW2ldO1xuICAgICAgICBhc3NlcnQodHhuLnN0YXR1cyA9PT0gMCAvKiBUcmFuc2FjdGlvblN0YXR1cy5SVU4gKi8sICd0cnlUb1NlbmRUcmFuc2FjdGlvblF1ZXVlXzogaXRlbXMgaW4gcXVldWUgc2hvdWxkIGFsbCBiZSBydW4uJyk7XG4gICAgICAgIHR4bi5zdGF0dXMgPSAxIC8qIFRyYW5zYWN0aW9uU3RhdHVzLlNFTlQgKi87XG4gICAgICAgIHR4bi5yZXRyeUNvdW50Kys7XG4gICAgICAgIGNvbnN0IHJlbGF0aXZlUGF0aCA9IG5ld1JlbGF0aXZlUGF0aChwYXRoLCB0eG4ucGF0aCk7XG4gICAgICAgIC8vIElmIHdlJ3ZlIGdvdHRlbiB0byB0aGlzIHBvaW50LCB0aGUgb3V0cHV0IHNuYXBzaG90IG11c3QgYmUgZGVmaW5lZC5cbiAgICAgICAgc25hcFRvU2VuZCA9IHNuYXBUb1NlbmQudXBkYXRlQ2hpbGQocmVsYXRpdmVQYXRoIC8qKiBAdHlwZSB7IU5vZGV9ICovLCB0eG4uY3VycmVudE91dHB1dFNuYXBzaG90UmF3KTtcbiAgICB9XG4gICAgY29uc3QgZGF0YVRvU2VuZCA9IHNuYXBUb1NlbmQudmFsKHRydWUpO1xuICAgIGNvbnN0IHBhdGhUb1NlbmQgPSBwYXRoO1xuICAgIC8vIFNlbmQgdGhlIHB1dC5cbiAgICByZXBvLnNlcnZlcl8ucHV0KHBhdGhUb1NlbmQudG9TdHJpbmcoKSwgZGF0YVRvU2VuZCwgKHN0YXR1cykgPT4ge1xuICAgICAgICByZXBvTG9nKHJlcG8sICd0cmFuc2FjdGlvbiBwdXQgcmVzcG9uc2UnLCB7XG4gICAgICAgICAgICBwYXRoOiBwYXRoVG9TZW5kLnRvU3RyaW5nKCksXG4gICAgICAgICAgICBzdGF0dXNcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBldmVudHMgPSBbXTtcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gJ29rJykge1xuICAgICAgICAgICAgLy8gUXVldWUgdXAgdGhlIGNhbGxiYWNrcyBhbmQgZmlyZSB0aGVtIGFmdGVyIGNsZWFuaW5nIHVwIGFsbCBvZiBvdXJcbiAgICAgICAgICAgIC8vIHRyYW5zYWN0aW9uIHN0YXRlLCBzaW5jZSB0aGUgY2FsbGJhY2sgY291bGQgdHJpZ2dlciBtb3JlXG4gICAgICAgICAgICAvLyB0cmFuc2FjdGlvbnMgb3Igc2V0cy5cbiAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrcyA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBxdWV1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHF1ZXVlW2ldLnN0YXR1cyA9IDIgLyogVHJhbnNhY3Rpb25TdGF0dXMuQ09NUExFVEVEICovO1xuICAgICAgICAgICAgICAgIGV2ZW50cyA9IGV2ZW50cy5jb25jYXQoc3luY1RyZWVBY2tVc2VyV3JpdGUocmVwby5zZXJ2ZXJTeW5jVHJlZV8sIHF1ZXVlW2ldLmN1cnJlbnRXcml0ZUlkKSk7XG4gICAgICAgICAgICAgICAgaWYgKHF1ZXVlW2ldLm9uQ29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgbmV2ZXIgdW5zZXQgdGhlIG91dHB1dCBzbmFwc2hvdCwgYW5kIGdpdmVuIHRoYXQgdGhpc1xuICAgICAgICAgICAgICAgICAgICAvLyB0cmFuc2FjdGlvbiBpcyBjb21wbGV0ZSwgaXQgc2hvdWxkIGJlIHNldFxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3MucHVzaCgoKSA9PiBxdWV1ZVtpXS5vbkNvbXBsZXRlKG51bGwsIHRydWUsIHF1ZXVlW2ldLmN1cnJlbnRPdXRwdXRTbmFwc2hvdFJlc29sdmVkKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHF1ZXVlW2ldLnVud2F0Y2hlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gTm93IHJlbW92ZSB0aGUgY29tcGxldGVkIHRyYW5zYWN0aW9ucy5cbiAgICAgICAgICAgIHJlcG9QcnVuZUNvbXBsZXRlZFRyYW5zYWN0aW9uc0JlbG93Tm9kZShyZXBvLCB0cmVlU3ViVHJlZShyZXBvLnRyYW5zYWN0aW9uUXVldWVUcmVlXywgcGF0aCkpO1xuICAgICAgICAgICAgLy8gVGhlcmUgbWF5IGJlIHBlbmRpbmcgdHJhbnNhY3Rpb25zIHRoYXQgd2UgY2FuIG5vdyBzZW5kLlxuICAgICAgICAgICAgcmVwb1NlbmRSZWFkeVRyYW5zYWN0aW9ucyhyZXBvLCByZXBvLnRyYW5zYWN0aW9uUXVldWVUcmVlXyk7XG4gICAgICAgICAgICBldmVudFF1ZXVlUmFpc2VFdmVudHNGb3JDaGFuZ2VkUGF0aChyZXBvLmV2ZW50UXVldWVfLCBwYXRoLCBldmVudHMpO1xuICAgICAgICAgICAgLy8gRmluYWxseSwgdHJpZ2dlciBvbkNvbXBsZXRlIGNhbGxiYWNrcy5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZXhjZXB0aW9uR3VhcmQoY2FsbGJhY2tzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIHRyYW5zYWN0aW9ucyBhcmUgbm8gbG9uZ2VyIHNlbnQuICBVcGRhdGUgdGhlaXIgc3RhdHVzIGFwcHJvcHJpYXRlbHkuXG4gICAgICAgICAgICBpZiAoc3RhdHVzID09PSAnZGF0YXN0YWxlJykge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHF1ZXVlW2ldLnN0YXR1cyA9PT0gMyAvKiBUcmFuc2FjdGlvblN0YXR1cy5TRU5UX05FRURTX0FCT1JUICovKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBxdWV1ZVtpXS5zdGF0dXMgPSA0IC8qIFRyYW5zYWN0aW9uU3RhdHVzLk5FRURTX0FCT1JUICovO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcXVldWVbaV0uc3RhdHVzID0gMCAvKiBUcmFuc2FjdGlvblN0YXR1cy5SVU4gKi87XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB3YXJuKCd0cmFuc2FjdGlvbiBhdCAnICsgcGF0aFRvU2VuZC50b1N0cmluZygpICsgJyBmYWlsZWQ6ICcgKyBzdGF0dXMpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgcXVldWVbaV0uc3RhdHVzID0gNCAvKiBUcmFuc2FjdGlvblN0YXR1cy5ORUVEU19BQk9SVCAqLztcbiAgICAgICAgICAgICAgICAgICAgcXVldWVbaV0uYWJvcnRSZWFzb24gPSBzdGF0dXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVwb1JlcnVuVHJhbnNhY3Rpb25zKHJlcG8sIHBhdGgpO1xuICAgICAgICB9XG4gICAgfSwgbGF0ZXN0SGFzaCk7XG59XG4vKipcbiAqIEZpbmRzIGFsbCB0cmFuc2FjdGlvbnMgZGVwZW5kZW50IG9uIHRoZSBkYXRhIGF0IGNoYW5nZWRQYXRoIGFuZCByZXJ1bnMgdGhlbS5cbiAqXG4gKiBTaG91bGQgYmUgY2FsbGVkIGFueSB0aW1lIGNhY2hlZCBkYXRhIGNoYW5nZXMuXG4gKlxuICogUmV0dXJuIHRoZSBoaWdoZXN0IHBhdGggdGhhdCB3YXMgYWZmZWN0ZWQgYnkgcmVydW5uaW5nIHRyYW5zYWN0aW9ucy4gVGhpc1xuICogaXMgdGhlIHBhdGggYXQgd2hpY2ggZXZlbnRzIG5lZWQgdG8gYmUgcmFpc2VkIGZvci5cbiAqXG4gKiBAcGFyYW0gY2hhbmdlZFBhdGggLSBUaGUgcGF0aCBpbiBtZXJnZWREYXRhIHRoYXQgY2hhbmdlZC5cbiAqIEByZXR1cm5zIFRoZSByb290bW9zdCBwYXRoIHRoYXQgd2FzIGFmZmVjdGVkIGJ5IHJlcnVubmluZyB0cmFuc2FjdGlvbnMuXG4gKi9cbmZ1bmN0aW9uIHJlcG9SZXJ1blRyYW5zYWN0aW9ucyhyZXBvLCBjaGFuZ2VkUGF0aCkge1xuICAgIGNvbnN0IHJvb3RNb3N0VHJhbnNhY3Rpb25Ob2RlID0gcmVwb0dldEFuY2VzdG9yVHJhbnNhY3Rpb25Ob2RlKHJlcG8sIGNoYW5nZWRQYXRoKTtcbiAgICBjb25zdCBwYXRoID0gdHJlZUdldFBhdGgocm9vdE1vc3RUcmFuc2FjdGlvbk5vZGUpO1xuICAgIGNvbnN0IHF1ZXVlID0gcmVwb0J1aWxkVHJhbnNhY3Rpb25RdWV1ZShyZXBvLCByb290TW9zdFRyYW5zYWN0aW9uTm9kZSk7XG4gICAgcmVwb1JlcnVuVHJhbnNhY3Rpb25RdWV1ZShyZXBvLCBxdWV1ZSwgcGF0aCk7XG4gICAgcmV0dXJuIHBhdGg7XG59XG4vKipcbiAqIERvZXMgYWxsIHRoZSB3b3JrIG9mIHJlcnVubmluZyB0cmFuc2FjdGlvbnMgKGFzIHdlbGwgYXMgY2xlYW5zIHVwIGFib3J0ZWRcbiAqIHRyYW5zYWN0aW9ucyBhbmQgd2hhdG5vdCkuXG4gKlxuICogQHBhcmFtIHF1ZXVlIC0gVGhlIHF1ZXVlIG9mIHRyYW5zYWN0aW9ucyB0byBydW4uXG4gKiBAcGFyYW0gcGF0aCAtIFRoZSBwYXRoIHRoZSBxdWV1ZSBpcyBmb3IuXG4gKi9cbmZ1bmN0aW9uIHJlcG9SZXJ1blRyYW5zYWN0aW9uUXVldWUocmVwbywgcXVldWUsIHBhdGgpIHtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybjsgLy8gTm90aGluZyB0byBkbyFcbiAgICB9XG4gICAgLy8gUXVldWUgdXAgdGhlIGNhbGxiYWNrcyBhbmQgZmlyZSB0aGVtIGFmdGVyIGNsZWFuaW5nIHVwIGFsbCBvZiBvdXJcbiAgICAvLyB0cmFuc2FjdGlvbiBzdGF0ZSwgc2luY2UgdGhlIGNhbGxiYWNrIGNvdWxkIHRyaWdnZXIgbW9yZSB0cmFuc2FjdGlvbnMgb3JcbiAgICAvLyBzZXRzLlxuICAgIGNvbnN0IGNhbGxiYWNrcyA9IFtdO1xuICAgIGxldCBldmVudHMgPSBbXTtcbiAgICAvLyBJZ25vcmUgYWxsIG9mIHRoZSBzZXRzIHdlJ3JlIGdvaW5nIHRvIHJlLXJ1bi5cbiAgICBjb25zdCB0eG5zVG9SZXJ1biA9IHF1ZXVlLmZpbHRlcihxID0+IHtcbiAgICAgICAgcmV0dXJuIHEuc3RhdHVzID09PSAwIC8qIFRyYW5zYWN0aW9uU3RhdHVzLlJVTiAqLztcbiAgICB9KTtcbiAgICBjb25zdCBzZXRzVG9JZ25vcmUgPSB0eG5zVG9SZXJ1bi5tYXAocSA9PiB7XG4gICAgICAgIHJldHVybiBxLmN1cnJlbnRXcml0ZUlkO1xuICAgIH0pO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSBxdWV1ZVtpXTtcbiAgICAgICAgY29uc3QgcmVsYXRpdmVQYXRoID0gbmV3UmVsYXRpdmVQYXRoKHBhdGgsIHRyYW5zYWN0aW9uLnBhdGgpO1xuICAgICAgICBsZXQgYWJvcnRUcmFuc2FjdGlvbiA9IGZhbHNlLCBhYm9ydFJlYXNvbjtcbiAgICAgICAgYXNzZXJ0KHJlbGF0aXZlUGF0aCAhPT0gbnVsbCwgJ3JlcnVuVHJhbnNhY3Rpb25zVW5kZXJOb2RlXzogcmVsYXRpdmVQYXRoIHNob3VsZCBub3QgYmUgbnVsbC4nKTtcbiAgICAgICAgaWYgKHRyYW5zYWN0aW9uLnN0YXR1cyA9PT0gNCAvKiBUcmFuc2FjdGlvblN0YXR1cy5ORUVEU19BQk9SVCAqLykge1xuICAgICAgICAgICAgYWJvcnRUcmFuc2FjdGlvbiA9IHRydWU7XG4gICAgICAgICAgICBhYm9ydFJlYXNvbiA9IHRyYW5zYWN0aW9uLmFib3J0UmVhc29uO1xuICAgICAgICAgICAgZXZlbnRzID0gZXZlbnRzLmNvbmNhdChzeW5jVHJlZUFja1VzZXJXcml0ZShyZXBvLnNlcnZlclN5bmNUcmVlXywgdHJhbnNhY3Rpb24uY3VycmVudFdyaXRlSWQsIHRydWUpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0cmFuc2FjdGlvbi5zdGF0dXMgPT09IDAgLyogVHJhbnNhY3Rpb25TdGF0dXMuUlVOICovKSB7XG4gICAgICAgICAgICBpZiAodHJhbnNhY3Rpb24ucmV0cnlDb3VudCA+PSBNQVhfVFJBTlNBQ1RJT05fUkVUUklFUykge1xuICAgICAgICAgICAgICAgIGFib3J0VHJhbnNhY3Rpb24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIGFib3J0UmVhc29uID0gJ21heHJldHJ5JztcbiAgICAgICAgICAgICAgICBldmVudHMgPSBldmVudHMuY29uY2F0KHN5bmNUcmVlQWNrVXNlcldyaXRlKHJlcG8uc2VydmVyU3luY1RyZWVfLCB0cmFuc2FjdGlvbi5jdXJyZW50V3JpdGVJZCwgdHJ1ZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBjb2RlIHJlcnVucyBhIHRyYW5zYWN0aW9uXG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudE5vZGUgPSByZXBvR2V0TGF0ZXN0U3RhdGUocmVwbywgdHJhbnNhY3Rpb24ucGF0aCwgc2V0c1RvSWdub3JlKTtcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbi5jdXJyZW50SW5wdXRTbmFwc2hvdCA9IGN1cnJlbnROb2RlO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0RhdGEgPSBxdWV1ZVtpXS51cGRhdGUoY3VycmVudE5vZGUudmFsKCkpO1xuICAgICAgICAgICAgICAgIGlmIChuZXdEYXRhICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVGaXJlYmFzZURhdGEoJ3RyYW5zYWN0aW9uIGZhaWxlZDogRGF0YSByZXR1cm5lZCAnLCBuZXdEYXRhLCB0cmFuc2FjdGlvbi5wYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5ld0RhdGFOb2RlID0gbm9kZUZyb21KU09OKG5ld0RhdGEpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBoYXNFeHBsaWNpdFByaW9yaXR5ID0gdHlwZW9mIG5ld0RhdGEgPT09ICdvYmplY3QnICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdEYXRhICE9IG51bGwgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5zKG5ld0RhdGEsICcucHJpb3JpdHknKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFoYXNFeHBsaWNpdFByaW9yaXR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBLZWVwIHRoZSBvbGQgcHJpb3JpdHkgaWYgdGhlcmUgd2Fzbid0IGEgcHJpb3JpdHkgZXhwbGljaXRseSBzcGVjaWZpZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdEYXRhTm9kZSA9IG5ld0RhdGFOb2RlLnVwZGF0ZVByaW9yaXR5KGN1cnJlbnROb2RlLmdldFByaW9yaXR5KCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9sZFdyaXRlSWQgPSB0cmFuc2FjdGlvbi5jdXJyZW50V3JpdGVJZDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VydmVyVmFsdWVzID0gcmVwb0dlbmVyYXRlU2VydmVyVmFsdWVzKHJlcG8pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdOb2RlUmVzb2x2ZWQgPSByZXNvbHZlRGVmZXJyZWRWYWx1ZVNuYXBzaG90KG5ld0RhdGFOb2RlLCBjdXJyZW50Tm9kZSwgc2VydmVyVmFsdWVzKTtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24uY3VycmVudE91dHB1dFNuYXBzaG90UmF3ID0gbmV3RGF0YU5vZGU7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uLmN1cnJlbnRPdXRwdXRTbmFwc2hvdFJlc29sdmVkID0gbmV3Tm9kZVJlc29sdmVkO1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbi5jdXJyZW50V3JpdGVJZCA9IHJlcG9HZXROZXh0V3JpdGVJZChyZXBvKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gTXV0YXRlcyBzZXRzVG9JZ25vcmUgaW4gcGxhY2VcbiAgICAgICAgICAgICAgICAgICAgc2V0c1RvSWdub3JlLnNwbGljZShzZXRzVG9JZ25vcmUuaW5kZXhPZihvbGRXcml0ZUlkKSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50cyA9IGV2ZW50cy5jb25jYXQoc3luY1RyZWVBcHBseVVzZXJPdmVyd3JpdGUocmVwby5zZXJ2ZXJTeW5jVHJlZV8sIHRyYW5zYWN0aW9uLnBhdGgsIG5ld05vZGVSZXNvbHZlZCwgdHJhbnNhY3Rpb24uY3VycmVudFdyaXRlSWQsIHRyYW5zYWN0aW9uLmFwcGx5TG9jYWxseSkpO1xuICAgICAgICAgICAgICAgICAgICBldmVudHMgPSBldmVudHMuY29uY2F0KHN5bmNUcmVlQWNrVXNlcldyaXRlKHJlcG8uc2VydmVyU3luY1RyZWVfLCBvbGRXcml0ZUlkLCB0cnVlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhYm9ydFRyYW5zYWN0aW9uID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYWJvcnRSZWFzb24gPSAnbm9kYXRhJztcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRzID0gZXZlbnRzLmNvbmNhdChzeW5jVHJlZUFja1VzZXJXcml0ZShyZXBvLnNlcnZlclN5bmNUcmVlXywgdHJhbnNhY3Rpb24uY3VycmVudFdyaXRlSWQsIHRydWUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZXZlbnRRdWV1ZVJhaXNlRXZlbnRzRm9yQ2hhbmdlZFBhdGgocmVwby5ldmVudFF1ZXVlXywgcGF0aCwgZXZlbnRzKTtcbiAgICAgICAgZXZlbnRzID0gW107XG4gICAgICAgIGlmIChhYm9ydFRyYW5zYWN0aW9uKSB7XG4gICAgICAgICAgICAvLyBBYm9ydC5cbiAgICAgICAgICAgIHF1ZXVlW2ldLnN0YXR1cyA9IDIgLyogVHJhbnNhY3Rpb25TdGF0dXMuQ09NUExFVEVEICovO1xuICAgICAgICAgICAgLy8gUmVtb3ZpbmcgYSBsaXN0ZW5lciBjYW4gdHJpZ2dlciBwcnVuaW5nIHdoaWNoIGNhbiBtdWNrIHdpdGhcbiAgICAgICAgICAgIC8vIG1lcmdlZERhdGEvdmlzaWJsZURhdGEgKGFzIGl0IHBydW5lcyBkYXRhKS4gU28gZGVmZXIgdGhlIHVud2F0Y2hlclxuICAgICAgICAgICAgLy8gdW50aWwgd2UncmUgZG9uZS5cbiAgICAgICAgICAgIChmdW5jdGlvbiAodW53YXRjaGVyKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCh1bndhdGNoZXIsIE1hdGguZmxvb3IoMCkpO1xuICAgICAgICAgICAgfSkocXVldWVbaV0udW53YXRjaGVyKTtcbiAgICAgICAgICAgIGlmIChxdWV1ZVtpXS5vbkNvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFib3J0UmVhc29uID09PSAnbm9kYXRhJykge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3MucHVzaCgoKSA9PiBxdWV1ZVtpXS5vbkNvbXBsZXRlKG51bGwsIGZhbHNlLCBxdWV1ZVtpXS5jdXJyZW50SW5wdXRTbmFwc2hvdCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzLnB1c2goKCkgPT4gcXVldWVbaV0ub25Db21wbGV0ZShuZXcgRXJyb3IoYWJvcnRSZWFzb24pLCBmYWxzZSwgbnVsbCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBDbGVhbiB1cCBjb21wbGV0ZWQgdHJhbnNhY3Rpb25zLlxuICAgIHJlcG9QcnVuZUNvbXBsZXRlZFRyYW5zYWN0aW9uc0JlbG93Tm9kZShyZXBvLCByZXBvLnRyYW5zYWN0aW9uUXVldWVUcmVlXyk7XG4gICAgLy8gTm93IGZpcmUgY2FsbGJhY2tzLCBub3cgdGhhdCB3ZSdyZSBpbiBhIGdvb2QsIGtub3duIHN0YXRlLlxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGV4Y2VwdGlvbkd1YXJkKGNhbGxiYWNrc1tpXSk7XG4gICAgfVxuICAgIC8vIFRyeSB0byBzZW5kIHRoZSB0cmFuc2FjdGlvbiByZXN1bHQgdG8gdGhlIHNlcnZlci5cbiAgICByZXBvU2VuZFJlYWR5VHJhbnNhY3Rpb25zKHJlcG8sIHJlcG8udHJhbnNhY3Rpb25RdWV1ZVRyZWVfKTtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgcm9vdG1vc3QgYW5jZXN0b3Igbm9kZSBvZiB0aGUgc3BlY2lmaWVkIHBhdGggdGhhdCBoYXMgYSBwZW5kaW5nXG4gKiB0cmFuc2FjdGlvbiBvbiBpdCwgb3IganVzdCByZXR1cm5zIHRoZSBub2RlIGZvciB0aGUgZ2l2ZW4gcGF0aCBpZiB0aGVyZSBhcmVcbiAqIG5vIHBlbmRpbmcgdHJhbnNhY3Rpb25zIG9uIGFueSBhbmNlc3Rvci5cbiAqXG4gKiBAcGFyYW0gcGF0aCAtIFRoZSBsb2NhdGlvbiB0byBzdGFydCBhdC5cbiAqIEByZXR1cm5zIFRoZSByb290bW9zdCBub2RlIHdpdGggYSB0cmFuc2FjdGlvbi5cbiAqL1xuZnVuY3Rpb24gcmVwb0dldEFuY2VzdG9yVHJhbnNhY3Rpb25Ob2RlKHJlcG8sIHBhdGgpIHtcbiAgICBsZXQgZnJvbnQ7XG4gICAgLy8gU3RhcnQgYXQgdGhlIHJvb3QgYW5kIHdhbGsgZGVlcGVyIGludG8gdGhlIHRyZWUgdG93YXJkcyBwYXRoIHVudGlsIHdlXG4gICAgLy8gZmluZCBhIG5vZGUgd2l0aCBwZW5kaW5nIHRyYW5zYWN0aW9ucy5cbiAgICBsZXQgdHJhbnNhY3Rpb25Ob2RlID0gcmVwby50cmFuc2FjdGlvblF1ZXVlVHJlZV87XG4gICAgZnJvbnQgPSBwYXRoR2V0RnJvbnQocGF0aCk7XG4gICAgd2hpbGUgKGZyb250ICE9PSBudWxsICYmIHRyZWVHZXRWYWx1ZSh0cmFuc2FjdGlvbk5vZGUpID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdHJhbnNhY3Rpb25Ob2RlID0gdHJlZVN1YlRyZWUodHJhbnNhY3Rpb25Ob2RlLCBmcm9udCk7XG4gICAgICAgIHBhdGggPSBwYXRoUG9wRnJvbnQocGF0aCk7XG4gICAgICAgIGZyb250ID0gcGF0aEdldEZyb250KHBhdGgpO1xuICAgIH1cbiAgICByZXR1cm4gdHJhbnNhY3Rpb25Ob2RlO1xufVxuLyoqXG4gKiBCdWlsZHMgdGhlIHF1ZXVlIG9mIGFsbCB0cmFuc2FjdGlvbnMgYXQgb3IgYmVsb3cgdGhlIHNwZWNpZmllZFxuICogdHJhbnNhY3Rpb25Ob2RlLlxuICpcbiAqIEBwYXJhbSB0cmFuc2FjdGlvbk5vZGVcbiAqIEByZXR1cm5zIFRoZSBnZW5lcmF0ZWQgcXVldWUuXG4gKi9cbmZ1bmN0aW9uIHJlcG9CdWlsZFRyYW5zYWN0aW9uUXVldWUocmVwbywgdHJhbnNhY3Rpb25Ob2RlKSB7XG4gICAgLy8gV2FsayBhbnkgY2hpbGQgdHJhbnNhY3Rpb24gcXVldWVzIGFuZCBhZ2dyZWdhdGUgdGhlbSBpbnRvIGEgc2luZ2xlIHF1ZXVlLlxuICAgIGNvbnN0IHRyYW5zYWN0aW9uUXVldWUgPSBbXTtcbiAgICByZXBvQWdncmVnYXRlVHJhbnNhY3Rpb25RdWV1ZXNGb3JOb2RlKHJlcG8sIHRyYW5zYWN0aW9uTm9kZSwgdHJhbnNhY3Rpb25RdWV1ZSk7XG4gICAgLy8gU29ydCB0aGVtIGJ5IHRoZSBvcmRlciB0aGUgdHJhbnNhY3Rpb25zIHdlcmUgY3JlYXRlZC5cbiAgICB0cmFuc2FjdGlvblF1ZXVlLnNvcnQoKGEsIGIpID0+IGEub3JkZXIgLSBiLm9yZGVyKTtcbiAgICByZXR1cm4gdHJhbnNhY3Rpb25RdWV1ZTtcbn1cbmZ1bmN0aW9uIHJlcG9BZ2dyZWdhdGVUcmFuc2FjdGlvblF1ZXVlc0Zvck5vZGUocmVwbywgbm9kZSwgcXVldWUpIHtcbiAgICBjb25zdCBub2RlUXVldWUgPSB0cmVlR2V0VmFsdWUobm9kZSk7XG4gICAgaWYgKG5vZGVRdWV1ZSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVRdWV1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgcXVldWUucHVzaChub2RlUXVldWVbaV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRyZWVGb3JFYWNoQ2hpbGQobm9kZSwgY2hpbGQgPT4ge1xuICAgICAgICByZXBvQWdncmVnYXRlVHJhbnNhY3Rpb25RdWV1ZXNGb3JOb2RlKHJlcG8sIGNoaWxkLCBxdWV1ZSk7XG4gICAgfSk7XG59XG4vKipcbiAqIFJlbW92ZSBDT01QTEVURUQgdHJhbnNhY3Rpb25zIGF0IG9yIGJlbG93IHRoaXMgbm9kZSBpbiB0aGUgdHJhbnNhY3Rpb25RdWV1ZVRyZWVfLlxuICovXG5mdW5jdGlvbiByZXBvUHJ1bmVDb21wbGV0ZWRUcmFuc2FjdGlvbnNCZWxvd05vZGUocmVwbywgbm9kZSkge1xuICAgIGNvbnN0IHF1ZXVlID0gdHJlZUdldFZhbHVlKG5vZGUpO1xuICAgIGlmIChxdWV1ZSkge1xuICAgICAgICBsZXQgdG8gPSAwO1xuICAgICAgICBmb3IgKGxldCBmcm9tID0gMDsgZnJvbSA8IHF1ZXVlLmxlbmd0aDsgZnJvbSsrKSB7XG4gICAgICAgICAgICBpZiAocXVldWVbZnJvbV0uc3RhdHVzICE9PSAyIC8qIFRyYW5zYWN0aW9uU3RhdHVzLkNPTVBMRVRFRCAqLykge1xuICAgICAgICAgICAgICAgIHF1ZXVlW3RvXSA9IHF1ZXVlW2Zyb21dO1xuICAgICAgICAgICAgICAgIHRvKys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWUubGVuZ3RoID0gdG87XG4gICAgICAgIHRyZWVTZXRWYWx1ZShub2RlLCBxdWV1ZS5sZW5ndGggPiAwID8gcXVldWUgOiB1bmRlZmluZWQpO1xuICAgIH1cbiAgICB0cmVlRm9yRWFjaENoaWxkKG5vZGUsIGNoaWxkTm9kZSA9PiB7XG4gICAgICAgIHJlcG9QcnVuZUNvbXBsZXRlZFRyYW5zYWN0aW9uc0JlbG93Tm9kZShyZXBvLCBjaGlsZE5vZGUpO1xuICAgIH0pO1xufVxuLyoqXG4gKiBBYm9ydHMgYWxsIHRyYW5zYWN0aW9ucyBvbiBhbmNlc3RvcnMgb3IgZGVzY2VuZGFudHMgb2YgdGhlIHNwZWNpZmllZCBwYXRoLlxuICogQ2FsbGVkIHdoZW4gZG9pbmcgYSBzZXQoKSBvciB1cGRhdGUoKSBzaW5jZSB3ZSBjb25zaWRlciB0aGVtIGluY29tcGF0aWJsZVxuICogd2l0aCB0cmFuc2FjdGlvbnMuXG4gKlxuICogQHBhcmFtIHBhdGggLSBQYXRoIGZvciB3aGljaCB3ZSB3YW50IHRvIGFib3J0IHJlbGF0ZWQgdHJhbnNhY3Rpb25zLlxuICovXG5mdW5jdGlvbiByZXBvQWJvcnRUcmFuc2FjdGlvbnMocmVwbywgcGF0aCkge1xuICAgIGNvbnN0IGFmZmVjdGVkUGF0aCA9IHRyZWVHZXRQYXRoKHJlcG9HZXRBbmNlc3RvclRyYW5zYWN0aW9uTm9kZShyZXBvLCBwYXRoKSk7XG4gICAgY29uc3QgdHJhbnNhY3Rpb25Ob2RlID0gdHJlZVN1YlRyZWUocmVwby50cmFuc2FjdGlvblF1ZXVlVHJlZV8sIHBhdGgpO1xuICAgIHRyZWVGb3JFYWNoQW5jZXN0b3IodHJhbnNhY3Rpb25Ob2RlLCAobm9kZSkgPT4ge1xuICAgICAgICByZXBvQWJvcnRUcmFuc2FjdGlvbnNPbk5vZGUocmVwbywgbm9kZSk7XG4gICAgfSk7XG4gICAgcmVwb0Fib3J0VHJhbnNhY3Rpb25zT25Ob2RlKHJlcG8sIHRyYW5zYWN0aW9uTm9kZSk7XG4gICAgdHJlZUZvckVhY2hEZXNjZW5kYW50KHRyYW5zYWN0aW9uTm9kZSwgKG5vZGUpID0+IHtcbiAgICAgICAgcmVwb0Fib3J0VHJhbnNhY3Rpb25zT25Ob2RlKHJlcG8sIG5vZGUpO1xuICAgIH0pO1xuICAgIHJldHVybiBhZmZlY3RlZFBhdGg7XG59XG4vKipcbiAqIEFib3J0IHRyYW5zYWN0aW9ucyBzdG9yZWQgaW4gdGhpcyB0cmFuc2FjdGlvbiBxdWV1ZSBub2RlLlxuICpcbiAqIEBwYXJhbSBub2RlIC0gTm9kZSB0byBhYm9ydCB0cmFuc2FjdGlvbnMgZm9yLlxuICovXG5mdW5jdGlvbiByZXBvQWJvcnRUcmFuc2FjdGlvbnNPbk5vZGUocmVwbywgbm9kZSkge1xuICAgIGNvbnN0IHF1ZXVlID0gdHJlZUdldFZhbHVlKG5vZGUpO1xuICAgIGlmIChxdWV1ZSkge1xuICAgICAgICAvLyBRdWV1ZSB1cCB0aGUgY2FsbGJhY2tzIGFuZCBmaXJlIHRoZW0gYWZ0ZXIgY2xlYW5pbmcgdXAgYWxsIG9mIG91clxuICAgICAgICAvLyB0cmFuc2FjdGlvbiBzdGF0ZSwgc2luY2UgdGhlIGNhbGxiYWNrIGNvdWxkIHRyaWdnZXIgbW9yZSB0cmFuc2FjdGlvbnNcbiAgICAgICAgLy8gb3Igc2V0cy5cbiAgICAgICAgY29uc3QgY2FsbGJhY2tzID0gW107XG4gICAgICAgIC8vIEdvIHRocm91Z2ggcXVldWUuICBBbnkgYWxyZWFkeS1zZW50IHRyYW5zYWN0aW9ucyBtdXN0IGJlIG1hcmtlZCBmb3JcbiAgICAgICAgLy8gYWJvcnQsIHdoaWxlIHRoZSB1bnNlbnQgb25lcyBjYW4gYmUgaW1tZWRpYXRlbHkgYWJvcnRlZCBhbmQgcmVtb3ZlZC5cbiAgICAgICAgbGV0IGV2ZW50cyA9IFtdO1xuICAgICAgICBsZXQgbGFzdFNlbnQgPSAtMTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBxdWV1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHF1ZXVlW2ldLnN0YXR1cyA9PT0gMyAvKiBUcmFuc2FjdGlvblN0YXR1cy5TRU5UX05FRURTX0FCT1JUICovKSA7XG4gICAgICAgICAgICBlbHNlIGlmIChxdWV1ZVtpXS5zdGF0dXMgPT09IDEgLyogVHJhbnNhY3Rpb25TdGF0dXMuU0VOVCAqLykge1xuICAgICAgICAgICAgICAgIGFzc2VydChsYXN0U2VudCA9PT0gaSAtIDEsICdBbGwgU0VOVCBpdGVtcyBzaG91bGQgYmUgYXQgYmVnaW5uaW5nIG9mIHF1ZXVlLicpO1xuICAgICAgICAgICAgICAgIGxhc3RTZW50ID0gaTtcbiAgICAgICAgICAgICAgICAvLyBNYXJrIHRyYW5zYWN0aW9uIGZvciBhYm9ydCB3aGVuIGl0IGNvbWVzIGJhY2suXG4gICAgICAgICAgICAgICAgcXVldWVbaV0uc3RhdHVzID0gMyAvKiBUcmFuc2FjdGlvblN0YXR1cy5TRU5UX05FRURTX0FCT1JUICovO1xuICAgICAgICAgICAgICAgIHF1ZXVlW2ldLmFib3J0UmVhc29uID0gJ3NldCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhc3NlcnQocXVldWVbaV0uc3RhdHVzID09PSAwIC8qIFRyYW5zYWN0aW9uU3RhdHVzLlJVTiAqLywgJ1VuZXhwZWN0ZWQgdHJhbnNhY3Rpb24gc3RhdHVzIGluIGFib3J0Jyk7XG4gICAgICAgICAgICAgICAgLy8gV2UgY2FuIGFib3J0IGl0IGltbWVkaWF0ZWx5LlxuICAgICAgICAgICAgICAgIHF1ZXVlW2ldLnVud2F0Y2hlcigpO1xuICAgICAgICAgICAgICAgIGV2ZW50cyA9IGV2ZW50cy5jb25jYXQoc3luY1RyZWVBY2tVc2VyV3JpdGUocmVwby5zZXJ2ZXJTeW5jVHJlZV8sIHF1ZXVlW2ldLmN1cnJlbnRXcml0ZUlkLCB0cnVlKSk7XG4gICAgICAgICAgICAgICAgaWYgKHF1ZXVlW2ldLm9uQ29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzLnB1c2gocXVldWVbaV0ub25Db21wbGV0ZS5iaW5kKG51bGwsIG5ldyBFcnJvcignc2V0JyksIGZhbHNlLCBudWxsKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChsYXN0U2VudCA9PT0gLTEpIHtcbiAgICAgICAgICAgIC8vIFdlJ3JlIG5vdCB3YWl0aW5nIGZvciBhbnkgc2VudCB0cmFuc2FjdGlvbnMuICBXZSBjYW4gY2xlYXIgdGhlIHF1ZXVlLlxuICAgICAgICAgICAgdHJlZVNldFZhbHVlKG5vZGUsIHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBSZW1vdmUgdGhlIHRyYW5zYWN0aW9ucyB3ZSBhYm9ydGVkLlxuICAgICAgICAgICAgcXVldWUubGVuZ3RoID0gbGFzdFNlbnQgKyAxO1xuICAgICAgICB9XG4gICAgICAgIC8vIE5vdyBmaXJlIHRoZSBjYWxsYmFja3MuXG4gICAgICAgIGV2ZW50UXVldWVSYWlzZUV2ZW50c0ZvckNoYW5nZWRQYXRoKHJlcG8uZXZlbnRRdWV1ZV8sIHRyZWVHZXRQYXRoKG5vZGUpLCBldmVudHMpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNhbGxiYWNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZXhjZXB0aW9uR3VhcmQoY2FsbGJhY2tzW2ldKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmZ1bmN0aW9uIGRlY29kZVBhdGgocGF0aFN0cmluZykge1xuICAgIGxldCBwYXRoU3RyaW5nRGVjb2RlZCA9ICcnO1xuICAgIGNvbnN0IHBpZWNlcyA9IHBhdGhTdHJpbmcuc3BsaXQoJy8nKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBpZWNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAocGllY2VzW2ldLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGxldCBwaWVjZSA9IHBpZWNlc1tpXTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcGllY2UgPSBkZWNvZGVVUklDb21wb25lbnQocGllY2UucmVwbGFjZSgvXFwrL2csICcgJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHsgfVxuICAgICAgICAgICAgcGF0aFN0cmluZ0RlY29kZWQgKz0gJy8nICsgcGllY2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBhdGhTdHJpbmdEZWNvZGVkO1xufVxuLyoqXG4gKiBAcmV0dXJucyBrZXkgdmFsdWUgaGFzaFxuICovXG5mdW5jdGlvbiBkZWNvZGVRdWVyeShxdWVyeVN0cmluZykge1xuICAgIGNvbnN0IHJlc3VsdHMgPSB7fTtcbiAgICBpZiAocXVlcnlTdHJpbmcuY2hhckF0KDApID09PSAnPycpIHtcbiAgICAgICAgcXVlcnlTdHJpbmcgPSBxdWVyeVN0cmluZy5zdWJzdHJpbmcoMSk7XG4gICAgfVxuICAgIGZvciAoY29uc3Qgc2VnbWVudCBvZiBxdWVyeVN0cmluZy5zcGxpdCgnJicpKSB7XG4gICAgICAgIGlmIChzZWdtZW50Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qga3YgPSBzZWdtZW50LnNwbGl0KCc9Jyk7XG4gICAgICAgIGlmIChrdi5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgIHJlc3VsdHNbZGVjb2RlVVJJQ29tcG9uZW50KGt2WzBdKV0gPSBkZWNvZGVVUklDb21wb25lbnQoa3ZbMV0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgd2FybihgSW52YWxpZCBxdWVyeSBzZWdtZW50ICcke3NlZ21lbnR9JyBpbiBxdWVyeSAnJHtxdWVyeVN0cmluZ30nYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdHM7XG59XG5jb25zdCBwYXJzZVJlcG9JbmZvID0gZnVuY3Rpb24gKGRhdGFVUkwsIG5vZGVBZG1pbikge1xuICAgIGNvbnN0IHBhcnNlZFVybCA9IHBhcnNlRGF0YWJhc2VVUkwoZGF0YVVSTCksIG5hbWVzcGFjZSA9IHBhcnNlZFVybC5uYW1lc3BhY2U7XG4gICAgaWYgKHBhcnNlZFVybC5kb21haW4gPT09ICdmaXJlYmFzZS5jb20nKSB7XG4gICAgICAgIGZhdGFsKHBhcnNlZFVybC5ob3N0ICtcbiAgICAgICAgICAgICcgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZC4gJyArXG4gICAgICAgICAgICAnUGxlYXNlIHVzZSA8WU9VUiBGSVJFQkFTRT4uZmlyZWJhc2Vpby5jb20gaW5zdGVhZCcpO1xuICAgIH1cbiAgICAvLyBDYXRjaCBjb21tb24gZXJyb3Igb2YgdW5pbml0aWFsaXplZCBuYW1lc3BhY2UgdmFsdWUuXG4gICAgaWYgKCghbmFtZXNwYWNlIHx8IG5hbWVzcGFjZSA9PT0gJ3VuZGVmaW5lZCcpICYmXG4gICAgICAgIHBhcnNlZFVybC5kb21haW4gIT09ICdsb2NhbGhvc3QnKSB7XG4gICAgICAgIGZhdGFsKCdDYW5ub3QgcGFyc2UgRmlyZWJhc2UgdXJsLiBQbGVhc2UgdXNlIGh0dHBzOi8vPFlPVVIgRklSRUJBU0U+LmZpcmViYXNlaW8uY29tJyk7XG4gICAgfVxuICAgIGlmICghcGFyc2VkVXJsLnNlY3VyZSkge1xuICAgICAgICB3YXJuSWZQYWdlSXNTZWN1cmUoKTtcbiAgICB9XG4gICAgY29uc3Qgd2ViU29ja2V0T25seSA9IHBhcnNlZFVybC5zY2hlbWUgPT09ICd3cycgfHwgcGFyc2VkVXJsLnNjaGVtZSA9PT0gJ3dzcyc7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVwb0luZm86IG5ldyBSZXBvSW5mbyhwYXJzZWRVcmwuaG9zdCwgcGFyc2VkVXJsLnNlY3VyZSwgbmFtZXNwYWNlLCB3ZWJTb2NrZXRPbmx5LCBub2RlQWRtaW4sIFxuICAgICAgICAvKnBlcnNpc3RlbmNlS2V5PSovICcnLCBcbiAgICAgICAgLyppbmNsdWRlTmFtZXNwYWNlSW5RdWVyeVBhcmFtcz0qLyBuYW1lc3BhY2UgIT09IHBhcnNlZFVybC5zdWJkb21haW4pLFxuICAgICAgICBwYXRoOiBuZXcgUGF0aChwYXJzZWRVcmwucGF0aFN0cmluZylcbiAgICB9O1xufTtcbmNvbnN0IHBhcnNlRGF0YWJhc2VVUkwgPSBmdW5jdGlvbiAoZGF0YVVSTCkge1xuICAgIC8vIERlZmF1bHQgdG8gZW1wdHkgc3RyaW5ncyBpbiB0aGUgZXZlbnQgb2YgYSBtYWxmb3JtZWQgc3RyaW5nLlxuICAgIGxldCBob3N0ID0gJycsIGRvbWFpbiA9ICcnLCBzdWJkb21haW4gPSAnJywgcGF0aFN0cmluZyA9ICcnLCBuYW1lc3BhY2UgPSAnJztcbiAgICAvLyBBbHdheXMgZGVmYXVsdCB0byBTU0wsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICAgIGxldCBzZWN1cmUgPSB0cnVlLCBzY2hlbWUgPSAnaHR0cHMnLCBwb3J0ID0gNDQzO1xuICAgIC8vIERvbid0IGRvIGFueSB2YWxpZGF0aW9uIGhlcmUuIFRoZSBjYWxsZXIgaXMgcmVzcG9uc2libGUgZm9yIHZhbGlkYXRpbmcgdGhlIHJlc3VsdCBvZiBwYXJzaW5nLlxuICAgIGlmICh0eXBlb2YgZGF0YVVSTCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgLy8gUGFyc2Ugc2NoZW1lLlxuICAgICAgICBsZXQgY29sb25JbmQgPSBkYXRhVVJMLmluZGV4T2YoJy8vJyk7XG4gICAgICAgIGlmIChjb2xvbkluZCA+PSAwKSB7XG4gICAgICAgICAgICBzY2hlbWUgPSBkYXRhVVJMLnN1YnN0cmluZygwLCBjb2xvbkluZCAtIDEpO1xuICAgICAgICAgICAgZGF0YVVSTCA9IGRhdGFVUkwuc3Vic3RyaW5nKGNvbG9uSW5kICsgMik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUGFyc2UgaG9zdCwgcGF0aCwgYW5kIHF1ZXJ5IHN0cmluZy5cbiAgICAgICAgbGV0IHNsYXNoSW5kID0gZGF0YVVSTC5pbmRleE9mKCcvJyk7XG4gICAgICAgIGlmIChzbGFzaEluZCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHNsYXNoSW5kID0gZGF0YVVSTC5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHF1ZXN0aW9uTWFya0luZCA9IGRhdGFVUkwuaW5kZXhPZignPycpO1xuICAgICAgICBpZiAocXVlc3Rpb25NYXJrSW5kID09PSAtMSkge1xuICAgICAgICAgICAgcXVlc3Rpb25NYXJrSW5kID0gZGF0YVVSTC5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgaG9zdCA9IGRhdGFVUkwuc3Vic3RyaW5nKDAsIE1hdGgubWluKHNsYXNoSW5kLCBxdWVzdGlvbk1hcmtJbmQpKTtcbiAgICAgICAgaWYgKHNsYXNoSW5kIDwgcXVlc3Rpb25NYXJrSW5kKSB7XG4gICAgICAgICAgICAvLyBGb3IgcGF0aFN0cmluZywgcXVlc3Rpb25NYXJrSW5kIHdpbGwgYWx3YXlzIGNvbWUgYWZ0ZXIgc2xhc2hJbmRcbiAgICAgICAgICAgIHBhdGhTdHJpbmcgPSBkZWNvZGVQYXRoKGRhdGFVUkwuc3Vic3RyaW5nKHNsYXNoSW5kLCBxdWVzdGlvbk1hcmtJbmQpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBxdWVyeVBhcmFtcyA9IGRlY29kZVF1ZXJ5KGRhdGFVUkwuc3Vic3RyaW5nKE1hdGgubWluKGRhdGFVUkwubGVuZ3RoLCBxdWVzdGlvbk1hcmtJbmQpKSk7XG4gICAgICAgIC8vIElmIHdlIGhhdmUgYSBwb3J0LCB1c2Ugc2NoZW1lIGZvciBkZXRlcm1pbmluZyBpZiBpdCdzIHNlY3VyZS5cbiAgICAgICAgY29sb25JbmQgPSBob3N0LmluZGV4T2YoJzonKTtcbiAgICAgICAgaWYgKGNvbG9uSW5kID49IDApIHtcbiAgICAgICAgICAgIHNlY3VyZSA9IHNjaGVtZSA9PT0gJ2h0dHBzJyB8fCBzY2hlbWUgPT09ICd3c3MnO1xuICAgICAgICAgICAgcG9ydCA9IHBhcnNlSW50KGhvc3Quc3Vic3RyaW5nKGNvbG9uSW5kICsgMSksIDEwKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbG9uSW5kID0gaG9zdC5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaG9zdFdpdGhvdXRQb3J0ID0gaG9zdC5zbGljZSgwLCBjb2xvbkluZCk7XG4gICAgICAgIGlmIChob3N0V2l0aG91dFBvcnQudG9Mb3dlckNhc2UoKSA9PT0gJ2xvY2FsaG9zdCcpIHtcbiAgICAgICAgICAgIGRvbWFpbiA9ICdsb2NhbGhvc3QnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGhvc3RXaXRob3V0UG9ydC5zcGxpdCgnLicpLmxlbmd0aCA8PSAyKSB7XG4gICAgICAgICAgICBkb21haW4gPSBob3N0V2l0aG91dFBvcnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBJbnRlcnByZXQgdGhlIHN1YmRvbWFpbiBvZiBhIDMgb3IgbW9yZSBjb21wb25lbnQgVVJMIGFzIHRoZSBuYW1lc3BhY2UgbmFtZS5cbiAgICAgICAgICAgIGNvbnN0IGRvdEluZCA9IGhvc3QuaW5kZXhPZignLicpO1xuICAgICAgICAgICAgc3ViZG9tYWluID0gaG9zdC5zdWJzdHJpbmcoMCwgZG90SW5kKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgZG9tYWluID0gaG9zdC5zdWJzdHJpbmcoZG90SW5kICsgMSk7XG4gICAgICAgICAgICAvLyBOb3JtYWxpemUgbmFtZXNwYWNlcyB0byBsb3dlcmNhc2UgdG8gc2hhcmUgc3RvcmFnZSAvIGNvbm5lY3Rpb24uXG4gICAgICAgICAgICBuYW1lc3BhY2UgPSBzdWJkb21haW47XG4gICAgICAgIH1cbiAgICAgICAgLy8gQWx3YXlzIHRyZWF0IHRoZSB2YWx1ZSBvZiB0aGUgYG5zYCBhcyB0aGUgbmFtZXNwYWNlIG5hbWUgaWYgaXQgaXMgcHJlc2VudC5cbiAgICAgICAgaWYgKCducycgaW4gcXVlcnlQYXJhbXMpIHtcbiAgICAgICAgICAgIG5hbWVzcGFjZSA9IHF1ZXJ5UGFyYW1zWyducyddO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGhvc3QsXG4gICAgICAgIHBvcnQsXG4gICAgICAgIGRvbWFpbixcbiAgICAgICAgc3ViZG9tYWluLFxuICAgICAgICBzZWN1cmUsXG4gICAgICAgIHNjaGVtZSxcbiAgICAgICAgcGF0aFN0cmluZyxcbiAgICAgICAgbmFtZXNwYWNlXG4gICAgfTtcbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBNb2RlbGVkIGFmdGVyIGJhc2U2NCB3ZWItc2FmZSBjaGFycywgYnV0IG9yZGVyZWQgYnkgQVNDSUkuXG5jb25zdCBQVVNIX0NIQVJTID0gJy0wMTIzNDU2Nzg5QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVpfYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXonO1xuLyoqXG4gKiBGYW5jeSBJRCBnZW5lcmF0b3IgdGhhdCBjcmVhdGVzIDIwLWNoYXJhY3RlciBzdHJpbmcgaWRlbnRpZmllcnMgd2l0aCB0aGVcbiAqIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICpcbiAqIDEuIFRoZXkncmUgYmFzZWQgb24gdGltZXN0YW1wIHNvIHRoYXQgdGhleSBzb3J0ICphZnRlciogYW55IGV4aXN0aW5nIGlkcy5cbiAqIDIuIFRoZXkgY29udGFpbiA3Mi1iaXRzIG9mIHJhbmRvbSBkYXRhIGFmdGVyIHRoZSB0aW1lc3RhbXAgc28gdGhhdCBJRHMgd29uJ3RcbiAqICAgIGNvbGxpZGUgd2l0aCBvdGhlciBjbGllbnRzJyBJRHMuXG4gKiAzLiBUaGV5IHNvcnQgKmxleGljb2dyYXBoaWNhbGx5KiAoc28gdGhlIHRpbWVzdGFtcCBpcyBjb252ZXJ0ZWQgdG8gY2hhcmFjdGVyc1xuICogICAgdGhhdCB3aWxsIHNvcnQgcHJvcGVybHkpLlxuICogNC4gVGhleSdyZSBtb25vdG9uaWNhbGx5IGluY3JlYXNpbmcuIEV2ZW4gaWYgeW91IGdlbmVyYXRlIG1vcmUgdGhhbiBvbmUgaW5cbiAqICAgIHRoZSBzYW1lIHRpbWVzdGFtcCwgdGhlIGxhdHRlciBvbmVzIHdpbGwgc29ydCBhZnRlciB0aGUgZm9ybWVyIG9uZXMuIFdlIGRvXG4gKiAgICB0aGlzIGJ5IHVzaW5nIHRoZSBwcmV2aW91cyByYW5kb20gYml0cyBidXQgXCJpbmNyZW1lbnRpbmdcIiB0aGVtIGJ5IDEgKG9ubHlcbiAqICAgIGluIHRoZSBjYXNlIG9mIGEgdGltZXN0YW1wIGNvbGxpc2lvbikuXG4gKi9cbmNvbnN0IG5leHRQdXNoSWQgPSAoZnVuY3Rpb24gKCkge1xuICAgIC8vIFRpbWVzdGFtcCBvZiBsYXN0IHB1c2gsIHVzZWQgdG8gcHJldmVudCBsb2NhbCBjb2xsaXNpb25zIGlmIHlvdSBwdXNoIHR3aWNlXG4gICAgLy8gaW4gb25lIG1zLlxuICAgIGxldCBsYXN0UHVzaFRpbWUgPSAwO1xuICAgIC8vIFdlIGdlbmVyYXRlIDcyLWJpdHMgb2YgcmFuZG9tbmVzcyB3aGljaCBnZXQgdHVybmVkIGludG8gMTIgY2hhcmFjdGVycyBhbmRcbiAgICAvLyBhcHBlbmRlZCB0byB0aGUgdGltZXN0YW1wIHRvIHByZXZlbnQgY29sbGlzaW9ucyB3aXRoIG90aGVyIGNsaWVudHMuIFdlXG4gICAgLy8gc3RvcmUgdGhlIGxhc3QgY2hhcmFjdGVycyB3ZSBnZW5lcmF0ZWQgYmVjYXVzZSBpbiB0aGUgZXZlbnQgb2YgYSBjb2xsaXNpb24sXG4gICAgLy8gd2UnbGwgdXNlIHRob3NlIHNhbWUgY2hhcmFjdGVycyBleGNlcHQgXCJpbmNyZW1lbnRlZFwiIGJ5IG9uZS5cbiAgICBjb25zdCBsYXN0UmFuZENoYXJzID0gW107XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChub3cpIHtcbiAgICAgICAgY29uc3QgZHVwbGljYXRlVGltZSA9IG5vdyA9PT0gbGFzdFB1c2hUaW1lO1xuICAgICAgICBsYXN0UHVzaFRpbWUgPSBub3c7XG4gICAgICAgIGxldCBpO1xuICAgICAgICBjb25zdCB0aW1lU3RhbXBDaGFycyA9IG5ldyBBcnJheSg4KTtcbiAgICAgICAgZm9yIChpID0gNzsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIHRpbWVTdGFtcENoYXJzW2ldID0gUFVTSF9DSEFSUy5jaGFyQXQobm93ICUgNjQpO1xuICAgICAgICAgICAgLy8gTk9URTogQ2FuJ3QgdXNlIDw8IGhlcmUgYmVjYXVzZSBqYXZhc2NyaXB0IHdpbGwgY29udmVydCB0byBpbnQgYW5kIGxvc2VcbiAgICAgICAgICAgIC8vIHRoZSB1cHBlciBiaXRzLlxuICAgICAgICAgICAgbm93ID0gTWF0aC5mbG9vcihub3cgLyA2NCk7XG4gICAgICAgIH1cbiAgICAgICAgYXNzZXJ0KG5vdyA9PT0gMCwgJ0Nhbm5vdCBwdXNoIGF0IHRpbWUgPT0gMCcpO1xuICAgICAgICBsZXQgaWQgPSB0aW1lU3RhbXBDaGFycy5qb2luKCcnKTtcbiAgICAgICAgaWYgKCFkdXBsaWNhdGVUaW1lKSB7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgMTI7IGkrKykge1xuICAgICAgICAgICAgICAgIGxhc3RSYW5kQ2hhcnNbaV0gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA2NCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBJZiB0aGUgdGltZXN0YW1wIGhhc24ndCBjaGFuZ2VkIHNpbmNlIGxhc3QgcHVzaCwgdXNlIHRoZSBzYW1lIHJhbmRvbVxuICAgICAgICAgICAgLy8gbnVtYmVyLCBleGNlcHQgaW5jcmVtZW50ZWQgYnkgMS5cbiAgICAgICAgICAgIGZvciAoaSA9IDExOyBpID49IDAgJiYgbGFzdFJhbmRDaGFyc1tpXSA9PT0gNjM7IGktLSkge1xuICAgICAgICAgICAgICAgIGxhc3RSYW5kQ2hhcnNbaV0gPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGFzdFJhbmRDaGFyc1tpXSsrO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCAxMjsgaSsrKSB7XG4gICAgICAgICAgICBpZCArPSBQVVNIX0NIQVJTLmNoYXJBdChsYXN0UmFuZENoYXJzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICBhc3NlcnQoaWQubGVuZ3RoID09PSAyMCwgJ25leHRQdXNoSWQ6IExlbmd0aCBzaG91bGQgYmUgMjAuJyk7XG4gICAgICAgIHJldHVybiBpZDtcbiAgICB9O1xufSkoKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRW5jYXBzdWxhdGVzIHRoZSBkYXRhIG5lZWRlZCB0byByYWlzZSBhbiBldmVudFxuICovXG5jbGFzcyBEYXRhRXZlbnQge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBldmVudFR5cGUgLSBPbmUgb2Y6IHZhbHVlLCBjaGlsZF9hZGRlZCwgY2hpbGRfY2hhbmdlZCwgY2hpbGRfbW92ZWQsIGNoaWxkX3JlbW92ZWRcbiAgICAgKiBAcGFyYW0gZXZlbnRSZWdpc3RyYXRpb24gLSBUaGUgZnVuY3Rpb24gdG8gY2FsbCB0byB3aXRoIHRoZSBldmVudCBkYXRhLiBVc2VyIHByb3ZpZGVkXG4gICAgICogQHBhcmFtIHNuYXBzaG90IC0gVGhlIGRhdGEgYmFja2luZyB0aGUgZXZlbnRcbiAgICAgKiBAcGFyYW0gcHJldk5hbWUgLSBPcHRpb25hbCwgdGhlIG5hbWUgb2YgdGhlIHByZXZpb3VzIGNoaWxkIGZvciBjaGlsZF8qIGV2ZW50cy5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihldmVudFR5cGUsIGV2ZW50UmVnaXN0cmF0aW9uLCBzbmFwc2hvdCwgcHJldk5hbWUpIHtcbiAgICAgICAgdGhpcy5ldmVudFR5cGUgPSBldmVudFR5cGU7XG4gICAgICAgIHRoaXMuZXZlbnRSZWdpc3RyYXRpb24gPSBldmVudFJlZ2lzdHJhdGlvbjtcbiAgICAgICAgdGhpcy5zbmFwc2hvdCA9IHNuYXBzaG90O1xuICAgICAgICB0aGlzLnByZXZOYW1lID0gcHJldk5hbWU7XG4gICAgfVxuICAgIGdldFBhdGgoKSB7XG4gICAgICAgIGNvbnN0IHJlZiA9IHRoaXMuc25hcHNob3QucmVmO1xuICAgICAgICBpZiAodGhpcy5ldmVudFR5cGUgPT09ICd2YWx1ZScpIHtcbiAgICAgICAgICAgIHJldHVybiByZWYuX3BhdGg7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gcmVmLnBhcmVudC5fcGF0aDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRFdmVudFR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV2ZW50VHlwZTtcbiAgICB9XG4gICAgZ2V0RXZlbnRSdW5uZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV2ZW50UmVnaXN0cmF0aW9uLmdldEV2ZW50UnVubmVyKHRoaXMpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmdldFBhdGgoKS50b1N0cmluZygpICtcbiAgICAgICAgICAgICc6JyArXG4gICAgICAgICAgICB0aGlzLmV2ZW50VHlwZSArXG4gICAgICAgICAgICAnOicgK1xuICAgICAgICAgICAgc3RyaW5naWZ5KHRoaXMuc25hcHNob3QuZXhwb3J0VmFsKCkpKTtcbiAgICB9XG59XG5jbGFzcyBDYW5jZWxFdmVudCB7XG4gICAgY29uc3RydWN0b3IoZXZlbnRSZWdpc3RyYXRpb24sIGVycm9yLCBwYXRoKSB7XG4gICAgICAgIHRoaXMuZXZlbnRSZWdpc3RyYXRpb24gPSBldmVudFJlZ2lzdHJhdGlvbjtcbiAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xuICAgICAgICB0aGlzLnBhdGggPSBwYXRoO1xuICAgIH1cbiAgICBnZXRQYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXRoO1xuICAgIH1cbiAgICBnZXRFdmVudFR5cGUoKSB7XG4gICAgICAgIHJldHVybiAnY2FuY2VsJztcbiAgICB9XG4gICAgZ2V0RXZlbnRSdW5uZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV2ZW50UmVnaXN0cmF0aW9uLmdldEV2ZW50UnVubmVyKHRoaXMpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aC50b1N0cmluZygpICsgJzpjYW5jZWwnO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSB3cmFwcGVyIGNsYXNzIHRoYXQgY29udmVydHMgZXZlbnRzIGZyb20gdGhlIGRhdGFiYXNlQGV4cCBTREsgdG8gdGhlIGxlZ2FjeVxuICogRGF0YWJhc2UgU0RLLiBFdmVudHMgYXJlIG5vdCBjb252ZXJ0ZWQgZGlyZWN0bHkgYXMgZXZlbnQgcmVnaXN0cmF0aW9uIHJlbGllc1xuICogb24gcmVmZXJlbmNlIGNvbXBhcmlzb24gb2YgdGhlIG9yaWdpbmFsIHVzZXIgY2FsbGJhY2sgKHNlZSBgbWF0Y2hlcygpYCkgYW5kXG4gKiByZWxpZXMgb24gZXF1YWxpdHkgb2YgdGhlIGxlZ2FjeSBTREsncyBgY29udGV4dGAgb2JqZWN0LlxuICovXG5jbGFzcyBDYWxsYmFja0NvbnRleHQge1xuICAgIGNvbnN0cnVjdG9yKHNuYXBzaG90Q2FsbGJhY2ssIGNhbmNlbENhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuc25hcHNob3RDYWxsYmFjayA9IHNuYXBzaG90Q2FsbGJhY2s7XG4gICAgICAgIHRoaXMuY2FuY2VsQ2FsbGJhY2sgPSBjYW5jZWxDYWxsYmFjaztcbiAgICB9XG4gICAgb25WYWx1ZShleHBEYXRhU25hcHNob3QsIHByZXZpb3VzQ2hpbGROYW1lKSB7XG4gICAgICAgIHRoaXMuc25hcHNob3RDYWxsYmFjay5jYWxsKG51bGwsIGV4cERhdGFTbmFwc2hvdCwgcHJldmlvdXNDaGlsZE5hbWUpO1xuICAgIH1cbiAgICBvbkNhbmNlbChlcnJvcikge1xuICAgICAgICBhc3NlcnQodGhpcy5oYXNDYW5jZWxDYWxsYmFjaywgJ1JhaXNpbmcgYSBjYW5jZWwgZXZlbnQgb24gYSBsaXN0ZW5lciB3aXRoIG5vIGNhbmNlbCBjYWxsYmFjaycpO1xuICAgICAgICByZXR1cm4gdGhpcy5jYW5jZWxDYWxsYmFjay5jYWxsKG51bGwsIGVycm9yKTtcbiAgICB9XG4gICAgZ2V0IGhhc0NhbmNlbENhbGxiYWNrKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLmNhbmNlbENhbGxiYWNrO1xuICAgIH1cbiAgICBtYXRjaGVzKG90aGVyKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5zbmFwc2hvdENhbGxiYWNrID09PSBvdGhlci5zbmFwc2hvdENhbGxiYWNrIHx8XG4gICAgICAgICAgICAodGhpcy5zbmFwc2hvdENhbGxiYWNrLnVzZXJDYWxsYmFjayAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgdGhpcy5zbmFwc2hvdENhbGxiYWNrLnVzZXJDYWxsYmFjayA9PT1cbiAgICAgICAgICAgICAgICAgICAgb3RoZXIuc25hcHNob3RDYWxsYmFjay51c2VyQ2FsbGJhY2sgJiZcbiAgICAgICAgICAgICAgICB0aGlzLnNuYXBzaG90Q2FsbGJhY2suY29udGV4dCA9PT0gb3RoZXIuc25hcHNob3RDYWxsYmFjay5jb250ZXh0KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgYG9uRGlzY29ubmVjdGAgY2xhc3MgYWxsb3dzIHlvdSB0byB3cml0ZSBvciBjbGVhciBkYXRhIHdoZW4geW91ciBjbGllbnRcbiAqIGRpc2Nvbm5lY3RzIGZyb20gdGhlIERhdGFiYXNlIHNlcnZlci4gVGhlc2UgdXBkYXRlcyBvY2N1ciB3aGV0aGVyIHlvdXJcbiAqIGNsaWVudCBkaXNjb25uZWN0cyBjbGVhbmx5IG9yIG5vdCwgc28geW91IGNhbiByZWx5IG9uIHRoZW0gdG8gY2xlYW4gdXAgZGF0YVxuICogZXZlbiBpZiBhIGNvbm5lY3Rpb24gaXMgZHJvcHBlZCBvciBhIGNsaWVudCBjcmFzaGVzLlxuICpcbiAqIFRoZSBgb25EaXNjb25uZWN0YCBjbGFzcyBpcyBtb3N0IGNvbW1vbmx5IHVzZWQgdG8gbWFuYWdlIHByZXNlbmNlIGluXG4gKiBhcHBsaWNhdGlvbnMgd2hlcmUgaXQgaXMgdXNlZnVsIHRvIGRldGVjdCBob3cgbWFueSBjbGllbnRzIGFyZSBjb25uZWN0ZWQgYW5kXG4gKiB3aGVuIG90aGVyIGNsaWVudHMgZGlzY29ubmVjdC4gU2VlXG4gKiB7QGxpbmsgaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvZGF0YWJhc2Uvd2ViL29mZmxpbmUtY2FwYWJpbGl0aWVzIHwgRW5hYmxpbmcgT2ZmbGluZSBDYXBhYmlsaXRpZXMgaW4gSmF2YVNjcmlwdH1cbiAqIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICpcbiAqIFRvIGF2b2lkIHByb2JsZW1zIHdoZW4gYSBjb25uZWN0aW9uIGlzIGRyb3BwZWQgYmVmb3JlIHRoZSByZXF1ZXN0cyBjYW4gYmVcbiAqIHRyYW5zZmVycmVkIHRvIHRoZSBEYXRhYmFzZSBzZXJ2ZXIsIHRoZXNlIGZ1bmN0aW9ucyBzaG91bGQgYmUgY2FsbGVkIGJlZm9yZVxuICogd3JpdGluZyBhbnkgZGF0YS5cbiAqXG4gKiBOb3RlIHRoYXQgYG9uRGlzY29ubmVjdGAgb3BlcmF0aW9ucyBhcmUgb25seSB0cmlnZ2VyZWQgb25jZS4gSWYgeW91IHdhbnQgYW5cbiAqIG9wZXJhdGlvbiB0byBvY2N1ciBlYWNoIHRpbWUgYSBkaXNjb25uZWN0IG9jY3VycywgeW91J2xsIG5lZWQgdG8gcmUtZXN0YWJsaXNoXG4gKiB0aGUgYG9uRGlzY29ubmVjdGAgb3BlcmF0aW9ucyBlYWNoIHRpbWUgeW91IHJlY29ubmVjdC5cbiAqL1xuY2xhc3MgT25EaXNjb25uZWN0IHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKF9yZXBvLCBfcGF0aCkge1xuICAgICAgICB0aGlzLl9yZXBvID0gX3JlcG87XG4gICAgICAgIHRoaXMuX3BhdGggPSBfcGF0aDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FuY2VscyBhbGwgcHJldmlvdXNseSBxdWV1ZWQgYG9uRGlzY29ubmVjdCgpYCBzZXQgb3IgdXBkYXRlIGV2ZW50cyBmb3IgdGhpc1xuICAgICAqIGxvY2F0aW9uIGFuZCBhbGwgY2hpbGRyZW4uXG4gICAgICpcbiAgICAgKiBJZiBhIHdyaXRlIGhhcyBiZWVuIHF1ZXVlZCBmb3IgdGhpcyBsb2NhdGlvbiB2aWEgYSBgc2V0KClgIG9yIGB1cGRhdGUoKWAgYXQgYVxuICAgICAqIHBhcmVudCBsb2NhdGlvbiwgdGhlIHdyaXRlIGF0IHRoaXMgbG9jYXRpb24gd2lsbCBiZSBjYW5jZWxlZCwgdGhvdWdoIHdyaXRlc1xuICAgICAqIHRvIHNpYmxpbmcgbG9jYXRpb25zIHdpbGwgc3RpbGwgb2NjdXIuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZXNvbHZlcyB3aGVuIHN5bmNocm9uaXphdGlvbiB0byB0aGUgc2VydmVyIGlzIGNvbXBsZXRlLlxuICAgICAqL1xuICAgIGNhbmNlbCgpIHtcbiAgICAgICAgY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgcmVwb09uRGlzY29ubmVjdENhbmNlbCh0aGlzLl9yZXBvLCB0aGlzLl9wYXRoLCBkZWZlcnJlZC53cmFwQ2FsbGJhY2soKCkgPT4geyB9KSk7XG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbnN1cmVzIHRoZSBkYXRhIGF0IHRoaXMgbG9jYXRpb24gaXMgZGVsZXRlZCB3aGVuIHRoZSBjbGllbnQgaXMgZGlzY29ubmVjdGVkXG4gICAgICogKGR1ZSB0byBjbG9zaW5nIHRoZSBicm93c2VyLCBuYXZpZ2F0aW5nIHRvIGEgbmV3IHBhZ2UsIG9yIG5ldHdvcmsgaXNzdWVzKS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlc29sdmVzIHdoZW4gc3luY2hyb25pemF0aW9uIHRvIHRoZSBzZXJ2ZXIgaXMgY29tcGxldGUuXG4gICAgICovXG4gICAgcmVtb3ZlKCkge1xuICAgICAgICB2YWxpZGF0ZVdyaXRhYmxlUGF0aCgnT25EaXNjb25uZWN0LnJlbW92ZScsIHRoaXMuX3BhdGgpO1xuICAgICAgICBjb25zdCBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpO1xuICAgICAgICByZXBvT25EaXNjb25uZWN0U2V0KHRoaXMuX3JlcG8sIHRoaXMuX3BhdGgsIG51bGwsIGRlZmVycmVkLndyYXBDYWxsYmFjaygoKSA9PiB7IH0pKTtcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuc3VyZXMgdGhlIGRhdGEgYXQgdGhpcyBsb2NhdGlvbiBpcyBzZXQgdG8gdGhlIHNwZWNpZmllZCB2YWx1ZSB3aGVuIHRoZVxuICAgICAqIGNsaWVudCBpcyBkaXNjb25uZWN0ZWQgKGR1ZSB0byBjbG9zaW5nIHRoZSBicm93c2VyLCBuYXZpZ2F0aW5nIHRvIGEgbmV3IHBhZ2UsXG4gICAgICogb3IgbmV0d29yayBpc3N1ZXMpLlxuICAgICAqXG4gICAgICogYHNldCgpYCBpcyBlc3BlY2lhbGx5IHVzZWZ1bCBmb3IgaW1wbGVtZW50aW5nIFwicHJlc2VuY2VcIiBzeXN0ZW1zLCB3aGVyZSBhXG4gICAgICogdmFsdWUgc2hvdWxkIGJlIGNoYW5nZWQgb3IgY2xlYXJlZCB3aGVuIGEgdXNlciBkaXNjb25uZWN0cyBzbyB0aGF0IHRoZXlcbiAgICAgKiBhcHBlYXIgXCJvZmZsaW5lXCIgdG8gb3RoZXIgdXNlcnMuIFNlZVxuICAgICAqIHtAbGluayBodHRwczovL2ZpcmViYXNlLmdvb2dsZS5jb20vZG9jcy9kYXRhYmFzZS93ZWIvb2ZmbGluZS1jYXBhYmlsaXRpZXMgfCBFbmFibGluZyBPZmZsaW5lIENhcGFiaWxpdGllcyBpbiBKYXZhU2NyaXB0fVxuICAgICAqIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IGBvbkRpc2Nvbm5lY3RgIG9wZXJhdGlvbnMgYXJlIG9ubHkgdHJpZ2dlcmVkIG9uY2UuIElmIHlvdSB3YW50IGFuXG4gICAgICogb3BlcmF0aW9uIHRvIG9jY3VyIGVhY2ggdGltZSBhIGRpc2Nvbm5lY3Qgb2NjdXJzLCB5b3UnbGwgbmVlZCB0byByZS1lc3RhYmxpc2hcbiAgICAgKiB0aGUgYG9uRGlzY29ubmVjdGAgb3BlcmF0aW9ucyBlYWNoIHRpbWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gYmUgd3JpdHRlbiB0byB0aGlzIGxvY2F0aW9uIG9uIGRpc2Nvbm5lY3QgKGNhblxuICAgICAqIGJlIGFuIG9iamVjdCwgYXJyYXksIHN0cmluZywgbnVtYmVyLCBib29sZWFuLCBvciBudWxsKS5cbiAgICAgKiBAcmV0dXJucyBSZXNvbHZlcyB3aGVuIHN5bmNocm9uaXphdGlvbiB0byB0aGUgRGF0YWJhc2UgaXMgY29tcGxldGUuXG4gICAgICovXG4gICAgc2V0KHZhbHVlKSB7XG4gICAgICAgIHZhbGlkYXRlV3JpdGFibGVQYXRoKCdPbkRpc2Nvbm5lY3Quc2V0JywgdGhpcy5fcGF0aCk7XG4gICAgICAgIHZhbGlkYXRlRmlyZWJhc2VEYXRhQXJnKCdPbkRpc2Nvbm5lY3Quc2V0JywgdmFsdWUsIHRoaXMuX3BhdGgsIGZhbHNlKTtcbiAgICAgICAgY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgcmVwb09uRGlzY29ubmVjdFNldCh0aGlzLl9yZXBvLCB0aGlzLl9wYXRoLCB2YWx1ZSwgZGVmZXJyZWQud3JhcENhbGxiYWNrKCgpID0+IHsgfSkpO1xuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5zdXJlcyB0aGUgZGF0YSBhdCB0aGlzIGxvY2F0aW9uIGlzIHNldCB0byB0aGUgc3BlY2lmaWVkIHZhbHVlIGFuZCBwcmlvcml0eVxuICAgICAqIHdoZW4gdGhlIGNsaWVudCBpcyBkaXNjb25uZWN0ZWQgKGR1ZSB0byBjbG9zaW5nIHRoZSBicm93c2VyLCBuYXZpZ2F0aW5nIHRvIGFcbiAgICAgKiBuZXcgcGFnZSwgb3IgbmV0d29yayBpc3N1ZXMpLlxuICAgICAqXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIGJlIHdyaXR0ZW4gdG8gdGhpcyBsb2NhdGlvbiBvbiBkaXNjb25uZWN0IChjYW5cbiAgICAgKiBiZSBhbiBvYmplY3QsIGFycmF5LCBzdHJpbmcsIG51bWJlciwgYm9vbGVhbiwgb3IgbnVsbCkuXG4gICAgICogQHBhcmFtIHByaW9yaXR5IC0gVGhlIHByaW9yaXR5IHRvIGJlIHdyaXR0ZW4gKHN0cmluZywgbnVtYmVyLCBvciBudWxsKS5cbiAgICAgKiBAcmV0dXJucyBSZXNvbHZlcyB3aGVuIHN5bmNocm9uaXphdGlvbiB0byB0aGUgRGF0YWJhc2UgaXMgY29tcGxldGUuXG4gICAgICovXG4gICAgc2V0V2l0aFByaW9yaXR5KHZhbHVlLCBwcmlvcml0eSkge1xuICAgICAgICB2YWxpZGF0ZVdyaXRhYmxlUGF0aCgnT25EaXNjb25uZWN0LnNldFdpdGhQcmlvcml0eScsIHRoaXMuX3BhdGgpO1xuICAgICAgICB2YWxpZGF0ZUZpcmViYXNlRGF0YUFyZygnT25EaXNjb25uZWN0LnNldFdpdGhQcmlvcml0eScsIHZhbHVlLCB0aGlzLl9wYXRoLCBmYWxzZSk7XG4gICAgICAgIHZhbGlkYXRlUHJpb3JpdHkoJ09uRGlzY29ubmVjdC5zZXRXaXRoUHJpb3JpdHknLCBwcmlvcml0eSwgZmFsc2UpO1xuICAgICAgICBjb25zdCBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpO1xuICAgICAgICByZXBvT25EaXNjb25uZWN0U2V0V2l0aFByaW9yaXR5KHRoaXMuX3JlcG8sIHRoaXMuX3BhdGgsIHZhbHVlLCBwcmlvcml0eSwgZGVmZXJyZWQud3JhcENhbGxiYWNrKCgpID0+IHsgfSkpO1xuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV3JpdGVzIG11bHRpcGxlIHZhbHVlcyBhdCB0aGlzIGxvY2F0aW9uIHdoZW4gdGhlIGNsaWVudCBpcyBkaXNjb25uZWN0ZWQgKGR1ZVxuICAgICAqIHRvIGNsb3NpbmcgdGhlIGJyb3dzZXIsIG5hdmlnYXRpbmcgdG8gYSBuZXcgcGFnZSwgb3IgbmV0d29yayBpc3N1ZXMpLlxuICAgICAqXG4gICAgICogVGhlIGB2YWx1ZXNgIGFyZ3VtZW50IGNvbnRhaW5zIG11bHRpcGxlIHByb3BlcnR5LXZhbHVlIHBhaXJzIHRoYXQgd2lsbCBiZVxuICAgICAqIHdyaXR0ZW4gdG8gdGhlIERhdGFiYXNlIHRvZ2V0aGVyLiBFYWNoIGNoaWxkIHByb3BlcnR5IGNhbiBlaXRoZXIgYmUgYSBzaW1wbGVcbiAgICAgKiBwcm9wZXJ0eSAoZm9yIGV4YW1wbGUsIFwibmFtZVwiKSBvciBhIHJlbGF0aXZlIHBhdGggKGZvciBleGFtcGxlLCBcIm5hbWUvZmlyc3RcIilcbiAgICAgKiBmcm9tIHRoZSBjdXJyZW50IGxvY2F0aW9uIHRvIHRoZSBkYXRhIHRvIHVwZGF0ZS5cbiAgICAgKlxuICAgICAqIEFzIG9wcG9zZWQgdG8gdGhlIGBzZXQoKWAgbWV0aG9kLCBgdXBkYXRlKClgIGNhbiBiZSB1c2UgdG8gc2VsZWN0aXZlbHkgdXBkYXRlXG4gICAgICogb25seSB0aGUgcmVmZXJlbmNlZCBwcm9wZXJ0aWVzIGF0IHRoZSBjdXJyZW50IGxvY2F0aW9uIChpbnN0ZWFkIG9mIHJlcGxhY2luZ1xuICAgICAqIGFsbCB0aGUgY2hpbGQgcHJvcGVydGllcyBhdCB0aGUgY3VycmVudCBsb2NhdGlvbikuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdmFsdWVzIC0gT2JqZWN0IGNvbnRhaW5pbmcgbXVsdGlwbGUgdmFsdWVzLlxuICAgICAqIEByZXR1cm5zIFJlc29sdmVzIHdoZW4gc3luY2hyb25pemF0aW9uIHRvIHRoZSBEYXRhYmFzZSBpcyBjb21wbGV0ZS5cbiAgICAgKi9cbiAgICB1cGRhdGUodmFsdWVzKSB7XG4gICAgICAgIHZhbGlkYXRlV3JpdGFibGVQYXRoKCdPbkRpc2Nvbm5lY3QudXBkYXRlJywgdGhpcy5fcGF0aCk7XG4gICAgICAgIHZhbGlkYXRlRmlyZWJhc2VNZXJnZURhdGFBcmcoJ09uRGlzY29ubmVjdC51cGRhdGUnLCB2YWx1ZXMsIHRoaXMuX3BhdGgsIGZhbHNlKTtcbiAgICAgICAgY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgcmVwb09uRGlzY29ubmVjdFVwZGF0ZSh0aGlzLl9yZXBvLCB0aGlzLl9wYXRoLCB2YWx1ZXMsIGRlZmVycmVkLndyYXBDYWxsYmFjaygoKSA9PiB7IH0pKTtcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuY2xhc3MgUXVlcnlJbXBsIHtcbiAgICAvKipcbiAgICAgKiBAaGlkZWNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoX3JlcG8sIF9wYXRoLCBfcXVlcnlQYXJhbXMsIF9vcmRlckJ5Q2FsbGVkKSB7XG4gICAgICAgIHRoaXMuX3JlcG8gPSBfcmVwbztcbiAgICAgICAgdGhpcy5fcGF0aCA9IF9wYXRoO1xuICAgICAgICB0aGlzLl9xdWVyeVBhcmFtcyA9IF9xdWVyeVBhcmFtcztcbiAgICAgICAgdGhpcy5fb3JkZXJCeUNhbGxlZCA9IF9vcmRlckJ5Q2FsbGVkO1xuICAgIH1cbiAgICBnZXQga2V5KCkge1xuICAgICAgICBpZiAocGF0aElzRW1wdHkodGhpcy5fcGF0aCkpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHBhdGhHZXRCYWNrKHRoaXMuX3BhdGgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCByZWYoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVmZXJlbmNlSW1wbCh0aGlzLl9yZXBvLCB0aGlzLl9wYXRoKTtcbiAgICB9XG4gICAgZ2V0IF9xdWVyeUlkZW50aWZpZXIoKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHF1ZXJ5UGFyYW1zR2V0UXVlcnlPYmplY3QodGhpcy5fcXVlcnlQYXJhbXMpO1xuICAgICAgICBjb25zdCBpZCA9IE9iamVjdFRvVW5pcXVlS2V5KG9iaik7XG4gICAgICAgIHJldHVybiBpZCA9PT0gJ3t9JyA/ICdkZWZhdWx0JyA6IGlkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbiBvYmplY3QgcmVwcmVzZW50YXRpb24gb2YgdGhlIHF1ZXJ5IHBhcmFtZXRlcnMgdXNlZCBieSB0aGlzIFF1ZXJ5LlxuICAgICAqL1xuICAgIGdldCBfcXVlcnlPYmplY3QoKSB7XG4gICAgICAgIHJldHVybiBxdWVyeVBhcmFtc0dldFF1ZXJ5T2JqZWN0KHRoaXMuX3F1ZXJ5UGFyYW1zKTtcbiAgICB9XG4gICAgaXNFcXVhbChvdGhlcikge1xuICAgICAgICBvdGhlciA9IGdldE1vZHVsYXJJbnN0YW5jZShvdGhlcik7XG4gICAgICAgIGlmICghKG90aGVyIGluc3RhbmNlb2YgUXVlcnlJbXBsKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNhbWVSZXBvID0gdGhpcy5fcmVwbyA9PT0gb3RoZXIuX3JlcG87XG4gICAgICAgIGNvbnN0IHNhbWVQYXRoID0gcGF0aEVxdWFscyh0aGlzLl9wYXRoLCBvdGhlci5fcGF0aCk7XG4gICAgICAgIGNvbnN0IHNhbWVRdWVyeUlkZW50aWZpZXIgPSB0aGlzLl9xdWVyeUlkZW50aWZpZXIgPT09IG90aGVyLl9xdWVyeUlkZW50aWZpZXI7XG4gICAgICAgIHJldHVybiBzYW1lUmVwbyAmJiBzYW1lUGF0aCAmJiBzYW1lUXVlcnlJZGVudGlmaWVyO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVwby50b1N0cmluZygpICsgcGF0aFRvVXJsRW5jb2RlZFN0cmluZyh0aGlzLl9wYXRoKTtcbiAgICB9XG59XG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0IG5vIG90aGVyIG9yZGVyIGJ5IGNhbGwgaGFzIGJlZW4gbWFkZVxuICovXG5mdW5jdGlvbiB2YWxpZGF0ZU5vUHJldmlvdXNPcmRlckJ5Q2FsbChxdWVyeSwgZm5OYW1lKSB7XG4gICAgaWYgKHF1ZXJ5Ll9vcmRlckJ5Q2FsbGVkID09PSB0cnVlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihmbk5hbWUgKyBcIjogWW91IGNhbid0IGNvbWJpbmUgbXVsdGlwbGUgb3JkZXJCeSBjYWxscy5cIik7XG4gICAgfVxufVxuLyoqXG4gKiBWYWxpZGF0ZXMgc3RhcnQvZW5kIHZhbHVlcyBmb3IgcXVlcmllcy5cbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGVRdWVyeUVuZHBvaW50cyhwYXJhbXMpIHtcbiAgICBsZXQgc3RhcnROb2RlID0gbnVsbDtcbiAgICBsZXQgZW5kTm9kZSA9IG51bGw7XG4gICAgaWYgKHBhcmFtcy5oYXNTdGFydCgpKSB7XG4gICAgICAgIHN0YXJ0Tm9kZSA9IHBhcmFtcy5nZXRJbmRleFN0YXJ0VmFsdWUoKTtcbiAgICB9XG4gICAgaWYgKHBhcmFtcy5oYXNFbmQoKSkge1xuICAgICAgICBlbmROb2RlID0gcGFyYW1zLmdldEluZGV4RW5kVmFsdWUoKTtcbiAgICB9XG4gICAgaWYgKHBhcmFtcy5nZXRJbmRleCgpID09PSBLRVlfSU5ERVgpIHtcbiAgICAgICAgY29uc3QgdG9vTWFueUFyZ3NFcnJvciA9ICdRdWVyeTogV2hlbiBvcmRlcmluZyBieSBrZXksIHlvdSBtYXkgb25seSBwYXNzIG9uZSBhcmd1bWVudCB0byAnICtcbiAgICAgICAgICAgICdzdGFydEF0KCksIGVuZEF0KCksIG9yIGVxdWFsVG8oKS4nO1xuICAgICAgICBjb25zdCB3cm9uZ0FyZ1R5cGVFcnJvciA9ICdRdWVyeTogV2hlbiBvcmRlcmluZyBieSBrZXksIHRoZSBhcmd1bWVudCBwYXNzZWQgdG8gc3RhcnRBdCgpLCBzdGFydEFmdGVyKCksICcgK1xuICAgICAgICAgICAgJ2VuZEF0KCksIGVuZEJlZm9yZSgpLCBvciBlcXVhbFRvKCkgbXVzdCBiZSBhIHN0cmluZy4nO1xuICAgICAgICBpZiAocGFyYW1zLmhhc1N0YXJ0KCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0TmFtZSA9IHBhcmFtcy5nZXRJbmRleFN0YXJ0TmFtZSgpO1xuICAgICAgICAgICAgaWYgKHN0YXJ0TmFtZSAhPT0gTUlOX05BTUUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IodG9vTWFueUFyZ3NFcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2Ygc3RhcnROb2RlICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcih3cm9uZ0FyZ1R5cGVFcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtcy5oYXNFbmQoKSkge1xuICAgICAgICAgICAgY29uc3QgZW5kTmFtZSA9IHBhcmFtcy5nZXRJbmRleEVuZE5hbWUoKTtcbiAgICAgICAgICAgIGlmIChlbmROYW1lICE9PSBNQVhfTkFNRSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcih0b29NYW55QXJnc0Vycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBlbmROb2RlICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcih3cm9uZ0FyZ1R5cGVFcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAocGFyYW1zLmdldEluZGV4KCkgPT09IFBSSU9SSVRZX0lOREVYKSB7XG4gICAgICAgIGlmICgoc3RhcnROb2RlICE9IG51bGwgJiYgIWlzVmFsaWRQcmlvcml0eShzdGFydE5vZGUpKSB8fFxuICAgICAgICAgICAgKGVuZE5vZGUgIT0gbnVsbCAmJiAhaXNWYWxpZFByaW9yaXR5KGVuZE5vZGUpKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdRdWVyeTogV2hlbiBvcmRlcmluZyBieSBwcmlvcml0eSwgdGhlIGZpcnN0IGFyZ3VtZW50IHBhc3NlZCB0byBzdGFydEF0KCksICcgK1xuICAgICAgICAgICAgICAgICdzdGFydEFmdGVyKCkgZW5kQXQoKSwgZW5kQmVmb3JlKCksIG9yIGVxdWFsVG8oKSBtdXN0IGJlIGEgdmFsaWQgcHJpb3JpdHkgdmFsdWUgJyArXG4gICAgICAgICAgICAgICAgJyhudWxsLCBhIG51bWJlciwgb3IgYSBzdHJpbmcpLicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBhc3NlcnQocGFyYW1zLmdldEluZGV4KCkgaW5zdGFuY2VvZiBQYXRoSW5kZXggfHxcbiAgICAgICAgICAgIHBhcmFtcy5nZXRJbmRleCgpID09PSBWQUxVRV9JTkRFWCwgJ3Vua25vd24gaW5kZXggdHlwZS4nKTtcbiAgICAgICAgaWYgKChzdGFydE5vZGUgIT0gbnVsbCAmJiB0eXBlb2Ygc3RhcnROb2RlID09PSAnb2JqZWN0JykgfHxcbiAgICAgICAgICAgIChlbmROb2RlICE9IG51bGwgJiYgdHlwZW9mIGVuZE5vZGUgPT09ICdvYmplY3QnKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdRdWVyeTogRmlyc3QgYXJndW1lbnQgcGFzc2VkIHRvIHN0YXJ0QXQoKSwgc3RhcnRBZnRlcigpLCBlbmRBdCgpLCBlbmRCZWZvcmUoKSwgb3IgJyArXG4gICAgICAgICAgICAgICAgJ2VxdWFsVG8oKSBjYW5ub3QgYmUgYW4gb2JqZWN0LicpO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhhdCBsaW1pdCogaGFzIGJlZW4gY2FsbGVkIHdpdGggdGhlIGNvcnJlY3QgY29tYmluYXRpb24gb2YgcGFyYW1ldGVyc1xuICovXG5mdW5jdGlvbiB2YWxpZGF0ZUxpbWl0KHBhcmFtcykge1xuICAgIGlmIChwYXJhbXMuaGFzU3RhcnQoKSAmJlxuICAgICAgICBwYXJhbXMuaGFzRW5kKCkgJiZcbiAgICAgICAgcGFyYW1zLmhhc0xpbWl0KCkgJiZcbiAgICAgICAgIXBhcmFtcy5oYXNBbmNob3JlZExpbWl0KCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUXVlcnk6IENhbid0IGNvbWJpbmUgc3RhcnRBdCgpLCBzdGFydEFmdGVyKCksIGVuZEF0KCksIGVuZEJlZm9yZSgpLCBhbmQgbGltaXQoKS4gVXNlIFwiICtcbiAgICAgICAgICAgICdsaW1pdFRvRmlyc3QoKSBvciBsaW1pdFRvTGFzdCgpIGluc3RlYWQuJyk7XG4gICAgfVxufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuY2xhc3MgUmVmZXJlbmNlSW1wbCBleHRlbmRzIFF1ZXJ5SW1wbCB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3RvcihyZXBvLCBwYXRoKSB7XG4gICAgICAgIHN1cGVyKHJlcG8sIHBhdGgsIG5ldyBRdWVyeVBhcmFtcygpLCBmYWxzZSk7XG4gICAgfVxuICAgIGdldCBwYXJlbnQoKSB7XG4gICAgICAgIGNvbnN0IHBhcmVudFBhdGggPSBwYXRoUGFyZW50KHRoaXMuX3BhdGgpO1xuICAgICAgICByZXR1cm4gcGFyZW50UGF0aCA9PT0gbnVsbFxuICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICA6IG5ldyBSZWZlcmVuY2VJbXBsKHRoaXMuX3JlcG8sIHBhcmVudFBhdGgpO1xuICAgIH1cbiAgICBnZXQgcm9vdCgpIHtcbiAgICAgICAgbGV0IHJlZiA9IHRoaXM7XG4gICAgICAgIHdoaWxlIChyZWYucGFyZW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgICByZWYgPSByZWYucGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZWY7XG4gICAgfVxufVxuLyoqXG4gKiBBIGBEYXRhU25hcHNob3RgIGNvbnRhaW5zIGRhdGEgZnJvbSBhIERhdGFiYXNlIGxvY2F0aW9uLlxuICpcbiAqIEFueSB0aW1lIHlvdSByZWFkIGRhdGEgZnJvbSB0aGUgRGF0YWJhc2UsIHlvdSByZWNlaXZlIHRoZSBkYXRhIGFzIGFcbiAqIGBEYXRhU25hcHNob3RgLiBBIGBEYXRhU25hcHNob3RgIGlzIHBhc3NlZCB0byB0aGUgZXZlbnQgY2FsbGJhY2tzIHlvdSBhdHRhY2hcbiAqIHdpdGggYG9uKClgIG9yIGBvbmNlKClgLiBZb3UgY2FuIGV4dHJhY3QgdGhlIGNvbnRlbnRzIG9mIHRoZSBzbmFwc2hvdCBhcyBhXG4gKiBKYXZhU2NyaXB0IG9iamVjdCBieSBjYWxsaW5nIHRoZSBgdmFsKClgIG1ldGhvZC4gQWx0ZXJuYXRpdmVseSwgeW91IGNhblxuICogdHJhdmVyc2UgaW50byB0aGUgc25hcHNob3QgYnkgY2FsbGluZyBgY2hpbGQoKWAgdG8gcmV0dXJuIGNoaWxkIHNuYXBzaG90c1xuICogKHdoaWNoIHlvdSBjb3VsZCB0aGVuIGNhbGwgYHZhbCgpYCBvbikuXG4gKlxuICogQSBgRGF0YVNuYXBzaG90YCBpcyBhbiBlZmZpY2llbnRseSBnZW5lcmF0ZWQsIGltbXV0YWJsZSBjb3B5IG9mIHRoZSBkYXRhIGF0XG4gKiBhIERhdGFiYXNlIGxvY2F0aW9uLiBJdCBjYW5ub3QgYmUgbW9kaWZpZWQgYW5kIHdpbGwgbmV2ZXIgY2hhbmdlICh0byBtb2RpZnlcbiAqIGRhdGEsIHlvdSBhbHdheXMgY2FsbCB0aGUgYHNldCgpYCBtZXRob2Qgb24gYSBgUmVmZXJlbmNlYCBkaXJlY3RseSkuXG4gKi9cbmNsYXNzIERhdGFTbmFwc2hvdCB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIF9ub2RlIC0gQSBTbmFwc2hvdE5vZGUgdG8gd3JhcC5cbiAgICAgKiBAcGFyYW0gcmVmIC0gVGhlIGxvY2F0aW9uIHRoaXMgc25hcHNob3QgY2FtZSBmcm9tLlxuICAgICAqIEBwYXJhbSBfaW5kZXggLSBUaGUgaXRlcmF0aW9uIG9yZGVyIGZvciB0aGlzIHNuYXBzaG90XG4gICAgICogQGhpZGVjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKF9ub2RlLCBcbiAgICAvKipcbiAgICAgKiBUaGUgbG9jYXRpb24gb2YgdGhpcyBEYXRhU25hcHNob3QuXG4gICAgICovXG4gICAgcmVmLCBfaW5kZXgpIHtcbiAgICAgICAgdGhpcy5fbm9kZSA9IF9ub2RlO1xuICAgICAgICB0aGlzLnJlZiA9IHJlZjtcbiAgICAgICAgdGhpcy5faW5kZXggPSBfaW5kZXg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHByaW9yaXR5IHZhbHVlIG9mIHRoZSBkYXRhIGluIHRoaXMgYERhdGFTbmFwc2hvdGAuXG4gICAgICpcbiAgICAgKiBBcHBsaWNhdGlvbnMgbmVlZCBub3QgdXNlIHByaW9yaXR5IGJ1dCBjYW4gb3JkZXIgY29sbGVjdGlvbnMgYnlcbiAgICAgKiBvcmRpbmFyeSBwcm9wZXJ0aWVzIChzZWVcbiAgICAgKiB7QGxpbmsgaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvZGF0YWJhc2Uvd2ViL2xpc3RzLW9mLWRhdGEjc29ydGluZ19hbmRfZmlsdGVyaW5nX2RhdGEgfFNvcnRpbmcgYW5kIGZpbHRlcmluZyBkYXRhfVxuICAgICAqICkuXG4gICAgICovXG4gICAgZ2V0IHByaW9yaXR5KCkge1xuICAgICAgICAvLyB0eXBlY2FzdCBoZXJlIGJlY2F1c2Ugd2UgbmV2ZXIgcmV0dXJuIGRlZmVycmVkIHZhbHVlcyBvciBpbnRlcm5hbCBwcmlvcml0aWVzIChNQVhfUFJJT1JJVFkpXG4gICAgICAgIHJldHVybiB0aGlzLl9ub2RlLmdldFByaW9yaXR5KCkudmFsKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBrZXkgKGxhc3QgcGFydCBvZiB0aGUgcGF0aCkgb2YgdGhlIGxvY2F0aW9uIG9mIHRoaXMgYERhdGFTbmFwc2hvdGAuXG4gICAgICpcbiAgICAgKiBUaGUgbGFzdCB0b2tlbiBpbiBhIERhdGFiYXNlIGxvY2F0aW9uIGlzIGNvbnNpZGVyZWQgaXRzIGtleS4gRm9yIGV4YW1wbGUsXG4gICAgICogXCJhZGFcIiBpcyB0aGUga2V5IGZvciB0aGUgL3VzZXJzL2FkYS8gbm9kZS4gQWNjZXNzaW5nIHRoZSBrZXkgb24gYW55XG4gICAgICogYERhdGFTbmFwc2hvdGAgd2lsbCByZXR1cm4gdGhlIGtleSBmb3IgdGhlIGxvY2F0aW9uIHRoYXQgZ2VuZXJhdGVkIGl0LlxuICAgICAqIEhvd2V2ZXIsIGFjY2Vzc2luZyB0aGUga2V5IG9uIHRoZSByb290IFVSTCBvZiBhIERhdGFiYXNlIHdpbGwgcmV0dXJuXG4gICAgICogYG51bGxgLlxuICAgICAqL1xuICAgIGdldCBrZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZi5rZXk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgY2hpbGQgcHJvcGVydGllcyBvZiB0aGlzIGBEYXRhU25hcHNob3RgLiAqL1xuICAgIGdldCBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbm9kZS5udW1DaGlsZHJlbigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIGFub3RoZXIgYERhdGFTbmFwc2hvdGAgZm9yIHRoZSBsb2NhdGlvbiBhdCB0aGUgc3BlY2lmaWVkIHJlbGF0aXZlIHBhdGguXG4gICAgICpcbiAgICAgKiBQYXNzaW5nIGEgcmVsYXRpdmUgcGF0aCB0byB0aGUgYGNoaWxkKClgIG1ldGhvZCBvZiBhIERhdGFTbmFwc2hvdCByZXR1cm5zXG4gICAgICogYW5vdGhlciBgRGF0YVNuYXBzaG90YCBmb3IgdGhlIGxvY2F0aW9uIGF0IHRoZSBzcGVjaWZpZWQgcmVsYXRpdmUgcGF0aC4gVGhlXG4gICAgICogcmVsYXRpdmUgcGF0aCBjYW4gZWl0aGVyIGJlIGEgc2ltcGxlIGNoaWxkIG5hbWUgKGZvciBleGFtcGxlLCBcImFkYVwiKSBvciBhXG4gICAgICogZGVlcGVyLCBzbGFzaC1zZXBhcmF0ZWQgcGF0aCAoZm9yIGV4YW1wbGUsIFwiYWRhL25hbWUvZmlyc3RcIikuIElmIHRoZSBjaGlsZFxuICAgICAqIGxvY2F0aW9uIGhhcyBubyBkYXRhLCBhbiBlbXB0eSBgRGF0YVNuYXBzaG90YCAodGhhdCBpcywgYSBgRGF0YVNuYXBzaG90YFxuICAgICAqIHdob3NlIHZhbHVlIGlzIGBudWxsYCkgaXMgcmV0dXJuZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGF0aCAtIEEgcmVsYXRpdmUgcGF0aCB0byB0aGUgbG9jYXRpb24gb2YgY2hpbGQgZGF0YS5cbiAgICAgKi9cbiAgICBjaGlsZChwYXRoKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkUGF0aCA9IG5ldyBQYXRoKHBhdGgpO1xuICAgICAgICBjb25zdCBjaGlsZFJlZiA9IGNoaWxkKHRoaXMucmVmLCBwYXRoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRhU25hcHNob3QodGhpcy5fbm9kZS5nZXRDaGlsZChjaGlsZFBhdGgpLCBjaGlsZFJlZiwgUFJJT1JJVFlfSU5ERVgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgRGF0YVNuYXBzaG90YCBjb250YWlucyBhbnkgZGF0YS4gSXQgaXMgc2xpZ2h0bHkgbW9yZVxuICAgICAqIGVmZmljaWVudCB0aGFuIHVzaW5nIGBzbmFwc2hvdC52YWwoKSAhPT0gbnVsbGAuXG4gICAgICovXG4gICAgZXhpc3RzKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMuX25vZGUuaXNFbXB0eSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFeHBvcnRzIHRoZSBlbnRpcmUgY29udGVudHMgb2YgdGhlIERhdGFTbmFwc2hvdCBhcyBhIEphdmFTY3JpcHQgb2JqZWN0LlxuICAgICAqXG4gICAgICogVGhlIGBleHBvcnRWYWwoKWAgbWV0aG9kIGlzIHNpbWlsYXIgdG8gYHZhbCgpYCwgZXhjZXB0IHByaW9yaXR5IGluZm9ybWF0aW9uXG4gICAgICogaXMgaW5jbHVkZWQgKGlmIGF2YWlsYWJsZSksIG1ha2luZyBpdCBzdWl0YWJsZSBmb3IgYmFja2luZyB1cCB5b3VyIGRhdGEuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgRGF0YVNuYXBzaG90J3MgY29udGVudHMgYXMgYSBKYXZhU2NyaXB0IHZhbHVlIChPYmplY3QsXG4gICAgICogICBBcnJheSwgc3RyaW5nLCBudW1iZXIsIGJvb2xlYW4sIG9yIGBudWxsYCkuXG4gICAgICovXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBleHBvcnRWYWwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ub2RlLnZhbCh0cnVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW51bWVyYXRlcyB0aGUgdG9wLWxldmVsIGNoaWxkcmVuIGluIHRoZSBgSXRlcmF0ZWREYXRhU25hcHNob3RgLlxuICAgICAqXG4gICAgICogQmVjYXVzZSBvZiB0aGUgd2F5IEphdmFTY3JpcHQgb2JqZWN0cyB3b3JrLCB0aGUgb3JkZXJpbmcgb2YgZGF0YSBpbiB0aGVcbiAgICAgKiBKYXZhU2NyaXB0IG9iamVjdCByZXR1cm5lZCBieSBgdmFsKClgIGlzIG5vdCBndWFyYW50ZWVkIHRvIG1hdGNoIHRoZVxuICAgICAqIG9yZGVyaW5nIG9uIHRoZSBzZXJ2ZXIgbm9yIHRoZSBvcmRlcmluZyBvZiBgb25DaGlsZEFkZGVkKClgIGV2ZW50cy4gVGhhdCBpc1xuICAgICAqIHdoZXJlIGBmb3JFYWNoKClgIGNvbWVzIGluIGhhbmR5LiBJdCBndWFyYW50ZWVzIHRoZSBjaGlsZHJlbiBvZiBhXG4gICAgICogYERhdGFTbmFwc2hvdGAgd2lsbCBiZSBpdGVyYXRlZCBpbiB0aGVpciBxdWVyeSBvcmRlci5cbiAgICAgKlxuICAgICAqIElmIG5vIGV4cGxpY2l0IGBvcmRlckJ5KigpYCBtZXRob2QgaXMgdXNlZCwgcmVzdWx0cyBhcmUgcmV0dXJuZWRcbiAgICAgKiBvcmRlcmVkIGJ5IGtleSAodW5sZXNzIHByaW9yaXRpZXMgYXJlIHVzZWQsIGluIHdoaWNoIGNhc2UsIHJlc3VsdHMgYXJlXG4gICAgICogcmV0dXJuZWQgYnkgcHJpb3JpdHkpLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFjdGlvbiAtIEEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCBmb3IgZWFjaCBjaGlsZCBEYXRhU25hcHNob3QuXG4gICAgICogVGhlIGNhbGxiYWNrIGNhbiByZXR1cm4gdHJ1ZSB0byBjYW5jZWwgZnVydGhlciBlbnVtZXJhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIGVudW1lcmF0aW9uIHdhcyBjYW5jZWxlZCBkdWUgdG8geW91ciBjYWxsYmFjayByZXR1cm5pbmdcbiAgICAgKiB0cnVlLlxuICAgICAqL1xuICAgIGZvckVhY2goYWN0aW9uKSB7XG4gICAgICAgIGlmICh0aGlzLl9ub2RlLmlzTGVhZk5vZGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNoaWxkcmVuTm9kZSA9IHRoaXMuX25vZGU7XG4gICAgICAgIC8vIFNhbml0aXplIHRoZSByZXR1cm4gdmFsdWUgdG8gYSBib29sZWFuLiBDaGlsZHJlbk5vZGUuZm9yRWFjaENoaWxkIGhhcyBhIHdlaXJkIHJldHVybiB0eXBlLi4uXG4gICAgICAgIHJldHVybiAhIWNoaWxkcmVuTm9kZS5mb3JFYWNoQ2hpbGQodGhpcy5faW5kZXgsIChrZXksIG5vZGUpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBhY3Rpb24obmV3IERhdGFTbmFwc2hvdChub2RlLCBjaGlsZCh0aGlzLnJlZiwga2V5KSwgUFJJT1JJVFlfSU5ERVgpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgc3BlY2lmaWVkIGNoaWxkIHBhdGggaGFzIChub24tbnVsbCkgZGF0YS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXRoIC0gQSByZWxhdGl2ZSBwYXRoIHRvIHRoZSBsb2NhdGlvbiBvZiBhIHBvdGVudGlhbCBjaGlsZC5cbiAgICAgKiBAcmV0dXJucyBgdHJ1ZWAgaWYgZGF0YSBleGlzdHMgYXQgdGhlIHNwZWNpZmllZCBjaGlsZCBwYXRoOyBlbHNlXG4gICAgICogIGBmYWxzZWAuXG4gICAgICovXG4gICAgaGFzQ2hpbGQocGF0aCkge1xuICAgICAgICBjb25zdCBjaGlsZFBhdGggPSBuZXcgUGF0aChwYXRoKTtcbiAgICAgICAgcmV0dXJuICF0aGlzLl9ub2RlLmdldENoaWxkKGNoaWxkUGF0aCkuaXNFbXB0eSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSBgRGF0YVNuYXBzaG90YCBoYXMgYW55IG5vbi1gbnVsbGAgY2hpbGRcbiAgICAgKiBwcm9wZXJ0aWVzLlxuICAgICAqXG4gICAgICogWW91IGNhbiB1c2UgYGhhc0NoaWxkcmVuKClgIHRvIGRldGVybWluZSBpZiBhIGBEYXRhU25hcHNob3RgIGhhcyBhbnlcbiAgICAgKiBjaGlsZHJlbi4gSWYgaXQgZG9lcywgeW91IGNhbiBlbnVtZXJhdGUgdGhlbSB1c2luZyBgZm9yRWFjaCgpYC4gSWYgaXRcbiAgICAgKiBkb2Vzbid0LCB0aGVuIGVpdGhlciB0aGlzIHNuYXBzaG90IGNvbnRhaW5zIGEgcHJpbWl0aXZlIHZhbHVlICh3aGljaCBjYW4gYmVcbiAgICAgKiByZXRyaWV2ZWQgd2l0aCBgdmFsKClgKSBvciBpdCBpcyBlbXB0eSAoaW4gd2hpY2ggY2FzZSwgYHZhbCgpYCB3aWxsIHJldHVyblxuICAgICAqIGBudWxsYCkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgc25hcHNob3QgaGFzIGFueSBjaGlsZHJlbjsgZWxzZSBmYWxzZS5cbiAgICAgKi9cbiAgICBoYXNDaGlsZHJlbigpIHtcbiAgICAgICAgaWYgKHRoaXMuX25vZGUuaXNMZWFmTm9kZSgpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gIXRoaXMuX25vZGUuaXNFbXB0eSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBKU09OLXNlcmlhbGl6YWJsZSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIG9iamVjdC5cbiAgICAgKi9cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV4cG9ydFZhbCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFeHRyYWN0cyBhIEphdmFTY3JpcHQgdmFsdWUgZnJvbSBhIGBEYXRhU25hcHNob3RgLlxuICAgICAqXG4gICAgICogRGVwZW5kaW5nIG9uIHRoZSBkYXRhIGluIGEgYERhdGFTbmFwc2hvdGAsIHRoZSBgdmFsKClgIG1ldGhvZCBtYXkgcmV0dXJuIGFcbiAgICAgKiBzY2FsYXIgdHlwZSAoc3RyaW5nLCBudW1iZXIsIG9yIGJvb2xlYW4pLCBhbiBhcnJheSwgb3IgYW4gb2JqZWN0LiBJdCBtYXlcbiAgICAgKiBhbHNvIHJldHVybiBudWxsLCBpbmRpY2F0aW5nIHRoYXQgdGhlIGBEYXRhU25hcHNob3RgIGlzIGVtcHR5IChjb250YWlucyBub1xuICAgICAqIGRhdGEpLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIERhdGFTbmFwc2hvdCdzIGNvbnRlbnRzIGFzIGEgSmF2YVNjcmlwdCB2YWx1ZSAoT2JqZWN0LFxuICAgICAqICAgQXJyYXksIHN0cmluZywgbnVtYmVyLCBib29sZWFuLCBvciBgbnVsbGApLlxuICAgICAqL1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgdmFsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbm9kZS52YWwoKTtcbiAgICB9XG59XG4vKipcbiAqXG4gKiBSZXR1cm5zIGEgYFJlZmVyZW5jZWAgcmVwcmVzZW50aW5nIHRoZSBsb2NhdGlvbiBpbiB0aGUgRGF0YWJhc2VcbiAqIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHByb3ZpZGVkIHBhdGguIElmIG5vIHBhdGggaXMgcHJvdmlkZWQsIHRoZSBgUmVmZXJlbmNlYFxuICogd2lsbCBwb2ludCB0byB0aGUgcm9vdCBvZiB0aGUgRGF0YWJhc2UuXG4gKlxuICogQHBhcmFtIGRiIC0gVGhlIGRhdGFiYXNlIGluc3RhbmNlIHRvIG9idGFpbiBhIHJlZmVyZW5jZSBmb3IuXG4gKiBAcGFyYW0gcGF0aCAtIE9wdGlvbmFsIHBhdGggcmVwcmVzZW50aW5nIHRoZSBsb2NhdGlvbiB0aGUgcmV0dXJuZWRcbiAqICAgYFJlZmVyZW5jZWAgd2lsbCBwb2ludC4gSWYgbm90IHByb3ZpZGVkLCB0aGUgcmV0dXJuZWQgYFJlZmVyZW5jZWAgd2lsbFxuICogICBwb2ludCB0byB0aGUgcm9vdCBvZiB0aGUgRGF0YWJhc2UuXG4gKiBAcmV0dXJucyBJZiBhIHBhdGggaXMgcHJvdmlkZWQsIGEgYFJlZmVyZW5jZWBcbiAqICAgcG9pbnRpbmcgdG8gdGhlIHByb3ZpZGVkIHBhdGguIE90aGVyd2lzZSwgYSBgUmVmZXJlbmNlYCBwb2ludGluZyB0byB0aGVcbiAqICAgcm9vdCBvZiB0aGUgRGF0YWJhc2UuXG4gKi9cbmZ1bmN0aW9uIHJlZihkYiwgcGF0aCkge1xuICAgIGRiID0gZ2V0TW9kdWxhckluc3RhbmNlKGRiKTtcbiAgICBkYi5fY2hlY2tOb3REZWxldGVkKCdyZWYnKTtcbiAgICByZXR1cm4gcGF0aCAhPT0gdW5kZWZpbmVkID8gY2hpbGQoZGIuX3Jvb3QsIHBhdGgpIDogZGIuX3Jvb3Q7XG59XG4vKipcbiAqIFJldHVybnMgYSBgUmVmZXJlbmNlYCByZXByZXNlbnRpbmcgdGhlIGxvY2F0aW9uIGluIHRoZSBEYXRhYmFzZVxuICogY29ycmVzcG9uZGluZyB0byB0aGUgcHJvdmlkZWQgRmlyZWJhc2UgVVJMLlxuICpcbiAqIEFuIGV4Y2VwdGlvbiBpcyB0aHJvd24gaWYgdGhlIFVSTCBpcyBub3QgYSB2YWxpZCBGaXJlYmFzZSBEYXRhYmFzZSBVUkwgb3IgaXRcbiAqIGhhcyBhIGRpZmZlcmVudCBkb21haW4gdGhhbiB0aGUgY3VycmVudCBgRGF0YWJhc2VgIGluc3RhbmNlLlxuICpcbiAqIE5vdGUgdGhhdCBhbGwgcXVlcnkgcGFyYW1ldGVycyAoYG9yZGVyQnlgLCBgbGltaXRUb0xhc3RgLCBldGMuKSBhcmUgaWdub3JlZFxuICogYW5kIGFyZSBub3QgYXBwbGllZCB0byB0aGUgcmV0dXJuZWQgYFJlZmVyZW5jZWAuXG4gKlxuICogQHBhcmFtIGRiIC0gVGhlIGRhdGFiYXNlIGluc3RhbmNlIHRvIG9idGFpbiBhIHJlZmVyZW5jZSBmb3IuXG4gKiBAcGFyYW0gdXJsIC0gVGhlIEZpcmViYXNlIFVSTCBhdCB3aGljaCB0aGUgcmV0dXJuZWQgYFJlZmVyZW5jZWAgd2lsbFxuICogICBwb2ludC5cbiAqIEByZXR1cm5zIEEgYFJlZmVyZW5jZWAgcG9pbnRpbmcgdG8gdGhlIHByb3ZpZGVkXG4gKiAgIEZpcmViYXNlIFVSTC5cbiAqL1xuZnVuY3Rpb24gcmVmRnJvbVVSTChkYiwgdXJsKSB7XG4gICAgZGIgPSBnZXRNb2R1bGFySW5zdGFuY2UoZGIpO1xuICAgIGRiLl9jaGVja05vdERlbGV0ZWQoJ3JlZkZyb21VUkwnKTtcbiAgICBjb25zdCBwYXJzZWRVUkwgPSBwYXJzZVJlcG9JbmZvKHVybCwgZGIuX3JlcG8ucmVwb0luZm9fLm5vZGVBZG1pbik7XG4gICAgdmFsaWRhdGVVcmwoJ3JlZkZyb21VUkwnLCBwYXJzZWRVUkwpO1xuICAgIGNvbnN0IHJlcG9JbmZvID0gcGFyc2VkVVJMLnJlcG9JbmZvO1xuICAgIGlmICghZGIuX3JlcG8ucmVwb0luZm9fLmlzQ3VzdG9tSG9zdCgpICYmXG4gICAgICAgIHJlcG9JbmZvLmhvc3QgIT09IGRiLl9yZXBvLnJlcG9JbmZvXy5ob3N0KSB7XG4gICAgICAgIGZhdGFsKCdyZWZGcm9tVVJMJyArXG4gICAgICAgICAgICAnOiBIb3N0IG5hbWUgZG9lcyBub3QgbWF0Y2ggdGhlIGN1cnJlbnQgZGF0YWJhc2U6ICcgK1xuICAgICAgICAgICAgJyhmb3VuZCAnICtcbiAgICAgICAgICAgIHJlcG9JbmZvLmhvc3QgK1xuICAgICAgICAgICAgJyBidXQgZXhwZWN0ZWQgJyArXG4gICAgICAgICAgICBkYi5fcmVwby5yZXBvSW5mb18uaG9zdCArXG4gICAgICAgICAgICAnKScpO1xuICAgIH1cbiAgICByZXR1cm4gcmVmKGRiLCBwYXJzZWRVUkwucGF0aC50b1N0cmluZygpKTtcbn1cbi8qKlxuICogR2V0cyBhIGBSZWZlcmVuY2VgIGZvciB0aGUgbG9jYXRpb24gYXQgdGhlIHNwZWNpZmllZCByZWxhdGl2ZSBwYXRoLlxuICpcbiAqIFRoZSByZWxhdGl2ZSBwYXRoIGNhbiBlaXRoZXIgYmUgYSBzaW1wbGUgY2hpbGQgbmFtZSAoZm9yIGV4YW1wbGUsIFwiYWRhXCIpIG9yXG4gKiBhIGRlZXBlciBzbGFzaC1zZXBhcmF0ZWQgcGF0aCAoZm9yIGV4YW1wbGUsIFwiYWRhL25hbWUvZmlyc3RcIikuXG4gKlxuICogQHBhcmFtIHBhcmVudCAtIFRoZSBwYXJlbnQgbG9jYXRpb24uXG4gKiBAcGFyYW0gcGF0aCAtIEEgcmVsYXRpdmUgcGF0aCBmcm9tIHRoaXMgbG9jYXRpb24gdG8gdGhlIGRlc2lyZWQgY2hpbGRcbiAqICAgbG9jYXRpb24uXG4gKiBAcmV0dXJucyBUaGUgc3BlY2lmaWVkIGNoaWxkIGxvY2F0aW9uLlxuICovXG5mdW5jdGlvbiBjaGlsZChwYXJlbnQsIHBhdGgpIHtcbiAgICBwYXJlbnQgPSBnZXRNb2R1bGFySW5zdGFuY2UocGFyZW50KTtcbiAgICBpZiAocGF0aEdldEZyb250KHBhcmVudC5fcGF0aCkgPT09IG51bGwpIHtcbiAgICAgICAgdmFsaWRhdGVSb290UGF0aFN0cmluZygnY2hpbGQnLCAncGF0aCcsIHBhdGgsIGZhbHNlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZhbGlkYXRlUGF0aFN0cmluZygnY2hpbGQnLCAncGF0aCcsIHBhdGgsIGZhbHNlKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBSZWZlcmVuY2VJbXBsKHBhcmVudC5fcmVwbywgcGF0aENoaWxkKHBhcmVudC5fcGF0aCwgcGF0aCkpO1xufVxuLyoqXG4gKiBSZXR1cm5zIGFuIGBPbkRpc2Nvbm5lY3RgIG9iamVjdCAtIHNlZVxuICoge0BsaW5rIGh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlLmNvbS9kb2NzL2RhdGFiYXNlL3dlYi9vZmZsaW5lLWNhcGFiaWxpdGllcyB8IEVuYWJsaW5nIE9mZmxpbmUgQ2FwYWJpbGl0aWVzIGluIEphdmFTY3JpcHR9XG4gKiBmb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiBob3cgdG8gdXNlIGl0LlxuICpcbiAqIEBwYXJhbSByZWYgLSBUaGUgcmVmZXJlbmNlIHRvIGFkZCBPbkRpc2Nvbm5lY3QgdHJpZ2dlcnMgZm9yLlxuICovXG5mdW5jdGlvbiBvbkRpc2Nvbm5lY3QocmVmKSB7XG4gICAgcmVmID0gZ2V0TW9kdWxhckluc3RhbmNlKHJlZik7XG4gICAgcmV0dXJuIG5ldyBPbkRpc2Nvbm5lY3QocmVmLl9yZXBvLCByZWYuX3BhdGgpO1xufVxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBuZXcgY2hpbGQgbG9jYXRpb24gdXNpbmcgYSB1bmlxdWUga2V5IGFuZCByZXR1cm5zIGl0c1xuICogYFJlZmVyZW5jZWAuXG4gKlxuICogVGhpcyBpcyB0aGUgbW9zdCBjb21tb24gcGF0dGVybiBmb3IgYWRkaW5nIGRhdGEgdG8gYSBjb2xsZWN0aW9uIG9mIGl0ZW1zLlxuICpcbiAqIElmIHlvdSBwcm92aWRlIGEgdmFsdWUgdG8gYHB1c2goKWAsIHRoZSB2YWx1ZSBpcyB3cml0dGVuIHRvIHRoZVxuICogZ2VuZXJhdGVkIGxvY2F0aW9uLiBJZiB5b3UgZG9uJ3QgcGFzcyBhIHZhbHVlLCBub3RoaW5nIGlzIHdyaXR0ZW4gdG8gdGhlXG4gKiBkYXRhYmFzZSBhbmQgdGhlIGNoaWxkIHJlbWFpbnMgZW1wdHkgKGJ1dCB5b3UgY2FuIHVzZSB0aGUgYFJlZmVyZW5jZWBcbiAqIGVsc2V3aGVyZSkuXG4gKlxuICogVGhlIHVuaXF1ZSBrZXlzIGdlbmVyYXRlZCBieSBgcHVzaCgpYCBhcmUgb3JkZXJlZCBieSB0aGUgY3VycmVudCB0aW1lLCBzbyB0aGVcbiAqIHJlc3VsdGluZyBsaXN0IG9mIGl0ZW1zIGlzIGNocm9ub2xvZ2ljYWxseSBzb3J0ZWQuIFRoZSBrZXlzIGFyZSBhbHNvXG4gKiBkZXNpZ25lZCB0byBiZSB1bmd1ZXNzYWJsZSAodGhleSBjb250YWluIDcyIHJhbmRvbSBiaXRzIG9mIGVudHJvcHkpLlxuICpcbiAqIFNlZSB7QGxpbmsgaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvZGF0YWJhc2Uvd2ViL2xpc3RzLW9mLWRhdGEjYXBwZW5kX3RvX2FfbGlzdF9vZl9kYXRhIHwgQXBwZW5kIHRvIGEgbGlzdCBvZiBkYXRhfS5cbiAqIFNlZSB7QGxpbmsgaHR0cHM6Ly9maXJlYmFzZS5nb29nbGVibG9nLmNvbS8yMDE1LzAyL3RoZS0yMTIwLXdheXMtdG8tZW5zdXJlLXVuaXF1ZV82OC5odG1sIHwgVGhlIDJeMTIwIFdheXMgdG8gRW5zdXJlIFVuaXF1ZSBJZGVudGlmaWVyc30uXG4gKlxuICogQHBhcmFtIHBhcmVudCAtIFRoZSBwYXJlbnQgbG9jYXRpb24uXG4gKiBAcGFyYW0gdmFsdWUgLSBPcHRpb25hbCB2YWx1ZSB0byBiZSB3cml0dGVuIGF0IHRoZSBnZW5lcmF0ZWQgbG9jYXRpb24uXG4gKiBAcmV0dXJucyBDb21iaW5lZCBgUHJvbWlzZWAgYW5kIGBSZWZlcmVuY2VgOyByZXNvbHZlcyB3aGVuIHdyaXRlIGlzIGNvbXBsZXRlLFxuICogYnV0IGNhbiBiZSB1c2VkIGltbWVkaWF0ZWx5IGFzIHRoZSBgUmVmZXJlbmNlYCB0byB0aGUgY2hpbGQgbG9jYXRpb24uXG4gKi9cbmZ1bmN0aW9uIHB1c2gocGFyZW50LCB2YWx1ZSkge1xuICAgIHBhcmVudCA9IGdldE1vZHVsYXJJbnN0YW5jZShwYXJlbnQpO1xuICAgIHZhbGlkYXRlV3JpdGFibGVQYXRoKCdwdXNoJywgcGFyZW50Ll9wYXRoKTtcbiAgICB2YWxpZGF0ZUZpcmViYXNlRGF0YUFyZygncHVzaCcsIHZhbHVlLCBwYXJlbnQuX3BhdGgsIHRydWUpO1xuICAgIGNvbnN0IG5vdyA9IHJlcG9TZXJ2ZXJUaW1lKHBhcmVudC5fcmVwbyk7XG4gICAgY29uc3QgbmFtZSA9IG5leHRQdXNoSWQobm93KTtcbiAgICAvLyBwdXNoKCkgcmV0dXJucyBhIFRoZW5uYWJsZVJlZmVyZW5jZSB3aG9zZSBwcm9taXNlIGlzIGZ1bGZpbGxlZCB3aXRoIGFcbiAgICAvLyByZWd1bGFyIFJlZmVyZW5jZS4gV2UgdXNlIGNoaWxkKCkgdG8gY3JlYXRlIGhhbmRsZXMgdG8gdHdvIGRpZmZlcmVudFxuICAgIC8vIHJlZmVyZW5jZXMuIFRoZSBmaXJzdCBpcyB0dXJuZWQgaW50byBhIFRoZW5uYWJsZVJlZmVyZW5jZSBiZWxvdyBieSBhZGRpbmdcbiAgICAvLyB0aGVuKCkgYW5kIGNhdGNoKCkgbWV0aG9kcyBhbmQgaXMgdXNlZCBhcyB0aGUgcmV0dXJuIHZhbHVlIG9mIHB1c2goKS4gVGhlXG4gICAgLy8gc2Vjb25kIHJlbWFpbnMgYSByZWd1bGFyIFJlZmVyZW5jZSBhbmQgaXMgdXNlZCBhcyB0aGUgZnVsZmlsbGVkIHZhbHVlIG9mXG4gICAgLy8gdGhlIGZpcnN0IFRoZW5uYWJsZVJlZmVyZW5jZS5cbiAgICBjb25zdCB0aGVuYWJsZVB1c2hSZWYgPSBjaGlsZChwYXJlbnQsIG5hbWUpO1xuICAgIGNvbnN0IHB1c2hSZWYgPSBjaGlsZChwYXJlbnQsIG5hbWUpO1xuICAgIGxldCBwcm9taXNlO1xuICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgIHByb21pc2UgPSBzZXQocHVzaFJlZiwgdmFsdWUpLnRoZW4oKCkgPT4gcHVzaFJlZik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBwcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKHB1c2hSZWYpO1xuICAgIH1cbiAgICB0aGVuYWJsZVB1c2hSZWYudGhlbiA9IHByb21pc2UudGhlbi5iaW5kKHByb21pc2UpO1xuICAgIHRoZW5hYmxlUHVzaFJlZi5jYXRjaCA9IHByb21pc2UudGhlbi5iaW5kKHByb21pc2UsIHVuZGVmaW5lZCk7XG4gICAgcmV0dXJuIHRoZW5hYmxlUHVzaFJlZjtcbn1cbi8qKlxuICogUmVtb3ZlcyB0aGUgZGF0YSBhdCB0aGlzIERhdGFiYXNlIGxvY2F0aW9uLlxuICpcbiAqIEFueSBkYXRhIGF0IGNoaWxkIGxvY2F0aW9ucyB3aWxsIGFsc28gYmUgZGVsZXRlZC5cbiAqXG4gKiBUaGUgZWZmZWN0IG9mIHRoZSByZW1vdmUgd2lsbCBiZSB2aXNpYmxlIGltbWVkaWF0ZWx5IGFuZCB0aGUgY29ycmVzcG9uZGluZ1xuICogZXZlbnQgJ3ZhbHVlJyB3aWxsIGJlIHRyaWdnZXJlZC4gU3luY2hyb25pemF0aW9uIG9mIHRoZSByZW1vdmUgdG8gdGhlXG4gKiBGaXJlYmFzZSBzZXJ2ZXJzIHdpbGwgYWxzbyBiZSBzdGFydGVkLCBhbmQgdGhlIHJldHVybmVkIFByb21pc2Ugd2lsbCByZXNvbHZlXG4gKiB3aGVuIGNvbXBsZXRlLiBJZiBwcm92aWRlZCwgdGhlIG9uQ29tcGxldGUgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWRcbiAqIGFzeW5jaHJvbm91c2x5IGFmdGVyIHN5bmNocm9uaXphdGlvbiBoYXMgZmluaXNoZWQuXG4gKlxuICogQHBhcmFtIHJlZiAtIFRoZSBsb2NhdGlvbiB0byByZW1vdmUuXG4gKiBAcmV0dXJucyBSZXNvbHZlcyB3aGVuIHJlbW92ZSBvbiBzZXJ2ZXIgaXMgY29tcGxldGUuXG4gKi9cbmZ1bmN0aW9uIHJlbW92ZShyZWYpIHtcbiAgICB2YWxpZGF0ZVdyaXRhYmxlUGF0aCgncmVtb3ZlJywgcmVmLl9wYXRoKTtcbiAgICByZXR1cm4gc2V0KHJlZiwgbnVsbCk7XG59XG4vKipcbiAqIFdyaXRlcyBkYXRhIHRvIHRoaXMgRGF0YWJhc2UgbG9jYXRpb24uXG4gKlxuICogVGhpcyB3aWxsIG92ZXJ3cml0ZSBhbnkgZGF0YSBhdCB0aGlzIGxvY2F0aW9uIGFuZCBhbGwgY2hpbGQgbG9jYXRpb25zLlxuICpcbiAqIFRoZSBlZmZlY3Qgb2YgdGhlIHdyaXRlIHdpbGwgYmUgdmlzaWJsZSBpbW1lZGlhdGVseSwgYW5kIHRoZSBjb3JyZXNwb25kaW5nXG4gKiBldmVudHMgKFwidmFsdWVcIiwgXCJjaGlsZF9hZGRlZFwiLCBldGMuKSB3aWxsIGJlIHRyaWdnZXJlZC4gU3luY2hyb25pemF0aW9uIG9mXG4gKiB0aGUgZGF0YSB0byB0aGUgRmlyZWJhc2Ugc2VydmVycyB3aWxsIGFsc28gYmUgc3RhcnRlZCwgYW5kIHRoZSByZXR1cm5lZFxuICogUHJvbWlzZSB3aWxsIHJlc29sdmUgd2hlbiBjb21wbGV0ZS4gSWYgcHJvdmlkZWQsIHRoZSBgb25Db21wbGV0ZWAgY2FsbGJhY2tcbiAqIHdpbGwgYmUgY2FsbGVkIGFzeW5jaHJvbm91c2x5IGFmdGVyIHN5bmNocm9uaXphdGlvbiBoYXMgZmluaXNoZWQuXG4gKlxuICogUGFzc2luZyBgbnVsbGAgZm9yIHRoZSBuZXcgdmFsdWUgaXMgZXF1aXZhbGVudCB0byBjYWxsaW5nIGByZW1vdmUoKWA7IG5hbWVseSxcbiAqIGFsbCBkYXRhIGF0IHRoaXMgbG9jYXRpb24gYW5kIGFsbCBjaGlsZCBsb2NhdGlvbnMgd2lsbCBiZSBkZWxldGVkLlxuICpcbiAqIGBzZXQoKWAgd2lsbCByZW1vdmUgYW55IHByaW9yaXR5IHN0b3JlZCBhdCB0aGlzIGxvY2F0aW9uLCBzbyBpZiBwcmlvcml0eSBpc1xuICogbWVhbnQgdG8gYmUgcHJlc2VydmVkLCB5b3UgbmVlZCB0byB1c2UgYHNldFdpdGhQcmlvcml0eSgpYCBpbnN0ZWFkLlxuICpcbiAqIE5vdGUgdGhhdCBtb2RpZnlpbmcgZGF0YSB3aXRoIGBzZXQoKWAgd2lsbCBjYW5jZWwgYW55IHBlbmRpbmcgdHJhbnNhY3Rpb25zXG4gKiBhdCB0aGF0IGxvY2F0aW9uLCBzbyBleHRyZW1lIGNhcmUgc2hvdWxkIGJlIHRha2VuIGlmIG1peGluZyBgc2V0KClgIGFuZFxuICogYHRyYW5zYWN0aW9uKClgIHRvIG1vZGlmeSB0aGUgc2FtZSBkYXRhLlxuICpcbiAqIEEgc2luZ2xlIGBzZXQoKWAgd2lsbCBnZW5lcmF0ZSBhIHNpbmdsZSBcInZhbHVlXCIgZXZlbnQgYXQgdGhlIGxvY2F0aW9uIHdoZXJlXG4gKiB0aGUgYHNldCgpYCB3YXMgcGVyZm9ybWVkLlxuICpcbiAqIEBwYXJhbSByZWYgLSBUaGUgbG9jYXRpb24gdG8gd3JpdGUgdG8uXG4gKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gYmUgd3JpdHRlbiAoc3RyaW5nLCBudW1iZXIsIGJvb2xlYW4sIG9iamVjdCxcbiAqICAgYXJyYXksIG9yIG51bGwpLlxuICogQHJldHVybnMgUmVzb2x2ZXMgd2hlbiB3cml0ZSB0byBzZXJ2ZXIgaXMgY29tcGxldGUuXG4gKi9cbmZ1bmN0aW9uIHNldChyZWYsIHZhbHVlKSB7XG4gICAgcmVmID0gZ2V0TW9kdWxhckluc3RhbmNlKHJlZik7XG4gICAgdmFsaWRhdGVXcml0YWJsZVBhdGgoJ3NldCcsIHJlZi5fcGF0aCk7XG4gICAgdmFsaWRhdGVGaXJlYmFzZURhdGFBcmcoJ3NldCcsIHZhbHVlLCByZWYuX3BhdGgsIGZhbHNlKTtcbiAgICBjb25zdCBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpO1xuICAgIHJlcG9TZXRXaXRoUHJpb3JpdHkocmVmLl9yZXBvLCByZWYuX3BhdGgsIHZhbHVlLCBcbiAgICAvKnByaW9yaXR5PSovIG51bGwsIGRlZmVycmVkLndyYXBDYWxsYmFjaygoKSA9PiB7IH0pKTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbn1cbi8qKlxuICogU2V0cyBhIHByaW9yaXR5IGZvciB0aGUgZGF0YSBhdCB0aGlzIERhdGFiYXNlIGxvY2F0aW9uLlxuICpcbiAqIEFwcGxpY2F0aW9ucyBuZWVkIG5vdCB1c2UgcHJpb3JpdHkgYnV0IGNhbiBvcmRlciBjb2xsZWN0aW9ucyBieVxuICogb3JkaW5hcnkgcHJvcGVydGllcyAoc2VlXG4gKiB7QGxpbmsgaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvZGF0YWJhc2Uvd2ViL2xpc3RzLW9mLWRhdGEjc29ydGluZ19hbmRfZmlsdGVyaW5nX2RhdGEgfCBTb3J0aW5nIGFuZCBmaWx0ZXJpbmcgZGF0YX1cbiAqICkuXG4gKlxuICogQHBhcmFtIHJlZiAtIFRoZSBsb2NhdGlvbiB0byB3cml0ZSB0by5cbiAqIEBwYXJhbSBwcmlvcml0eSAtIFRoZSBwcmlvcml0eSB0byBiZSB3cml0dGVuIChzdHJpbmcsIG51bWJlciwgb3IgbnVsbCkuXG4gKiBAcmV0dXJucyBSZXNvbHZlcyB3aGVuIHdyaXRlIHRvIHNlcnZlciBpcyBjb21wbGV0ZS5cbiAqL1xuZnVuY3Rpb24gc2V0UHJpb3JpdHkocmVmLCBwcmlvcml0eSkge1xuICAgIHJlZiA9IGdldE1vZHVsYXJJbnN0YW5jZShyZWYpO1xuICAgIHZhbGlkYXRlV3JpdGFibGVQYXRoKCdzZXRQcmlvcml0eScsIHJlZi5fcGF0aCk7XG4gICAgdmFsaWRhdGVQcmlvcml0eSgnc2V0UHJpb3JpdHknLCBwcmlvcml0eSwgZmFsc2UpO1xuICAgIGNvbnN0IGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XG4gICAgcmVwb1NldFdpdGhQcmlvcml0eShyZWYuX3JlcG8sIHBhdGhDaGlsZChyZWYuX3BhdGgsICcucHJpb3JpdHknKSwgcHJpb3JpdHksIG51bGwsIGRlZmVycmVkLndyYXBDYWxsYmFjaygoKSA9PiB7IH0pKTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbn1cbi8qKlxuICogV3JpdGVzIGRhdGEgdGhlIERhdGFiYXNlIGxvY2F0aW9uLiBMaWtlIGBzZXQoKWAgYnV0IGFsc28gc3BlY2lmaWVzIHRoZVxuICogcHJpb3JpdHkgZm9yIHRoYXQgZGF0YS5cbiAqXG4gKiBBcHBsaWNhdGlvbnMgbmVlZCBub3QgdXNlIHByaW9yaXR5IGJ1dCBjYW4gb3JkZXIgY29sbGVjdGlvbnMgYnlcbiAqIG9yZGluYXJ5IHByb3BlcnRpZXMgKHNlZVxuICoge0BsaW5rIGh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlLmNvbS9kb2NzL2RhdGFiYXNlL3dlYi9saXN0cy1vZi1kYXRhI3NvcnRpbmdfYW5kX2ZpbHRlcmluZ19kYXRhIHwgU29ydGluZyBhbmQgZmlsdGVyaW5nIGRhdGF9XG4gKiApLlxuICpcbiAqIEBwYXJhbSByZWYgLSBUaGUgbG9jYXRpb24gdG8gd3JpdGUgdG8uXG4gKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gYmUgd3JpdHRlbiAoc3RyaW5nLCBudW1iZXIsIGJvb2xlYW4sIG9iamVjdCxcbiAqICAgYXJyYXksIG9yIG51bGwpLlxuICogQHBhcmFtIHByaW9yaXR5IC0gVGhlIHByaW9yaXR5IHRvIGJlIHdyaXR0ZW4gKHN0cmluZywgbnVtYmVyLCBvciBudWxsKS5cbiAqIEByZXR1cm5zIFJlc29sdmVzIHdoZW4gd3JpdGUgdG8gc2VydmVyIGlzIGNvbXBsZXRlLlxuICovXG5mdW5jdGlvbiBzZXRXaXRoUHJpb3JpdHkocmVmLCB2YWx1ZSwgcHJpb3JpdHkpIHtcbiAgICB2YWxpZGF0ZVdyaXRhYmxlUGF0aCgnc2V0V2l0aFByaW9yaXR5JywgcmVmLl9wYXRoKTtcbiAgICB2YWxpZGF0ZUZpcmViYXNlRGF0YUFyZygnc2V0V2l0aFByaW9yaXR5JywgdmFsdWUsIHJlZi5fcGF0aCwgZmFsc2UpO1xuICAgIHZhbGlkYXRlUHJpb3JpdHkoJ3NldFdpdGhQcmlvcml0eScsIHByaW9yaXR5LCBmYWxzZSk7XG4gICAgaWYgKHJlZi5rZXkgPT09ICcubGVuZ3RoJyB8fCByZWYua2V5ID09PSAnLmtleXMnKSB7XG4gICAgICAgIHRocm93ICdzZXRXaXRoUHJpb3JpdHkgZmFpbGVkOiAnICsgcmVmLmtleSArICcgaXMgYSByZWFkLW9ubHkgb2JqZWN0Lic7XG4gICAgfVxuICAgIGNvbnN0IGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XG4gICAgcmVwb1NldFdpdGhQcmlvcml0eShyZWYuX3JlcG8sIHJlZi5fcGF0aCwgdmFsdWUsIHByaW9yaXR5LCBkZWZlcnJlZC53cmFwQ2FsbGJhY2soKCkgPT4geyB9KSk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59XG4vKipcbiAqIFdyaXRlcyBtdWx0aXBsZSB2YWx1ZXMgdG8gdGhlIERhdGFiYXNlIGF0IG9uY2UuXG4gKlxuICogVGhlIGB2YWx1ZXNgIGFyZ3VtZW50IGNvbnRhaW5zIG11bHRpcGxlIHByb3BlcnR5LXZhbHVlIHBhaXJzIHRoYXQgd2lsbCBiZVxuICogd3JpdHRlbiB0byB0aGUgRGF0YWJhc2UgdG9nZXRoZXIuIEVhY2ggY2hpbGQgcHJvcGVydHkgY2FuIGVpdGhlciBiZSBhIHNpbXBsZVxuICogcHJvcGVydHkgKGZvciBleGFtcGxlLCBcIm5hbWVcIikgb3IgYSByZWxhdGl2ZSBwYXRoIChmb3IgZXhhbXBsZSxcbiAqIFwibmFtZS9maXJzdFwiKSBmcm9tIHRoZSBjdXJyZW50IGxvY2F0aW9uIHRvIHRoZSBkYXRhIHRvIHVwZGF0ZS5cbiAqXG4gKiBBcyBvcHBvc2VkIHRvIHRoZSBgc2V0KClgIG1ldGhvZCwgYHVwZGF0ZSgpYCBjYW4gYmUgdXNlIHRvIHNlbGVjdGl2ZWx5IHVwZGF0ZVxuICogb25seSB0aGUgcmVmZXJlbmNlZCBwcm9wZXJ0aWVzIGF0IHRoZSBjdXJyZW50IGxvY2F0aW9uIChpbnN0ZWFkIG9mIHJlcGxhY2luZ1xuICogYWxsIHRoZSBjaGlsZCBwcm9wZXJ0aWVzIGF0IHRoZSBjdXJyZW50IGxvY2F0aW9uKS5cbiAqXG4gKiBUaGUgZWZmZWN0IG9mIHRoZSB3cml0ZSB3aWxsIGJlIHZpc2libGUgaW1tZWRpYXRlbHksIGFuZCB0aGUgY29ycmVzcG9uZGluZ1xuICogZXZlbnRzICgndmFsdWUnLCAnY2hpbGRfYWRkZWQnLCBldGMuKSB3aWxsIGJlIHRyaWdnZXJlZC4gU3luY2hyb25pemF0aW9uIG9mXG4gKiB0aGUgZGF0YSB0byB0aGUgRmlyZWJhc2Ugc2VydmVycyB3aWxsIGFsc28gYmUgc3RhcnRlZCwgYW5kIHRoZSByZXR1cm5lZFxuICogUHJvbWlzZSB3aWxsIHJlc29sdmUgd2hlbiBjb21wbGV0ZS4gSWYgcHJvdmlkZWQsIHRoZSBgb25Db21wbGV0ZWAgY2FsbGJhY2tcbiAqIHdpbGwgYmUgY2FsbGVkIGFzeW5jaHJvbm91c2x5IGFmdGVyIHN5bmNocm9uaXphdGlvbiBoYXMgZmluaXNoZWQuXG4gKlxuICogQSBzaW5nbGUgYHVwZGF0ZSgpYCB3aWxsIGdlbmVyYXRlIGEgc2luZ2xlIFwidmFsdWVcIiBldmVudCBhdCB0aGUgbG9jYXRpb25cbiAqIHdoZXJlIHRoZSBgdXBkYXRlKClgIHdhcyBwZXJmb3JtZWQsIHJlZ2FyZGxlc3Mgb2YgaG93IG1hbnkgY2hpbGRyZW4gd2VyZVxuICogbW9kaWZpZWQuXG4gKlxuICogTm90ZSB0aGF0IG1vZGlmeWluZyBkYXRhIHdpdGggYHVwZGF0ZSgpYCB3aWxsIGNhbmNlbCBhbnkgcGVuZGluZ1xuICogdHJhbnNhY3Rpb25zIGF0IHRoYXQgbG9jYXRpb24sIHNvIGV4dHJlbWUgY2FyZSBzaG91bGQgYmUgdGFrZW4gaWYgbWl4aW5nXG4gKiBgdXBkYXRlKClgIGFuZCBgdHJhbnNhY3Rpb24oKWAgdG8gbW9kaWZ5IHRoZSBzYW1lIGRhdGEuXG4gKlxuICogUGFzc2luZyBgbnVsbGAgdG8gYHVwZGF0ZSgpYCB3aWxsIHJlbW92ZSB0aGUgZGF0YSBhdCB0aGlzIGxvY2F0aW9uLlxuICpcbiAqIFNlZVxuICoge0BsaW5rIGh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlYmxvZy5jb20vMjAxNS8wOS9pbnRyb2R1Y2luZy1tdWx0aS1sb2NhdGlvbi11cGRhdGVzLWFuZF84Ni5odG1sIHwgSW50cm9kdWNpbmcgbXVsdGktbG9jYXRpb24gdXBkYXRlcyBhbmQgbW9yZX0uXG4gKlxuICogQHBhcmFtIHJlZiAtIFRoZSBsb2NhdGlvbiB0byB3cml0ZSB0by5cbiAqIEBwYXJhbSB2YWx1ZXMgLSBPYmplY3QgY29udGFpbmluZyBtdWx0aXBsZSB2YWx1ZXMuXG4gKiBAcmV0dXJucyBSZXNvbHZlcyB3aGVuIHVwZGF0ZSBvbiBzZXJ2ZXIgaXMgY29tcGxldGUuXG4gKi9cbmZ1bmN0aW9uIHVwZGF0ZShyZWYsIHZhbHVlcykge1xuICAgIHZhbGlkYXRlRmlyZWJhc2VNZXJnZURhdGFBcmcoJ3VwZGF0ZScsIHZhbHVlcywgcmVmLl9wYXRoLCBmYWxzZSk7XG4gICAgY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICByZXBvVXBkYXRlKHJlZi5fcmVwbywgcmVmLl9wYXRoLCB2YWx1ZXMsIGRlZmVycmVkLndyYXBDYWxsYmFjaygoKSA9PiB7IH0pKTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbn1cbi8qKlxuICogR2V0cyB0aGUgbW9zdCB1cC10by1kYXRlIHJlc3VsdCBmb3IgdGhpcyBxdWVyeS5cbiAqXG4gKiBAcGFyYW0gcXVlcnkgLSBUaGUgcXVlcnkgdG8gcnVuLlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgd2hpY2ggcmVzb2x2ZXMgdG8gdGhlIHJlc3VsdGluZyBEYXRhU25hcHNob3QgaWYgYSB2YWx1ZSBpc1xuICogYXZhaWxhYmxlLCBvciByZWplY3RzIGlmIHRoZSBjbGllbnQgaXMgdW5hYmxlIHRvIHJldHVybiBhIHZhbHVlIChlLmcuLCBpZiB0aGVcbiAqIHNlcnZlciBpcyB1bnJlYWNoYWJsZSBhbmQgdGhlcmUgaXMgbm90aGluZyBjYWNoZWQpLlxuICovXG5mdW5jdGlvbiBnZXQocXVlcnkpIHtcbiAgICBxdWVyeSA9IGdldE1vZHVsYXJJbnN0YW5jZShxdWVyeSk7XG4gICAgY29uc3QgY2FsbGJhY2tDb250ZXh0ID0gbmV3IENhbGxiYWNrQ29udGV4dCgoKSA9PiB7IH0pO1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IG5ldyBWYWx1ZUV2ZW50UmVnaXN0cmF0aW9uKGNhbGxiYWNrQ29udGV4dCk7XG4gICAgcmV0dXJuIHJlcG9HZXRWYWx1ZShxdWVyeS5fcmVwbywgcXVlcnksIGNvbnRhaW5lcikudGhlbihub2RlID0+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRhU25hcHNob3Qobm9kZSwgbmV3IFJlZmVyZW5jZUltcGwocXVlcnkuX3JlcG8sIHF1ZXJ5Ll9wYXRoKSwgcXVlcnkuX3F1ZXJ5UGFyYW1zLmdldEluZGV4KCkpO1xuICAgIH0pO1xufVxuLyoqXG4gKiBSZXByZXNlbnRzIHJlZ2lzdHJhdGlvbiBmb3IgJ3ZhbHVlJyBldmVudHMuXG4gKi9cbmNsYXNzIFZhbHVlRXZlbnRSZWdpc3RyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGNhbGxiYWNrQ29udGV4dCkge1xuICAgICAgICB0aGlzLmNhbGxiYWNrQ29udGV4dCA9IGNhbGxiYWNrQ29udGV4dDtcbiAgICB9XG4gICAgcmVzcG9uZHNUbyhldmVudFR5cGUpIHtcbiAgICAgICAgcmV0dXJuIGV2ZW50VHlwZSA9PT0gJ3ZhbHVlJztcbiAgICB9XG4gICAgY3JlYXRlRXZlbnQoY2hhbmdlLCBxdWVyeSkge1xuICAgICAgICBjb25zdCBpbmRleCA9IHF1ZXJ5Ll9xdWVyeVBhcmFtcy5nZXRJbmRleCgpO1xuICAgICAgICByZXR1cm4gbmV3IERhdGFFdmVudCgndmFsdWUnLCB0aGlzLCBuZXcgRGF0YVNuYXBzaG90KGNoYW5nZS5zbmFwc2hvdE5vZGUsIG5ldyBSZWZlcmVuY2VJbXBsKHF1ZXJ5Ll9yZXBvLCBxdWVyeS5fcGF0aCksIGluZGV4KSk7XG4gICAgfVxuICAgIGdldEV2ZW50UnVubmVyKGV2ZW50RGF0YSkge1xuICAgICAgICBpZiAoZXZlbnREYXRhLmdldEV2ZW50VHlwZSgpID09PSAnY2FuY2VsJykge1xuICAgICAgICAgICAgcmV0dXJuICgpID0+IHRoaXMuY2FsbGJhY2tDb250ZXh0Lm9uQ2FuY2VsKGV2ZW50RGF0YS5lcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gKCkgPT4gdGhpcy5jYWxsYmFja0NvbnRleHQub25WYWx1ZShldmVudERhdGEuc25hcHNob3QsIG51bGwpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNyZWF0ZUNhbmNlbEV2ZW50KGVycm9yLCBwYXRoKSB7XG4gICAgICAgIGlmICh0aGlzLmNhbGxiYWNrQ29udGV4dC5oYXNDYW5jZWxDYWxsYmFjaykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDYW5jZWxFdmVudCh0aGlzLCBlcnJvciwgcGF0aCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBtYXRjaGVzKG90aGVyKSB7XG4gICAgICAgIGlmICghKG90aGVyIGluc3RhbmNlb2YgVmFsdWVFdmVudFJlZ2lzdHJhdGlvbikpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghb3RoZXIuY2FsbGJhY2tDb250ZXh0IHx8ICF0aGlzLmNhbGxiYWNrQ29udGV4dCkge1xuICAgICAgICAgICAgLy8gSWYgbm8gY2FsbGJhY2sgc3BlY2lmaWVkLCB3ZSBjb25zaWRlciBpdCB0byBtYXRjaCBhbnkgY2FsbGJhY2suXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBvdGhlci5jYWxsYmFja0NvbnRleHQubWF0Y2hlcyh0aGlzLmNhbGxiYWNrQ29udGV4dCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFzQW55Q2FsbGJhY2soKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGxiYWNrQ29udGV4dCAhPT0gbnVsbDtcbiAgICB9XG59XG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIHJlZ2lzdHJhdGlvbiBvZiBhIGNoaWxkX3ggZXZlbnQuXG4gKi9cbmNsYXNzIENoaWxkRXZlbnRSZWdpc3RyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGV2ZW50VHlwZSwgY2FsbGJhY2tDb250ZXh0KSB7XG4gICAgICAgIHRoaXMuZXZlbnRUeXBlID0gZXZlbnRUeXBlO1xuICAgICAgICB0aGlzLmNhbGxiYWNrQ29udGV4dCA9IGNhbGxiYWNrQ29udGV4dDtcbiAgICB9XG4gICAgcmVzcG9uZHNUbyhldmVudFR5cGUpIHtcbiAgICAgICAgbGV0IGV2ZW50VG9DaGVjayA9IGV2ZW50VHlwZSA9PT0gJ2NoaWxkcmVuX2FkZGVkJyA/ICdjaGlsZF9hZGRlZCcgOiBldmVudFR5cGU7XG4gICAgICAgIGV2ZW50VG9DaGVjayA9XG4gICAgICAgICAgICBldmVudFRvQ2hlY2sgPT09ICdjaGlsZHJlbl9yZW1vdmVkJyA/ICdjaGlsZF9yZW1vdmVkJyA6IGV2ZW50VG9DaGVjaztcbiAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnRUeXBlID09PSBldmVudFRvQ2hlY2s7XG4gICAgfVxuICAgIGNyZWF0ZUNhbmNlbEV2ZW50KGVycm9yLCBwYXRoKSB7XG4gICAgICAgIGlmICh0aGlzLmNhbGxiYWNrQ29udGV4dC5oYXNDYW5jZWxDYWxsYmFjaykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDYW5jZWxFdmVudCh0aGlzLCBlcnJvciwgcGF0aCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjcmVhdGVFdmVudChjaGFuZ2UsIHF1ZXJ5KSB7XG4gICAgICAgIGFzc2VydChjaGFuZ2UuY2hpbGROYW1lICE9IG51bGwsICdDaGlsZCBldmVudHMgc2hvdWxkIGhhdmUgYSBjaGlsZE5hbWUuJyk7XG4gICAgICAgIGNvbnN0IGNoaWxkUmVmID0gY2hpbGQobmV3IFJlZmVyZW5jZUltcGwocXVlcnkuX3JlcG8sIHF1ZXJ5Ll9wYXRoKSwgY2hhbmdlLmNoaWxkTmFtZSk7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gcXVlcnkuX3F1ZXJ5UGFyYW1zLmdldEluZGV4KCk7XG4gICAgICAgIHJldHVybiBuZXcgRGF0YUV2ZW50KGNoYW5nZS50eXBlLCB0aGlzLCBuZXcgRGF0YVNuYXBzaG90KGNoYW5nZS5zbmFwc2hvdE5vZGUsIGNoaWxkUmVmLCBpbmRleCksIGNoYW5nZS5wcmV2TmFtZSk7XG4gICAgfVxuICAgIGdldEV2ZW50UnVubmVyKGV2ZW50RGF0YSkge1xuICAgICAgICBpZiAoZXZlbnREYXRhLmdldEV2ZW50VHlwZSgpID09PSAnY2FuY2VsJykge1xuICAgICAgICAgICAgcmV0dXJuICgpID0+IHRoaXMuY2FsbGJhY2tDb250ZXh0Lm9uQ2FuY2VsKGV2ZW50RGF0YS5lcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gKCkgPT4gdGhpcy5jYWxsYmFja0NvbnRleHQub25WYWx1ZShldmVudERhdGEuc25hcHNob3QsIGV2ZW50RGF0YS5wcmV2TmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbWF0Y2hlcyhvdGhlcikge1xuICAgICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBDaGlsZEV2ZW50UmVnaXN0cmF0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gKHRoaXMuZXZlbnRUeXBlID09PSBvdGhlci5ldmVudFR5cGUgJiZcbiAgICAgICAgICAgICAgICAoIXRoaXMuY2FsbGJhY2tDb250ZXh0IHx8XG4gICAgICAgICAgICAgICAgICAgICFvdGhlci5jYWxsYmFja0NvbnRleHQgfHxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxsYmFja0NvbnRleHQubWF0Y2hlcyhvdGhlci5jYWxsYmFja0NvbnRleHQpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBoYXNBbnlDYWxsYmFjaygpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5jYWxsYmFja0NvbnRleHQ7XG4gICAgfVxufVxuZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcihxdWVyeSwgZXZlbnRUeXBlLCBjYWxsYmFjaywgY2FuY2VsQ2FsbGJhY2tPckxpc3Rlbk9wdGlvbnMsIG9wdGlvbnMpIHtcbiAgICBsZXQgY2FuY2VsQ2FsbGJhY2s7XG4gICAgaWYgKHR5cGVvZiBjYW5jZWxDYWxsYmFja09yTGlzdGVuT3B0aW9ucyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgY2FuY2VsQ2FsbGJhY2sgPSB1bmRlZmluZWQ7XG4gICAgICAgIG9wdGlvbnMgPSBjYW5jZWxDYWxsYmFja09yTGlzdGVuT3B0aW9ucztcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBjYW5jZWxDYWxsYmFja09yTGlzdGVuT3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBjYW5jZWxDYWxsYmFjayA9IGNhbmNlbENhbGxiYWNrT3JMaXN0ZW5PcHRpb25zO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLm9ubHlPbmNlKSB7XG4gICAgICAgIGNvbnN0IHVzZXJDYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgICBjb25zdCBvbmNlQ2FsbGJhY2sgPSAoZGF0YVNuYXBzaG90LCBwcmV2aW91c0NoaWxkTmFtZSkgPT4ge1xuICAgICAgICAgICAgcmVwb1JlbW92ZUV2ZW50Q2FsbGJhY2tGb3JRdWVyeShxdWVyeS5fcmVwbywgcXVlcnksIGNvbnRhaW5lcik7XG4gICAgICAgICAgICB1c2VyQ2FsbGJhY2soZGF0YVNuYXBzaG90LCBwcmV2aW91c0NoaWxkTmFtZSk7XG4gICAgICAgIH07XG4gICAgICAgIG9uY2VDYWxsYmFjay51c2VyQ2FsbGJhY2sgPSBjYWxsYmFjay51c2VyQ2FsbGJhY2s7XG4gICAgICAgIG9uY2VDYWxsYmFjay5jb250ZXh0ID0gY2FsbGJhY2suY29udGV4dDtcbiAgICAgICAgY2FsbGJhY2sgPSBvbmNlQ2FsbGJhY2s7XG4gICAgfVxuICAgIGNvbnN0IGNhbGxiYWNrQ29udGV4dCA9IG5ldyBDYWxsYmFja0NvbnRleHQoY2FsbGJhY2ssIGNhbmNlbENhbGxiYWNrIHx8IHVuZGVmaW5lZCk7XG4gICAgY29uc3QgY29udGFpbmVyID0gZXZlbnRUeXBlID09PSAndmFsdWUnXG4gICAgICAgID8gbmV3IFZhbHVlRXZlbnRSZWdpc3RyYXRpb24oY2FsbGJhY2tDb250ZXh0KVxuICAgICAgICA6IG5ldyBDaGlsZEV2ZW50UmVnaXN0cmF0aW9uKGV2ZW50VHlwZSwgY2FsbGJhY2tDb250ZXh0KTtcbiAgICByZXBvQWRkRXZlbnRDYWxsYmFja0ZvclF1ZXJ5KHF1ZXJ5Ll9yZXBvLCBxdWVyeSwgY29udGFpbmVyKTtcbiAgICByZXR1cm4gKCkgPT4gcmVwb1JlbW92ZUV2ZW50Q2FsbGJhY2tGb3JRdWVyeShxdWVyeS5fcmVwbywgcXVlcnksIGNvbnRhaW5lcik7XG59XG5mdW5jdGlvbiBvblZhbHVlKHF1ZXJ5LCBjYWxsYmFjaywgY2FuY2VsQ2FsbGJhY2tPckxpc3Rlbk9wdGlvbnMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gYWRkRXZlbnRMaXN0ZW5lcihxdWVyeSwgJ3ZhbHVlJywgY2FsbGJhY2ssIGNhbmNlbENhbGxiYWNrT3JMaXN0ZW5PcHRpb25zLCBvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIG9uQ2hpbGRBZGRlZChxdWVyeSwgY2FsbGJhY2ssIGNhbmNlbENhbGxiYWNrT3JMaXN0ZW5PcHRpb25zLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGFkZEV2ZW50TGlzdGVuZXIocXVlcnksICdjaGlsZF9hZGRlZCcsIGNhbGxiYWNrLCBjYW5jZWxDYWxsYmFja09yTGlzdGVuT3B0aW9ucywgb3B0aW9ucyk7XG59XG5mdW5jdGlvbiBvbkNoaWxkQ2hhbmdlZChxdWVyeSwgY2FsbGJhY2ssIGNhbmNlbENhbGxiYWNrT3JMaXN0ZW5PcHRpb25zLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGFkZEV2ZW50TGlzdGVuZXIocXVlcnksICdjaGlsZF9jaGFuZ2VkJywgY2FsbGJhY2ssIGNhbmNlbENhbGxiYWNrT3JMaXN0ZW5PcHRpb25zLCBvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIG9uQ2hpbGRNb3ZlZChxdWVyeSwgY2FsbGJhY2ssIGNhbmNlbENhbGxiYWNrT3JMaXN0ZW5PcHRpb25zLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGFkZEV2ZW50TGlzdGVuZXIocXVlcnksICdjaGlsZF9tb3ZlZCcsIGNhbGxiYWNrLCBjYW5jZWxDYWxsYmFja09yTGlzdGVuT3B0aW9ucywgb3B0aW9ucyk7XG59XG5mdW5jdGlvbiBvbkNoaWxkUmVtb3ZlZChxdWVyeSwgY2FsbGJhY2ssIGNhbmNlbENhbGxiYWNrT3JMaXN0ZW5PcHRpb25zLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGFkZEV2ZW50TGlzdGVuZXIocXVlcnksICdjaGlsZF9yZW1vdmVkJywgY2FsbGJhY2ssIGNhbmNlbENhbGxiYWNrT3JMaXN0ZW5PcHRpb25zLCBvcHRpb25zKTtcbn1cbi8qKlxuICogRGV0YWNoZXMgYSBjYWxsYmFjayBwcmV2aW91c2x5IGF0dGFjaGVkIHdpdGggdGhlIGNvcnJlc3BvbmRpbmcgYG9uKigpYCAoYG9uVmFsdWVgLCBgb25DaGlsZEFkZGVkYCkgbGlzdGVuZXIuXG4gKiBOb3RlOiBUaGlzIGlzIG5vdCB0aGUgcmVjb21tZW5kZWQgd2F5IHRvIHJlbW92ZSBhIGxpc3RlbmVyLiBJbnN0ZWFkLCBwbGVhc2UgdXNlIHRoZSByZXR1cm5lZCBjYWxsYmFjayBmdW5jdGlvbiBmcm9tXG4gKiB0aGUgcmVzcGVjdGl2ZSBgb24qYCBjYWxsYmFja3MuXG4gKlxuICogRGV0YWNoIGEgY2FsbGJhY2sgcHJldmlvdXNseSBhdHRhY2hlZCB3aXRoIGBvbiooKWAuIENhbGxpbmcgYG9mZigpYCBvbiBhIHBhcmVudCBsaXN0ZW5lclxuICogd2lsbCBub3QgYXV0b21hdGljYWxseSByZW1vdmUgbGlzdGVuZXJzIHJlZ2lzdGVyZWQgb24gY2hpbGQgbm9kZXMsIGBvZmYoKWBcbiAqIG11c3QgYWxzbyBiZSBjYWxsZWQgb24gYW55IGNoaWxkIGxpc3RlbmVycyB0byByZW1vdmUgdGhlIGNhbGxiYWNrLlxuICpcbiAqIElmIGEgY2FsbGJhY2sgaXMgbm90IHNwZWNpZmllZCwgYWxsIGNhbGxiYWNrcyBmb3IgdGhlIHNwZWNpZmllZCBldmVudFR5cGVcbiAqIHdpbGwgYmUgcmVtb3ZlZC4gU2ltaWxhcmx5LCBpZiBubyBldmVudFR5cGUgaXMgc3BlY2lmaWVkLCBhbGwgY2FsbGJhY2tzXG4gKiBmb3IgdGhlIGBSZWZlcmVuY2VgIHdpbGwgYmUgcmVtb3ZlZC5cbiAqXG4gKiBJbmRpdmlkdWFsIGxpc3RlbmVycyBjYW4gYWxzbyBiZSByZW1vdmVkIGJ5IGludm9raW5nIHRoZWlyIHVuc3Vic2NyaWJlXG4gKiBjYWxsYmFja3MuXG4gKlxuICogQHBhcmFtIHF1ZXJ5IC0gVGhlIHF1ZXJ5IHRoYXQgdGhlIGxpc3RlbmVyIHdhcyByZWdpc3RlcmVkIHdpdGguXG4gKiBAcGFyYW0gZXZlbnRUeXBlIC0gT25lIG9mIHRoZSBmb2xsb3dpbmcgc3RyaW5nczogXCJ2YWx1ZVwiLCBcImNoaWxkX2FkZGVkXCIsXG4gKiBcImNoaWxkX2NoYW5nZWRcIiwgXCJjaGlsZF9yZW1vdmVkXCIsIG9yIFwiY2hpbGRfbW92ZWQuXCIgSWYgb21pdHRlZCwgYWxsIGNhbGxiYWNrc1xuICogZm9yIHRoZSBgUmVmZXJlbmNlYCB3aWxsIGJlIHJlbW92ZWQuXG4gKiBAcGFyYW0gY2FsbGJhY2sgLSBUaGUgY2FsbGJhY2sgZnVuY3Rpb24gdGhhdCB3YXMgcGFzc2VkIHRvIGBvbigpYCBvclxuICogYHVuZGVmaW5lZGAgdG8gcmVtb3ZlIGFsbCBjYWxsYmFja3MuXG4gKi9cbmZ1bmN0aW9uIG9mZihxdWVyeSwgZXZlbnRUeXBlLCBjYWxsYmFjaykge1xuICAgIGxldCBjb250YWluZXIgPSBudWxsO1xuICAgIGNvbnN0IGV4cENhbGxiYWNrID0gY2FsbGJhY2sgPyBuZXcgQ2FsbGJhY2tDb250ZXh0KGNhbGxiYWNrKSA6IG51bGw7XG4gICAgaWYgKGV2ZW50VHlwZSA9PT0gJ3ZhbHVlJykge1xuICAgICAgICBjb250YWluZXIgPSBuZXcgVmFsdWVFdmVudFJlZ2lzdHJhdGlvbihleHBDYWxsYmFjayk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGV2ZW50VHlwZSkge1xuICAgICAgICBjb250YWluZXIgPSBuZXcgQ2hpbGRFdmVudFJlZ2lzdHJhdGlvbihldmVudFR5cGUsIGV4cENhbGxiYWNrKTtcbiAgICB9XG4gICAgcmVwb1JlbW92ZUV2ZW50Q2FsbGJhY2tGb3JRdWVyeShxdWVyeS5fcmVwbywgcXVlcnksIGNvbnRhaW5lcik7XG59XG4vKipcbiAqIEEgYFF1ZXJ5Q29uc3RyYWludGAgaXMgdXNlZCB0byBuYXJyb3cgdGhlIHNldCBvZiBkb2N1bWVudHMgcmV0dXJuZWQgYnkgYVxuICogRGF0YWJhc2UgcXVlcnkuIGBRdWVyeUNvbnN0cmFpbnRgcyBhcmUgY3JlYXRlZCBieSBpbnZva2luZyB7QGxpbmsgZW5kQXR9LFxuICoge0BsaW5rIGVuZEJlZm9yZX0sIHtAbGluayBzdGFydEF0fSwge0BsaW5rIHN0YXJ0QWZ0ZXJ9LCB7QGxpbmtcbiAqIGxpbWl0VG9GaXJzdH0sIHtAbGluayBsaW1pdFRvTGFzdH0sIHtAbGluayBvcmRlckJ5Q2hpbGR9LFxuICoge0BsaW5rIG9yZGVyQnlDaGlsZH0sIHtAbGluayBvcmRlckJ5S2V5fSAsIHtAbGluayBvcmRlckJ5UHJpb3JpdHl9ICxcbiAqIHtAbGluayBvcmRlckJ5VmFsdWV9ICBvciB7QGxpbmsgZXF1YWxUb30gYW5kXG4gKiBjYW4gdGhlbiBiZSBwYXNzZWQgdG8ge0BsaW5rIHF1ZXJ5fSB0byBjcmVhdGUgYSBuZXcgcXVlcnkgaW5zdGFuY2UgdGhhdFxuICogYWxzbyBjb250YWlucyB0aGlzIGBRdWVyeUNvbnN0cmFpbnRgLlxuICovXG5jbGFzcyBRdWVyeUNvbnN0cmFpbnQge1xufVxuY2xhc3MgUXVlcnlFbmRBdENvbnN0cmFpbnQgZXh0ZW5kcyBRdWVyeUNvbnN0cmFpbnQge1xuICAgIGNvbnN0cnVjdG9yKF92YWx1ZSwgX2tleSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl92YWx1ZSA9IF92YWx1ZTtcbiAgICAgICAgdGhpcy5fa2V5ID0gX2tleTtcbiAgICAgICAgdGhpcy50eXBlID0gJ2VuZEF0JztcbiAgICB9XG4gICAgX2FwcGx5KHF1ZXJ5KSB7XG4gICAgICAgIHZhbGlkYXRlRmlyZWJhc2VEYXRhQXJnKCdlbmRBdCcsIHRoaXMuX3ZhbHVlLCBxdWVyeS5fcGF0aCwgdHJ1ZSk7XG4gICAgICAgIGNvbnN0IG5ld1BhcmFtcyA9IHF1ZXJ5UGFyYW1zRW5kQXQocXVlcnkuX3F1ZXJ5UGFyYW1zLCB0aGlzLl92YWx1ZSwgdGhpcy5fa2V5KTtcbiAgICAgICAgdmFsaWRhdGVMaW1pdChuZXdQYXJhbXMpO1xuICAgICAgICB2YWxpZGF0ZVF1ZXJ5RW5kcG9pbnRzKG5ld1BhcmFtcyk7XG4gICAgICAgIGlmIChxdWVyeS5fcXVlcnlQYXJhbXMuaGFzRW5kKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignZW5kQXQ6IFN0YXJ0aW5nIHBvaW50IHdhcyBhbHJlYWR5IHNldCAoYnkgYW5vdGhlciBjYWxsIHRvIGVuZEF0LCAnICtcbiAgICAgICAgICAgICAgICAnZW5kQmVmb3JlIG9yIGVxdWFsVG8pLicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnlJbXBsKHF1ZXJ5Ll9yZXBvLCBxdWVyeS5fcGF0aCwgbmV3UGFyYW1zLCBxdWVyeS5fb3JkZXJCeUNhbGxlZCk7XG4gICAgfVxufVxuLyoqXG4gKiBDcmVhdGVzIGEgYFF1ZXJ5Q29uc3RyYWludGAgd2l0aCB0aGUgc3BlY2lmaWVkIGVuZGluZyBwb2ludC5cbiAqXG4gKiBVc2luZyBgc3RhcnRBdCgpYCwgYHN0YXJ0QWZ0ZXIoKWAsIGBlbmRCZWZvcmUoKWAsIGBlbmRBdCgpYCBhbmQgYGVxdWFsVG8oKWBcbiAqIGFsbG93cyB5b3UgdG8gY2hvb3NlIGFyYml0cmFyeSBzdGFydGluZyBhbmQgZW5kaW5nIHBvaW50cyBmb3IgeW91ciBxdWVyaWVzLlxuICpcbiAqIFRoZSBlbmRpbmcgcG9pbnQgaXMgaW5jbHVzaXZlLCBzbyBjaGlsZHJlbiB3aXRoIGV4YWN0bHkgdGhlIHNwZWNpZmllZCB2YWx1ZVxuICogd2lsbCBiZSBpbmNsdWRlZCBpbiB0aGUgcXVlcnkuIFRoZSBvcHRpb25hbCBrZXkgYXJndW1lbnQgY2FuIGJlIHVzZWQgdG9cbiAqIGZ1cnRoZXIgbGltaXQgdGhlIHJhbmdlIG9mIHRoZSBxdWVyeS4gSWYgaXQgaXMgc3BlY2lmaWVkLCB0aGVuIGNoaWxkcmVuIHRoYXRcbiAqIGhhdmUgZXhhY3RseSB0aGUgc3BlY2lmaWVkIHZhbHVlIG11c3QgYWxzbyBoYXZlIGEga2V5IG5hbWUgbGVzcyB0aGFuIG9yIGVxdWFsXG4gKiB0byB0aGUgc3BlY2lmaWVkIGtleS5cbiAqXG4gKiBZb3UgY2FuIHJlYWQgbW9yZSBhYm91dCBgZW5kQXQoKWAgaW5cbiAqIHtAbGluayBodHRwczovL2ZpcmViYXNlLmdvb2dsZS5jb20vZG9jcy9kYXRhYmFzZS93ZWIvbGlzdHMtb2YtZGF0YSNmaWx0ZXJpbmdfZGF0YSB8IEZpbHRlcmluZyBkYXRhfS5cbiAqXG4gKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gZW5kIGF0LiBUaGUgYXJndW1lbnQgdHlwZSBkZXBlbmRzIG9uIHdoaWNoXG4gKiBgb3JkZXJCeSooKWAgZnVuY3Rpb24gd2FzIHVzZWQgaW4gdGhpcyBxdWVyeS4gU3BlY2lmeSBhIHZhbHVlIHRoYXQgbWF0Y2hlc1xuICogdGhlIGBvcmRlckJ5KigpYCB0eXBlLiBXaGVuIHVzZWQgaW4gY29tYmluYXRpb24gd2l0aCBgb3JkZXJCeUtleSgpYCwgdGhlXG4gKiB2YWx1ZSBtdXN0IGJlIGEgc3RyaW5nLlxuICogQHBhcmFtIGtleSAtIFRoZSBjaGlsZCBrZXkgdG8gZW5kIGF0LCBhbW9uZyB0aGUgY2hpbGRyZW4gd2l0aCB0aGUgcHJldmlvdXNseVxuICogc3BlY2lmaWVkIHByaW9yaXR5LiBUaGlzIGFyZ3VtZW50IGlzIG9ubHkgYWxsb3dlZCBpZiBvcmRlcmluZyBieSBjaGlsZCxcbiAqIHZhbHVlLCBvciBwcmlvcml0eS5cbiAqL1xuZnVuY3Rpb24gZW5kQXQodmFsdWUsIGtleSkge1xuICAgIHZhbGlkYXRlS2V5KCdlbmRBdCcsICdrZXknLCBrZXksIHRydWUpO1xuICAgIHJldHVybiBuZXcgUXVlcnlFbmRBdENvbnN0cmFpbnQodmFsdWUsIGtleSk7XG59XG5jbGFzcyBRdWVyeUVuZEJlZm9yZUNvbnN0cmFpbnQgZXh0ZW5kcyBRdWVyeUNvbnN0cmFpbnQge1xuICAgIGNvbnN0cnVjdG9yKF92YWx1ZSwgX2tleSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl92YWx1ZSA9IF92YWx1ZTtcbiAgICAgICAgdGhpcy5fa2V5ID0gX2tleTtcbiAgICAgICAgdGhpcy50eXBlID0gJ2VuZEJlZm9yZSc7XG4gICAgfVxuICAgIF9hcHBseShxdWVyeSkge1xuICAgICAgICB2YWxpZGF0ZUZpcmViYXNlRGF0YUFyZygnZW5kQmVmb3JlJywgdGhpcy5fdmFsdWUsIHF1ZXJ5Ll9wYXRoLCBmYWxzZSk7XG4gICAgICAgIGNvbnN0IG5ld1BhcmFtcyA9IHF1ZXJ5UGFyYW1zRW5kQmVmb3JlKHF1ZXJ5Ll9xdWVyeVBhcmFtcywgdGhpcy5fdmFsdWUsIHRoaXMuX2tleSk7XG4gICAgICAgIHZhbGlkYXRlTGltaXQobmV3UGFyYW1zKTtcbiAgICAgICAgdmFsaWRhdGVRdWVyeUVuZHBvaW50cyhuZXdQYXJhbXMpO1xuICAgICAgICBpZiAocXVlcnkuX3F1ZXJ5UGFyYW1zLmhhc0VuZCgpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2VuZEJlZm9yZTogU3RhcnRpbmcgcG9pbnQgd2FzIGFscmVhZHkgc2V0IChieSBhbm90aGVyIGNhbGwgdG8gZW5kQXQsICcgK1xuICAgICAgICAgICAgICAgICdlbmRCZWZvcmUgb3IgZXF1YWxUbykuJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeUltcGwocXVlcnkuX3JlcG8sIHF1ZXJ5Ll9wYXRoLCBuZXdQYXJhbXMsIHF1ZXJ5Ll9vcmRlckJ5Q2FsbGVkKTtcbiAgICB9XG59XG4vKipcbiAqIENyZWF0ZXMgYSBgUXVlcnlDb25zdHJhaW50YCB3aXRoIHRoZSBzcGVjaWZpZWQgZW5kaW5nIHBvaW50IChleGNsdXNpdmUpLlxuICpcbiAqIFVzaW5nIGBzdGFydEF0KClgLCBgc3RhcnRBZnRlcigpYCwgYGVuZEJlZm9yZSgpYCwgYGVuZEF0KClgIGFuZCBgZXF1YWxUbygpYFxuICogYWxsb3dzIHlvdSB0byBjaG9vc2UgYXJiaXRyYXJ5IHN0YXJ0aW5nIGFuZCBlbmRpbmcgcG9pbnRzIGZvciB5b3VyIHF1ZXJpZXMuXG4gKlxuICogVGhlIGVuZGluZyBwb2ludCBpcyBleGNsdXNpdmUuIElmIG9ubHkgYSB2YWx1ZSBpcyBwcm92aWRlZCwgY2hpbGRyZW5cbiAqIHdpdGggYSB2YWx1ZSBsZXNzIHRoYW4gdGhlIHNwZWNpZmllZCB2YWx1ZSB3aWxsIGJlIGluY2x1ZGVkIGluIHRoZSBxdWVyeS5cbiAqIElmIGEga2V5IGlzIHNwZWNpZmllZCwgdGhlbiBjaGlsZHJlbiBtdXN0IGhhdmUgYSB2YWx1ZSBsZXNzIHRoYW4gb3IgZXF1YWxcbiAqIHRvIHRoZSBzcGVjaWZpZWQgdmFsdWUgYW5kIGEga2V5IG5hbWUgbGVzcyB0aGFuIHRoZSBzcGVjaWZpZWQga2V5LlxuICpcbiAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSB0byBlbmQgYmVmb3JlLiBUaGUgYXJndW1lbnQgdHlwZSBkZXBlbmRzIG9uIHdoaWNoXG4gKiBgb3JkZXJCeSooKWAgZnVuY3Rpb24gd2FzIHVzZWQgaW4gdGhpcyBxdWVyeS4gU3BlY2lmeSBhIHZhbHVlIHRoYXQgbWF0Y2hlc1xuICogdGhlIGBvcmRlckJ5KigpYCB0eXBlLiBXaGVuIHVzZWQgaW4gY29tYmluYXRpb24gd2l0aCBgb3JkZXJCeUtleSgpYCwgdGhlXG4gKiB2YWx1ZSBtdXN0IGJlIGEgc3RyaW5nLlxuICogQHBhcmFtIGtleSAtIFRoZSBjaGlsZCBrZXkgdG8gZW5kIGJlZm9yZSwgYW1vbmcgdGhlIGNoaWxkcmVuIHdpdGggdGhlXG4gKiBwcmV2aW91c2x5IHNwZWNpZmllZCBwcmlvcml0eS4gVGhpcyBhcmd1bWVudCBpcyBvbmx5IGFsbG93ZWQgaWYgb3JkZXJpbmcgYnlcbiAqIGNoaWxkLCB2YWx1ZSwgb3IgcHJpb3JpdHkuXG4gKi9cbmZ1bmN0aW9uIGVuZEJlZm9yZSh2YWx1ZSwga2V5KSB7XG4gICAgdmFsaWRhdGVLZXkoJ2VuZEJlZm9yZScsICdrZXknLCBrZXksIHRydWUpO1xuICAgIHJldHVybiBuZXcgUXVlcnlFbmRCZWZvcmVDb25zdHJhaW50KHZhbHVlLCBrZXkpO1xufVxuY2xhc3MgUXVlcnlTdGFydEF0Q29uc3RyYWludCBleHRlbmRzIFF1ZXJ5Q29uc3RyYWludCB7XG4gICAgY29uc3RydWN0b3IoX3ZhbHVlLCBfa2V5KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuX3ZhbHVlID0gX3ZhbHVlO1xuICAgICAgICB0aGlzLl9rZXkgPSBfa2V5O1xuICAgICAgICB0aGlzLnR5cGUgPSAnc3RhcnRBdCc7XG4gICAgfVxuICAgIF9hcHBseShxdWVyeSkge1xuICAgICAgICB2YWxpZGF0ZUZpcmViYXNlRGF0YUFyZygnc3RhcnRBdCcsIHRoaXMuX3ZhbHVlLCBxdWVyeS5fcGF0aCwgdHJ1ZSk7XG4gICAgICAgIGNvbnN0IG5ld1BhcmFtcyA9IHF1ZXJ5UGFyYW1zU3RhcnRBdChxdWVyeS5fcXVlcnlQYXJhbXMsIHRoaXMuX3ZhbHVlLCB0aGlzLl9rZXkpO1xuICAgICAgICB2YWxpZGF0ZUxpbWl0KG5ld1BhcmFtcyk7XG4gICAgICAgIHZhbGlkYXRlUXVlcnlFbmRwb2ludHMobmV3UGFyYW1zKTtcbiAgICAgICAgaWYgKHF1ZXJ5Ll9xdWVyeVBhcmFtcy5oYXNTdGFydCgpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3N0YXJ0QXQ6IFN0YXJ0aW5nIHBvaW50IHdhcyBhbHJlYWR5IHNldCAoYnkgYW5vdGhlciBjYWxsIHRvIHN0YXJ0QXQsICcgK1xuICAgICAgICAgICAgICAgICdzdGFydEJlZm9yZSBvciBlcXVhbFRvKS4nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5SW1wbChxdWVyeS5fcmVwbywgcXVlcnkuX3BhdGgsIG5ld1BhcmFtcywgcXVlcnkuX29yZGVyQnlDYWxsZWQpO1xuICAgIH1cbn1cbi8qKlxuICogQ3JlYXRlcyBhIGBRdWVyeUNvbnN0cmFpbnRgIHdpdGggdGhlIHNwZWNpZmllZCBzdGFydGluZyBwb2ludC5cbiAqXG4gKiBVc2luZyBgc3RhcnRBdCgpYCwgYHN0YXJ0QWZ0ZXIoKWAsIGBlbmRCZWZvcmUoKWAsIGBlbmRBdCgpYCBhbmQgYGVxdWFsVG8oKWBcbiAqIGFsbG93cyB5b3UgdG8gY2hvb3NlIGFyYml0cmFyeSBzdGFydGluZyBhbmQgZW5kaW5nIHBvaW50cyBmb3IgeW91ciBxdWVyaWVzLlxuICpcbiAqIFRoZSBzdGFydGluZyBwb2ludCBpcyBpbmNsdXNpdmUsIHNvIGNoaWxkcmVuIHdpdGggZXhhY3RseSB0aGUgc3BlY2lmaWVkIHZhbHVlXG4gKiB3aWxsIGJlIGluY2x1ZGVkIGluIHRoZSBxdWVyeS4gVGhlIG9wdGlvbmFsIGtleSBhcmd1bWVudCBjYW4gYmUgdXNlZCB0b1xuICogZnVydGhlciBsaW1pdCB0aGUgcmFuZ2Ugb2YgdGhlIHF1ZXJ5LiBJZiBpdCBpcyBzcGVjaWZpZWQsIHRoZW4gY2hpbGRyZW4gdGhhdFxuICogaGF2ZSBleGFjdGx5IHRoZSBzcGVjaWZpZWQgdmFsdWUgbXVzdCBhbHNvIGhhdmUgYSBrZXkgbmFtZSBncmVhdGVyIHRoYW4gb3JcbiAqIGVxdWFsIHRvIHRoZSBzcGVjaWZpZWQga2V5LlxuICpcbiAqIFlvdSBjYW4gcmVhZCBtb3JlIGFib3V0IGBzdGFydEF0KClgIGluXG4gKiB7QGxpbmsgaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvZGF0YWJhc2Uvd2ViL2xpc3RzLW9mLWRhdGEjZmlsdGVyaW5nX2RhdGEgfCBGaWx0ZXJpbmcgZGF0YX0uXG4gKlxuICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIHN0YXJ0IGF0LiBUaGUgYXJndW1lbnQgdHlwZSBkZXBlbmRzIG9uIHdoaWNoXG4gKiBgb3JkZXJCeSooKWAgZnVuY3Rpb24gd2FzIHVzZWQgaW4gdGhpcyBxdWVyeS4gU3BlY2lmeSBhIHZhbHVlIHRoYXQgbWF0Y2hlc1xuICogdGhlIGBvcmRlckJ5KigpYCB0eXBlLiBXaGVuIHVzZWQgaW4gY29tYmluYXRpb24gd2l0aCBgb3JkZXJCeUtleSgpYCwgdGhlXG4gKiB2YWx1ZSBtdXN0IGJlIGEgc3RyaW5nLlxuICogQHBhcmFtIGtleSAtIFRoZSBjaGlsZCBrZXkgdG8gc3RhcnQgYXQuIFRoaXMgYXJndW1lbnQgaXMgb25seSBhbGxvd2VkIGlmXG4gKiBvcmRlcmluZyBieSBjaGlsZCwgdmFsdWUsIG9yIHByaW9yaXR5LlxuICovXG5mdW5jdGlvbiBzdGFydEF0KHZhbHVlID0gbnVsbCwga2V5KSB7XG4gICAgdmFsaWRhdGVLZXkoJ3N0YXJ0QXQnLCAna2V5Jywga2V5LCB0cnVlKTtcbiAgICByZXR1cm4gbmV3IFF1ZXJ5U3RhcnRBdENvbnN0cmFpbnQodmFsdWUsIGtleSk7XG59XG5jbGFzcyBRdWVyeVN0YXJ0QWZ0ZXJDb25zdHJhaW50IGV4dGVuZHMgUXVlcnlDb25zdHJhaW50IHtcbiAgICBjb25zdHJ1Y3RvcihfdmFsdWUsIF9rZXkpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5fdmFsdWUgPSBfdmFsdWU7XG4gICAgICAgIHRoaXMuX2tleSA9IF9rZXk7XG4gICAgICAgIHRoaXMudHlwZSA9ICdzdGFydEFmdGVyJztcbiAgICB9XG4gICAgX2FwcGx5KHF1ZXJ5KSB7XG4gICAgICAgIHZhbGlkYXRlRmlyZWJhc2VEYXRhQXJnKCdzdGFydEFmdGVyJywgdGhpcy5fdmFsdWUsIHF1ZXJ5Ll9wYXRoLCBmYWxzZSk7XG4gICAgICAgIGNvbnN0IG5ld1BhcmFtcyA9IHF1ZXJ5UGFyYW1zU3RhcnRBZnRlcihxdWVyeS5fcXVlcnlQYXJhbXMsIHRoaXMuX3ZhbHVlLCB0aGlzLl9rZXkpO1xuICAgICAgICB2YWxpZGF0ZUxpbWl0KG5ld1BhcmFtcyk7XG4gICAgICAgIHZhbGlkYXRlUXVlcnlFbmRwb2ludHMobmV3UGFyYW1zKTtcbiAgICAgICAgaWYgKHF1ZXJ5Ll9xdWVyeVBhcmFtcy5oYXNTdGFydCgpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3N0YXJ0QWZ0ZXI6IFN0YXJ0aW5nIHBvaW50IHdhcyBhbHJlYWR5IHNldCAoYnkgYW5vdGhlciBjYWxsIHRvIHN0YXJ0QXQsICcgK1xuICAgICAgICAgICAgICAgICdzdGFydEFmdGVyLCBvciBlcXVhbFRvKS4nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5SW1wbChxdWVyeS5fcmVwbywgcXVlcnkuX3BhdGgsIG5ld1BhcmFtcywgcXVlcnkuX29yZGVyQnlDYWxsZWQpO1xuICAgIH1cbn1cbi8qKlxuICogQ3JlYXRlcyBhIGBRdWVyeUNvbnN0cmFpbnRgIHdpdGggdGhlIHNwZWNpZmllZCBzdGFydGluZyBwb2ludCAoZXhjbHVzaXZlKS5cbiAqXG4gKiBVc2luZyBgc3RhcnRBdCgpYCwgYHN0YXJ0QWZ0ZXIoKWAsIGBlbmRCZWZvcmUoKWAsIGBlbmRBdCgpYCBhbmQgYGVxdWFsVG8oKWBcbiAqIGFsbG93cyB5b3UgdG8gY2hvb3NlIGFyYml0cmFyeSBzdGFydGluZyBhbmQgZW5kaW5nIHBvaW50cyBmb3IgeW91ciBxdWVyaWVzLlxuICpcbiAqIFRoZSBzdGFydGluZyBwb2ludCBpcyBleGNsdXNpdmUuIElmIG9ubHkgYSB2YWx1ZSBpcyBwcm92aWRlZCwgY2hpbGRyZW5cbiAqIHdpdGggYSB2YWx1ZSBncmVhdGVyIHRoYW4gdGhlIHNwZWNpZmllZCB2YWx1ZSB3aWxsIGJlIGluY2x1ZGVkIGluIHRoZSBxdWVyeS5cbiAqIElmIGEga2V5IGlzIHNwZWNpZmllZCwgdGhlbiBjaGlsZHJlbiBtdXN0IGhhdmUgYSB2YWx1ZSBncmVhdGVyIHRoYW4gb3IgZXF1YWxcbiAqIHRvIHRoZSBzcGVjaWZpZWQgdmFsdWUgYW5kIGEgYSBrZXkgbmFtZSBncmVhdGVyIHRoYW4gdGhlIHNwZWNpZmllZCBrZXkuXG4gKlxuICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIHN0YXJ0IGFmdGVyLiBUaGUgYXJndW1lbnQgdHlwZSBkZXBlbmRzIG9uIHdoaWNoXG4gKiBgb3JkZXJCeSooKWAgZnVuY3Rpb24gd2FzIHVzZWQgaW4gdGhpcyBxdWVyeS4gU3BlY2lmeSBhIHZhbHVlIHRoYXQgbWF0Y2hlc1xuICogdGhlIGBvcmRlckJ5KigpYCB0eXBlLiBXaGVuIHVzZWQgaW4gY29tYmluYXRpb24gd2l0aCBgb3JkZXJCeUtleSgpYCwgdGhlXG4gKiB2YWx1ZSBtdXN0IGJlIGEgc3RyaW5nLlxuICogQHBhcmFtIGtleSAtIFRoZSBjaGlsZCBrZXkgdG8gc3RhcnQgYWZ0ZXIuIFRoaXMgYXJndW1lbnQgaXMgb25seSBhbGxvd2VkIGlmXG4gKiBvcmRlcmluZyBieSBjaGlsZCwgdmFsdWUsIG9yIHByaW9yaXR5LlxuICovXG5mdW5jdGlvbiBzdGFydEFmdGVyKHZhbHVlLCBrZXkpIHtcbiAgICB2YWxpZGF0ZUtleSgnc3RhcnRBZnRlcicsICdrZXknLCBrZXksIHRydWUpO1xuICAgIHJldHVybiBuZXcgUXVlcnlTdGFydEFmdGVyQ29uc3RyYWludCh2YWx1ZSwga2V5KTtcbn1cbmNsYXNzIFF1ZXJ5TGltaXRUb0ZpcnN0Q29uc3RyYWludCBleHRlbmRzIFF1ZXJ5Q29uc3RyYWludCB7XG4gICAgY29uc3RydWN0b3IoX2xpbWl0KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuX2xpbWl0ID0gX2xpbWl0O1xuICAgICAgICB0aGlzLnR5cGUgPSAnbGltaXRUb0ZpcnN0JztcbiAgICB9XG4gICAgX2FwcGx5KHF1ZXJ5KSB7XG4gICAgICAgIGlmIChxdWVyeS5fcXVlcnlQYXJhbXMuaGFzTGltaXQoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdsaW1pdFRvRmlyc3Q6IExpbWl0IHdhcyBhbHJlYWR5IHNldCAoYnkgYW5vdGhlciBjYWxsIHRvIGxpbWl0VG9GaXJzdCAnICtcbiAgICAgICAgICAgICAgICAnb3IgbGltaXRUb0xhc3QpLicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnlJbXBsKHF1ZXJ5Ll9yZXBvLCBxdWVyeS5fcGF0aCwgcXVlcnlQYXJhbXNMaW1pdFRvRmlyc3QocXVlcnkuX3F1ZXJ5UGFyYW1zLCB0aGlzLl9saW1pdCksIHF1ZXJ5Ll9vcmRlckJ5Q2FsbGVkKTtcbiAgICB9XG59XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgYFF1ZXJ5Q29uc3RyYWludGAgdGhhdCBpZiBsaW1pdGVkIHRvIHRoZSBmaXJzdCBzcGVjaWZpYyBudW1iZXJcbiAqIG9mIGNoaWxkcmVuLlxuICpcbiAqIFRoZSBgbGltaXRUb0ZpcnN0KClgIG1ldGhvZCBpcyB1c2VkIHRvIHNldCBhIG1heGltdW0gbnVtYmVyIG9mIGNoaWxkcmVuIHRvIGJlXG4gKiBzeW5jZWQgZm9yIGEgZ2l2ZW4gY2FsbGJhY2suIElmIHdlIHNldCBhIGxpbWl0IG9mIDEwMCwgd2Ugd2lsbCBpbml0aWFsbHkgb25seVxuICogcmVjZWl2ZSB1cCB0byAxMDAgYGNoaWxkX2FkZGVkYCBldmVudHMuIElmIHdlIGhhdmUgZmV3ZXIgdGhhbiAxMDAgbWVzc2FnZXNcbiAqIHN0b3JlZCBpbiBvdXIgRGF0YWJhc2UsIGEgYGNoaWxkX2FkZGVkYCBldmVudCB3aWxsIGZpcmUgZm9yIGVhY2ggbWVzc2FnZS5cbiAqIEhvd2V2ZXIsIGlmIHdlIGhhdmUgb3ZlciAxMDAgbWVzc2FnZXMsIHdlIHdpbGwgb25seSByZWNlaXZlIGEgYGNoaWxkX2FkZGVkYFxuICogZXZlbnQgZm9yIHRoZSBmaXJzdCAxMDAgb3JkZXJlZCBtZXNzYWdlcy4gQXMgaXRlbXMgY2hhbmdlLCB3ZSB3aWxsIHJlY2VpdmVcbiAqIGBjaGlsZF9yZW1vdmVkYCBldmVudHMgZm9yIGVhY2ggaXRlbSB0aGF0IGRyb3BzIG91dCBvZiB0aGUgYWN0aXZlIGxpc3Qgc29cbiAqIHRoYXQgdGhlIHRvdGFsIG51bWJlciBzdGF5cyBhdCAxMDAuXG4gKlxuICogWW91IGNhbiByZWFkIG1vcmUgYWJvdXQgYGxpbWl0VG9GaXJzdCgpYCBpblxuICoge0BsaW5rIGh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlLmNvbS9kb2NzL2RhdGFiYXNlL3dlYi9saXN0cy1vZi1kYXRhI2ZpbHRlcmluZ19kYXRhIHwgRmlsdGVyaW5nIGRhdGF9LlxuICpcbiAqIEBwYXJhbSBsaW1pdCAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiBub2RlcyB0byBpbmNsdWRlIGluIHRoaXMgcXVlcnkuXG4gKi9cbmZ1bmN0aW9uIGxpbWl0VG9GaXJzdChsaW1pdCkge1xuICAgIGlmICh0eXBlb2YgbGltaXQgIT09ICdudW1iZXInIHx8IE1hdGguZmxvb3IobGltaXQpICE9PSBsaW1pdCB8fCBsaW1pdCA8PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignbGltaXRUb0ZpcnN0OiBGaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlci4nKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBRdWVyeUxpbWl0VG9GaXJzdENvbnN0cmFpbnQobGltaXQpO1xufVxuY2xhc3MgUXVlcnlMaW1pdFRvTGFzdENvbnN0cmFpbnQgZXh0ZW5kcyBRdWVyeUNvbnN0cmFpbnQge1xuICAgIGNvbnN0cnVjdG9yKF9saW1pdCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl9saW1pdCA9IF9saW1pdDtcbiAgICAgICAgdGhpcy50eXBlID0gJ2xpbWl0VG9MYXN0JztcbiAgICB9XG4gICAgX2FwcGx5KHF1ZXJ5KSB7XG4gICAgICAgIGlmIChxdWVyeS5fcXVlcnlQYXJhbXMuaGFzTGltaXQoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdsaW1pdFRvTGFzdDogTGltaXQgd2FzIGFscmVhZHkgc2V0IChieSBhbm90aGVyIGNhbGwgdG8gbGltaXRUb0ZpcnN0ICcgK1xuICAgICAgICAgICAgICAgICdvciBsaW1pdFRvTGFzdCkuJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeUltcGwocXVlcnkuX3JlcG8sIHF1ZXJ5Ll9wYXRoLCBxdWVyeVBhcmFtc0xpbWl0VG9MYXN0KHF1ZXJ5Ll9xdWVyeVBhcmFtcywgdGhpcy5fbGltaXQpLCBxdWVyeS5fb3JkZXJCeUNhbGxlZCk7XG4gICAgfVxufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGBRdWVyeUNvbnN0cmFpbnRgIHRoYXQgaXMgbGltaXRlZCB0byByZXR1cm4gb25seSB0aGUgbGFzdFxuICogc3BlY2lmaWVkIG51bWJlciBvZiBjaGlsZHJlbi5cbiAqXG4gKiBUaGUgYGxpbWl0VG9MYXN0KClgIG1ldGhvZCBpcyB1c2VkIHRvIHNldCBhIG1heGltdW0gbnVtYmVyIG9mIGNoaWxkcmVuIHRvIGJlXG4gKiBzeW5jZWQgZm9yIGEgZ2l2ZW4gY2FsbGJhY2suIElmIHdlIHNldCBhIGxpbWl0IG9mIDEwMCwgd2Ugd2lsbCBpbml0aWFsbHkgb25seVxuICogcmVjZWl2ZSB1cCB0byAxMDAgYGNoaWxkX2FkZGVkYCBldmVudHMuIElmIHdlIGhhdmUgZmV3ZXIgdGhhbiAxMDAgbWVzc2FnZXNcbiAqIHN0b3JlZCBpbiBvdXIgRGF0YWJhc2UsIGEgYGNoaWxkX2FkZGVkYCBldmVudCB3aWxsIGZpcmUgZm9yIGVhY2ggbWVzc2FnZS5cbiAqIEhvd2V2ZXIsIGlmIHdlIGhhdmUgb3ZlciAxMDAgbWVzc2FnZXMsIHdlIHdpbGwgb25seSByZWNlaXZlIGEgYGNoaWxkX2FkZGVkYFxuICogZXZlbnQgZm9yIHRoZSBsYXN0IDEwMCBvcmRlcmVkIG1lc3NhZ2VzLiBBcyBpdGVtcyBjaGFuZ2UsIHdlIHdpbGwgcmVjZWl2ZVxuICogYGNoaWxkX3JlbW92ZWRgIGV2ZW50cyBmb3IgZWFjaCBpdGVtIHRoYXQgZHJvcHMgb3V0IG9mIHRoZSBhY3RpdmUgbGlzdCBzb1xuICogdGhhdCB0aGUgdG90YWwgbnVtYmVyIHN0YXlzIGF0IDEwMC5cbiAqXG4gKiBZb3UgY2FuIHJlYWQgbW9yZSBhYm91dCBgbGltaXRUb0xhc3QoKWAgaW5cbiAqIHtAbGluayBodHRwczovL2ZpcmViYXNlLmdvb2dsZS5jb20vZG9jcy9kYXRhYmFzZS93ZWIvbGlzdHMtb2YtZGF0YSNmaWx0ZXJpbmdfZGF0YSB8IEZpbHRlcmluZyBkYXRhfS5cbiAqXG4gKiBAcGFyYW0gbGltaXQgLSBUaGUgbWF4aW11bSBudW1iZXIgb2Ygbm9kZXMgdG8gaW5jbHVkZSBpbiB0aGlzIHF1ZXJ5LlxuICovXG5mdW5jdGlvbiBsaW1pdFRvTGFzdChsaW1pdCkge1xuICAgIGlmICh0eXBlb2YgbGltaXQgIT09ICdudW1iZXInIHx8IE1hdGguZmxvb3IobGltaXQpICE9PSBsaW1pdCB8fCBsaW1pdCA8PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignbGltaXRUb0xhc3Q6IEZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyLicpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFF1ZXJ5TGltaXRUb0xhc3RDb25zdHJhaW50KGxpbWl0KTtcbn1cbmNsYXNzIFF1ZXJ5T3JkZXJCeUNoaWxkQ29uc3RyYWludCBleHRlbmRzIFF1ZXJ5Q29uc3RyYWludCB7XG4gICAgY29uc3RydWN0b3IoX3BhdGgpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5fcGF0aCA9IF9wYXRoO1xuICAgICAgICB0aGlzLnR5cGUgPSAnb3JkZXJCeUNoaWxkJztcbiAgICB9XG4gICAgX2FwcGx5KHF1ZXJ5KSB7XG4gICAgICAgIHZhbGlkYXRlTm9QcmV2aW91c09yZGVyQnlDYWxsKHF1ZXJ5LCAnb3JkZXJCeUNoaWxkJyk7XG4gICAgICAgIGNvbnN0IHBhcnNlZFBhdGggPSBuZXcgUGF0aCh0aGlzLl9wYXRoKTtcbiAgICAgICAgaWYgKHBhdGhJc0VtcHR5KHBhcnNlZFBhdGgpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ29yZGVyQnlDaGlsZDogY2Fubm90IHBhc3MgaW4gZW1wdHkgcGF0aC4gVXNlIG9yZGVyQnlWYWx1ZSgpIGluc3RlYWQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW5kZXggPSBuZXcgUGF0aEluZGV4KHBhcnNlZFBhdGgpO1xuICAgICAgICBjb25zdCBuZXdQYXJhbXMgPSBxdWVyeVBhcmFtc09yZGVyQnkocXVlcnkuX3F1ZXJ5UGFyYW1zLCBpbmRleCk7XG4gICAgICAgIHZhbGlkYXRlUXVlcnlFbmRwb2ludHMobmV3UGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeUltcGwocXVlcnkuX3JlcG8sIHF1ZXJ5Ll9wYXRoLCBuZXdQYXJhbXMsIFxuICAgICAgICAvKm9yZGVyQnlDYWxsZWQ9Ki8gdHJ1ZSk7XG4gICAgfVxufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGBRdWVyeUNvbnN0cmFpbnRgIHRoYXQgb3JkZXJzIGJ5IHRoZSBzcGVjaWZpZWQgY2hpbGQga2V5LlxuICpcbiAqIFF1ZXJpZXMgY2FuIG9ubHkgb3JkZXIgYnkgb25lIGtleSBhdCBhIHRpbWUuIENhbGxpbmcgYG9yZGVyQnlDaGlsZCgpYFxuICogbXVsdGlwbGUgdGltZXMgb24gdGhlIHNhbWUgcXVlcnkgaXMgYW4gZXJyb3IuXG4gKlxuICogRmlyZWJhc2UgcXVlcmllcyBhbGxvdyB5b3UgdG8gb3JkZXIgeW91ciBkYXRhIGJ5IGFueSBjaGlsZCBrZXkgb24gdGhlIGZseS5cbiAqIEhvd2V2ZXIsIGlmIHlvdSBrbm93IGluIGFkdmFuY2Ugd2hhdCB5b3VyIGluZGV4ZXMgd2lsbCBiZSwgeW91IGNhbiBkZWZpbmVcbiAqIHRoZW0gdmlhIHRoZSAuaW5kZXhPbiBydWxlIGluIHlvdXIgU2VjdXJpdHkgUnVsZXMgZm9yIGJldHRlciBwZXJmb3JtYW5jZS4gU2VlXG4gKiB0aGV7QGxpbmsgaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvZGF0YWJhc2Uvc2VjdXJpdHkvaW5kZXhpbmctZGF0YX1cbiAqIHJ1bGUgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gKlxuICogWW91IGNhbiByZWFkIG1vcmUgYWJvdXQgYG9yZGVyQnlDaGlsZCgpYCBpblxuICoge0BsaW5rIGh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlLmNvbS9kb2NzL2RhdGFiYXNlL3dlYi9saXN0cy1vZi1kYXRhI3NvcnRfZGF0YSB8IFNvcnQgZGF0YX0uXG4gKlxuICogQHBhcmFtIHBhdGggLSBUaGUgcGF0aCB0byBvcmRlciBieS5cbiAqL1xuZnVuY3Rpb24gb3JkZXJCeUNoaWxkKHBhdGgpIHtcbiAgICBpZiAocGF0aCA9PT0gJyRrZXknKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignb3JkZXJCeUNoaWxkOiBcIiRrZXlcIiBpcyBpbnZhbGlkLiAgVXNlIG9yZGVyQnlLZXkoKSBpbnN0ZWFkLicpO1xuICAgIH1cbiAgICBlbHNlIGlmIChwYXRoID09PSAnJHByaW9yaXR5Jykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ29yZGVyQnlDaGlsZDogXCIkcHJpb3JpdHlcIiBpcyBpbnZhbGlkLiAgVXNlIG9yZGVyQnlQcmlvcml0eSgpIGluc3RlYWQuJyk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHBhdGggPT09ICckdmFsdWUnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignb3JkZXJCeUNoaWxkOiBcIiR2YWx1ZVwiIGlzIGludmFsaWQuICBVc2Ugb3JkZXJCeVZhbHVlKCkgaW5zdGVhZC4nKTtcbiAgICB9XG4gICAgdmFsaWRhdGVQYXRoU3RyaW5nKCdvcmRlckJ5Q2hpbGQnLCAncGF0aCcsIHBhdGgsIGZhbHNlKTtcbiAgICByZXR1cm4gbmV3IFF1ZXJ5T3JkZXJCeUNoaWxkQ29uc3RyYWludChwYXRoKTtcbn1cbmNsYXNzIFF1ZXJ5T3JkZXJCeUtleUNvbnN0cmFpbnQgZXh0ZW5kcyBRdWVyeUNvbnN0cmFpbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLnR5cGUgPSAnb3JkZXJCeUtleSc7XG4gICAgfVxuICAgIF9hcHBseShxdWVyeSkge1xuICAgICAgICB2YWxpZGF0ZU5vUHJldmlvdXNPcmRlckJ5Q2FsbChxdWVyeSwgJ29yZGVyQnlLZXknKTtcbiAgICAgICAgY29uc3QgbmV3UGFyYW1zID0gcXVlcnlQYXJhbXNPcmRlckJ5KHF1ZXJ5Ll9xdWVyeVBhcmFtcywgS0VZX0lOREVYKTtcbiAgICAgICAgdmFsaWRhdGVRdWVyeUVuZHBvaW50cyhuZXdQYXJhbXMpO1xuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5SW1wbChxdWVyeS5fcmVwbywgcXVlcnkuX3BhdGgsIG5ld1BhcmFtcywgXG4gICAgICAgIC8qb3JkZXJCeUNhbGxlZD0qLyB0cnVlKTtcbiAgICB9XG59XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgYFF1ZXJ5Q29uc3RyYWludGAgdGhhdCBvcmRlcnMgYnkgdGhlIGtleS5cbiAqXG4gKiBTb3J0cyB0aGUgcmVzdWx0cyBvZiBhIHF1ZXJ5IGJ5IHRoZWlyIChhc2NlbmRpbmcpIGtleSB2YWx1ZXMuXG4gKlxuICogWW91IGNhbiByZWFkIG1vcmUgYWJvdXQgYG9yZGVyQnlLZXkoKWAgaW5cbiAqIHtAbGluayBodHRwczovL2ZpcmViYXNlLmdvb2dsZS5jb20vZG9jcy9kYXRhYmFzZS93ZWIvbGlzdHMtb2YtZGF0YSNzb3J0X2RhdGEgfCBTb3J0IGRhdGF9LlxuICovXG5mdW5jdGlvbiBvcmRlckJ5S2V5KCkge1xuICAgIHJldHVybiBuZXcgUXVlcnlPcmRlckJ5S2V5Q29uc3RyYWludCgpO1xufVxuY2xhc3MgUXVlcnlPcmRlckJ5UHJpb3JpdHlDb25zdHJhaW50IGV4dGVuZHMgUXVlcnlDb25zdHJhaW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy50eXBlID0gJ29yZGVyQnlQcmlvcml0eSc7XG4gICAgfVxuICAgIF9hcHBseShxdWVyeSkge1xuICAgICAgICB2YWxpZGF0ZU5vUHJldmlvdXNPcmRlckJ5Q2FsbChxdWVyeSwgJ29yZGVyQnlQcmlvcml0eScpO1xuICAgICAgICBjb25zdCBuZXdQYXJhbXMgPSBxdWVyeVBhcmFtc09yZGVyQnkocXVlcnkuX3F1ZXJ5UGFyYW1zLCBQUklPUklUWV9JTkRFWCk7XG4gICAgICAgIHZhbGlkYXRlUXVlcnlFbmRwb2ludHMobmV3UGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeUltcGwocXVlcnkuX3JlcG8sIHF1ZXJ5Ll9wYXRoLCBuZXdQYXJhbXMsIFxuICAgICAgICAvKm9yZGVyQnlDYWxsZWQ9Ki8gdHJ1ZSk7XG4gICAgfVxufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGBRdWVyeUNvbnN0cmFpbnRgIHRoYXQgb3JkZXJzIGJ5IHByaW9yaXR5LlxuICpcbiAqIEFwcGxpY2F0aW9ucyBuZWVkIG5vdCB1c2UgcHJpb3JpdHkgYnV0IGNhbiBvcmRlciBjb2xsZWN0aW9ucyBieVxuICogb3JkaW5hcnkgcHJvcGVydGllcyAoc2VlXG4gKiB7QGxpbmsgaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvZGF0YWJhc2Uvd2ViL2xpc3RzLW9mLWRhdGEjc29ydF9kYXRhIHwgU29ydCBkYXRhfVxuICogZm9yIGFsdGVybmF0aXZlcyB0byBwcmlvcml0eS5cbiAqL1xuZnVuY3Rpb24gb3JkZXJCeVByaW9yaXR5KCkge1xuICAgIHJldHVybiBuZXcgUXVlcnlPcmRlckJ5UHJpb3JpdHlDb25zdHJhaW50KCk7XG59XG5jbGFzcyBRdWVyeU9yZGVyQnlWYWx1ZUNvbnN0cmFpbnQgZXh0ZW5kcyBRdWVyeUNvbnN0cmFpbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLnR5cGUgPSAnb3JkZXJCeVZhbHVlJztcbiAgICB9XG4gICAgX2FwcGx5KHF1ZXJ5KSB7XG4gICAgICAgIHZhbGlkYXRlTm9QcmV2aW91c09yZGVyQnlDYWxsKHF1ZXJ5LCAnb3JkZXJCeVZhbHVlJyk7XG4gICAgICAgIGNvbnN0IG5ld1BhcmFtcyA9IHF1ZXJ5UGFyYW1zT3JkZXJCeShxdWVyeS5fcXVlcnlQYXJhbXMsIFZBTFVFX0lOREVYKTtcbiAgICAgICAgdmFsaWRhdGVRdWVyeUVuZHBvaW50cyhuZXdQYXJhbXMpO1xuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5SW1wbChxdWVyeS5fcmVwbywgcXVlcnkuX3BhdGgsIG5ld1BhcmFtcywgXG4gICAgICAgIC8qb3JkZXJCeUNhbGxlZD0qLyB0cnVlKTtcbiAgICB9XG59XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgYFF1ZXJ5Q29uc3RyYWludGAgdGhhdCBvcmRlcnMgYnkgdmFsdWUuXG4gKlxuICogSWYgdGhlIGNoaWxkcmVuIG9mIGEgcXVlcnkgYXJlIGFsbCBzY2FsYXIgdmFsdWVzIChzdHJpbmcsIG51bWJlciwgb3JcbiAqIGJvb2xlYW4pLCB5b3UgY2FuIG9yZGVyIHRoZSByZXN1bHRzIGJ5IHRoZWlyIChhc2NlbmRpbmcpIHZhbHVlcy5cbiAqXG4gKiBZb3UgY2FuIHJlYWQgbW9yZSBhYm91dCBgb3JkZXJCeVZhbHVlKClgIGluXG4gKiB7QGxpbmsgaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvZGF0YWJhc2Uvd2ViL2xpc3RzLW9mLWRhdGEjc29ydF9kYXRhIHwgU29ydCBkYXRhfS5cbiAqL1xuZnVuY3Rpb24gb3JkZXJCeVZhbHVlKCkge1xuICAgIHJldHVybiBuZXcgUXVlcnlPcmRlckJ5VmFsdWVDb25zdHJhaW50KCk7XG59XG5jbGFzcyBRdWVyeUVxdWFsVG9WYWx1ZUNvbnN0cmFpbnQgZXh0ZW5kcyBRdWVyeUNvbnN0cmFpbnQge1xuICAgIGNvbnN0cnVjdG9yKF92YWx1ZSwgX2tleSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl92YWx1ZSA9IF92YWx1ZTtcbiAgICAgICAgdGhpcy5fa2V5ID0gX2tleTtcbiAgICAgICAgdGhpcy50eXBlID0gJ2VxdWFsVG8nO1xuICAgIH1cbiAgICBfYXBwbHkocXVlcnkpIHtcbiAgICAgICAgdmFsaWRhdGVGaXJlYmFzZURhdGFBcmcoJ2VxdWFsVG8nLCB0aGlzLl92YWx1ZSwgcXVlcnkuX3BhdGgsIGZhbHNlKTtcbiAgICAgICAgaWYgKHF1ZXJ5Ll9xdWVyeVBhcmFtcy5oYXNTdGFydCgpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2VxdWFsVG86IFN0YXJ0aW5nIHBvaW50IHdhcyBhbHJlYWR5IHNldCAoYnkgYW5vdGhlciBjYWxsIHRvIHN0YXJ0QXQvc3RhcnRBZnRlciBvciAnICtcbiAgICAgICAgICAgICAgICAnZXF1YWxUbykuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHF1ZXJ5Ll9xdWVyeVBhcmFtcy5oYXNFbmQoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdlcXVhbFRvOiBFbmRpbmcgcG9pbnQgd2FzIGFscmVhZHkgc2V0IChieSBhbm90aGVyIGNhbGwgdG8gZW5kQXQvZW5kQmVmb3JlIG9yICcgK1xuICAgICAgICAgICAgICAgICdlcXVhbFRvKS4nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5RW5kQXRDb25zdHJhaW50KHRoaXMuX3ZhbHVlLCB0aGlzLl9rZXkpLl9hcHBseShuZXcgUXVlcnlTdGFydEF0Q29uc3RyYWludCh0aGlzLl92YWx1ZSwgdGhpcy5fa2V5KS5fYXBwbHkocXVlcnkpKTtcbiAgICB9XG59XG4vKipcbiAqIENyZWF0ZXMgYSBgUXVlcnlDb25zdHJhaW50YCB0aGF0IGluY2x1ZGVzIGNoaWxkcmVuIHRoYXQgbWF0Y2ggdGhlIHNwZWNpZmllZFxuICogdmFsdWUuXG4gKlxuICogVXNpbmcgYHN0YXJ0QXQoKWAsIGBzdGFydEFmdGVyKClgLCBgZW5kQmVmb3JlKClgLCBgZW5kQXQoKWAgYW5kIGBlcXVhbFRvKClgXG4gKiBhbGxvd3MgeW91IHRvIGNob29zZSBhcmJpdHJhcnkgc3RhcnRpbmcgYW5kIGVuZGluZyBwb2ludHMgZm9yIHlvdXIgcXVlcmllcy5cbiAqXG4gKiBUaGUgb3B0aW9uYWwga2V5IGFyZ3VtZW50IGNhbiBiZSB1c2VkIHRvIGZ1cnRoZXIgbGltaXQgdGhlIHJhbmdlIG9mIHRoZVxuICogcXVlcnkuIElmIGl0IGlzIHNwZWNpZmllZCwgdGhlbiBjaGlsZHJlbiB0aGF0IGhhdmUgZXhhY3RseSB0aGUgc3BlY2lmaWVkXG4gKiB2YWx1ZSBtdXN0IGFsc28gaGF2ZSBleGFjdGx5IHRoZSBzcGVjaWZpZWQga2V5IGFzIHRoZWlyIGtleSBuYW1lLiBUaGlzIGNhbiBiZVxuICogdXNlZCB0byBmaWx0ZXIgcmVzdWx0IHNldHMgd2l0aCBtYW55IG1hdGNoZXMgZm9yIHRoZSBzYW1lIHZhbHVlLlxuICpcbiAqIFlvdSBjYW4gcmVhZCBtb3JlIGFib3V0IGBlcXVhbFRvKClgIGluXG4gKiB7QGxpbmsgaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvZGF0YWJhc2Uvd2ViL2xpc3RzLW9mLWRhdGEjZmlsdGVyaW5nX2RhdGEgfCBGaWx0ZXJpbmcgZGF0YX0uXG4gKlxuICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIG1hdGNoIGZvci4gVGhlIGFyZ3VtZW50IHR5cGUgZGVwZW5kcyBvbiB3aGljaFxuICogYG9yZGVyQnkqKClgIGZ1bmN0aW9uIHdhcyB1c2VkIGluIHRoaXMgcXVlcnkuIFNwZWNpZnkgYSB2YWx1ZSB0aGF0IG1hdGNoZXNcbiAqIHRoZSBgb3JkZXJCeSooKWAgdHlwZS4gV2hlbiB1c2VkIGluIGNvbWJpbmF0aW9uIHdpdGggYG9yZGVyQnlLZXkoKWAsIHRoZVxuICogdmFsdWUgbXVzdCBiZSBhIHN0cmluZy5cbiAqIEBwYXJhbSBrZXkgLSBUaGUgY2hpbGQga2V5IHRvIHN0YXJ0IGF0LCBhbW9uZyB0aGUgY2hpbGRyZW4gd2l0aCB0aGVcbiAqIHByZXZpb3VzbHkgc3BlY2lmaWVkIHByaW9yaXR5LiBUaGlzIGFyZ3VtZW50IGlzIG9ubHkgYWxsb3dlZCBpZiBvcmRlcmluZyBieVxuICogY2hpbGQsIHZhbHVlLCBvciBwcmlvcml0eS5cbiAqL1xuZnVuY3Rpb24gZXF1YWxUbyh2YWx1ZSwga2V5KSB7XG4gICAgdmFsaWRhdGVLZXkoJ2VxdWFsVG8nLCAna2V5Jywga2V5LCB0cnVlKTtcbiAgICByZXR1cm4gbmV3IFF1ZXJ5RXF1YWxUb1ZhbHVlQ29uc3RyYWludCh2YWx1ZSwga2V5KTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBpbW11dGFibGUgaW5zdGFuY2Ugb2YgYFF1ZXJ5YCB0aGF0IGlzIGV4dGVuZGVkIHRvIGFsc28gaW5jbHVkZVxuICogYWRkaXRpb25hbCBxdWVyeSBjb25zdHJhaW50cy5cbiAqXG4gKiBAcGFyYW0gcXVlcnkgLSBUaGUgUXVlcnkgaW5zdGFuY2UgdG8gdXNlIGFzIGEgYmFzZSBmb3IgdGhlIG5ldyBjb25zdHJhaW50cy5cbiAqIEBwYXJhbSBxdWVyeUNvbnN0cmFpbnRzIC0gVGhlIGxpc3Qgb2YgYFF1ZXJ5Q29uc3RyYWludGBzIHRvIGFwcGx5LlxuICogQHRocm93cyBpZiBhbnkgb2YgdGhlIHByb3ZpZGVkIHF1ZXJ5IGNvbnN0cmFpbnRzIGNhbm5vdCBiZSBjb21iaW5lZCB3aXRoIHRoZVxuICogZXhpc3Rpbmcgb3IgbmV3IGNvbnN0cmFpbnRzLlxuICovXG5mdW5jdGlvbiBxdWVyeShxdWVyeSwgLi4ucXVlcnlDb25zdHJhaW50cykge1xuICAgIGxldCBxdWVyeUltcGwgPSBnZXRNb2R1bGFySW5zdGFuY2UocXVlcnkpO1xuICAgIGZvciAoY29uc3QgY29uc3RyYWludCBvZiBxdWVyeUNvbnN0cmFpbnRzKSB7XG4gICAgICAgIHF1ZXJ5SW1wbCA9IGNvbnN0cmFpbnQuX2FwcGx5KHF1ZXJ5SW1wbCk7XG4gICAgfVxuICAgIHJldHVybiBxdWVyeUltcGw7XG59XG4vKipcbiAqIERlZmluZSByZWZlcmVuY2UgY29uc3RydWN0b3IgaW4gdmFyaW91cyBtb2R1bGVzXG4gKlxuICogV2UgYXJlIGRvaW5nIHRoaXMgaGVyZSB0byBhdm9pZCBzZXZlcmFsIGNpcmN1bGFyXG4gKiBkZXBlbmRlbmN5IGlzc3Vlc1xuICovXG5zeW5jUG9pbnRTZXRSZWZlcmVuY2VDb25zdHJ1Y3RvcihSZWZlcmVuY2VJbXBsKTtcbnN5bmNUcmVlU2V0UmVmZXJlbmNlQ29uc3RydWN0b3IoUmVmZXJlbmNlSW1wbCk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRoaXMgdmFyaWFibGUgaXMgYWxzbyBkZWZpbmVkIGluIHRoZSBmaXJlYmFzZSBOb2RlLmpzIEFkbWluIFNESy4gQmVmb3JlXG4gKiBtb2RpZnlpbmcgdGhpcyBkZWZpbml0aW9uLCBjb25zdWx0IHRoZSBkZWZpbml0aW9uIGluOlxuICpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1hZG1pbi1ub2RlXG4gKlxuICogYW5kIG1ha2Ugc3VyZSB0aGUgdHdvIGFyZSBjb25zaXN0ZW50LlxuICovXG5jb25zdCBGSVJFQkFTRV9EQVRBQkFTRV9FTVVMQVRPUl9IT1NUX1ZBUiA9ICdGSVJFQkFTRV9EQVRBQkFTRV9FTVVMQVRPUl9IT1NUJztcbi8qKlxuICogQ3JlYXRlcyBhbmQgY2FjaGVzIGBSZXBvYCBpbnN0YW5jZXMuXG4gKi9cbmNvbnN0IHJlcG9zID0ge307XG4vKipcbiAqIElmIHRydWUsIGFueSBuZXcgYFJlcG9gIHdpbGwgYmUgY3JlYXRlZCB0byB1c2UgYFJlYWRvbmx5UmVzdENsaWVudGAgKGZvciB0ZXN0aW5nIHB1cnBvc2VzKS5cbiAqL1xubGV0IHVzZVJlc3RDbGllbnQgPSBmYWxzZTtcbi8qKlxuICogVXBkYXRlIGFuIGV4aXN0aW5nIGBSZXBvYCBpbiBwbGFjZSB0byBwb2ludCB0byBhIG5ldyBob3N0L3BvcnQuXG4gKi9cbmZ1bmN0aW9uIHJlcG9NYW5hZ2VyQXBwbHlFbXVsYXRvclNldHRpbmdzKHJlcG8sIGhvc3QsIHBvcnQsIHRva2VuUHJvdmlkZXIpIHtcbiAgICByZXBvLnJlcG9JbmZvXyA9IG5ldyBSZXBvSW5mbyhgJHtob3N0fToke3BvcnR9YCwgXG4gICAgLyogc2VjdXJlPSAqLyBmYWxzZSwgcmVwby5yZXBvSW5mb18ubmFtZXNwYWNlLCByZXBvLnJlcG9JbmZvXy53ZWJTb2NrZXRPbmx5LCByZXBvLnJlcG9JbmZvXy5ub2RlQWRtaW4sIHJlcG8ucmVwb0luZm9fLnBlcnNpc3RlbmNlS2V5LCByZXBvLnJlcG9JbmZvXy5pbmNsdWRlTmFtZXNwYWNlSW5RdWVyeVBhcmFtcywgXG4gICAgLyppc1VzaW5nRW11bGF0b3I9Ki8gdHJ1ZSk7XG4gICAgaWYgKHRva2VuUHJvdmlkZXIpIHtcbiAgICAgICAgcmVwby5hdXRoVG9rZW5Qcm92aWRlcl8gPSB0b2tlblByb3ZpZGVyO1xuICAgIH1cbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBzaG91bGQgb25seSBldmVyIGJlIGNhbGxlZCB0byBDUkVBVEUgYSBuZXcgZGF0YWJhc2UgaW5zdGFuY2UuXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gcmVwb01hbmFnZXJEYXRhYmFzZUZyb21BcHAoYXBwLCBhdXRoUHJvdmlkZXIsIGFwcENoZWNrUHJvdmlkZXIsIHVybCwgbm9kZUFkbWluKSB7XG4gICAgbGV0IGRiVXJsID0gdXJsIHx8IGFwcC5vcHRpb25zLmRhdGFiYXNlVVJMO1xuICAgIGlmIChkYlVybCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmICghYXBwLm9wdGlvbnMucHJvamVjdElkKSB7XG4gICAgICAgICAgICBmYXRhbChcIkNhbid0IGRldGVybWluZSBGaXJlYmFzZSBEYXRhYmFzZSBVUkwuIEJlIHN1cmUgdG8gaW5jbHVkZSBcIiArXG4gICAgICAgICAgICAgICAgJyBhIFByb2plY3QgSUQgd2hlbiBjYWxsaW5nIGZpcmViYXNlLmluaXRpYWxpemVBcHAoKS4nKTtcbiAgICAgICAgfVxuICAgICAgICBsb2coJ1VzaW5nIGRlZmF1bHQgaG9zdCBmb3IgcHJvamVjdCAnLCBhcHAub3B0aW9ucy5wcm9qZWN0SWQpO1xuICAgICAgICBkYlVybCA9IGAke2FwcC5vcHRpb25zLnByb2plY3RJZH0tZGVmYXVsdC1ydGRiLmZpcmViYXNlaW8uY29tYDtcbiAgICB9XG4gICAgbGV0IHBhcnNlZFVybCA9IHBhcnNlUmVwb0luZm8oZGJVcmwsIG5vZGVBZG1pbik7XG4gICAgbGV0IHJlcG9JbmZvID0gcGFyc2VkVXJsLnJlcG9JbmZvO1xuICAgIGxldCBpc0VtdWxhdG9yO1xuICAgIGxldCBkYkVtdWxhdG9ySG9zdCA9IHVuZGVmaW5lZDtcbiAgICBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHByb2Nlc3MuZW52KSB7XG4gICAgICAgIGRiRW11bGF0b3JIb3N0ID0gcHJvY2Vzcy5lbnZbRklSRUJBU0VfREFUQUJBU0VfRU1VTEFUT1JfSE9TVF9WQVJdO1xuICAgIH1cbiAgICBpZiAoZGJFbXVsYXRvckhvc3QpIHtcbiAgICAgICAgaXNFbXVsYXRvciA9IHRydWU7XG4gICAgICAgIGRiVXJsID0gYGh0dHA6Ly8ke2RiRW11bGF0b3JIb3N0fT9ucz0ke3JlcG9JbmZvLm5hbWVzcGFjZX1gO1xuICAgICAgICBwYXJzZWRVcmwgPSBwYXJzZVJlcG9JbmZvKGRiVXJsLCBub2RlQWRtaW4pO1xuICAgICAgICByZXBvSW5mbyA9IHBhcnNlZFVybC5yZXBvSW5mbztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlzRW11bGF0b3IgPSAhcGFyc2VkVXJsLnJlcG9JbmZvLnNlY3VyZTtcbiAgICB9XG4gICAgY29uc3QgYXV0aFRva2VuUHJvdmlkZXIgPSBub2RlQWRtaW4gJiYgaXNFbXVsYXRvclxuICAgICAgICA/IG5ldyBFbXVsYXRvclRva2VuUHJvdmlkZXIoRW11bGF0b3JUb2tlblByb3ZpZGVyLk9XTkVSKVxuICAgICAgICA6IG5ldyBGaXJlYmFzZUF1dGhUb2tlblByb3ZpZGVyKGFwcC5uYW1lLCBhcHAub3B0aW9ucywgYXV0aFByb3ZpZGVyKTtcbiAgICB2YWxpZGF0ZVVybCgnSW52YWxpZCBGaXJlYmFzZSBEYXRhYmFzZSBVUkwnLCBwYXJzZWRVcmwpO1xuICAgIGlmICghcGF0aElzRW1wdHkocGFyc2VkVXJsLnBhdGgpKSB7XG4gICAgICAgIGZhdGFsKCdEYXRhYmFzZSBVUkwgbXVzdCBwb2ludCB0byB0aGUgcm9vdCBvZiBhIEZpcmViYXNlIERhdGFiYXNlICcgK1xuICAgICAgICAgICAgJyhub3QgaW5jbHVkaW5nIGEgY2hpbGQgcGF0aCkuJyk7XG4gICAgfVxuICAgIGNvbnN0IHJlcG8gPSByZXBvTWFuYWdlckNyZWF0ZVJlcG8ocmVwb0luZm8sIGFwcCwgYXV0aFRva2VuUHJvdmlkZXIsIG5ldyBBcHBDaGVja1Rva2VuUHJvdmlkZXIoYXBwLm5hbWUsIGFwcENoZWNrUHJvdmlkZXIpKTtcbiAgICByZXR1cm4gbmV3IERhdGFiYXNlKHJlcG8sIGFwcCk7XG59XG4vKipcbiAqIFJlbW92ZSB0aGUgcmVwbyBhbmQgbWFrZSBzdXJlIGl0IGlzIGRpc2Nvbm5lY3RlZC5cbiAqXG4gKi9cbmZ1bmN0aW9uIHJlcG9NYW5hZ2VyRGVsZXRlUmVwbyhyZXBvLCBhcHBOYW1lKSB7XG4gICAgY29uc3QgYXBwUmVwb3MgPSByZXBvc1thcHBOYW1lXTtcbiAgICAvLyBUaGlzIHNob3VsZCBuZXZlciBoYXBwZW4uLi5cbiAgICBpZiAoIWFwcFJlcG9zIHx8IGFwcFJlcG9zW3JlcG8ua2V5XSAhPT0gcmVwbykge1xuICAgICAgICBmYXRhbChgRGF0YWJhc2UgJHthcHBOYW1lfSgke3JlcG8ucmVwb0luZm9ffSkgaGFzIGFscmVhZHkgYmVlbiBkZWxldGVkLmApO1xuICAgIH1cbiAgICByZXBvSW50ZXJydXB0KHJlcG8pO1xuICAgIGRlbGV0ZSBhcHBSZXBvc1tyZXBvLmtleV07XG59XG4vKipcbiAqIEVuc3VyZXMgYSByZXBvIGRvZXNuJ3QgYWxyZWFkeSBleGlzdCBhbmQgdGhlbiBjcmVhdGVzIG9uZSB1c2luZyB0aGVcbiAqIHByb3ZpZGVkIGFwcC5cbiAqXG4gKiBAcGFyYW0gcmVwb0luZm8gLSBUaGUgbWV0YWRhdGEgYWJvdXQgdGhlIFJlcG9cbiAqIEByZXR1cm5zIFRoZSBSZXBvIG9iamVjdCBmb3IgdGhlIHNwZWNpZmllZCBzZXJ2ZXIgLyByZXBvTmFtZS5cbiAqL1xuZnVuY3Rpb24gcmVwb01hbmFnZXJDcmVhdGVSZXBvKHJlcG9JbmZvLCBhcHAsIGF1dGhUb2tlblByb3ZpZGVyLCBhcHBDaGVja1Byb3ZpZGVyKSB7XG4gICAgbGV0IGFwcFJlcG9zID0gcmVwb3NbYXBwLm5hbWVdO1xuICAgIGlmICghYXBwUmVwb3MpIHtcbiAgICAgICAgYXBwUmVwb3MgPSB7fTtcbiAgICAgICAgcmVwb3NbYXBwLm5hbWVdID0gYXBwUmVwb3M7XG4gICAgfVxuICAgIGxldCByZXBvID0gYXBwUmVwb3NbcmVwb0luZm8udG9VUkxTdHJpbmcoKV07XG4gICAgaWYgKHJlcG8pIHtcbiAgICAgICAgZmF0YWwoJ0RhdGFiYXNlIGluaXRpYWxpemVkIG11bHRpcGxlIHRpbWVzLiBQbGVhc2UgbWFrZSBzdXJlIHRoZSBmb3JtYXQgb2YgdGhlIGRhdGFiYXNlIFVSTCBtYXRjaGVzIHdpdGggZWFjaCBkYXRhYmFzZSgpIGNhbGwuJyk7XG4gICAgfVxuICAgIHJlcG8gPSBuZXcgUmVwbyhyZXBvSW5mbywgdXNlUmVzdENsaWVudCwgYXV0aFRva2VuUHJvdmlkZXIsIGFwcENoZWNrUHJvdmlkZXIpO1xuICAgIGFwcFJlcG9zW3JlcG9JbmZvLnRvVVJMU3RyaW5nKCldID0gcmVwbztcbiAgICByZXR1cm4gcmVwbztcbn1cbi8qKlxuICogRm9yY2VzIHVzIHRvIHVzZSBSZWFkb25seVJlc3RDbGllbnQgaW5zdGVhZCBvZiBQZXJzaXN0ZW50Q29ubmVjdGlvbiBmb3IgbmV3IFJlcG9zLlxuICovXG5mdW5jdGlvbiByZXBvTWFuYWdlckZvcmNlUmVzdENsaWVudChmb3JjZVJlc3RDbGllbnQpIHtcbiAgICB1c2VSZXN0Q2xpZW50ID0gZm9yY2VSZXN0Q2xpZW50O1xufVxuLyoqXG4gKiBDbGFzcyByZXByZXNlbnRpbmcgYSBGaXJlYmFzZSBSZWFsdGltZSBEYXRhYmFzZS5cbiAqL1xuY2xhc3MgRGF0YWJhc2Uge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IoX3JlcG9JbnRlcm5hbCwgXG4gICAgLyoqIFRoZSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gYXNzb2NpYXRlZCB3aXRoIHRoaXMgUmVhbHRpbWUgRGF0YWJhc2UgaW5zdGFuY2UuICovXG4gICAgYXBwKSB7XG4gICAgICAgIHRoaXMuX3JlcG9JbnRlcm5hbCA9IF9yZXBvSW50ZXJuYWw7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgICAgICAvKiogUmVwcmVzZW50cyBhIGBEYXRhYmFzZWAgaW5zdGFuY2UuICovXG4gICAgICAgIHRoaXNbJ3R5cGUnXSA9ICdkYXRhYmFzZSc7XG4gICAgICAgIC8qKiBUcmFjayBpZiB0aGUgaW5zdGFuY2UgaGFzIGJlZW4gdXNlZCAocm9vdCBvciByZXBvIGFjY2Vzc2VkKSAqL1xuICAgICAgICB0aGlzLl9pbnN0YW5jZVN0YXJ0ZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgZ2V0IF9yZXBvKCkge1xuICAgICAgICBpZiAoIXRoaXMuX2luc3RhbmNlU3RhcnRlZCkge1xuICAgICAgICAgICAgcmVwb1N0YXJ0KHRoaXMuX3JlcG9JbnRlcm5hbCwgdGhpcy5hcHAub3B0aW9ucy5hcHBJZCwgdGhpcy5hcHAub3B0aW9uc1snZGF0YWJhc2VBdXRoVmFyaWFibGVPdmVycmlkZSddKTtcbiAgICAgICAgICAgIHRoaXMuX2luc3RhbmNlU3RhcnRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlcG9JbnRlcm5hbDtcbiAgICB9XG4gICAgZ2V0IF9yb290KCkge1xuICAgICAgICBpZiAoIXRoaXMuX3Jvb3RJbnRlcm5hbCkge1xuICAgICAgICAgICAgdGhpcy5fcm9vdEludGVybmFsID0gbmV3IFJlZmVyZW5jZUltcGwodGhpcy5fcmVwbywgbmV3RW1wdHlQYXRoKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9yb290SW50ZXJuYWw7XG4gICAgfVxuICAgIF9kZWxldGUoKSB7XG4gICAgICAgIGlmICh0aGlzLl9yb290SW50ZXJuYWwgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHJlcG9NYW5hZ2VyRGVsZXRlUmVwbyh0aGlzLl9yZXBvLCB0aGlzLmFwcC5uYW1lKTtcbiAgICAgICAgICAgIHRoaXMuX3JlcG9JbnRlcm5hbCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLl9yb290SW50ZXJuYWwgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgX2NoZWNrTm90RGVsZXRlZChhcGlOYW1lKSB7XG4gICAgICAgIGlmICh0aGlzLl9yb290SW50ZXJuYWwgPT09IG51bGwpIHtcbiAgICAgICAgICAgIGZhdGFsKCdDYW5ub3QgY2FsbCAnICsgYXBpTmFtZSArICcgb24gYSBkZWxldGVkIGRhdGFiYXNlLicpO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gY2hlY2tUcmFuc3BvcnRJbml0KCkge1xuICAgIGlmIChUcmFuc3BvcnRNYW5hZ2VyLklTX1RSQU5TUE9SVF9JTklUSUFMSVpFRCkge1xuICAgICAgICB3YXJuKCdUcmFuc3BvcnQgaGFzIGFscmVhZHkgYmVlbiBpbml0aWFsaXplZC4gUGxlYXNlIGNhbGwgdGhpcyBmdW5jdGlvbiBiZWZvcmUgY2FsbGluZyByZWYgb3Igc2V0dGluZyB1cCBhIGxpc3RlbmVyJyk7XG4gICAgfVxufVxuLyoqXG4gKiBGb3JjZSB0aGUgdXNlIG9mIHdlYnNvY2tldHMgaW5zdGVhZCBvZiBsb25nUG9sbGluZy5cbiAqL1xuZnVuY3Rpb24gZm9yY2VXZWJTb2NrZXRzKCkge1xuICAgIGNoZWNrVHJhbnNwb3J0SW5pdCgpO1xuICAgIEJyb3dzZXJQb2xsQ29ubmVjdGlvbi5mb3JjZURpc2FsbG93KCk7XG59XG4vKipcbiAqIEZvcmNlIHRoZSB1c2Ugb2YgbG9uZ1BvbGxpbmcgaW5zdGVhZCBvZiB3ZWJzb2NrZXRzLiBUaGlzIHdpbGwgYmUgaWdub3JlZCBpZiB3ZWJzb2NrZXQgcHJvdG9jb2wgaXMgdXNlZCBpbiBkYXRhYmFzZVVSTC5cbiAqL1xuZnVuY3Rpb24gZm9yY2VMb25nUG9sbGluZygpIHtcbiAgICBjaGVja1RyYW5zcG9ydEluaXQoKTtcbiAgICBXZWJTb2NrZXRDb25uZWN0aW9uLmZvcmNlRGlzYWxsb3coKTtcbiAgICBCcm93c2VyUG9sbENvbm5lY3Rpb24uZm9yY2VBbGxvdygpO1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBpbnN0YW5jZSBvZiB0aGUgUmVhbHRpbWUgRGF0YWJhc2UgU0RLIHRoYXQgaXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBwcm92aWRlZFxuICoge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9LiBJbml0aWFsaXplcyBhIG5ldyBpbnN0YW5jZSB3aXRoIGRlZmF1bHQgc2V0dGluZ3MgaWZcbiAqIG5vIGluc3RhbmNlIGV4aXN0cyBvciBpZiB0aGUgZXhpc3RpbmcgaW5zdGFuY2UgdXNlcyBhIGN1c3RvbSBkYXRhYmFzZSBVUkwuXG4gKlxuICogQHBhcmFtIGFwcCAtIFRoZSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gaW5zdGFuY2UgdGhhdCB0aGUgcmV0dXJuZWQgUmVhbHRpbWVcbiAqIERhdGFiYXNlIGluc3RhbmNlIGlzIGFzc29jaWF0ZWQgd2l0aC5cbiAqIEBwYXJhbSB1cmwgLSBUaGUgVVJMIG9mIHRoZSBSZWFsdGltZSBEYXRhYmFzZSBpbnN0YW5jZSB0byBjb25uZWN0IHRvLiBJZiBub3RcbiAqIHByb3ZpZGVkLCB0aGUgU0RLIGNvbm5lY3RzIHRvIHRoZSBkZWZhdWx0IGluc3RhbmNlIG9mIHRoZSBGaXJlYmFzZSBBcHAuXG4gKiBAcmV0dXJucyBUaGUgYERhdGFiYXNlYCBpbnN0YW5jZSBvZiB0aGUgcHJvdmlkZWQgYXBwLlxuICovXG5mdW5jdGlvbiBnZXREYXRhYmFzZShhcHAgPSBnZXRBcHAoKSwgdXJsKSB7XG4gICAgY29uc3QgZGIgPSBfZ2V0UHJvdmlkZXIoYXBwLCAnZGF0YWJhc2UnKS5nZXRJbW1lZGlhdGUoe1xuICAgICAgICBpZGVudGlmaWVyOiB1cmxcbiAgICB9KTtcbiAgICBpZiAoIWRiLl9pbnN0YW5jZVN0YXJ0ZWQpIHtcbiAgICAgICAgY29uc3QgZW11bGF0b3IgPSBnZXREZWZhdWx0RW11bGF0b3JIb3N0bmFtZUFuZFBvcnQoJ2RhdGFiYXNlJyk7XG4gICAgICAgIGlmIChlbXVsYXRvcikge1xuICAgICAgICAgICAgY29ubmVjdERhdGFiYXNlRW11bGF0b3IoZGIsIC4uLmVtdWxhdG9yKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGI7XG59XG4vKipcbiAqIE1vZGlmeSB0aGUgcHJvdmlkZWQgaW5zdGFuY2UgdG8gY29tbXVuaWNhdGUgd2l0aCB0aGUgUmVhbHRpbWUgRGF0YWJhc2VcbiAqIGVtdWxhdG9yLlxuICpcbiAqIDxwPk5vdGU6IFRoaXMgbWV0aG9kIG11c3QgYmUgY2FsbGVkIGJlZm9yZSBwZXJmb3JtaW5nIGFueSBvdGhlciBvcGVyYXRpb24uXG4gKlxuICogQHBhcmFtIGRiIC0gVGhlIGluc3RhbmNlIHRvIG1vZGlmeS5cbiAqIEBwYXJhbSBob3N0IC0gVGhlIGVtdWxhdG9yIGhvc3QgKGV4OiBsb2NhbGhvc3QpXG4gKiBAcGFyYW0gcG9ydCAtIFRoZSBlbXVsYXRvciBwb3J0IChleDogODA4MClcbiAqIEBwYXJhbSBvcHRpb25zLm1vY2tVc2VyVG9rZW4gLSB0aGUgbW9jayBhdXRoIHRva2VuIHRvIHVzZSBmb3IgdW5pdCB0ZXN0aW5nIFNlY3VyaXR5IFJ1bGVzXG4gKi9cbmZ1bmN0aW9uIGNvbm5lY3REYXRhYmFzZUVtdWxhdG9yKGRiLCBob3N0LCBwb3J0LCBvcHRpb25zID0ge30pIHtcbiAgICBkYiA9IGdldE1vZHVsYXJJbnN0YW5jZShkYik7XG4gICAgZGIuX2NoZWNrTm90RGVsZXRlZCgndXNlRW11bGF0b3InKTtcbiAgICBpZiAoZGIuX2luc3RhbmNlU3RhcnRlZCkge1xuICAgICAgICBmYXRhbCgnQ2Fubm90IGNhbGwgdXNlRW11bGF0b3IoKSBhZnRlciBpbnN0YW5jZSBoYXMgYWxyZWFkeSBiZWVuIGluaXRpYWxpemVkLicpO1xuICAgIH1cbiAgICBjb25zdCByZXBvID0gZGIuX3JlcG9JbnRlcm5hbDtcbiAgICBsZXQgdG9rZW5Qcm92aWRlciA9IHVuZGVmaW5lZDtcbiAgICBpZiAocmVwby5yZXBvSW5mb18ubm9kZUFkbWluKSB7XG4gICAgICAgIGlmIChvcHRpb25zLm1vY2tVc2VyVG9rZW4pIHtcbiAgICAgICAgICAgIGZhdGFsKCdtb2NrVXNlclRva2VuIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIEFkbWluIFNESy4gRm9yIGNsaWVudCBhY2Nlc3Mgd2l0aCBtb2NrIHVzZXJzLCBwbGVhc2UgdXNlIHRoZSBcImZpcmViYXNlXCIgcGFja2FnZSBpbnN0ZWFkIG9mIFwiZmlyZWJhc2UtYWRtaW5cIi4nKTtcbiAgICAgICAgfVxuICAgICAgICB0b2tlblByb3ZpZGVyID0gbmV3IEVtdWxhdG9yVG9rZW5Qcm92aWRlcihFbXVsYXRvclRva2VuUHJvdmlkZXIuT1dORVIpO1xuICAgIH1cbiAgICBlbHNlIGlmIChvcHRpb25zLm1vY2tVc2VyVG9rZW4pIHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSB0eXBlb2Ygb3B0aW9ucy5tb2NrVXNlclRva2VuID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyBvcHRpb25zLm1vY2tVc2VyVG9rZW5cbiAgICAgICAgICAgIDogY3JlYXRlTW9ja1VzZXJUb2tlbihvcHRpb25zLm1vY2tVc2VyVG9rZW4sIGRiLmFwcC5vcHRpb25zLnByb2plY3RJZCk7XG4gICAgICAgIHRva2VuUHJvdmlkZXIgPSBuZXcgRW11bGF0b3JUb2tlblByb3ZpZGVyKHRva2VuKTtcbiAgICB9XG4gICAgLy8gTW9kaWZ5IHRoZSByZXBvIHRvIGFwcGx5IGVtdWxhdG9yIHNldHRpbmdzXG4gICAgcmVwb01hbmFnZXJBcHBseUVtdWxhdG9yU2V0dGluZ3MocmVwbywgaG9zdCwgcG9ydCwgdG9rZW5Qcm92aWRlcik7XG59XG4vKipcbiAqIERpc2Nvbm5lY3RzIGZyb20gdGhlIHNlcnZlciAoYWxsIERhdGFiYXNlIG9wZXJhdGlvbnMgd2lsbCBiZSBjb21wbGV0ZWRcbiAqIG9mZmxpbmUpLlxuICpcbiAqIFRoZSBjbGllbnQgYXV0b21hdGljYWxseSBtYWludGFpbnMgYSBwZXJzaXN0ZW50IGNvbm5lY3Rpb24gdG8gdGhlIERhdGFiYXNlXG4gKiBzZXJ2ZXIsIHdoaWNoIHdpbGwgcmVtYWluIGFjdGl2ZSBpbmRlZmluaXRlbHkgYW5kIHJlY29ubmVjdCB3aGVuXG4gKiBkaXNjb25uZWN0ZWQuIEhvd2V2ZXIsIHRoZSBgZ29PZmZsaW5lKClgIGFuZCBgZ29PbmxpbmUoKWAgbWV0aG9kcyBtYXkgYmUgdXNlZFxuICogdG8gY29udHJvbCB0aGUgY2xpZW50IGNvbm5lY3Rpb24gaW4gY2FzZXMgd2hlcmUgYSBwZXJzaXN0ZW50IGNvbm5lY3Rpb24gaXNcbiAqIHVuZGVzaXJhYmxlLlxuICpcbiAqIFdoaWxlIG9mZmxpbmUsIHRoZSBjbGllbnQgd2lsbCBubyBsb25nZXIgcmVjZWl2ZSBkYXRhIHVwZGF0ZXMgZnJvbSB0aGVcbiAqIERhdGFiYXNlLiBIb3dldmVyLCBhbGwgRGF0YWJhc2Ugb3BlcmF0aW9ucyBwZXJmb3JtZWQgbG9jYWxseSB3aWxsIGNvbnRpbnVlIHRvXG4gKiBpbW1lZGlhdGVseSBmaXJlIGV2ZW50cywgYWxsb3dpbmcgeW91ciBhcHBsaWNhdGlvbiB0byBjb250aW51ZSBiZWhhdmluZ1xuICogbm9ybWFsbHkuIEFkZGl0aW9uYWxseSwgZWFjaCBvcGVyYXRpb24gcGVyZm9ybWVkIGxvY2FsbHkgd2lsbCBhdXRvbWF0aWNhbGx5XG4gKiBiZSBxdWV1ZWQgYW5kIHJldHJpZWQgdXBvbiByZWNvbm5lY3Rpb24gdG8gdGhlIERhdGFiYXNlIHNlcnZlci5cbiAqXG4gKiBUbyByZWNvbm5lY3QgdG8gdGhlIERhdGFiYXNlIGFuZCBiZWdpbiByZWNlaXZpbmcgcmVtb3RlIGV2ZW50cywgc2VlXG4gKiBgZ29PbmxpbmUoKWAuXG4gKlxuICogQHBhcmFtIGRiIC0gVGhlIGluc3RhbmNlIHRvIGRpc2Nvbm5lY3QuXG4gKi9cbmZ1bmN0aW9uIGdvT2ZmbGluZShkYikge1xuICAgIGRiID0gZ2V0TW9kdWxhckluc3RhbmNlKGRiKTtcbiAgICBkYi5fY2hlY2tOb3REZWxldGVkKCdnb09mZmxpbmUnKTtcbiAgICByZXBvSW50ZXJydXB0KGRiLl9yZXBvKTtcbn1cbi8qKlxuICogUmVjb25uZWN0cyB0byB0aGUgc2VydmVyIGFuZCBzeW5jaHJvbml6ZXMgdGhlIG9mZmxpbmUgRGF0YWJhc2Ugc3RhdGVcbiAqIHdpdGggdGhlIHNlcnZlciBzdGF0ZS5cbiAqXG4gKiBUaGlzIG1ldGhvZCBzaG91bGQgYmUgdXNlZCBhZnRlciBkaXNhYmxpbmcgdGhlIGFjdGl2ZSBjb25uZWN0aW9uIHdpdGhcbiAqIGBnb09mZmxpbmUoKWAuIE9uY2UgcmVjb25uZWN0ZWQsIHRoZSBjbGllbnQgd2lsbCB0cmFuc21pdCB0aGUgcHJvcGVyIGRhdGFcbiAqIGFuZCBmaXJlIHRoZSBhcHByb3ByaWF0ZSBldmVudHMgc28gdGhhdCB5b3VyIGNsaWVudCBcImNhdGNoZXMgdXBcIlxuICogYXV0b21hdGljYWxseS5cbiAqXG4gKiBAcGFyYW0gZGIgLSBUaGUgaW5zdGFuY2UgdG8gcmVjb25uZWN0LlxuICovXG5mdW5jdGlvbiBnb09ubGluZShkYikge1xuICAgIGRiID0gZ2V0TW9kdWxhckluc3RhbmNlKGRiKTtcbiAgICBkYi5fY2hlY2tOb3REZWxldGVkKCdnb09ubGluZScpO1xuICAgIHJlcG9SZXN1bWUoZGIuX3JlcG8pO1xufVxuZnVuY3Rpb24gZW5hYmxlTG9nZ2luZyhsb2dnZXIsIHBlcnNpc3RlbnQpIHtcbiAgICBlbmFibGVMb2dnaW5nJDEobG9nZ2VyLCBwZXJzaXN0ZW50KTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmZ1bmN0aW9uIHJlZ2lzdGVyRGF0YWJhc2UodmFyaWFudCkge1xuICAgIHNldFNES1ZlcnNpb24oU0RLX1ZFUlNJT04kMSk7XG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoJ2RhdGFiYXNlJywgKGNvbnRhaW5lciwgeyBpbnN0YW5jZUlkZW50aWZpZXI6IHVybCB9KSA9PiB7XG4gICAgICAgIGNvbnN0IGFwcCA9IGNvbnRhaW5lci5nZXRQcm92aWRlcignYXBwJykuZ2V0SW1tZWRpYXRlKCk7XG4gICAgICAgIGNvbnN0IGF1dGhQcm92aWRlciA9IGNvbnRhaW5lci5nZXRQcm92aWRlcignYXV0aC1pbnRlcm5hbCcpO1xuICAgICAgICBjb25zdCBhcHBDaGVja1Byb3ZpZGVyID0gY29udGFpbmVyLmdldFByb3ZpZGVyKCdhcHAtY2hlY2staW50ZXJuYWwnKTtcbiAgICAgICAgcmV0dXJuIHJlcG9NYW5hZ2VyRGF0YWJhc2VGcm9tQXBwKGFwcCwgYXV0aFByb3ZpZGVyLCBhcHBDaGVja1Byb3ZpZGVyLCB1cmwpO1xuICAgIH0sIFwiUFVCTElDXCIgLyogQ29tcG9uZW50VHlwZS5QVUJMSUMgKi8pLnNldE11bHRpcGxlSW5zdGFuY2VzKHRydWUpKTtcbiAgICByZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbiwgdmFyaWFudCk7XG4gICAgLy8gQlVJTERfVEFSR0VUIHdpbGwgYmUgcmVwbGFjZWQgYnkgdmFsdWVzIGxpa2UgZXNtMjAxNywgY2pzMjAxNywgZXRjIGR1cmluZyB0aGUgY29tcGlsYXRpb25cbiAgICByZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbiwgJ2VzbTIwMTcnKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNvbnN0IFNFUlZFUl9USU1FU1RBTVAgPSB7XG4gICAgJy5zdic6ICd0aW1lc3RhbXAnXG59O1xuLyoqXG4gKiBSZXR1cm5zIGEgcGxhY2Vob2xkZXIgdmFsdWUgZm9yIGF1dG8tcG9wdWxhdGluZyB0aGUgY3VycmVudCB0aW1lc3RhbXAgKHRpbWVcbiAqIHNpbmNlIHRoZSBVbml4IGVwb2NoLCBpbiBtaWxsaXNlY29uZHMpIGFzIGRldGVybWluZWQgYnkgdGhlIEZpcmViYXNlXG4gKiBzZXJ2ZXJzLlxuICovXG5mdW5jdGlvbiBzZXJ2ZXJUaW1lc3RhbXAoKSB7XG4gICAgcmV0dXJuIFNFUlZFUl9USU1FU1RBTVA7XG59XG4vKipcbiAqIFJldHVybnMgYSBwbGFjZWhvbGRlciB2YWx1ZSB0aGF0IGNhbiBiZSB1c2VkIHRvIGF0b21pY2FsbHkgaW5jcmVtZW50IHRoZVxuICogY3VycmVudCBkYXRhYmFzZSB2YWx1ZSBieSB0aGUgcHJvdmlkZWQgZGVsdGEuXG4gKlxuICogQHBhcmFtIGRlbHRhIC0gdGhlIGFtb3VudCB0byBtb2RpZnkgdGhlIGN1cnJlbnQgdmFsdWUgYXRvbWljYWxseS5cbiAqIEByZXR1cm5zIEEgcGxhY2Vob2xkZXIgdmFsdWUgZm9yIG1vZGlmeWluZyBkYXRhIGF0b21pY2FsbHkgc2VydmVyLXNpZGUuXG4gKi9cbmZ1bmN0aW9uIGluY3JlbWVudChkZWx0YSkge1xuICAgIHJldHVybiB7XG4gICAgICAgICcuc3YnOiB7XG4gICAgICAgICAgICAnaW5jcmVtZW50JzogZGVsdGFcbiAgICAgICAgfVxuICAgIH07XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgdHlwZSBmb3IgdGhlIHJlc29sdmUgdmFsdWUgb2Yge0BsaW5rIHJ1blRyYW5zYWN0aW9ufS5cbiAqL1xuY2xhc3MgVHJhbnNhY3Rpb25SZXN1bHQge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFdoZXRoZXIgdGhlIHRyYW5zYWN0aW9uIHdhcyBzdWNjZXNzZnVsbHkgY29tbWl0dGVkLiAqL1xuICAgIGNvbW1pdHRlZCwgXG4gICAgLyoqIFRoZSByZXN1bHRpbmcgZGF0YSBzbmFwc2hvdC4gKi9cbiAgICBzbmFwc2hvdCkge1xuICAgICAgICB0aGlzLmNvbW1pdHRlZCA9IGNvbW1pdHRlZDtcbiAgICAgICAgdGhpcy5zbmFwc2hvdCA9IHNuYXBzaG90O1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgb2JqZWN0LiAqL1xuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHsgY29tbWl0dGVkOiB0aGlzLmNvbW1pdHRlZCwgc25hcHNob3Q6IHRoaXMuc25hcHNob3QudG9KU09OKCkgfTtcbiAgICB9XG59XG4vKipcbiAqIEF0b21pY2FsbHkgbW9kaWZpZXMgdGhlIGRhdGEgYXQgdGhpcyBsb2NhdGlvbi5cbiAqXG4gKiBBdG9taWNhbGx5IG1vZGlmeSB0aGUgZGF0YSBhdCB0aGlzIGxvY2F0aW9uLiBVbmxpa2UgYSBub3JtYWwgYHNldCgpYCwgd2hpY2hcbiAqIGp1c3Qgb3ZlcndyaXRlcyB0aGUgZGF0YSByZWdhcmRsZXNzIG9mIGl0cyBwcmV2aW91cyB2YWx1ZSwgYHJ1blRyYW5zYWN0aW9uKClgIGlzXG4gKiB1c2VkIHRvIG1vZGlmeSB0aGUgZXhpc3RpbmcgdmFsdWUgdG8gYSBuZXcgdmFsdWUsIGVuc3VyaW5nIHRoZXJlIGFyZSBub1xuICogY29uZmxpY3RzIHdpdGggb3RoZXIgY2xpZW50cyB3cml0aW5nIHRvIHRoZSBzYW1lIGxvY2F0aW9uIGF0IHRoZSBzYW1lIHRpbWUuXG4gKlxuICogVG8gYWNjb21wbGlzaCB0aGlzLCB5b3UgcGFzcyBgcnVuVHJhbnNhY3Rpb24oKWAgYW4gdXBkYXRlIGZ1bmN0aW9uIHdoaWNoIGlzXG4gKiB1c2VkIHRvIHRyYW5zZm9ybSB0aGUgY3VycmVudCB2YWx1ZSBpbnRvIGEgbmV3IHZhbHVlLiBJZiBhbm90aGVyIGNsaWVudFxuICogd3JpdGVzIHRvIHRoZSBsb2NhdGlvbiBiZWZvcmUgeW91ciBuZXcgdmFsdWUgaXMgc3VjY2Vzc2Z1bGx5IHdyaXR0ZW4sIHlvdXJcbiAqIHVwZGF0ZSBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBhZ2FpbiB3aXRoIHRoZSBuZXcgY3VycmVudCB2YWx1ZSwgYW5kIHRoZVxuICogd3JpdGUgd2lsbCBiZSByZXRyaWVkLiBUaGlzIHdpbGwgaGFwcGVuIHJlcGVhdGVkbHkgdW50aWwgeW91ciB3cml0ZSBzdWNjZWVkc1xuICogd2l0aG91dCBjb25mbGljdCBvciB5b3UgYWJvcnQgdGhlIHRyYW5zYWN0aW9uIGJ5IG5vdCByZXR1cm5pbmcgYSB2YWx1ZSBmcm9tXG4gKiB5b3VyIHVwZGF0ZSBmdW5jdGlvbi5cbiAqXG4gKiBOb3RlOiBNb2RpZnlpbmcgZGF0YSB3aXRoIGBzZXQoKWAgd2lsbCBjYW5jZWwgYW55IHBlbmRpbmcgdHJhbnNhY3Rpb25zIGF0XG4gKiB0aGF0IGxvY2F0aW9uLCBzbyBleHRyZW1lIGNhcmUgc2hvdWxkIGJlIHRha2VuIGlmIG1peGluZyBgc2V0KClgIGFuZFxuICogYHJ1blRyYW5zYWN0aW9uKClgIHRvIHVwZGF0ZSB0aGUgc2FtZSBkYXRhLlxuICpcbiAqIE5vdGU6IFdoZW4gdXNpbmcgdHJhbnNhY3Rpb25zIHdpdGggU2VjdXJpdHkgYW5kIEZpcmViYXNlIFJ1bGVzIGluIHBsYWNlLCBiZVxuICogYXdhcmUgdGhhdCBhIGNsaWVudCBuZWVkcyBgLnJlYWRgIGFjY2VzcyBpbiBhZGRpdGlvbiB0byBgLndyaXRlYCBhY2Nlc3MgaW5cbiAqIG9yZGVyIHRvIHBlcmZvcm0gYSB0cmFuc2FjdGlvbi4gVGhpcyBpcyBiZWNhdXNlIHRoZSBjbGllbnQtc2lkZSBuYXR1cmUgb2ZcbiAqIHRyYW5zYWN0aW9ucyByZXF1aXJlcyB0aGUgY2xpZW50IHRvIHJlYWQgdGhlIGRhdGEgaW4gb3JkZXIgdG8gdHJhbnNhY3Rpb25hbGx5XG4gKiB1cGRhdGUgaXQuXG4gKlxuICogQHBhcmFtIHJlZiAtIFRoZSBsb2NhdGlvbiB0byBhdG9taWNhbGx5IG1vZGlmeS5cbiAqIEBwYXJhbSB0cmFuc2FjdGlvblVwZGF0ZSAtIEEgZGV2ZWxvcGVyLXN1cHBsaWVkIGZ1bmN0aW9uIHdoaWNoIHdpbGwgYmUgcGFzc2VkXG4gKiB0aGUgY3VycmVudCBkYXRhIHN0b3JlZCBhdCB0aGlzIGxvY2F0aW9uIChhcyBhIEphdmFTY3JpcHQgb2JqZWN0KS4gVGhlXG4gKiBmdW5jdGlvbiBzaG91bGQgcmV0dXJuIHRoZSBuZXcgdmFsdWUgaXQgd291bGQgbGlrZSB3cml0dGVuIChhcyBhIEphdmFTY3JpcHRcbiAqIG9iamVjdCkuIElmIGB1bmRlZmluZWRgIGlzIHJldHVybmVkIChpLmUuIHlvdSByZXR1cm4gd2l0aCBubyBhcmd1bWVudHMpIHRoZVxuICogdHJhbnNhY3Rpb24gd2lsbCBiZSBhYm9ydGVkIGFuZCB0aGUgZGF0YSBhdCB0aGlzIGxvY2F0aW9uIHdpbGwgbm90IGJlXG4gKiBtb2RpZmllZC5cbiAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb3B0aW9ucyBvYmplY3QgdG8gY29uZmlndXJlIHRyYW5zYWN0aW9ucy5cbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgY2FuIG9wdGlvbmFsbHkgYmUgdXNlZCBpbnN0ZWFkIG9mIHRoZSBgb25Db21wbGV0ZWBcbiAqIGNhbGxiYWNrIHRvIGhhbmRsZSBzdWNjZXNzIGFuZCBmYWlsdXJlLlxuICovXG5mdW5jdGlvbiBydW5UcmFuc2FjdGlvbihyZWYsIFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbnRyYW5zYWN0aW9uVXBkYXRlLCBvcHRpb25zKSB7XG4gICAgdmFyIF9hO1xuICAgIHJlZiA9IGdldE1vZHVsYXJJbnN0YW5jZShyZWYpO1xuICAgIHZhbGlkYXRlV3JpdGFibGVQYXRoKCdSZWZlcmVuY2UudHJhbnNhY3Rpb24nLCByZWYuX3BhdGgpO1xuICAgIGlmIChyZWYua2V5ID09PSAnLmxlbmd0aCcgfHwgcmVmLmtleSA9PT0gJy5rZXlzJykge1xuICAgICAgICB0aHJvdyAoJ1JlZmVyZW5jZS50cmFuc2FjdGlvbiBmYWlsZWQ6ICcgKyByZWYua2V5ICsgJyBpcyBhIHJlYWQtb25seSBvYmplY3QuJyk7XG4gICAgfVxuICAgIGNvbnN0IGFwcGx5TG9jYWxseSA9IChfYSA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5hcHBseUxvY2FsbHkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHRydWU7XG4gICAgY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICBjb25zdCBwcm9taXNlQ29tcGxldGUgPSAoZXJyb3IsIGNvbW1pdHRlZCwgbm9kZSkgPT4ge1xuICAgICAgICBsZXQgZGF0YVNuYXBzaG90ID0gbnVsbDtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGF0YVNuYXBzaG90ID0gbmV3IERhdGFTbmFwc2hvdChub2RlLCBuZXcgUmVmZXJlbmNlSW1wbChyZWYuX3JlcG8sIHJlZi5fcGF0aCksIFBSSU9SSVRZX0lOREVYKTtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUobmV3IFRyYW5zYWN0aW9uUmVzdWx0KGNvbW1pdHRlZCwgZGF0YVNuYXBzaG90KSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8vIEFkZCBhIHdhdGNoIHRvIG1ha2Ugc3VyZSB3ZSBnZXQgc2VydmVyIHVwZGF0ZXMuXG4gICAgY29uc3QgdW53YXRjaGVyID0gb25WYWx1ZShyZWYsICgpID0+IHsgfSk7XG4gICAgcmVwb1N0YXJ0VHJhbnNhY3Rpb24ocmVmLl9yZXBvLCByZWYuX3BhdGgsIHRyYW5zYWN0aW9uVXBkYXRlLCBwcm9taXNlQ29tcGxldGUsIHVud2F0Y2hlciwgYXBwbHlMb2NhbGx5KTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblBlcnNpc3RlbnRDb25uZWN0aW9uO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcblBlcnNpc3RlbnRDb25uZWN0aW9uLnByb3RvdHlwZS5zaW1wbGVMaXN0ZW4gPSBmdW5jdGlvbiAocGF0aFN0cmluZywgb25Db21wbGV0ZSkge1xuICAgIHRoaXMuc2VuZFJlcXVlc3QoJ3EnLCB7IHA6IHBhdGhTdHJpbmcgfSwgb25Db21wbGV0ZSk7XG59O1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcblBlcnNpc3RlbnRDb25uZWN0aW9uLnByb3RvdHlwZS5lY2hvID0gZnVuY3Rpb24gKGRhdGEsIG9uRWNobykge1xuICAgIHRoaXMuc2VuZFJlcXVlc3QoJ2VjaG8nLCB7IGQ6IGRhdGEgfSwgb25FY2hvKTtcbn07XG4vLyBSZWFsVGltZUNvbm5lY3Rpb24gcHJvcGVydGllcyB0aGF0IHdlIHVzZSBpbiB0ZXN0cy5cbkNvbm5lY3Rpb247XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5jb25zdCBoaWphY2tIYXNoID0gZnVuY3Rpb24gKG5ld0hhc2gpIHtcbiAgICBjb25zdCBvbGRQdXQgPSBQZXJzaXN0ZW50Q29ubmVjdGlvbi5wcm90b3R5cGUucHV0O1xuICAgIFBlcnNpc3RlbnRDb25uZWN0aW9uLnByb3RvdHlwZS5wdXQgPSBmdW5jdGlvbiAocGF0aFN0cmluZywgZGF0YSwgb25Db21wbGV0ZSwgaGFzaCkge1xuICAgICAgICBpZiAoaGFzaCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoYXNoID0gbmV3SGFzaCgpO1xuICAgICAgICB9XG4gICAgICAgIG9sZFB1dC5jYWxsKHRoaXMsIHBhdGhTdHJpbmcsIGRhdGEsIG9uQ29tcGxldGUsIGhhc2gpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgUGVyc2lzdGVudENvbm5lY3Rpb24ucHJvdG90eXBlLnB1dCA9IG9sZFB1dDtcbiAgICB9O1xufTtcblJlcG9JbmZvO1xuLyoqXG4gKiBGb3JjZXMgdGhlIFJlcG9NYW5hZ2VyIHRvIGNyZWF0ZSBSZXBvcyB0aGF0IHVzZSBSZWFkb25seVJlc3RDbGllbnQgaW5zdGVhZCBvZiBQZXJzaXN0ZW50Q29ubmVjdGlvbi5cbiAqIEBpbnRlcm5hbFxuICovXG5jb25zdCBmb3JjZVJlc3RDbGllbnQgPSBmdW5jdGlvbiAoZm9yY2VSZXN0Q2xpZW50KSB7XG4gICAgcmVwb01hbmFnZXJGb3JjZVJlc3RDbGllbnQoZm9yY2VSZXN0Q2xpZW50KTtcbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFVzZWQgYnkgY29uc29sZSB0byBjcmVhdGUgYSBkYXRhYmFzZSBiYXNlZCBvbiB0aGUgYXBwLFxuICogcGFzc2VkIGRhdGFiYXNlIFVSTCBhbmQgYSBjdXN0b20gYXV0aCBpbXBsZW1lbnRhdGlvbi5cbiAqIEBpbnRlcm5hbFxuICogQHBhcmFtIGFwcCAtIEEgdmFsaWQgRmlyZWJhc2VBcHAtbGlrZSBvYmplY3RcbiAqIEBwYXJhbSB1cmwgLSBBIHZhbGlkIEZpcmViYXNlIGRhdGFiYXNlVVJMXG4gKiBAcGFyYW0gdmVyc2lvbiAtIGN1c3RvbSB2ZXJzaW9uIGUuZy4gZmlyZWJhc2UtYWRtaW4gdmVyc2lvblxuICogQHBhcmFtIGN1c3RvbUFwcENoZWNrSW1wbCAtIGN1c3RvbSBhcHAgY2hlY2sgaW1wbGVtZW50YXRpb25cbiAqIEBwYXJhbSBjdXN0b21BdXRoSW1wbCAtIGN1c3RvbSBhdXRoIGltcGxlbWVudGF0aW9uXG4gKi9cbmZ1bmN0aW9uIF9pbml0U3RhbmRhbG9uZSh7IGFwcCwgdXJsLCB2ZXJzaW9uLCBjdXN0b21BdXRoSW1wbCwgY3VzdG9tQXBwQ2hlY2tJbXBsLCBub2RlQWRtaW4gPSBmYWxzZSB9KSB7XG4gICAgc2V0U0RLVmVyc2lvbih2ZXJzaW9uKTtcbiAgICAvKipcbiAgICAgKiBDb21wb25lbnRDb250YWluZXIoJ2RhdGFiYXNlLXN0YW5kYWxvbmUnKSBpcyBqdXN0IGEgcGxhY2Vob2xkZXIgdGhhdCBkb2Vzbid0IHBlcmZvcm1cbiAgICAgKiBhbnkgYWN0dWFsIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGNvbnN0IGNvbXBvbmVudENvbnRhaW5lciA9IG5ldyBDb21wb25lbnRDb250YWluZXIoJ2RhdGFiYXNlLXN0YW5kYWxvbmUnKTtcbiAgICBjb25zdCBhdXRoUHJvdmlkZXIgPSBuZXcgUHJvdmlkZXIoJ2F1dGgtaW50ZXJuYWwnLCBjb21wb25lbnRDb250YWluZXIpO1xuICAgIGxldCBhcHBDaGVja1Byb3ZpZGVyO1xuICAgIGlmIChjdXN0b21BcHBDaGVja0ltcGwpIHtcbiAgICAgICAgYXBwQ2hlY2tQcm92aWRlciA9IG5ldyBQcm92aWRlcignYXBwLWNoZWNrLWludGVybmFsJywgY29tcG9uZW50Q29udGFpbmVyKTtcbiAgICAgICAgYXBwQ2hlY2tQcm92aWRlci5zZXRDb21wb25lbnQobmV3IENvbXBvbmVudCgnYXBwLWNoZWNrLWludGVybmFsJywgKCkgPT4gY3VzdG9tQXBwQ2hlY2tJbXBsLCBcIlBSSVZBVEVcIiAvKiBDb21wb25lbnRUeXBlLlBSSVZBVEUgKi8pKTtcbiAgICB9XG4gICAgYXV0aFByb3ZpZGVyLnNldENvbXBvbmVudChuZXcgQ29tcG9uZW50KCdhdXRoLWludGVybmFsJywgKCkgPT4gY3VzdG9tQXV0aEltcGwsIFwiUFJJVkFURVwiIC8qIENvbXBvbmVudFR5cGUuUFJJVkFURSAqLykpO1xuICAgIHJldHVybiByZXBvTWFuYWdlckRhdGFiYXNlRnJvbUFwcChhcHAsIGF1dGhQcm92aWRlciwgYXBwQ2hlY2tQcm92aWRlciwgdXJsLCBub2RlQWRtaW4pO1xufVxuXG4vKipcbiAqIEZpcmViYXNlIFJlYWx0aW1lIERhdGFiYXNlXG4gKlxuICogQHBhY2thZ2VEb2N1bWVudGF0aW9uXG4gKi9cbnJlZ2lzdGVyRGF0YWJhc2UoKTtcblxuZXhwb3J0IHsgRGF0YVNuYXBzaG90LCBEYXRhYmFzZSwgT25EaXNjb25uZWN0LCBRdWVyeUNvbnN0cmFpbnQsIFRyYW5zYWN0aW9uUmVzdWx0LCBRdWVyeUltcGwgYXMgX1F1ZXJ5SW1wbCwgUXVlcnlQYXJhbXMgYXMgX1F1ZXJ5UGFyYW1zLCBSZWZlcmVuY2VJbXBsIGFzIF9SZWZlcmVuY2VJbXBsLCBmb3JjZVJlc3RDbGllbnQgYXMgX1RFU1RfQUNDRVNTX2ZvcmNlUmVzdENsaWVudCwgaGlqYWNrSGFzaCBhcyBfVEVTVF9BQ0NFU1NfaGlqYWNrSGFzaCwgX2luaXRTdGFuZGFsb25lLCByZXBvTWFuYWdlckRhdGFiYXNlRnJvbUFwcCBhcyBfcmVwb01hbmFnZXJEYXRhYmFzZUZyb21BcHAsIHNldFNES1ZlcnNpb24gYXMgX3NldFNES1ZlcnNpb24sIHZhbGlkYXRlUGF0aFN0cmluZyBhcyBfdmFsaWRhdGVQYXRoU3RyaW5nLCB2YWxpZGF0ZVdyaXRhYmxlUGF0aCBhcyBfdmFsaWRhdGVXcml0YWJsZVBhdGgsIGNoaWxkLCBjb25uZWN0RGF0YWJhc2VFbXVsYXRvciwgZW5hYmxlTG9nZ2luZywgZW5kQXQsIGVuZEJlZm9yZSwgZXF1YWxUbywgZm9yY2VMb25nUG9sbGluZywgZm9yY2VXZWJTb2NrZXRzLCBnZXQsIGdldERhdGFiYXNlLCBnb09mZmxpbmUsIGdvT25saW5lLCBpbmNyZW1lbnQsIGxpbWl0VG9GaXJzdCwgbGltaXRUb0xhc3QsIG9mZiwgb25DaGlsZEFkZGVkLCBvbkNoaWxkQ2hhbmdlZCwgb25DaGlsZE1vdmVkLCBvbkNoaWxkUmVtb3ZlZCwgb25EaXNjb25uZWN0LCBvblZhbHVlLCBvcmRlckJ5Q2hpbGQsIG9yZGVyQnlLZXksIG9yZGVyQnlQcmlvcml0eSwgb3JkZXJCeVZhbHVlLCBwdXNoLCBxdWVyeSwgcmVmLCByZWZGcm9tVVJMLCByZW1vdmUsIHJ1blRyYW5zYWN0aW9uLCBzZXJ2ZXJUaW1lc3RhbXAsIHNldCwgc2V0UHJpb3JpdHksIHNldFdpdGhQcmlvcml0eSwgc3RhcnRBZnRlciwgc3RhcnRBdCwgdXBkYXRlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiaW1wb3J0IGFwcCBmcm9tIFwiLi4vZmlyZWJhc2VDb25maWdcIjtcbmltcG9ydCB7IGdldERhdGFiYXNlLCByZWYsIHNldCwgcHVzaCwgZ2V0LCByZW1vdmUgfSBmcm9tIFwiZmlyZWJhc2UvZGF0YWJhc2VcIjtcblxuY2xhc3MgRmlyZWJhc2VGZXRjaCB7XG4gIGFzeW5jIGZldGNoRGF0YSgpIHtcbiAgICBjb25zdCBkYiA9IGdldERhdGFiYXNlKGFwcCk7XG4gICAgY29uc3QgZGJSZWYgPSByZWYoZGIsIFwiL2V4Y3Vyc2lvbnNcIik7XG4gICAgbGV0IHJlc3VsdEFycmF5ID0gW107XG5cbiAgICB0cnkge1xuICAgICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXQoZGJSZWYpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gc25hcHNob3QudmFsKCk7XG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiByZXN1bHQpIHtcbiAgICAgICAgY29uc3QgbmV3T2JqID0ge1xuICAgICAgICAgIGlkOiBrZXksXG4gICAgICAgICAgLi4ucmVzdWx0W2tleV0sXG4gICAgICAgIH07XG5cbiAgICAgICAgcmVzdWx0QXJyYXkucHVzaChuZXdPYmopO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coXCJEYXRhIGZldGNoZWQgc3VjY2Vzc2Z1bGx5IVwiKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGRVRDSCAtIGZhaWxlZCwgc3RhdHVzOiAke2Vycm9yfWApO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRBcnJheTtcbiAgfVxuXG4gIGFzeW5jIHB1c2hEYXRhKG9iaikge1xuICAgIGNvbnN0IGRiID0gZ2V0RGF0YWJhc2UoYXBwKTtcbiAgICBjb25zdCBkYlJlZiA9IHJlZihkYiwgXCIvZXhjdXJzaW9uc1wiKTtcblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBwdXNoKGRiUmVmLCBvYmopO1xuICAgICAgY29uc29sZS5sb2coXCJEYXRhIHB1c2hlZCBzdWNjZXNzZnVsbHkhXCIpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFBVU0ggLSBmYWlsZWQsIHN0YXR1czogJHtlcnJvcn1gKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyByZW1vdmVEYXRhKGlkKSB7XG4gICAgY29uc3QgZGIgPSBnZXREYXRhYmFzZShhcHApO1xuICAgIGNvbnN0IGRiUmVmID0gcmVmKGRiLCBgL2V4Y3Vyc2lvbnMvJHtpZH1gKTtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgcmVtb3ZlKGRiUmVmKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBSRU1PVkUgLSBmYWlsZWQsIHN0YXR1czogJHtlcnJvcn1gKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGVEYXRhKGlkLCBvYmopIHtcbiAgICBjb25zdCBkYiA9IGdldERhdGFiYXNlKGFwcCk7XG4gICAgY29uc3QgZGJSZWYgPSByZWYoZGIsIGAvZXhjdXJzaW9ucy8ke2lkfWApO1xuXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHNldChkYlJlZiwgb2JqKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVUERBVEUgLSBmYWlsZWQsIHN0YXR1czogJHtlcnJvcn1gKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRmlyZWJhc2VGZXRjaDtcbiIsImltcG9ydCBcIi4vLi4vY3NzL3Jlc2V0LmNzc1wiO1xuaW1wb3J0IFwiLi8uLi9jc3MvY2xpZW50L2ZvbnRzLmNzc1wiO1xuaW1wb3J0IFwiLi8uLi9jc3MvY2xpZW50L2dsb2JhbC5jc3NcIjtcbmltcG9ydCBcIi4vLi4vY3NzL2NsaWVudC9tb2JpbGUuY3NzXCI7XG5pbXBvcnQgXCIuLy4uL2Nzcy9jbGllbnQvZGVza3RvcC5jc3NcIjtcbmltcG9ydCBcIi4vLi4vY3NzL2NsaWVudC9iYXNrZXQvYmFza2V0LWZvbnRzLmNzc1wiO1xuaW1wb3J0IFwiLi8uLi9jc3MvY2xpZW50L2Jhc2tldC9iYXNrZXQuY3NzXCI7XG5cbmltcG9ydCBGaXJlYmFzZUZldGNoIGZyb20gXCIuL0ZpcmViYXNlRmV0Y2hcIjtcbmltcG9ydCBWYWxpZGF0aW9uIGZyb20gXCIuL1ZhbGlkYXRpb25cIjtcbmltcG9ydCBOYXZiYXJDU1MgZnJvbSBcIi4vbmF2YmFyQ1NTXCI7XG5cbmNvbnN0IGJhc2tldCA9IFtdO1xuXG5jb25zdCBmaXJlYmFzZUZldGNoID0gbmV3IEZpcmViYXNlRmV0Y2goKTtcbmNvbnN0IHZhbGlkYXRpb24gPSBuZXcgVmFsaWRhdGlvbihiYXNrZXQpO1xuY29uc3QgbmF2YmFyQ1NTID0gbmV3IE5hdmJhckNTUygpO1xuXG5jb25zb2xlLmxvZyhcImNsaWVudFwiKTtcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGluaXQpO1xuXG5hc3luYyBmdW5jdGlvbiBpbml0KCkge1xuICBuYXZiYXJDU1MubWFuYWdlTmF2YmFyKCk7XG5cbiAgY29uc3QgZXhjdXJzaW9uc0xpc3QgPSBhd2FpdCBmaXJlYmFzZUZldGNoLmZldGNoRGF0YSgpO1xuICBzaG93RXhjdXJzaW9ucyhleGN1cnNpb25zTGlzdCk7XG5cbiAgY29uc3QgZXhjdXJzaW9uc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZXhjdXJzaW9uc1wiKTtcbiAgZXhjdXJzaW9uc0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIG1hbmFnZUJhc2tldCk7XG5cbiAgY29uc3QgYmFza2V0T3JkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJhc2tldF9fb3JkZXJcIik7XG4gIGJhc2tldE9yZGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgcGxhY2VPcmRlcik7XG59XG5cbmZ1bmN0aW9uIHNob3dFeGN1cnNpb25zKGV4Y3Vyc2lvbnNMaXN0KSB7XG4gIGNvbnN0IHBhbmVsRXhjdXJzaW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGFuZWxfX2V4Y3Vyc2lvbnNcIik7XG5cbiAgZXhjdXJzaW9uc0xpc3QuZm9yRWFjaCgoZXhjdXJzaW9uKSA9PiB7XG4gICAgY29uc3QgeyBleGN1cnNpb25UZW1wbGF0ZSwgbmFtZSwgZGVzY3JpcHRpb24sIGFkdWx0c1ByaWNlLCBjaGlsZHJlblByaWNlIH0gPVxuICAgICAgdXNlRXhjdXJzaW9uVGVtcGxhdGUoKTtcblxuICAgIGV4Y3Vyc2lvblRlbXBsYXRlLnNldEF0dHJpYnV0ZShcImlkXCIsIGV4Y3Vyc2lvbi5pZCk7XG4gICAgbmFtZS5pbm5lclRleHQgPSBleGN1cnNpb24ubmFtZTtcbiAgICBkZXNjcmlwdGlvbi5pbm5lclRleHQgPSBleGN1cnNpb24uZGVzY3JpcHRpb247XG4gICAgYWR1bHRzUHJpY2UuaW5uZXJUZXh0ID0gZXhjdXJzaW9uLmFkdWx0c1ByaWNlO1xuICAgIGNoaWxkcmVuUHJpY2UuaW5uZXJUZXh0ID0gZXhjdXJzaW9uLmNoaWxkcmVuUHJpY2U7XG5cbiAgICBwYW5lbEV4Y3Vyc2lvbnMuYXBwZW5kQ2hpbGQoZXhjdXJzaW9uVGVtcGxhdGUpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gdXNlRXhjdXJzaW9uVGVtcGxhdGUoKSB7XG4gIGNvbnN0IGV4Y3Vyc2lvblRlbXBsYXRlID0gZG9jdW1lbnRcbiAgICAucXVlcnlTZWxlY3RvcihcIi5leGN1cnNpb25zX19pdGVtLS1wcm90b3R5cGVcIilcbiAgICAuY2xvbmVOb2RlKHRydWUpO1xuICBleGN1cnNpb25UZW1wbGF0ZS5jbGFzc0xpc3QucmVtb3ZlKFwiZXhjdXJzaW9uc19faXRlbS0tcHJvdG90eXBlXCIpO1xuICBjb25zdCBuYW1lID0gZXhjdXJzaW9uVGVtcGxhdGUucXVlcnlTZWxlY3RvcihcIi5leGN1cnNpb25zX19uYW1lXCIpO1xuICBjb25zdCBkZXNjcmlwdGlvbiA9IGV4Y3Vyc2lvblRlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoXG4gICAgXCIuZXhjdXJzaW9uc19fZGVzY3JpcHRpb25cIlxuICApO1xuICBjb25zdCBwcmljZSA9IGV4Y3Vyc2lvblRlbXBsYXRlLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZXhjdXJzaW9uc19fcHJpY2VcIik7XG4gIGNvbnN0IFthZHVsdHNQcmljZSwgY2hpbGRyZW5QcmljZV0gPSBwcmljZTtcblxuICByZXR1cm4geyBleGN1cnNpb25UZW1wbGF0ZSwgbmFtZSwgZGVzY3JpcHRpb24sIGFkdWx0c1ByaWNlLCBjaGlsZHJlblByaWNlIH07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIG1hbmFnZUJhc2tldChldnQpIHtcbiAgYXdhaXQgYWRkSXRlbVRvQmFza2V0KGV2dCk7XG4gIHNob3dJdGVtc1F1YW50aXR5KCk7XG4gIHNob3dCYXNrZXRJdGVtcygpO1xuICBjbGVhclRpY2tldHNJbnB1dCgpO1xuICBzaG93T3JkZXJUb3RhbFByaWNlKCk7XG4gIGJhc2tldEl0ZW1SZW1vdmFsKCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGFkZEl0ZW1Ub0Jhc2tldChldnQpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgY29uc3QgeyBiYXNrZXRWYWxpZGF0aW9uIH0gPSB2YWxpZGF0aW9uO1xuICBjb25zdCBiYXNrZXRWYWxpZGF0aW9uUmVzdWx0ID0gYmFza2V0VmFsaWRhdGlvbihldnQpO1xuICBpZiAoYmFza2V0VmFsaWRhdGlvblJlc3VsdCA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm47XG4gIH0gZWxzZSB7XG4gICAgaGlkZVN1Ym1pdFRpY2tldHNFcnJvcigpO1xuICB9XG5cbiAgY29uc3QgeyBzZWxlY3RlZEV4Y3Vyc2lvbiB9ID0gYXdhaXQgbWF0Y2hFeGN1cnNpb25zSUQoZXZ0KTtcblxuICBjb25zdCB7IGFkdWx0c1RpY2tldEFtb3VudCwgY2hpbGRyZW5UaWNrZXRBbW91bnQgfSA9IGdldFRpY2tldEFtb3VudChldnQpO1xuXG4gIGlmIChpc0V4Y3Vyc2lvbkluQmFza2V0KHNlbGVjdGVkRXhjdXJzaW9uKSkge1xuICAgIHVwZGF0ZUJhc2tldChzZWxlY3RlZEV4Y3Vyc2lvbiwgYWR1bHRzVGlja2V0QW1vdW50LCBjaGlsZHJlblRpY2tldEFtb3VudCk7XG4gIH0gZWxzZSB7XG4gICAgYWRkTmV3SXRlbVRvQmFza2V0KFxuICAgICAgc2VsZWN0ZWRFeGN1cnNpb24sXG4gICAgICBhZHVsdHNUaWNrZXRBbW91bnQsXG4gICAgICBjaGlsZHJlblRpY2tldEFtb3VudFxuICAgICk7XG4gIH1cbn1cblxuZnVuY3Rpb24gc2hvd0l0ZW1zUXVhbnRpdHkoKSB7XG4gIGNvbnN0IGJhc2tldEJ0blF1YW50aXR5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5iYXNrZXQtYnRuX19xdWFudGl0eVwiKTtcblxuICBpZiAoYmFza2V0Lmxlbmd0aCA+IDApIHtcbiAgICBiYXNrZXRCdG5RdWFudGl0eS5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gIH0gZWxzZSB7XG4gICAgYmFza2V0QnRuUXVhbnRpdHkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICB9XG5cbiAgY29uc3QgaXRlbXNRdWFudGl0eSA9IGJhc2tldC5sZW5ndGg7XG4gIGJhc2tldEJ0blF1YW50aXR5LmlubmVyVGV4dCA9IGAke2l0ZW1zUXVhbnRpdHl9YDtcbn1cblxuZnVuY3Rpb24gc2hvd0Jhc2tldEl0ZW1zKCkge1xuICBjb25zdCBpdGVtc0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLml0ZW1zLWxpc3RcIik7XG5cbiAgY2xlYXJTaG93blN1bW1hcnkoaXRlbXNMaXN0KTtcblxuICBiYXNrZXQuZm9yRWFjaCgoYmFza2V0SXRlbSkgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIGl0ZW1MaXN0SXRlbVRlbXBsYXRlLFxuICAgICAgbmFtZSxcbiAgICAgIHByaWNlc0FkdWx0cyxcbiAgICAgIHByaWNlc0NoaWxkcmVuLFxuICAgICAgaXRlbVRvdGFsUHJpY2UsXG4gICAgfSA9IHVzZUl0ZW1MaXN0SXRlbVRlbXBsYXRlKCk7XG5cbiAgICBpdGVtTGlzdEl0ZW1UZW1wbGF0ZS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBiYXNrZXRJdGVtLmlkKTtcbiAgICBuYW1lLmlubmVyVGV4dCA9IGJhc2tldEl0ZW0ubmFtZTtcbiAgICBzaG93SXRlbVByaWNlcyhiYXNrZXRJdGVtLCBwcmljZXNBZHVsdHMsIHByaWNlc0NoaWxkcmVuKTtcbiAgICBzaG93SXRlbVRvdGFsUHJpY2UoYmFza2V0SXRlbSwgaXRlbVRvdGFsUHJpY2UpO1xuICAgIGl0ZW1zTGlzdC5hcHBlbmRDaGlsZChpdGVtTGlzdEl0ZW1UZW1wbGF0ZSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBvcmRlclRvdGFsUHJpY2UoKSB7XG4gIGxldCB0b3RhbFByaWNlID0gMDtcblxuICBiYXNrZXQuZm9yRWFjaCgoYmFza2V0SXRlbSkgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIGFkdWx0c1RpY2tldEFtb3VudCxcbiAgICAgIGNoaWxkcmVuVGlja2V0QW1vdW50LFxuICAgICAgYWR1bHRzUHJpY2UsXG4gICAgICBjaGlsZHJlblByaWNlLFxuICAgIH0gPSBwYXJzZUludEJhc2tldERhdGEoYmFza2V0SXRlbSk7XG5cbiAgICB0b3RhbFByaWNlICs9XG4gICAgICBhZHVsdHNUaWNrZXRBbW91bnQgKiBhZHVsdHNQcmljZSArIGNoaWxkcmVuVGlja2V0QW1vdW50ICogY2hpbGRyZW5QcmljZTtcbiAgfSk7XG5cbiAgcmV0dXJuIHsgdG90YWxQcmljZSB9O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVPcmRlck9iaihiYXNrZXQsIG5hbWUsIGVtYWlsKSB7XG4gIGNvbnN0IG9yZGVyT2JqID0ge1xuICAgIHVzZXJOYW1lOiBuYW1lLFxuICAgIHVzZXJFbWFpbDogZW1haWwsXG4gICAgYmFza2V0OiBiYXNrZXQsXG4gIH07XG4gIHJldHVybiB7IG9yZGVyT2JqIH07XG59XG5cbmZ1bmN0aW9uIHNob3dPcmRlclRvdGFsUHJpY2UoKSB7XG4gIGNvbnN0IHsgdG90YWxQcmljZSB9ID0gb3JkZXJUb3RhbFByaWNlKCk7XG5cbiAgY29uc3QgdG90YWxQcmljZVBsYWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b3RhbC1wcmljZV9fdmFsdWVcIik7XG5cbiAgdG90YWxQcmljZVBsYWNlLmlubmVyVGV4dCA9IHRvdGFsUHJpY2UgKyBcIiBQTE5cIjtcbn1cblxuZnVuY3Rpb24gY2xlYXJTaG93blN1bW1hcnkoaXRlbXNMaXN0KSB7XG4gIHdoaWxlIChpdGVtc0xpc3QuY2hpbGRyZW5bMV0pIHtcbiAgICBpdGVtc0xpc3QucmVtb3ZlQ2hpbGQoaXRlbXNMaXN0LmNoaWxkcmVuWzFdKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB1c2VJdGVtTGlzdEl0ZW1UZW1wbGF0ZSgpIHtcbiAgY29uc3QgaXRlbUxpc3RJdGVtVGVtcGxhdGUgPSBkb2N1bWVudFxuICAgIC5xdWVyeVNlbGVjdG9yKFwiLml0ZW0tbGlzdF9faXRlbS0tcHJvdG90eXBlXCIpXG4gICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgaXRlbUxpc3RJdGVtVGVtcGxhdGUuY2xhc3NMaXN0LnJlbW92ZShcIml0ZW0tbGlzdF9faXRlbS0tcHJvdG90eXBlXCIpO1xuICBjb25zdCBuYW1lID0gaXRlbUxpc3RJdGVtVGVtcGxhdGUucXVlcnlTZWxlY3RvcihcIi5pdGVtX19uYW1lXCIpO1xuICBjb25zdCBpdGVtUHJpY2VzID0gaXRlbUxpc3RJdGVtVGVtcGxhdGUucXVlcnlTZWxlY3RvcihcIi5pdGVtX19wcmljZXNcIik7XG5cbiAgY29uc3QgcHJpY2VzQWR1bHRzID0gaXRlbVByaWNlcy5xdWVyeVNlbGVjdG9yKFwiLnByaWNlc19fYWR1bHRzXCIpO1xuICBjb25zdCBwcmljZXNDaGlsZHJlbiA9IGl0ZW1QcmljZXMucXVlcnlTZWxlY3RvcihcIi5wcmljZXNfX2NoaWxkcmVuXCIpO1xuXG4gIGNvbnN0IGl0ZW1Ub3RhbFByaWNlID1cbiAgICBpdGVtTGlzdEl0ZW1UZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKFwiLml0ZW1fX3RvdGFsLXByaWNlXCIpO1xuXG4gIHJldHVybiB7XG4gICAgaXRlbUxpc3RJdGVtVGVtcGxhdGUsXG4gICAgbmFtZSxcbiAgICBwcmljZXNBZHVsdHMsXG4gICAgcHJpY2VzQ2hpbGRyZW4sXG4gICAgaXRlbVRvdGFsUHJpY2UsXG4gIH07XG59XG5cbmZ1bmN0aW9uIHNob3dJdGVtUHJpY2VzKGJhc2tldEl0ZW0sIHByaWNlc0FkdWx0cywgcHJpY2VzQ2hpbGRyZW4pIHtcbiAgY29uc3QgeyBhZHVsdHNUaWNrZXRBbW91bnQsIGNoaWxkcmVuVGlja2V0QW1vdW50IH0gPVxuICAgIHBhcnNlSW50QmFza2V0RGF0YShiYXNrZXRJdGVtKTtcbiAgY29uc3QgeyBhZHVsdHNUaWNrZXRUZXh0LCBjaGlsZHJlblRpY2tldFRleHQgfSA9XG4gICAgaXRlbVByaWNlc1R4dFRlbXBsYXRlKGJhc2tldEl0ZW0pO1xuXG4gIGlmIChhZHVsdHNUaWNrZXRBbW91bnQgJiYgY2hpbGRyZW5UaWNrZXRBbW91bnQpIHtcbiAgICBwcmljZXNBZHVsdHMuaW5uZXJUZXh0ID0gYWR1bHRzVGlja2V0VGV4dDtcbiAgICBwcmljZXNDaGlsZHJlbi5pbm5lclRleHQgPSBjaGlsZHJlblRpY2tldFRleHQ7XG4gIH0gZWxzZSBpZiAoYWR1bHRzVGlja2V0QW1vdW50KSB7XG4gICAgcHJpY2VzQWR1bHRzLmlubmVyVGV4dCA9IGFkdWx0c1RpY2tldFRleHQ7XG4gICAgcHJpY2VzQ2hpbGRyZW4uaW5uZXJUZXh0ID0gXCJcIjtcbiAgfSBlbHNlIGlmIChjaGlsZHJlblRpY2tldEFtb3VudCkge1xuICAgIHByaWNlc0NoaWxkcmVuLmlubmVyVGV4dCA9IGNoaWxkcmVuVGlja2V0VGV4dDtcbiAgICBwcmljZXNBZHVsdHMuaW5uZXJUZXh0ID0gXCJcIjtcbiAgfVxufVxuXG5mdW5jdGlvbiBwYXJzZUludEJhc2tldERhdGEoYmFza2V0SXRlbSkge1xuICBsZXQgeyBhZHVsdHNUaWNrZXRBbW91bnQsIGNoaWxkcmVuVGlja2V0QW1vdW50LCBhZHVsdHNQcmljZSwgY2hpbGRyZW5QcmljZSB9ID1cbiAgICBiYXNrZXRJdGVtO1xuXG4gIGFkdWx0c1RpY2tldEFtb3VudCA9IHBhcnNlSW50KGFkdWx0c1RpY2tldEFtb3VudCk7XG4gIGNoaWxkcmVuVGlja2V0QW1vdW50ID0gcGFyc2VJbnQoY2hpbGRyZW5UaWNrZXRBbW91bnQpO1xuICBhZHVsdHNQcmljZSA9IHBhcnNlSW50KGFkdWx0c1ByaWNlKTtcbiAgY2hpbGRyZW5QcmljZSA9IHBhcnNlSW50KGNoaWxkcmVuUHJpY2UpO1xuXG4gIHJldHVybiB7XG4gICAgYWR1bHRzVGlja2V0QW1vdW50LFxuICAgIGNoaWxkcmVuVGlja2V0QW1vdW50LFxuICAgIGFkdWx0c1ByaWNlLFxuICAgIGNoaWxkcmVuUHJpY2UsXG4gIH07XG59XG5cbmZ1bmN0aW9uIGl0ZW1QcmljZXNUeHRUZW1wbGF0ZShiYXNrZXRJdGVtKSB7XG4gIGNvbnN0IHtcbiAgICBhZHVsdHNUaWNrZXRBbW91bnQsXG4gICAgY2hpbGRyZW5UaWNrZXRBbW91bnQsXG4gICAgYWR1bHRzUHJpY2UsXG4gICAgY2hpbGRyZW5QcmljZSxcbiAgfSA9IGJhc2tldEl0ZW07XG5cbiAgY29uc3QgYWR1bHRzVGlja2V0VGV4dCA9IGBhZHVsdHM6XG4gICAke2FkdWx0c1RpY2tldEFtb3VudH0geCAke2FkdWx0c1ByaWNlfSBQTE5gO1xuICBjb25zdCBjaGlsZHJlblRpY2tldFRleHQgPSBgY2hpbGRyZW46XG4gICAke2NoaWxkcmVuVGlja2V0QW1vdW50fSB4ICR7Y2hpbGRyZW5QcmljZX0gUExOYDtcblxuICByZXR1cm4geyBhZHVsdHNUaWNrZXRUZXh0LCBjaGlsZHJlblRpY2tldFRleHQgfTtcbn1cblxuZnVuY3Rpb24gc2hvd0l0ZW1Ub3RhbFByaWNlKGJhc2tldEl0ZW0sIGl0ZW1Ub3RhbFByaWNlKSB7XG4gIGNvbnN0IHtcbiAgICBhZHVsdHNUaWNrZXRBbW91bnQsXG4gICAgY2hpbGRyZW5UaWNrZXRBbW91bnQsXG4gICAgYWR1bHRzUHJpY2UsXG4gICAgY2hpbGRyZW5QcmljZSxcbiAgfSA9IHBhcnNlSW50QmFza2V0RGF0YShiYXNrZXRJdGVtKTtcbiAgaXRlbVRvdGFsUHJpY2UuaW5uZXJUZXh0ID1cbiAgICBhZHVsdHNUaWNrZXRBbW91bnQgKiBhZHVsdHNQcmljZSArXG4gICAgY2hpbGRyZW5UaWNrZXRBbW91bnQgKiBjaGlsZHJlblByaWNlICtcbiAgICBcIiBQTE5cIjtcbn1cblxuZnVuY3Rpb24gYmFza2V0SXRlbVJlbW92YWwoKSB7XG4gIGNvbnN0IGl0ZW1zTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaXRlbXMtbGlzdFwiKTtcbiAgY29uc3QgZGVsZXRlQnRuID0gaXRlbXNMaXN0LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaXRlbV9fYnRuLXJlbW92ZVwiKTtcblxuICBkZWxldGVCdG4uZm9yRWFjaCgoZWxlKSA9PiB7XG4gICAgZWxlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHJlbW92ZUJhc2tldEl0ZW0oZXZ0KTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHBsYWNlT3JkZXIoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCB7IG9yZGVyVmFsaWRhdGlvbiwgY3JlYXRlUGxhY2VPcmRlclZhcmlhYmxlcyB9ID0gdmFsaWRhdGlvbjtcbiAgY29uc3Qgb3JkZXJWYWxpZGF0aW9uUmVzdWx0ID0gb3JkZXJWYWxpZGF0aW9uKCk7XG4gIGlmIChvcmRlclZhbGlkYXRpb25SZXN1bHQgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgeyBuYW1lLCBlbWFpbCB9ID0gY3JlYXRlUGxhY2VPcmRlclZhcmlhYmxlcygpO1xuICBjb25zdCB7IHRvdGFsUHJpY2UgfSA9IG9yZGVyVG90YWxQcmljZSgpO1xuICBjb25zdCB7IG9yZGVyT2JqIH0gPSBjcmVhdGVPcmRlck9iaihiYXNrZXQsIG5hbWUsIGVtYWlsKTtcblxuICAvLyAgcGxhY2UgZm9yIHNhdmluZyBkYXRhXG4gIC8vICBhd2FpdCBmaXJlYmFzZUZldGNoLnB1c2hEYXRhKG9yZGVyT2JqKTtcblxuICBhbGVydChcbiAgICBgVGhhbmsgeW91IGZvciBwbGFjaW5nIGFuIG9yZGVyIHdvcnRoICR7dG90YWxQcmljZX0gUExOLiBUaGUgb3JkZXIgZGV0YWlscyBoYXZlIGJlZW4gc2VudCB0byB0aGUgZm9sbG93aW5nIGVtYWlsIGFkZHJlc3M6ICR7ZW1haWx9LlxuICAgIFxuICAgIFRoaXMgaXMgYSBkZW1vLiBObyBwZXJzb25hbCBkYXRhIHdhcyBjb2xsZWN0ZWQuXG4gICAgYFxuICApO1xuICBsb2NhdGlvbi5yZWxvYWQoKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlQmFza2V0SXRlbShldnQpIHtcbiAgY29uc3Qgc3VtbWFyeUl0ZW0gPSBldnQudGFyZ2V0LnBhcmVudEVsZW1lbnQ7XG4gIGNvbnN0IGl0ZW1zTGlzdCA9IHN1bW1hcnlJdGVtLnBhcmVudEVsZW1lbnQ7XG5cbiAgY29uc3QgYmFza2V0SXRlbUluZGV4ID0gYmFza2V0LmZpbmRJbmRleCgoYmFza2V0SXRlbSkgPT4ge1xuICAgIHJldHVybiBzdW1tYXJ5SXRlbS5pZCA9PT0gYmFza2V0SXRlbS5pZDtcbiAgfSk7XG5cbiAgYmFza2V0LnNwbGljZShiYXNrZXRJdGVtSW5kZXgsIDEpO1xuICBpdGVtc0xpc3QucmVtb3ZlQ2hpbGQoc3VtbWFyeUl0ZW0pO1xuICBzaG93SXRlbXNRdWFudGl0eSgpO1xuICBzaG93T3JkZXJUb3RhbFByaWNlKCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIG1hdGNoRXhjdXJzaW9uc0lEKGV2dCkge1xuICBjb25zdCBleGN1cnNpb25zTGlzdCA9IGF3YWl0IGZpcmViYXNlRmV0Y2guZmV0Y2hEYXRhKCk7XG5cbiAgY29uc3QgZXhjdXJzaW9uSWQgPSBldnQudGFyZ2V0LnBhcmVudEVsZW1lbnQuaWQ7XG4gIGNvbnN0IHNlbGVjdGVkRXhjdXJzaW9uID0gZXhjdXJzaW9uc0xpc3QuZmluZCgoZXhjdXJzaW9uKSA9PiB7XG4gICAgcmV0dXJuIGV4Y3Vyc2lvbi5pZCA9PT0gZXhjdXJzaW9uSWQ7XG4gIH0pO1xuICByZXR1cm4geyBzZWxlY3RlZEV4Y3Vyc2lvbiB9O1xufVxuXG5mdW5jdGlvbiBnZXRUaWNrZXRBbW91bnQoZXZ0KSB7XG4gIGxldCBhZHVsdHNUaWNrZXRBbW91bnQgPSBldnQudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXG4gICAgYGlucHV0W25hbWUgPSBcImFkdWx0c1wiXWBcbiAgKS52YWx1ZTtcbiAgbGV0IGNoaWxkcmVuVGlja2V0QW1vdW50ID0gZXZ0LnRhcmdldC5xdWVyeVNlbGVjdG9yKFxuICAgIGBpbnB1dFtuYW1lID0gXCJjaGlsZHJlblwiXWBcbiAgKS52YWx1ZTtcblxuICBpZiAoIWFkdWx0c1RpY2tldEFtb3VudCkge1xuICAgIHJldHVybiB7IGNoaWxkcmVuVGlja2V0QW1vdW50IH07XG4gIH1cbiAgaWYgKCFjaGlsZHJlblRpY2tldEFtb3VudCkge1xuICAgIHJldHVybiB7IGFkdWx0c1RpY2tldEFtb3VudCB9O1xuICB9XG5cbiAgcmV0dXJuIHsgYWR1bHRzVGlja2V0QW1vdW50LCBjaGlsZHJlblRpY2tldEFtb3VudCB9O1xufVxuXG5mdW5jdGlvbiBpc0V4Y3Vyc2lvbkluQmFza2V0KHNlbGVjdGVkRXhjdXJzaW9uKSB7XG4gIHJldHVybiBiYXNrZXQuc29tZSgoZXhjdXJzaW9uKSA9PiB7XG4gICAgcmV0dXJuIGV4Y3Vyc2lvbi5pZCA9PT0gc2VsZWN0ZWRFeGN1cnNpb24uaWQ7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVCYXNrZXQoXG4gIHNlbGVjdGVkRXhjdXJzaW9uLFxuICBhZHVsdHNUaWNrZXRBbW91bnQgPSBcIjBcIixcbiAgY2hpbGRyZW5UaWNrZXRBbW91bnQgPSBcIjBcIlxuKSB7XG4gIGJhc2tldC5mb3JFYWNoKChiYXNrZXRJdGVtKSA9PiB7XG4gICAgaWYgKGJhc2tldEl0ZW0uaWQgPT09IHNlbGVjdGVkRXhjdXJzaW9uLmlkKSB7XG4gICAgICBhZGRBZHVsdHNUaWNrZXRzKGJhc2tldEl0ZW0sIGFkdWx0c1RpY2tldEFtb3VudCk7XG4gICAgICBhZGRDaGlsZHJlblRpY2tldHMoYmFza2V0SXRlbSwgY2hpbGRyZW5UaWNrZXRBbW91bnQpO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGFkZE5ld0l0ZW1Ub0Jhc2tldChcbiAgc2VsZWN0ZWRFeGN1cnNpb24sXG4gIGFkdWx0c1RpY2tldEFtb3VudCA9IFwiMFwiLFxuICBjaGlsZHJlblRpY2tldEFtb3VudCA9IFwiMFwiXG4pIHtcbiAgY29uc3QgbmV3SXRlbSA9IHtcbiAgICBpZDogc2VsZWN0ZWRFeGN1cnNpb24uaWQsXG4gICAgbmFtZTogc2VsZWN0ZWRFeGN1cnNpb24ubmFtZSxcbiAgICBhZHVsdHNQcmljZTogc2VsZWN0ZWRFeGN1cnNpb24uYWR1bHRzUHJpY2UsXG4gICAgYWR1bHRzVGlja2V0QW1vdW50OiBhZHVsdHNUaWNrZXRBbW91bnQsXG4gICAgY2hpbGRyZW5QcmljZTogc2VsZWN0ZWRFeGN1cnNpb24uY2hpbGRyZW5QcmljZSxcbiAgICBjaGlsZHJlblRpY2tldEFtb3VudDogY2hpbGRyZW5UaWNrZXRBbW91bnQsXG4gIH07XG4gIGJhc2tldC5wdXNoKG5ld0l0ZW0pO1xufVxuXG5mdW5jdGlvbiBhZGRBZHVsdHNUaWNrZXRzKGJhc2tldEl0ZW0sIGFkdWx0c1RpY2tldEFtb3VudCkge1xuICBiYXNrZXRJdGVtLmFkdWx0c1RpY2tldEFtb3VudCA9IChcbiAgICBwYXJzZUludChiYXNrZXRJdGVtLmFkdWx0c1RpY2tldEFtb3VudCkgKyBwYXJzZUludChhZHVsdHNUaWNrZXRBbW91bnQpXG4gICkudG9TdHJpbmcoKTtcbn1cblxuZnVuY3Rpb24gYWRkQ2hpbGRyZW5UaWNrZXRzKGJhc2tldEl0ZW0sIGNoaWxkcmVuVGlja2V0QW1vdW50KSB7XG4gIGJhc2tldEl0ZW0uY2hpbGRyZW5UaWNrZXRBbW91bnQgPSAoXG4gICAgcGFyc2VJbnQoYmFza2V0SXRlbS5jaGlsZHJlblRpY2tldEFtb3VudCkgKyBwYXJzZUludChjaGlsZHJlblRpY2tldEFtb3VudClcbiAgKS50b1N0cmluZygpO1xufVxuXG5mdW5jdGlvbiBoaWRlU3VibWl0VGlja2V0c0Vycm9yKCkge1xuICBjb25zdCBwYW5lbEV4Y3Vyc2lvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBhbmVsX19leGN1cnNpb25zXCIpO1xuICBjb25zdCBleGN1cnNpb25FcnJvckxpc3QgPSBBcnJheS5mcm9tKFxuICAgIHBhbmVsRXhjdXJzaW9ucy5xdWVyeVNlbGVjdG9yQWxsKFwiLmV4Y3Vyc2lvbnNfX2ZpZWxkLWVycm9yXCIpXG4gICk7XG5cbiAgZXhjdXJzaW9uRXJyb3JMaXN0LmZvckVhY2goKGVycm9yKSA9PiB7XG4gICAgZXJyb3IuaW5uZXJUZXh0ID0gXCJcIjtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGNsZWFyVGlja2V0c0lucHV0KCkge1xuICBjb25zdCBwYW5lbEV4Y3Vyc2lvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBhbmVsX19leGN1cnNpb25zXCIpO1xuICBjb25zdCB0aWNrZXRJbnB1dExpc3QgPSBwYW5lbEV4Y3Vyc2lvbnMucXVlcnlTZWxlY3RvckFsbChcbiAgICBcImlucHV0Om5vdChbdHlwZSA9ICdzdWJtaXQnXSlcIlxuICApO1xuXG4gIHRpY2tldElucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgIGlucHV0LnZhbHVlID0gXCJcIjtcbiAgfSk7XG59XG4iLCJjbGFzcyBWYWxpZGF0aW9uIHtcbiAgY29uc3RydWN0b3IoYmFza2V0KSB7XG4gICAgdGhpcy5iYXNrZXQgPSBiYXNrZXQ7XG4gIH1cblxuICBiYXNrZXRWYWxpZGF0aW9uID0gKGV2dCkgPT4ge1xuICAgIGNvbnN0IGFkdWx0c1RpY2tldEFtb3VudCA9IGV2dC50YXJnZXQucXVlcnlTZWxlY3RvcihcbiAgICAgIGBpbnB1dFtuYW1lID0gXCJhZHVsdHNcIl1gXG4gICAgKS52YWx1ZTtcbiAgICBjb25zdCBjaGlsZHJlblRpY2tldEFtb3VudCA9IGV2dC50YXJnZXQucXVlcnlTZWxlY3RvcihcbiAgICAgIGBpbnB1dFtuYW1lID0gXCJjaGlsZHJlblwiXWBcbiAgICApLnZhbHVlO1xuXG4gICAgY29uc3QgaXNUaWNrZXRJbnB1dFZhbGlkID0gdGhpcy52YWxpZGF0ZVN1Ym1pdFRpY2tldHMoXG4gICAgICBldnQsXG4gICAgICBhZHVsdHNUaWNrZXRBbW91bnQsXG4gICAgICBjaGlsZHJlblRpY2tldEFtb3VudFxuICAgICk7XG5cbiAgICBjb25zdCBpc0Jhc2tldEZ1bGwgPSB0aGlzLnZhbGlkYXRlQmFza2V0U2l6ZShcbiAgICAgIGV2dCxcbiAgICAgIGFkdWx0c1RpY2tldEFtb3VudCxcbiAgICAgIGNoaWxkcmVuVGlja2V0QW1vdW50XG4gICAgKTtcblxuICAgIGlmICghaXNUaWNrZXRJbnB1dFZhbGlkIHx8IGlzQmFza2V0RnVsbCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIHZhbGlkYXRlU3VibWl0VGlja2V0cyhldnQsIGFkdWx0c1RpY2tldEFtb3VudCwgY2hpbGRyZW5UaWNrZXRBbW91bnQpIHtcbiAgICBsZXQgaXNWYWxpZCA9IHRydWU7XG4gICAgY29uc3QgcmVnZXhWYWxpZGF0b3IgPSAvXihbMS05XXxbMS05XVswLTldfDEwMCkkLztcbiAgICBjb25zdCBhZHVsdHNJbnB1dEVycm9yID0gZXZ0LnRhcmdldC5xdWVyeVNlbGVjdG9yKGBkaXZbbmFtZSA9IFwiYWR1bHRzXCJdYCk7XG4gICAgY29uc3QgY2hpbGRyZW5JbnB1dEVycm9yID0gZXZ0LnRhcmdldC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYGRpdltuYW1lID0gXCJjaGlsZHJlblwiXWBcbiAgICApO1xuXG4gICAgaWYgKGFkdWx0c1RpY2tldEFtb3VudCA9PT0gXCJcIiAmJiBjaGlsZHJlblRpY2tldEFtb3VudCA9PT0gXCJcIikge1xuICAgICAgYWR1bHRzSW5wdXRFcnJvci5pbm5lclRleHQgPSBcIkZpbGwgdXAgdGhlIGJsYW5rIHNwYWNlIVwiO1xuICAgICAgaXNWYWxpZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChhZHVsdHNUaWNrZXRBbW91bnQgJiYgIXJlZ2V4VmFsaWRhdG9yLnRlc3QoYWR1bHRzVGlja2V0QW1vdW50KSkge1xuICAgICAgYWR1bHRzSW5wdXRFcnJvci5pbm5lclRleHQgPSBcIkludmFsaWQgZGF0YSFcIjtcbiAgICAgIGlzVmFsaWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoY2hpbGRyZW5UaWNrZXRBbW91bnQgJiYgIXJlZ2V4VmFsaWRhdG9yLnRlc3QoY2hpbGRyZW5UaWNrZXRBbW91bnQpKSB7XG4gICAgICBjaGlsZHJlbklucHV0RXJyb3IuaW5uZXJUZXh0ID0gXCJJbnZhbGlkIGRhdGEhXCI7XG4gICAgICBpc1ZhbGlkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKGlzVmFsaWQpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgdmFsaWRhdGVCYXNrZXRTaXplKGV2dCwgYWR1bHRzVGlja2V0QW1vdW50LCBjaGlsZHJlblRpY2tldEFtb3VudCkge1xuICAgIGxldCBpc0Jhc2tldEZ1bGwgPSBmYWxzZTtcbiAgICBjb25zdCBzdWJtaXRUcmlwSUQgPSBldnQudGFyZ2V0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiaWRcIik7XG5cbiAgICB0aGlzLmJhc2tldC5mb3JFYWNoKChiYXNrZXRJdGVtKSA9PiB7XG4gICAgICBpZiAoYmFza2V0SXRlbS5pZCA9PT0gc3VibWl0VHJpcElEKSB7XG4gICAgICAgIGNvbnN0IG1heFRpY2tldHMgPSAxMDA7XG4gICAgICAgIGxldCBzdW0gPSAwO1xuICAgICAgICBjb25zdCB0b1N1bUxpc3QgPSBbXTtcblxuICAgICAgICBpZiAoYmFza2V0SXRlbS5hZHVsdHNUaWNrZXRBbW91bnQpIHtcbiAgICAgICAgICB0b1N1bUxpc3QucHVzaChwYXJzZUludChiYXNrZXRJdGVtLmFkdWx0c1RpY2tldEFtb3VudCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChiYXNrZXRJdGVtLmNoaWxkcmVuVGlja2V0QW1vdW50KSB7XG4gICAgICAgICAgdG9TdW1MaXN0LnB1c2gocGFyc2VJbnQoYmFza2V0SXRlbS5jaGlsZHJlblRpY2tldEFtb3VudCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhZHVsdHNUaWNrZXRBbW91bnQpIHtcbiAgICAgICAgICB0b1N1bUxpc3QucHVzaChwYXJzZUludChhZHVsdHNUaWNrZXRBbW91bnQpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hpbGRyZW5UaWNrZXRBbW91bnQpIHtcbiAgICAgICAgICB0b1N1bUxpc3QucHVzaChwYXJzZUludChjaGlsZHJlblRpY2tldEFtb3VudCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b1N1bUxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBzdW0gKz0gdG9TdW1MaXN0W2ldO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHN1bSA+IG1heFRpY2tldHMpIHtcbiAgICAgICAgICBpc0Jhc2tldEZ1bGwgPSB0cnVlO1xuICAgICAgICAgIGFsZXJ0KFwiVGhlIEJhc2tldCBpcyBmdWxsIVwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBpc0Jhc2tldEZ1bGw7XG4gIH1cblxuICBvcmRlclZhbGlkYXRpb24gPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMuYmFza2V0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgYWxlcnQoYFRoZXJlJ3JlIG5vIGl0ZW1zIGluIHRoZSBiYXNrZXQhYCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgbGV0IGlzT3JkZXJWYWxpZCA9IHRydWU7XG5cbiAgICBjb25zdCB7IG5hbWUsIGVtYWlsLCBvcmRlckVycm9yTmFtZSwgb3JkZXJFcnJvckVtYWlsIH0gPVxuICAgICAgdGhpcy5jcmVhdGVQbGFjZU9yZGVyVmFyaWFibGVzKCk7XG5cbiAgICBpZiAoIXRoaXMuaXNDbGllbnROYW1lVmFsaWQobmFtZSkpIHtcbiAgICAgIG9yZGVyRXJyb3JOYW1lLmlubmVyVGV4dCA9IFwiSW5jb3JyZWN0IG5hbWUuXCI7XG4gICAgICBpc09yZGVyVmFsaWQgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3JkZXJFcnJvck5hbWUuaW5uZXJUZXh0ID0gXCJcIjtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuaXNDbGllbnRFbWFpbFZhbGlkKGVtYWlsKSkge1xuICAgICAgb3JkZXJFcnJvckVtYWlsLmlubmVyVGV4dCA9IFwiSW5jb3JyZWN0IGVtYWlsLlwiO1xuICAgICAgaXNPcmRlclZhbGlkID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9yZGVyRXJyb3JFbWFpbC5pbm5lclRleHQgPSBcIlwiO1xuICAgIH1cblxuICAgIGlmIChpc09yZGVyVmFsaWQpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIGNyZWF0ZVBsYWNlT3JkZXJWYXJpYWJsZXMgPSAoKSA9PiB7XG4gICAgY29uc3QgYmFza2V0T3JkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJhc2tldF9fb3JkZXJcIik7XG4gICAgY29uc3QgbmFtZUlucHV0ID0gYmFza2V0T3JkZXIucXVlcnlTZWxlY3RvcihgaW5wdXRbbmFtZSA9IFwibmFtZVwiXWApO1xuICAgIGNvbnN0IG5hbWUgPSBuYW1lSW5wdXQudmFsdWU7XG4gICAgY29uc3QgZW1haWxJbnB1dCA9IGJhc2tldE9yZGVyLnF1ZXJ5U2VsZWN0b3IoYGlucHV0W25hbWUgPSBcImVtYWlsXCJdYCk7XG4gICAgY29uc3QgZW1haWwgPSBlbWFpbElucHV0LnZhbHVlO1xuICAgIGNvbnN0IG9yZGVyRXJyb3JOYW1lID0gYmFza2V0T3JkZXIucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLm9yZGVyX19maWVsZC1lcnJvci0tbmFtZVwiXG4gICAgKTtcbiAgICBjb25zdCBvcmRlckVycm9yRW1haWwgPSBiYXNrZXRPcmRlci5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIub3JkZXJfX2ZpZWxkLWVycm9yLS1lbWFpbFwiXG4gICAgKTtcblxuICAgIHJldHVybiB7XG4gICAgICBiYXNrZXRPcmRlcixcbiAgICAgIG5hbWVJbnB1dCxcbiAgICAgIG5hbWUsXG4gICAgICBlbWFpbElucHV0LFxuICAgICAgZW1haWwsXG4gICAgICBvcmRlckVycm9yTmFtZSxcbiAgICAgIG9yZGVyRXJyb3JFbWFpbCxcbiAgICB9O1xuICB9O1xuXG4gIGlzQ2xpZW50TmFtZVZhbGlkKG5hbWUpIHtcbiAgICBjb25zdCByZWdleCA9IC9eW2EtekEtWsSFxIfEmcWCxYTDs8WbxbrFvMSExIbEmMWBxYPDk8WaxbnFu1xcc10rJC87XG5cbiAgICBpZiAocmVnZXgudGVzdChuYW1lKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBpc0NsaWVudEVtYWlsVmFsaWQoZW1haWwpIHtcbiAgICBpZiAoL15cXFMrQFxcUyskL2cudGVzdChlbWFpbCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFZhbGlkYXRpb247XG4iLCJjbGFzcyBOYXZiYXJDU1Mge1xuICBtYW5hZ2VOYXZiYXIoKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY2hhbmdlTmF2YmFyVmlld3MoKTtcbiAgICAgIHRoaXMuY2hhbmdlTmF2YmFyQmFja2dyb3VuZENvbG9yKCk7XG4gICAgICB0aGlzLm9uT2ZmQmFza2V0KCk7XG4gICAgICB0aGlzLnNob3dIaWRlTmF2YmFyKCk7XG4gICAgfSk7XG4gIH1cblxuICBjaGFuZ2VOYXZiYXJWaWV3cygpIHtcbiAgICB0aGlzLm5hdmJhck1vYmlsZVZpZXcoKTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsICgpID0+IHRoaXMubmF2YmFyTW9iaWxlVmlldygpKTtcbiAgfVxuXG4gIGNoYW5nZU5hdmJhckJhY2tncm91bmRDb2xvcigpIHtcbiAgICBjb25zdCBuYXZiYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdmJhclwiKTtcbiAgICBjb25zdCBiYXNrZXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJhc2tldC1idG5cIik7XG4gICAgY29uc3QgbmF2YmFyVG9nZ2xlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uYXZiYXJfX3RvZ2dsZVwiKTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsICgpID0+IHtcbiAgICAgIGlmICh3aW5kb3cuc2Nyb2xsWSA+IDApIHtcbiAgICAgICAgbmF2YmFyLmNsYXNzTGlzdC5hZGQoXCJuYXZiYXItLWJhY2tncm91bmQtc2Nyb2xsXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmF2YmFyLmNsYXNzTGlzdC5yZW1vdmUoXCJuYXZiYXItLWJhY2tncm91bmQtc2Nyb2xsXCIpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgYmFza2V0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBuYXZiYXIuY2xhc3NMaXN0LnRvZ2dsZShcIm5hdmJhci0tYmFja2dyb3VuZC1iYXNrZXQtYnRuXCIpO1xuICAgIH0pO1xuXG4gICAgbmF2YmFyVG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBuYXZiYXIuY2xhc3NMaXN0LnRvZ2dsZShcIm5hdmJhci0tYmFja2dyb3VuZC1uYXZiYXItYnRuXCIpO1xuICAgIH0pO1xuICB9XG5cbiAgb25PZmZCYXNrZXQoKSB7XG4gICAgY29uc3QgYmFza2V0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5iYXNrZXQtYnRuXCIpO1xuXG4gICAgYmFza2V0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBjb25zdCBiYXNrZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJhc2tldFwiKTtcbiAgICAgIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYm9keVwiKTtcblxuICAgICAgaWYgKGJhc2tldEJ0bi5jaGVja2VkKSB7XG4gICAgICAgIGJhc2tldC5jbGFzc0xpc3QuYWRkKFwiYmFza2V0LS1vcGVuXCIpO1xuICAgICAgICBib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJhc2tldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmFza2V0LS1vcGVuXCIpO1xuICAgICAgICBib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJpbml0aWFsXCI7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBzaG93SGlkZU5hdmJhcigpIHtcbiAgICBjb25zdCBuYXZiYXJUb2dnbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdmJhcl9fdG9nZ2xlXCIpO1xuICAgIGNvbnN0IG5hdmJhckNvbnRhaW5lck1vYmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5uYXZiYXJfX2NvbnRhaW5lci0tbW9iaWxlXCJcbiAgICApO1xuICAgIGNvbnN0IG5hdmJhckJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmF2YmFyX19idG5cIik7XG5cbiAgICBuYXZiYXJUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIG5hdmJhckNvbnRhaW5lck1vYmlsZS5jbGFzc0xpc3QudG9nZ2xlKFwibmF2YmFyX19jb250YWluZXItLW9wZW5cIik7XG4gICAgICBuYXZiYXJCdG4uY2xhc3NMaXN0LnRvZ2dsZShcIm5hdmJhcl9fYnRuLS1jaGVja2VkXCIpO1xuICAgIH0pO1xuICB9XG5cbiAgbmF2YmFyTW9iaWxlVmlldygpIHtcbiAgICBjb25zdCBuYXZiYXJDb250YWluZXIgPSBcIm5hdmJhcl9fY29udGFpbmVyXCI7XG4gICAgY29uc3QgbmF2YmFySXRlbSA9IFwibmF2YmFyX19pdGVtXCI7XG5cbiAgICBpZiAod2luZG93LmlubmVyV2lkdGggPCAxMjAwKSB7XG4gICAgICB0aGlzLmNoYW5nZUNsYXNzT2ZFbGVtZW50TGlzdChgJHtuYXZiYXJJdGVtfWAsIGAke25hdmJhckl0ZW19LS1tb2JpbGVgKTtcbiAgICAgIHRoaXMuY2hhbmdlQ2xhc3NPZkVsZW1lbnRMaXN0KFxuICAgICAgICBgJHtuYXZiYXJDb250YWluZXJ9YCxcbiAgICAgICAgYCR7bmF2YmFyQ29udGFpbmVyfS0tbW9iaWxlYFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jaGFuZ2VDbGFzc09mRWxlbWVudExpc3QoYCR7bmF2YmFySXRlbX0tLW1vYmlsZWAsIGAke25hdmJhckl0ZW19YCk7XG4gICAgICB0aGlzLmNoYW5nZUNsYXNzT2ZFbGVtZW50TGlzdChcbiAgICAgICAgYCR7bmF2YmFyQ29udGFpbmVyfS0tbW9iaWxlYCxcbiAgICAgICAgYCR7bmF2YmFyQ29udGFpbmVyfWBcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgY2hhbmdlQ2xhc3NPZkVsZW1lbnRMaXN0KGVsZW1lbnRDbGFzcywgbmV3Q2xhc3MpIHtcbiAgICBjb25zdCBlbGVtZW50TGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYC4ke2VsZW1lbnRDbGFzc31gKTtcblxuICAgIGVsZW1lbnRMaXN0LmZvckVhY2goKGVsZSkgPT4ge1xuICAgICAgZWxlLmNsYXNzTGlzdC5yZW1vdmUoYCR7ZWxlbWVudENsYXNzfWApO1xuICAgICAgZWxlLmNsYXNzTGlzdC5hZGQoYCR7bmV3Q2xhc3N9YCk7XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTmF2YmFyQ1NTOyJdLCJuYW1lcyI6WyJfX19DU1NfTE9BREVSX0VYUE9SVF9fXyIsInB1c2giLCJtb2R1bGUiLCJpZCIsIl9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8wX19fIiwiVVJMIiwiX19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMF9fXyIsIl9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8xX19fIiwiX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzJfX18iLCJfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfM19fXyIsIl9fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzFfX18iLCJfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF8yX19fIiwiX19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfM19fXyIsImV4cG9ydHMiLCJjc3NXaXRoTWFwcGluZ1RvU3RyaW5nIiwibGlzdCIsInRvU3RyaW5nIiwidGhpcyIsIm1hcCIsIml0ZW0iLCJjb250ZW50IiwibmVlZExheWVyIiwiY29uY2F0IiwibGVuZ3RoIiwiam9pbiIsImkiLCJtb2R1bGVzIiwibWVkaWEiLCJkZWR1cGUiLCJzdXBwb3J0cyIsImxheWVyIiwidW5kZWZpbmVkIiwiYWxyZWFkeUltcG9ydGVkTW9kdWxlcyIsImsiLCJfayIsInVybCIsIm9wdGlvbnMiLCJTdHJpbmciLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsInRlc3QiLCJzbGljZSIsImhhc2giLCJuZWVkUXVvdGVzIiwicmVwbGFjZSIsImNzc01hcHBpbmciLCJidG9hIiwiYmFzZTY0IiwidW5lc2NhcGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJKU09OIiwic3RyaW5naWZ5IiwiZGF0YSIsInNvdXJjZU1hcHBpbmciLCJzdHlsZXNJbkRPTSIsImdldEluZGV4QnlJZGVudGlmaWVyIiwiaWRlbnRpZmllciIsInJlc3VsdCIsIm1vZHVsZXNUb0RvbSIsImlkQ291bnRNYXAiLCJpZGVudGlmaWVycyIsImJhc2UiLCJjb3VudCIsImluZGV4QnlJZGVudGlmaWVyIiwib2JqIiwiY3NzIiwic291cmNlTWFwIiwicmVmZXJlbmNlcyIsInVwZGF0ZXIiLCJhZGRFbGVtZW50U3R5bGUiLCJieUluZGV4Iiwic3BsaWNlIiwiYXBpIiwiZG9tQVBJIiwidXBkYXRlIiwibmV3T2JqIiwicmVtb3ZlIiwibGFzdElkZW50aWZpZXJzIiwibmV3TGlzdCIsImluZGV4IiwibmV3TGFzdElkZW50aWZpZXJzIiwiX2kiLCJfaW5kZXgiLCJtZW1vIiwiaW5zZXJ0Iiwic3R5bGUiLCJ0YXJnZXQiLCJzdHlsZVRhcmdldCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIndpbmRvdyIsIkhUTUxJRnJhbWVFbGVtZW50IiwiY29udGVudERvY3VtZW50IiwiaGVhZCIsImUiLCJnZXRUYXJnZXQiLCJFcnJvciIsImFwcGVuZENoaWxkIiwiZWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGVzIiwiYXR0cmlidXRlcyIsInN0eWxlRWxlbWVudCIsIm5vbmNlIiwic2V0QXR0cmlidXRlIiwiaW5zZXJ0U3R5bGVFbGVtZW50Iiwic3R5bGVUYWdUcmFuc2Zvcm0iLCJhcHBseSIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsInJlbW92ZVN0eWxlRWxlbWVudCIsInN0eWxlU2hlZXQiLCJjc3NUZXh0IiwiZmlyc3RDaGlsZCIsImNyZWF0ZVRleHROb2RlIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIm0iLCJuIiwiZ2V0dGVyIiwiZCIsImEiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsImciLCJnbG9iYWxUaGlzIiwiRnVuY3Rpb24iLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwic2NyaXB0VXJsIiwiaW1wb3J0U2NyaXB0cyIsImxvY2F0aW9uIiwiY3VycmVudFNjcmlwdCIsInNyYyIsInNjcmlwdHMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInAiLCJiIiwiYmFzZVVSSSIsInNlbGYiLCJocmVmIiwibmMiLCJsb2NhbHMiLCJhc3NlcnRpb24iLCJtZXNzYWdlIiwiYXNzZXJ0aW9uRXJyb3IiLCJzdHJpbmdUb0J5dGVBcnJheSQxIiwic3RyIiwib3V0IiwiYyIsImNoYXJDb2RlQXQiLCJieXRlVG9DaGFyTWFwXyIsImNoYXJUb0J5dGVNYXBfIiwiYnl0ZVRvQ2hhck1hcFdlYlNhZmVfIiwiY2hhclRvQnl0ZU1hcFdlYlNhZmVfIiwiRU5DT0RFRF9WQUxTX0JBU0UiLCJFTkNPREVEX1ZBTFMiLCJFTkNPREVEX1ZBTFNfV0VCU0FGRSIsIkhBU19OQVRJVkVfU1VQUE9SVCIsImF0b2IiLCJlbmNvZGVCeXRlQXJyYXkiLCJpbnB1dCIsIndlYlNhZmUiLCJBcnJheSIsImlzQXJyYXkiLCJpbml0XyIsImJ5dGVUb0NoYXJNYXAiLCJvdXRwdXQiLCJieXRlMSIsImhhdmVCeXRlMiIsImJ5dGUyIiwiaGF2ZUJ5dGUzIiwiYnl0ZTMiLCJvdXRCeXRlMSIsIm91dEJ5dGUyIiwib3V0Qnl0ZTMiLCJvdXRCeXRlNCIsImVuY29kZVN0cmluZyIsImRlY29kZVN0cmluZyIsImJ5dGVzIiwicG9zIiwiYzEiLCJmcm9tQ2hhckNvZGUiLCJjMiIsInUiLCJjMyIsImJ5dGVBcnJheVRvU3RyaW5nIiwiZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkiLCJjaGFyVG9CeXRlTWFwIiwiY2hhckF0IiwiYnl0ZTQiLCJEZWNvZGVCYXNlNjRTdHJpbmdFcnJvciIsImNvbnN0cnVjdG9yIiwic3VwZXIiLCJhcmd1bWVudHMiLCJuYW1lIiwiYmFzZTY0RW5jb2RlIiwidXRmOEJ5dGVzIiwiYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmciLCJiYXNlNjREZWNvZGUiLCJjb25zb2xlIiwiZXJyb3IiLCJkZWVwQ29weSIsInZhbHVlIiwiZGVlcEV4dGVuZCIsInNvdXJjZSIsIkRhdGUiLCJnZXRUaW1lIiwiZ2V0RGVmYXVsdHMiLCJnZXRHbG9iYWwiLCJfX0ZJUkVCQVNFX0RFRkFVTFRTX18iLCJwcm9jZXNzIiwiZW52IiwiZGVmYXVsdHNKc29uU3RyaW5nIiwicGFyc2UiLCJnZXREZWZhdWx0c0Zyb21FbnZWYXJpYWJsZSIsIm1hdGNoIiwiY29va2llIiwiZGVjb2RlZCIsImdldERlZmF1bHRzRnJvbUNvb2tpZSIsImluZm8iLCJnZXREZWZhdWx0QXBwQ29uZmlnIiwiX2EiLCJjb25maWciLCJyZWplY3QiLCJyZXNvbHZlIiwicHJvbWlzZSIsIlByb21pc2UiLCJ3cmFwQ2FsbGJhY2siLCJjYWxsYmFjayIsImNhdGNoIiwiaXNNb2JpbGVDb3Jkb3ZhIiwibmF2aWdhdG9yIiwiRmlyZWJhc2VFcnJvciIsImNvZGUiLCJjdXN0b21EYXRhIiwic2V0UHJvdG90eXBlT2YiLCJjYXB0dXJlU3RhY2tUcmFjZSIsIkVycm9yRmFjdG9yeSIsImNyZWF0ZSIsInNlcnZpY2UiLCJzZXJ2aWNlTmFtZSIsImVycm9ycyIsImZ1bGxDb2RlIiwidGVtcGxhdGUiLCJQQVRURVJOIiwiXyIsInJlcGxhY2VUZW1wbGF0ZSIsImZ1bGxNZXNzYWdlIiwianNvbkV2YWwiLCJkZWNvZGUiLCJ0b2tlbiIsImhlYWRlciIsImNsYWltcyIsInNpZ25hdHVyZSIsInBhcnRzIiwic3BsaXQiLCJmbiIsImNvbnRleHRPYmoiLCJyZXMiLCJkZWVwRXF1YWwiLCJhS2V5cyIsImtleXMiLCJiS2V5cyIsImluY2x1ZGVzIiwiYVByb3AiLCJiUHJvcCIsImlzT2JqZWN0IiwidGhpbmciLCJTaGExIiwiY2hhaW5fIiwiYnVmXyIsIldfIiwicGFkXyIsImluYnVmXyIsInRvdGFsXyIsImJsb2NrU2l6ZSIsInJlc2V0IiwiY29tcHJlc3NfIiwiYnVmIiwib2Zmc2V0IiwiVyIsInQiLCJmIiwibGVuZ3RoTWludXNCbG9jayIsImluYnVmIiwiZGlnZXN0IiwidG90YWxCaXRzIiwiaiIsImZuTmFtZSIsImFyZ05hbWUiLCJzdHJpbmdMZW5ndGgiLCJfZGVsZWdhdGUiLCJpbnN0YW5jZUZhY3RvcnkiLCJ0eXBlIiwibXVsdGlwbGVJbnN0YW5jZXMiLCJzZXJ2aWNlUHJvcHMiLCJpbnN0YW50aWF0aW9uTW9kZSIsIm9uSW5zdGFuY2VDcmVhdGVkIiwic2V0SW5zdGFudGlhdGlvbk1vZGUiLCJtb2RlIiwic2V0TXVsdGlwbGVJbnN0YW5jZXMiLCJzZXRTZXJ2aWNlUHJvcHMiLCJwcm9wcyIsInNldEluc3RhbmNlQ3JlYXRlZENhbGxiYWNrIiwiREVGQVVMVF9FTlRSWV9OQU1FIiwiY29udGFpbmVyIiwiY29tcG9uZW50IiwiaW5zdGFuY2VzIiwiTWFwIiwiaW5zdGFuY2VzRGVmZXJyZWQiLCJpbnN0YW5jZXNPcHRpb25zIiwib25Jbml0Q2FsbGJhY2tzIiwibm9ybWFsaXplZElkZW50aWZpZXIiLCJub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIiLCJoYXMiLCJkZWZlcnJlZCIsInNldCIsImlzSW5pdGlhbGl6ZWQiLCJzaG91bGRBdXRvSW5pdGlhbGl6ZSIsImluc3RhbmNlIiwiZ2V0T3JJbml0aWFsaXplU2VydmljZSIsImluc3RhbmNlSWRlbnRpZmllciIsImdldEltbWVkaWF0ZSIsIm9wdGlvbmFsIiwiZ2V0Q29tcG9uZW50Iiwic2V0Q29tcG9uZW50IiwiaXNDb21wb25lbnRFYWdlciIsImluc3RhbmNlRGVmZXJyZWQiLCJlbnRyaWVzIiwiY2xlYXJJbnN0YW5jZSIsImRlbGV0ZSIsInNlcnZpY2VzIiwiZnJvbSIsInZhbHVlcyIsImFsbCIsImZpbHRlciIsIklOVEVSTkFMIiwiX2RlbGV0ZSIsImlzQ29tcG9uZW50U2V0IiwiZ2V0T3B0aW9ucyIsImluaXRpYWxpemUiLCJvcHRzIiwib25Jbml0IiwiZXhpc3RpbmdDYWxsYmFja3MiLCJTZXQiLCJhZGQiLCJleGlzdGluZ0luc3RhbmNlIiwiaW52b2tlT25Jbml0Q2FsbGJhY2tzIiwiY2FsbGJhY2tzIiwicHJvdmlkZXJzIiwiYWRkQ29tcG9uZW50IiwicHJvdmlkZXIiLCJnZXRQcm92aWRlciIsImFkZE9yT3ZlcndyaXRlQ29tcG9uZW50IiwiZ2V0UHJvdmlkZXJzIiwiTG9nTGV2ZWwiLCJsZXZlbFN0cmluZ1RvRW51bSIsIkRFQlVHIiwiVkVSQk9TRSIsIklORk8iLCJXQVJOIiwiRVJST1IiLCJTSUxFTlQiLCJkZWZhdWx0TG9nTGV2ZWwiLCJDb25zb2xlTWV0aG9kIiwiZGVmYXVsdExvZ0hhbmRsZXIiLCJsb2dUeXBlIiwiYXJncyIsImxvZ0xldmVsIiwibm93IiwidG9JU09TdHJpbmciLCJtZXRob2QiLCJMb2dnZXIiLCJfbG9nTGV2ZWwiLCJfbG9nSGFuZGxlciIsIl91c2VyTG9nSGFuZGxlciIsInZhbCIsIlR5cGVFcnJvciIsInNldExvZ0xldmVsIiwibG9nSGFuZGxlciIsInVzZXJMb2dIYW5kbGVyIiwiZGVidWciLCJsb2ciLCJ3YXJuIiwiaW5zdGFuY2VPZkFueSIsIm9iamVjdCIsImNvbnN0cnVjdG9ycyIsInNvbWUiLCJpZGJQcm94eWFibGVUeXBlcyIsImN1cnNvckFkdmFuY2VNZXRob2RzIiwiY3Vyc29yUmVxdWVzdE1hcCIsIldlYWtNYXAiLCJ0cmFuc2FjdGlvbkRvbmVNYXAiLCJ0cmFuc2FjdGlvblN0b3JlTmFtZXNNYXAiLCJ0cmFuc2Zvcm1DYWNoZSIsInJldmVyc2VUcmFuc2Zvcm1DYWNoZSIsImlkYlByb3h5VHJhcHMiLCJyZWNlaXZlciIsIklEQlRyYW5zYWN0aW9uIiwib2JqZWN0U3RvcmVOYW1lcyIsIm9iamVjdFN0b3JlIiwidHJhbnNmb3JtQ2FjaGFibGVWYWx1ZSIsImZ1bmMiLCJJREJEYXRhYmFzZSIsInRyYW5zYWN0aW9uIiwiSURCQ3Vyc29yIiwiYWR2YW5jZSIsImNvbnRpbnVlIiwiY29udGludWVQcmltYXJ5S2V5IiwidW53cmFwIiwic3RvcmVOYW1lcyIsInR4Iiwic29ydCIsImRvbmUiLCJ1bmxpc3RlbiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjb21wbGV0ZSIsIkRPTUV4Y2VwdGlvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJjYWNoZURvbmVQcm9taXNlRm9yVHJhbnNhY3Rpb24iLCJJREJPYmplY3RTdG9yZSIsIklEQkluZGV4IiwiUHJveHkiLCJJREJSZXF1ZXN0IiwicmVxdWVzdCIsInN1Y2Nlc3MiLCJ0aGVuIiwicHJvbWlzaWZ5UmVxdWVzdCIsIm5ld1ZhbHVlIiwicmVhZE1ldGhvZHMiLCJ3cml0ZU1ldGhvZHMiLCJjYWNoZWRNZXRob2RzIiwiZ2V0TWV0aG9kIiwidGFyZ2V0RnVuY05hbWUiLCJ1c2VJbmRleCIsImlzV3JpdGUiLCJhc3luYyIsInN0b3JlTmFtZSIsInN0b3JlIiwic2hpZnQiLCJvbGRUcmFwcyIsIlBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwiLCJnZXRQbGF0Zm9ybUluZm9TdHJpbmciLCJpc1ZlcnNpb25TZXJ2aWNlUHJvdmlkZXIiLCJsaWJyYXJ5IiwidmVyc2lvbiIsImxvZ1N0cmluZyIsIm5hbWUkcSIsInZlcnNpb24kMSIsImxvZ2dlciIsIm5hbWUkcCIsIm5hbWUkbyIsIm5hbWUkbiIsIm5hbWUkbSIsIm5hbWUkbCIsIm5hbWUkayIsIm5hbWUkaiIsIm5hbWUkaSIsIm5hbWUkaCIsIm5hbWUkZyIsIm5hbWUkZiIsIm5hbWUkZSIsIm5hbWUkZCIsIm5hbWUkYyIsIm5hbWUkYiIsIm5hbWUkYSIsIm5hbWUkOSIsIm5hbWUkOCIsIm5hbWUkNyIsIm5hbWUkNiIsIm5hbWUkNSIsIm5hbWUkNCIsIm5hbWUkMyIsIm5hbWUkMiIsIm5hbWUkMSIsIlBMQVRGT1JNX0xPR19TVFJJTkciLCJfYXBwcyIsIl9zZXJ2ZXJBcHBzIiwiX2NvbXBvbmVudHMiLCJfYWRkQ29tcG9uZW50IiwiYXBwIiwiX3JlZ2lzdGVyQ29tcG9uZW50IiwiY29tcG9uZW50TmFtZSIsInNlcnZlckFwcCIsIkVSUk9SX0ZBQ1RPUlkiLCJGaXJlYmFzZUFwcEltcGwiLCJfaXNEZWxldGVkIiwiX29wdGlvbnMiLCJhc3NpZ24iLCJfY29uZmlnIiwiX25hbWUiLCJfYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkIiwiYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkIiwiX2NvbnRhaW5lciIsImNoZWNrRGVzdHJveWVkIiwiaXNEZWxldGVkIiwiYXBwTmFtZSIsImluaXRpYWxpemVBcHAiLCJyYXdDb25maWciLCJleGlzdGluZ0FwcCIsIm5ld0FwcCIsInJlZ2lzdGVyVmVyc2lvbiIsImxpYnJhcnlLZXlPck5hbWUiLCJ2YXJpYW50IiwibGlicmFyeU1pc21hdGNoIiwidmVyc2lvbk1pc21hdGNoIiwid2FybmluZyIsIkRCX05BTUUiLCJEQl9WRVJTSU9OIiwiU1RPUkVfTkFNRSIsImRiUHJvbWlzZSIsImdldERiUHJvbWlzZSIsImJsb2NrZWQiLCJ1cGdyYWRlIiwiYmxvY2tpbmciLCJ0ZXJtaW5hdGVkIiwiaW5kZXhlZERCIiwib3BlbiIsIm9wZW5Qcm9taXNlIiwiZXZlbnQiLCJvbGRWZXJzaW9uIiwibmV3VmVyc2lvbiIsImRiIiwib3BlbkRCIiwiY3JlYXRlT2JqZWN0U3RvcmUiLCJvcmlnaW5hbEVycm9yTWVzc2FnZSIsIndyaXRlSGVhcnRiZWF0c1RvSW5kZXhlZERCIiwiaGVhcnRiZWF0T2JqZWN0IiwicHV0IiwiY29tcHV0ZUtleSIsImlkYkdldEVycm9yIiwiYXBwSWQiLCJIZWFydGJlYXRTZXJ2aWNlSW1wbCIsIl9oZWFydGJlYXRzQ2FjaGUiLCJfc3RvcmFnZSIsIkhlYXJ0YmVhdFN0b3JhZ2VJbXBsIiwiX2hlYXJ0YmVhdHNDYWNoZVByb21pc2UiLCJyZWFkIiwidHJpZ2dlckhlYXJ0YmVhdCIsIl9iIiwiYWdlbnQiLCJkYXRlIiwiZ2V0VVRDRGF0ZVN0cmluZyIsImhlYXJ0YmVhdHMiLCJsYXN0U2VudEhlYXJ0YmVhdERhdGUiLCJzaW5nbGVEYXRlSGVhcnRiZWF0IiwiaGJUaW1lc3RhbXAiLCJ2YWx1ZU9mIiwib3ZlcndyaXRlIiwiZ2V0SGVhcnRiZWF0c0hlYWRlciIsImhlYXJ0YmVhdHNUb1NlbmQiLCJ1bnNlbnRFbnRyaWVzIiwiaGVhcnRiZWF0c0NhY2hlIiwibWF4U2l6ZSIsImhlYXJ0YmVhdEVudHJ5IiwiZmluZCIsImhiIiwiZGF0ZXMiLCJjb3VudEJ5dGVzIiwicG9wIiwiZXh0cmFjdEhlYXJ0YmVhdHNGb3JIZWFkZXIiLCJoZWFkZXJTdHJpbmciLCJzdWJzdHJpbmciLCJfY2FuVXNlSW5kZXhlZERCUHJvbWlzZSIsInJ1bkluZGV4ZWREQkVudmlyb25tZW50Q2hlY2siLCJpc0luZGV4ZWREQkF2YWlsYWJsZSIsInByZUV4aXN0IiwiREJfQ0hFQ0tfTkFNRSIsIm9uc3VjY2VzcyIsImNsb3NlIiwiZGVsZXRlRGF0YWJhc2UiLCJvbnVwZ3JhZGVuZWVkZWQiLCJvbmVycm9yIiwiaWRiSGVhcnRiZWF0T2JqZWN0IiwicmVhZEhlYXJ0YmVhdHNGcm9tSW5kZXhlZERCIiwiaGVhcnRiZWF0c09iamVjdCIsImV4aXN0aW5nSGVhcnRiZWF0c09iamVjdCIsImFwaUtleSIsImF1dGhEb21haW4iLCJkYXRhYmFzZVVSTCIsInByb2plY3RJZCIsInN0b3JhZ2VCdWNrZXQiLCJtZXNzYWdpbmdTZW5kZXJJZCIsIkRPTVN0b3JhZ2VXcmFwcGVyIiwiZG9tU3RvcmFnZV8iLCJwcmVmaXhfIiwicmVtb3ZlSXRlbSIsInByZWZpeGVkTmFtZV8iLCJzZXRJdGVtIiwic3RvcmVkVmFsIiwiZ2V0SXRlbSIsIk1lbW9yeVN0b3JhZ2UiLCJjYWNoZV8iLCJpc0luTWVtb3J5U3RvcmFnZSIsImNyZWF0ZVN0b3JhZ2Vmb3IiLCJkb21TdG9yYWdlTmFtZSIsImRvbVN0b3JhZ2UiLCJQZXJzaXN0ZW50U3RvcmFnZSIsIlNlc3Npb25TdG9yYWdlIiwibG9nQ2xpZW50IiwiTFVJREdlbmVyYXRvciIsInNoYTEiLCJoaWdoIiwic3RyaW5nVG9CeXRlQXJyYXkiLCJzaGExQnl0ZXMiLCJidWlsZExvZ01lc3NhZ2VfIiwidmFyQXJncyIsImFyZyIsImZpcnN0TG9nXyIsImxvZ2dlcl8iLCJwZXJzaXN0ZW50IiwiYmluZCIsImxvZ1dyYXBwZXIiLCJwcmVmaXgiLCJmYXRhbCIsImlzSW52YWxpZEpTT05OdW1iZXIiLCJOdW1iZXIiLCJQT1NJVElWRV9JTkZJTklUWSIsIk5FR0FUSVZFX0lORklOSVRZIiwiTUlOX05BTUUiLCJNQVhfTkFNRSIsIm5hbWVDb21wYXJlIiwiYUFzSW50IiwidHJ5UGFyc2VJbnQiLCJiQXNJbnQiLCJzdHJpbmdDb21wYXJlIiwicmVxdWlyZUtleSIsIk9iamVjdFRvVW5pcXVlS2V5Iiwic3BsaXRTdHJpbmdCeVNpemUiLCJzZWdzaXplIiwibGVuIiwiZGF0YVNlZ3MiLCJlYWNoIiwiZG91YmxlVG9JRUVFNzU0U3RyaW5nIiwidiIsInMiLCJsbiIsIk1hdGgiLCJhYnMiLCJwb3ciLCJtaW4iLCJmbG9vciIsIkxOMiIsInJvdW5kIiwiYml0cyIsInJldmVyc2UiLCJoZXhCeXRlU3RyaW5nIiwiaGV4Qnl0ZSIsInBhcnNlSW50Iiwic3Vic3RyIiwidG9Mb3dlckNhc2UiLCJJTlRFR0VSX1JFR0VYUF8iLCJSZWdFeHAiLCJpbnRWYWwiLCJleGNlcHRpb25HdWFyZCIsInNldFRpbWVvdXQiLCJzdGFjayIsInNldFRpbWVvdXROb25CbG9ja2luZyIsInRpbWUiLCJ0aW1lb3V0IiwiRGVubyIsInVucmVmVGltZXIiLCJBcHBDaGVja1Rva2VuUHJvdmlkZXIiLCJhcHBOYW1lXyIsImFwcENoZWNrUHJvdmlkZXIiLCJhcHBDaGVjayIsImdldFRva2VuIiwiZm9yY2VSZWZyZXNoIiwiYWRkVG9rZW5DaGFuZ2VMaXN0ZW5lciIsImxpc3RlbmVyIiwiYWRkVG9rZW5MaXN0ZW5lciIsIm5vdGlmeUZvckludmFsaWRUb2tlbiIsIkZpcmViYXNlQXV0aFRva2VuUHJvdmlkZXIiLCJmaXJlYmFzZU9wdGlvbnNfIiwiYXV0aFByb3ZpZGVyXyIsImF1dGhfIiwiYXV0aCIsImFkZEF1dGhUb2tlbkxpc3RlbmVyIiwicmVtb3ZlVG9rZW5DaGFuZ2VMaXN0ZW5lciIsInJlbW92ZUF1dGhUb2tlbkxpc3RlbmVyIiwiZXJyb3JNZXNzYWdlIiwiRW11bGF0b3JUb2tlblByb3ZpZGVyIiwiYWNjZXNzVG9rZW4iLCJPV05FUiIsIlBST1RPQ09MX1ZFUlNJT04iLCJGT1JHRV9ET01BSU5fUkUiLCJBUFBfQ0hFQ0tfVE9LRU5fUEFSQU0iLCJXRUJTT0NLRVQiLCJMT05HX1BPTExJTkciLCJSZXBvSW5mbyIsImhvc3QiLCJzZWN1cmUiLCJuYW1lc3BhY2UiLCJ3ZWJTb2NrZXRPbmx5Iiwibm9kZUFkbWluIiwicGVyc2lzdGVuY2VLZXkiLCJpbmNsdWRlTmFtZXNwYWNlSW5RdWVyeVBhcmFtcyIsImlzVXNpbmdFbXVsYXRvciIsIl9ob3N0IiwiX2RvbWFpbiIsImluZGV4T2YiLCJpbnRlcm5hbEhvc3QiLCJpc0NhY2hlYWJsZUhvc3QiLCJpc0N1c3RvbUhvc3QiLCJuZXdIb3N0IiwidG9VUkxTdHJpbmciLCJwcm90b2NvbCIsInF1ZXJ5IiwicmVwb0luZm9Db25uZWN0aW9uVVJMIiwicmVwb0luZm8iLCJwYXJhbXMiLCJjb25uVVJMIiwicmVwb0luZm9OZWVkc1F1ZXJ5UGFyYW0iLCJwYWlycyIsIlN0YXRzQ29sbGVjdGlvbiIsImNvdW50ZXJzXyIsImluY3JlbWVudENvdW50ZXIiLCJhbW91bnQiLCJjb2xsZWN0aW9ucyIsInJlcG9ydGVycyIsInN0YXRzTWFuYWdlckdldENvbGxlY3Rpb24iLCJoYXNoU3RyaW5nIiwiUGFja2V0UmVjZWl2ZXIiLCJvbk1lc3NhZ2VfIiwicGVuZGluZ1Jlc3BvbnNlcyIsImN1cnJlbnRSZXNwb25zZU51bSIsImNsb3NlQWZ0ZXJSZXNwb25zZSIsIm9uQ2xvc2UiLCJjbG9zZUFmdGVyIiwicmVzcG9uc2VOdW0iLCJoYW5kbGVSZXNwb25zZSIsInJlcXVlc3ROdW0iLCJ0b1Byb2Nlc3MiLCJGSVJFQkFTRV9MT05HUE9MTF9TVEFSVF9QQVJBTSIsIkJyb3dzZXJQb2xsQ29ubmVjdGlvbiIsImNvbm5JZCIsImFwcGxpY2F0aW9uSWQiLCJhcHBDaGVja1Rva2VuIiwiYXV0aFRva2VuIiwidHJhbnNwb3J0U2Vzc2lvbklkIiwibGFzdFNlc3Npb25JZCIsImJ5dGVzU2VudCIsImJ5dGVzUmVjZWl2ZWQiLCJldmVyQ29ubmVjdGVkXyIsImxvZ18iLCJzdGF0c18iLCJ1cmxGbiIsIm9uTWVzc2FnZSIsIm9uRGlzY29ubmVjdCIsImN1clNlZ21lbnROdW0iLCJvbkRpc2Nvbm5lY3RfIiwibXlQYWNrZXRPcmRlcmVyIiwiaXNDbG9zZWRfIiwiY29ubmVjdFRpbWVvdXRUaW1lcl8iLCJvbkNsb3NlZF8iLCJyZWFkeVN0YXRlIiwiY2FsbGVkIiwid3JhcHBlZEZuIiwiYm9keSIsImF0dGFjaEV2ZW50IiwiZXhlY3V0ZVdoZW5ET01SZWFkeSIsInNjcmlwdFRhZ0hvbGRlciIsIkZpcmViYXNlSUZyYW1lU2NyaXB0SG9sZGVyIiwiY29tbWFuZCIsImFyZzEiLCJhcmcyIiwiYXJnMyIsImFyZzQiLCJpbmNyZW1lbnRJbmNvbWluZ0J5dGVzXyIsImNsZWFyVGltZW91dCIsInBhc3N3b3JkIiwic2VuZE5ld1BvbGxzIiwicE4iLCJ1cmxQYXJhbXMiLCJyYW5kb20iLCJ1bmlxdWVDYWxsYmFja0lkZW50aWZpZXIiLCJob3N0bmFtZSIsImNvbm5lY3RVUkwiLCJhZGRUYWciLCJzdGFydCIsInN0YXJ0TG9uZ1BvbGwiLCJhZGREaXNjb25uZWN0UGluZ0ZyYW1lIiwiZm9yY2VBbGxvdyIsImZvcmNlQWxsb3dfIiwiZm9yY2VEaXNhbGxvdyIsImZvcmNlRGlzYWxsb3dfIiwiaXNBdmFpbGFibGUiLCJXaW5kb3dzIiwiVUkiLCJtYXJrQ29ubmVjdGlvbkhlYWx0aHkiLCJzaHV0ZG93bl8iLCJteURpc2Nvbm5GcmFtZSIsInNlbmQiLCJkYXRhU3RyIiwiYmFzZTY0ZGF0YSIsIk1BWF9VUkxfREFUQV9TSVpFIiwiZW5xdWV1ZVNlZ21lbnQiLCJwdyIsImRpc3BsYXkiLCJjb21tYW5kQ0IiLCJvbk1lc3NhZ2VDQiIsIm91dHN0YW5kaW5nUmVxdWVzdHMiLCJwZW5kaW5nU2VncyIsImN1cnJlbnRTZXJpYWwiLCJteUlGcmFtZSIsImNyZWF0ZUlGcmFtZV8iLCJzY3JpcHQiLCJkb21haW4iLCJpZnJhbWVDb250ZW50cyIsImRvYyIsIndyaXRlIiwiaWZyYW1lIiwiY29udGVudFdpbmRvdyIsImFsaXZlIiwidGV4dENvbnRlbnQiLCJteUlEIiwibXlQVyIsIm5ld1JlcXVlc3RfIiwic2l6ZSIsInRoZVVSTCIsImN1ckRhdGFTdHJpbmciLCJ0aGVTZWciLCJzZWciLCJ0cyIsImFkZExvbmdQb2xsVGFnXyIsInNlZ251bSIsInRvdGFsc2VncyIsInNlcmlhbCIsImRvTmV3UmVxdWVzdCIsImtlZXBhbGl2ZVRpbWVvdXQiLCJsb2FkQ0IiLCJuZXdTY3JpcHQiLCJvbmxvYWQiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyc3RhdGUiLCJXZWJTb2NrZXRJbXBsIiwiTW96V2ViU29ja2V0IiwiV2ViU29ja2V0IiwiV2ViU29ja2V0Q29ubmVjdGlvbiIsImtlZXBhbGl2ZVRpbWVyIiwiZnJhbWVzIiwidG90YWxGcmFtZXMiLCJjb25uZWN0aW9uVVJMXyIsIkNPTlNUQU5UUyIsIm15U29jayIsIm9ub3BlbiIsIm9uY2xvc2UiLCJvbm1lc3NhZ2UiLCJoYW5kbGVJbmNvbWluZ0ZyYW1lIiwiaXNPbGRBbmRyb2lkIiwidXNlckFnZW50Iiwib2xkQW5kcm9pZFJlZ2V4Iiwib2xkQW5kcm9pZE1hdGNoIiwicGFyc2VGbG9hdCIsInByZXZpb3VzbHlGYWlsZWQiLCJhcHBlbmRGcmFtZV8iLCJmdWxsTWVzcyIsImpzb25NZXNzIiwiaGFuZGxlTmV3RnJhbWVDb3VudF8iLCJmcmFtZUNvdW50IiwiZXh0cmFjdEZyYW1lQ291bnRfIiwiaXNOYU4iLCJtZXNzIiwicmVzZXRLZWVwQWxpdmUiLCJyZW1haW5pbmdEYXRhIiwic2VuZFN0cmluZ18iLCJjbGVhckludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJyZXNwb25zZXNSZXF1aXJlZFRvQmVIZWFsdGh5IiwiaGVhbHRoeVRpbWVvdXQiLCJUcmFuc3BvcnRNYW5hZ2VyIiwiQUxMX1RSQU5TUE9SVFMiLCJJU19UUkFOU1BPUlRfSU5JVElBTElaRUQiLCJnbG9iYWxUcmFuc3BvcnRJbml0aWFsaXplZF8iLCJpbml0VHJhbnNwb3J0c18iLCJpc1dlYlNvY2tldHNBdmFpbGFibGUiLCJpc1NraXBQb2xsQ29ubmVjdGlvbiIsInRyYW5zcG9ydHNfIiwidHJhbnNwb3J0cyIsInRyYW5zcG9ydCIsImluaXRpYWxUcmFuc3BvcnQiLCJ1cGdyYWRlVHJhbnNwb3J0IiwiQ29ubmVjdGlvbiIsInJlcG9JbmZvXyIsImFwcGxpY2F0aW9uSWRfIiwiYXBwQ2hlY2tUb2tlbl8iLCJhdXRoVG9rZW5fIiwib25SZWFkeV8iLCJvbktpbGxfIiwiY29ubmVjdGlvbkNvdW50IiwicGVuZGluZ0RhdGFNZXNzYWdlcyIsInN0YXRlXyIsInRyYW5zcG9ydE1hbmFnZXJfIiwic3RhcnRfIiwiY29ubiIsImNvbm5fIiwibmV4dFRyYW5zcG9ydElkXyIsInByaW1hcnlSZXNwb25zZXNSZXF1aXJlZF8iLCJvbk1lc3NhZ2VSZWNlaXZlZCIsImNvbm5SZWNlaXZlcl8iLCJvbkNvbm5lY3Rpb25Mb3N0IiwiZGlzY29ublJlY2VpdmVyXyIsInR4XyIsInJ4XyIsInNlY29uZGFyeUNvbm5fIiwiaXNIZWFsdGh5XyIsImhlYWx0aHlUaW1lb3V0TVMiLCJoZWFsdGh5VGltZW91dF8iLCJldmVyQ29ubmVjdGVkIiwib25Db25uZWN0aW9uTG9zdF8iLCJvblNlY29uZGFyeUNvbm5lY3Rpb25Mb3N0XyIsIm9uUHJpbWFyeU1lc3NhZ2VSZWNlaXZlZF8iLCJvblNlY29uZGFyeU1lc3NhZ2VSZWNlaXZlZF8iLCJzZW5kUmVxdWVzdCIsImRhdGFNc2ciLCJtc2ciLCJzZW5kRGF0YV8iLCJ0cnlDbGVhbnVwQ29ubmVjdGlvbiIsIm9uU2Vjb25kYXJ5Q29udHJvbF8iLCJjb250cm9sRGF0YSIsImNtZCIsInVwZ3JhZGVJZlNlY29uZGFyeUhlYWx0aHlfIiwic2Vjb25kYXJ5UmVzcG9uc2VzUmVxdWlyZWRfIiwicGFyc2VkRGF0YSIsInByb2NlZWRXaXRoVXBncmFkZV8iLCJvbkNvbnRyb2xfIiwib25EYXRhTWVzc2FnZV8iLCJvblByaW1hcnlSZXNwb25zZV8iLCJwYXlsb2FkIiwiaGFuZHNoYWtlUGF5bG9hZCIsImgiLCJvbkhhbmRzaGFrZV8iLCJvbkNvbm5lY3Rpb25TaHV0ZG93bl8iLCJvblJlc2V0XyIsInNlbmRQaW5nT25QcmltYXJ5SWZOZWNlc3NhcnlfIiwiaGFuZHNoYWtlIiwidGltZXN0YW1wIiwic2Vzc2lvbklkIiwib25Db25uZWN0aW9uRXN0YWJsaXNoZWRfIiwidHJ5U3RhcnRVcGdyYWRlXyIsInN0YXJ0VXBncmFkZV8iLCJjbG9zZUNvbm5lY3Rpb25zXyIsInJlYXNvbiIsIlNlcnZlckFjdGlvbnMiLCJwYXRoU3RyaW5nIiwib25Db21wbGV0ZSIsIm1lcmdlIiwicmVmcmVzaEF1dGhUb2tlbiIsInJlZnJlc2hBcHBDaGVja1Rva2VuIiwib25EaXNjb25uZWN0UHV0Iiwib25EaXNjb25uZWN0TWVyZ2UiLCJvbkRpc2Nvbm5lY3RDYW5jZWwiLCJyZXBvcnRTdGF0cyIsInN0YXRzIiwiRXZlbnRFbWl0dGVyIiwiYWxsb3dlZEV2ZW50c18iLCJsaXN0ZW5lcnNfIiwidHJpZ2dlciIsImV2ZW50VHlwZSIsImxpc3RlbmVycyIsImNvbnRleHQiLCJvbiIsInZhbGlkYXRlRXZlbnRUeXBlXyIsImV2ZW50RGF0YSIsImdldEluaXRpYWxFdmVudCIsIm9mZiIsImV0IiwiT25saW5lTW9uaXRvciIsImdldEluc3RhbmNlIiwib25saW5lXyIsImN1cnJlbnRseU9ubGluZSIsIlBhdGgiLCJwYXRoT3JTdHJpbmciLCJwaWVjZU51bSIsInBpZWNlc18iLCJjb3B5VG8iLCJwaWVjZU51bV8iLCJuZXdFbXB0eVBhdGgiLCJwYXRoR2V0RnJvbnQiLCJwYXRoIiwicGF0aEdldExlbmd0aCIsInBhdGhQb3BGcm9udCIsInBhdGhHZXRCYWNrIiwicGF0aFNsaWNlIiwiYmVnaW4iLCJwYXRoUGFyZW50IiwicGllY2VzIiwicGF0aENoaWxkIiwiY2hpbGRQYXRoT2JqIiwiY2hpbGRQaWVjZXMiLCJwYXRoSXNFbXB0eSIsIm5ld1JlbGF0aXZlUGF0aCIsIm91dGVyUGF0aCIsImlubmVyUGF0aCIsIm91dGVyIiwiaW5uZXIiLCJwYXRoRXF1YWxzIiwib3RoZXIiLCJwYXRoQ29udGFpbnMiLCJWYWxpZGF0aW9uUGF0aCIsImVycm9yUHJlZml4XyIsInBhcnRzXyIsImJ5dGVMZW5ndGhfIiwibWF4IiwidmFsaWRhdGlvblBhdGhDaGVja1ZhbGlkIiwidmFsaWRhdGlvblBhdGgiLCJ2YWxpZGF0aW9uUGF0aFRvRXJyb3JTdHJpbmciLCJWaXNpYmlsaXR5TW9uaXRvciIsImhpZGRlbiIsInZpc2liaWxpdHlDaGFuZ2UiLCJ2aXNpYmxlXyIsInZpc2libGUiLCJSRUNPTk5FQ1RfTUlOX0RFTEFZIiwiUGVyc2lzdGVudENvbm5lY3Rpb24iLCJvbkRhdGFVcGRhdGVfIiwib25Db25uZWN0U3RhdHVzXyIsIm9uU2VydmVySW5mb1VwZGF0ZV8iLCJhdXRoVG9rZW5Qcm92aWRlcl8iLCJhcHBDaGVja1Rva2VuUHJvdmlkZXJfIiwiYXV0aE92ZXJyaWRlXyIsIm5leHRQZXJzaXN0ZW50Q29ubmVjdGlvbklkXyIsImludGVycnVwdFJlYXNvbnNfIiwibGlzdGVucyIsIm91dHN0YW5kaW5nUHV0c18iLCJvdXRzdGFuZGluZ0dldHNfIiwib3V0c3RhbmRpbmdQdXRDb3VudF8iLCJvdXRzdGFuZGluZ0dldENvdW50XyIsIm9uRGlzY29ubmVjdFJlcXVlc3RRdWV1ZV8iLCJjb25uZWN0ZWRfIiwicmVjb25uZWN0RGVsYXlfIiwibWF4UmVjb25uZWN0RGVsYXlfIiwic2VjdXJpdHlEZWJ1Z0NhbGxiYWNrXyIsImVzdGFibGlzaENvbm5lY3Rpb25UaW1lcl8iLCJyZXF1ZXN0Q0JIYXNoXyIsInJlcXVlc3ROdW1iZXJfIiwicmVhbHRpbWVfIiwiZm9yY2VUb2tlblJlZnJlc2hfIiwiaW52YWxpZEF1dGhUb2tlbkNvdW50XyIsImludmFsaWRBcHBDaGVja1Rva2VuQ291bnRfIiwiZmlyc3RDb25uZWN0aW9uXyIsImxhc3RDb25uZWN0aW9uQXR0ZW1wdFRpbWVfIiwibGFzdENvbm5lY3Rpb25Fc3RhYmxpc2hlZFRpbWVfIiwib25WaXNpYmxlXyIsIm9uT25saW5lXyIsImFjdGlvbiIsIm9uUmVzcG9uc2UiLCJjdXJSZXFOdW0iLCJyIiwiaW5pdENvbm5lY3Rpb25fIiwib3V0c3RhbmRpbmdHZXQiLCJfcGF0aCIsInEiLCJfcXVlcnlPYmplY3QiLCJzZW5kR2V0XyIsImxpc3RlbiIsImN1cnJlbnRIYXNoRm4iLCJ0YWciLCJxdWVyeUlkIiwiX3F1ZXJ5SWRlbnRpZmllciIsIl9xdWVyeVBhcmFtcyIsImlzRGVmYXVsdCIsImxvYWRzQWxsRGF0YSIsImxpc3RlblNwZWMiLCJoYXNoRm4iLCJzZW5kTGlzdGVuXyIsInJlcSIsInN0YXR1cyIsIndhcm5Pbkxpc3Rlbldhcm5pbmdzXyIsInJlbW92ZUxpc3Rlbl8iLCJ3YXJuaW5ncyIsImluZGV4U3BlYyIsImdldEluZGV4IiwiaW5kZXhQYXRoIiwidHJ5QXV0aCIsInJlZHVjZVJlY29ubmVjdERlbGF5SWZBZG1pbkNyZWRlbnRpYWxfIiwiY3JlZGVudGlhbCIsImlzQWRtaW4iLCJ0cnlBcHBDaGVjayIsImF1dGhNZXRob2QiLCJpc1ZhbGlkRm9ybWF0IiwicmVxdWVzdERhdGEiLCJjcmVkIiwib25BdXRoUmV2b2tlZF8iLCJvbkFwcENoZWNrUmV2b2tlZF8iLCJzZW5kVW5saXN0ZW5fIiwicXVlcnlPYmoiLCJzZW5kT25EaXNjb25uZWN0XyIsInJlc3BvbnNlIiwicHV0SW50ZXJuYWwiLCJzZW5kUHV0XyIsInF1ZXVlZCIsImVycm9yUmVhc29uIiwicmVxTnVtIiwib25EYXRhUHVzaF8iLCJvbkxpc3RlblJldm9rZWRfIiwib25TZWN1cml0eURlYnVnUGFja2V0XyIsImhhbmRsZVRpbWVzdGFtcF8iLCJzZW5kQ29ubmVjdFN0YXRzXyIsInJlc3RvcmVTdGF0ZV8iLCJzY2hlZHVsZUNvbm5lY3RfIiwiZXN0YWJsaXNoQ29ubmVjdGlvbl8iLCJvbmxpbmUiLCJvblJlYWx0aW1lRGlzY29ubmVjdF8iLCJjYW5jZWxTZW50VHJhbnNhY3Rpb25zXyIsInNob3VsZFJlY29ubmVjdF8iLCJ0aW1lU2luY2VMYXN0Q29ubmVjdEF0dGVtcHQiLCJyZWNvbm5lY3REZWxheSIsIm9uRGF0YU1lc3NhZ2UiLCJvblJlYWR5IiwibmV4dENvbm5lY3Rpb25JZF8iLCJjYW5jZWxlZCIsImNvbm5lY3Rpb24iLCJjbG9zZUZuIiwic2VuZFJlcXVlc3RGbiIsImludGVycnVwdCIsInJlc3VtZSIsImRlbHRhIiwic2VydmVyVGltZU9mZnNldCIsIm5vcm1hbGl6ZWRQYXRoU3RyaW5nIiwic3RhdHVzQ29kZSIsImV4cGxhbmF0aW9uIiwicXVlcmllcyIsImNsaWVudE5hbWUiLCJOYW1lZE5vZGUiLCJub2RlIiwiV3JhcCIsIkluZGV4IiwiZ2V0Q29tcGFyZSIsImNvbXBhcmUiLCJpbmRleGVkVmFsdWVDaGFuZ2VkIiwib2xkTm9kZSIsIm5ld05vZGUiLCJvbGRXcmFwcGVkIiwibmV3V3JhcHBlZCIsIm1pblBvc3QiLCJNSU4iLCJfX0VNUFRZX05PREUiLCJLZXlJbmRleCIsImlzRGVmaW5lZE9uIiwibWF4UG9zdCIsIm1ha2VQb3N0IiwiaW5kZXhWYWx1ZSIsIktFWV9JTkRFWCIsIlNvcnRlZE1hcEl0ZXJhdG9yIiwic3RhcnRLZXkiLCJjb21wYXJhdG9yIiwiaXNSZXZlcnNlXyIsInJlc3VsdEdlbmVyYXRvcl8iLCJub2RlU3RhY2tfIiwiY21wIiwiaXNFbXB0eSIsImxlZnQiLCJyaWdodCIsImdldE5leHQiLCJoYXNOZXh0IiwicGVlayIsIkxMUkJOb2RlIiwiY29sb3IiLCJSRUQiLCJTb3J0ZWRNYXAiLCJFTVBUWV9OT0RFIiwiY29weSIsImlub3JkZXJUcmF2ZXJzYWwiLCJyZXZlcnNlVHJhdmVyc2FsIiwibWluXyIsIm1pbktleSIsIm1heEtleSIsImZpeFVwXyIsInJlbW92ZU1pbl8iLCJpc1JlZF8iLCJtb3ZlUmVkTGVmdF8iLCJzbWFsbGVzdCIsInJvdGF0ZVJpZ2h0XyIsIm1vdmVSZWRSaWdodF8iLCJyb3RhdGVMZWZ0XyIsImNvbG9yRmxpcF8iLCJubCIsIm5yIiwiY2hlY2tNYXhEZXB0aF8iLCJibGFja0RlcHRoIiwiY2hlY2tfIiwiQkxBQ0siLCJjb21wYXJhdG9yXyIsInJvb3RfIiwiZ2V0UHJlZGVjZXNzb3JLZXkiLCJyaWdodFBhcmVudCIsImdldEl0ZXJhdG9yIiwicmVzdWx0R2VuZXJhdG9yIiwiZ2V0SXRlcmF0b3JGcm9tIiwiZ2V0UmV2ZXJzZUl0ZXJhdG9yRnJvbSIsImdldFJldmVyc2VJdGVyYXRvciIsIk5BTUVfT05MWV9DT01QQVJBVE9SIiwiTkFNRV9DT01QQVJBVE9SIiwiTUFYX05PREUkMiIsInByaW9yaXR5SGFzaFRleHQiLCJwcmlvcml0eSIsInZhbGlkYXRlUHJpb3JpdHlOb2RlIiwicHJpb3JpdHlOb2RlIiwiaXNMZWFmTm9kZSIsImdldFByaW9yaXR5IiwiX19jaGlsZHJlbk5vZGVDb25zdHJ1Y3RvciIsIm5vZGVGcm9tSlNPTiQxIiwiTUFYX05PREUkMSIsIkxlYWZOb2RlIiwidmFsdWVfIiwicHJpb3JpdHlOb2RlXyIsImxhenlIYXNoXyIsInVwZGF0ZVByaW9yaXR5IiwibmV3UHJpb3JpdHlOb2RlIiwiZ2V0SW1tZWRpYXRlQ2hpbGQiLCJjaGlsZE5hbWUiLCJnZXRDaGlsZCIsImhhc0NoaWxkIiwiZ2V0UHJlZGVjZXNzb3JDaGlsZE5hbWUiLCJjaGlsZE5vZGUiLCJ1cGRhdGVJbW1lZGlhdGVDaGlsZCIsIm5ld0NoaWxkTm9kZSIsInVwZGF0ZUNoaWxkIiwiZnJvbnQiLCJudW1DaGlsZHJlbiIsImZvckVhY2hDaGlsZCIsImV4cG9ydEZvcm1hdCIsImdldFZhbHVlIiwidG9IYXNoIiwiY29tcGFyZVRvIiwiY29tcGFyZVRvTGVhZk5vZGVfIiwib3RoZXJMZWFmIiwib3RoZXJMZWFmVHlwZSIsInRoaXNMZWFmVHlwZSIsIm90aGVySW5kZXgiLCJWQUxVRV9UWVBFX09SREVSIiwidGhpc0luZGV4Iiwid2l0aEluZGV4IiwiaXNJbmRleGVkIiwiZXF1YWxzIiwiUFJJT1JJVFlfSU5ERVgiLCJhUHJpb3JpdHkiLCJiUHJpb3JpdHkiLCJpbmRleENtcCIsIkxPR18yIiwiQmFzZTEyTnVtIiwibnVtIiwiY3VycmVudF8iLCJtYXNrIiwiYml0c18iLCJuZXh0Qml0SXNPbmUiLCJidWlsZENoaWxkU2V0IiwiY2hpbGRMaXN0Iiwia2V5Rm4iLCJtYXBTb3J0Rm4iLCJidWlsZEJhbGFuY2VkVHJlZSIsImxvdyIsIm5hbWVkTm9kZSIsIm1pZGRsZSIsInJvb3QiLCJiYXNlMTIiLCJidWlsZFBlbm5hbnQiLCJjaHVua1NpemUiLCJjaGlsZFRyZWUiLCJhdHRhY2hQZW5uYW50IiwicGVubmFudCIsImlzT25lIiwiYnVpbGRGcm9tMTJBcnJheSIsIl9kZWZhdWx0SW5kZXhNYXAiLCJmYWxsYmFja09iamVjdCIsIkluZGV4TWFwIiwiRGVmYXVsdCIsImluZGV4ZXNfIiwiaW5kZXhTZXRfIiwiaW5kZXhLZXkiLCJzb3J0ZWRNYXAiLCJoYXNJbmRleCIsImluZGV4RGVmaW5pdGlvbiIsImFkZEluZGV4IiwiZXhpc3RpbmdDaGlsZHJlbiIsInNhd0luZGV4ZWRWYWx1ZSIsIml0ZXIiLCJuZXdJbmRleCIsIm5leHQiLCJpbmRleE5hbWUiLCJuZXdJbmRleFNldCIsIm5ld0luZGV4ZXMiLCJhZGRUb0luZGV4ZXMiLCJpbmRleGVkQ2hpbGRyZW4iLCJleGlzdGluZ1NuYXAiLCJuZXdDaGlsZHJlbiIsInJlbW92ZUZyb21JbmRleGVzIiwiQ2hpbGRyZW5Ob2RlIiwiY2hpbGRyZW5fIiwiaW5kZXhNYXBfIiwiY2hpbGQiLCJuZXdJbmRleE1hcCIsIm5ld1ByaW9yaXR5IiwibmV3SW1tZWRpYXRlQ2hpbGQiLCJudW1LZXlzIiwiYWxsSW50ZWdlcktleXMiLCJhcnJheSIsImNoaWxkSGFzaCIsImlkeCIsInJlc29sdmVJbmRleF8iLCJwcmVkZWNlc3NvciIsImdldEZpcnN0Q2hpbGROYW1lIiwiZ2V0Rmlyc3RDaGlsZCIsImdldExhc3RDaGlsZE5hbWUiLCJnZXRMYXN0Q2hpbGQiLCJ3cmFwcGVkTm9kZSIsInN0YXJ0UG9zdCIsIml0ZXJhdG9yIiwiZW5kUG9zdCIsIk1BWF9OT0RFIiwib3RoZXJDaGlsZHJlbk5vZGUiLCJ0aGlzSXRlciIsIm90aGVySXRlciIsInRoaXNDdXJyZW50Iiwib3RoZXJDdXJyZW50IiwiZGVmaW5lUHJvcGVydGllcyIsIk1BWCIsIlVTRV9ISU5aRSIsIm5vZGVGcm9tSlNPTiIsImpzb24iLCJjaGlsZERhdGEiLCJjaGlsZHJlbiIsImNoaWxkcmVuSGF2ZVByaW9yaXR5IiwiY2hpbGRTZXQiLCJzb3J0ZWRDaGlsZFNldCIsInNldE5vZGVGcm9tSlNPTiIsIlBhdGhJbmRleCIsImluZGV4UGF0aF8iLCJleHRyYWN0Q2hpbGQiLCJzbmFwIiwiYUNoaWxkIiwiYkNoaWxkIiwidmFsdWVOb2RlIiwiVkFMVUVfSU5ERVgiLCJjaGFuZ2VWYWx1ZSIsInNuYXBzaG90Tm9kZSIsImNoYW5nZUNoaWxkQWRkZWQiLCJjaGFuZ2VDaGlsZFJlbW92ZWQiLCJjaGFuZ2VDaGlsZENoYW5nZWQiLCJvbGRTbmFwIiwiSW5kZXhlZEZpbHRlciIsImluZGV4XyIsIm5ld0NoaWxkIiwiYWZmZWN0ZWRQYXRoIiwib3B0Q2hhbmdlQWNjdW11bGF0b3IiLCJvbGRDaGlsZCIsInRyYWNrQ2hpbGRDaGFuZ2UiLCJ1cGRhdGVGdWxsTm9kZSIsIm5ld1NuYXAiLCJmaWx0ZXJzTm9kZXMiLCJnZXRJbmRleGVkRmlsdGVyIiwiUmFuZ2VkRmlsdGVyIiwiaW5kZXhlZEZpbHRlcl8iLCJzdGFydFBvc3RfIiwiZ2V0U3RhcnRQb3N0XyIsImVuZFBvc3RfIiwiZ2V0RW5kUG9zdF8iLCJzdGFydElzSW5jbHVzaXZlXyIsInN0YXJ0QWZ0ZXJTZXRfIiwiZW5kSXNJbmNsdXNpdmVfIiwiZW5kQmVmb3JlU2V0XyIsImdldFN0YXJ0UG9zdCIsImdldEVuZFBvc3QiLCJtYXRjaGVzIiwiaXNXaXRoaW5TdGFydCIsImlzV2l0aGluRW5kIiwiZmlsdGVyZWQiLCJoYXNTdGFydCIsInN0YXJ0TmFtZSIsImdldEluZGV4U3RhcnROYW1lIiwiZ2V0SW5kZXhTdGFydFZhbHVlIiwiaGFzRW5kIiwiZW5kTmFtZSIsImdldEluZGV4RW5kTmFtZSIsImdldEluZGV4RW5kVmFsdWUiLCJMaW1pdGVkRmlsdGVyIiwid2l0aGluRGlyZWN0aW9uYWxTdGFydCIsInJldmVyc2VfIiwid2l0aGluRW5kUG9zdCIsIndpdGhpblN0YXJ0UG9zdCIsIndpdGhpbkRpcmVjdGlvbmFsRW5kIiwiY29tcGFyZVJlcyIsInJhbmdlZEZpbHRlcl8iLCJsaW1pdF8iLCJnZXRMaW1pdCIsImlzVmlld0Zyb21MZWZ0IiwiZnVsbExpbWl0VXBkYXRlQ2hpbGRfIiwiY2hpbGRLZXkiLCJjaGlsZFNuYXAiLCJjaGFuZ2VBY2N1bXVsYXRvciIsIm9sZEV2ZW50Q2FjaGUiLCJuZXdDaGlsZE5hbWVkTm9kZSIsIndpbmRvd0JvdW5kYXJ5IiwiaW5SYW5nZSIsIm9sZENoaWxkU25hcCIsIm5leHRDaGlsZCIsImdldENoaWxkQWZ0ZXJDaGlsZCIsImNvbXBhcmVOZXh0IiwibmV3RXZlbnRDYWNoZSIsIlF1ZXJ5UGFyYW1zIiwibGltaXRTZXRfIiwic3RhcnRTZXRfIiwic3RhcnROYW1lU2V0XyIsImVuZFNldF8iLCJlbmROYW1lU2V0XyIsInZpZXdGcm9tXyIsImluZGV4U3RhcnRWYWx1ZV8iLCJpbmRleFN0YXJ0TmFtZV8iLCJpbmRleEVuZFZhbHVlXyIsImluZGV4RW5kTmFtZV8iLCJoYXNMaW1pdCIsImhhc0FuY2hvcmVkTGltaXQiLCJxdWVyeVBhcmFtc1RvUmVzdFF1ZXJ5U3RyaW5nUGFyYW1ldGVycyIsInF1ZXJ5UGFyYW1zIiwicXMiLCJvcmRlckJ5Iiwic3RhcnRQYXJhbSIsImVuZFBhcmFtIiwicXVlcnlQYXJhbXNHZXRRdWVyeU9iamVjdCIsInZpZXdGcm9tIiwiUmVhZG9ubHlSZXN0Q2xpZW50IiwiZ2V0TGlzdGVuSWRfIiwibGlzdGVuc18iLCJsaXN0ZW5JZCIsInRoaXNMaXN0ZW4iLCJxdWVyeVN0cmluZ1BhcmFtZXRlcnMiLCJyZXN0UmVxdWVzdF8iLCJxdWVyeXN0cmluZ1BhcmFtcyIsImZvckVhY2giLCJhcnJheVZhbCIsInF1ZXJ5c3RyaW5nIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJyZXNwb25zZVRleHQiLCJTbmFwc2hvdEhvbGRlciIsInJvb3ROb2RlXyIsImdldE5vZGUiLCJ1cGRhdGVTbmFwc2hvdCIsIm5ld1NuYXBzaG90Tm9kZSIsIm5ld1NwYXJzZVNuYXBzaG90VHJlZSIsInNwYXJzZVNuYXBzaG90VHJlZVJlbWVtYmVyIiwic3BhcnNlU25hcHNob3RUcmVlIiwiY2xlYXIiLCJzcGFyc2VTbmFwc2hvdFRyZWVGb3JFYWNoVHJlZSIsInByZWZpeFBhdGgiLCJ0cmVlIiwic3BhcnNlU25hcHNob3RUcmVlRm9yRWFjaENoaWxkIiwiU3RhdHNMaXN0ZW5lciIsImNvbGxlY3Rpb25fIiwibGFzdF8iLCJuZXdTdGF0cyIsInN0YXQiLCJTdGF0c1JlcG9ydGVyIiwiY29sbGVjdGlvbiIsInNlcnZlcl8iLCJzdGF0c1RvUmVwb3J0XyIsInN0YXRzTGlzdGVuZXJfIiwicmVwb3J0U3RhdHNfIiwicmVwb3J0ZWRTdGF0cyIsImhhdmVTdGF0c1RvUmVwb3J0IiwiT3BlcmF0aW9uVHlwZSIsIm5ld09wZXJhdGlvblNvdXJjZVNlcnZlclRhZ2dlZFF1ZXJ5IiwiZnJvbVVzZXIiLCJmcm9tU2VydmVyIiwidGFnZ2VkIiwiQWNrVXNlcldyaXRlIiwiYWZmZWN0ZWRUcmVlIiwicmV2ZXJ0IiwiQUNLX1VTRVJfV1JJVEUiLCJvcGVyYXRpb25Gb3JDaGlsZCIsInN1YnRyZWUiLCJMaXN0ZW5Db21wbGV0ZSIsIkxJU1RFTl9DT01QTEVURSIsIk92ZXJ3cml0ZSIsIk9WRVJXUklURSIsIk1lcmdlIiwiTUVSR0UiLCJDYWNoZU5vZGUiLCJub2RlXyIsImZ1bGx5SW5pdGlhbGl6ZWRfIiwiZmlsdGVyZWRfIiwiaXNGdWxseUluaXRpYWxpemVkIiwiaXNGaWx0ZXJlZCIsImlzQ29tcGxldGVGb3JQYXRoIiwiaXNDb21wbGV0ZUZvckNoaWxkIiwiRXZlbnRHZW5lcmF0b3IiLCJxdWVyeV8iLCJldmVudEdlbmVyYXRvckdlbmVyYXRlRXZlbnRzRm9yVHlwZSIsImV2ZW50R2VuZXJhdG9yIiwiZXZlbnRzIiwiY2hhbmdlcyIsInJlZ2lzdHJhdGlvbnMiLCJldmVudENhY2hlIiwiZmlsdGVyZWRDaGFuZ2VzIiwiY2hhbmdlIiwiYVdyYXBwZWQiLCJiV3JhcHBlZCIsImV2ZW50R2VuZXJhdG9yQ29tcGFyZUNoYW5nZXMiLCJtYXRlcmlhbGl6ZWRDaGFuZ2UiLCJwcmV2TmFtZSIsImV2ZW50R2VuZXJhdG9yTWF0ZXJpYWxpemVTaW5nbGVDaGFuZ2UiLCJyZWdpc3RyYXRpb24iLCJyZXNwb25kc1RvIiwiY3JlYXRlRXZlbnQiLCJuZXdWaWV3Q2FjaGUiLCJzZXJ2ZXJDYWNoZSIsInZpZXdDYWNoZVVwZGF0ZUV2ZW50U25hcCIsInZpZXdDYWNoZSIsImV2ZW50U25hcCIsInZpZXdDYWNoZVVwZGF0ZVNlcnZlclNuYXAiLCJzZXJ2ZXJTbmFwIiwidmlld0NhY2hlR2V0Q29tcGxldGVFdmVudFNuYXAiLCJ2aWV3Q2FjaGVHZXRDb21wbGV0ZVNlcnZlclNuYXAiLCJlbXB0eUNoaWxkcmVuU2luZ2xldG9uIiwiSW1tdXRhYmxlVHJlZSIsImZyb21PYmplY3QiLCJjaGlsZFBhdGgiLCJFbXB0eUNoaWxkcmVuIiwiZmluZFJvb3RNb3N0TWF0Y2hpbmdQYXRoQW5kVmFsdWUiLCJyZWxhdGl2ZVBhdGgiLCJwcmVkaWNhdGUiLCJjaGlsZEV4aXN0aW5nUGF0aEFuZFZhbHVlIiwiZmluZFJvb3RNb3N0VmFsdWVBbmRQYXRoIiwidG9TZXQiLCJzZXRUcmVlIiwibmV3VHJlZSIsImZvbGQiLCJmb2xkXyIsInBhdGhTb0ZhciIsImFjY3VtIiwiZmluZE9uUGF0aCIsImZpbmRPblBhdGhfIiwicGF0aFRvRm9sbG93IiwiZm9yZWFjaE9uUGF0aCIsImZvcmVhY2hPblBhdGhfIiwiY3VycmVudFJlbGF0aXZlUGF0aCIsImZvcmVhY2giLCJmb3JlYWNoXyIsImZvcmVhY2hDaGlsZCIsIkNvbXBvdW5kV3JpdGUiLCJ3cml0ZVRyZWVfIiwiZW1wdHkiLCJjb21wb3VuZFdyaXRlQWRkV3JpdGUiLCJjb21wb3VuZFdyaXRlIiwicm9vdG1vc3QiLCJyb290TW9zdFBhdGgiLCJuZXdXcml0ZVRyZWUiLCJjb21wb3VuZFdyaXRlQWRkV3JpdGVzIiwidXBkYXRlcyIsIm5ld1dyaXRlIiwiY29tcG91bmRXcml0ZVJlbW92ZVdyaXRlIiwiY29tcG91bmRXcml0ZUhhc0NvbXBsZXRlV3JpdGUiLCJjb21wb3VuZFdyaXRlR2V0Q29tcGxldGVOb2RlIiwiY29tcG91bmRXcml0ZUdldENvbXBsZXRlQ2hpbGRyZW4iLCJjb21wb3VuZFdyaXRlQ2hpbGRDb21wb3VuZFdyaXRlIiwic2hhZG93aW5nTm9kZSIsImNvbXBvdW5kV3JpdGVJc0VtcHR5IiwiY29tcG91bmRXcml0ZUFwcGx5IiwiYXBwbHlTdWJ0cmVlV3JpdGUiLCJ3cml0ZVRyZWUiLCJwcmlvcml0eVdyaXRlIiwid3JpdGVUcmVlQ2hpbGRXcml0ZXMiLCJuZXdXcml0ZVRyZWVSZWYiLCJ3cml0ZVRyZWVSZWNvcmRDb250YWluc1BhdGhfIiwid3JpdGVSZWNvcmQiLCJ3cml0ZVRyZWVEZWZhdWx0RmlsdGVyXyIsIndyaXRlVHJlZUxheWVyVHJlZV8iLCJ3cml0ZXMiLCJ0cmVlUm9vdCIsIndyaXRlUGF0aCIsImRlZXBOb2RlIiwid3JpdGVUcmVlQ2FsY0NvbXBsZXRlRXZlbnRDYWNoZSIsInRyZWVQYXRoIiwiY29tcGxldGVTZXJ2ZXJDYWNoZSIsIndyaXRlSWRzVG9FeGNsdWRlIiwiaW5jbHVkZUhpZGRlbldyaXRlcyIsInZpc2libGVXcml0ZXMiLCJ3cml0ZUlkIiwiYWxsV3JpdGVzIiwic3ViTWVyZ2UiLCJ3cml0ZVRyZWVSZWZDYWxjQ29tcGxldGVFdmVudENhY2hlIiwid3JpdGVUcmVlUmVmIiwid3JpdGVUcmVlUmVmQ2FsY0NvbXBsZXRlRXZlbnRDaGlsZHJlbiIsImNvbXBsZXRlU2VydmVyQ2hpbGRyZW4iLCJjb21wbGV0ZUNoaWxkcmVuIiwidG9wTGV2ZWxTZXQiLCJ3cml0ZVRyZWVDYWxjQ29tcGxldGVFdmVudENoaWxkcmVuIiwid3JpdGVUcmVlUmVmQ2FsY0V2ZW50Q2FjaGVBZnRlclNlcnZlck92ZXJ3cml0ZSIsImV4aXN0aW5nRXZlbnRTbmFwIiwiZXhpc3RpbmdTZXJ2ZXJTbmFwIiwiY2hpbGRNZXJnZSIsIndyaXRlVHJlZUNhbGNFdmVudENhY2hlQWZ0ZXJTZXJ2ZXJPdmVyd3JpdGUiLCJ3cml0ZVRyZWVSZWZTaGFkb3dpbmdXcml0ZSIsIndyaXRlVHJlZVNoYWRvd2luZ1dyaXRlIiwid3JpdGVUcmVlUmVmQ2FsY0NvbXBsZXRlQ2hpbGQiLCJleGlzdGluZ1NlcnZlckNhY2hlIiwid3JpdGVUcmVlQ2FsY0NvbXBsZXRlQ2hpbGQiLCJ3cml0ZVRyZWVSZWZDaGlsZCIsIkNoaWxkQ2hhbmdlQWNjdW11bGF0b3IiLCJjaGFuZ2VNYXAiLCJvbGRDaGFuZ2UiLCJvbGRUeXBlIiwiZ2V0Q2hhbmdlcyIsIk5PX0NPTVBMRVRFX0NISUxEX1NPVVJDRSIsImdldENvbXBsZXRlQ2hpbGQiLCJXcml0ZVRyZWVDb21wbGV0ZUNoaWxkU291cmNlIiwid3JpdGVzXyIsInZpZXdDYWNoZV8iLCJvcHRDb21wbGV0ZVNlcnZlckNhY2hlXyIsInNlcnZlck5vZGUiLCJjb21wbGV0ZVNlcnZlckRhdGEiLCJub2RlcyIsInRvSXRlcmF0ZSIsIndyaXRlVHJlZUNhbGNJbmRleGVkU2xpY2UiLCJ3cml0ZVRyZWVSZWZDYWxjSW5kZXhlZFNsaWNlIiwidmlld1Byb2Nlc3NvckdlbmVyYXRlRXZlbnRDYWNoZUFmdGVyU2VydmVyRXZlbnQiLCJ2aWV3UHJvY2Vzc29yIiwiY2hhbmdlUGF0aCIsIndyaXRlc0NhY2hlIiwiYWNjdW11bGF0b3IiLCJvbGRFdmVudFNuYXAiLCJjb21wbGV0ZUV2ZW50Q2hpbGRyZW4iLCJjb21wbGV0ZU5vZGUiLCJvbGRFdmVudE5vZGUiLCJ1cGRhdGVkUHJpb3JpdHkiLCJjaGlsZENoYW5nZVBhdGgiLCJuZXdFdmVudENoaWxkIiwiZXZlbnRDaGlsZFVwZGF0ZSIsInZpZXdQcm9jZXNzb3JBcHBseVNlcnZlck92ZXJ3cml0ZSIsIm9sZFZpZXdDYWNoZSIsImNoYW5nZWRTbmFwIiwiY29tcGxldGVDYWNoZSIsImZpbHRlclNlcnZlck5vZGUiLCJvbGRTZXJ2ZXJTbmFwIiwibmV3U2VydmVyQ2FjaGUiLCJzZXJ2ZXJGaWx0ZXIiLCJuZXdTZXJ2ZXJOb2RlIiwidmlld1Byb2Nlc3NvckFwcGx5VXNlck92ZXJ3cml0ZSIsInZpZXdQcm9jZXNzb3JDYWNoZUhhc0NoaWxkIiwidmlld1Byb2Nlc3NvckFwcGx5TWVyZ2UiLCJ2aWV3UHJvY2Vzc29yQXBwbHlTZXJ2ZXJNZXJnZSIsImNoYW5nZWRDaGlsZHJlbiIsInZpZXdNZXJnZVRyZWUiLCJjdXJWaWV3Q2FjaGUiLCJjaGlsZE1lcmdlVHJlZSIsImlzVW5rbm93bkRlZXBNZXJnZSIsIlZpZXciLCJpbml0aWFsVmlld0NhY2hlIiwiZXZlbnRSZWdpc3RyYXRpb25zXyIsImluZGV4RmlsdGVyIiwicHJvY2Vzc29yXyIsIm5ld1ZpZXdQcm9jZXNzb3IiLCJpbml0aWFsU2VydmVyQ2FjaGUiLCJpbml0aWFsRXZlbnRDYWNoZSIsImV2ZW50R2VuZXJhdG9yXyIsInZpZXdHZXRDb21wbGV0ZVNlcnZlckNhY2hlIiwidmlldyIsImNhY2hlIiwidmlld0lzRW1wdHkiLCJ2aWV3UmVtb3ZlRXZlbnRSZWdpc3RyYXRpb24iLCJldmVudFJlZ2lzdHJhdGlvbiIsImNhbmNlbEVycm9yIiwiY2FuY2VsRXZlbnRzIiwibWF5YmVFdmVudCIsImNyZWF0ZUNhbmNlbEV2ZW50IiwicmVtYWluaW5nIiwiZXhpc3RpbmciLCJoYXNBbnlDYWxsYmFjayIsInZpZXdBcHBseU9wZXJhdGlvbiIsIm9wZXJhdGlvbiIsInZpZXdQcm9jZXNzb3JBcHBseVVzZXJNZXJnZSIsImFja1VzZXJXcml0ZSIsInNlcnZlckNoaWxkcmVuIiwidmlld1Byb2Nlc3NvclJldmVydFVzZXJXcml0ZSIsImFja1BhdGgiLCJtZXJnZVBhdGgiLCJzZXJ2ZXJDYWNoZVBhdGgiLCJ2aWV3UHJvY2Vzc29yQWNrVXNlcldyaXRlIiwib2xkU2VydmVyTm9kZSIsInZpZXdQcm9jZXNzb3JMaXN0ZW5Db21wbGV0ZSIsImlzTGVhZk9yRW1wdHkiLCJvbGRDb21wbGV0ZVNuYXAiLCJ2aWV3UHJvY2Vzc29yTWF5YmVBZGRWYWx1ZUV2ZW50Iiwidmlld1Byb2Nlc3NvckFwcGx5T3BlcmF0aW9uIiwidmlld0dlbmVyYXRlRXZlbnRzRm9yQ2hhbmdlc18iLCJldmVudFJlZ2lzdHJhdGlvbnMiLCJtb3ZlcyIsImV2ZW50R2VuZXJhdG9yR2VuZXJhdGVFdmVudHNGb3JDaGFuZ2VzIiwicmVmZXJlbmNlQ29uc3RydWN0b3IkMSIsInJlZmVyZW5jZUNvbnN0cnVjdG9yIiwiU3luY1BvaW50Iiwidmlld3MiLCJzeW5jUG9pbnRBcHBseU9wZXJhdGlvbiIsInN5bmNQb2ludCIsIm9wdENvbXBsZXRlU2VydmVyQ2FjaGUiLCJzeW5jUG9pbnRHZXRWaWV3Iiwic2VydmVyQ2FjaGVDb21wbGV0ZSIsImV2ZW50Q2FjaGVDb21wbGV0ZSIsInN5bmNQb2ludEdldFF1ZXJ5Vmlld3MiLCJzeW5jUG9pbnRHZXRDb21wbGV0ZVNlcnZlckNhY2hlIiwic3luY1BvaW50Vmlld0ZvclF1ZXJ5Iiwic3luY1BvaW50R2V0Q29tcGxldGVWaWV3Iiwic3luY1BvaW50Vmlld0V4aXN0c0ZvclF1ZXJ5Iiwic3luY1BvaW50SGFzQ29tcGxldGVWaWV3Iiwic3luY1RyZWVOZXh0UXVlcnlUYWdfIiwiU3luY1RyZWUiLCJsaXN0ZW5Qcm92aWRlcl8iLCJzeW5jUG9pbnRUcmVlXyIsInBlbmRpbmdXcml0ZVRyZWVfIiwibGFzdFdyaXRlSWQiLCJ0YWdUb1F1ZXJ5TWFwIiwicXVlcnlUb1RhZ01hcCIsInN5bmNUcmVlQXBwbHlVc2VyT3ZlcndyaXRlIiwic3luY1RyZWUiLCJuZXdEYXRhIiwid3JpdGVUcmVlQWRkT3ZlcndyaXRlIiwic3luY1RyZWVBcHBseU9wZXJhdGlvblRvU3luY1BvaW50c18iLCJzeW5jVHJlZUFja1VzZXJXcml0ZSIsInJlY29yZCIsIndyaXRlVHJlZUdldFdyaXRlIiwiZmluZEluZGV4Iiwid3JpdGVUb1JlbW92ZSIsInJlbW92ZWRXcml0ZVdhc1Zpc2libGUiLCJyZW1vdmVkV3JpdGVPdmVybGFwc1dpdGhPdGhlcldyaXRlcyIsImN1cnJlbnRXcml0ZSIsIndyaXRlVHJlZVJlc2V0VHJlZV8iLCJ3cml0ZVRyZWVSZW1vdmVXcml0ZSIsInN5bmNUcmVlQXBwbHlTZXJ2ZXJPdmVyd3JpdGUiLCJzeW5jVHJlZVJlbW92ZUV2ZW50UmVnaXN0cmF0aW9uIiwic2tpcExpc3RlbmVyRGVkdXAiLCJtYXliZVN5bmNQb2ludCIsInJlbW92ZWRBbmRFdmVudHMiLCJyZW1vdmVkIiwiaGFkQ29tcGxldGVWaWV3Iiwidmlld1F1ZXJ5SWQiLCJfcmVwbyIsInN5bmNQb2ludFJlbW92ZUV2ZW50UmVnaXN0cmF0aW9uIiwicmVtb3ZpbmdEZWZhdWx0IiwiY292ZXJlZCIsInBhcmVudFN5bmNQb2ludCIsIm5ld1ZpZXdzIiwibWF5YmVDaGlsZFN5bmNQb2ludCIsImNoaWxkTWFwIiwiX2tleSIsImNoaWxkVmlld3MiLCJzeW5jVHJlZUNvbGxlY3REaXN0aW5jdFZpZXdzRm9yU3ViVHJlZV8iLCJuZXdRdWVyeSIsInN5bmNUcmVlQ3JlYXRlTGlzdGVuZXJGb3JWaWV3XyIsInN0YXJ0TGlzdGVuaW5nIiwic3luY1RyZWVRdWVyeUZvckxpc3RlbmluZ18iLCJzeW5jVHJlZVRhZ0ZvclF1ZXJ5IiwiZGVmYXVsdFRhZyIsInN0b3BMaXN0ZW5pbmciLCJxdWVyeVRvUmVtb3ZlIiwidGFnVG9SZW1vdmUiLCJzeW5jVHJlZU1ha2VRdWVyeUtleV8iLCJyZW1vdmVkUXVlcnkiLCJyZW1vdmVkUXVlcnlLZXkiLCJyZW1vdmVkUXVlcnlUYWciLCJzeW5jVHJlZVJlbW92ZVRhZ3NfIiwic3luY1RyZWVBcHBseVRhZ2dlZFF1ZXJ5T3ZlcndyaXRlIiwicXVlcnlLZXkiLCJzeW5jVHJlZVF1ZXJ5S2V5Rm9yVGFnXyIsInN5bmNUcmVlUGFyc2VRdWVyeUtleV8iLCJxdWVyeVBhdGgiLCJzeW5jVHJlZUFwcGx5VGFnZ2VkT3BlcmF0aW9uXyIsInN5bmNUcmVlQWRkRXZlbnRSZWdpc3RyYXRpb24iLCJza2lwU2V0dXBMaXN0ZW5lciIsImZvdW5kQW5jZXN0b3JEZWZhdWx0VmlldyIsInBhdGhUb1N5bmNQb2ludCIsInNwIiwiY2hpbGRTeW5jUG9pbnQiLCJ2aWV3QWxyZWFkeUV4aXN0cyIsInZpZXdBZGRFdmVudFJlZ2lzdHJhdGlvbiIsImluaXRpYWxDaGFuZ2VzIiwidmlld0dldEluaXRpYWxFdmVudHMiLCJzeW5jUG9pbnRBZGRFdmVudFJlZ2lzdHJhdGlvbiIsInF1ZXJpZXNUb1N0b3AiLCJjaGlsZFF1ZXJpZXMiLCJxdWVyeVRvU3RvcCIsInN5bmNUcmVlU2V0dXBMaXN0ZW5lcl8iLCJzeW5jVHJlZUNhbGNDb21wbGV0ZUV2ZW50Q2FjaGUiLCJzeW5jVHJlZUFwcGx5T3BlcmF0aW9uSGVscGVyXyIsInN5bmNQb2ludFRyZWUiLCJzeW5jVHJlZUFwcGx5T3BlcmF0aW9uRGVzY2VuZGFudHNIZWxwZXJfIiwiY2hpbGRPcGVyYXRpb24iLCJjaGlsZFNlcnZlckNhY2hlIiwiY2hpbGRXcml0ZXNDYWNoZSIsInZpZXdHZXRTZXJ2ZXJDYWNoZSIsInN5bmNUcmVlQXBwbHlUYWdnZWRMaXN0ZW5Db21wbGV0ZSIsInN5bmNUcmVlQXBwbHlMaXN0ZW5Db21wbGV0ZSIsInRvVXBwZXJDYXNlIiwiZXJyb3JGb3JTZXJ2ZXJDb2RlIiwic3BsaXRJbmRleCIsIkV4aXN0aW5nVmFsdWVQcm92aWRlciIsIkRlZmVycmVkVmFsdWVQcm92aWRlciIsInN5bmNUcmVlXyIsInBhdGhfIiwiZ2VuZXJhdGVXaXRoVmFsdWVzIiwicmVzb2x2ZURlZmVycmVkTGVhZlZhbHVlIiwiZXhpc3RpbmdWYWwiLCJzZXJ2ZXJWYWx1ZXMiLCJyZXNvbHZlU2NhbGFyRGVmZXJyZWRWYWx1ZSIsInJlc29sdmVDb21wbGV4RGVmZXJyZWRWYWx1ZSIsIm9wIiwidW51c2VkIiwiZXhpc3RpbmdOb2RlIiwicmVzb2x2ZURlZmVycmVkVmFsdWVUcmVlIiwicmVzb2x2ZURlZmVycmVkVmFsdWUiLCJyZXNvbHZlRGVmZXJyZWRWYWx1ZVNuYXBzaG90IiwicmF3UHJpIiwibGVhZk5vZGUiLCJjaGlsZHJlbk5vZGUiLCJUcmVlIiwicGFyZW50IiwiY2hpbGRDb3VudCIsInRyZWVTdWJUcmVlIiwicGF0aE9iaiIsInRyZWVHZXRWYWx1ZSIsInRyZWVTZXRWYWx1ZSIsInRyZWVVcGRhdGVQYXJlbnRzIiwidHJlZUhhc0NoaWxkcmVuIiwidHJlZUZvckVhY2hDaGlsZCIsInRyZWVGb3JFYWNoRGVzY2VuZGFudCIsImluY2x1ZGVTZWxmIiwiY2hpbGRyZW5GaXJzdCIsInRyZWVHZXRQYXRoIiwiY2hpbGRFbXB0eSIsInRyZWVJc0VtcHR5IiwiY2hpbGRFeGlzdHMiLCJ0cmVlVXBkYXRlQ2hpbGQiLCJJTlZBTElEX0tFWV9SRUdFWF8iLCJJTlZBTElEX1BBVEhfUkVHRVhfIiwiTUFYX0xFQUZfU0laRV8iLCJpc1ZhbGlkUGF0aFN0cmluZyIsInZhbGlkYXRlRmlyZWJhc2VEYXRhQXJnIiwidmFsaWRhdGVGaXJlYmFzZURhdGEiLCJlcnJvclByZWZpeCIsImhhc0RvdFZhbHVlIiwiaGFzQWN0dWFsQ2hpbGQiLCJ2YWxpZGF0aW9uUGF0aFB1c2giLCJsYXN0IiwidmFsaWRhdGlvblBhdGhQb3AiLCJ2YWxpZGF0ZVBhdGhTdHJpbmciLCJhcmd1bWVudE5hbWUiLCJ2YWxpZGF0ZVJvb3RQYXRoU3RyaW5nIiwidmFsaWRhdGVXcml0YWJsZVBhdGgiLCJFdmVudFF1ZXVlIiwiZXZlbnRMaXN0c18iLCJyZWN1cnNpb25EZXB0aF8iLCJldmVudFF1ZXVlUXVldWVFdmVudHMiLCJldmVudFF1ZXVlIiwiZXZlbnREYXRhTGlzdCIsImN1cnJMaXN0IiwiZ2V0UGF0aCIsImV2ZW50UXVldWVSYWlzZUV2ZW50c0ZvckNoYW5nZWRQYXRoIiwiY2hhbmdlZFBhdGgiLCJzZW50QWxsIiwiZXZlbnRMaXN0IiwiZXZlbnRMaXN0UmFpc2UiLCJldmVudFF1ZXVlUmFpc2VRdWV1ZWRFdmVudHNNYXRjaGluZ1ByZWRpY2F0ZSIsImV2ZW50UGF0aCIsImV2ZW50Rm4iLCJnZXRFdmVudFJ1bm5lciIsIk1BWF9UUkFOU0FDVElPTl9SRVRSSUVTIiwiUmVwbyIsImZvcmNlUmVzdENsaWVudF8iLCJhcHBDaGVja1Byb3ZpZGVyXyIsImRhdGFVcGRhdGVDb3VudCIsImV2ZW50UXVldWVfIiwibmV4dFdyaXRlSWRfIiwiaW50ZXJjZXB0U2VydmVyRGF0YUNhbGxiYWNrXyIsInRyYW5zYWN0aW9uUXVldWVUcmVlXyIsInBlcnNpc3RlbnRDb25uZWN0aW9uXyIsInJlcG9TdGFydCIsInJlcG8iLCJhdXRoT3ZlcnJpZGUiLCJzZWFyY2giLCJpc01lcmdlIiwicmVwb09uRGF0YVVwZGF0ZSIsInJlcG9PbkNvbm5lY3RTdGF0dXMiLCJjb25uZWN0U3RhdHVzIiwicmVwb1VwZGF0ZUluZm8iLCJyZXBvT25TZXJ2ZXJJbmZvVXBkYXRlIiwic3RhdHNSZXBvcnRlcl8iLCJjcmVhdG9yRnVuY3Rpb24iLCJzdGF0c01hbmFnZXJHZXRPckNyZWF0ZVJlcG9ydGVyIiwiaW5mb0RhdGFfIiwiaW5mb1N5bmNUcmVlXyIsImluZm9FdmVudHMiLCJzZXJ2ZXJTeW5jVHJlZV8iLCJyZXBvU2VydmVyVGltZSIsInJlcG9HZW5lcmF0ZVNlcnZlclZhbHVlcyIsInRhZ2dlZENoaWxkcmVuIiwicmF3IiwiY2hhbmdlVHJlZSIsInN5bmNUcmVlQXBwbHlUYWdnZWRRdWVyeU1lcmdlIiwidGFnZ2VkU25hcCIsInN5bmNUcmVlQXBwbHlTZXJ2ZXJNZXJnZSIsInJlcG9SZXJ1blRyYW5zYWN0aW9ucyIsInJlcG9Mb2ciLCJyZXNvbHZlZE9uRGlzY29ubmVjdFRyZWUiLCJyZXNvbHZlZCIsInJlcG9BYm9ydFRyYW5zYWN0aW9ucyIsInJlcG9SdW5PbkRpc2Nvbm5lY3RFdmVudHMiLCJyZXBvR2V0TmV4dFdyaXRlSWQiLCJyZXBvU2V0V2l0aFByaW9yaXR5IiwibmV3VmFsIiwibmV3Tm9kZVVucmVzb2x2ZWQiLCJjbGVhckV2ZW50cyIsInJlcG9DYWxsT25Db21wbGV0ZUNhbGxiYWNrIiwicmVwb0dldExhdGVzdFN0YXRlIiwiZXhjbHVkZVNldHMiLCJyZXBvU2VuZFJlYWR5VHJhbnNhY3Rpb25zIiwicmVwb1BydW5lQ29tcGxldGVkVHJhbnNhY3Rpb25zQmVsb3dOb2RlIiwicXVldWUiLCJyZXBvQnVpbGRUcmFuc2FjdGlvblF1ZXVlIiwiZXZlcnkiLCJzZXRzVG9JZ25vcmUiLCJ0eG4iLCJjdXJyZW50V3JpdGVJZCIsImxhdGVzdFN0YXRlIiwic25hcFRvU2VuZCIsImxhdGVzdEhhc2giLCJyZXRyeUNvdW50IiwiY3VycmVudE91dHB1dFNuYXBzaG90UmF3IiwiZGF0YVRvU2VuZCIsInBhdGhUb1NlbmQiLCJjdXJyZW50T3V0cHV0U25hcHNob3RSZXNvbHZlZCIsInVud2F0Y2hlciIsImFib3J0UmVhc29uIiwicmVwb1NlbmRUcmFuc2FjdGlvblF1ZXVlIiwicm9vdE1vc3RUcmFuc2FjdGlvbk5vZGUiLCJyZXBvR2V0QW5jZXN0b3JUcmFuc2FjdGlvbk5vZGUiLCJhYm9ydFRyYW5zYWN0aW9uIiwiY3VycmVudE5vZGUiLCJjdXJyZW50SW5wdXRTbmFwc2hvdCIsIm5ld0RhdGFOb2RlIiwib2xkV3JpdGVJZCIsIm5ld05vZGVSZXNvbHZlZCIsImFwcGx5TG9jYWxseSIsInJlcG9SZXJ1blRyYW5zYWN0aW9uUXVldWUiLCJ0cmFuc2FjdGlvbk5vZGUiLCJ0cmFuc2FjdGlvblF1ZXVlIiwicmVwb0FnZ3JlZ2F0ZVRyYW5zYWN0aW9uUXVldWVzRm9yTm9kZSIsIm9yZGVyIiwibm9kZVF1ZXVlIiwidG8iLCJ0cmVlRm9yRWFjaEFuY2VzdG9yIiwicmVwb0Fib3J0VHJhbnNhY3Rpb25zT25Ob2RlIiwibGFzdFNlbnQiLCJwYXJzZVJlcG9JbmZvIiwiZGF0YVVSTCIsInBhcnNlZFVybCIsInBhcnNlRGF0YWJhc2VVUkwiLCJzY2hlbWUiLCJzdWJkb21haW4iLCJwb3J0IiwiY29sb25JbmQiLCJzbGFzaEluZCIsInF1ZXN0aW9uTWFya0luZCIsInBhdGhTdHJpbmdEZWNvZGVkIiwicGllY2UiLCJkZWNvZGVVUklDb21wb25lbnQiLCJkZWNvZGVQYXRoIiwicXVlcnlTdHJpbmciLCJyZXN1bHRzIiwic2VnbWVudCIsImt2IiwiZGVjb2RlUXVlcnkiLCJob3N0V2l0aG91dFBvcnQiLCJkb3RJbmQiLCJQVVNIX0NIQVJTIiwibmV4dFB1c2hJZCIsImxhc3RQdXNoVGltZSIsImxhc3RSYW5kQ2hhcnMiLCJkdXBsaWNhdGVUaW1lIiwidGltZVN0YW1wQ2hhcnMiLCJEYXRhRXZlbnQiLCJzbmFwc2hvdCIsInJlZiIsImdldEV2ZW50VHlwZSIsImV4cG9ydFZhbCIsIkNhbmNlbEV2ZW50IiwiQ2FsbGJhY2tDb250ZXh0Iiwic25hcHNob3RDYWxsYmFjayIsImNhbmNlbENhbGxiYWNrIiwib25WYWx1ZSIsImV4cERhdGFTbmFwc2hvdCIsInByZXZpb3VzQ2hpbGROYW1lIiwib25DYW5jZWwiLCJoYXNDYW5jZWxDYWxsYmFjayIsInVzZXJDYWxsYmFjayIsIlF1ZXJ5SW1wbCIsIl9vcmRlckJ5Q2FsbGVkIiwiUmVmZXJlbmNlSW1wbCIsImlzRXF1YWwiLCJzYW1lUmVwbyIsInNhbWVQYXRoIiwic2FtZVF1ZXJ5SWRlbnRpZmllciIsInRvSlNPTiIsInBhdGhUb1VybEVuY29kZWRTdHJpbmciLCJwYXJlbnRQYXRoIiwiRGF0YVNuYXBzaG90IiwiX25vZGUiLCJjaGlsZFJlZiIsImV4aXN0cyIsImhhc0NoaWxkcmVuIiwiX2NoZWNrTm90RGVsZXRlZCIsIl9yb290IiwiY2FsbGJhY2tDb250ZXh0IiwiVmFsdWVFdmVudFJlZ2lzdHJhdGlvbiIsImNhY2hlZCIsInNlcnZlckNhY2hlTm9kZSIsInN5bmNUcmVlR2V0U2VydmVyVmFsdWUiLCJlcnIiLCJyZXBvR2V0VmFsdWUiLCJzeW5jUG9pbnRTZXRSZWZlcmVuY2VDb25zdHJ1Y3RvciIsInN5bmNUcmVlU2V0UmVmZXJlbmNlQ29uc3RydWN0b3IiLCJyZXBvcyIsInJlcG9NYW5hZ2VyRGF0YWJhc2VGcm9tQXBwIiwiYXV0aFByb3ZpZGVyIiwiZGJVcmwiLCJpc0VtdWxhdG9yIiwiZGJFbXVsYXRvckhvc3QiLCJhdXRoVG9rZW5Qcm92aWRlciIsImlzVmFsaWRSb290UGF0aFN0cmluZyIsInZhbGlkYXRlVXJsIiwiYXBwUmVwb3MiLCJyZXBvTWFuYWdlckNyZWF0ZVJlcG8iLCJEYXRhYmFzZSIsIl9yZXBvSW50ZXJuYWwiLCJfaW5zdGFuY2VTdGFydGVkIiwiX3Jvb3RJbnRlcm5hbCIsInJlcG9JbnRlcnJ1cHQiLCJyZXBvTWFuYWdlckRlbGV0ZVJlcG8iLCJhcGlOYW1lIiwiZ2V0RGF0YWJhc2UiLCJnZXRBcHAiLCJoZWFydGJlYXRDb250cm9sbGVyIiwiX2dldFByb3ZpZGVyIiwiZW11bGF0b3IiLCJwcm9kdWN0TmFtZSIsImVtdWxhdG9ySG9zdHMiLCJnZXREZWZhdWx0RW11bGF0b3JIb3N0Iiwic2VwYXJhdG9ySW5kZXgiLCJsYXN0SW5kZXhPZiIsImdldERlZmF1bHRFbXVsYXRvckhvc3RuYW1lQW5kUG9ydCIsInRva2VuUHJvdmlkZXIiLCJtb2NrVXNlclRva2VuIiwidWlkIiwicHJvamVjdCIsImlhdCIsInN1YiIsInVzZXJfaWQiLCJpc3MiLCJhdWQiLCJleHAiLCJhdXRoX3RpbWUiLCJmaXJlYmFzZSIsInNpZ25faW5fcHJvdmlkZXIiLCJpZGVudGl0aWVzIiwiYWxnIiwiY3JlYXRlTW9ja1VzZXJUb2tlbiIsInJlcG9NYW5hZ2VyQXBwbHlFbXVsYXRvclNldHRpbmdzIiwiY29ubmVjdERhdGFiYXNlRW11bGF0b3IiLCJzaW1wbGVMaXN0ZW4iLCJlY2hvIiwib25FY2hvIiwicmVnaXN0ZXJEYXRhYmFzZSIsImJhc2tldCIsImZpcmViYXNlRmV0Y2giLCJmZXRjaERhdGEiLCJkYlJlZiIsInJlc3VsdEFycmF5IiwicHVzaERhdGEiLCJ0aGVuYWJsZVB1c2hSZWYiLCJwdXNoUmVmIiwicmVtb3ZlRGF0YSIsInVwZGF0ZURhdGEiLCJ2YWxpZGF0aW9uIiwiYmFza2V0VmFsaWRhdGlvbiIsImV2dCIsImFkdWx0c1RpY2tldEFtb3VudCIsImNoaWxkcmVuVGlja2V0QW1vdW50IiwiaXNUaWNrZXRJbnB1dFZhbGlkIiwidmFsaWRhdGVTdWJtaXRUaWNrZXRzIiwiaXNCYXNrZXRGdWxsIiwidmFsaWRhdGVCYXNrZXRTaXplIiwiaXNWYWxpZCIsInJlZ2V4VmFsaWRhdG9yIiwiYWR1bHRzSW5wdXRFcnJvciIsImNoaWxkcmVuSW5wdXRFcnJvciIsImlubmVyVGV4dCIsInN1Ym1pdFRyaXBJRCIsInBhcmVudEVsZW1lbnQiLCJnZXRBdHRyaWJ1dGUiLCJiYXNrZXRJdGVtIiwibWF4VGlja2V0cyIsInN1bSIsInRvU3VtTGlzdCIsImFsZXJ0Iiwib3JkZXJWYWxpZGF0aW9uIiwiaXNPcmRlclZhbGlkIiwiZW1haWwiLCJvcmRlckVycm9yTmFtZSIsIm9yZGVyRXJyb3JFbWFpbCIsImNyZWF0ZVBsYWNlT3JkZXJWYXJpYWJsZXMiLCJpc0NsaWVudE5hbWVWYWxpZCIsImlzQ2xpZW50RW1haWxWYWxpZCIsImJhc2tldE9yZGVyIiwibmFtZUlucHV0IiwiZW1haWxJbnB1dCIsIm5hdmJhckNTUyIsIm1hbmFnZU5hdmJhciIsImNoYW5nZU5hdmJhclZpZXdzIiwiY2hhbmdlTmF2YmFyQmFja2dyb3VuZENvbG9yIiwib25PZmZCYXNrZXQiLCJzaG93SGlkZU5hdmJhciIsIm5hdmJhck1vYmlsZVZpZXciLCJuYXZiYXIiLCJiYXNrZXRCdG4iLCJuYXZiYXJUb2dnbGUiLCJzY3JvbGxZIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiY2hlY2tlZCIsIm92ZXJmbG93IiwibmF2YmFyQ29udGFpbmVyTW9iaWxlIiwibmF2YmFyQnRuIiwibmF2YmFyQ29udGFpbmVyIiwibmF2YmFySXRlbSIsImlubmVyV2lkdGgiLCJjaGFuZ2VDbGFzc09mRWxlbWVudExpc3QiLCJlbGVtZW50Q2xhc3MiLCJuZXdDbGFzcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJlbGUiLCJtYW5hZ2VCYXNrZXQiLCJwcmV2ZW50RGVmYXVsdCIsInBhbmVsRXhjdXJzaW9ucyIsImhpZGVTdWJtaXRUaWNrZXRzRXJyb3IiLCJzZWxlY3RlZEV4Y3Vyc2lvbiIsImV4Y3Vyc2lvbnNMaXN0IiwiZXhjdXJzaW9uSWQiLCJleGN1cnNpb24iLCJtYXRjaEV4Y3Vyc2lvbnNJRCIsImdldFRpY2tldEFtb3VudCIsImlzRXhjdXJzaW9uSW5CYXNrZXQiLCJuZXdJdGVtIiwiYWR1bHRzUHJpY2UiLCJjaGlsZHJlblByaWNlIiwiYWRkTmV3SXRlbVRvQmFza2V0IiwiYWRkQWR1bHRzVGlja2V0cyIsImFkZENoaWxkcmVuVGlja2V0cyIsInVwZGF0ZUJhc2tldCIsImFkZEl0ZW1Ub0Jhc2tldCIsInNob3dJdGVtc1F1YW50aXR5IiwiaXRlbXNMaXN0IiwiY2xlYXJTaG93blN1bW1hcnkiLCJpdGVtTGlzdEl0ZW1UZW1wbGF0ZSIsInByaWNlc0FkdWx0cyIsInByaWNlc0NoaWxkcmVuIiwiaXRlbVRvdGFsUHJpY2UiLCJjbG9uZU5vZGUiLCJpdGVtUHJpY2VzIiwidXNlSXRlbUxpc3RJdGVtVGVtcGxhdGUiLCJwYXJzZUludEJhc2tldERhdGEiLCJhZHVsdHNUaWNrZXRUZXh0IiwiY2hpbGRyZW5UaWNrZXRUZXh0IiwiaXRlbVByaWNlc1R4dFRlbXBsYXRlIiwic2hvd0l0ZW1QcmljZXMiLCJzaG93SXRlbVRvdGFsUHJpY2UiLCJzaG93QmFza2V0SXRlbXMiLCJzaG93T3JkZXJUb3RhbFByaWNlIiwic3VtbWFyeUl0ZW0iLCJiYXNrZXRJdGVtSW5kZXgiLCJyZW1vdmVCYXNrZXRJdGVtIiwiYmFza2V0QnRuUXVhbnRpdHkiLCJpdGVtc1F1YW50aXR5Iiwib3JkZXJUb3RhbFByaWNlIiwidG90YWxQcmljZSIsInBsYWNlT3JkZXIiLCJvcmRlck9iaiIsInVzZXJOYW1lIiwidXNlckVtYWlsIiwiY3JlYXRlT3JkZXJPYmoiLCJyZWxvYWQiLCJleGN1cnNpb25UZW1wbGF0ZSIsImRlc2NyaXB0aW9uIiwicHJpY2UiLCJ1c2VFeGN1cnNpb25UZW1wbGF0ZSIsInNob3dFeGN1cnNpb25zIl0sInNvdXJjZVJvb3QiOiIifQ==